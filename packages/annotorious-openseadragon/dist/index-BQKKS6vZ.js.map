{"version":3,"file":"index-BQKKS6vZ.js","sources":["../../annotorious-core/dist/annotorious-core.es.js","../../annotorious/dist/annotorious.es.js","../../../node_modules/svelte/src/runtime/internal/utils.js","../../../node_modules/svelte/src/runtime/internal/globals.js","../../../node_modules/svelte/src/runtime/internal/dom.js","../../../node_modules/svelte/src/runtime/internal/lifecycle.js","../../../node_modules/svelte/src/runtime/internal/scheduler.js","../../../node_modules/svelte/src/runtime/internal/transitions.js","../../../node_modules/svelte/src/runtime/internal/each.js","../../../node_modules/svelte/src/runtime/internal/Component.js","../../../node_modules/svelte/src/shared/version.js","../../../node_modules/svelte/src/runtime/internal/disclose-version/index.js","../../../node_modules/pixi.js/lib/extensions/Extensions.mjs","../../../node_modules/pixi.js/lib/environment-browser/browserExt.mjs","../../../node_modules/pixi.js/lib/environment-webworker/webworkerExt.mjs","../../../node_modules/pixi.js/lib/maths/point/ObservablePoint.mjs","../../../node_modules/eventemitter3/index.js","../../../node_modules/pixi.js/lib/maths/misc/const.mjs","../../../node_modules/pixi.js/lib/maths/point/Point.mjs","../../../node_modules/pixi.js/lib/maths/matrix/Matrix.mjs","../../../node_modules/pixi.js/lib/maths/matrix/groupD8.mjs","../../../node_modules/pixi.js/lib/maths/shapes/Rectangle.mjs","../../../node_modules/pixi.js/lib/utils/data/uid.mjs","../../../node_modules/pixi.js/lib/utils/logging/deprecation.mjs","../../../node_modules/pixi.js/lib/utils/misc/NOOP.mjs","../../../node_modules/pixi.js/lib/maths/misc/pow2.mjs","../../../node_modules/pixi.js/lib/scene/container/utils/definedProps.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/TextureStyle.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/TextureSource.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/BufferSource.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/TextureMatrix.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/Texture.mjs","../../../node_modules/pixi.js/lib/utils/data/updateQuadBounds.mjs","../../../node_modules/@pixi/colord/index.mjs","../../../node_modules/@pixi/colord/plugins/names.mjs","../../../node_modules/pixi.js/lib/color/Color.mjs","../../../node_modules/pixi.js/lib/culling/cullingMixin.mjs","../../../node_modules/pixi.js/lib/utils/data/removeItems.mjs","../../../node_modules/pixi.js/lib/scene/container/container-mixins/childrenHelperMixin.mjs","../../../node_modules/pixi.js/lib/filters/FilterEffect.mjs","../../../node_modules/pixi.js/lib/utils/pool/Pool.mjs","../../../node_modules/pixi.js/lib/utils/pool/PoolGroup.mjs","../../../node_modules/pixi.js/lib/rendering/mask/MaskEffectManager.mjs","../../../node_modules/pixi.js/lib/scene/container/container-mixins/effectsMixin.mjs","../../../node_modules/pixi.js/lib/scene/container/container-mixins/findMixin.mjs","../../../node_modules/pixi.js/lib/scene/container/bounds/Bounds.mjs","../../../node_modules/pixi.js/lib/scene/container/bounds/utils/matrixAndBoundsPool.mjs","../../../node_modules/pixi.js/lib/scene/container/bounds/getGlobalBounds.mjs","../../../node_modules/pixi.js/lib/utils/logging/warn.mjs","../../../node_modules/pixi.js/lib/scene/container/bounds/getLocalBounds.mjs","../../../node_modules/pixi.js/lib/scene/container/utils/checkChildrenDidChange.mjs","../../../node_modules/pixi.js/lib/scene/container/container-mixins/measureMixin.mjs","../../../node_modules/pixi.js/lib/scene/container/container-mixins/onRenderMixin.mjs","../../../node_modules/pixi.js/lib/scene/container/container-mixins/sortMixin.mjs","../../../node_modules/pixi.js/lib/scene/container/container-mixins/toLocalGlobalMixin.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/instructions/InstructionSet.mjs","../../../node_modules/pixi.js/lib/scene/container/RenderGroup.mjs","../../../node_modules/pixi.js/lib/scene/container/utils/assignWithIgnore.mjs","../../../node_modules/pixi.js/lib/scene/container/Container.mjs","../../../node_modules/pixi.js/lib/scene/sprite/Sprite.mjs","../../../node_modules/pixi.js/lib/rendering/mask/utils/addMaskBounds.mjs","../../../node_modules/pixi.js/lib/rendering/mask/utils/addMaskLocalBounds.mjs","../../../node_modules/pixi.js/lib/rendering/mask/alpha/AlphaMask.mjs","../../../node_modules/pixi.js/lib/rendering/mask/color/ColorMask.mjs","../../../node_modules/pixi.js/lib/rendering/mask/stencil/StencilMask.mjs","../../../node_modules/pixi.js/lib/environment-browser/BrowserAdapter.mjs","../../../node_modules/pixi.js/lib/environment/adapter.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/CanvasSource.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/ImageSource.mjs","../../../node_modules/pixi.js/lib/ticker/const.mjs","../../../node_modules/pixi.js/lib/ticker/TickerListener.mjs","../../../node_modules/pixi.js/lib/ticker/Ticker.mjs","../../../node_modules/pixi.js/lib/utils/browser/detectVideoAlphaMode.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/VideoSource.mjs","../../../node_modules/pixi.js/lib/assets/utils/convertToList.mjs","../../../node_modules/pixi.js/lib/assets/cache/Cache.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/utils/textureFrom.mjs","../../../node_modules/pixi.js/lib/rendering/init.mjs","../../../node_modules/pixi.js/lib/assets/loader/parsers/LoaderParser.mjs","../../../node_modules/pixi.js/lib/utils/path.mjs","../../../node_modules/pixi.js/lib/assets/utils/createStringVariations.mjs","../../../node_modules/pixi.js/lib/assets/utils/isSingleItem.mjs","../../../node_modules/pixi.js/lib/assets/resolver/Resolver.mjs","../../../node_modules/pixi.js/lib/assets/utils/copySearchParams.mjs","../../../node_modules/pixi.js/lib/spritesheet/Spritesheet.mjs","../../../node_modules/pixi.js/lib/spritesheet/spritesheetAsset.mjs","../../../node_modules/pixi.js/lib/spritesheet/init.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/BindGroup.mjs","../../../node_modules/pixi.js/lib/environment/autoDetectEnvironment.mjs","../../../node_modules/pixi.js/lib/utils/browser/unsafeEvalSupported.mjs","../../../node_modules/earcut/src/earcut.js","../../../node_modules/pixi.js/lib/rendering/renderers/gl/const.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/system/SystemRunner.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/system/AbstractRenderer.mjs","../../../node_modules/pixi.js/lib/utils/browser/isWebGLSupported.mjs","../../../node_modules/pixi.js/lib/utils/browser/isWebGPUSupported.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/autoDetectRenderer.mjs","../../../node_modules/parse-svg-path/index.js","../../../node_modules/pixi.js/lib/scene/graphics/shared/svg/SVGToGraphicsPath.mjs","../../../node_modules/pixi.js/lib/maths/shapes/Circle.mjs","../../../node_modules/pixi.js/lib/maths/shapes/Ellipse.mjs","../../../node_modules/pixi.js/lib/maths/misc/squaredDistanceToLineSegment.mjs","../../../node_modules/pixi.js/lib/maths/shapes/Polygon.mjs","../../../node_modules/pixi.js/lib/maths/shapes/RoundedRectangle.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/buffer/const.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/buffer/Buffer.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/ensureIsBuffer.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/getGeometryBounds.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/Geometry.mjs","../../../node_modules/pixi.js/lib/rendering/batcher/gpu/BatchGeometry.mjs","../../../node_modules/pixi.js/lib/rendering/batcher/shared/const.mjs","../../../node_modules/pixi.js/lib/rendering/batcher/gpu/getTextureBatchBindGroup.mjs","../../../node_modules/pixi.js/lib/utils/data/ViewableBuffer.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/buffer/utils/fastCopy.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/state/const.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs","../../../node_modules/pixi.js/lib/rendering/batcher/shared/BatchTextureArray.mjs","../../../node_modules/pixi.js/lib/rendering/batcher/shared/Batcher.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/buildUvs.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/transformVertices.mjs","../../../node_modules/pixi.js/lib/scene/container/utils/multiplyHexColors.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/BatchableGraphics.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildCircle.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/const.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/utils/getOrientationOfPoints.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildLine.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/utils/triangulateWithHoles.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildPolygon.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildRectangle.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildTriangle.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/utils/buildContextBatches.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/GraphicsContextSystem.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildAdaptiveBezier.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildAdaptiveQuadratic.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArc.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArcTo.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArcToSvg.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/path/roundShape.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/path/ShapePath.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/path/GraphicsPath.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/svg/SVGParser.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/fill/FillGradient.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/fill/FillPattern.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/utils/convertFillInputToFillStyle.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/GraphicsContext.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/Graphics.mjs","../../../node_modules/pixi.js/lib/index.mjs","../../../node_modules/quickselect/index.js","../../../node_modules/rbush/index.js","../src/annotation/pixi/stageRenderer.ts","../src/annotation/pixi/PixiLayer.svelte","../../../node_modules/uuid/dist/esm-browser/rng.js","../../../node_modules/uuid/dist/esm-browser/stringify.js","../../../node_modules/uuid/dist/esm-browser/native.js","../../../node_modules/uuid/dist/esm-browser/v4.js","../../annotorious/src/model/core/Shape.ts","../../annotorious/src/model/core/shapeUtils.ts","../../annotorious/src/model/core/ellipse/ellipseUtils.ts","../../annotorious/src/model/core/polygon/polygonUtils.ts","../../annotorious/src/model/core/rectangle/rectangleUtils.ts","../../annotorious/src/annotation/editors/polygon/PolygonEditor.svelte","../../annotorious/src/annotation/utils/touch.ts","../../annotorious/src/annotation/editors/Handle.svelte","../../annotorious/src/annotation/editors/rectangle/RectangleEditor.svelte","../../annotorious/src/annotation/editors/editorsRegistry.ts","../../annotorious/src/annotation/editors/Editor.svelte","../../annotorious/src/annotation/utils/styling.ts","../../annotorious/src/annotation/editors/EditorMount.svelte","../../annotorious/src/keyboardCommands.ts","../src/annotation/svg/OSDLayer.svelte","../src/annotation/svg/drawing/OSDToolMount.svelte","../src/annotation/svg/drawing/SVGDrawingLayer.svelte","../src/annotation/svg/presence/SVGPresenceLabel.svelte","../src/annotation/svg/presence/shapes/PresencePolygon.svelte","../src/annotation/svg/presence/shapes/PresenceRectangle.svelte","../src/annotation/svg/presence/SVGPresenceLayer.svelte","../src/themes/setTheme.ts","../src/api/fitBounds.ts","../src/Annotorious.ts","../src/index.ts"],"sourcesContent":["var j = Object.prototype.hasOwnProperty;\nfunction B(e, n) {\n  var t, o;\n  if (e === n)\n    return !0;\n  if (e && n && (t = e.constructor) === n.constructor) {\n    if (t === Date)\n      return e.getTime() === n.getTime();\n    if (t === RegExp)\n      return e.toString() === n.toString();\n    if (t === Array) {\n      if ((o = e.length) === n.length)\n        for (; o-- && B(e[o], n[o]); )\n          ;\n      return o === -1;\n    }\n    if (!t || typeof e == \"object\") {\n      o = 0;\n      for (t in e)\n        if (j.call(e, t) && ++o && !j.call(n, t) || !(t in n) || !B(e[t], n[t]))\n          return !1;\n      return Object.keys(n).length === o;\n    }\n  }\n  return e !== e && n !== n;\n}\nfunction z() {\n}\nfunction q(e, n) {\n  return e != e ? n == n : e !== n || e && typeof e == \"object\" || typeof e == \"function\";\n}\nconst k = [];\nfunction Y(e, n = z) {\n  let t;\n  const o = /* @__PURE__ */ new Set();\n  function i(E) {\n    if (q(e, E) && (e = E, t)) {\n      const y = !k.length;\n      for (const u of o)\n        u[1](), k.push(u, e);\n      if (y) {\n        for (let u = 0; u < k.length; u += 2)\n          k[u][0](k[u + 1]);\n        k.length = 0;\n      }\n    }\n  }\n  function p(E) {\n    i(E(e));\n  }\n  function L(E, y = z) {\n    const u = [E, y];\n    return o.add(u), o.size === 1 && (t = n(i, p) || z), E(e), () => {\n      o.delete(u), o.size === 0 && t && (t(), t = null);\n    };\n  }\n  return { set: i, update: p, subscribe: L };\n}\nconst Ce = (e) => {\n  const { subscribe: n, set: t } = Y();\n  let o;\n  return n((i) => o = i), e.observe(({ changes: i }) => {\n    if (o) {\n      (i.deleted || []).some((E) => E.id === o) && t(void 0);\n      const L = (i.updated || []).find(({ oldValue: E }) => E.id === o);\n      L && t(L.newValue.id);\n    }\n  }), {\n    get current() {\n      return o;\n    },\n    subscribe: n,\n    set: t\n  };\n};\nvar G = /* @__PURE__ */ ((e) => (e.EDIT = \"EDIT\", e.SELECT = \"SELECT\", e.NONE = \"NONE\", e))(G || {});\nconst V = { selected: [] }, we = (e, n = \"EDIT\") => {\n  const { subscribe: t, set: o } = Y(V);\n  let i = V;\n  t((s) => i = s);\n  const p = () => o(V), L = () => {\n    var s;\n    return ((s = i.selected) == null ? void 0 : s.length) === 0;\n  }, E = (s) => {\n    if (i.selected.length === 0)\n      return !1;\n    const h = typeof s == \"string\" ? s : s.id;\n    return i.selected.some((w) => w.id === h);\n  }, y = (s, h) => {\n    const w = e.getAnnotation(s);\n    if (w) {\n      const b = H(w, n);\n      o(b === \"EDIT\" ? { selected: [{ id: s, editable: !0 }], pointerEvent: h } : b === \"SELECT\" ? { selected: [{ id: s }], pointerEvent: h } : { selected: [], pointerEvent: h });\n    } else\n      console.warn(\"Invalid selection: \" + s);\n  }, u = (s, h = !0) => {\n    const w = Array.isArray(s) ? s : [s], b = w.map((S) => e.getAnnotation(S)).filter(Boolean);\n    o({ selected: b.map(({ id: S }) => ({ id: S, editable: h })) }), b.length !== w.length && console.warn(\"Invalid selection\", s);\n  }, U = (s) => {\n    if (i.selected.length === 0)\n      return !1;\n    const { selected: h } = i;\n    h.filter(({ id: b }) => s.includes(b)).length > 0 && o({ selected: h.filter(({ id: b }) => !s.includes(b)) });\n  };\n  return e.observe(({ changes: s }) => U((s.deleted || []).map((h) => h.id))), {\n    clear: p,\n    clickSelect: y,\n    get selected() {\n      return i ? [...i.selected] : null;\n    },\n    get pointerEvent() {\n      return i ? i.pointerEvent : null;\n    },\n    isEmpty: L,\n    isSelected: E,\n    setSelected: u,\n    subscribe: t\n  };\n}, H = (e, n) => typeof n == \"function\" ? n(e) || \"EDIT\" : n || \"EDIT\";\nlet $;\nconst F = new Uint8Array(16);\nfunction J() {\n  if (!$ && ($ = typeof crypto < \"u\" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto), !$))\n    throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");\n  return $(F);\n}\nconst D = [];\nfor (let e = 0; e < 256; ++e)\n  D.push((e + 256).toString(16).slice(1));\nfunction Q(e, n = 0) {\n  return D[e[n + 0]] + D[e[n + 1]] + D[e[n + 2]] + D[e[n + 3]] + \"-\" + D[e[n + 4]] + D[e[n + 5]] + \"-\" + D[e[n + 6]] + D[e[n + 7]] + \"-\" + D[e[n + 8]] + D[e[n + 9]] + \"-\" + D[e[n + 10]] + D[e[n + 11]] + D[e[n + 12]] + D[e[n + 13]] + D[e[n + 14]] + D[e[n + 15]];\n}\nconst X = typeof crypto < \"u\" && crypto.randomUUID && crypto.randomUUID.bind(crypto), M = {\n  randomUUID: X\n};\nfunction Z(e, n, t) {\n  if (M.randomUUID && !n && !e)\n    return M.randomUUID();\n  e = e || {};\n  const o = e.random || (e.rng || J)();\n  return o[6] = o[6] & 15 | 64, o[8] = o[8] & 63 | 128, Q(o);\n}\nconst Le = (e) => {\n  const { creator: n, updatedBy: t } = e.target, o = e.bodies.reduce((i, p) => [...i, p.creator, p.updatedBy].filter(Boolean), []);\n  return [\n    n,\n    t,\n    ...o\n  ].filter((i) => i);\n}, Ue = (e, n, t, o) => ({\n  id: Z(),\n  annotation: e.id,\n  created: t || /* @__PURE__ */ new Date(),\n  creator: o,\n  ...n\n}), K = (e, n) => {\n  const t = new Set(e.bodies.map((o) => o.id));\n  return n.bodies.filter((o) => !t.has(o.id));\n}, ee = (e, n) => {\n  const t = new Set(n.bodies.map((o) => o.id));\n  return e.bodies.filter((o) => !t.has(o.id));\n}, te = (e, n) => n.bodies.map((t) => {\n  const o = e.bodies.find((i) => i.id === t.id);\n  return { newBody: t, oldBody: o && !B(o, t) ? o : void 0 };\n}).filter(({ oldBody: t }) => t).map(({ oldBody: t, newBody: o }) => ({ oldBody: t, newBody: o })), ne = (e, n) => !B(e.target, n.target), P = (e, n) => {\n  const t = K(e, n), o = ee(e, n), i = te(e, n);\n  return {\n    oldValue: e,\n    newValue: n,\n    bodiesCreated: t.length > 0 ? t : void 0,\n    bodiesDeleted: o.length > 0 ? o : void 0,\n    bodiesUpdated: i.length > 0 ? i : void 0,\n    targetUpdated: ne(e, n) ? { oldTarget: e.target, newTarget: n.target } : void 0\n  };\n};\nvar oe = /* @__PURE__ */ ((e) => (e.BODY_ONLY = \"BODY_ONLY\", e.TARGET_ONLY = \"TARGET_ONLY\", e))(oe || {}), O = /* @__PURE__ */ ((e) => (e.LOCAL = \"LOCAL\", e.REMOTE = \"REMOTE\", e))(O || {});\nconst se = (e, n) => {\n  var p, L;\n  const { changes: t, origin: o } = n;\n  if (!(!e.options.origin || e.options.origin === o))\n    return !1;\n  if (e.options.ignore) {\n    const { ignore: E } = e.options, y = (U) => U && U.length > 0;\n    if (!(y(t.created) || y(t.deleted))) {\n      const U = (p = t.updated) == null ? void 0 : p.some((h) => y(h.bodiesCreated) || y(h.bodiesDeleted) || y(h.bodiesUpdated)), s = (L = t.updated) == null ? void 0 : L.some((h) => h.targetUpdated);\n      if (E === \"BODY_ONLY\" && U && !s || E === \"TARGET_ONLY\" && s && !U)\n        return !1;\n    }\n  }\n  if (e.options.annotations) {\n    const E = /* @__PURE__ */ new Set([\n      ...(t.created || []).map((u) => u.id),\n      ...(t.deleted || []).map((u) => u.id),\n      ...(t.updated || []).map(({ oldValue: u }) => u.id)\n    ]);\n    return !!(Array.isArray(e.options.annotations) ? e.options.annotations : [e.options.annotations]).find((u) => E.has(u));\n  } else\n    return !0;\n}, ie = (e, n) => {\n  const t = new Set((e.created || []).map((s) => s.id)), o = new Set((e.updated || []).map(({ newValue: s }) => s.id)), i = new Set((n.created || []).map((s) => s.id)), p = new Set((n.deleted || []).map((s) => s.id)), L = new Set((n.updated || []).map(({ oldValue: s }) => s.id)), E = new Set((n.updated || []).filter(({ oldValue: s }) => t.has(s.id) || o.has(s.id)).map(({ oldValue: s }) => s.id)), y = [\n    ...(e.created || []).filter((s) => !p.has(s.id)).map((s) => L.has(s.id) ? n.updated.find(({ oldValue: h }) => h.id === s.id).newValue : s),\n    ...n.created || []\n  ], u = [\n    ...(e.deleted || []).filter((s) => !i.has(s.id)),\n    ...(n.deleted || []).filter((s) => !t.has(s.id))\n  ], U = [\n    ...(e.updated || []).filter(({ newValue: s }) => !p.has(s.id)).map((s) => {\n      const { oldValue: h, newValue: w } = s;\n      if (L.has(w.id)) {\n        const b = n.updated.find((S) => S.oldValue.id === w.id).newValue;\n        return P(h, b);\n      } else\n        return s;\n    }),\n    ...(n.updated || []).filter(({ oldValue: s }) => !E.has(s.id))\n  ];\n  return { created: y, deleted: u, updated: U };\n}, de = (e) => e.id !== void 0, Se = () => {\n  const e = /* @__PURE__ */ new Map(), n = /* @__PURE__ */ new Map(), t = [], o = (d, r = {}) => t.push({ onChange: d, options: r }), i = (d) => {\n    const r = t.findIndex((c) => c.onChange == d);\n    r > -1 && t.splice(r, 1);\n  }, p = (d, r) => {\n    const c = {\n      origin: d,\n      changes: {\n        created: r.created || [],\n        updated: r.updated || [],\n        deleted: r.deleted || []\n      },\n      state: [...e.values()]\n    };\n    t.forEach((f) => {\n      se(f, c) && f.onChange(c);\n    });\n  }, L = (d, r = O.LOCAL) => {\n    if (e.get(d.id))\n      throw Error(`Cannot add annotation ${d.id} - exists already`);\n    e.set(d.id, d), d.bodies.forEach((f) => n.set(f.id, d.id)), p(r, { created: [d] });\n  }, E = (d, r) => {\n    const c = typeof d == \"string\" ? r : d, f = typeof d == \"string\" ? d : d.id, C = e.get(f);\n    if (C) {\n      const T = P(C, c);\n      return f === c.id ? e.set(f, c) : (e.delete(f), e.set(c.id, c)), C.bodies.forEach((I) => n.delete(I.id)), c.bodies.forEach((I) => n.set(I.id, c.id)), T;\n    } else\n      console.warn(`Cannot update annotation ${f} - does not exist`);\n  }, y = (d, r = O.LOCAL, c = O.LOCAL) => {\n    const f = de(r) ? c : r, C = E(d, r);\n    C && p(f, { updated: [C] });\n  }, u = (d, r = O.LOCAL) => {\n    const c = d.reduce((f, C) => {\n      const T = E(C);\n      return T ? [...f, T] : f;\n    }, []);\n    c.length > 0 && p(r, { updated: c });\n  }, U = (d, r = O.LOCAL) => {\n    const c = e.get(d.annotation);\n    if (c) {\n      const f = {\n        ...c,\n        bodies: [...c.bodies, d]\n      };\n      e.set(c.id, f), n.set(d.id, f.id), p(r, { updated: [{\n        oldValue: c,\n        newValue: f,\n        bodiesCreated: [d]\n      }] });\n    } else\n      console.warn(`Attempt to add body to missing annotation: ${d.annotation}`);\n  }, s = () => [...e.values()], h = (d = O.LOCAL) => {\n    const r = [...e.values()];\n    e.clear(), n.clear(), p(d, { deleted: r });\n  }, w = (d, r = !0, c = O.LOCAL) => {\n    if (r) {\n      const f = [...e.values()];\n      e.clear(), n.clear(), d.forEach((C) => {\n        e.set(C.id, C), C.bodies.forEach((T) => n.set(T.id, C.id));\n      }), p(c, { created: d, deleted: f });\n    } else {\n      const f = d.reduce((C, T) => {\n        const I = e.get(T.id);\n        return I ? [...C, I] : C;\n      }, []);\n      if (f.length > 0)\n        throw Error(`Bulk insert would overwrite the following annotations: ${f.map((C) => C.id).join(\", \")}`);\n      d.forEach((C) => {\n        e.set(C.id, C), C.bodies.forEach((T) => n.set(T.id, C.id));\n      }), p(c, { created: d });\n    }\n  }, b = (d) => {\n    const r = typeof d == \"string\" ? d : d.id, c = e.get(r);\n    if (c)\n      return e.delete(r), c.bodies.forEach((f) => n.delete(f.id)), c;\n    console.warn(`Attempt to delete missing annotation: ${r}`);\n  }, S = (d, r = O.LOCAL) => {\n    const c = b(d);\n    c && p(r, { deleted: [c] });\n  }, v = (d, r = O.LOCAL) => {\n    const c = d.reduce((f, C) => {\n      const T = b(C);\n      return T ? [...f, T] : f;\n    }, []);\n    c.length > 0 && p(r, { deleted: c });\n  }, l = (d) => {\n    const r = e.get(d.annotation);\n    if (r) {\n      const c = r.bodies.find((f) => f.id === d.id);\n      if (c) {\n        n.delete(c.id);\n        const f = {\n          ...r,\n          bodies: r.bodies.filter((T) => T.id !== d.id)\n        };\n        return e.set(r.id, f), {\n          oldValue: r,\n          newValue: f,\n          bodiesDeleted: [c]\n        };\n      } else\n        console.warn(`Attempt to delete missing body ${d.id} from annotation ${d.annotation}`);\n    } else\n      console.warn(`Attempt to delete body from missing annotation ${d.annotation}`);\n  }, g = (d, r = O.LOCAL) => {\n    const c = l(d);\n    c && p(r, { updated: [c] });\n  }, a = (d, r = O.LOCAL) => {\n    const c = d.map((f) => l(f)).filter(Boolean);\n    c.length > 0 && p(r, { updated: c });\n  }, A = (d) => {\n    const r = e.get(d);\n    return r ? { ...r } : void 0;\n  }, m = (d) => {\n    const r = n.get(d);\n    if (r) {\n      const f = A(r).bodies.find((C) => C.id === d);\n      if (f)\n        return f;\n      console.error(`Store integrity error: body ${d} in index, but not in annotation`);\n    } else\n      console.warn(`Attempt to retrieve missing body: ${d}`);\n  }, R = (d, r) => {\n    if (d.annotation !== r.annotation)\n      throw \"Annotation integrity violation: annotation ID must be the same when updating bodies\";\n    const c = e.get(d.annotation);\n    if (c) {\n      const f = c.bodies.find((T) => T.id === d.id), C = {\n        ...c,\n        bodies: c.bodies.map((T) => T.id === f.id ? r : T)\n      };\n      return e.set(c.id, C), f.id !== r.id && (n.delete(f.id), n.set(r.id, C.id)), {\n        oldValue: c,\n        newValue: C,\n        bodiesUpdated: [{ oldBody: f, newBody: r }]\n      };\n    } else\n      console.warn(`Attempt to add body to missing annotation ${d.annotation}`);\n  }, N = (d, r, c = O.LOCAL) => {\n    const f = R(d, r);\n    f && p(c, { updated: [f] });\n  }, x = (d, r = O.LOCAL) => {\n    const c = d.map((f) => R({ id: f.id, annotation: f.annotation }, f)).filter(Boolean);\n    p(r, { updated: c });\n  }, _ = (d) => {\n    const r = e.get(d.annotation);\n    if (r) {\n      const c = {\n        ...r,\n        target: {\n          ...r.target,\n          ...d\n        }\n      };\n      return e.set(r.id, c), {\n        oldValue: r,\n        newValue: c,\n        targetUpdated: {\n          oldTarget: r.target,\n          newTarget: d\n        }\n      };\n    } else\n      console.warn(`Attempt to update target on missing annotation: ${d.annotation}`);\n  };\n  return {\n    addAnnotation: L,\n    addBody: U,\n    all: s,\n    bulkAddAnnotation: w,\n    bulkDeleteAnnotation: v,\n    bulkDeleteBodies: a,\n    bulkUpdateAnnotation: u,\n    bulkUpdateBodies: x,\n    bulkUpdateTargets: (d, r = O.LOCAL) => {\n      const c = d.map((f) => _(f)).filter(Boolean);\n      c.length > 0 && p(r, { updated: c });\n    },\n    clear: h,\n    deleteAnnotation: S,\n    deleteBody: g,\n    getAnnotation: A,\n    getBody: m,\n    observe: o,\n    unobserve: i,\n    updateAnnotation: y,\n    updateBody: N,\n    updateTarget: (d, r = O.LOCAL) => {\n      const c = _(d);\n      c && p(r, { updated: [c] });\n    }\n  };\n}, Oe = (e) => ({\n  ...e,\n  subscribe: (t) => {\n    const o = (i) => t(i.state);\n    return e.observe(o), t(e.all()), () => e.unobserve(o);\n  }\n});\nlet W = () => ({\n  emit(e, ...n) {\n    for (let t = 0, o = this.events[e] || [], i = o.length; t < i; t++)\n      o[t](...n);\n  },\n  events: {},\n  on(e, n) {\n    var t;\n    return ((t = this.events)[e] || (t[e] = [])).push(n), () => {\n      var o;\n      this.events[e] = (o = this.events[e]) == null ? void 0 : o.filter((i) => n !== i);\n    };\n  }\n});\nconst ae = 250, Te = (e) => {\n  const n = W(), t = [];\n  let o = -1, i = !1, p = 0;\n  const L = (a) => {\n    if (!i) {\n      const { changes: A } = a, m = performance.now();\n      if (m - p > ae)\n        t.splice(o + 1), t.push(A), o = t.length - 1;\n      else {\n        const R = t.length - 1;\n        t[R] = ie(t[R], A);\n      }\n      p = m;\n    }\n    i = !1;\n  };\n  e.observe(L, { origin: O.LOCAL });\n  const E = (a) => a && a.length > 0 && e.bulkDeleteAnnotation(a), y = (a) => a && a.length > 0 && e.bulkAddAnnotation(a, !1), u = (a) => a && a.length > 0 && e.bulkUpdateAnnotation(a.map(({ oldValue: A }) => A)), U = (a) => a && a.length > 0 && e.bulkUpdateAnnotation(a.map(({ newValue: A }) => A)), s = (a) => a && a.length > 0 && e.bulkAddAnnotation(a, !1), h = (a) => a && a.length > 0 && e.bulkDeleteAnnotation(a);\n  return {\n    canRedo: () => t.length - 1 > o,\n    canUndo: () => o > -1,\n    destroy: () => e.unobserve(L),\n    on: (a, A) => n.on(a, A),\n    redo: () => {\n      if (t.length - 1 > o) {\n        i = !0;\n        const { created: a, updated: A, deleted: m } = t[o + 1];\n        y(a), U(A), h(m), n.emit(\"redo\", t[o + 1]), o += 1;\n      }\n    },\n    undo: () => {\n      if (o > -1) {\n        i = !0;\n        const { created: a, updated: A, deleted: m } = t[o];\n        E(a), u(A), s(m), n.emit(\"undo\", t[o]), o -= 1;\n      }\n    }\n  };\n}, De = () => {\n  const { subscribe: e, set: n } = Y([]);\n  return {\n    subscribe: e,\n    set: n\n  };\n}, Re = (e, n, t, o) => {\n  const { store: i, selection: p, hover: L, viewport: E } = e, y = /* @__PURE__ */ new Map();\n  let u = [], U, s;\n  const h = (l, g) => {\n    y.has(l) ? y.get(l).push(g) : y.set(l, [g]);\n  }, w = (l, g) => {\n    const a = y.get(l);\n    a && a.indexOf(g) > 0 && a.splice(a.indexOf(g), 1);\n  }, b = (l, g, a) => {\n    y.has(l) && setTimeout(() => {\n      y.get(l).forEach((A) => {\n        if (t) {\n          const m = Array.isArray(g) ? g.map((N) => t.serialize(N)) : t.serialize(g), R = a ? a instanceof PointerEvent ? a : t.serialize(a) : void 0;\n          A(m, R);\n        } else\n          A(g, a);\n      });\n    }, 1);\n  }, S = () => {\n    const { selected: l } = p, g = (l || []).map(({ id: a }) => i.getAnnotation(a));\n    g.forEach((a) => {\n      const A = u.find((m) => m.id === a.id);\n      (!A || !B(A, a)) && b(\"updateAnnotation\", a, A);\n    }), u = u.map((a) => {\n      const A = g.find(({ id: m }) => m === a.id);\n      return A || a;\n    });\n  };\n  p.subscribe(({ selected: l }) => {\n    if (!(u.length === 0 && l.length === 0)) {\n      if (u.length === 0 && l.length > 0)\n        u = l.map(({ id: g }) => i.getAnnotation(g));\n      else if (u.length > 0 && l.length === 0)\n        u.forEach((g) => {\n          const a = i.getAnnotation(g.id);\n          a && !B(a, g) && b(\"updateAnnotation\", a, g);\n        }), u = [];\n      else {\n        const g = new Set(u.map((m) => m.id)), a = new Set(l.map(({ id: m }) => m));\n        u.filter((m) => !a.has(m.id)).forEach((m) => {\n          const R = i.getAnnotation(m.id);\n          R && !B(R, m) && b(\"updateAnnotation\", R, m);\n        }), u = [\n          // Remove annotations that were deselected\n          ...u.filter((m) => a.has(m.id)),\n          // Add editable annotations that were selected\n          ...l.filter(({ id: m }) => !g.has(m)).map(({ id: m }) => i.getAnnotation(m))\n        ];\n      }\n      b(\"selectionChanged\", u);\n    }\n  }), L.subscribe((l) => {\n    !U && l ? b(\"mouseEnterAnnotation\", i.getAnnotation(l)) : U && !l ? b(\"mouseLeaveAnnotation\", i.getAnnotation(U)) : U && l && (b(\"mouseLeaveAnnotation\", i.getAnnotation(U)), b(\"mouseEnterAnnotation\", i.getAnnotation(l))), U = l;\n  }), E == null || E.subscribe((l) => b(\"viewportIntersect\", l.map((g) => i.getAnnotation(g)))), i.observe((l) => {\n    o && (s && clearTimeout(s), s = setTimeout(S, 1e3));\n    const { created: g, deleted: a } = l.changes;\n    (g || []).forEach((m) => b(\"createAnnotation\", m)), (a || []).forEach((m) => b(\"deleteAnnotation\", m)), (l.changes.updated || []).filter((m) => [\n      ...m.bodiesCreated || [],\n      ...m.bodiesDeleted || [],\n      ...m.bodiesUpdated || []\n    ].length > 0).forEach(({ oldValue: m, newValue: R }) => {\n      const N = u.find((x) => x.id === m.id) || m;\n      u = u.map((x) => x.id === m.id ? R : x), b(\"updateAnnotation\", R, N);\n    });\n  }, { origin: O.LOCAL }), i.observe((l) => {\n    if (u) {\n      const g = new Set(u.map((A) => A.id)), a = (l.changes.updated || []).filter(({ newValue: A }) => g.has(A.id)).map(({ newValue: A }) => A);\n      a.length > 0 && (u = u.map((A) => {\n        const m = a.find((R) => R.id === A.id);\n        return m || A;\n      }));\n    }\n  }, { origin: O.REMOTE });\n  const v = (l) => (g) => {\n    const { updated: a } = g;\n    l ? (a || []).forEach((A) => b(\"updateAnnotation\", A.oldValue, A.newValue)) : (a || []).forEach((A) => b(\"updateAnnotation\", A.newValue, A.oldValue));\n  };\n  return n.on(\"undo\", v(!0)), n.on(\"redo\", v(!1)), { on: h, off: w, emit: b };\n}, Be = (e) => (n) => n.map((t) => e.serialize(t)), re = (e) => (n) => n.reduce((t, o) => {\n  const { parsed: i, error: p } = e.parse(o);\n  return p ? {\n    parsed: t.parsed,\n    failed: [...t.failed, o]\n  } : i ? {\n    parsed: [...t.parsed, i],\n    failed: t.failed\n  } : {\n    ...t\n  };\n}, { parsed: [], failed: [] }), xe = (e, n, t) => {\n  const { store: o, selection: i } = e, p = (v) => {\n    if (t) {\n      const { parsed: l, error: g } = t.parse(v);\n      l ? o.addAnnotation(l, O.REMOTE) : console.error(g);\n    } else\n      o.addAnnotation(v, O.REMOTE);\n  }, L = () => i.clear(), E = () => o.clear(), y = (v) => {\n    const l = o.getAnnotation(v);\n    return t && l ? t.serialize(l) : l;\n  }, u = () => t ? o.all().map(t.serialize) : o.all(), U = () => {\n    var g;\n    const l = (((g = i.selected) == null ? void 0 : g.map((a) => a.id)) || []).map((a) => o.getAnnotation(a)).filter(Boolean);\n    return t ? l.map(t.serialize) : l;\n  }, s = (v, l = !0) => fetch(v).then((g) => g.json()).then((g) => (w(g, l), g)), h = (v) => {\n    if (typeof v == \"string\") {\n      const l = o.getAnnotation(v);\n      if (o.deleteAnnotation(v), l)\n        return t ? t.serialize(l) : l;\n    } else {\n      const l = t ? t.parse(v).parsed : v;\n      if (l)\n        return o.deleteAnnotation(l), v;\n    }\n  }, w = (v, l = !0) => {\n    if (t) {\n      const { parsed: g, failed: a } = re(t)(v);\n      a.length > 0 && console.warn(`Discarded ${a.length} invalid annotations`, a), o.bulkAddAnnotation(g, l, O.REMOTE);\n    } else\n      o.bulkAddAnnotation(v, l, O.REMOTE);\n  }, b = (v) => {\n    v ? i.setSelected(v) : i.clear();\n  }, S = (v) => {\n    if (t) {\n      const l = t.parse(v).parsed, g = t.serialize(o.getAnnotation(l.id));\n      return o.updateAnnotation(l), g;\n    } else {\n      const l = o.getAnnotation(v.id);\n      return o.updateAnnotation(v), l;\n    }\n  };\n  return {\n    addAnnotation: p,\n    cancelSelected: L,\n    canRedo: n.canRedo,\n    canUndo: n.canUndo,\n    clearAnnotations: E,\n    getAnnotationById: y,\n    getAnnotations: u,\n    getSelected: U,\n    loadAnnotations: s,\n    redo: n.redo,\n    removeAnnotation: h,\n    setAnnotations: w,\n    setSelected: b,\n    undo: n.undo,\n    updateAnnotation: S\n  };\n}, ce = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\nlet le = (e) => crypto.getRandomValues(new Uint8Array(e)), ue = (e, n, t) => {\n  let o = (2 << Math.log(e.length - 1) / Math.LN2) - 1, i = -~(1.6 * o * n / e.length);\n  return (p = n) => {\n    let L = \"\";\n    for (; ; ) {\n      let E = t(i), y = i;\n      for (; y--; )\n        if (L += e[E[y] & o] || \"\", L.length === p)\n          return L;\n    }\n  };\n}, fe = (e, n = 21) => ue(e, n, le), pe = (e = 21) => {\n  let n = \"\", t = crypto.getRandomValues(new Uint8Array(e));\n  for (; e--; )\n    n += ce[t[e] & 63];\n  return n;\n};\nconst Ie = () => ({ isGuest: !0, id: fe(\"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_\", 20)() }), he = (e) => {\n  const n = JSON.stringify(e);\n  let t = 0;\n  for (let o = 0, i = n.length; o < i; o++) {\n    let p = n.charCodeAt(o);\n    t = (t << 5) - t + p, t |= 0;\n  }\n  return `${t}`;\n}, ge = (e) => e ? typeof e == \"object\" ? { ...e } : e : void 0, ke = (e, n) => (Array.isArray(e) ? e : [e]).map((t) => {\n  const { id: o, type: i, purpose: p, value: L, created: E, creator: y, ...u } = t;\n  return {\n    id: o || `temp-${he(t)}`,\n    annotation: n,\n    type: i,\n    purpose: p,\n    value: L,\n    created: E ? new Date(E) : void 0,\n    creator: ge(y),\n    ...u\n  };\n}), Ne = (e) => e.map((n) => {\n  var o, i;\n  const t = { ...n };\n  return delete t.annotation, (o = t.id) != null && o.startsWith(\"temp-\") && delete t.id, { ...t, created: (i = t.created) == null ? void 0 : i.toISOString() };\n}), me = [\n  \"#ff7c00\",\n  // orange\n  \"#1ac938\",\n  // green\n  \"#e8000b\",\n  // red\n  \"#8b2be2\",\n  // purple\n  \"#9f4800\",\n  // brown\n  \"#f14cc1\",\n  // pink\n  \"#ffc400\",\n  // khaki\n  \"#00d7ff\",\n  // cyan\n  \"#023eff\"\n  // blue\n], Ae = () => {\n  const e = [...me];\n  return { assignRandomColor: () => {\n    const o = Math.floor(Math.random() * e.length), i = e[o];\n    return e.splice(o, 1), i;\n  }, releaseColor: (o) => e.push(o) };\n}, be = () => {\n  const e = Ae();\n  return { addUser: (o, i) => {\n    const p = e.assignRandomColor();\n    return {\n      label: i.name || i.id,\n      avatar: i.avatar,\n      color: p\n    };\n  }, removeUser: (o) => e.releaseColor(o.appearance.color) };\n}, Ee = (e, n) => e.every((t) => e.includes(t)) && n.every((t) => e.includes(t)), $e = pe(), ze = (e = be()) => {\n  const n = W(), t = /* @__PURE__ */ new Map(), o = /* @__PURE__ */ new Map(), i = (s, h) => {\n    if (t.has(s)) {\n      console.warn(\"Attempt to add user that is already present\", s, h);\n      return;\n    }\n    const w = e.addUser(s, h);\n    t.set(s, {\n      ...h,\n      presenceKey: s,\n      appearance: w\n    });\n  }, p = (s) => {\n    const h = t.get(s);\n    if (!h) {\n      console.warn(\"Attempt to remove user that is not present\", s);\n      return;\n    }\n    e.removeUser(h), t.delete(s);\n  }, L = (s) => {\n    const h = new Set(s.map((S) => S.presenceKey)), w = s.filter(({ presenceKey: S }) => !t.has(S)), b = Array.from(t.values()).filter((S) => !h.has(S.presenceKey));\n    w.forEach(({ presenceKey: S, user: v }) => i(S, v)), b.forEach((S) => {\n      const { presenceKey: v } = S;\n      o.has(v) && n.emit(\"selectionChange\", S, null), p(v);\n    }), (w.length > 0 || b.length > 0) && n.emit(\"presence\", u());\n  }, E = (s, h) => {\n    const w = t.get(s);\n    if (!w) {\n      console.warn(\"Activity notification from user that is not present\");\n      return;\n    }\n    const b = o.get(s);\n    (!b || !Ee(b, h)) && (o.set(s, h), n.emit(\"selectionChange\", w, h));\n  }, y = (s, h) => {\n    const w = t.get(s);\n    if (!w) {\n      console.warn(\"Selection change for user that is not present\", s);\n      return;\n    }\n    h ? o.set(s, h) : o.delete(s), n.emit(\"selectionChange\", w, h);\n  }, u = () => [...Array.from(t.values())];\n  return {\n    getPresentUsers: u,\n    notifyActivity: E,\n    on: (s, h) => n.on(s, h),\n    syncUsers: L,\n    updateSelection: y\n  };\n};\nexport {\n  oe as Ignore,\n  O as Origin,\n  $e as PRESENCE_KEY,\n  G as PointerSelectAction,\n  Ie as createAnonymousGuest,\n  xe as createBaseAnnotator,\n  Ue as createBody,\n  be as createDefaultAppearenceProvider,\n  Ce as createHoverState,\n  Re as createLifecyleObserver,\n  ze as createPresenceState,\n  we as createSelectionState,\n  Se as createStore,\n  Te as createUndoStack,\n  De as createViewportState,\n  Ae as defaultColorProvider,\n  P as diffAnnotations,\n  Le as getContributors,\n  ie as mergeChanges,\n  H as onPointerSelect,\n  re as parseAll,\n  ke as parseW3CBodies,\n  ge as parseW3CUser,\n  Be as serializeAll,\n  Ne as serializeW3CBodies,\n  se as shouldNotify,\n  Oe as toSvelteStore\n};\n//# sourceMappingURL=annotorious-core.es.js.map\n","var nn = Object.defineProperty;\nvar on = (e, t, n) => t in e ? nn(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n;\nvar Ke = (e, t, n) => (on(e, typeof t != \"symbol\" ? t + \"\" : t, n), n);\nfunction F() {\n}\nfunction nt(e, t) {\n  for (const n in t)\n    e[n] = t[n];\n  return (\n    /** @type {T & S} */\n    e\n  );\n}\nfunction Ut(e) {\n  return e();\n}\nfunction dt() {\n  return /* @__PURE__ */ Object.create(null);\n}\nfunction ce(e) {\n  e.forEach(Ut);\n}\nfunction K(e) {\n  return typeof e == \"function\";\n}\nfunction J(e, t) {\n  return e != e ? t == t : e !== t || e && typeof e == \"object\" || typeof e == \"function\";\n}\nfunction sn(e) {\n  return Object.keys(e).length === 0;\n}\nfunction Vt(e, ...t) {\n  if (e == null) {\n    for (const o of t)\n      o(void 0);\n    return F;\n  }\n  const n = e.subscribe(...t);\n  return n.unsubscribe ? () => n.unsubscribe() : n;\n}\nfunction ht(e, t, n) {\n  e.$$.on_destroy.push(Vt(t, n));\n}\nfunction rn(e, t, n, o) {\n  if (e) {\n    const i = Gt(e, t, n, o);\n    return e[0](i);\n  }\n}\nfunction Gt(e, t, n, o) {\n  return e[1] && o ? nt(n.ctx.slice(), e[1](o(t))) : n.ctx;\n}\nfunction ln(e, t, n, o) {\n  if (e[2] && o) {\n    const i = e[2](o(n));\n    if (t.dirty === void 0)\n      return i;\n    if (typeof i == \"object\") {\n      const s = [], r = Math.max(t.dirty.length, i.length);\n      for (let l = 0; l < r; l += 1)\n        s[l] = t.dirty[l] | i[l];\n      return s;\n    }\n    return t.dirty | i;\n  }\n  return t.dirty;\n}\nfunction an(e, t, n, o, i, s) {\n  if (i) {\n    const r = Gt(t, n, o, s);\n    e.p(r, i);\n  }\n}\nfunction cn(e) {\n  if (e.ctx.length > 32) {\n    const t = [], n = e.ctx.length / 32;\n    for (let o = 0; o < n; o++)\n      t[o] = -1;\n    return t;\n  }\n  return -1;\n}\nfunction gt(e) {\n  const t = {};\n  for (const n in e)\n    n[0] !== \"$\" && (t[n] = e[n]);\n  return t;\n}\nfunction ze(e) {\n  return e ?? \"\";\n}\nconst fn = typeof window < \"u\" ? window : typeof globalThis < \"u\" ? globalThis : (\n  // @ts-ignore Node typings have this\n  global\n);\nfunction re(e, t) {\n  e.appendChild(t);\n}\nfunction O(e, t, n) {\n  e.insertBefore(t, n || null);\n}\nfunction k(e) {\n  e.parentNode && e.parentNode.removeChild(e);\n}\nfunction rt(e, t) {\n  for (let n = 0; n < e.length; n += 1)\n    e[n] && e[n].d(t);\n}\nfunction C(e) {\n  return document.createElementNS(\"http://www.w3.org/2000/svg\", e);\n}\nfunction zt(e) {\n  return document.createTextNode(e);\n}\nfunction ie() {\n  return zt(\" \");\n}\nfunction fe() {\n  return zt(\"\");\n}\nfunction j(e, t, n, o) {\n  return e.addEventListener(t, n, o), () => e.removeEventListener(t, n, o);\n}\nfunction h(e, t, n) {\n  n == null ? e.removeAttribute(t) : e.getAttribute(t) !== n && e.setAttribute(t, n);\n}\nfunction un(e) {\n  return Array.from(e.childNodes);\n}\nfunction Ee(e, t, n) {\n  e.classList.toggle(t, !!n);\n}\nfunction dn(e, t, { bubbles: n = !1, cancelable: o = !1 } = {}) {\n  return new CustomEvent(e, { detail: t, bubbles: n, cancelable: o });\n}\nlet Pe;\nfunction Ie(e) {\n  Pe = e;\n}\nfunction Ht() {\n  if (!Pe)\n    throw new Error(\"Function called outside component initialization\");\n  return Pe;\n}\nfunction Ye(e) {\n  Ht().$$.on_mount.push(e);\n}\nfunction Te() {\n  const e = Ht();\n  return (t, n, { cancelable: o = !1 } = {}) => {\n    const i = e.$$.callbacks[t];\n    if (i) {\n      const s = dn(\n        /** @type {string} */\n        t,\n        n,\n        { cancelable: o }\n      );\n      return i.slice().forEach((r) => {\n        r.call(e, s);\n      }), !s.defaultPrevented;\n    }\n    return !0;\n  };\n}\nfunction de(e, t) {\n  const n = e.$$.callbacks[t.type];\n  n && n.slice().forEach((o) => o.call(this, t));\n}\nconst we = [], He = [];\nlet Ae = [];\nconst mt = [], hn = /* @__PURE__ */ Promise.resolve();\nlet ot = !1;\nfunction gn() {\n  ot || (ot = !0, hn.then(Ft));\n}\nfunction it(e) {\n  Ae.push(e);\n}\nconst We = /* @__PURE__ */ new Set();\nlet me = 0;\nfunction Ft() {\n  if (me !== 0)\n    return;\n  const e = Pe;\n  do {\n    try {\n      for (; me < we.length; ) {\n        const t = we[me];\n        me++, Ie(t), mn(t.$$);\n      }\n    } catch (t) {\n      throw we.length = 0, me = 0, t;\n    }\n    for (Ie(null), we.length = 0, me = 0; He.length; )\n      He.pop()();\n    for (let t = 0; t < Ae.length; t += 1) {\n      const n = Ae[t];\n      We.has(n) || (We.add(n), n());\n    }\n    Ae.length = 0;\n  } while (we.length);\n  for (; mt.length; )\n    mt.pop()();\n  ot = !1, We.clear(), Ie(e);\n}\nfunction mn(e) {\n  if (e.fragment !== null) {\n    e.update(), ce(e.before_update);\n    const t = e.dirty;\n    e.dirty = [-1], e.fragment && e.fragment.p(e.ctx, t), e.after_update.forEach(it);\n  }\n}\nfunction pn(e) {\n  const t = [], n = [];\n  Ae.forEach((o) => e.indexOf(o) === -1 ? t.push(o) : n.push(o)), n.forEach((o) => o()), Ae = t;\n}\nconst Ge = /* @__PURE__ */ new Set();\nlet he;\nfunction le() {\n  he = {\n    r: 0,\n    c: [],\n    p: he\n    // parent group\n  };\n}\nfunction ae() {\n  he.r || ce(he.c), he = he.p;\n}\nfunction I(e, t) {\n  e && e.i && (Ge.delete(e), e.i(t));\n}\nfunction X(e, t, n, o) {\n  if (e && e.o) {\n    if (Ge.has(e))\n      return;\n    Ge.add(e), he.c.push(() => {\n      Ge.delete(e), o && (n && e.d(1), o());\n    }), e.o(t);\n  } else\n    o && o();\n}\nfunction Se(e) {\n  return (e == null ? void 0 : e.length) !== void 0 ? e : Array.from(e);\n}\nfunction te(e) {\n  e && e.c();\n}\nfunction $(e, t, n) {\n  const { fragment: o, after_update: i } = e.$$;\n  o && o.m(t, n), it(() => {\n    const s = e.$$.on_mount.map(Ut).filter(K);\n    e.$$.on_destroy ? e.$$.on_destroy.push(...s) : ce(s), e.$$.on_mount = [];\n  }), i.forEach(it);\n}\nfunction ee(e, t) {\n  const n = e.$$;\n  n.fragment !== null && (pn(n.after_update), ce(n.on_destroy), n.fragment && n.fragment.d(t), n.on_destroy = n.fragment = null, n.ctx = []);\n}\nfunction yn(e, t) {\n  e.$$.dirty[0] === -1 && (we.push(e), gn(), e.$$.dirty.fill(0)), e.$$.dirty[t / 31 | 0] |= 1 << t % 31;\n}\nfunction ne(e, t, n, o, i, s, r = null, l = [-1]) {\n  const a = Pe;\n  Ie(e);\n  const c = e.$$ = {\n    fragment: null,\n    ctx: [],\n    // state\n    props: s,\n    update: F,\n    not_equal: i,\n    bound: dt(),\n    // lifecycle\n    on_mount: [],\n    on_destroy: [],\n    on_disconnect: [],\n    before_update: [],\n    after_update: [],\n    context: new Map(t.context || (a ? a.$$.context : [])),\n    // everything else\n    callbacks: dt(),\n    dirty: l,\n    skip_bound: !1,\n    root: t.target || a.$$.root\n  };\n  r && r(c.root);\n  let u = !1;\n  if (c.ctx = n ? n(e, t.props || {}, (f, d, ...g) => {\n    const m = g.length ? g[0] : d;\n    return c.ctx && i(c.ctx[f], c.ctx[f] = m) && (!c.skip_bound && c.bound[f] && c.bound[f](m), u && yn(e, f)), d;\n  }) : [], c.update(), u = !0, ce(c.before_update), c.fragment = o ? o(c.ctx) : !1, t.target) {\n    if (t.hydrate) {\n      const f = un(t.target);\n      c.fragment && c.fragment.l(f), f.forEach(k);\n    } else\n      c.fragment && c.fragment.c();\n    t.intro && I(e.$$.fragment), $(e, t.target, t.anchor), Ft();\n  }\n  Ie(a);\n}\nclass oe {\n  constructor() {\n    /**\n     * ### PRIVATE API\n     *\n     * Do not use, may change at any time\n     *\n     * @type {any}\n     */\n    Ke(this, \"$$\");\n    /**\n     * ### PRIVATE API\n     *\n     * Do not use, may change at any time\n     *\n     * @type {any}\n     */\n    Ke(this, \"$$set\");\n  }\n  /** @returns {void} */\n  $destroy() {\n    ee(this, 1), this.$destroy = F;\n  }\n  /**\n   * @template {Extract<keyof Events, string>} K\n   * @param {K} type\n   * @param {((e: Events[K]) => void) | null | undefined} callback\n   * @returns {() => void}\n   */\n  $on(t, n) {\n    if (!K(n))\n      return F;\n    const o = this.$$.callbacks[t] || (this.$$.callbacks[t] = []);\n    return o.push(n), () => {\n      const i = o.indexOf(n);\n      i !== -1 && o.splice(i, 1);\n    };\n  }\n  /**\n   * @param {Partial<Props>} props\n   * @returns {void}\n   */\n  $set(t) {\n    this.$$set && !sn(t) && (this.$$.skip_bound = !0, this.$$set(t), this.$$.skip_bound = !1);\n  }\n}\nconst _n = \"4\";\ntypeof window < \"u\" && (window.__svelte || (window.__svelte = { v: /* @__PURE__ */ new Set() })).v.add(_n);\nvar q = /* @__PURE__ */ ((e) => (e.ELLIPSE = \"ELLIPSE\", e.POLYGON = \"POLYGON\", e.RECTANGLE = \"RECTANGLE\", e))(q || {});\nconst lt = {}, at = (e, t) => lt[e] = t, st = (e) => lt[e.type].area(e), wn = (e, t, n) => lt[e.type].intersects(e, t, n), Fe = (e) => {\n  let t = 1 / 0, n = 1 / 0, o = -1 / 0, i = -1 / 0;\n  return e.forEach(([s, r]) => {\n    t = Math.min(t, s), n = Math.min(n, r), o = Math.max(o, s), i = Math.max(i, r);\n  }), { minX: t, minY: n, maxX: o, maxY: i };\n}, bn = {\n  area: (e) => Math.PI * e.geometry.rx * e.geometry.ry,\n  intersects: (e, t, n) => {\n    const { cx: o, cy: i, rx: s, ry: r } = e.geometry, l = 0, a = Math.cos(l), c = Math.sin(l), u = t - o, f = n - i, d = a * u + c * f, g = c * u - a * f;\n    return d * d / (s * s) + g * g / (r * r) <= 1;\n  }\n};\nat(q.ELLIPSE, bn);\nconst En = {\n  area: (e) => {\n    const { points: t } = e.geometry;\n    let n = 0, o = t.length - 1;\n    for (let i = 0; i < t.length; i++)\n      n += (t[o][0] + t[i][0]) * (t[o][1] - t[i][1]), o = i;\n    return Math.abs(0.5 * n);\n  },\n  intersects: (e, t, n) => {\n    const { points: o } = e.geometry;\n    let i = !1;\n    for (let s = 0, r = o.length - 1; s < o.length; r = s++) {\n      const l = o[s][0], a = o[s][1], c = o[r][0], u = o[r][1];\n      a > n != u > n && t < (c - l) * (n - a) / (u - a) + l && (i = !i);\n    }\n    return i;\n  }\n};\nat(q.POLYGON, En);\nconst An = {\n  area: (e) => e.geometry.w * e.geometry.h,\n  intersects: (e, t, n) => t >= e.geometry.x && t <= e.geometry.x + e.geometry.w && n >= e.geometry.y && n <= e.geometry.y + e.geometry.h\n};\nat(q.RECTANGLE, An);\nconst Sn = (e, t = !1) => {\n  const n = typeof e == \"string\" ? e : e.value, o = /^(xywh)=(pixel|percent)?:?(.+?),(.+?),(.+?),(.+)*/g, i = [...n.matchAll(o)][0], [s, r, l, a, c, u, f] = i;\n  if (r !== \"xywh\")\n    throw new Error(\"Unsupported MediaFragment: \" + n);\n  if (l && l !== \"pixel\")\n    throw new Error(`Unsupported MediaFragment unit: ${l}`);\n  const [d, g, m, y] = [a, c, u, f].map(parseFloat);\n  return {\n    type: q.RECTANGLE,\n    geometry: {\n      x: d,\n      y: g,\n      w: m,\n      h: y,\n      bounds: {\n        minX: d,\n        minY: t ? g - y : g,\n        maxX: d + m,\n        maxY: t ? g : g + y\n      }\n    }\n  };\n}, Tn = (e) => {\n  const { x: t, y: n, w: o, h: i } = e;\n  return {\n    type: \"FragmentSelector\",\n    conformsTo: \"http://www.w3.org/TR/media-frags/\",\n    value: `xywh=pixel:${t},${n},${o},${i}`\n  };\n}, jt = \"http://www.w3.org/2000/svg\", pt = (e) => {\n  const t = (o) => {\n    Array.from(o.attributes).forEach((i) => {\n      i.name.startsWith(\"on\") && o.removeAttribute(i.name);\n    });\n  }, n = e.getElementsByTagName(\"script\");\n  return Array.from(n).reverse().forEach((o) => o.parentNode.removeChild(o)), Array.from(e.querySelectorAll(\"*\")).forEach(t), e;\n}, Mn = (e) => {\n  const o = new XMLSerializer().serializeToString(e.documentElement).replace(\"<svg>\", `<svg xmlns=\"${jt}\">`);\n  return new DOMParser().parseFromString(o, \"image/svg+xml\").documentElement;\n}, Ln = (e) => {\n  const n = new DOMParser().parseFromString(e, \"image/svg+xml\"), o = n.lookupPrefix(jt), i = n.lookupNamespaceURI(null);\n  return o || i ? pt(n).firstChild : pt(Mn(n)).firstChild;\n}, vn = (e) => {\n  const [t, n, o] = e.match(/(<polygon points=[\"|'])([^(\"|')]*)/) || [], i = o.split(\" \").map((s) => s.split(\",\").map(parseFloat));\n  return {\n    type: q.POLYGON,\n    geometry: {\n      points: i,\n      bounds: Fe(i)\n    }\n  };\n}, kn = (e) => {\n  const t = Ln(e), n = parseFloat(t.getAttribute(\"cx\")), o = parseFloat(t.getAttribute(\"cy\")), i = parseFloat(t.getAttribute(\"rx\")), s = parseFloat(t.getAttribute(\"ry\")), r = {\n    minX: n - i,\n    minY: o - s,\n    maxX: n + i,\n    maxY: o + s\n  };\n  return {\n    type: q.ELLIPSE,\n    geometry: {\n      cx: n,\n      cy: o,\n      rx: i,\n      ry: s,\n      bounds: r\n    }\n  };\n}, On = (e) => {\n  const t = typeof e == \"string\" ? e : e.value;\n  if (t.includes(\"<polygon points=\"))\n    return vn(t);\n  if (t.includes(\"<ellipse \"))\n    return kn(t);\n  throw \"Unsupported SVG shape: \" + t;\n}, Bn = (e) => {\n  let t;\n  if (e.type === q.POLYGON) {\n    const n = e.geometry, { points: o } = n;\n    t = `<svg><polygon points=\"${o.map((i) => i.join(\",\")).join(\" \")}\" /></svg>`;\n  } else if (e.type === q.ELLIPSE) {\n    const n = e.geometry;\n    t = `<svg><ellipse cx=\"${n.cx}\" cy=\"${n.cy}\" rx=\"${n.rx}\" ry=\"${n.ry}\" /></svg>`;\n  }\n  if (t)\n    return { type: \"SvgSelector\", value: t };\n  throw `Unsupported shape type: ${e.type}`;\n};\nlet Ne;\nconst In = new Uint8Array(16);\nfunction Pn() {\n  if (!Ne && (Ne = typeof crypto < \"u\" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto), !Ne))\n    throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");\n  return Ne(In);\n}\nconst W = [];\nfor (let e = 0; e < 256; ++e)\n  W.push((e + 256).toString(16).slice(1));\nfunction Yn(e, t = 0) {\n  return W[e[t + 0]] + W[e[t + 1]] + W[e[t + 2]] + W[e[t + 3]] + \"-\" + W[e[t + 4]] + W[e[t + 5]] + \"-\" + W[e[t + 6]] + W[e[t + 7]] + \"-\" + W[e[t + 8]] + W[e[t + 9]] + \"-\" + W[e[t + 10]] + W[e[t + 11]] + W[e[t + 12]] + W[e[t + 13]] + W[e[t + 14]] + W[e[t + 15]];\n}\nconst Dn = typeof crypto < \"u\" && crypto.randomUUID && crypto.randomUUID.bind(crypto), yt = {\n  randomUUID: Dn\n};\nfunction qt(e, t, n) {\n  if (yt.randomUUID && !t && !e)\n    return yt.randomUUID();\n  e = e || {};\n  const o = e.random || (e.rng || Pn)();\n  return o[6] = o[6] & 15 | 64, o[8] = o[8] & 63 | 128, Yn(o);\n}\nvar _t = Object.prototype.hasOwnProperty;\nfunction ge(e, t) {\n  var n, o;\n  if (e === t)\n    return !0;\n  if (e && t && (n = e.constructor) === t.constructor) {\n    if (n === Date)\n      return e.getTime() === t.getTime();\n    if (n === RegExp)\n      return e.toString() === t.toString();\n    if (n === Array) {\n      if ((o = e.length) === t.length)\n        for (; o-- && ge(e[o], t[o]); )\n          ;\n      return o === -1;\n    }\n    if (!n || typeof e == \"object\") {\n      o = 0;\n      for (n in e)\n        if (_t.call(e, n) && ++o && !_t.call(t, n) || !(n in t) || !ge(e[n], t[n]))\n          return !1;\n      return Object.keys(t).length === o;\n    }\n  }\n  return e !== e && t !== t;\n}\nfunction Je() {\n}\nfunction Xn(e, t) {\n  return e != e ? t == t : e !== t || e && typeof e == \"object\" || typeof e == \"function\";\n}\nconst pe = [];\nfunction ct(e, t = Je) {\n  let n;\n  const o = /* @__PURE__ */ new Set();\n  function i(l) {\n    if (Xn(e, l) && (e = l, n)) {\n      const a = !pe.length;\n      for (const c of o)\n        c[1](), pe.push(c, e);\n      if (a) {\n        for (let c = 0; c < pe.length; c += 2)\n          pe[c][0](pe[c + 1]);\n        pe.length = 0;\n      }\n    }\n  }\n  function s(l) {\n    i(l(e));\n  }\n  function r(l, a = Je) {\n    const c = [l, a];\n    return o.add(c), o.size === 1 && (n = t(i, s) || Je), l(e), () => {\n      o.delete(c), o.size === 0 && n && (n(), n = null);\n    };\n  }\n  return { set: i, update: s, subscribe: r };\n}\nconst Cn = (e) => {\n  const { subscribe: t, set: n } = ct();\n  let o;\n  return t((i) => o = i), e.observe(({ changes: i }) => {\n    if (o) {\n      (i.deleted || []).some((r) => r.id === o) && n(void 0);\n      const s = (i.updated || []).find(({ oldValue: r }) => r.id === o);\n      s && n(s.newValue.id);\n    }\n  }), {\n    get current() {\n      return o;\n    },\n    subscribe: t,\n    set: n\n  };\n};\nvar Kt = /* @__PURE__ */ ((e) => (e.EDIT = \"EDIT\", e.SELECT = \"SELECT\", e.NONE = \"NONE\", e))(Kt || {});\nconst Qe = { selected: [] }, Rn = (e, t = \"EDIT\") => {\n  const { subscribe: n, set: o } = ct(Qe);\n  let i = Qe;\n  n((f) => i = f);\n  const s = () => o(Qe), r = () => {\n    var f;\n    return ((f = i.selected) == null ? void 0 : f.length) === 0;\n  }, l = (f) => {\n    if (i.selected.length === 0)\n      return !1;\n    const d = typeof f == \"string\" ? f : f.id;\n    return i.selected.some((g) => g.id === d);\n  }, a = (f, d) => {\n    const g = e.getAnnotation(f);\n    if (g) {\n      const m = Nn(g, t);\n      o(m === \"EDIT\" ? { selected: [{ id: f, editable: !0 }], pointerEvent: d } : m === \"SELECT\" ? { selected: [{ id: f }], pointerEvent: d } : { selected: [], pointerEvent: d });\n    } else\n      console.warn(\"Invalid selection: \" + f);\n  }, c = (f, d = !0) => {\n    const g = Array.isArray(f) ? f : [f], m = g.map((y) => e.getAnnotation(y)).filter(Boolean);\n    o({ selected: m.map(({ id: y }) => ({ id: y, editable: d })) }), m.length !== g.length && console.warn(\"Invalid selection\", f);\n  }, u = (f) => {\n    if (i.selected.length === 0)\n      return !1;\n    const { selected: d } = i;\n    d.filter(({ id: g }) => f.includes(g)).length > 0 && o({ selected: d.filter(({ id: g }) => !f.includes(g)) });\n  };\n  return e.observe(({ changes: f }) => u((f.deleted || []).map((d) => d.id))), {\n    clear: s,\n    clickSelect: a,\n    get selected() {\n      return i ? [...i.selected] : null;\n    },\n    get pointerEvent() {\n      return i ? i.pointerEvent : null;\n    },\n    isEmpty: r,\n    isSelected: l,\n    setSelected: c,\n    subscribe: n\n  };\n}, Nn = (e, t) => typeof t == \"function\" ? t(e) || \"EDIT\" : t || \"EDIT\", Un = [];\nfor (let e = 0; e < 256; ++e)\n  Un.push((e + 256).toString(16).slice(1));\ntypeof crypto < \"u\" && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nconst Vn = (e, t) => {\n  const n = new Set(e.bodies.map((o) => o.id));\n  return t.bodies.filter((o) => !n.has(o.id));\n}, Gn = (e, t) => {\n  const n = new Set(t.bodies.map((o) => o.id));\n  return e.bodies.filter((o) => !n.has(o.id));\n}, zn = (e, t) => t.bodies.map((n) => {\n  const o = e.bodies.find((i) => i.id === n.id);\n  return { newBody: n, oldBody: o && !ge(o, n) ? o : void 0 };\n}).filter(({ oldBody: n }) => n).map(({ oldBody: n, newBody: o }) => ({ oldBody: n, newBody: o })), Hn = (e, t) => !ge(e.target, t.target), Wt = (e, t) => {\n  const n = Vn(e, t), o = Gn(e, t), i = zn(e, t);\n  return {\n    oldValue: e,\n    newValue: t,\n    bodiesCreated: n.length > 0 ? n : void 0,\n    bodiesDeleted: o.length > 0 ? o : void 0,\n    bodiesUpdated: i.length > 0 ? i : void 0,\n    targetUpdated: Hn(e, t) ? { oldTarget: e.target, newTarget: t.target } : void 0\n  };\n};\nvar H = /* @__PURE__ */ ((e) => (e.LOCAL = \"LOCAL\", e.REMOTE = \"REMOTE\", e))(H || {});\nconst Fn = (e, t) => {\n  var n, o;\n  const { changes: i, origin: s } = t;\n  if (!(!e.options.origin || e.options.origin === s))\n    return !1;\n  if (e.options.ignore) {\n    const { ignore: r } = e.options, l = (a) => a && a.length > 0;\n    if (!(l(i.created) || l(i.deleted))) {\n      const a = (n = i.updated) == null ? void 0 : n.some((u) => l(u.bodiesCreated) || l(u.bodiesDeleted) || l(u.bodiesUpdated)), c = (o = i.updated) == null ? void 0 : o.some((u) => u.targetUpdated);\n      if (r === \"BODY_ONLY\" && a && !c || r === \"TARGET_ONLY\" && c && !a)\n        return !1;\n    }\n  }\n  if (e.options.annotations) {\n    const r = /* @__PURE__ */ new Set([\n      ...(i.created || []).map((l) => l.id),\n      ...(i.deleted || []).map((l) => l.id),\n      ...(i.updated || []).map(({ oldValue: l }) => l.id)\n    ]);\n    return !!(Array.isArray(e.options.annotations) ? e.options.annotations : [e.options.annotations]).find((l) => r.has(l));\n  } else\n    return !0;\n}, jn = (e, t) => {\n  const n = new Set((e.created || []).map((f) => f.id)), o = new Set((e.updated || []).map(({ newValue: f }) => f.id)), i = new Set((t.created || []).map((f) => f.id)), s = new Set((t.deleted || []).map((f) => f.id)), r = new Set((t.updated || []).map(({ oldValue: f }) => f.id)), l = new Set((t.updated || []).filter(({ oldValue: f }) => n.has(f.id) || o.has(f.id)).map(({ oldValue: f }) => f.id)), a = [\n    ...(e.created || []).filter((f) => !s.has(f.id)).map((f) => r.has(f.id) ? t.updated.find(({ oldValue: d }) => d.id === f.id).newValue : f),\n    ...t.created || []\n  ], c = [\n    ...(e.deleted || []).filter((f) => !i.has(f.id)),\n    ...(t.deleted || []).filter((f) => !n.has(f.id))\n  ], u = [\n    ...(e.updated || []).filter(({ newValue: f }) => !s.has(f.id)).map((f) => {\n      const { oldValue: d, newValue: g } = f;\n      if (r.has(g.id)) {\n        const m = t.updated.find((y) => y.oldValue.id === g.id).newValue;\n        return Wt(d, m);\n      } else\n        return f;\n    }),\n    ...(t.updated || []).filter(({ oldValue: f }) => !l.has(f.id))\n  ];\n  return { created: a, deleted: c, updated: u };\n}, qn = (e) => e.id !== void 0, Kn = () => {\n  const e = /* @__PURE__ */ new Map(), t = /* @__PURE__ */ new Map(), n = [], o = (w, S = {}) => n.push({ onChange: w, options: S }), i = (w) => {\n    const S = n.findIndex((T) => T.onChange == w);\n    S > -1 && n.splice(S, 1);\n  }, s = (w, S) => {\n    const T = {\n      origin: w,\n      changes: {\n        created: S.created || [],\n        updated: S.updated || [],\n        deleted: S.deleted || []\n      },\n      state: [...e.values()]\n    };\n    n.forEach((M) => {\n      Fn(M, T) && M.onChange(T);\n    });\n  }, r = (w, S = H.LOCAL) => {\n    if (e.get(w.id))\n      throw Error(`Cannot add annotation ${w.id} - exists already`);\n    e.set(w.id, w), w.bodies.forEach((T) => t.set(T.id, w.id)), s(S, { created: [w] });\n  }, l = (w, S) => {\n    const T = typeof w == \"string\" ? S : w, M = typeof w == \"string\" ? w : w.id, P = e.get(M);\n    if (P) {\n      const G = Wt(P, T);\n      return M === T.id ? e.set(M, T) : (e.delete(M), e.set(T.id, T)), P.bodies.forEach((x) => t.delete(x.id)), T.bodies.forEach((x) => t.set(x.id, T.id)), G;\n    } else\n      console.warn(`Cannot update annotation ${M} - does not exist`);\n  }, a = (w, S = H.LOCAL, T = H.LOCAL) => {\n    const M = qn(S) ? T : S, P = l(w, S);\n    P && s(M, { updated: [P] });\n  }, c = (w, S = H.LOCAL) => {\n    const T = w.reduce((M, P) => {\n      const G = l(P);\n      return G ? [...M, G] : M;\n    }, []);\n    T.length > 0 && s(S, { updated: T });\n  }, u = (w, S = H.LOCAL) => {\n    const T = e.get(w.annotation);\n    if (T) {\n      const M = {\n        ...T,\n        bodies: [...T.bodies, w]\n      };\n      e.set(T.id, M), t.set(w.id, M.id), s(S, { updated: [{\n        oldValue: T,\n        newValue: M,\n        bodiesCreated: [w]\n      }] });\n    } else\n      console.warn(`Attempt to add body to missing annotation: ${w.annotation}`);\n  }, f = () => [...e.values()], d = (w = H.LOCAL) => {\n    const S = [...e.values()];\n    e.clear(), t.clear(), s(w, { deleted: S });\n  }, g = (w, S = !0, T = H.LOCAL) => {\n    if (S) {\n      const M = [...e.values()];\n      e.clear(), t.clear(), w.forEach((P) => {\n        e.set(P.id, P), P.bodies.forEach((G) => t.set(G.id, P.id));\n      }), s(T, { created: w, deleted: M });\n    } else {\n      const M = w.reduce((P, G) => {\n        const x = e.get(G.id);\n        return x ? [...P, x] : P;\n      }, []);\n      if (M.length > 0)\n        throw Error(`Bulk insert would overwrite the following annotations: ${M.map((P) => P.id).join(\", \")}`);\n      w.forEach((P) => {\n        e.set(P.id, P), P.bodies.forEach((G) => t.set(G.id, P.id));\n      }), s(T, { created: w });\n    }\n  }, m = (w) => {\n    const S = typeof w == \"string\" ? w : w.id, T = e.get(S);\n    if (T)\n      return e.delete(S), T.bodies.forEach((M) => t.delete(M.id)), T;\n    console.warn(`Attempt to delete missing annotation: ${S}`);\n  }, y = (w, S = H.LOCAL) => {\n    const T = m(w);\n    T && s(S, { deleted: [T] });\n  }, b = (w, S = H.LOCAL) => {\n    const T = w.reduce((M, P) => {\n      const G = m(P);\n      return G ? [...M, G] : M;\n    }, []);\n    T.length > 0 && s(S, { deleted: T });\n  }, p = (w) => {\n    const S = e.get(w.annotation);\n    if (S) {\n      const T = S.bodies.find((M) => M.id === w.id);\n      if (T) {\n        t.delete(T.id);\n        const M = {\n          ...S,\n          bodies: S.bodies.filter((P) => P.id !== w.id)\n        };\n        return e.set(S.id, M), {\n          oldValue: S,\n          newValue: M,\n          bodiesDeleted: [T]\n        };\n      } else\n        console.warn(`Attempt to delete missing body ${w.id} from annotation ${w.annotation}`);\n    } else\n      console.warn(`Attempt to delete body from missing annotation ${w.annotation}`);\n  }, A = (w, S = H.LOCAL) => {\n    const T = p(w);\n    T && s(S, { updated: [T] });\n  }, _ = (w, S = H.LOCAL) => {\n    const T = w.map((M) => p(M)).filter(Boolean);\n    T.length > 0 && s(S, { updated: T });\n  }, E = (w) => {\n    const S = e.get(w);\n    return S ? { ...S } : void 0;\n  }, B = (w) => {\n    const S = t.get(w);\n    if (S) {\n      const T = E(S).bodies.find((M) => M.id === w);\n      if (T)\n        return T;\n      console.error(`Store integrity error: body ${w} in index, but not in annotation`);\n    } else\n      console.warn(`Attempt to retrieve missing body: ${w}`);\n  }, V = (w, S) => {\n    if (w.annotation !== S.annotation)\n      throw \"Annotation integrity violation: annotation ID must be the same when updating bodies\";\n    const T = e.get(w.annotation);\n    if (T) {\n      const M = T.bodies.find((G) => G.id === w.id), P = {\n        ...T,\n        bodies: T.bodies.map((G) => G.id === M.id ? S : G)\n      };\n      return e.set(T.id, P), M.id !== S.id && (t.delete(M.id), t.set(S.id, P.id)), {\n        oldValue: T,\n        newValue: P,\n        bodiesUpdated: [{ oldBody: M, newBody: S }]\n      };\n    } else\n      console.warn(`Attempt to add body to missing annotation ${w.annotation}`);\n  }, U = (w, S, T = H.LOCAL) => {\n    const M = V(w, S);\n    M && s(T, { updated: [M] });\n  }, R = (w, S = H.LOCAL) => {\n    const T = w.map((M) => V({ id: M.id, annotation: M.annotation }, M)).filter(Boolean);\n    s(S, { updated: T });\n  }, Y = (w) => {\n    const S = e.get(w.annotation);\n    if (S) {\n      const T = {\n        ...S,\n        target: {\n          ...S.target,\n          ...w\n        }\n      };\n      return e.set(S.id, T), {\n        oldValue: S,\n        newValue: T,\n        targetUpdated: {\n          oldTarget: S.target,\n          newTarget: w\n        }\n      };\n    } else\n      console.warn(`Attempt to update target on missing annotation: ${w.annotation}`);\n  };\n  return {\n    addAnnotation: r,\n    addBody: u,\n    all: f,\n    bulkAddAnnotation: g,\n    bulkDeleteAnnotation: b,\n    bulkDeleteBodies: _,\n    bulkUpdateAnnotation: c,\n    bulkUpdateBodies: R,\n    bulkUpdateTargets: (w, S = H.LOCAL) => {\n      const T = w.map((M) => Y(M)).filter(Boolean);\n      T.length > 0 && s(S, { updated: T });\n    },\n    clear: d,\n    deleteAnnotation: y,\n    deleteBody: A,\n    getAnnotation: E,\n    getBody: B,\n    observe: o,\n    unobserve: i,\n    updateAnnotation: a,\n    updateBody: U,\n    updateTarget: (w, S = H.LOCAL) => {\n      const T = Y(w);\n      T && s(S, { updated: [T] });\n    }\n  };\n}, Wn = (e) => ({\n  ...e,\n  subscribe: (t) => {\n    const n = (o) => t(o.state);\n    return e.observe(n), t(e.all()), () => e.unobserve(n);\n  }\n});\nlet Jn = () => ({\n  emit(e, ...t) {\n    for (let n = 0, o = this.events[e] || [], i = o.length; n < i; n++)\n      o[n](...t);\n  },\n  events: {},\n  on(e, t) {\n    var n;\n    return ((n = this.events)[e] || (n[e] = [])).push(t), () => {\n      var o;\n      this.events[e] = (o = this.events[e]) == null ? void 0 : o.filter((i) => t !== i);\n    };\n  }\n});\nconst Qn = 250, Zn = (e) => {\n  const t = Jn(), n = [];\n  let o = -1, i = !1, s = 0;\n  const r = (g) => {\n    if (!i) {\n      const { changes: m } = g, y = performance.now();\n      if (y - s > Qn)\n        n.splice(o + 1), n.push(m), o = n.length - 1;\n      else {\n        const b = n.length - 1;\n        n[b] = jn(n[b], m);\n      }\n      s = y;\n    }\n    i = !1;\n  };\n  e.observe(r, { origin: H.LOCAL });\n  const l = (g) => g && g.length > 0 && e.bulkDeleteAnnotation(g), a = (g) => g && g.length > 0 && e.bulkAddAnnotation(g, !1), c = (g) => g && g.length > 0 && e.bulkUpdateAnnotation(g.map(({ oldValue: m }) => m)), u = (g) => g && g.length > 0 && e.bulkUpdateAnnotation(g.map(({ newValue: m }) => m)), f = (g) => g && g.length > 0 && e.bulkAddAnnotation(g, !1), d = (g) => g && g.length > 0 && e.bulkDeleteAnnotation(g);\n  return {\n    canRedo: () => n.length - 1 > o,\n    canUndo: () => o > -1,\n    destroy: () => e.unobserve(r),\n    on: (g, m) => t.on(g, m),\n    redo: () => {\n      if (n.length - 1 > o) {\n        i = !0;\n        const { created: g, updated: m, deleted: y } = n[o + 1];\n        a(g), u(m), d(y), t.emit(\"redo\", n[o + 1]), o += 1;\n      }\n    },\n    undo: () => {\n      if (o > -1) {\n        i = !0;\n        const { created: g, updated: m, deleted: y } = n[o];\n        l(g), c(m), f(y), t.emit(\"undo\", n[o]), o -= 1;\n      }\n    }\n  };\n}, xn = () => {\n  const { subscribe: e, set: t } = ct([]);\n  return {\n    subscribe: e,\n    set: t\n  };\n}, $n = (e, t, n, o) => {\n  const { store: i, selection: s, hover: r, viewport: l } = e, a = /* @__PURE__ */ new Map();\n  let c = [], u, f;\n  const d = (p, A) => {\n    a.has(p) ? a.get(p).push(A) : a.set(p, [A]);\n  }, g = (p, A) => {\n    const _ = a.get(p);\n    _ && _.indexOf(A) > 0 && _.splice(_.indexOf(A), 1);\n  }, m = (p, A, _) => {\n    a.has(p) && setTimeout(() => {\n      a.get(p).forEach((E) => {\n        if (n) {\n          const B = Array.isArray(A) ? A.map((U) => n.serialize(U)) : n.serialize(A), V = _ ? _ instanceof PointerEvent ? _ : n.serialize(_) : void 0;\n          E(B, V);\n        } else\n          E(A, _);\n      });\n    }, 1);\n  }, y = () => {\n    const { selected: p } = s, A = (p || []).map(({ id: _ }) => i.getAnnotation(_));\n    A.forEach((_) => {\n      const E = c.find((B) => B.id === _.id);\n      (!E || !ge(E, _)) && m(\"updateAnnotation\", _, E);\n    }), c = c.map((_) => A.find(({ id: B }) => B === _.id) || _);\n  };\n  s.subscribe(({ selected: p }) => {\n    if (!(c.length === 0 && p.length === 0)) {\n      if (c.length === 0 && p.length > 0)\n        c = p.map(({ id: A }) => i.getAnnotation(A));\n      else if (c.length > 0 && p.length === 0)\n        c.forEach((A) => {\n          const _ = i.getAnnotation(A.id);\n          _ && !ge(_, A) && m(\"updateAnnotation\", _, A);\n        }), c = [];\n      else {\n        const A = new Set(c.map((E) => E.id)), _ = new Set(p.map(({ id: E }) => E));\n        c.filter((E) => !_.has(E.id)).forEach((E) => {\n          const B = i.getAnnotation(E.id);\n          B && !ge(B, E) && m(\"updateAnnotation\", B, E);\n        }), c = [\n          // Remove annotations that were deselected\n          ...c.filter((E) => _.has(E.id)),\n          // Add editable annotations that were selected\n          ...p.filter(({ id: E }) => !A.has(E)).map(({ id: E }) => i.getAnnotation(E))\n        ];\n      }\n      m(\"selectionChanged\", c);\n    }\n  }), r.subscribe((p) => {\n    !u && p ? m(\"mouseEnterAnnotation\", i.getAnnotation(p)) : u && !p ? m(\"mouseLeaveAnnotation\", i.getAnnotation(u)) : u && p && (m(\"mouseLeaveAnnotation\", i.getAnnotation(u)), m(\"mouseEnterAnnotation\", i.getAnnotation(p))), u = p;\n  }), l == null || l.subscribe((p) => m(\"viewportIntersect\", p.map((A) => i.getAnnotation(A)))), i.observe((p) => {\n    o && (f && clearTimeout(f), f = setTimeout(y, 1e3));\n    const { created: A, deleted: _ } = p.changes;\n    (A || []).forEach((E) => m(\"createAnnotation\", E)), (_ || []).forEach((E) => m(\"deleteAnnotation\", E)), (p.changes.updated || []).filter((E) => [\n      ...E.bodiesCreated || [],\n      ...E.bodiesDeleted || [],\n      ...E.bodiesUpdated || []\n    ].length > 0).forEach(({ oldValue: E, newValue: B }) => {\n      const V = c.find((U) => U.id === E.id) || E;\n      c = c.map((U) => U.id === E.id ? B : U), m(\"updateAnnotation\", B, V);\n    });\n  }, { origin: H.LOCAL }), i.observe((p) => {\n    if (c) {\n      const A = new Set(c.map((E) => E.id)), _ = (p.changes.updated || []).filter(({ newValue: E }) => A.has(E.id)).map(({ newValue: E }) => E);\n      _.length > 0 && (c = c.map((E) => _.find((V) => V.id === E.id) || E));\n    }\n  }, { origin: H.REMOTE });\n  const b = (p) => (A) => {\n    const { updated: _ } = A;\n    p ? (_ || []).forEach((E) => m(\"updateAnnotation\", E.oldValue, E.newValue)) : (_ || []).forEach((E) => m(\"updateAnnotation\", E.newValue, E.oldValue));\n  };\n  return t.on(\"undo\", b(!0)), t.on(\"redo\", b(!1)), { on: d, off: g, emit: m };\n}, eo = (e) => (t) => t.reduce((n, o) => {\n  const { parsed: i, error: s } = e.parse(o);\n  return s ? {\n    parsed: n.parsed,\n    failed: [...n.failed, o]\n  } : i ? {\n    parsed: [...n.parsed, i],\n    failed: n.failed\n  } : {\n    ...n\n  };\n}, { parsed: [], failed: [] }), to = (e, t, n) => {\n  const { store: o, selection: i } = e, s = (b) => {\n    if (n) {\n      const { parsed: p, error: A } = n.parse(b);\n      p ? o.addAnnotation(p, H.REMOTE) : console.error(A);\n    } else\n      o.addAnnotation(b, H.REMOTE);\n  }, r = () => i.clear(), l = () => o.clear(), a = (b) => {\n    const p = o.getAnnotation(b);\n    return n && p ? n.serialize(p) : p;\n  }, c = () => n ? o.all().map(n.serialize) : o.all(), u = () => {\n    var b;\n    const p = (((b = i.selected) == null ? void 0 : b.map((A) => A.id)) || []).map((A) => o.getAnnotation(A)).filter(Boolean);\n    return n ? p.map(n.serialize) : p;\n  }, f = (b, p = !0) => fetch(b).then((A) => A.json()).then((A) => (g(A, p), A)), d = (b) => {\n    if (typeof b == \"string\") {\n      const p = o.getAnnotation(b);\n      if (o.deleteAnnotation(b), p)\n        return n ? n.serialize(p) : p;\n    } else {\n      const p = n ? n.parse(b).parsed : b;\n      if (p)\n        return o.deleteAnnotation(p), b;\n    }\n  }, g = (b, p = !0) => {\n    if (n) {\n      const { parsed: A, failed: _ } = eo(n)(b);\n      _.length > 0 && console.warn(`Discarded ${_.length} invalid annotations`, _), o.bulkAddAnnotation(A, p, H.REMOTE);\n    } else\n      o.bulkAddAnnotation(b, p, H.REMOTE);\n  }, m = (b) => {\n    b ? i.setSelected(b) : i.clear();\n  }, y = (b) => {\n    if (n) {\n      const p = n.parse(b).parsed, A = n.serialize(o.getAnnotation(p.id));\n      return o.updateAnnotation(p), A;\n    } else {\n      const p = o.getAnnotation(b.id);\n      return o.updateAnnotation(b), p;\n    }\n  };\n  return {\n    addAnnotation: s,\n    cancelSelected: r,\n    canRedo: t.canRedo,\n    canUndo: t.canUndo,\n    clearAnnotations: l,\n    getAnnotationById: a,\n    getAnnotations: c,\n    getSelected: u,\n    loadAnnotations: f,\n    redo: t.redo,\n    removeAnnotation: d,\n    setAnnotations: g,\n    setSelected: m,\n    undo: t.undo,\n    updateAnnotation: y\n  };\n}, no = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\nlet oo = (e) => crypto.getRandomValues(new Uint8Array(e)), io = (e, t, n) => {\n  let o = (2 << Math.log(e.length - 1) / Math.LN2) - 1, i = -~(1.6 * o * t / e.length);\n  return (s = t) => {\n    let r = \"\";\n    for (; ; ) {\n      let l = n(i), a = i;\n      for (; a--; )\n        if (r += e[l[a] & o] || \"\", r.length === s)\n          return r;\n    }\n  };\n}, so = (e, t = 21) => io(e, t, oo), ro = (e = 21) => {\n  let t = \"\", n = crypto.getRandomValues(new Uint8Array(e));\n  for (; e--; )\n    t += no[n[e] & 63];\n  return t;\n};\nconst lo = () => ({ isGuest: !0, id: so(\"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_\", 20)() }), ao = (e) => {\n  const t = JSON.stringify(e);\n  let n = 0;\n  for (let o = 0, i = t.length; o < i; o++) {\n    let s = t.charCodeAt(o);\n    n = (n << 5) - n + s, n |= 0;\n  }\n  return `${n}`;\n}, Jt = (e) => e ? typeof e == \"object\" ? { ...e } : e : void 0, co = (e, t) => (Array.isArray(e) ? e : [e]).map((n) => {\n  const { id: o, type: i, purpose: s, value: r, created: l, creator: a, ...c } = n;\n  return {\n    id: o || `temp-${ao(n)}`,\n    annotation: t,\n    type: i,\n    purpose: s,\n    value: r,\n    created: l ? new Date(l) : void 0,\n    creator: Jt(a),\n    ...c\n  };\n}), fo = (e) => e.map((t) => {\n  var n, o;\n  const i = { ...t };\n  return delete i.annotation, (n = i.id) != null && n.startsWith(\"temp-\") && delete i.id, { ...i, created: (o = i.created) == null ? void 0 : o.toISOString() };\n});\nro();\nconst Yi = (e, t = !1) => ({ parse: (i) => uo(i, t), serialize: (i) => ho(i, e) }), uo = (e, t = !1) => {\n  const n = e.id || qt(), {\n    creator: o,\n    created: i,\n    modified: s,\n    body: r,\n    ...l\n  } = e, a = co(r, n), c = Array.isArray(e.target) ? e.target[0] : e.target, u = Array.isArray(c.selector) ? c.selector[0] : c.selector, f = (u == null ? void 0 : u.type) === \"FragmentSelector\" ? Sn(u, t) : (u == null ? void 0 : u.type) === \"SvgSelector\" ? On(u) : void 0;\n  return f ? {\n    parsed: {\n      ...l,\n      id: n,\n      bodies: a,\n      target: {\n        created: i ? new Date(i) : void 0,\n        creator: Jt(o),\n        updated: s ? new Date(s) : void 0,\n        ...Array.isArray(l.target) ? l.target[0] : l.target,\n        annotation: n,\n        selector: f\n      }\n    }\n  } : {\n    error: Error(`Invalid selector: ${JSON.stringify(u)}`)\n  };\n}, ho = (e, t) => {\n  const {\n    selector: n,\n    creator: o,\n    created: i,\n    updated: s,\n    updatedBy: r,\n    // Excluded from serialization\n    ...l\n  } = e.target, a = n.type == q.RECTANGLE ? Tn(n.geometry) : Bn(n), c = {\n    ...e,\n    \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n    id: e.id,\n    type: \"Annotation\",\n    body: fo(e.bodies),\n    created: i == null ? void 0 : i.toISOString(),\n    creator: o,\n    modified: s == null ? void 0 : s.toISOString(),\n    target: {\n      ...l,\n      source: t,\n      selector: a\n    }\n  };\n  return delete c.bodies, \"annotation\" in c.target && delete c.target.annotation, c;\n};\nfunction wt(e, t, n) {\n  const o = e.slice();\n  return o[10] = t[n], o[12] = n, o;\n}\nfunction bt(e) {\n  let t, n;\n  return t = new ke({\n    props: {\n      x: (\n        /*point*/\n        e[10][0]\n      ),\n      y: (\n        /*point*/\n        e[10][1]\n      ),\n      scale: (\n        /*viewportScale*/\n        e[3]\n      )\n    }\n  }), t.$on(\"pointerdown\", function() {\n    K(\n      /*grab*/\n      e[9](`HANDLE-${/*idx*/\n      e[12]}`)\n    ) && e[9](`HANDLE-${/*idx*/\n    e[12]}`).apply(this, arguments);\n  }), {\n    c() {\n      te(t.$$.fragment);\n    },\n    m(o, i) {\n      $(t, o, i), n = !0;\n    },\n    p(o, i) {\n      e = o;\n      const s = {};\n      i & /*geom*/\n      16 && (s.x = /*point*/\n      e[10][0]), i & /*geom*/\n      16 && (s.y = /*point*/\n      e[10][1]), i & /*viewportScale*/\n      8 && (s.scale = /*viewportScale*/\n      e[3]), t.$set(s);\n    },\n    i(o) {\n      n || (I(t.$$.fragment, o), n = !0);\n    },\n    o(o) {\n      X(t.$$.fragment, o), n = !1;\n    },\n    d(o) {\n      ee(t, o);\n    }\n  };\n}\nfunction go(e) {\n  let t, n, o, i, s, r, l, a, c, u, f, d = Se(\n    /*geom*/\n    e[4].points\n  ), g = [];\n  for (let y = 0; y < d.length; y += 1)\n    g[y] = bt(wt(e, d, y));\n  const m = (y) => X(g[y], 1, 1, () => {\n    g[y] = null;\n  });\n  return {\n    c() {\n      t = C(\"polygon\"), i = ie(), s = C(\"polygon\"), l = ie();\n      for (let y = 0; y < g.length; y += 1)\n        g[y].c();\n      a = fe(), h(t, \"class\", \"a9s-outer\"), h(t, \"style\", n = /*computedStyle*/\n      e[1] ? \"display:none;\" : void 0), h(t, \"points\", o = /*geom*/\n      e[4].points.map(Et).join(\" \")), h(s, \"class\", \"a9s-inner a9s-shape-handle\"), h(\n        s,\n        \"style\",\n        /*computedStyle*/\n        e[1]\n      ), h(s, \"points\", r = /*geom*/\n      e[4].points.map(At).join(\" \"));\n    },\n    m(y, b) {\n      O(y, t, b), O(y, i, b), O(y, s, b), O(y, l, b);\n      for (let p = 0; p < g.length; p += 1)\n        g[p] && g[p].m(y, b);\n      O(y, a, b), c = !0, u || (f = [\n        j(t, \"pointerdown\", function() {\n          K(\n            /*grab*/\n            e[9](\"SHAPE\")\n          ) && e[9](\"SHAPE\").apply(this, arguments);\n        }),\n        j(s, \"pointerdown\", function() {\n          K(\n            /*grab*/\n            e[9](\"SHAPE\")\n          ) && e[9](\"SHAPE\").apply(this, arguments);\n        })\n      ], u = !0);\n    },\n    p(y, b) {\n      if (e = y, (!c || b & /*computedStyle*/\n      2 && n !== (n = /*computedStyle*/\n      e[1] ? \"display:none;\" : void 0)) && h(t, \"style\", n), (!c || b & /*geom*/\n      16 && o !== (o = /*geom*/\n      e[4].points.map(Et).join(\" \"))) && h(t, \"points\", o), (!c || b & /*computedStyle*/\n      2) && h(\n        s,\n        \"style\",\n        /*computedStyle*/\n        e[1]\n      ), (!c || b & /*geom*/\n      16 && r !== (r = /*geom*/\n      e[4].points.map(At).join(\" \"))) && h(s, \"points\", r), b & /*geom, viewportScale, grab*/\n      536) {\n        d = Se(\n          /*geom*/\n          e[4].points\n        );\n        let p;\n        for (p = 0; p < d.length; p += 1) {\n          const A = wt(e, d, p);\n          g[p] ? (g[p].p(A, b), I(g[p], 1)) : (g[p] = bt(A), g[p].c(), I(g[p], 1), g[p].m(a.parentNode, a));\n        }\n        for (le(), p = d.length; p < g.length; p += 1)\n          m(p);\n        ae();\n      }\n    },\n    i(y) {\n      if (!c) {\n        for (let b = 0; b < d.length; b += 1)\n          I(g[b]);\n        c = !0;\n      }\n    },\n    o(y) {\n      g = g.filter(Boolean);\n      for (let b = 0; b < g.length; b += 1)\n        X(g[b]);\n      c = !1;\n    },\n    d(y) {\n      y && (k(t), k(i), k(s), k(l), k(a)), rt(g, y), u = !1, ce(f);\n    }\n  };\n}\nfunction mo(e) {\n  let t, n;\n  return t = new Zt({\n    props: {\n      shape: (\n        /*shape*/\n        e[0]\n      ),\n      transform: (\n        /*transform*/\n        e[2]\n      ),\n      editor: (\n        /*editor*/\n        e[5]\n      ),\n      $$slots: {\n        default: [\n          go,\n          ({ grab: o }) => ({ 9: o }),\n          ({ grab: o }) => o ? 512 : 0\n        ]\n      },\n      $$scope: { ctx: e }\n    }\n  }), t.$on(\n    \"change\",\n    /*change_handler*/\n    e[6]\n  ), t.$on(\n    \"grab\",\n    /*grab_handler*/\n    e[7]\n  ), t.$on(\n    \"release\",\n    /*release_handler*/\n    e[8]\n  ), {\n    c() {\n      te(t.$$.fragment);\n    },\n    m(o, i) {\n      $(t, o, i), n = !0;\n    },\n    p(o, [i]) {\n      const s = {};\n      i & /*shape*/\n      1 && (s.shape = /*shape*/\n      o[0]), i & /*transform*/\n      4 && (s.transform = /*transform*/\n      o[2]), i & /*$$scope, geom, viewportScale, grab, computedStyle*/\n      8730 && (s.$$scope = { dirty: i, ctx: o }), t.$set(s);\n    },\n    i(o) {\n      n || (I(t.$$.fragment, o), n = !0);\n    },\n    o(o) {\n      X(t.$$.fragment, o), n = !1;\n    },\n    d(o) {\n      ee(t, o);\n    }\n  };\n}\nconst Et = (e) => e.join(\",\"), At = (e) => e.join(\",\");\nfunction po(e, t, n) {\n  let o, { shape: i } = t, { computedStyle: s } = t, { transform: r } = t, { viewportScale: l = 1 } = t;\n  const a = (d, g, m) => {\n    let y;\n    const b = d.geometry;\n    g === \"SHAPE\" ? y = b.points.map(([A, _]) => [A + m[0], _ + m[1]]) : y = b.points.map(([A, _], E) => g === `HANDLE-${E}` ? [A + m[0], _ + m[1]] : [A, _]);\n    const p = Fe(y);\n    return { ...d, geometry: { points: y, bounds: p } };\n  };\n  function c(d) {\n    de.call(this, e, d);\n  }\n  function u(d) {\n    de.call(this, e, d);\n  }\n  function f(d) {\n    de.call(this, e, d);\n  }\n  return e.$$set = (d) => {\n    \"shape\" in d && n(0, i = d.shape), \"computedStyle\" in d && n(1, s = d.computedStyle), \"transform\" in d && n(2, r = d.transform), \"viewportScale\" in d && n(3, l = d.viewportScale);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*shape*/\n    1 && n(4, o = i.geometry);\n  }, [\n    i,\n    s,\n    r,\n    l,\n    o,\n    a,\n    c,\n    u,\n    f\n  ];\n}\nclass yo extends oe {\n  constructor(t) {\n    super(), ne(this, t, po, mo, J, {\n      shape: 0,\n      computedStyle: 1,\n      transform: 2,\n      viewportScale: 3\n    });\n  }\n}\nconst Ze = (e, t) => {\n  const n = Math.abs(t[0] - e[0]), o = Math.abs(t[1] - e[1]);\n  return Math.sqrt(Math.pow(n, 2) + Math.pow(o, 2));\n}, ye = [];\nfunction _o(e, t = F) {\n  let n;\n  const o = /* @__PURE__ */ new Set();\n  function i(l) {\n    if (J(e, l) && (e = l, n)) {\n      const a = !ye.length;\n      for (const c of o)\n        c[1](), ye.push(c, e);\n      if (a) {\n        for (let c = 0; c < ye.length; c += 2)\n          ye[c][0](ye[c + 1]);\n        ye.length = 0;\n      }\n    }\n  }\n  function s(l) {\n    i(l(e));\n  }\n  function r(l, a = F) {\n    const c = [l, a];\n    return o.add(c), o.size === 1 && (n = t(i, s) || F), l(e), () => {\n      o.delete(c), o.size === 0 && n && (n(), n = null);\n    };\n  }\n  return { set: i, update: s, subscribe: r };\n}\nconst wo = (e, t) => {\n  const { naturalWidth: n, naturalHeight: o } = e;\n  if (!n && !o) {\n    const { width: i, height: s } = e;\n    t.setAttribute(\"viewBox\", `0 0 ${i} ${s}`), e.addEventListener(\"load\", (r) => {\n      const l = r.target;\n      t.setAttribute(\"viewBox\", `0 0 ${l.naturalWidth} ${l.naturalHeight}`);\n    });\n  } else\n    t.setAttribute(\"viewBox\", `0 0 ${n} ${o}`);\n}, bo = (e, t) => {\n  wo(e, t);\n  const { subscribe: n, set: o } = _o(1);\n  let i;\n  return window.ResizeObserver && (i = new ResizeObserver(() => {\n    const r = t.getBoundingClientRect(), { width: l, height: a } = t.viewBox.baseVal, c = Math.max(\n      r.width / l,\n      r.height / a\n    );\n    o(c);\n  }), i.observe(t.parentElement)), { destroy: () => {\n    i && i.disconnect();\n  }, subscribe: n };\n}, Eo = \"ontouchstart\" in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;\nfunction Ao(e) {\n  let t, n, o, i, s, r;\n  return {\n    c() {\n      t = C(\"rect\"), h(t, \"class\", n = ze(`a9s-handle ${/*$$props*/\n      e[8].class || \"\"}`.trim()) + \" svelte-1sgkh33\"), h(t, \"x\", o = /*x*/\n      e[0] - /*handleSize*/\n      e[5] / 2), h(t, \"y\", i = /*y*/\n      e[1] - /*handleSize*/\n      e[5] / 2), h(\n        t,\n        \"width\",\n        /*handleSize*/\n        e[5]\n      ), h(\n        t,\n        \"height\",\n        /*handleSize*/\n        e[5]\n      );\n    },\n    m(l, a) {\n      O(l, t, a), s || (r = j(\n        t,\n        \"pointerdown\",\n        /*pointerdown_handler_2*/\n        e[11]\n      ), s = !0);\n    },\n    p(l, a) {\n      a & /*$$props*/\n      256 && n !== (n = ze(`a9s-handle ${/*$$props*/\n      l[8].class || \"\"}`.trim()) + \" svelte-1sgkh33\") && h(t, \"class\", n), a & /*x, handleSize*/\n      33 && o !== (o = /*x*/\n      l[0] - /*handleSize*/\n      l[5] / 2) && h(t, \"x\", o), a & /*y, handleSize*/\n      34 && i !== (i = /*y*/\n      l[1] - /*handleSize*/\n      l[5] / 2) && h(t, \"y\", i), a & /*handleSize*/\n      32 && h(\n        t,\n        \"width\",\n        /*handleSize*/\n        l[5]\n      ), a & /*handleSize*/\n      32 && h(\n        t,\n        \"height\",\n        /*handleSize*/\n        l[5]\n      );\n    },\n    d(l) {\n      l && k(t), s = !1, r();\n    }\n  };\n}\nfunction So(e) {\n  let t, n, o, i, s, r, l, a, c;\n  return {\n    c() {\n      t = C(\"g\"), n = C(\"circle\"), i = C(\"rect\"), h(\n        n,\n        \"cx\",\n        /*x*/\n        e[0]\n      ), h(\n        n,\n        \"cy\",\n        /*y*/\n        e[1]\n      ), h(n, \"r\", o = /*radius*/\n      e[3] / /*scale*/\n      e[2]), h(n, \"class\", \"a9s-touch-halo svelte-1sgkh33\"), Ee(\n        n,\n        \"touched\",\n        /*touched*/\n        e[4]\n      ), h(i, \"class\", s = ze(`a9s-handle ${/*$$props*/\n      e[8].class || \"\"}`.trim()) + \" svelte-1sgkh33\"), h(i, \"x\", r = /*x*/\n      e[0] - /*handleSize*/\n      e[5] / 2), h(i, \"y\", l = /*y*/\n      e[1] - /*handleSize*/\n      e[5] / 2), h(\n        i,\n        \"width\",\n        /*handleSize*/\n        e[5]\n      ), h(\n        i,\n        \"height\",\n        /*handleSize*/\n        e[5]\n      ), h(t, \"class\", \"a9s-touch-handle\");\n    },\n    m(u, f) {\n      O(u, t, f), re(t, n), re(t, i), a || (c = [\n        j(\n          n,\n          \"pointerdown\",\n          /*pointerdown_handler*/\n          e[10]\n        ),\n        j(\n          n,\n          \"pointerdown\",\n          /*onPointerDown*/\n          e[6]\n        ),\n        j(\n          n,\n          \"pointerup\",\n          /*onPointerUp*/\n          e[7]\n        ),\n        j(\n          i,\n          \"pointerdown\",\n          /*pointerdown_handler_1*/\n          e[9]\n        ),\n        j(\n          i,\n          \"pointerdown\",\n          /*onPointerDown*/\n          e[6]\n        ),\n        j(\n          i,\n          \"pointerup\",\n          /*onPointerUp*/\n          e[7]\n        )\n      ], a = !0);\n    },\n    p(u, f) {\n      f & /*x*/\n      1 && h(\n        n,\n        \"cx\",\n        /*x*/\n        u[0]\n      ), f & /*y*/\n      2 && h(\n        n,\n        \"cy\",\n        /*y*/\n        u[1]\n      ), f & /*radius, scale*/\n      12 && o !== (o = /*radius*/\n      u[3] / /*scale*/\n      u[2]) && h(n, \"r\", o), f & /*touched*/\n      16 && Ee(\n        n,\n        \"touched\",\n        /*touched*/\n        u[4]\n      ), f & /*$$props*/\n      256 && s !== (s = ze(`a9s-handle ${/*$$props*/\n      u[8].class || \"\"}`.trim()) + \" svelte-1sgkh33\") && h(i, \"class\", s), f & /*x, handleSize*/\n      33 && r !== (r = /*x*/\n      u[0] - /*handleSize*/\n      u[5] / 2) && h(i, \"x\", r), f & /*y, handleSize*/\n      34 && l !== (l = /*y*/\n      u[1] - /*handleSize*/\n      u[5] / 2) && h(i, \"y\", l), f & /*handleSize*/\n      32 && h(\n        i,\n        \"width\",\n        /*handleSize*/\n        u[5]\n      ), f & /*handleSize*/\n      32 && h(\n        i,\n        \"height\",\n        /*handleSize*/\n        u[5]\n      );\n    },\n    d(u) {\n      u && k(t), a = !1, ce(c);\n    }\n  };\n}\nfunction To(e) {\n  let t;\n  function n(s, r) {\n    return Eo ? So : Ao;\n  }\n  let i = n()(e);\n  return {\n    c() {\n      i.c(), t = fe();\n    },\n    m(s, r) {\n      i.m(s, r), O(s, t, r);\n    },\n    p(s, [r]) {\n      i.p(s, r);\n    },\n    i: F,\n    o: F,\n    d(s) {\n      s && k(t), i.d(s);\n    }\n  };\n}\nfunction Mo(e, t, n) {\n  let o, { x: i } = t, { y: s } = t, { scale: r } = t, { radius: l = 30 } = t, a = !1;\n  const c = (m) => {\n    m.pointerType === \"touch\" && n(4, a = !0);\n  }, u = () => n(4, a = !1);\n  function f(m) {\n    de.call(this, e, m);\n  }\n  function d(m) {\n    de.call(this, e, m);\n  }\n  function g(m) {\n    de.call(this, e, m);\n  }\n  return e.$$set = (m) => {\n    n(8, t = nt(nt({}, t), gt(m))), \"x\" in m && n(0, i = m.x), \"y\" in m && n(1, s = m.y), \"scale\" in m && n(2, r = m.scale), \"radius\" in m && n(3, l = m.radius);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*scale*/\n    4 && n(5, o = 10 / r);\n  }, t = gt(t), [\n    i,\n    s,\n    r,\n    l,\n    a,\n    o,\n    c,\n    u,\n    t,\n    f,\n    d,\n    g\n  ];\n}\nclass ke extends oe {\n  constructor(t) {\n    super(), ne(this, t, Mo, To, J, { x: 0, y: 1, scale: 2, radius: 3 });\n  }\n}\nfunction Lo(e) {\n  let t, n, o, i, s, r, l, a, c, u, f, d, g, m, y, b, p, A, _, E, B, V, U, R, Y, w, S, T, M, P, G, x, Me, se, Le, v, Q, z, ue, Z, N, qe, ut;\n  return se = new ke({\n    props: {\n      class: \"a9s-corner-handle-topleft\",\n      x: (\n        /*geom*/\n        e[4].x\n      ),\n      y: (\n        /*geom*/\n        e[4].y\n      ),\n      scale: (\n        /*viewportScale*/\n        e[3]\n      )\n    }\n  }), se.$on(\"pointerdown\", function() {\n    K(\n      /*grab*/\n      e[9](\"TOP_LEFT\")\n    ) && e[9](\"TOP_LEFT\").apply(this, arguments);\n  }), v = new ke({\n    props: {\n      class: \"a9s-corner-handle-topright\",\n      x: (\n        /*geom*/\n        e[4].x + /*geom*/\n        e[4].w\n      ),\n      y: (\n        /*geom*/\n        e[4].y\n      ),\n      scale: (\n        /*viewportScale*/\n        e[3]\n      )\n    }\n  }), v.$on(\"pointerdown\", function() {\n    K(\n      /*grab*/\n      e[9](\"TOP_RIGHT\")\n    ) && e[9](\"TOP_RIGHT\").apply(this, arguments);\n  }), z = new ke({\n    props: {\n      class: \"a9s-corner-handle-bottomright\",\n      x: (\n        /*geom*/\n        e[4].x + /*geom*/\n        e[4].w\n      ),\n      y: (\n        /*geom*/\n        e[4].y + /*geom*/\n        e[4].h\n      ),\n      scale: (\n        /*viewportScale*/\n        e[3]\n      )\n    }\n  }), z.$on(\"pointerdown\", function() {\n    K(\n      /*grab*/\n      e[9](\"BOTTOM_RIGHT\")\n    ) && e[9](\"BOTTOM_RIGHT\").apply(this, arguments);\n  }), Z = new ke({\n    props: {\n      class: \"a9s-corner-handle-bottomleft\",\n      x: (\n        /*geom*/\n        e[4].x\n      ),\n      y: (\n        /*geom*/\n        e[4].y + /*geom*/\n        e[4].h\n      ),\n      scale: (\n        /*viewportScale*/\n        e[3]\n      )\n    }\n  }), Z.$on(\"pointerdown\", function() {\n    K(\n      /*grab*/\n      e[9](\"BOTTOM_LEFT\")\n    ) && e[9](\"BOTTOM_LEFT\").apply(this, arguments);\n  }), {\n    c() {\n      t = C(\"rect\"), l = ie(), a = C(\"rect\"), g = ie(), m = C(\"rect\"), A = ie(), _ = C(\"rect\"), U = ie(), R = C(\"rect\"), T = ie(), M = C(\"rect\"), Me = ie(), te(se.$$.fragment), Le = ie(), te(v.$$.fragment), Q = ie(), te(z.$$.fragment), ue = ie(), te(Z.$$.fragment), h(t, \"class\", \"a9s-outer\"), h(t, \"style\", n = /*computedStyle*/\n      e[1] ? \"display:none;\" : void 0), h(t, \"x\", o = /*geom*/\n      e[4].x), h(t, \"y\", i = /*geom*/\n      e[4].y), h(t, \"width\", s = /*geom*/\n      e[4].w), h(t, \"height\", r = /*geom*/\n      e[4].h), h(a, \"class\", \"a9s-inner a9s-shape-handle\"), h(\n        a,\n        \"style\",\n        /*computedStyle*/\n        e[1]\n      ), h(a, \"x\", c = /*geom*/\n      e[4].x), h(a, \"y\", u = /*geom*/\n      e[4].y), h(a, \"width\", f = /*geom*/\n      e[4].w), h(a, \"height\", d = /*geom*/\n      e[4].h), h(m, \"class\", \"a9s-edge-handle a9s-edge-handle-top\"), h(m, \"x\", y = /*geom*/\n      e[4].x), h(m, \"y\", b = /*geom*/\n      e[4].y), h(m, \"height\", 1), h(m, \"width\", p = /*geom*/\n      e[4].w), h(_, \"class\", \"a9s-edge-handle a9s-edge-handle-right\"), h(_, \"x\", E = /*geom*/\n      e[4].x + /*geom*/\n      e[4].w), h(_, \"y\", B = /*geom*/\n      e[4].y), h(_, \"height\", V = /*geom*/\n      e[4].h), h(_, \"width\", 1), h(R, \"class\", \"a9s-edge-handle a9s-edge-handle-bottom\"), h(R, \"x\", Y = /*geom*/\n      e[4].x), h(R, \"y\", w = /*geom*/\n      e[4].y + /*geom*/\n      e[4].h), h(R, \"height\", 1), h(R, \"width\", S = /*geom*/\n      e[4].w), h(M, \"class\", \"a9s-edge-handle a9s-edge-handle-left\"), h(M, \"x\", P = /*geom*/\n      e[4].x), h(M, \"y\", G = /*geom*/\n      e[4].y), h(M, \"height\", x = /*geom*/\n      e[4].h), h(M, \"width\", 1);\n    },\n    m(D, L) {\n      O(D, t, L), O(D, l, L), O(D, a, L), O(D, g, L), O(D, m, L), O(D, A, L), O(D, _, L), O(D, U, L), O(D, R, L), O(D, T, L), O(D, M, L), O(D, Me, L), $(se, D, L), O(D, Le, L), $(v, D, L), O(D, Q, L), $(z, D, L), O(D, ue, L), $(Z, D, L), N = !0, qe || (ut = [\n        j(t, \"pointerdown\", function() {\n          K(\n            /*grab*/\n            e[9](\"SHAPE\")\n          ) && e[9](\"SHAPE\").apply(this, arguments);\n        }),\n        j(a, \"pointerdown\", function() {\n          K(\n            /*grab*/\n            e[9](\"SHAPE\")\n          ) && e[9](\"SHAPE\").apply(this, arguments);\n        }),\n        j(m, \"pointerdown\", function() {\n          K(\n            /*grab*/\n            e[9](\"TOP\")\n          ) && e[9](\"TOP\").apply(this, arguments);\n        }),\n        j(_, \"pointerdown\", function() {\n          K(\n            /*grab*/\n            e[9](\"RIGHT\")\n          ) && e[9](\"RIGHT\").apply(this, arguments);\n        }),\n        j(R, \"pointerdown\", function() {\n          K(\n            /*grab*/\n            e[9](\"BOTTOM\")\n          ) && e[9](\"BOTTOM\").apply(this, arguments);\n        }),\n        j(M, \"pointerdown\", function() {\n          K(\n            /*grab*/\n            e[9](\"LEFT\")\n          ) && e[9](\"LEFT\").apply(this, arguments);\n        })\n      ], qe = !0);\n    },\n    p(D, L) {\n      e = D, (!N || L & /*computedStyle*/\n      2 && n !== (n = /*computedStyle*/\n      e[1] ? \"display:none;\" : void 0)) && h(t, \"style\", n), (!N || L & /*geom*/\n      16 && o !== (o = /*geom*/\n      e[4].x)) && h(t, \"x\", o), (!N || L & /*geom*/\n      16 && i !== (i = /*geom*/\n      e[4].y)) && h(t, \"y\", i), (!N || L & /*geom*/\n      16 && s !== (s = /*geom*/\n      e[4].w)) && h(t, \"width\", s), (!N || L & /*geom*/\n      16 && r !== (r = /*geom*/\n      e[4].h)) && h(t, \"height\", r), (!N || L & /*computedStyle*/\n      2) && h(\n        a,\n        \"style\",\n        /*computedStyle*/\n        e[1]\n      ), (!N || L & /*geom*/\n      16 && c !== (c = /*geom*/\n      e[4].x)) && h(a, \"x\", c), (!N || L & /*geom*/\n      16 && u !== (u = /*geom*/\n      e[4].y)) && h(a, \"y\", u), (!N || L & /*geom*/\n      16 && f !== (f = /*geom*/\n      e[4].w)) && h(a, \"width\", f), (!N || L & /*geom*/\n      16 && d !== (d = /*geom*/\n      e[4].h)) && h(a, \"height\", d), (!N || L & /*geom*/\n      16 && y !== (y = /*geom*/\n      e[4].x)) && h(m, \"x\", y), (!N || L & /*geom*/\n      16 && b !== (b = /*geom*/\n      e[4].y)) && h(m, \"y\", b), (!N || L & /*geom*/\n      16 && p !== (p = /*geom*/\n      e[4].w)) && h(m, \"width\", p), (!N || L & /*geom*/\n      16 && E !== (E = /*geom*/\n      e[4].x + /*geom*/\n      e[4].w)) && h(_, \"x\", E), (!N || L & /*geom*/\n      16 && B !== (B = /*geom*/\n      e[4].y)) && h(_, \"y\", B), (!N || L & /*geom*/\n      16 && V !== (V = /*geom*/\n      e[4].h)) && h(_, \"height\", V), (!N || L & /*geom*/\n      16 && Y !== (Y = /*geom*/\n      e[4].x)) && h(R, \"x\", Y), (!N || L & /*geom*/\n      16 && w !== (w = /*geom*/\n      e[4].y + /*geom*/\n      e[4].h)) && h(R, \"y\", w), (!N || L & /*geom*/\n      16 && S !== (S = /*geom*/\n      e[4].w)) && h(R, \"width\", S), (!N || L & /*geom*/\n      16 && P !== (P = /*geom*/\n      e[4].x)) && h(M, \"x\", P), (!N || L & /*geom*/\n      16 && G !== (G = /*geom*/\n      e[4].y)) && h(M, \"y\", G), (!N || L & /*geom*/\n      16 && x !== (x = /*geom*/\n      e[4].h)) && h(M, \"height\", x);\n      const De = {};\n      L & /*geom*/\n      16 && (De.x = /*geom*/\n      e[4].x), L & /*geom*/\n      16 && (De.y = /*geom*/\n      e[4].y), L & /*viewportScale*/\n      8 && (De.scale = /*viewportScale*/\n      e[3]), se.$set(De);\n      const Xe = {};\n      L & /*geom*/\n      16 && (Xe.x = /*geom*/\n      e[4].x + /*geom*/\n      e[4].w), L & /*geom*/\n      16 && (Xe.y = /*geom*/\n      e[4].y), L & /*viewportScale*/\n      8 && (Xe.scale = /*viewportScale*/\n      e[3]), v.$set(Xe);\n      const Ce = {};\n      L & /*geom*/\n      16 && (Ce.x = /*geom*/\n      e[4].x + /*geom*/\n      e[4].w), L & /*geom*/\n      16 && (Ce.y = /*geom*/\n      e[4].y + /*geom*/\n      e[4].h), L & /*viewportScale*/\n      8 && (Ce.scale = /*viewportScale*/\n      e[3]), z.$set(Ce);\n      const Re = {};\n      L & /*geom*/\n      16 && (Re.x = /*geom*/\n      e[4].x), L & /*geom*/\n      16 && (Re.y = /*geom*/\n      e[4].y + /*geom*/\n      e[4].h), L & /*viewportScale*/\n      8 && (Re.scale = /*viewportScale*/\n      e[3]), Z.$set(Re);\n    },\n    i(D) {\n      N || (I(se.$$.fragment, D), I(v.$$.fragment, D), I(z.$$.fragment, D), I(Z.$$.fragment, D), N = !0);\n    },\n    o(D) {\n      X(se.$$.fragment, D), X(v.$$.fragment, D), X(z.$$.fragment, D), X(Z.$$.fragment, D), N = !1;\n    },\n    d(D) {\n      D && (k(t), k(l), k(a), k(g), k(m), k(A), k(_), k(U), k(R), k(T), k(M), k(Me), k(Le), k(Q), k(ue)), ee(se, D), ee(v, D), ee(z, D), ee(Z, D), qe = !1, ce(ut);\n    }\n  };\n}\nfunction vo(e) {\n  let t, n;\n  return t = new Zt({\n    props: {\n      shape: (\n        /*shape*/\n        e[0]\n      ),\n      transform: (\n        /*transform*/\n        e[2]\n      ),\n      editor: (\n        /*editor*/\n        e[5]\n      ),\n      $$slots: {\n        default: [\n          Lo,\n          ({ grab: o }) => ({ 9: o }),\n          ({ grab: o }) => o ? 512 : 0\n        ]\n      },\n      $$scope: { ctx: e }\n    }\n  }), t.$on(\n    \"grab\",\n    /*grab_handler*/\n    e[6]\n  ), t.$on(\n    \"change\",\n    /*change_handler*/\n    e[7]\n  ), t.$on(\n    \"release\",\n    /*release_handler*/\n    e[8]\n  ), {\n    c() {\n      te(t.$$.fragment);\n    },\n    m(o, i) {\n      $(t, o, i), n = !0;\n    },\n    p(o, [i]) {\n      const s = {};\n      i & /*shape*/\n      1 && (s.shape = /*shape*/\n      o[0]), i & /*transform*/\n      4 && (s.transform = /*transform*/\n      o[2]), i & /*$$scope, geom, viewportScale, grab, computedStyle*/\n      1562 && (s.$$scope = { dirty: i, ctx: o }), t.$set(s);\n    },\n    i(o) {\n      n || (I(t.$$.fragment, o), n = !0);\n    },\n    o(o) {\n      X(t.$$.fragment, o), n = !1;\n    },\n    d(o) {\n      ee(t, o);\n    }\n  };\n}\nfunction ko(e, t, n) {\n  let o, { shape: i } = t, { computedStyle: s } = t, { transform: r } = t, { viewportScale: l = 1 } = t;\n  const a = (d, g, m) => {\n    const y = d.geometry.bounds;\n    let [b, p] = [y.minX, y.minY], [A, _] = [y.maxX, y.maxY];\n    const [E, B] = m;\n    if (g === \"SHAPE\")\n      b += E, A += E, p += B, _ += B;\n    else {\n      switch (g) {\n        case \"TOP\":\n        case \"TOP_LEFT\":\n        case \"TOP_RIGHT\": {\n          p += B;\n          break;\n        }\n        case \"BOTTOM\":\n        case \"BOTTOM_LEFT\":\n        case \"BOTTOM_RIGHT\": {\n          _ += B;\n          break;\n        }\n      }\n      switch (g) {\n        case \"LEFT\":\n        case \"TOP_LEFT\":\n        case \"BOTTOM_LEFT\": {\n          b += E;\n          break;\n        }\n        case \"RIGHT\":\n        case \"TOP_RIGHT\":\n        case \"BOTTOM_RIGHT\": {\n          A += E;\n          break;\n        }\n      }\n    }\n    const V = Math.min(b, A), U = Math.min(p, _), R = Math.abs(A - b), Y = Math.abs(_ - p);\n    return {\n      ...d,\n      geometry: {\n        x: V,\n        y: U,\n        w: R,\n        h: Y,\n        bounds: {\n          minX: V,\n          minY: U,\n          maxX: V + R,\n          maxY: U + Y\n        }\n      }\n    };\n  };\n  function c(d) {\n    de.call(this, e, d);\n  }\n  function u(d) {\n    de.call(this, e, d);\n  }\n  function f(d) {\n    de.call(this, e, d);\n  }\n  return e.$$set = (d) => {\n    \"shape\" in d && n(0, i = d.shape), \"computedStyle\" in d && n(1, s = d.computedStyle), \"transform\" in d && n(2, r = d.transform), \"viewportScale\" in d && n(3, l = d.viewportScale);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*shape*/\n    1 && n(4, o = i.geometry);\n  }, [\n    i,\n    s,\n    r,\n    l,\n    o,\n    a,\n    c,\n    u,\n    f\n  ];\n}\nclass Oo extends oe {\n  constructor(t) {\n    super(), ne(this, t, ko, vo, J, {\n      shape: 0,\n      computedStyle: 1,\n      transform: 2,\n      viewportScale: 3\n    });\n  }\n}\nconst Qt = /* @__PURE__ */ new Map([\n  [q.RECTANGLE, Oo],\n  [q.POLYGON, yo]\n]), Bo = (e) => Qt.get(e.type), Io = (e, t) => Qt.set(e, t), Po = (e) => ({}), St = (e) => ({ grab: (\n  /*onGrab*/\n  e[0]\n) });\nfunction Yo(e) {\n  let t, n, o, i;\n  const s = (\n    /*#slots*/\n    e[7].default\n  ), r = rn(\n    s,\n    e,\n    /*$$scope*/\n    e[6],\n    St\n  );\n  return {\n    c() {\n      t = C(\"g\"), r && r.c(), h(t, \"class\", \"a9s-annotation selected\");\n    },\n    m(l, a) {\n      O(l, t, a), r && r.m(t, null), n = !0, o || (i = [\n        j(\n          t,\n          \"pointerup\",\n          /*onRelease*/\n          e[2]\n        ),\n        j(\n          t,\n          \"pointermove\",\n          /*onPointerMove*/\n          e[1]\n        )\n      ], o = !0);\n    },\n    p(l, [a]) {\n      r && r.p && (!n || a & /*$$scope*/\n      64) && an(\n        r,\n        s,\n        l,\n        /*$$scope*/\n        l[6],\n        n ? ln(\n          s,\n          /*$$scope*/\n          l[6],\n          a,\n          Po\n        ) : cn(\n          /*$$scope*/\n          l[6]\n        ),\n        St\n      );\n    },\n    i(l) {\n      n || (I(r, l), n = !0);\n    },\n    o(l) {\n      X(r, l), n = !1;\n    },\n    d(l) {\n      l && k(t), r && r.d(l), o = !1, ce(i);\n    }\n  };\n}\nfunction Do(e, t, n) {\n  let { $$slots: o = {}, $$scope: i } = t;\n  const s = Te();\n  let { shape: r } = t, { editor: l } = t, { transform: a } = t, c, u, f;\n  const d = (y) => (b) => {\n    c = y, u = a.elementToImage(b.offsetX, b.offsetY), f = r, b.target.setPointerCapture(b.pointerId), s(\"grab\", b);\n  }, g = (y) => {\n    if (c) {\n      const [b, p] = a.elementToImage(y.offsetX, y.offsetY), A = [b - u[0], p - u[1]];\n      n(3, r = l(f, c, A)), s(\"change\", r);\n    }\n  }, m = (y) => {\n    y.target.releasePointerCapture(y.pointerId), c = void 0, f = r, s(\"release\", y);\n  };\n  return e.$$set = (y) => {\n    \"shape\" in y && n(3, r = y.shape), \"editor\" in y && n(4, l = y.editor), \"transform\" in y && n(5, a = y.transform), \"$$scope\" in y && n(6, i = y.$$scope);\n  }, [d, g, m, r, l, a, i, o];\n}\nclass Zt extends oe {\n  constructor(t) {\n    super(), ne(this, t, Do, Yo, J, { shape: 3, editor: 4, transform: 5 });\n  }\n}\nconst je = (e, t) => {\n  const n = typeof t == \"function\" ? t(e) : t;\n  if (n) {\n    const { fill: o, fillOpacity: i } = n;\n    let s = \"\";\n    return o && (s += `fill:${o};stroke:${o};`), s += `fill-opacity:${i || \"0.25\"};`, s;\n  }\n};\nfunction Xo(e, t, n) {\n  let o;\n  const i = Te();\n  let { annotation: s } = t, { editor: r } = t, { style: l } = t, { target: a } = t, { transform: c } = t, { viewportScale: u } = t, f;\n  return Ye(() => (n(6, f = new r({\n    target: a,\n    props: {\n      shape: s.target.selector,\n      computedStyle: o,\n      transform: c,\n      viewportScale: u\n    }\n  })), f.$on(\"change\", (d) => {\n    f.$$set({ shape: d.detail }), i(\"change\", d.detail);\n  }), f.$on(\"grab\", (d) => i(\"grab\", d.detail)), f.$on(\"release\", (d) => i(\"release\", d.detail)), () => {\n    f.$destroy();\n  })), e.$$set = (d) => {\n    \"annotation\" in d && n(0, s = d.annotation), \"editor\" in d && n(1, r = d.editor), \"style\" in d && n(2, l = d.style), \"target\" in d && n(3, a = d.target), \"transform\" in d && n(4, c = d.transform), \"viewportScale\" in d && n(5, u = d.viewportScale);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*annotation, style*/\n    5 && (o = je(s, l)), e.$$.dirty & /*annotation, editorComponent*/\n    65 && s && (f == null || f.$set({ shape: s.target.selector })), e.$$.dirty & /*editorComponent, transform*/\n    80 && f && f.$set({ transform: c }), e.$$.dirty & /*editorComponent, viewportScale*/\n    96 && f && f.$set({ viewportScale: u });\n  }, [s, r, l, a, c, u, f];\n}\nclass Co extends oe {\n  constructor(t) {\n    super(), ne(this, t, Xo, null, J, {\n      annotation: 0,\n      editor: 1,\n      style: 2,\n      target: 3,\n      transform: 4,\n      viewportScale: 5\n    });\n  }\n}\nfunction Ro(e, t, n) {\n  const o = Te();\n  let { drawingMode: i } = t, { target: s } = t, { tool: r } = t, { transform: l } = t, { viewportScale: a } = t, c;\n  return Ye(() => {\n    const u = s.closest(\"svg\"), f = [], d = (g, m, y) => {\n      u == null || u.addEventListener(g, m, y), f.push(() => u == null ? void 0 : u.removeEventListener(g, m, y));\n    };\n    return n(5, c = new r({\n      target: s,\n      props: {\n        addEventListener: d,\n        drawingMode: i,\n        transform: l,\n        viewportScale: a\n      }\n    })), c.$on(\"create\", (g) => o(\"create\", g.detail)), () => {\n      f.forEach((g) => g()), c.$destroy();\n    };\n  }), e.$$set = (u) => {\n    \"drawingMode\" in u && n(0, i = u.drawingMode), \"target\" in u && n(1, s = u.target), \"tool\" in u && n(2, r = u.tool), \"transform\" in u && n(3, l = u.transform), \"viewportScale\" in u && n(4, a = u.viewportScale);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*toolComponent, transform*/\n    40 && c && c.$set({ transform: l }), e.$$.dirty & /*toolComponent, viewportScale*/\n    48 && c && c.$set({ viewportScale: a });\n  }, [i, s, r, l, a, c];\n}\nclass No extends oe {\n  constructor(t) {\n    super(), ne(this, t, Ro, null, J, {\n      drawingMode: 0,\n      target: 1,\n      tool: 2,\n      transform: 3,\n      viewportScale: 4\n    });\n  }\n}\nfunction Tt(e) {\n  let t, n;\n  return {\n    c() {\n      t = C(\"rect\"), n = C(\"rect\"), h(t, \"class\", \"a9s-outer\"), h(\n        t,\n        \"x\",\n        /*x*/\n        e[1]\n      ), h(\n        t,\n        \"y\",\n        /*y*/\n        e[2]\n      ), h(\n        t,\n        \"width\",\n        /*w*/\n        e[3]\n      ), h(\n        t,\n        \"height\",\n        /*h*/\n        e[4]\n      ), h(n, \"class\", \"a9s-inner\"), h(\n        n,\n        \"x\",\n        /*x*/\n        e[1]\n      ), h(\n        n,\n        \"y\",\n        /*y*/\n        e[2]\n      ), h(\n        n,\n        \"width\",\n        /*w*/\n        e[3]\n      ), h(\n        n,\n        \"height\",\n        /*h*/\n        e[4]\n      );\n    },\n    m(o, i) {\n      O(o, t, i), O(o, n, i);\n    },\n    p(o, i) {\n      i & /*x*/\n      2 && h(\n        t,\n        \"x\",\n        /*x*/\n        o[1]\n      ), i & /*y*/\n      4 && h(\n        t,\n        \"y\",\n        /*y*/\n        o[2]\n      ), i & /*w*/\n      8 && h(\n        t,\n        \"width\",\n        /*w*/\n        o[3]\n      ), i & /*h*/\n      16 && h(\n        t,\n        \"height\",\n        /*h*/\n        o[4]\n      ), i & /*x*/\n      2 && h(\n        n,\n        \"x\",\n        /*x*/\n        o[1]\n      ), i & /*y*/\n      4 && h(\n        n,\n        \"y\",\n        /*y*/\n        o[2]\n      ), i & /*w*/\n      8 && h(\n        n,\n        \"width\",\n        /*w*/\n        o[3]\n      ), i & /*h*/\n      16 && h(\n        n,\n        \"height\",\n        /*h*/\n        o[4]\n      );\n    },\n    d(o) {\n      o && (k(t), k(n));\n    }\n  };\n}\nfunction Uo(e) {\n  let t, n = (\n    /*origin*/\n    e[0] && Tt(e)\n  );\n  return {\n    c() {\n      t = C(\"g\"), n && n.c(), h(t, \"class\", \"a9s-annotation a9s-rubberband\");\n    },\n    m(o, i) {\n      O(o, t, i), n && n.m(t, null);\n    },\n    p(o, [i]) {\n      /*origin*/\n      o[0] ? n ? n.p(o, i) : (n = Tt(o), n.c(), n.m(t, null)) : n && (n.d(1), n = null);\n    },\n    i: F,\n    o: F,\n    d(o) {\n      o && k(t), n && n.d();\n    }\n  };\n}\nfunction Vo(e, t, n) {\n  const o = Te();\n  let { addEventListener: i } = t, { drawingMode: s } = t, { transform: r } = t, l, a, c, u, f, d, g;\n  const m = (A) => {\n    const _ = A;\n    l = performance.now(), s === \"drag\" && (n(0, a = r.elementToImage(_.offsetX, _.offsetY)), c = a, n(1, u = a[0]), n(2, f = a[1]), n(3, d = 1), n(4, g = 1));\n  }, y = (A) => {\n    const _ = A;\n    a && (c = r.elementToImage(_.offsetX, _.offsetY), n(1, u = Math.min(c[0], a[0])), n(2, f = Math.min(c[1], a[1])), n(3, d = Math.abs(c[0] - a[0])), n(4, g = Math.abs(c[1] - a[1])));\n  }, b = (A) => {\n    const _ = A, E = performance.now() - l;\n    if (s === \"click\") {\n      if (E > 300)\n        return;\n      _.stopPropagation(), a ? p() : (n(0, a = r.elementToImage(_.offsetX, _.offsetY)), c = a, n(1, u = a[0]), n(2, f = a[1]), n(3, d = 1), n(4, g = 1));\n    } else\n      a && (E > 300 || d * g > 100 ? (_.stopPropagation(), p()) : (n(0, a = void 0), c = void 0));\n  }, p = () => {\n    if (d * g > 15) {\n      const A = {\n        type: q.RECTANGLE,\n        geometry: {\n          bounds: {\n            minX: u,\n            minY: f,\n            maxX: u + d,\n            maxY: f + g\n          },\n          x: u,\n          y: f,\n          w: d,\n          h: g\n        }\n      };\n      o(\"create\", A);\n    }\n    n(0, a = void 0), c = void 0;\n  };\n  return Ye(() => {\n    i(\"pointerdown\", m), i(\"pointermove\", y), i(\"pointerup\", b, !0);\n  }), e.$$set = (A) => {\n    \"addEventListener\" in A && n(5, i = A.addEventListener), \"drawingMode\" in A && n(6, s = A.drawingMode), \"transform\" in A && n(7, r = A.transform);\n  }, [a, u, f, d, g, i, s, r];\n}\nclass Go extends oe {\n  constructor(t) {\n    super(), ne(this, t, Vo, Uo, J, {\n      addEventListener: 5,\n      drawingMode: 6,\n      transform: 7\n    });\n  }\n}\nfunction xe(e) {\n  const t = e.slice(), n = (\n    /*isClosable*/\n    (t[2] ? (\n      /*points*/\n      t[0]\n    ) : [\n      .../*points*/\n      t[0],\n      /*cursor*/\n      t[1]\n    ]).map((o) => o.join(\",\")).join(\" \")\n  );\n  return t[16] = n, t;\n}\nfunction Mt(e) {\n  let t, n, o, i, s, r = (\n    /*isClosable*/\n    e[2] && Lt(e)\n  );\n  return {\n    c() {\n      t = C(\"polygon\"), o = C(\"polygon\"), r && r.c(), s = fe(), h(t, \"class\", \"a9s-outer\"), h(t, \"points\", n = /*coords*/\n      e[16]), h(o, \"class\", \"a9s-inner\"), h(o, \"points\", i = /*coords*/\n      e[16]);\n    },\n    m(l, a) {\n      O(l, t, a), O(l, o, a), r && r.m(l, a), O(l, s, a);\n    },\n    p(l, a) {\n      a & /*isClosable, points, cursor*/\n      7 && n !== (n = /*coords*/\n      l[16]) && h(t, \"points\", n), a & /*isClosable, points, cursor*/\n      7 && i !== (i = /*coords*/\n      l[16]) && h(o, \"points\", i), /*isClosable*/\n      l[2] ? r ? r.p(l, a) : (r = Lt(l), r.c(), r.m(s.parentNode, s)) : r && (r.d(1), r = null);\n    },\n    d(l) {\n      l && (k(t), k(o), k(s)), r && r.d(l);\n    }\n  };\n}\nfunction Lt(e) {\n  let t, n, o;\n  return {\n    c() {\n      t = C(\"rect\"), h(t, \"class\", \"a9s-corner-handle\"), h(t, \"x\", n = /*points*/\n      e[0][0][0] - /*handleSize*/\n      e[3] / 2), h(t, \"y\", o = /*points*/\n      e[0][0][1] - /*handleSize*/\n      e[3] / 2), h(\n        t,\n        \"height\",\n        /*handleSize*/\n        e[3]\n      ), h(\n        t,\n        \"width\",\n        /*handleSize*/\n        e[3]\n      );\n    },\n    m(i, s) {\n      O(i, t, s);\n    },\n    p(i, s) {\n      s & /*points, handleSize*/\n      9 && n !== (n = /*points*/\n      i[0][0][0] - /*handleSize*/\n      i[3] / 2) && h(t, \"x\", n), s & /*points, handleSize*/\n      9 && o !== (o = /*points*/\n      i[0][0][1] - /*handleSize*/\n      i[3] / 2) && h(t, \"y\", o), s & /*handleSize*/\n      8 && h(\n        t,\n        \"height\",\n        /*handleSize*/\n        i[3]\n      ), s & /*handleSize*/\n      8 && h(\n        t,\n        \"width\",\n        /*handleSize*/\n        i[3]\n      );\n    },\n    d(i) {\n      i && k(t);\n    }\n  };\n}\nfunction zo(e) {\n  let t, n = (\n    /*cursor*/\n    e[1] && Mt(xe(e))\n  );\n  return {\n    c() {\n      t = C(\"g\"), n && n.c(), h(t, \"class\", \"a9s-annotation a9s-rubberband\");\n    },\n    m(o, i) {\n      O(o, t, i), n && n.m(t, null);\n    },\n    p(o, [i]) {\n      /*cursor*/\n      o[1] ? n ? n.p(xe(o), i) : (n = Mt(xe(o)), n.c(), n.m(t, null)) : n && (n.d(1), n = null);\n    },\n    i: F,\n    o: F,\n    d(o) {\n      o && k(t), n && n.d();\n    }\n  };\n}\nconst Ho = 20, Fo = 1500;\nfunction jo(e, t, n) {\n  let o;\n  const i = Te();\n  let { addEventListener: s } = t, { drawingMode: r } = t, { transform: l } = t, { viewportScale: a = 1 } = t, c, u = [], f, d, g = !1;\n  const m = (_) => {\n    const E = _, { timeStamp: B, offsetX: V, offsetY: U } = E;\n    if (c = { timeStamp: B, offsetX: V, offsetY: U }, r === \"drag\" && u.length === 0) {\n      const R = l.elementToImage(E.offsetX, E.offsetY);\n      u.push(R), n(1, f = R);\n    }\n  }, y = (_) => {\n    const E = _;\n    if (d && clearTimeout(d), u.length > 0) {\n      if (n(1, f = l.elementToImage(E.offsetX, E.offsetY)), u.length > 2) {\n        const B = Ze(f, u[0]) * a;\n        n(2, g = B < Ho);\n      }\n      E.pointerType === \"touch\" && (d = setTimeout(\n        () => {\n          p();\n        },\n        Fo\n      ));\n    }\n  }, b = (_) => {\n    const E = _;\n    if (d && clearTimeout(d), r === \"click\") {\n      const B = E.timeStamp - c.timeStamp, V = Ze([c.offsetX, c.offsetY], [E.offsetX, E.offsetY]);\n      if (B > 300 || V > 15)\n        return;\n      if (g)\n        A();\n      else if (u.length === 0) {\n        const U = l.elementToImage(E.offsetX, E.offsetY);\n        u.push(U), n(1, f = U);\n      } else\n        u.push(f);\n    } else {\n      if (u.length === 1 && Ze(u[0], f) <= 4) {\n        n(0, u = []), n(1, f = void 0);\n        return;\n      }\n      E.stopImmediatePropagation(), g ? A() : u.push(f);\n    }\n  }, p = () => {\n    if (!f)\n      return;\n    const _ = [...u, f], E = {\n      type: q.POLYGON,\n      geometry: { bounds: Fe(_), points: _ }\n    };\n    st(E) > 4 && (n(0, u = []), n(1, f = void 0), i(\"create\", E));\n  }, A = () => {\n    const _ = {\n      type: q.POLYGON,\n      geometry: {\n        bounds: Fe(u),\n        points: [...u]\n      }\n    };\n    n(0, u = []), n(1, f = void 0), i(\"create\", _);\n  };\n  return Ye(() => {\n    s(\"pointerdown\", m, !0), s(\"pointermove\", y), s(\"pointerup\", b, !0), s(\"dblclick\", p, !0);\n  }), e.$$set = (_) => {\n    \"addEventListener\" in _ && n(4, s = _.addEventListener), \"drawingMode\" in _ && n(5, r = _.drawingMode), \"transform\" in _ && n(6, l = _.transform), \"viewportScale\" in _ && n(7, a = _.viewportScale);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*viewportScale*/\n    128 && n(3, o = 10 / a);\n  }, [\n    u,\n    f,\n    g,\n    o,\n    s,\n    r,\n    l,\n    a\n  ];\n}\nclass qo extends oe {\n  constructor(t) {\n    super(), ne(this, t, jo, zo, J, {\n      addEventListener: 4,\n      drawingMode: 5,\n      transform: 6,\n      viewportScale: 7\n    });\n  }\n}\nconst ft = /* @__PURE__ */ new Map([\n  [\"rectangle\", { tool: Go }],\n  [\"polygon\", { tool: qo }]\n]), xt = () => [...ft.keys()], $t = (e) => ft.get(e), Ko = (e, t, n) => ft.set(e, { tool: t, opts: n });\nfunction Wo(e) {\n  let t, n, o, i, s;\n  return {\n    c() {\n      t = C(\"g\"), n = C(\"ellipse\"), i = C(\"ellipse\"), h(n, \"class\", \"a9s-outer\"), h(n, \"style\", o = /*computedStyle*/\n      e[1] ? \"display:none;\" : void 0), h(\n        n,\n        \"cx\",\n        /*cx*/\n        e[2]\n      ), h(\n        n,\n        \"cy\",\n        /*cy*/\n        e[3]\n      ), h(\n        n,\n        \"rx\",\n        /*rx*/\n        e[4]\n      ), h(\n        n,\n        \"ry\",\n        /*ry*/\n        e[5]\n      ), h(i, \"class\", \"a9s-inner\"), h(\n        i,\n        \"style\",\n        /*computedStyle*/\n        e[1]\n      ), h(\n        i,\n        \"cx\",\n        /*cx*/\n        e[2]\n      ), h(\n        i,\n        \"cy\",\n        /*cy*/\n        e[3]\n      ), h(\n        i,\n        \"rx\",\n        /*rx*/\n        e[4]\n      ), h(\n        i,\n        \"ry\",\n        /*ry*/\n        e[5]\n      ), h(t, \"data-id\", s = /*annotation*/\n      e[0].id);\n    },\n    m(r, l) {\n      O(r, t, l), re(t, n), re(t, i);\n    },\n    p(r, [l]) {\n      l & /*computedStyle*/\n      2 && o !== (o = /*computedStyle*/\n      r[1] ? \"display:none;\" : void 0) && h(n, \"style\", o), l & /*computedStyle*/\n      2 && h(\n        i,\n        \"style\",\n        /*computedStyle*/\n        r[1]\n      ), l & /*annotation*/\n      1 && s !== (s = /*annotation*/\n      r[0].id) && h(t, \"data-id\", s);\n    },\n    i: F,\n    o: F,\n    d(r) {\n      r && k(t);\n    }\n  };\n}\nfunction Jo(e, t, n) {\n  let o, { annotation: i } = t, { geom: s } = t, { style: r } = t;\n  const { cx: l, cy: a, rx: c, ry: u } = s;\n  return e.$$set = (f) => {\n    \"annotation\" in f && n(0, i = f.annotation), \"geom\" in f && n(6, s = f.geom), \"style\" in f && n(7, r = f.style);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*annotation, style*/\n    129 && n(1, o = je(i, r));\n  }, [i, o, l, a, c, u, s, r];\n}\nclass Qo extends oe {\n  constructor(t) {\n    super(), ne(this, t, Jo, Wo, J, { annotation: 0, geom: 6, style: 7 });\n  }\n}\nfunction Zo(e) {\n  let t, n, o, i, s;\n  return {\n    c() {\n      t = C(\"g\"), n = C(\"polygon\"), i = C(\"polygon\"), h(n, \"class\", \"a9s-outer\"), h(n, \"style\", o = /*computedStyle*/\n      e[1] ? \"display:none;\" : void 0), h(\n        n,\n        \"points\",\n        /*points*/\n        e[2].map(xo).join(\" \")\n      ), h(i, \"class\", \"a9s-inner\"), h(\n        i,\n        \"style\",\n        /*computedStyle*/\n        e[1]\n      ), h(\n        i,\n        \"points\",\n        /*points*/\n        e[2].map($o).join(\" \")\n      ), h(t, \"data-id\", s = /*annotation*/\n      e[0].id);\n    },\n    m(r, l) {\n      O(r, t, l), re(t, n), re(t, i);\n    },\n    p(r, [l]) {\n      l & /*computedStyle*/\n      2 && o !== (o = /*computedStyle*/\n      r[1] ? \"display:none;\" : void 0) && h(n, \"style\", o), l & /*computedStyle*/\n      2 && h(\n        i,\n        \"style\",\n        /*computedStyle*/\n        r[1]\n      ), l & /*annotation*/\n      1 && s !== (s = /*annotation*/\n      r[0].id) && h(t, \"data-id\", s);\n    },\n    i: F,\n    o: F,\n    d(r) {\n      r && k(t);\n    }\n  };\n}\nconst xo = (e) => e.join(\",\"), $o = (e) => e.join(\",\");\nfunction ei(e, t, n) {\n  let o, { annotation: i } = t, { geom: s } = t, { style: r } = t;\n  const { points: l } = s;\n  return e.$$set = (a) => {\n    \"annotation\" in a && n(0, i = a.annotation), \"geom\" in a && n(3, s = a.geom), \"style\" in a && n(4, r = a.style);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*annotation, style*/\n    17 && n(1, o = je(i, r));\n  }, [i, o, l, s, r];\n}\nclass ti extends oe {\n  constructor(t) {\n    super(), ne(this, t, ei, Zo, J, { annotation: 0, geom: 3, style: 4 });\n  }\n}\nfunction ni(e) {\n  let t, n, o, i, s;\n  return {\n    c() {\n      t = C(\"g\"), n = C(\"rect\"), i = C(\"rect\"), h(n, \"class\", \"a9s-outer\"), h(n, \"style\", o = /*computedStyle*/\n      e[5] ? \"display:none;\" : void 0), h(\n        n,\n        \"x\",\n        /*x*/\n        e[4]\n      ), h(\n        n,\n        \"y\",\n        /*y*/\n        e[3]\n      ), h(\n        n,\n        \"width\",\n        /*w*/\n        e[2]\n      ), h(\n        n,\n        \"height\",\n        /*h*/\n        e[1]\n      ), h(i, \"class\", \"a9s-inner\"), h(\n        i,\n        \"style\",\n        /*computedStyle*/\n        e[5]\n      ), h(\n        i,\n        \"x\",\n        /*x*/\n        e[4]\n      ), h(\n        i,\n        \"y\",\n        /*y*/\n        e[3]\n      ), h(\n        i,\n        \"width\",\n        /*w*/\n        e[2]\n      ), h(\n        i,\n        \"height\",\n        /*h*/\n        e[1]\n      ), h(t, \"data-id\", s = /*annotation*/\n      e[0].id);\n    },\n    m(r, l) {\n      O(r, t, l), re(t, n), re(t, i);\n    },\n    p(r, [l]) {\n      l & /*computedStyle*/\n      32 && o !== (o = /*computedStyle*/\n      r[5] ? \"display:none;\" : void 0) && h(n, \"style\", o), l & /*x*/\n      16 && h(\n        n,\n        \"x\",\n        /*x*/\n        r[4]\n      ), l & /*y*/\n      8 && h(\n        n,\n        \"y\",\n        /*y*/\n        r[3]\n      ), l & /*w*/\n      4 && h(\n        n,\n        \"width\",\n        /*w*/\n        r[2]\n      ), l & /*h*/\n      2 && h(\n        n,\n        \"height\",\n        /*h*/\n        r[1]\n      ), l & /*computedStyle*/\n      32 && h(\n        i,\n        \"style\",\n        /*computedStyle*/\n        r[5]\n      ), l & /*x*/\n      16 && h(\n        i,\n        \"x\",\n        /*x*/\n        r[4]\n      ), l & /*y*/\n      8 && h(\n        i,\n        \"y\",\n        /*y*/\n        r[3]\n      ), l & /*w*/\n      4 && h(\n        i,\n        \"width\",\n        /*w*/\n        r[2]\n      ), l & /*h*/\n      2 && h(\n        i,\n        \"height\",\n        /*h*/\n        r[1]\n      ), l & /*annotation*/\n      1 && s !== (s = /*annotation*/\n      r[0].id) && h(t, \"data-id\", s);\n    },\n    i: F,\n    o: F,\n    d(r) {\n      r && k(t);\n    }\n  };\n}\nfunction oi(e, t, n) {\n  let o, i, s, r, l, { annotation: a } = t, { geom: c } = t, { style: u } = t;\n  return e.$$set = (f) => {\n    \"annotation\" in f && n(0, a = f.annotation), \"geom\" in f && n(6, c = f.geom), \"style\" in f && n(7, u = f.style);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*annotation, style*/\n    129 && n(5, o = je(a, u)), e.$$.dirty & /*geom*/\n    64 && n(4, { x: i, y: s, w: r, h: l } = c, i, (n(3, s), n(6, c)), (n(2, r), n(6, c)), (n(1, l), n(6, c)));\n  }, [a, l, r, s, i, o, c, u];\n}\nclass ii extends oe {\n  constructor(t) {\n    super(), ne(this, t, oi, ni, J, { annotation: 0, geom: 6, style: 7 });\n  }\n}\nconst Di = {\n  elementToImage: (e, t) => [e, t]\n}, si = (e) => ({\n  elementToImage: (t, n) => {\n    const o = e.getBoundingClientRect(), i = e.createSVGPoint();\n    i.x = t + o.x, i.y = n + o.y;\n    const { x: s, y: r } = i.matrixTransform(e.getScreenCTM().inverse());\n    return [s, r];\n  }\n}), ri = 250, li = (e, t) => {\n  const n = Te();\n  let o;\n  return { onPointerDown: () => o = performance.now(), onPointerUp: (r) => {\n    if (performance.now() - o < ri) {\n      const { x: a, y: c } = ai(r, e), u = t.getAt(a, c);\n      u ? n(\"click\", { originalEvent: r, annotation: u }) : n(\"click\", { originalEvent: r });\n    }\n  } };\n}, ai = (e, t) => {\n  const n = t.createSVGPoint(), o = t.getBoundingClientRect(), i = e.clientX - o.x, s = e.clientY - o.y, { left: r, top: l } = t.getBoundingClientRect();\n  return n.x = i + r, n.y = s + l, n.matrixTransform(t.getScreenCTM().inverse());\n}, { Boolean: en } = fn;\nfunction vt(e, t, n) {\n  const o = e.slice();\n  return o[31] = t[n], o;\n}\nfunction kt(e, t, n) {\n  const o = e.slice();\n  return o[34] = t[n], o;\n}\nfunction $e(e) {\n  const t = e.slice(), n = (\n    /*annotation*/\n    t[34].target.selector\n  );\n  return t[37] = n, t;\n}\nfunction Ot(e) {\n  let t = (\n    /*annotation*/\n    e[34].id\n  ), n, o, i = Bt(e);\n  return {\n    c() {\n      i.c(), n = fe();\n    },\n    m(s, r) {\n      i.m(s, r), O(s, n, r), o = !0;\n    },\n    p(s, r) {\n      r[0] & /*$store*/\n      16384 && J(t, t = /*annotation*/\n      s[34].id) ? (le(), X(i, 1, 1, F), ae(), i = Bt(s), i.c(), I(i, 1), i.m(n.parentNode, n)) : i.p(s, r);\n    },\n    i(s) {\n      o || (I(i), o = !0);\n    },\n    o(s) {\n      X(i), o = !1;\n    },\n    d(s) {\n      s && k(n), i.d(s);\n    }\n  };\n}\nfunction ci(e) {\n  let t, n;\n  return t = new ti({\n    props: {\n      annotation: (\n        /*annotation*/\n        e[34]\n      ),\n      geom: (\n        /*selector*/\n        e[37].geometry\n      ),\n      style: (\n        /*style*/\n        e[1]\n      )\n    }\n  }), {\n    c() {\n      te(t.$$.fragment);\n    },\n    m(o, i) {\n      $(t, o, i), n = !0;\n    },\n    p(o, i) {\n      const s = {};\n      i[0] & /*$store*/\n      16384 && (s.annotation = /*annotation*/\n      o[34]), i[0] & /*$store*/\n      16384 && (s.geom = /*selector*/\n      o[37].geometry), i[0] & /*style*/\n      2 && (s.style = /*style*/\n      o[1]), t.$set(s);\n    },\n    i(o) {\n      n || (I(t.$$.fragment, o), n = !0);\n    },\n    o(o) {\n      X(t.$$.fragment, o), n = !1;\n    },\n    d(o) {\n      ee(t, o);\n    }\n  };\n}\nfunction fi(e) {\n  let t, n;\n  return t = new ii({\n    props: {\n      annotation: (\n        /*annotation*/\n        e[34]\n      ),\n      geom: (\n        /*selector*/\n        e[37].geometry\n      ),\n      style: (\n        /*style*/\n        e[1]\n      )\n    }\n  }), {\n    c() {\n      te(t.$$.fragment);\n    },\n    m(o, i) {\n      $(t, o, i), n = !0;\n    },\n    p(o, i) {\n      const s = {};\n      i[0] & /*$store*/\n      16384 && (s.annotation = /*annotation*/\n      o[34]), i[0] & /*$store*/\n      16384 && (s.geom = /*selector*/\n      o[37].geometry), i[0] & /*style*/\n      2 && (s.style = /*style*/\n      o[1]), t.$set(s);\n    },\n    i(o) {\n      n || (I(t.$$.fragment, o), n = !0);\n    },\n    o(o) {\n      X(t.$$.fragment, o), n = !1;\n    },\n    d(o) {\n      ee(t, o);\n    }\n  };\n}\nfunction ui(e) {\n  let t, n;\n  return t = new Qo({\n    props: {\n      annotation: (\n        /*annotation*/\n        e[34]\n      ),\n      geom: (\n        /*selector*/\n        e[37].geometry\n      ),\n      style: (\n        /*style*/\n        e[1]\n      )\n    }\n  }), {\n    c() {\n      te(t.$$.fragment);\n    },\n    m(o, i) {\n      $(t, o, i), n = !0;\n    },\n    p(o, i) {\n      const s = {};\n      i[0] & /*$store*/\n      16384 && (s.annotation = /*annotation*/\n      o[34]), i[0] & /*$store*/\n      16384 && (s.geom = /*selector*/\n      o[37].geometry), i[0] & /*style*/\n      2 && (s.style = /*style*/\n      o[1]), t.$set(s);\n    },\n    i(o) {\n      n || (I(t.$$.fragment, o), n = !0);\n    },\n    o(o) {\n      X(t.$$.fragment, o), n = !1;\n    },\n    d(o) {\n      ee(t, o);\n    }\n  };\n}\nfunction Bt(e) {\n  let t, n, o, i;\n  const s = [ui, fi, ci], r = [];\n  function l(a, c) {\n    return (\n      /*selector*/\n      a[37].type === q.ELLIPSE ? 0 : (\n        /*selector*/\n        a[37].type === q.RECTANGLE ? 1 : (\n          /*selector*/\n          a[37].type === q.POLYGON ? 2 : -1\n        )\n      )\n    );\n  }\n  return ~(t = l(e)) && (n = r[t] = s[t](e)), {\n    c() {\n      n && n.c(), o = fe();\n    },\n    m(a, c) {\n      ~t && r[t].m(a, c), O(a, o, c), i = !0;\n    },\n    p(a, c) {\n      let u = t;\n      t = l(a), t === u ? ~t && r[t].p(a, c) : (n && (le(), X(r[u], 1, 1, () => {\n        r[u] = null;\n      }), ae()), ~t ? (n = r[t], n ? n.p(a, c) : (n = r[t] = s[t](a), n.c()), I(n, 1), n.m(o.parentNode, o)) : n = null);\n    },\n    i(a) {\n      i || (I(n), i = !0);\n    },\n    o(a) {\n      X(n), i = !1;\n    },\n    d(a) {\n      a && k(o), ~t && r[t].d(a);\n    }\n  };\n}\nfunction It(e) {\n  let t = !/*isEditable*/\n  e[8](\n    /*annotation*/\n    e[34]\n  ), n, o, i = t && Ot($e(e));\n  return {\n    c() {\n      i && i.c(), n = fe();\n    },\n    m(s, r) {\n      i && i.m(s, r), O(s, n, r), o = !0;\n    },\n    p(s, r) {\n      r[0] & /*isEditable, $store*/\n      16640 && (t = !/*isEditable*/\n      s[8](\n        /*annotation*/\n        s[34]\n      )), t ? i ? (i.p($e(s), r), r[0] & /*isEditable, $store*/\n      16640 && I(i, 1)) : (i = Ot($e(s)), i.c(), I(i, 1), i.m(n.parentNode, n)) : i && (le(), X(i, 1, 1, () => {\n        i = null;\n      }), ae());\n    },\n    i(s) {\n      o || (I(i), o = !0);\n    },\n    o(s) {\n      X(i), o = !1;\n    },\n    d(s) {\n      s && k(n), i && i.d(s);\n    }\n  };\n}\nfunction Pt(e) {\n  let t, n, o, i;\n  const s = [hi, di], r = [];\n  function l(a, c) {\n    return (\n      /*editableAnnotations*/\n      a[7] ? 0 : (\n        /*tool*/\n        a[13] && /*drawingEnabled*/\n        a[0] ? 1 : -1\n      )\n    );\n  }\n  return ~(t = l(e)) && (n = r[t] = s[t](e)), {\n    c() {\n      n && n.c(), o = fe();\n    },\n    m(a, c) {\n      ~t && r[t].m(a, c), O(a, o, c), i = !0;\n    },\n    p(a, c) {\n      let u = t;\n      t = l(a), t === u ? ~t && r[t].p(a, c) : (n && (le(), X(r[u], 1, 1, () => {\n        r[u] = null;\n      }), ae()), ~t ? (n = r[t], n ? n.p(a, c) : (n = r[t] = s[t](a), n.c()), I(n, 1), n.m(o.parentNode, o)) : n = null);\n    },\n    i(a) {\n      i || (I(n), i = !0);\n    },\n    o(a) {\n      X(n), i = !1;\n    },\n    d(a) {\n      a && k(o), ~t && r[t].d(a);\n    }\n  };\n}\nfunction di(e) {\n  let t = (\n    /*toolName*/\n    e[2]\n  ), n, o, i = Yt(e);\n  return {\n    c() {\n      i.c(), n = fe();\n    },\n    m(s, r) {\n      i.m(s, r), O(s, n, r), o = !0;\n    },\n    p(s, r) {\n      r[0] & /*toolName*/\n      4 && J(t, t = /*toolName*/\n      s[2]) ? (le(), X(i, 1, 1, F), ae(), i = Yt(s), i.c(), I(i, 1), i.m(n.parentNode, n)) : i.p(s, r);\n    },\n    i(s) {\n      o || (I(i), o = !0);\n    },\n    o(s) {\n      X(i), o = !1;\n    },\n    d(s) {\n      s && k(n), i.d(s);\n    }\n  };\n}\nfunction hi(e) {\n  let t, n, o = Se(\n    /*editableAnnotations*/\n    e[7]\n  ), i = [];\n  for (let r = 0; r < o.length; r += 1)\n    i[r] = Xt(vt(e, o, r));\n  const s = (r) => X(i[r], 1, 1, () => {\n    i[r] = null;\n  });\n  return {\n    c() {\n      for (let r = 0; r < i.length; r += 1)\n        i[r].c();\n      t = fe();\n    },\n    m(r, l) {\n      for (let a = 0; a < i.length; a += 1)\n        i[a] && i[a].m(r, l);\n      O(r, t, l), n = !0;\n    },\n    p(r, l) {\n      if (l[0] & /*editableAnnotations, drawingEl, getEditor, style, transform, $scale, onChangeSelected*/\n      1607842) {\n        o = Se(\n          /*editableAnnotations*/\n          r[7]\n        );\n        let a;\n        for (a = 0; a < o.length; a += 1) {\n          const c = vt(r, o, a);\n          i[a] ? (i[a].p(c, l), I(i[a], 1)) : (i[a] = Xt(c), i[a].c(), I(i[a], 1), i[a].m(t.parentNode, t));\n        }\n        for (le(), a = o.length; a < i.length; a += 1)\n          s(a);\n        ae();\n      }\n    },\n    i(r) {\n      if (!n) {\n        for (let l = 0; l < o.length; l += 1)\n          I(i[l]);\n        n = !0;\n      }\n    },\n    o(r) {\n      i = i.filter(en);\n      for (let l = 0; l < i.length; l += 1)\n        X(i[l]);\n      n = !1;\n    },\n    d(r) {\n      r && k(t), rt(i, r);\n    }\n  };\n}\nfunction Yt(e) {\n  let t, n;\n  return t = new No({\n    props: {\n      target: (\n        /*drawingEl*/\n        e[5]\n      ),\n      tool: (\n        /*tool*/\n        e[13]\n      ),\n      drawingMode: (\n        /*drawingMode*/\n        e[12]\n      ),\n      transform: (\n        /*transform*/\n        e[11]\n      ),\n      viewportScale: (\n        /*$scale*/\n        e[15]\n      )\n    }\n  }), t.$on(\n    \"create\",\n    /*onSelectionCreated*/\n    e[18]\n  ), {\n    c() {\n      te(t.$$.fragment);\n    },\n    m(o, i) {\n      $(t, o, i), n = !0;\n    },\n    p(o, i) {\n      const s = {};\n      i[0] & /*drawingEl*/\n      32 && (s.target = /*drawingEl*/\n      o[5]), i[0] & /*tool*/\n      8192 && (s.tool = /*tool*/\n      o[13]), i[0] & /*drawingMode*/\n      4096 && (s.drawingMode = /*drawingMode*/\n      o[12]), i[0] & /*transform*/\n      2048 && (s.transform = /*transform*/\n      o[11]), i[0] & /*$scale*/\n      32768 && (s.viewportScale = /*$scale*/\n      o[15]), t.$set(s);\n    },\n    i(o) {\n      n || (I(t.$$.fragment, o), n = !0);\n    },\n    o(o) {\n      X(t.$$.fragment, o), n = !1;\n    },\n    d(o) {\n      ee(t, o);\n    }\n  };\n}\nfunction Dt(e) {\n  let t, n;\n  return t = new Co({\n    props: {\n      target: (\n        /*drawingEl*/\n        e[5]\n      ),\n      editor: (\n        /*getEditor*/\n        e[20](\n          /*editable*/\n          e[31].target.selector\n        )\n      ),\n      annotation: (\n        /*editable*/\n        e[31]\n      ),\n      style: (\n        /*style*/\n        e[1]\n      ),\n      transform: (\n        /*transform*/\n        e[11]\n      ),\n      viewportScale: (\n        /*$scale*/\n        e[15]\n      )\n    }\n  }), t.$on(\"change\", function() {\n    K(\n      /*onChangeSelected*/\n      e[19](\n        /*editable*/\n        e[31]\n      )\n    ) && e[19](\n      /*editable*/\n      e[31]\n    ).apply(this, arguments);\n  }), {\n    c() {\n      te(t.$$.fragment);\n    },\n    m(o, i) {\n      $(t, o, i), n = !0;\n    },\n    p(o, i) {\n      e = o;\n      const s = {};\n      i[0] & /*drawingEl*/\n      32 && (s.target = /*drawingEl*/\n      e[5]), i[0] & /*editableAnnotations*/\n      128 && (s.editor = /*getEditor*/\n      e[20](\n        /*editable*/\n        e[31].target.selector\n      )), i[0] & /*editableAnnotations*/\n      128 && (s.annotation = /*editable*/\n      e[31]), i[0] & /*style*/\n      2 && (s.style = /*style*/\n      e[1]), i[0] & /*transform*/\n      2048 && (s.transform = /*transform*/\n      e[11]), i[0] & /*$scale*/\n      32768 && (s.viewportScale = /*$scale*/\n      e[15]), t.$set(s);\n    },\n    i(o) {\n      n || (I(t.$$.fragment, o), n = !0);\n    },\n    o(o) {\n      X(t.$$.fragment, o), n = !1;\n    },\n    d(o) {\n      ee(t, o);\n    }\n  };\n}\nfunction Xt(e) {\n  let t = (\n    /*editable*/\n    e[31].id\n  ), n, o, i = Dt(e);\n  return {\n    c() {\n      i.c(), n = fe();\n    },\n    m(s, r) {\n      i.m(s, r), O(s, n, r), o = !0;\n    },\n    p(s, r) {\n      r[0] & /*editableAnnotations*/\n      128 && J(t, t = /*editable*/\n      s[31].id) ? (le(), X(i, 1, 1, F), ae(), i = Dt(s), i.c(), I(i, 1), i.m(n.parentNode, n)) : i.p(s, r);\n    },\n    i(s) {\n      o || (I(i), o = !0);\n    },\n    o(s) {\n      X(i), o = !1;\n    },\n    d(s) {\n      s && k(n), i.d(s);\n    }\n  };\n}\nfunction gi(e) {\n  let t, n, o, i, s, r, l = Se(\n    /*$store*/\n    e[14]\n  ), a = [];\n  for (let f = 0; f < l.length; f += 1)\n    a[f] = It(kt(e, l, f));\n  const c = (f) => X(a[f], 1, 1, () => {\n    a[f] = null;\n  });\n  let u = (\n    /*drawingEl*/\n    e[5] && Pt(e)\n  );\n  return {\n    c() {\n      t = C(\"svg\"), n = C(\"g\");\n      for (let f = 0; f < a.length; f += 1)\n        a[f].c();\n      o = C(\"g\"), u && u.c(), h(o, \"class\", \"drawing\"), h(t, \"class\", \"a9s-annotationlayer\"), Ee(\n        t,\n        \"drawing\",\n        /*tool*/\n        e[13]\n      ), Ee(t, \"hidden\", !/*visible*/\n      e[3]);\n    },\n    m(f, d) {\n      O(f, t, d), re(t, n);\n      for (let g = 0; g < a.length; g += 1)\n        a[g] && a[g].m(n, null);\n      re(t, o), u && u.m(o, null), e[27](o), e[28](t), i = !0, s || (r = [\n        j(t, \"pointerup\", function() {\n          K(\n            /*onPointerUp*/\n            e[9]\n          ) && e[9].apply(this, arguments);\n        }),\n        j(t, \"pointerdown\", function() {\n          K(\n            /*onPointerDown*/\n            e[10]\n          ) && e[10].apply(this, arguments);\n        })\n      ], s = !0);\n    },\n    p(f, d) {\n      if (e = f, d[0] & /*$store, style, isEditable*/\n      16642) {\n        l = Se(\n          /*$store*/\n          e[14]\n        );\n        let g;\n        for (g = 0; g < l.length; g += 1) {\n          const m = kt(e, l, g);\n          a[g] ? (a[g].p(m, d), I(a[g], 1)) : (a[g] = It(m), a[g].c(), I(a[g], 1), a[g].m(n, null));\n        }\n        for (le(), g = l.length; g < a.length; g += 1)\n          c(g);\n        ae();\n      }\n      /*drawingEl*/\n      e[5] ? u ? (u.p(e, d), d[0] & /*drawingEl*/\n      32 && I(u, 1)) : (u = Pt(e), u.c(), I(u, 1), u.m(o, null)) : u && (le(), X(u, 1, 1, () => {\n        u = null;\n      }), ae()), (!i || d[0] & /*tool*/\n      8192) && Ee(\n        t,\n        \"drawing\",\n        /*tool*/\n        e[13]\n      ), (!i || d[0] & /*visible*/\n      8) && Ee(t, \"hidden\", !/*visible*/\n      e[3]);\n    },\n    i(f) {\n      if (!i) {\n        for (let d = 0; d < l.length; d += 1)\n          I(a[d]);\n        I(u), i = !0;\n      }\n    },\n    o(f) {\n      a = a.filter(en);\n      for (let d = 0; d < a.length; d += 1)\n        X(a[d]);\n      X(u), i = !1;\n    },\n    d(f) {\n      f && k(t), rt(a, f), u && u.d(), e[27](null), e[28](null), s = !1, ce(r);\n    }\n  };\n}\nfunction mi(e, t, n) {\n  let o, i, s, r, l, a, c, u, f, d, g = F, m = () => (g(), g = Vt(Y, (v) => n(15, d = v)), Y);\n  e.$$.on_destroy.push(() => g());\n  let { drawingEnabled: y } = t, { image: b } = t, { preferredDrawingMode: p } = t, { state: A } = t, { style: _ = void 0 } = t, { toolName: E = xt()[0] } = t, { user: B } = t, { visible: V = !0 } = t, U, R, Y;\n  Ye(() => m(n(6, Y = bo(b, R))));\n  const { selection: w, store: S } = A;\n  ht(e, w, (v) => n(26, u = v)), ht(e, S, (v) => n(14, f = v));\n  let T, M;\n  const P = (v) => {\n    T && S.unobserve(T);\n    const Q = v.filter(({ editable: z }) => z).map(({ id: z }) => z);\n    Q.length > 0 ? (n(7, M = Q.map((z) => S.getAnnotation(z)).filter(Boolean)), T = (z) => {\n      const { updated: ue } = z.changes;\n      n(7, M = ue == null ? void 0 : ue.map((Z) => Z.newValue));\n    }, S.observe(T, { annotations: Q })) : n(7, M = void 0);\n  }, G = (v) => {\n    const Q = qt(), z = {\n      id: Q,\n      bodies: [],\n      target: {\n        annotation: Q,\n        selector: v.detail,\n        creator: B,\n        created: /* @__PURE__ */ new Date()\n      }\n    };\n    S.addAnnotation(z), w.setSelected(z.id);\n  }, x = (v) => (Q) => {\n    var N;\n    const { target: z } = v, ue = 10 * 60 * 1e3, Z = ((N = z.creator) == null ? void 0 : N.id) !== B.id || !z.created || (/* @__PURE__ */ new Date()).getTime() - z.created.getTime() > ue;\n    S.updateTarget({\n      ...z,\n      selector: Q.detail,\n      created: Z ? z.created : /* @__PURE__ */ new Date(),\n      updated: Z ? /* @__PURE__ */ new Date() : void 0,\n      updatedBy: Z ? B : void 0\n    });\n  }, Me = (v) => Bo(v);\n  function se(v) {\n    He[v ? \"unshift\" : \"push\"](() => {\n      U = v, n(5, U);\n    });\n  }\n  function Le(v) {\n    He[v ? \"unshift\" : \"push\"](() => {\n      R = v, n(4, R);\n    });\n  }\n  return e.$$set = (v) => {\n    \"drawingEnabled\" in v && n(0, y = v.drawingEnabled), \"image\" in v && n(21, b = v.image), \"preferredDrawingMode\" in v && n(22, p = v.preferredDrawingMode), \"state\" in v && n(23, A = v.state), \"style\" in v && n(1, _ = v.style), \"toolName\" in v && n(2, E = v.toolName), \"user\" in v && n(24, B = v.user), \"visible\" in v && n(3, V = v.visible);\n  }, e.$$.update = () => {\n    e.$$.dirty[0] & /*toolName*/\n    4 && n(13, { tool: o, opts: i } = $t(E) || { tool: void 0, opts: void 0 }, o, (n(25, i), n(2, E))), e.$$.dirty[0] & /*opts, preferredDrawingMode*/\n    37748736 && n(12, s = (i == null ? void 0 : i.drawingMode) || p), e.$$.dirty[0] & /*svgEl*/\n    16 && n(11, r = si(R)), e.$$.dirty[0] & /*svgEl*/\n    16 && n(10, { onPointerDown: l, onPointerUp: a } = li(R, S), l, (n(9, a), n(4, R))), e.$$.dirty[0] & /*$selection*/\n    67108864 && n(8, c = (v) => u.selected.find((Q) => Q.id === v.id && Q.editable)), e.$$.dirty[0] & /*$selection*/\n    67108864 && P(u.selected);\n  }, [\n    y,\n    _,\n    E,\n    V,\n    R,\n    U,\n    Y,\n    M,\n    c,\n    a,\n    l,\n    r,\n    s,\n    o,\n    f,\n    d,\n    w,\n    S,\n    G,\n    x,\n    Me,\n    b,\n    p,\n    A,\n    B,\n    i,\n    u,\n    se,\n    Le\n  ];\n}\nclass pi extends oe {\n  constructor(t) {\n    super(), ne(\n      this,\n      t,\n      mi,\n      gi,\n      J,\n      {\n        drawingEnabled: 0,\n        image: 21,\n        preferredDrawingMode: 22,\n        state: 23,\n        style: 1,\n        toolName: 2,\n        user: 24,\n        visible: 3\n      },\n      null,\n      [-1, -1]\n    );\n  }\n}\nfunction yi(e, t, n, o, i) {\n  tn(e, t, n || 0, o || e.length - 1, i || _i);\n}\nfunction tn(e, t, n, o, i) {\n  for (; o > n; ) {\n    if (o - n > 600) {\n      var s = o - n + 1, r = t - n + 1, l = Math.log(s), a = 0.5 * Math.exp(2 * l / 3), c = 0.5 * Math.sqrt(l * a * (s - a) / s) * (r - s / 2 < 0 ? -1 : 1), u = Math.max(n, Math.floor(t - r * a / s + c)), f = Math.min(o, Math.floor(t + (s - r) * a / s + c));\n      tn(e, t, u, f, i);\n    }\n    var d = e[t], g = n, m = o;\n    for (ve(e, n, t), i(e[o], d) > 0 && ve(e, n, o); g < m; ) {\n      for (ve(e, g, m), g++, m--; i(e[g], d) < 0; )\n        g++;\n      for (; i(e[m], d) > 0; )\n        m--;\n    }\n    i(e[n], d) === 0 ? ve(e, n, m) : (m++, ve(e, m, o)), m <= t && (n = m + 1), t <= m && (o = m - 1);\n  }\n}\nfunction ve(e, t, n) {\n  var o = e[t];\n  e[t] = e[n], e[n] = o;\n}\nfunction _i(e, t) {\n  return e < t ? -1 : e > t ? 1 : 0;\n}\nclass wi {\n  constructor(t = 9) {\n    this._maxEntries = Math.max(4, t), this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4)), this.clear();\n  }\n  all() {\n    return this._all(this.data, []);\n  }\n  search(t) {\n    let n = this.data;\n    const o = [];\n    if (!Ve(t, n))\n      return o;\n    const i = this.toBBox, s = [];\n    for (; n; ) {\n      for (let r = 0; r < n.children.length; r++) {\n        const l = n.children[r], a = n.leaf ? i(l) : l;\n        Ve(t, a) && (n.leaf ? o.push(l) : tt(t, a) ? this._all(l, o) : s.push(l));\n      }\n      n = s.pop();\n    }\n    return o;\n  }\n  collides(t) {\n    let n = this.data;\n    if (!Ve(t, n))\n      return !1;\n    const o = [];\n    for (; n; ) {\n      for (let i = 0; i < n.children.length; i++) {\n        const s = n.children[i], r = n.leaf ? this.toBBox(s) : s;\n        if (Ve(t, r)) {\n          if (n.leaf || tt(t, r))\n            return !0;\n          o.push(s);\n        }\n      }\n      n = o.pop();\n    }\n    return !1;\n  }\n  load(t) {\n    if (!(t && t.length))\n      return this;\n    if (t.length < this._minEntries) {\n      for (let o = 0; o < t.length; o++)\n        this.insert(t[o]);\n      return this;\n    }\n    let n = this._build(t.slice(), 0, t.length - 1, 0);\n    if (!this.data.children.length)\n      this.data = n;\n    else if (this.data.height === n.height)\n      this._splitRoot(this.data, n);\n    else {\n      if (this.data.height < n.height) {\n        const o = this.data;\n        this.data = n, n = o;\n      }\n      this._insert(n, this.data.height - n.height - 1, !0);\n    }\n    return this;\n  }\n  insert(t) {\n    return t && this._insert(t, this.data.height - 1), this;\n  }\n  clear() {\n    return this.data = be([]), this;\n  }\n  remove(t, n) {\n    if (!t)\n      return this;\n    let o = this.data;\n    const i = this.toBBox(t), s = [], r = [];\n    let l, a, c;\n    for (; o || s.length; ) {\n      if (o || (o = s.pop(), a = s[s.length - 1], l = r.pop(), c = !0), o.leaf) {\n        const u = bi(t, o.children, n);\n        if (u !== -1)\n          return o.children.splice(u, 1), s.push(o), this._condense(s), this;\n      }\n      !c && !o.leaf && tt(o, i) ? (s.push(o), r.push(l), l = 0, a = o, o = o.children[0]) : a ? (l++, o = a.children[l], c = !1) : o = null;\n    }\n    return this;\n  }\n  toBBox(t) {\n    return t;\n  }\n  compareMinX(t, n) {\n    return t.minX - n.minX;\n  }\n  compareMinY(t, n) {\n    return t.minY - n.minY;\n  }\n  toJSON() {\n    return this.data;\n  }\n  fromJSON(t) {\n    return this.data = t, this;\n  }\n  _all(t, n) {\n    const o = [];\n    for (; t; )\n      t.leaf ? n.push(...t.children) : o.push(...t.children), t = o.pop();\n    return n;\n  }\n  _build(t, n, o, i) {\n    const s = o - n + 1;\n    let r = this._maxEntries, l;\n    if (s <= r)\n      return l = be(t.slice(n, o + 1)), _e(l, this.toBBox), l;\n    i || (i = Math.ceil(Math.log(s) / Math.log(r)), r = Math.ceil(s / Math.pow(r, i - 1))), l = be([]), l.leaf = !1, l.height = i;\n    const a = Math.ceil(s / r), c = a * Math.ceil(Math.sqrt(r));\n    Ct(t, n, o, c, this.compareMinX);\n    for (let u = n; u <= o; u += c) {\n      const f = Math.min(u + c - 1, o);\n      Ct(t, u, f, a, this.compareMinY);\n      for (let d = u; d <= f; d += a) {\n        const g = Math.min(d + a - 1, f);\n        l.children.push(this._build(t, d, g, i - 1));\n      }\n    }\n    return _e(l, this.toBBox), l;\n  }\n  _chooseSubtree(t, n, o, i) {\n    for (; i.push(n), !(n.leaf || i.length - 1 === o); ) {\n      let s = 1 / 0, r = 1 / 0, l;\n      for (let a = 0; a < n.children.length; a++) {\n        const c = n.children[a], u = et(c), f = Si(t, c) - u;\n        f < r ? (r = f, s = u < s ? u : s, l = c) : f === r && u < s && (s = u, l = c);\n      }\n      n = l || n.children[0];\n    }\n    return n;\n  }\n  _insert(t, n, o) {\n    const i = o ? t : this.toBBox(t), s = [], r = this._chooseSubtree(i, this.data, n, s);\n    for (r.children.push(t), Be(r, i); n >= 0 && s[n].children.length > this._maxEntries; )\n      this._split(s, n), n--;\n    this._adjustParentBBoxes(i, s, n);\n  }\n  // split overflowed node into two\n  _split(t, n) {\n    const o = t[n], i = o.children.length, s = this._minEntries;\n    this._chooseSplitAxis(o, s, i);\n    const r = this._chooseSplitIndex(o, s, i), l = be(o.children.splice(r, o.children.length - r));\n    l.height = o.height, l.leaf = o.leaf, _e(o, this.toBBox), _e(l, this.toBBox), n ? t[n - 1].children.push(l) : this._splitRoot(o, l);\n  }\n  _splitRoot(t, n) {\n    this.data = be([t, n]), this.data.height = t.height + 1, this.data.leaf = !1, _e(this.data, this.toBBox);\n  }\n  _chooseSplitIndex(t, n, o) {\n    let i, s = 1 / 0, r = 1 / 0;\n    for (let l = n; l <= o - n; l++) {\n      const a = Oe(t, 0, l, this.toBBox), c = Oe(t, l, o, this.toBBox), u = Ti(a, c), f = et(a) + et(c);\n      u < s ? (s = u, i = l, r = f < r ? f : r) : u === s && f < r && (r = f, i = l);\n    }\n    return i || o - n;\n  }\n  // sorts node children by the best axis for split\n  _chooseSplitAxis(t, n, o) {\n    const i = t.leaf ? this.compareMinX : Ei, s = t.leaf ? this.compareMinY : Ai, r = this._allDistMargin(t, n, o, i), l = this._allDistMargin(t, n, o, s);\n    r < l && t.children.sort(i);\n  }\n  // total margin of all possible split distributions where each node is at least m full\n  _allDistMargin(t, n, o, i) {\n    t.children.sort(i);\n    const s = this.toBBox, r = Oe(t, 0, n, s), l = Oe(t, o - n, o, s);\n    let a = Ue(r) + Ue(l);\n    for (let c = n; c < o - n; c++) {\n      const u = t.children[c];\n      Be(r, t.leaf ? s(u) : u), a += Ue(r);\n    }\n    for (let c = o - n - 1; c >= n; c--) {\n      const u = t.children[c];\n      Be(l, t.leaf ? s(u) : u), a += Ue(l);\n    }\n    return a;\n  }\n  _adjustParentBBoxes(t, n, o) {\n    for (let i = o; i >= 0; i--)\n      Be(n[i], t);\n  }\n  _condense(t) {\n    for (let n = t.length - 1, o; n >= 0; n--)\n      t[n].children.length === 0 ? n > 0 ? (o = t[n - 1].children, o.splice(o.indexOf(t[n]), 1)) : this.clear() : _e(t[n], this.toBBox);\n  }\n}\nfunction bi(e, t, n) {\n  if (!n)\n    return t.indexOf(e);\n  for (let o = 0; o < t.length; o++)\n    if (n(e, t[o]))\n      return o;\n  return -1;\n}\nfunction _e(e, t) {\n  Oe(e, 0, e.children.length, t, e);\n}\nfunction Oe(e, t, n, o, i) {\n  i || (i = be(null)), i.minX = 1 / 0, i.minY = 1 / 0, i.maxX = -1 / 0, i.maxY = -1 / 0;\n  for (let s = t; s < n; s++) {\n    const r = e.children[s];\n    Be(i, e.leaf ? o(r) : r);\n  }\n  return i;\n}\nfunction Be(e, t) {\n  return e.minX = Math.min(e.minX, t.minX), e.minY = Math.min(e.minY, t.minY), e.maxX = Math.max(e.maxX, t.maxX), e.maxY = Math.max(e.maxY, t.maxY), e;\n}\nfunction Ei(e, t) {\n  return e.minX - t.minX;\n}\nfunction Ai(e, t) {\n  return e.minY - t.minY;\n}\nfunction et(e) {\n  return (e.maxX - e.minX) * (e.maxY - e.minY);\n}\nfunction Ue(e) {\n  return e.maxX - e.minX + (e.maxY - e.minY);\n}\nfunction Si(e, t) {\n  return (Math.max(t.maxX, e.maxX) - Math.min(t.minX, e.minX)) * (Math.max(t.maxY, e.maxY) - Math.min(t.minY, e.minY));\n}\nfunction Ti(e, t) {\n  const n = Math.max(e.minX, t.minX), o = Math.max(e.minY, t.minY), i = Math.min(e.maxX, t.maxX), s = Math.min(e.maxY, t.maxY);\n  return Math.max(0, i - n) * Math.max(0, s - o);\n}\nfunction tt(e, t) {\n  return e.minX <= t.minX && e.minY <= t.minY && t.maxX <= e.maxX && t.maxY <= e.maxY;\n}\nfunction Ve(e, t) {\n  return t.minX <= e.maxX && t.minY <= e.maxY && t.maxX >= e.minX && t.maxY >= e.minY;\n}\nfunction be(e) {\n  return {\n    children: e,\n    height: 1,\n    leaf: !0,\n    minX: 1 / 0,\n    minY: 1 / 0,\n    maxX: -1 / 0,\n    maxY: -1 / 0\n  };\n}\nfunction Ct(e, t, n, o, i) {\n  const s = [t, n];\n  for (; s.length; ) {\n    if (n = s.pop(), t = s.pop(), n - t <= o)\n      continue;\n    const r = t + Math.ceil((n - t) / o / 2) * o;\n    yi(e, r, t, n, i), s.push(t, r, r, n);\n  }\n}\nconst Mi = () => {\n  const e = new wi(), t = /* @__PURE__ */ new Map(), n = () => [...t.values()], o = () => {\n    e.clear(), t.clear();\n  }, i = (f) => {\n    const { minX: d, minY: g, maxX: m, maxY: y } = f.selector.geometry.bounds, b = { minX: d, minY: g, maxX: m, maxY: y, target: f };\n    e.insert(b), t.set(f.annotation, b);\n  }, s = (f) => {\n    const d = t.get(f.annotation);\n    d && e.remove(d), t.delete(f.annotation);\n  };\n  return {\n    all: n,\n    clear: o,\n    getAt: (f, d) => {\n      const m = e.search({\n        minX: f,\n        minY: d,\n        maxX: f,\n        maxY: d\n      }).map((y) => y.target).filter((y) => y.selector.type === q.RECTANGLE || wn(y.selector, f, d));\n      if (m.length > 0)\n        return m.sort((y, b) => st(y.selector) - st(b.selector)), m[0];\n    },\n    getIntersecting: (f, d, g, m) => e.search({\n      minX: f,\n      minY: d,\n      maxX: f + g,\n      maxY: d + m\n    }).map((y) => y.target),\n    insert: i,\n    remove: s,\n    set: (f, d = !0) => {\n      d && o();\n      const g = f.map((m) => {\n        const { minX: y, minY: b, maxX: p, maxY: A } = m.selector.geometry.bounds;\n        return { minX: y, minY: b, maxX: p, maxY: A, target: m };\n      });\n      g.forEach((m) => t.set(m.target.annotation, m)), e.load(g);\n    },\n    size: () => e.all().length,\n    update: (f, d) => {\n      s(f), i(d);\n    }\n  };\n}, Li = (e) => {\n  const t = Kn(), n = Mi(), o = Rn(t, e.pointerSelectAction), i = Cn(t), s = xn();\n  return t.observe(({ changes: a }) => {\n    n.set((a.created || []).map((c) => c.target), !1), (a.deleted || []).forEach((c) => n.remove(c.target)), (a.updated || []).forEach(({ oldValue: c, newValue: u }) => n.update(c.target, u.target));\n  }), {\n    store: {\n      ...t,\n      getAt: (a, c) => {\n        const u = n.getAt(a, c);\n        return u ? t.getAnnotation(u.annotation) : void 0;\n      },\n      getIntersecting: (a, c, u, f) => n.getIntersecting(a, c, u, f).map((d) => t.getAnnotation(d.annotation))\n    },\n    selection: o,\n    hover: i,\n    viewport: s\n  };\n}, vi = (e) => {\n  const t = Li(e);\n  return {\n    ...t,\n    store: Wn(t.store)\n  };\n}, ki = (e) => {\n  let t, n;\n  if (e.nodeName === \"CANVAS\")\n    t = e, n = t.getContext(\"2d\", { willReadFrequently: !0 });\n  else {\n    const i = e;\n    t = document.createElement(\"canvas\"), t.width = i.width, t.height = i.height, n = t.getContext(\"2d\", { willReadFrequently: !0 }), n.drawImage(i, 0, 0, i.width, i.height);\n  }\n  let o = 0;\n  for (let i = 1; i < 10; i++)\n    for (let s = 1; s < 10; s++) {\n      const r = Math.round(s * t.width / 10), l = Math.round(i * t.height / 10), a = n.getImageData(r, l, 1, 1).data, c = (0.299 * a[0] + 0.587 * a[1] + 0.114 * a[2]) / 255;\n      o += c;\n    }\n  return o / 81;\n}, Oi = (e) => {\n  const t = ki(e), n = t > 0.6 ? \"dark\" : \"light\";\n  return console.log(`[Annotorious] Image brightness: ${t.toFixed(1)}. Setting ${n} theme.`), n;\n}, Rt = (e, t, n) => t.setAttribute(\"data-theme\", n === \"auto\" ? Oi(e) : n), Bi = (e, t) => ({\n  ...e,\n  drawingEnabled: e.drawingEnabled === void 0 ? t.drawingEnabled : e.drawingEnabled,\n  drawingMode: e.drawingMode || t.drawingMode,\n  pointerSelectAction: e.pointerSelectAction || t.pointerSelectAction,\n  theme: e.theme || t.theme\n}), Nt = navigator.userAgent.indexOf(\"Mac OS X\") !== -1, Ii = (e, t) => {\n  const n = t || document, o = (r) => {\n    const l = r;\n    l.key === \"z\" && l.ctrlKey ? e.undo() : l.key === \"y\" && l.ctrlKey && e.redo();\n  }, i = (r) => {\n    const l = r;\n    l.key === \"z\" && l.metaKey && (l.shiftKey ? e.redo() : e.undo());\n  }, s = () => {\n    Nt ? n.removeEventListener(\"keydown\", i) : n.removeEventListener(\"keydown\", o);\n  };\n  return Nt ? n.addEventListener(\"keydown\", i) : n.addEventListener(\"keydown\", o), {\n    destroy: s\n  };\n}, Xi = (e, t = {}) => {\n  if (!e)\n    throw \"Missing argument: image\";\n  const n = typeof e == \"string\" ? document.getElementById(e) : e, o = Bi(t, {\n    drawingEnabled: !0,\n    drawingMode: \"drag\",\n    pointerSelectAction: Kt.EDIT,\n    theme: \"light\"\n  }), i = vi(o), { selection: s, store: r } = i, l = Zn(r), a = $n(\n    i,\n    l,\n    o.adapter,\n    o.autoSave\n  ), c = document.createElement(\"DIV\");\n  c.style.position = \"relative\", c.style.display = \"inline-block\", n.style.display = \"block\", n.parentNode.insertBefore(c, n), c.appendChild(n);\n  const u = Ii(l);\n  let f = lo();\n  Rt(n, c, o.theme);\n  const d = new pi({\n    target: c,\n    props: {\n      drawingEnabled: !!o.drawingEnabled,\n      image: n,\n      preferredDrawingMode: o.drawingMode,\n      state: i,\n      style: o.style,\n      user: f\n    }\n  });\n  d.$on(\"click\", (Y) => {\n    const { originalEvent: w, annotation: S } = Y.detail;\n    S ? s.clickSelect(S.id, w) : s.isEmpty() || s.clear();\n  });\n  const g = to(i, l, o.adapter), m = () => {\n    d.$destroy(), c.parentNode.insertBefore(n, c), c.parentNode.removeChild(c), u.destroy(), l.destroy();\n  }, y = () => f, b = (Y, w, S) => Ko(Y, w, S), p = (Y, w) => Io(Y, w), A = (Y) => {\n    if (!$t(Y))\n      throw `No drawing tool named ${Y}`;\n    d.$set({ toolName: Y });\n  }, _ = (Y) => d.$set({ drawingEnabled: Y }), E = (Y) => {\n    console.warn(\"Filter not implemented yet\");\n  }, B = (Y) => d.$set({ style: Y }), V = (Y) => Rt(n, c, Y), U = (Y) => {\n    f = Y, d.$set({ user: Y });\n  }, R = (Y) => (\n    // @ts-ignore\n    d.$set({ visible: Y })\n  );\n  return {\n    ...g,\n    destroy: m,\n    getUser: y,\n    listDrawingTools: xt,\n    on: a.on,\n    off: a.off,\n    registerDrawingTool: b,\n    registerShapeEditor: p,\n    setDrawingEnabled: _,\n    setDrawingTool: A,\n    setFilter: E,\n    setStyle: B,\n    setTheme: V,\n    setUser: U,\n    setVisible: R,\n    state: i\n  };\n};\nexport {\n  Zt as Editor,\n  Co as EditorMount,\n  ke as Handle,\n  Di as IdentityTransform,\n  yo as PolygonEditor,\n  Oo as RectangleEditor,\n  An as RectangleUtil,\n  Go as RubberbandRectangle,\n  pi as SVGAnnotationLayer,\n  q as ShapeType,\n  No as ToolMount,\n  Yi as W3CImageFormat,\n  li as addEventListeners,\n  Fe as boundsFromPoints,\n  st as computeArea,\n  Xi as createImageAnnotator,\n  Li as createImageAnnotatorState,\n  si as createSVGTransform,\n  vi as createSvelteImageAnnotatorState,\n  Oi as detectTheme,\n  Ze as distance,\n  bo as enableResponsive,\n  Bi as fillDefaults,\n  Bo as getEditor,\n  $t as getTool,\n  Ii as initKeyboardCommands,\n  wn as intersects,\n  Eo as isTouch,\n  xt as listDrawingTools,\n  Sn as parseFragmentSelector,\n  On as parseSVGSelector,\n  uo as parseW3CImageAnnotation,\n  Io as registerEditor,\n  at as registerShapeUtil,\n  Ko as registerTool,\n  ki as sampleBrightness,\n  Tn as serializeFragmentSelector,\n  Bn as serializeSVGSelector,\n  ho as serializeW3CImageAnnotation,\n  Rt as setTheme\n};\n//# sourceMappingURL=annotorious.es.js.map\n","/** @returns {void} */\nexport function noop() {}\n\nexport const identity = (x) => x;\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nexport function assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n/**\n * @param {any} value\n * @returns {value is PromiseLike<any>}\n */\nexport function is_promise(value) {\n\treturn (\n\t\t!!value &&\n\t\t(typeof value === 'object' || typeof value === 'function') &&\n\t\ttypeof (/** @type {any} */ (value).then) === 'function'\n\t);\n}\n\n/** @returns {void} */\nexport function add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nexport function run(fn) {\n\treturn fn();\n}\n\nexport function blank_object() {\n\treturn Object.create(null);\n}\n\n/**\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function run_all(fns) {\n\tfns.forEach(run);\n}\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\n/** @returns {boolean} */\nexport function safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\n}\n\nlet src_url_equal_anchor;\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nexport function src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\tif (!src_url_equal_anchor) {\n\t\tsrc_url_equal_anchor = document.createElement('a');\n\t}\n\t// This is actually faster than doing URL(..).href\n\tsrc_url_equal_anchor.href = url;\n\treturn element_src === src_url_equal_anchor.href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element_srcset\n * @param {string | undefined | null} srcset\n * @returns {boolean}\n */\nexport function srcset_url_equal(element_srcset, srcset) {\n\tconst element_urls = split_srcset(element_srcset.srcset);\n\tconst urls = split_srcset(srcset || '');\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n\n/** @returns {boolean} */\nexport function not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\n/** @returns {boolean} */\nexport function is_empty(obj) {\n\treturn Object.keys(obj).length === 0;\n}\n\n/** @returns {void} */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nexport function subscribe(store, ...callbacks) {\n\tif (store == null) {\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(undefined);\n\t\t}\n\t\treturn noop;\n\t}\n\tconst unsub = store.subscribe(...callbacks);\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * https://svelte.dev/docs/svelte-store#get\n * @template T\n * @param {import('../store/public.js').Readable<T>} store\n * @returns {T}\n */\nexport function get_store_value(store) {\n\tlet value;\n\tsubscribe(store, (_) => (value = _))();\n\treturn value;\n}\n\n/** @returns {void} */\nexport function component_subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(subscribe(store, callback));\n}\n\nexport function create_slot(definition, ctx, $$scope, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n\treturn definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;\n}\n\nexport function get_slot_changes(definition, $$scope, dirty, fn) {\n\tif (definition[2] && fn) {\n\t\tconst lets = definition[2](fn(dirty));\n\t\tif ($$scope.dirty === undefined) {\n\t\t\treturn lets;\n\t\t}\n\t\tif (typeof lets === 'object') {\n\t\t\tconst merged = [];\n\t\t\tconst len = Math.max($$scope.dirty.length, lets.length);\n\t\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\t\tmerged[i] = $$scope.dirty[i] | lets[i];\n\t\t\t}\n\t\t\treturn merged;\n\t\t}\n\t\treturn $$scope.dirty | lets;\n\t}\n\treturn $$scope.dirty;\n}\n\n/** @returns {void} */\nexport function update_slot_base(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tslot_changes,\n\tget_slot_context_fn\n) {\n\tif (slot_changes) {\n\t\tconst slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n\t\tslot.p(slot_context, slot_changes);\n\t}\n}\n\n/** @returns {void} */\nexport function update_slot(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tdirty,\n\tget_slot_changes_fn,\n\tget_slot_context_fn\n) {\n\tconst slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n\tupdate_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\n\n/** @returns {any[] | -1} */\nexport function get_all_dirty_from_scope($$scope) {\n\tif ($$scope.ctx.length > 32) {\n\t\tconst dirty = [];\n\t\tconst length = $$scope.ctx.length / 32;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdirty[i] = -1;\n\t\t}\n\t\treturn dirty;\n\t}\n\treturn -1;\n}\n\n/** @returns {{}} */\nexport function exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\n/** @returns {{}} */\nexport function compute_rest_props(props, keys) {\n\tconst rest = {};\n\tkeys = new Set(keys);\n\tfor (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];\n\treturn rest;\n}\n\n/** @returns {{}} */\nexport function compute_slots(slots) {\n\tconst result = {};\n\tfor (const key in slots) {\n\t\tresult[key] = true;\n\t}\n\treturn result;\n}\n\n/** @returns {(this: any, ...args: any[]) => void} */\nexport function once(fn) {\n\tlet ran = false;\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\t\tfn.call(this, ...args);\n\t};\n}\n\nexport function null_to_empty(value) {\n\treturn value == null ? '' : value;\n}\n\nexport function set_store_value(store, ret, value) {\n\tstore.set(value);\n\treturn ret;\n}\n\nexport const has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport function action_destroyer(action_result) {\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nexport function split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\nexport const contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n","/** @type {typeof globalThis} */\nexport const globals =\n\ttypeof window !== 'undefined'\n\t\t? window\n\t\t: typeof globalThis !== 'undefined'\n\t\t? globalThis\n\t\t: // @ts-ignore Node typings have this\n\t\t  global;\n","import { contenteditable_truthy_values, has_prop } from './utils.js';\n\nimport { ResizeObserverSingleton } from './ResizeObserverSingleton.js';\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\n\n/**\n * @returns {void}\n */\nexport function start_hydrating() {\n\tis_hydrating = true;\n}\n\n/**\n * @returns {void}\n */\nexport function end_hydrating() {\n\tis_hydrating = false;\n}\n\n/**\n * @param {number} low\n * @param {number} high\n * @param {(index: number) => number} key\n * @param {number} value\n * @returns {number}\n */\nfunction upper_bound(low, high, key, value) {\n\t// Return first index of value larger than input value in the range [low, high)\n\twhile (low < high) {\n\t\tconst mid = low + ((high - low) >> 1);\n\t\tif (key(mid) <= value) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\treturn low;\n}\n\n/**\n * @param {NodeEx} target\n * @returns {void}\n */\nfunction init_hydrate(target) {\n\tif (target.hydrate_init) return;\n\ttarget.hydrate_init = true;\n\t// We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n\n\tlet children = /** @type {ArrayLike<NodeEx2>} */ (target.childNodes);\n\t// If target is <head>, there may be children without claim_order\n\tif (target.nodeName === 'HEAD') {\n\t\tconst my_children = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst node = children[i];\n\t\t\tif (node.claim_order !== undefined) {\n\t\t\t\tmy_children.push(node);\n\t\t\t}\n\t\t}\n\t\tchildren = my_children;\n\t}\n\t/*\n\t * Reorder claimed children optimally.\n\t * We can reorder claimed children optimally by finding the longest subsequence of\n\t * nodes that are already claimed in order and only moving the rest. The longest\n\t * subsequence of nodes that are claimed in order can be found by\n\t * computing the longest increasing subsequence of .claim_order values.\n\t *\n\t * This algorithm is optimal in generating the least amount of reorder operations\n\t * possible.\n\t *\n\t * Proof:\n\t * We know that, given a set of reordering operations, the nodes that do not move\n\t * always form an increasing subsequence, since they do not move among each other\n\t * meaning that they must be already ordered among each other. Thus, the maximal\n\t * set of nodes that do not move form a longest increasing subsequence.\n\t */\n\t// Compute longest increasing subsequence\n\t// m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n\tconst m = new Int32Array(children.length + 1);\n\t// Predecessor indices + 1\n\tconst p = new Int32Array(children.length);\n\tm[0] = -1;\n\tlet longest = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst current = children[i].claim_order;\n\t\t// Find the largest subsequence length such that it ends in a value less than our current value\n\t\t// upper_bound returns first greater value, so we subtract one\n\t\t// with fast path for when we are on the current longest subsequence\n\t\tconst seq_len =\n\t\t\t(longest > 0 && children[m[longest]].claim_order <= current\n\t\t\t\t? longest + 1\n\t\t\t\t: upper_bound(1, longest, (idx) => children[m[idx]].claim_order, current)) - 1;\n\t\tp[i] = m[seq_len] + 1;\n\t\tconst new_len = seq_len + 1;\n\t\t// We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n\t\tm[new_len] = i;\n\t\tlongest = Math.max(new_len, longest);\n\t}\n\t// The longest increasing subsequence of nodes (initially reversed)\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst lis = [];\n\t// The rest of the nodes, nodes that will be moved\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst to_move = [];\n\tlet last = children.length - 1;\n\tfor (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n\t\tlis.push(children[cur - 1]);\n\t\tfor (; last >= cur; last--) {\n\t\t\tto_move.push(children[last]);\n\t\t}\n\t\tlast--;\n\t}\n\tfor (; last >= 0; last--) {\n\t\tto_move.push(children[last]);\n\t}\n\tlis.reverse();\n\t// We sort the nodes being moved to guarantee that their insertion order matches the claim order\n\tto_move.sort((a, b) => a.claim_order - b.claim_order);\n\t// Finally, we move the nodes\n\tfor (let i = 0, j = 0; i < to_move.length; i++) {\n\t\twhile (j < lis.length && to_move[i].claim_order >= lis[j].claim_order) {\n\t\t\tj++;\n\t\t}\n\t\tconst anchor = j < lis.length ? lis[j] : null;\n\t\ttarget.insertBefore(to_move[i], anchor);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @returns {void}\n */\nexport function append(target, node) {\n\ttarget.appendChild(node);\n}\n\n/**\n * @param {Node} target\n * @param {string} style_sheet_id\n * @param {string} styles\n * @returns {void}\n */\nexport function append_styles(target, style_sheet_id, styles) {\n\tconst append_styles_to = get_root_for_style(target);\n\tif (!append_styles_to.getElementById(style_sheet_id)) {\n\t\tconst style = element('style');\n\t\tstyle.id = style_sheet_id;\n\t\tstyle.textContent = styles;\n\t\tappend_stylesheet(append_styles_to, style);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {ShadowRoot | Document}\n */\nexport function get_root_for_style(node) {\n\tif (!node) return document;\n\tconst root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n\tif (root && /** @type {ShadowRoot} */ (root).host) {\n\t\treturn /** @type {ShadowRoot} */ (root);\n\t}\n\treturn node.ownerDocument;\n}\n\n/**\n * @param {Node} node\n * @returns {CSSStyleSheet}\n */\nexport function append_empty_stylesheet(node) {\n\tconst style_element = element('style');\n\t// For transitions to work without 'style-src: unsafe-inline' Content Security Policy,\n\t// these empty tags need to be allowed with a hash as a workaround until we move to the Web Animations API.\n\t// Using the hash for the empty string (for an empty tag) works in all browsers except Safari.\n\t// So as a workaround for the workaround, when we append empty style tags we set their content to /* empty */.\n\t// The hash 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=' will then work even in Safari.\n\tstyle_element.textContent = '/* empty */';\n\tappend_stylesheet(get_root_for_style(node), style_element);\n\treturn style_element.sheet;\n}\n\n/**\n * @param {ShadowRoot | Document} node\n * @param {HTMLStyleElement} style\n * @returns {CSSStyleSheet}\n */\nfunction append_stylesheet(node, style) {\n\tappend(/** @type {Document} */ (node).head || node, style);\n\treturn style.sheet;\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @returns {void}\n */\nexport function append_hydration(target, node) {\n\tif (is_hydrating) {\n\t\tinit_hydrate(target);\n\t\tif (\n\t\t\ttarget.actual_end_child === undefined ||\n\t\t\t(target.actual_end_child !== null && target.actual_end_child.parentNode !== target)\n\t\t) {\n\t\t\ttarget.actual_end_child = target.firstChild;\n\t\t}\n\t\t// Skip nodes of undefined ordering\n\t\twhile (target.actual_end_child !== null && target.actual_end_child.claim_order === undefined) {\n\t\t\ttarget.actual_end_child = target.actual_end_child.nextSibling;\n\t\t}\n\t\tif (node !== target.actual_end_child) {\n\t\t\t// We only insert if the ordering of this node should be modified or the parent node is not target\n\t\t\tif (node.claim_order !== undefined || node.parentNode !== target) {\n\t\t\t\ttarget.insertBefore(node, target.actual_end_child);\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.actual_end_child = node.nextSibling;\n\t\t}\n\t} else if (node.parentNode !== target || node.nextSibling !== null) {\n\t\ttarget.appendChild(node);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @param {Node} [anchor]\n * @returns {void}\n */\nexport function insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor || null);\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @param {NodeEx} [anchor]\n * @returns {void}\n */\nexport function insert_hydration(target, node, anchor) {\n\tif (is_hydrating && !anchor) {\n\t\tappend_hydration(target, node);\n\t} else if (node.parentNode !== target || node.nextSibling != anchor) {\n\t\ttarget.insertBefore(node, anchor || null);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {void}\n */\nexport function detach(node) {\n\tif (node.parentNode) {\n\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element(name) {\n\treturn document.createElement(name);\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @param {string} is\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element_is(name, is) {\n\treturn document.createElement(name, { is });\n}\n\n/**\n * @template T\n * @template {keyof T} K\n * @param {T} obj\n * @param {K[]} exclude\n * @returns {Pick<T, Exclude<keyof T, K>>}\n */\nexport function object_without_properties(obj, exclude) {\n\tconst target = /** @type {Pick<T, Exclude<keyof T, K>>} */ ({});\n\tfor (const k in obj) {\n\t\tif (\n\t\t\thas_prop(obj, k) &&\n\t\t\t// @ts-ignore\n\t\t\texclude.indexOf(k) === -1\n\t\t) {\n\t\t\t// @ts-ignore\n\t\t\ttarget[k] = obj[k];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * @template {keyof SVGElementTagNameMap} K\n * @param {K} name\n * @returns {SVGElement}\n */\nexport function svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\n/**\n * @param {string} data\n * @returns {Text}\n */\nexport function text(data) {\n\treturn document.createTextNode(data);\n}\n\n/**\n * @returns {Text} */\nexport function space() {\n\treturn text(' ');\n}\n\n/**\n * @returns {Text} */\nexport function empty() {\n\treturn text('');\n}\n\n/**\n * @param {string} content\n * @returns {Comment}\n */\nexport function comment(content) {\n\treturn document.createComment(content);\n}\n\n/**\n * @param {EventTarget} node\n * @param {string} event\n * @param {EventListenerOrEventListenerObject} handler\n * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]\n * @returns {() => void}\n */\nexport function listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function prevent_default(fn) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_immediate_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function self(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.target === this) fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function trusted(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.isTrusted) fn.call(this, event);\n\t};\n}\n\n/**\n * @param {Element} node\n * @param {string} attribute\n * @param {string} [value]\n * @returns {void}\n */\nexport function attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_attributes(node, attributes) {\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n\tfor (const key in attributes) {\n\t\tif (attributes[key] == null) {\n\t\t\tnode.removeAttribute(key);\n\t\t} else if (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key === '__value') {\n\t\t\t/** @type {any} */ (node).value = node[key] = attributes[key];\n\t\t} else if (\n\t\t\tdescriptors[key] &&\n\t\t\tdescriptors[key].set &&\n\t\t\talways_set_through_set_attribute.indexOf(key) === -1\n\t\t) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_svg_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tattr(node, key, attributes[key]);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} data_map\n * @returns {void}\n */\nexport function set_custom_element_data_map(node, data_map) {\n\tObject.keys(data_map).forEach((key) => {\n\t\tset_custom_element_data(node, key, data_map[key]);\n\t});\n}\n\n/**\n * @returns {void} */\nexport function set_custom_element_data(node, prop, value) {\n\tconst lower = prop.toLowerCase(); // for backwards compatibility with existing behavior we do lowercase first\n\tif (lower in node) {\n\t\tnode[lower] = typeof node[lower] === 'boolean' && value === '' ? true : value;\n\t} else if (prop in node) {\n\t\tnode[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\n/**\n * @param {string} tag\n */\nexport function set_dynamic_element_data(tag) {\n\treturn /-/.test(tag) ? set_custom_element_data_map : set_attributes;\n}\n\n/**\n * @returns {void}\n */\nexport function xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @returns {string}\n */\nexport function get_svelte_dataset(node) {\n\treturn node.dataset.svelteH;\n}\n\n/**\n * @returns {unknown[]} */\nexport function get_binding_group_value(group, __value, checked) {\n\tconst value = new Set();\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.add(group[i].__value);\n\t}\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement[]} group\n * @returns {{ p(...inputs: HTMLInputElement[]): void; r(): void; }}\n */\nexport function init_binding_group(group) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\treturn {\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\t_inputs.forEach((input) => group.push(input));\n\t\t},\n\t\t/* remove */ r() {\n\t\t\t_inputs.forEach((input) => group.splice(group.indexOf(input), 1));\n\t\t}\n\t};\n}\n\n/**\n * @param {number[]} indexes\n * @returns {{ u(new_indexes: number[]): void; p(...inputs: HTMLInputElement[]): void; r: () => void; }}\n */\nexport function init_binding_group_dynamic(group, indexes) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _group = get_binding_group(group);\n\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\n\tfunction get_binding_group(group) {\n\t\tfor (let i = 0; i < indexes.length; i++) {\n\t\t\tgroup = group[indexes[i]] = group[indexes[i]] || [];\n\t\t}\n\t\treturn group;\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction push() {\n\t\t_inputs.forEach((input) => _group.push(input));\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction remove() {\n\t\t_inputs.forEach((input) => _group.splice(_group.indexOf(input), 1));\n\t}\n\treturn {\n\t\t/* update */ u(new_indexes) {\n\t\t\tindexes = new_indexes;\n\t\t\tconst new_group = get_binding_group(group);\n\t\t\tif (new_group !== _group) {\n\t\t\t\tremove();\n\t\t\t\t_group = new_group;\n\t\t\t\tpush();\n\t\t\t}\n\t\t},\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\tpush();\n\t\t},\n\t\t/* remove */ r: remove\n\t};\n}\n\n/** @returns {number} */\nexport function to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/** @returns {any[]} */\nexport function time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\n/**\n * @param {Element} element\n * @returns {ChildNode[]}\n */\nexport function children(element) {\n\treturn Array.from(element.childNodes);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {void}\n */\nfunction init_claim_info(nodes) {\n\tif (nodes.claim_info === undefined) {\n\t\tnodes.claim_info = { last_index: 0, total_claimed: 0 };\n\t}\n}\n\n/**\n * @template {ChildNodeEx} R\n * @param {ChildNodeArray} nodes\n * @param {(node: ChildNodeEx) => node is R} predicate\n * @param {(node: ChildNodeEx) => ChildNodeEx | undefined} process_node\n * @param {() => R} create_node\n * @param {boolean} dont_update_last_index\n * @returns {R}\n */\nfunction claim_node(nodes, predicate, process_node, create_node, dont_update_last_index = false) {\n\t// Try to find nodes in an order such that we lengthen the longest increasing subsequence\n\tinit_claim_info(nodes);\n\tconst result_node = (() => {\n\t\t// We first try to find an element after the previous one\n\t\tfor (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// Otherwise, we try to find one before\n\t\t// We iterate in reverse so that we don't go too far back\n\t\tfor (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t} else if (replacement === undefined) {\n\t\t\t\t\t// Since we spliced before the last_index, we decrease it\n\t\t\t\t\tnodes.claim_info.last_index--;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// If we can't find any matching node, we create a new one\n\t\treturn create_node();\n\t})();\n\tresult_node.claim_order = nodes.claim_info.total_claimed;\n\tnodes.claim_info.total_claimed += 1;\n\treturn result_node;\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @param {(name: string) => Element | SVGElement} create_element\n * @returns {Element | SVGElement}\n */\nfunction claim_element_base(nodes, name, attributes, create_element) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Element | SVGElement} */\n\t\t(node) => node.nodeName === name,\n\t\t/** @param {Element} node */\n\t\t(node) => {\n\t\t\tconst remove = [];\n\t\t\tfor (let j = 0; j < node.attributes.length; j++) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) {\n\t\t\t\t\tremove.push(attribute.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremove.forEach((v) => node.removeAttribute(v));\n\t\t\treturn undefined;\n\t\t},\n\t\t() => create_element(name)\n\t);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_svg_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, svg_element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Text}\n */\nexport function claim_text(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Text} */\n\t\t(node) => node.nodeType === 3,\n\t\t/** @param {Text} node */\n\t\t(node) => {\n\t\t\tconst data_str = '' + data;\n\t\t\tif (node.data.startsWith(data_str)) {\n\t\t\t\tif (node.data.length !== data_str.length) {\n\t\t\t\t\treturn node.splitText(data_str.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode.data = data_str;\n\t\t\t}\n\t\t},\n\t\t() => text(data),\n\t\ttrue // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n\t);\n}\n\n/**\n * @returns {Text} */\nexport function claim_space(nodes) {\n\treturn claim_text(nodes, ' ');\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Comment}\n */\nexport function claim_comment(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Comment} */\n\t\t(node) => node.nodeType === 8,\n\t\t/** @param {Comment} node */\n\t\t(node) => {\n\t\t\tnode.data = '' + data;\n\t\t\treturn undefined;\n\t\t},\n\t\t() => comment(data),\n\t\ttrue\n\t);\n}\n\nfunction get_comment_idx(nodes, text, start) {\n\tfor (let i = start; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * @param {boolean} is_svg\n * @returns {HtmlTagHydration}\n */\nexport function claim_html_tag(nodes, is_svg) {\n\t// find html opening tag\n\tconst start_index = get_comment_idx(nodes, 'HTML_TAG_START', 0);\n\tconst end_index = get_comment_idx(nodes, 'HTML_TAG_END', start_index + 1);\n\tif (start_index === -1 || end_index === -1) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\n\tinit_claim_info(nodes);\n\tconst html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n\tdetach(html_tag_nodes[0]);\n\tdetach(html_tag_nodes[html_tag_nodes.length - 1]);\n\tconst claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n\tif (claimed_nodes.length === 0) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\tfor (const n of claimed_nodes) {\n\t\tn.claim_order = nodes.claim_info.total_claimed;\n\t\tnodes.claim_info.total_claimed += 1;\n\t}\n\treturn new HtmlTagHydration(is_svg, claimed_nodes);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data_contenteditable(text, data) {\n\tdata = '' + data;\n\tif (text.wholeText === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @param {string} attr_value\n * @returns {void}\n */\nexport function set_data_maybe_contenteditable(text, data, attr_value) {\n\tif (~contenteditable_truthy_values.indexOf(attr_value)) {\n\t\tset_data_contenteditable(text, data);\n\t} else {\n\t\tset_data(text, data);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_input_value(input, value) {\n\tinput.value = value == null ? '' : value;\n}\n\n/**\n * @returns {void} */\nexport function set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_style(node, key, value, important) {\n\tif (value == null) {\n\t\tnode.style.removeProperty(key);\n\t} else {\n\t\tnode.style.setProperty(key, value, important ? 'important' : '');\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_option(select, value, mounting) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nexport function select_value(select) {\n\tconst selected_option = select.querySelector(':checked');\n\treturn selected_option && selected_option.__value;\n}\n\nexport function select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), (option) => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\n\n/**\n * @type {boolean} */\nlet crossorigin;\n\n/**\n * @returns {boolean} */\nexport function is_crossorigin() {\n\tif (crossorigin === undefined) {\n\t\tcrossorigin = false;\n\t\ttry {\n\t\t\tif (typeof window !== 'undefined' && window.parent) {\n\t\t\t\tvoid window.parent.document;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tcrossorigin = true;\n\t\t}\n\t}\n\treturn crossorigin;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {() => void} fn\n * @returns {() => void}\n */\nexport function add_iframe_resize_listener(node, fn) {\n\tconst computed_style = getComputedStyle(node);\n\tif (computed_style.position === 'static') {\n\t\tnode.style.position = 'relative';\n\t}\n\tconst iframe = element('iframe');\n\tiframe.setAttribute(\n\t\t'style',\n\t\t'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n\t\t\t'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;'\n\t);\n\tiframe.setAttribute('aria-hidden', 'true');\n\tiframe.tabIndex = -1;\n\tconst crossorigin = is_crossorigin();\n\n\t/**\n\t * @type {() => void}\n\t */\n\tlet unsubscribe;\n\tif (crossorigin) {\n\t\tiframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n\t\tunsubscribe = listen(\n\t\t\twindow,\n\t\t\t'message',\n\t\t\t/** @param {MessageEvent} event */ (event) => {\n\t\t\t\tif (event.source === iframe.contentWindow) fn();\n\t\t\t}\n\t\t);\n\t} else {\n\t\tiframe.src = 'about:blank';\n\t\tiframe.onload = () => {\n\t\t\tunsubscribe = listen(iframe.contentWindow, 'resize', fn);\n\t\t\t// make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n\t\t\t// see https://github.com/sveltejs/svelte/issues/4233\n\t\t\tfn();\n\t\t};\n\t}\n\tappend(node, iframe);\n\treturn () => {\n\t\tif (crossorigin) {\n\t\t\tunsubscribe();\n\t\t} else if (unsubscribe && iframe.contentWindow) {\n\t\t\tunsubscribe();\n\t\t}\n\t\tdetach(iframe);\n\t};\n}\nexport const resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\nexport const resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\nexport const resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton(\n\t{ box: 'device-pixel-content-box' }\n);\nexport { ResizeObserverSingleton };\n\n/**\n * @returns {void} */\nexport function toggle_class(element, name, toggle) {\n\t// The `!!` is required because an `undefined` flag means flipping the current state.\n\telement.classList.toggle(name, !!toggle);\n}\n\n/**\n * @template T\n * @param {string} type\n * @param {T} [detail]\n * @param {{ bubbles?: boolean, cancelable?: boolean }} [options]\n * @returns {CustomEvent<T>}\n */\nexport function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {ChildNodeArray}\n */\nexport function query_selector_all(selector, parent = document.body) {\n\treturn Array.from(parent.querySelectorAll(selector));\n}\n\n/**\n * @param {string} nodeId\n * @param {HTMLElement} head\n * @returns {any[]}\n */\nexport function head_selector(nodeId, head) {\n\tconst result = [];\n\tlet started = 0;\n\tfor (const node of head.childNodes) {\n\t\tif (node.nodeType === 8 /* comment node */) {\n\t\t\tconst comment = node.textContent.trim();\n\t\t\tif (comment === `HEAD_${nodeId}_END`) {\n\t\t\t\tstarted -= 1;\n\t\t\t\tresult.push(node);\n\t\t\t} else if (comment === `HEAD_${nodeId}_START`) {\n\t\t\t\tstarted += 1;\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t} else if (started > 0) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n/** */\nexport class HtmlTag {\n\t/**\n\t * @private\n\t * @default false\n\t */\n\tis_svg = false;\n\t/** parent for creating node */\n\te = undefined;\n\t/** html tag nodes */\n\tn = undefined;\n\t/** target */\n\tt = undefined;\n\t/** anchor */\n\ta = undefined;\n\tconstructor(is_svg = false) {\n\t\tthis.is_svg = is_svg;\n\t\tthis.e = this.n = null;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tthis.h(html);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @param {HTMLElement | SVGElement} target\n\t * @param {HTMLElement | SVGElement} anchor\n\t * @returns {void}\n\t */\n\tm(html, target, anchor = null) {\n\t\tif (!this.e) {\n\t\t\tif (this.is_svg)\n\t\t\t\tthis.e = svg_element(/** @type {keyof SVGElementTagNameMap} */ (target.nodeName));\n\t\t\t/** #7364  target for <template> may be provided as #document-fragment(11) */ else\n\t\t\t\tthis.e = element(\n\t\t\t\t\t/** @type {keyof HTMLElementTagNameMap} */ (\n\t\t\t\t\t\ttarget.nodeType === 11 ? 'TEMPLATE' : target.nodeName\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tthis.t =\n\t\t\t\ttarget.tagName !== 'TEMPLATE'\n\t\t\t\t\t? target\n\t\t\t\t\t: /** @type {HTMLTemplateElement} */ (target).content;\n\t\t\tthis.c(html);\n\t\t}\n\t\tthis.i(anchor);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\th(html) {\n\t\tthis.e.innerHTML = html;\n\t\tthis.n = Array.from(\n\t\t\tthis.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes\n\t\t);\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert(this.t, this.n[i], anchor);\n\t\t}\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tp(html) {\n\t\tthis.d();\n\t\tthis.h(html);\n\t\tthis.i(this.a);\n\t}\n\n\t/**\n\t * @returns {void} */\n\td() {\n\t\tthis.n.forEach(detach);\n\t}\n}\n\nexport class HtmlTagHydration extends HtmlTag {\n\t/** @type {Element[]} hydration claimed nodes */\n\tl = undefined;\n\n\tconstructor(is_svg = false, claimed_nodes) {\n\t\tsuper(is_svg);\n\t\tthis.e = this.n = null;\n\t\tthis.l = claimed_nodes;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tif (this.l) {\n\t\t\tthis.n = this.l;\n\t\t} else {\n\t\t\tsuper.c(html);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert_hydration(this.t, this.n[i], anchor);\n\t\t}\n\t}\n}\n\n/**\n * @param {NamedNodeMap} attributes\n * @returns {{}}\n */\nexport function attribute_to_object(attributes) {\n\tconst result = {};\n\tfor (const attribute of attributes) {\n\t\tresult[attribute.name] = attribute.value;\n\t}\n\treturn result;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t'&': '&amp;',\n\t'<': '&lt;'\n};\n\nconst regex_attribute_characters_to_escape = /[\"&<]/g;\n\n/**\n * Note that the attribute itself should be surrounded in double quotes\n * @param {any} attribute\n */\nfunction escape_attribute(attribute) {\n\treturn String(attribute).replace(regex_attribute_characters_to_escape, (match) => escaped[match]);\n}\n\n/**\n * @param {Record<string, string>} attributes\n */\nexport function stringify_spread(attributes) {\n\tlet str = ' ';\n\tfor (const key in attributes) {\n\t\tif (attributes[key] != null) {\n\t\t\tstr += `${key}=\"${escape_attribute(attributes[key])}\" `;\n\t\t}\n\t}\n\n\treturn str;\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {{}}\n */\nexport function get_custom_elements_slots(element) {\n\tconst result = {};\n\telement.childNodes.forEach(\n\t\t/** @param {Element} node */ (node) => {\n\t\t\tresult[node.slot || 'default'] = true;\n\t\t}\n\t);\n\treturn result;\n}\n\nexport function construct_svelte_component(component, props) {\n\treturn new component(props);\n}\n\n/**\n * @typedef {Node & {\n * \tclaim_order?: number;\n * \thydrate_init?: true;\n * \tactual_end_child?: NodeEx;\n * \tchildNodes: NodeListOf<NodeEx>;\n * }} NodeEx\n */\n\n/** @typedef {ChildNode & NodeEx} ChildNodeEx */\n\n/** @typedef {NodeEx & { claim_order: number }} NodeEx2 */\n\n/**\n * @typedef {ChildNodeEx[] & {\n * \tclaim_info?: {\n * \t\tlast_index: number;\n * \t\ttotal_claimed: number;\n * \t};\n * }} ChildNodeArray\n */\n","import { custom_event } from './dom.js';\n\nexport let current_component;\n\n/** @returns {void} */\nexport function set_current_component(component) {\n\tcurrent_component = component;\n}\n\nexport function get_current_component() {\n\tif (!current_component) throw new Error('Function called outside component initialization');\n\treturn current_component;\n}\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#beforeupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tget_current_component().$$.before_update.push(fn);\n}\n\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.\n *\n * `onMount` does not run inside a [server-side component](https://svelte.dev/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs/svelte#onmount\n * @template T\n * @param {() => import('./private.js').NotFunction<T> | Promise<import('./private.js').NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#afterupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tget_current_component().$$.after_update.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs/svelte#ondestroy\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: never; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * https://svelte.dev/docs/svelte#createeventdispatcher\n * @template {Record<string, any>} [EventMap=any]\n * @returns {import('./public.js').EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst component = get_current_component();\n\treturn (type, detail, { cancelable = false } = {}) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(/** @type {string} */ (type), detail, { cancelable });\n\t\t\tcallbacks.slice().forEach((fn) => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#setcontext\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n\treturn context;\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#getcontext\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs/svelte#getallcontexts\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\treturn get_current_component().$$.context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#hascontext\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_current_component().$$.context.has(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\n/**\n * @param component\n * @param event\n * @returns {void}\n */\nexport function bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\tif (callbacks) {\n\t\t// @ts-ignore\n\t\tcallbacks.slice().forEach((fn) => fn.call(this, event));\n\t}\n}\n","import { run_all } from './utils.js';\nimport { current_component, set_current_component } from './lifecycle.js';\n\nexport const dirty_components = [];\nexport const intros = { enabled: false };\nexport const binding_callbacks = [];\n\nlet render_callbacks = [];\n\nconst flush_callbacks = [];\n\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\n\nlet update_scheduled = false;\n\n/** @returns {void} */\nexport function schedule_update() {\n\tif (!update_scheduled) {\n\t\tupdate_scheduled = true;\n\t\tresolved_promise.then(flush);\n\t}\n}\n\n/** @returns {Promise<void>} */\nexport function tick() {\n\tschedule_update();\n\treturn resolved_promise;\n}\n\n/** @returns {void} */\nexport function add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\n/** @returns {void} */\nexport function add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\n\nlet flushidx = 0; // Do *not* move this inside the flush() function\n\n/** @returns {void} */\nexport function flush() {\n\t// Do not reenter flush while dirty components are updated, as this can\n\t// result in an infinite loop. Instead, let the inner flush handle it.\n\t// Reentrancy is ok afterwards for bindings etc.\n\tif (flushidx !== 0) {\n\t\treturn;\n\t}\n\tconst saved_component = current_component;\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\ttry {\n\t\t\twhile (flushidx < dirty_components.length) {\n\t\t\t\tconst component = dirty_components[flushidx];\n\t\t\t\tflushidx++;\n\t\t\t\tset_current_component(component);\n\t\t\t\tupdate(component.$$);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// reset dirty state to not end up in a deadlocked state and then rethrow\n\t\t\tdirty_components.length = 0;\n\t\t\tflushidx = 0;\n\t\t\tthrow e;\n\t\t}\n\t\tset_current_component(null);\n\t\tdirty_components.length = 0;\n\t\tflushidx = 0;\n\t\twhile (binding_callbacks.length) binding_callbacks.pop()();\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\tfor (let i = 0; i < render_callbacks.length; i += 1) {\n\t\t\tconst callback = render_callbacks[i];\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\trender_callbacks.length = 0;\n\t} while (dirty_components.length);\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\tupdate_scheduled = false;\n\tseen_callbacks.clear();\n\tset_current_component(saved_component);\n}\n\n/** @returns {void} */\nfunction update($$) {\n\tif ($$.fragment !== null) {\n\t\t$$.update();\n\t\trun_all($$.before_update);\n\t\tconst dirty = $$.dirty;\n\t\t$$.dirty = [-1];\n\t\t$$.fragment && $$.fragment.p($$.ctx, dirty);\n\t\t$$.after_update.forEach(add_render_callback);\n\t}\n}\n\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function flush_render_callbacks(fns) {\n\tconst filtered = [];\n\tconst targets = [];\n\trender_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));\n\ttargets.forEach((c) => c());\n\trender_callbacks = filtered;\n}\n","import { identity as linear, is_function, noop, run_all } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\nimport { custom_event } from './dom.js';\nimport { add_render_callback } from './scheduler.js';\n\n/**\n * @type {Promise<void> | null}\n */\nlet promise;\n\n/**\n * @returns {Promise<void>}\n */\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\treturn promise;\n}\n\n/**\n * @param {Element} node\n * @param {INTRO | OUTRO | boolean} direction\n * @param {'start' | 'end'} kind\n * @returns {void}\n */\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nconst outroing = new Set();\n\n/**\n * @type {Outro}\n */\nlet outros;\n\n/**\n * @returns {void} */\nexport function group_outros() {\n\toutros = {\n\t\tr: 0,\n\t\tc: [],\n\t\tp: outros // parent group\n\t};\n}\n\n/**\n * @returns {void} */\nexport function check_outros() {\n\tif (!outros.r) {\n\t\trun_all(outros.c);\n\t}\n\toutros = outros.p;\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} [local]\n * @returns {void}\n */\nexport function transition_in(block, local) {\n\tif (block && block.i) {\n\t\toutroing.delete(block);\n\t\tblock.i(local);\n\t}\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} local\n * @param {0 | 1} [detach]\n * @param {() => void} [callback]\n * @returns {void}\n */\nexport function transition_out(block, local, detach, callback) {\n\tif (block && block.o) {\n\t\tif (outroing.has(block)) return;\n\t\toutroing.add(block);\n\t\toutros.c.push(() => {\n\t\t\toutroing.delete(block);\n\t\t\tif (callback) {\n\t\t\t\tif (detach) block.d(1);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t\tblock.o(local);\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @type {import('../transition/public.js').TransitionConfig}\n */\nconst null_transition = { duration: 0 };\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ start(): void; invalidate(): void; end(): void; }}\n */\nexport function create_in_transition(node, fn, params) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'in' };\n\tlet config = fn(node, params, options);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\t/**\n\t * @returns {void} */\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick(0, 1);\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tif (task) task.abort();\n\t\trunning = true;\n\t\tadd_render_callback(() => dispatch(node, true, 'start'));\n\t\ttask = loop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(1, 0);\n\t\t\t\t\tdispatch(node, true, 'end');\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn (running = false);\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\tlet started = false;\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\t\t\tstarted = true;\n\t\t\tdelete_rule(node);\n\t\t\tif (is_function(config)) {\n\t\t\t\tconfig = config(options);\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ end(reset: any): void; }}\n */\nexport function create_out_transition(node, fn, params) {\n\t/** @type {TransitionOptions} */\n\tconst options = { direction: 'out' };\n\tlet config = fn(node, params, options);\n\tlet running = true;\n\tlet animation_name;\n\tconst group = outros;\n\tgroup.r += 1;\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tadd_render_callback(() => dispatch(node, false, 'start'));\n\n\t\tif ('inert' in node) {\n\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\tnode.inert = true;\n\t\t}\n\n\t\tloop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(0, 1);\n\t\t\t\t\tdispatch(node, false, 'end');\n\t\t\t\t\tif (!--group.r) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.c);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (is_function(config)) {\n\t\twait().then(() => {\n\t\t\t// @ts-ignore\n\t\t\tconfig = config(options);\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && 'inert' in node) {\n\t\t\t\tnode.inert = original_inert_value;\n\t\t\t}\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @param {boolean} intro\n * @returns {{ run(b: 0 | 1): void; end(): void; }}\n */\nexport function create_bidirectional_transition(node, fn, params, intro) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'both' };\n\tlet config = fn(node, params, options);\n\tlet t = intro ? 0 : 1;\n\n\t/**\n\t * @type {Program | null} */\n\tlet running_program = null;\n\n\t/**\n\t * @type {PendingProgram | null} */\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @param {PendingProgram} program\n\t * @param {number} duration\n\t * @returns {Program}\n\t */\n\tfunction init(program, duration) {\n\t\tconst d = /** @type {Program['d']} */ (program.b - t);\n\t\tduration *= Math.abs(d);\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\t/**\n\t * @param {INTRO | OUTRO} b\n\t * @returns {void}\n\t */\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\t/**\n\t\t * @type {PendingProgram} */\n\t\tconst program = {\n\t\t\tstart: now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\t// @ts-ignore todo: improve typings\n\t\t\tprogram.group = outros;\n\t\t\toutros.r += 1;\n\t\t}\n\n\t\tif ('inert' in node) {\n\t\t\tif (b) {\n\t\t\t\tif (original_inert_value !== undefined) {\n\t\t\t\t\t// aborted/reversed outro  restore previous inert value\n\t\t\t\t\tnode.inert = original_inert_value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\t\tnode.inert = true;\n\t\t\t}\n\t\t}\n\n\t\tif (running_program || pending_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\t\t\tif (b) tick(0, 1);\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\t\t\tloop((now) => {\n\t\t\t\tif (pending_program && now > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tt,\n\t\t\t\t\t\t\trunning_program.b,\n\t\t\t\t\t\t\trunning_program.duration,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\teasing,\n\t\t\t\t\t\t\tconfig.css\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now >= running_program.end) {\n\t\t\t\t\t\ttick((t = running_program.b), 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro  we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro  needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.r) run_all(running_program.group.c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t} else if (now >= running_program.start) {\n\t\t\t\t\t\tconst p = now - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\trun(b) {\n\t\t\tif (is_function(config)) {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconst opts = { direction: b ? 'in' : 'out' };\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconfig = config(opts);\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\n/** @typedef {1} INTRO */\n/** @typedef {0} OUTRO */\n/** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */\n/** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */\n\n/**\n * @typedef {Object} Outro\n * @property {number} r\n * @property {Function[]} c\n * @property {Object} p\n */\n\n/**\n * @typedef {Object} PendingProgram\n * @property {number} start\n * @property {INTRO|OUTRO} b\n * @property {Outro} [group]\n */\n\n/**\n * @typedef {Object} Program\n * @property {number} a\n * @property {INTRO|OUTRO} b\n * @property {1|-1} d\n * @property {number} duration\n * @property {number} start\n * @property {number} end\n * @property {Outro} [group]\n */\n","import { transition_in, transition_out } from './transitions.js';\nimport { run_all } from './utils.js';\n\n// general each functions:\n\nexport function ensure_array_like(array_like_or_iterator) {\n\treturn array_like_or_iterator?.length !== undefined\n\t\t? array_like_or_iterator\n\t\t: Array.from(array_like_or_iterator);\n}\n\n// keyed each functions:\n\n/** @returns {void} */\nexport function destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\n/** @returns {void} */\nexport function outro_and_destroy_block(block, lookup) {\n\ttransition_out(block, 1, 1, () => {\n\t\tlookup.delete(block.key);\n\t});\n}\n\n/** @returns {void} */\nexport function fix_and_destroy_block(block, lookup) {\n\tblock.f();\n\tdestroy_block(block, lookup);\n}\n\n/** @returns {void} */\nexport function fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\n/** @returns {any[]} */\nexport function update_keyed_each(\n\told_blocks,\n\tdirty,\n\tget_key,\n\tdynamic,\n\tctx,\n\tlist,\n\tlookup,\n\tnode,\n\tdestroy,\n\tcreate_each_block,\n\tnext,\n\tget_context\n) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\tconst updates = [];\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\t// defer updates until all the DOM shuffling is done\n\t\t\tupdates.push(() => block.p(child_ctx, dirty));\n\t\t}\n\t\tnew_lookup.set(key, (new_blocks[i] = block));\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\t/** @returns {void} */\n\tfunction insert(block) {\n\t\ttransition_in(block, 1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t} else if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t} else if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t} else if (did_move.has(old_key)) {\n\t\t\to--;\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\twhile (n) insert(new_blocks[n - 1]);\n\trun_all(updates);\n\treturn new_blocks;\n}\n\n/** @returns {void} */\nexport function validate_each_keys(ctx, list, get_context, get_key) {\n\tconst keys = new Map();\n\tfor (let i = 0; i < list.length; i++) {\n\t\tconst key = get_key(get_context(ctx, list, i));\n\t\tif (keys.has(key)) {\n\t\t\tlet value = '';\n\t\t\ttry {\n\t\t\t\tvalue = `with value '${String(key)}' `;\n\t\t\t} catch (e) {\n\t\t\t\t// can't stringify\n\t\t\t}\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot have duplicate keys in a keyed each: Keys at index ${keys.get(\n\t\t\t\t\tkey\n\t\t\t\t)} and ${i} ${value}are duplicates`\n\t\t\t);\n\t\t}\n\t\tkeys.set(key, i);\n\t}\n}\n","import {\n\tadd_render_callback,\n\tflush,\n\tflush_render_callbacks,\n\tschedule_update,\n\tdirty_components\n} from './scheduler.js';\nimport { current_component, set_current_component } from './lifecycle.js';\nimport { blank_object, is_empty, is_function, run, run_all, noop } from './utils.js';\nimport {\n\tchildren,\n\tdetach,\n\tstart_hydrating,\n\tend_hydrating,\n\tget_custom_elements_slots,\n\tinsert,\n\telement,\n\tattr\n} from './dom.js';\nimport { transition_in } from './transitions.js';\n\n/** @returns {void} */\nexport function bind(component, name, callback) {\n\tconst index = component.$$.props[name];\n\tif (index !== undefined) {\n\t\tcomponent.$$.bound[index] = callback;\n\t\tcallback(component.$$.ctx[index]);\n\t}\n}\n\n/** @returns {void} */\nexport function create_component(block) {\n\tblock && block.c();\n}\n\n/** @returns {void} */\nexport function claim_component(block, parent_nodes) {\n\tblock && block.l(parent_nodes);\n}\n\n/** @returns {void} */\nexport function mount_component(component, target, anchor) {\n\tconst { fragment, after_update } = component.$$;\n\tfragment && fragment.m(target, anchor);\n\t// onMount happens before the initial afterUpdate\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n\t\t// if the component was destroyed immediately\n\t\t// it will update the `$$.on_destroy` reference to `null`.\n\t\t// the destructured on_destroy may still reference to the old array\n\t\tif (component.$$.on_destroy) {\n\t\t\tcomponent.$$.on_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\tafter_update.forEach(add_render_callback);\n}\n\n/** @returns {void} */\nexport function destroy_component(component, detaching) {\n\tconst $$ = component.$$;\n\tif ($$.fragment !== null) {\n\t\tflush_render_callbacks($$.after_update);\n\t\trun_all($$.on_destroy);\n\t\t$$.fragment && $$.fragment.d(detaching);\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\t$$.on_destroy = $$.fragment = null;\n\t\t$$.ctx = [];\n\t}\n}\n\n/** @returns {void} */\nfunction make_dirty(component, i) {\n\tif (component.$$.dirty[0] === -1) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty.fill(0);\n\t}\n\tcomponent.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n}\n\n// TODO: Document the other params\n/**\n * @param {SvelteComponent} component\n * @param {import('./public.js').ComponentConstructorOptions} options\n *\n * @param {import('./utils.js')['not_equal']} not_equal Used to compare props and state values.\n * @param {(target: Element | ShadowRoot) => void} [append_styles] Function that appends styles to the DOM when the component is first initialised.\n * This will be the `add_css` function from the compiled component.\n *\n * @returns {void}\n */\nexport function init(\n\tcomponent,\n\toptions,\n\tinstance,\n\tcreate_fragment,\n\tnot_equal,\n\tprops,\n\tappend_styles = null,\n\tdirty = [-1]\n) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\t/** @type {import('./private.js').T$$} */\n\tconst $$ = (component.$$ = {\n\t\tfragment: null,\n\t\tctx: [],\n\t\t// state\n\t\tprops,\n\t\tupdate: noop,\n\t\tnot_equal,\n\t\tbound: blank_object(),\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\ton_disconnect: [],\n\t\tbefore_update: [],\n\t\tafter_update: [],\n\t\tcontext: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty,\n\t\tskip_bound: false,\n\t\troot: options.target || parent_component.$$.root\n\t});\n\tappend_styles && append_styles($$.root);\n\tlet ready = false;\n\t$$.ctx = instance\n\t\t? instance(component, options.props || {}, (i, ret, ...rest) => {\n\t\t\t\tconst value = rest.length ? rest[0] : ret;\n\t\t\t\tif ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n\t\t\t\t\tif (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n\t\t\t\t\tif (ready) make_dirty(component, i);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t  })\n\t\t: [];\n\t$$.update();\n\tready = true;\n\trun_all($$.before_update);\n\t// `false` as a special case of no DOM component\n\t$$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\tstart_hydrating();\n\t\t\t// TODO: what is the correct type here?\n\t\t\t// @ts-expect-error\n\t\t\tconst nodes = children(options.target);\n\t\t\t$$.fragment && $$.fragment.l(nodes);\n\t\t\tnodes.forEach(detach);\n\t\t} else {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t$$.fragment && $$.fragment.c();\n\t\t}\n\t\tif (options.intro) transition_in(component.$$.fragment);\n\t\tmount_component(component, options.target, options.anchor);\n\t\tend_hydrating();\n\t\tflush();\n\t}\n\tset_current_component(parent_component);\n}\n\nexport let SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n\tSvelteElement = class extends HTMLElement {\n\t\t/** The Svelte component constructor */\n\t\t$$ctor;\n\t\t/** Slots */\n\t\t$$s;\n\t\t/** The Svelte component instance */\n\t\t$$c;\n\t\t/** Whether or not the custom element is connected */\n\t\t$$cn = false;\n\t\t/** Component props data */\n\t\t$$d = {};\n\t\t/** `true` if currently in the process of reflecting component props back to attributes */\n\t\t$$r = false;\n\t\t/** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */\n\t\t$$p_d = {};\n\t\t/** @type {Record<string, Function[]>} Event listeners */\n\t\t$$l = {};\n\t\t/** @type {Map<Function, Function>} Event listener unsubscribe functions */\n\t\t$$l_u = new Map();\n\n\t\tconstructor($$componentCtor, $$slots, use_shadow_dom) {\n\t\t\tsuper();\n\t\t\tthis.$$ctor = $$componentCtor;\n\t\t\tthis.$$s = $$slots;\n\t\t\tif (use_shadow_dom) {\n\t\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\t}\n\t\t}\n\n\t\taddEventListener(type, listener, options) {\n\t\t\t// We can't determine upfront if the event is a custom event or not, so we have to\n\t\t\t// listen to both. If someone uses a custom event with the same name as a regular\n\t\t\t// browser event, this fires twice - we can't avoid that.\n\t\t\tthis.$$l[type] = this.$$l[type] || [];\n\t\t\tthis.$$l[type].push(listener);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t}\n\t\t\tsuper.addEventListener(type, listener, options);\n\t\t}\n\n\t\tremoveEventListener(type, listener, options) {\n\t\t\tsuper.removeEventListener(type, listener, options);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$l_u.get(listener);\n\t\t\t\tif (unsub) {\n\t\t\t\t\tunsub();\n\t\t\t\t\tthis.$$l_u.delete(listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync connectedCallback() {\n\t\t\tthis.$$cn = true;\n\t\t\tif (!this.$$c) {\n\t\t\t\t// We wait one tick to let possible child slot elements be created/mounted\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tif (!this.$$cn || this.$$c) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfunction create_slot(name) {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tlet node;\n\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t\tc: function create() {\n\t\t\t\t\t\t\t\tnode = element('slot');\n\t\t\t\t\t\t\t\tif (name !== 'default') {\n\t\t\t\t\t\t\t\t\tattr(node, 'name', name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @param {HTMLElement} target\n\t\t\t\t\t\t\t * @param {HTMLElement} [anchor]\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tm: function mount(target, anchor) {\n\t\t\t\t\t\t\t\tinsert(target, node, anchor);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\td: function destroy(detaching) {\n\t\t\t\t\t\t\t\tif (detaching) {\n\t\t\t\t\t\t\t\t\tdetach(node);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst $$slots = {};\n\t\t\t\tconst existing_slots = get_custom_elements_slots(this);\n\t\t\t\tfor (const name of this.$$s) {\n\t\t\t\t\tif (name in existing_slots) {\n\t\t\t\t\t\t$$slots[name] = [create_slot(name)];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\t// this.$$data takes precedence over this.attributes\n\t\t\t\t\tconst name = this.$$g_p(attribute.name);\n\t\t\t\t\tif (!(name in this.$$d)) {\n\t\t\t\t\t\tthis.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, 'toProp');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Port over props that were set programmatically before ce was initialized\n\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\tif (!(key in this.$$d) && this[key] !== undefined) {\n\t\t\t\t\t\tthis.$$d[key] = this[key]; // don't transform, these were set through JavaScript\n\t\t\t\t\t\tdelete this[key]; // remove the property that shadows the getter/setter\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$c = new this.$$ctor({\n\t\t\t\t\ttarget: this.shadowRoot || this,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...this.$$d,\n\t\t\t\t\t\t$$slots,\n\t\t\t\t\t\t$$scope: {\n\t\t\t\t\t\t\tctx: []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Reflect component props as attributes\n\t\t\t\tconst reflect_attributes = () => {\n\t\t\t\t\tthis.$$r = true;\n\t\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\t\tthis.$$d[key] = this.$$c.$$.ctx[this.$$c.$$.props[key]];\n\t\t\t\t\t\tif (this.$$p_d[key].reflect) {\n\t\t\t\t\t\t\tconst attribute_value = get_custom_element_value(\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tthis.$$d[key],\n\t\t\t\t\t\t\t\tthis.$$p_d,\n\t\t\t\t\t\t\t\t'toAttribute'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (attribute_value == null) {\n\t\t\t\t\t\t\t\tthis.removeAttribute(this.$$p_d[key].attribute || key);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setAttribute(this.$$p_d[key].attribute || key, attribute_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.$$r = false;\n\t\t\t\t};\n\t\t\t\tthis.$$c.$$.after_update.push(reflect_attributes);\n\t\t\t\treflect_attributes(); // once initially because after_update is added too late for first render\n\n\t\t\t\tfor (const type in this.$$l) {\n\t\t\t\t\tfor (const listener of this.$$l[type]) {\n\t\t\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$l = {};\n\t\t\t}\n\t\t}\n\n\t\t// We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte\n\t\t// and setting attributes through setAttribute etc, this is helpful\n\t\tattributeChangedCallback(attr, _oldValue, newValue) {\n\t\t\tif (this.$$r) return;\n\t\t\tattr = this.$$g_p(attr);\n\t\t\tthis.$$d[attr] = get_custom_element_value(attr, newValue, this.$$p_d, 'toProp');\n\t\t\tthis.$$c?.$set({ [attr]: this.$$d[attr] });\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.$$cn = false;\n\t\t\t// In a microtask, because this could be a move within the DOM\n\t\t\tPromise.resolve().then(() => {\n\t\t\t\tif (!this.$$cn) {\n\t\t\t\t\tthis.$$c.$destroy();\n\t\t\t\t\tthis.$$c = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$$g_p(attribute_name) {\n\t\t\treturn (\n\t\t\t\tObject.keys(this.$$p_d).find(\n\t\t\t\t\t(key) =>\n\t\t\t\t\t\tthis.$$p_d[key].attribute === attribute_name ||\n\t\t\t\t\t\t(!this.$$p_d[key].attribute && key.toLowerCase() === attribute_name)\n\t\t\t\t) || attribute_name\n\t\t\t);\n\t\t}\n\t};\n}\n\n/**\n * @param {string} prop\n * @param {any} value\n * @param {Record<string, CustomElementPropDefinition>} props_definition\n * @param {'toAttribute' | 'toProp'} [transform]\n */\nfunction get_custom_element_value(prop, value, props_definition, transform) {\n\tconst type = props_definition[prop]?.type;\n\tvalue = type === 'Boolean' && typeof value !== 'boolean' ? value != null : value;\n\tif (!transform || !props_definition[prop]) {\n\t\treturn value;\n\t} else if (transform === 'toAttribute') {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value == null ? null : JSON.stringify(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value ? '' : null;\n\t\t\tcase 'Number':\n\t\t\t\treturn value == null ? null : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t} else {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value && JSON.parse(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value; // conversion already handled above\n\t\t\tcase 'Number':\n\t\t\t\treturn value != null ? +value : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t}\n}\n\n/**\n * @internal\n *\n * Turn a Svelte component into a custom element.\n * @param {import('./public.js').ComponentType} Component  A Svelte component constructor\n * @param {Record<string, CustomElementPropDefinition>} props_definition  The props to observe\n * @param {string[]} slots  The slots to create\n * @param {string[]} accessors  Other accessors besides the ones for props the component has\n * @param {boolean} use_shadow_dom  Whether to use shadow DOM\n * @param {(ce: new () => HTMLElement) => new () => HTMLElement} [extend]\n */\nexport function create_custom_element(\n\tComponent,\n\tprops_definition,\n\tslots,\n\taccessors,\n\tuse_shadow_dom,\n\textend\n) {\n\tlet Class = class extends SvelteElement {\n\t\tconstructor() {\n\t\t\tsuper(Component, slots, use_shadow_dom);\n\t\t\tthis.$$p_d = props_definition;\n\t\t}\n\t\tstatic get observedAttributes() {\n\t\t\treturn Object.keys(props_definition).map((key) =>\n\t\t\t\t(props_definition[key].attribute || key).toLowerCase()\n\t\t\t);\n\t\t}\n\t};\n\tObject.keys(props_definition).forEach((prop) => {\n\t\tObject.defineProperty(Class.prototype, prop, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c && prop in this.$$c ? this.$$c[prop] : this.$$d[prop];\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tvalue = get_custom_element_value(prop, value, props_definition);\n\t\t\t\tthis.$$d[prop] = value;\n\t\t\t\tthis.$$c?.$set({ [prop]: value });\n\t\t\t}\n\t\t});\n\t});\n\taccessors.forEach((accessor) => {\n\t\tObject.defineProperty(Class.prototype, accessor, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c?.[accessor];\n\t\t\t}\n\t\t});\n\t});\n\tif (extend) {\n\t\t// @ts-expect-error - assigning here is fine\n\t\tClass = extend(Class);\n\t}\n\tComponent.element = /** @type {any} */ (Class);\n\treturn Class;\n}\n\n/**\n * Base class for Svelte components. Used when dev=false.\n *\n * @template {Record<string, any>} [Props=any]\n * @template {Record<string, any>} [Events=any]\n */\nexport class SvelteComponent {\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$ = undefined;\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$set = undefined;\n\n\t/** @returns {void} */\n\t$destroy() {\n\t\tdestroy_component(this, 1);\n\t\tthis.$destroy = noop;\n\t}\n\n\t/**\n\t * @template {Extract<keyof Events, string>} K\n\t * @param {K} type\n\t * @param {((e: Events[K]) => void) | null | undefined} callback\n\t * @returns {() => void}\n\t */\n\t$on(type, callback) {\n\t\tif (!is_function(callback)) {\n\t\t\treturn noop;\n\t\t}\n\t\tconst callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n\t\tcallbacks.push(callback);\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t/**\n\t * @param {Partial<Props>} props\n\t * @returns {void}\n\t */\n\t$set(props) {\n\t\tif (this.$$set && !is_empty(props)) {\n\t\t\tthis.$$.skip_bound = true;\n\t\t\tthis.$$set(props);\n\t\t\tthis.$$.skip_bound = false;\n\t\t}\n\t}\n}\n\n/**\n * @typedef {Object} CustomElementPropDefinition\n * @property {string} [attribute]\n * @property {boolean} [reflect]\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\n */\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n *\n * https://svelte.dev/docs/svelte-compiler#svelte-version\n * @type {string}\n */\nexport const VERSION = '4.2.15';\nexport const PUBLIC_VERSION = '4';\n","import { PUBLIC_VERSION } from '../../../shared/version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);\n","\"use strict\";\nvar ExtensionType = /* @__PURE__ */ ((ExtensionType2) => {\n  ExtensionType2[\"Application\"] = \"application\";\n  ExtensionType2[\"WebGLPipes\"] = \"webgl-pipes\";\n  ExtensionType2[\"WebGLPipesAdaptor\"] = \"webgl-pipes-adaptor\";\n  ExtensionType2[\"WebGLSystem\"] = \"webgl-system\";\n  ExtensionType2[\"WebGPUPipes\"] = \"webgpu-pipes\";\n  ExtensionType2[\"WebGPUPipesAdaptor\"] = \"webgpu-pipes-adaptor\";\n  ExtensionType2[\"WebGPUSystem\"] = \"webgpu-system\";\n  ExtensionType2[\"CanvasSystem\"] = \"canvas-system\";\n  ExtensionType2[\"CanvasPipesAdaptor\"] = \"canvas-pipes-adaptor\";\n  ExtensionType2[\"CanvasPipes\"] = \"canvas-pipes\";\n  ExtensionType2[\"Asset\"] = \"asset\";\n  ExtensionType2[\"LoadParser\"] = \"load-parser\";\n  ExtensionType2[\"ResolveParser\"] = \"resolve-parser\";\n  ExtensionType2[\"CacheParser\"] = \"cache-parser\";\n  ExtensionType2[\"DetectionParser\"] = \"detection-parser\";\n  ExtensionType2[\"MaskEffect\"] = \"mask-effect\";\n  ExtensionType2[\"BlendMode\"] = \"blend-mode\";\n  ExtensionType2[\"TextureSource\"] = \"texture-source\";\n  ExtensionType2[\"Environment\"] = \"environment\";\n  return ExtensionType2;\n})(ExtensionType || {});\nconst normalizeExtension = (ext) => {\n  if (typeof ext === \"function\" || typeof ext === \"object\" && ext.extension) {\n    if (!ext.extension) {\n      throw new Error(\"Extension class must have an extension object\");\n    }\n    const metadata = typeof ext.extension !== \"object\" ? { type: ext.extension } : ext.extension;\n    ext = { ...metadata, ref: ext };\n  }\n  if (typeof ext === \"object\") {\n    ext = { ...ext };\n  } else {\n    throw new Error(\"Invalid extension type\");\n  }\n  if (typeof ext.type === \"string\") {\n    ext.type = [ext.type];\n  }\n  return ext;\n};\nconst normalizeExtensionPriority = (ext, defaultPriority) => normalizeExtension(ext).priority ?? defaultPriority;\nconst extensions = {\n  /** @ignore */\n  _addHandlers: {},\n  /** @ignore */\n  _removeHandlers: {},\n  /** @ignore */\n  _queue: {},\n  /**\n   * Remove extensions from PixiJS.\n   * @param extensions - Extensions to be removed.\n   * @returns {extensions} For chaining.\n   */\n  remove(...extensions2) {\n    extensions2.map(normalizeExtension).forEach((ext) => {\n      ext.type.forEach((type) => this._removeHandlers[type]?.(ext));\n    });\n    return this;\n  },\n  /**\n   * Register new extensions with PixiJS.\n   * @param extensions - The spread of extensions to add to PixiJS.\n   * @returns {extensions} For chaining.\n   */\n  add(...extensions2) {\n    extensions2.map(normalizeExtension).forEach((ext) => {\n      ext.type.forEach((type) => {\n        const handlers = this._addHandlers;\n        const queue = this._queue;\n        if (!handlers[type]) {\n          queue[type] = queue[type] || [];\n          queue[type]?.push(ext);\n        } else {\n          handlers[type]?.(ext);\n        }\n      });\n    });\n    return this;\n  },\n  /**\n   * Internal method to handle extensions by name.\n   * @param type - The extension type.\n   * @param onAdd  - Function handler when extensions are added/registered {@link StrictExtensionFormat}.\n   * @param onRemove  - Function handler when extensions are removed/unregistered {@link StrictExtensionFormat}.\n   * @returns {extensions} For chaining.\n   */\n  handle(type, onAdd, onRemove) {\n    const addHandlers = this._addHandlers;\n    const removeHandlers = this._removeHandlers;\n    if (addHandlers[type] || removeHandlers[type]) {\n      throw new Error(`Extension type ${type} already has a handler`);\n    }\n    addHandlers[type] = onAdd;\n    removeHandlers[type] = onRemove;\n    const queue = this._queue;\n    if (queue[type]) {\n      queue[type]?.forEach((ext) => onAdd(ext));\n      delete queue[type];\n    }\n    return this;\n  },\n  /**\n   * Handle a type, but using a map by `name` property.\n   * @param type - Type of extension to handle.\n   * @param map - The object map of named extensions.\n   * @returns {extensions} For chaining.\n   */\n  handleByMap(type, map) {\n    return this.handle(\n      type,\n      (extension) => {\n        if (extension.name) {\n          map[extension.name] = extension.ref;\n        }\n      },\n      (extension) => {\n        if (extension.name) {\n          delete map[extension.name];\n        }\n      }\n    );\n  },\n  /**\n   * Handle a type, but using a list of extensions with a `name` property.\n   * @param type - Type of extension to handle.\n   * @param map - The array of named extensions.\n   * @param defaultPriority - Fallback priority if none is defined.\n   * @returns {extensions} For chaining.\n   */\n  handleByNamedList(type, map, defaultPriority = -1) {\n    return this.handle(\n      type,\n      (extension) => {\n        const index = map.findIndex((item) => item.name === extension.name);\n        if (index >= 0)\n          return;\n        map.push({ name: extension.name, value: extension.ref });\n        map.sort((a, b) => normalizeExtensionPriority(b.value, defaultPriority) - normalizeExtensionPriority(a.value, defaultPriority));\n      },\n      (extension) => {\n        const index = map.findIndex((item) => item.name === extension.name);\n        if (index !== -1) {\n          map.splice(index, 1);\n        }\n      }\n    );\n  },\n  /**\n   * Handle a type, but using a list of extensions.\n   * @param type - Type of extension to handle.\n   * @param list - The list of extensions.\n   * @param defaultPriority - The default priority to use if none is specified.\n   * @returns {extensions} For chaining.\n   */\n  handleByList(type, list, defaultPriority = -1) {\n    return this.handle(\n      type,\n      (extension) => {\n        if (list.includes(extension.ref)) {\n          return;\n        }\n        list.push(extension.ref);\n        list.sort((a, b) => normalizeExtensionPriority(b, defaultPriority) - normalizeExtensionPriority(a, defaultPriority));\n      },\n      (extension) => {\n        const index = list.indexOf(extension.ref);\n        if (index !== -1) {\n          list.splice(index, 1);\n        }\n      }\n    );\n  }\n};\n\nexport { ExtensionType, extensions, normalizeExtensionPriority };\n//# sourceMappingURL=Extensions.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst browserExt = {\n  extension: {\n    type: ExtensionType.Environment,\n    name: \"browser\",\n    priority: -1\n  },\n  test: () => true,\n  load: async () => {\n    await import('./browserAll.mjs');\n  }\n};\n\nexport { browserExt };\n//# sourceMappingURL=browserExt.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst webworkerExt = {\n  extension: {\n    type: ExtensionType.Environment,\n    name: \"webworker\",\n    priority: 0\n  },\n  test: () => typeof self !== \"undefined\" && self.WorkerGlobalScope !== void 0,\n  load: async () => {\n    await import('./webworkerAll.mjs');\n  }\n};\n\nexport { webworkerExt };\n//# sourceMappingURL=webworkerExt.mjs.map\n","\"use strict\";\nclass ObservablePoint {\n  /**\n   * Creates a new `ObservablePoint`\n   * @param observer - Observer to pass to listen for change events.\n   * @param {number} [x=0] - position of the point on the x axis\n   * @param {number} [y=0] - position of the point on the y axis\n   */\n  constructor(observer, x, y) {\n    this._x = x || 0;\n    this._y = y || 0;\n    this._observer = observer;\n  }\n  /**\n   * Creates a clone of this point.\n   * @param observer - Optional observer to pass to the new observable point.\n   * @returns a copy of this observable point\n   */\n  clone(observer) {\n    return new ObservablePoint(observer ?? this._observer, this._x, this._y);\n  }\n  /**\n   * Sets the point to a new `x` and `y` position.\n   * If `y` is omitted, both `x` and `y` will be set to `x`.\n   * @param {number} [x=0] - position of the point on the x axis\n   * @param {number} [y=x] - position of the point on the y axis\n   * @returns The observable point instance itself\n   */\n  set(x = 0, y = x) {\n    if (this._x !== x || this._y !== y) {\n      this._x = x;\n      this._y = y;\n      this._observer._onUpdate(this);\n    }\n    return this;\n  }\n  /**\n   * Copies x and y from the given point (`p`)\n   * @param p - The point to copy from. Can be any of type that is or extends `PointData`\n   * @returns The observable point instance itself\n   */\n  copyFrom(p) {\n    if (this._x !== p.x || this._y !== p.y) {\n      this._x = p.x;\n      this._y = p.y;\n      this._observer._onUpdate(this);\n    }\n    return this;\n  }\n  /**\n   * Copies this point's x and y into that of the given point (`p`)\n   * @param p - The point to copy to. Can be any of type that is or extends `PointData`\n   * @returns The point (`p`) with values updated\n   */\n  copyTo(p) {\n    p.set(this._x, this._y);\n    return p;\n  }\n  /**\n   * Accepts another point (`p`) and returns `true` if the given point is equal to this point\n   * @param p - The point to check\n   * @returns Returns `true` if both `x` and `y` are equal\n   */\n  equals(p) {\n    return p.x === this._x && p.y === this._y;\n  }\n  toString() {\n    return `[pixi.js/math:ObservablePoint x=${0} y=${0} scope=${this._observer}]`;\n  }\n  /** Position of the observable point on the x axis. */\n  get x() {\n    return this._x;\n  }\n  set x(value) {\n    if (this._x !== value) {\n      this._x = value;\n      this._observer._onUpdate(this);\n    }\n  }\n  /** Position of the observable point on the y axis. */\n  get y() {\n    return this._y;\n  }\n  set y(value) {\n    if (this._y !== value) {\n      this._y = value;\n      this._observer._onUpdate(this);\n    }\n  }\n}\n\nexport { ObservablePoint };\n//# sourceMappingURL=ObservablePoint.mjs.map\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","\"use strict\";\nconst PI_2 = Math.PI * 2;\nconst RAD_TO_DEG = 180 / Math.PI;\nconst DEG_TO_RAD = Math.PI / 180;\n\nexport { DEG_TO_RAD, PI_2, RAD_TO_DEG };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nclass Point {\n  /**\n   * Creates a new `Point`\n   * @param {number} [x=0] - position of the point on the x axis\n   * @param {number} [y=0] - position of the point on the y axis\n   */\n  constructor(x = 0, y = 0) {\n    /** Position of the point on the x axis */\n    this.x = 0;\n    /** Position of the point on the y axis */\n    this.y = 0;\n    this.x = x;\n    this.y = y;\n  }\n  /**\n   * Creates a clone of this point\n   * @returns A clone of this point\n   */\n  clone() {\n    return new Point(this.x, this.y);\n  }\n  /**\n   * Copies `x` and `y` from the given point into this point\n   * @param p - The point to copy from\n   * @returns The point instance itself\n   */\n  copyFrom(p) {\n    this.set(p.x, p.y);\n    return this;\n  }\n  /**\n   * Copies this point's x and y into the given point (`p`).\n   * @param p - The point to copy to. Can be any of type that is or extends `PointData`\n   * @returns The point (`p`) with values updated\n   */\n  copyTo(p) {\n    p.set(this.x, this.y);\n    return p;\n  }\n  /**\n   * Accepts another point (`p`) and returns `true` if the given point is equal to this point\n   * @param p - The point to check\n   * @returns Returns `true` if both `x` and `y` are equal\n   */\n  equals(p) {\n    return p.x === this.x && p.y === this.y;\n  }\n  /**\n   * Sets the point to a new `x` and `y` position.\n   * If `y` is omitted, both `x` and `y` will be set to `x`.\n   * @param {number} [x=0] - position of the point on the `x` axis\n   * @param {number} [y=x] - position of the point on the `y` axis\n   * @returns The point instance itself\n   */\n  set(x = 0, y = x) {\n    this.x = x;\n    this.y = y;\n    return this;\n  }\n  toString() {\n    return `[pixi.js/math:Point x=${this.x} y=${this.y}]`;\n  }\n  /**\n   * A static Point object with `x` and `y` values of `0`. Can be used to avoid creating new objects multiple times.\n   * @readonly\n   */\n  static get shared() {\n    tempPoint.x = 0;\n    tempPoint.y = 0;\n    return tempPoint;\n  }\n}\nconst tempPoint = new Point();\n\nexport { Point };\n//# sourceMappingURL=Point.mjs.map\n","import { PI_2 } from '../misc/const.mjs';\nimport { Point } from '../point/Point.mjs';\n\n\"use strict\";\nclass Matrix {\n  /**\n   * @param a - x scale\n   * @param b - y skew\n   * @param c - x skew\n   * @param d - y scale\n   * @param tx - x translation\n   * @param ty - y translation\n   */\n  constructor(a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0) {\n    /** An array of the current matrix. Only populated when `toArray` is called */\n    this.array = null;\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n    this.tx = tx;\n    this.ty = ty;\n  }\n  /**\n   * Creates a Matrix object based on the given array. The Element to Matrix mapping order is as follows:\n   *\n   * a = array[0]\n   * b = array[1]\n   * c = array[3]\n   * d = array[4]\n   * tx = array[2]\n   * ty = array[5]\n   * @param array - The array that the matrix will be populated from.\n   */\n  fromArray(array) {\n    this.a = array[0];\n    this.b = array[1];\n    this.c = array[3];\n    this.d = array[4];\n    this.tx = array[2];\n    this.ty = array[5];\n  }\n  /**\n   * Sets the matrix properties.\n   * @param a - Matrix component\n   * @param b - Matrix component\n   * @param c - Matrix component\n   * @param d - Matrix component\n   * @param tx - Matrix component\n   * @param ty - Matrix component\n   * @returns This matrix. Good for chaining method calls.\n   */\n  set(a, b, c, d, tx, ty) {\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n    this.tx = tx;\n    this.ty = ty;\n    return this;\n  }\n  /**\n   * Creates an array from the current Matrix object.\n   * @param transpose - Whether we need to transpose the matrix or not\n   * @param [out=new Float32Array(9)] - If provided the array will be assigned to out\n   * @returns The newly created array which contains the matrix\n   */\n  toArray(transpose, out) {\n    if (!this.array) {\n      this.array = new Float32Array(9);\n    }\n    const array = out || this.array;\n    if (transpose) {\n      array[0] = this.a;\n      array[1] = this.b;\n      array[2] = 0;\n      array[3] = this.c;\n      array[4] = this.d;\n      array[5] = 0;\n      array[6] = this.tx;\n      array[7] = this.ty;\n      array[8] = 1;\n    } else {\n      array[0] = this.a;\n      array[1] = this.c;\n      array[2] = this.tx;\n      array[3] = this.b;\n      array[4] = this.d;\n      array[5] = this.ty;\n      array[6] = 0;\n      array[7] = 0;\n      array[8] = 1;\n    }\n    return array;\n  }\n  /**\n   * Get a new position with the current transformation applied.\n   * Can be used to go from a child's coordinate space to the world coordinate space. (e.g. rendering)\n   * @param pos - The origin\n   * @param {Point} [newPos] - The point that the new position is assigned to (allowed to be same as input)\n   * @returns {Point} The new point, transformed through this matrix\n   */\n  apply(pos, newPos) {\n    newPos = newPos || new Point();\n    const x = pos.x;\n    const y = pos.y;\n    newPos.x = this.a * x + this.c * y + this.tx;\n    newPos.y = this.b * x + this.d * y + this.ty;\n    return newPos;\n  }\n  /**\n   * Get a new position with the inverse of the current transformation applied.\n   * Can be used to go from the world coordinate space to a child's coordinate space. (e.g. input)\n   * @param pos - The origin\n   * @param {Point} [newPos] - The point that the new position is assigned to (allowed to be same as input)\n   * @returns {Point} The new point, inverse-transformed through this matrix\n   */\n  applyInverse(pos, newPos) {\n    newPos = newPos || new Point();\n    const a = this.a;\n    const b = this.b;\n    const c = this.c;\n    const d = this.d;\n    const tx = this.tx;\n    const ty = this.ty;\n    const id = 1 / (a * d + c * -b);\n    const x = pos.x;\n    const y = pos.y;\n    newPos.x = d * id * x + -c * id * y + (ty * c - tx * d) * id;\n    newPos.y = a * id * y + -b * id * x + (-ty * a + tx * b) * id;\n    return newPos;\n  }\n  /**\n   * Translates the matrix on the x and y.\n   * @param x - How much to translate x by\n   * @param y - How much to translate y by\n   * @returns This matrix. Good for chaining method calls.\n   */\n  translate(x, y) {\n    this.tx += x;\n    this.ty += y;\n    return this;\n  }\n  /**\n   * Applies a scale transformation to the matrix.\n   * @param x - The amount to scale horizontally\n   * @param y - The amount to scale vertically\n   * @returns This matrix. Good for chaining method calls.\n   */\n  scale(x, y) {\n    this.a *= x;\n    this.d *= y;\n    this.c *= x;\n    this.b *= y;\n    this.tx *= x;\n    this.ty *= y;\n    return this;\n  }\n  /**\n   * Applies a rotation transformation to the matrix.\n   * @param angle - The angle in radians.\n   * @returns This matrix. Good for chaining method calls.\n   */\n  rotate(angle) {\n    const cos = Math.cos(angle);\n    const sin = Math.sin(angle);\n    const a1 = this.a;\n    const c1 = this.c;\n    const tx1 = this.tx;\n    this.a = a1 * cos - this.b * sin;\n    this.b = a1 * sin + this.b * cos;\n    this.c = c1 * cos - this.d * sin;\n    this.d = c1 * sin + this.d * cos;\n    this.tx = tx1 * cos - this.ty * sin;\n    this.ty = tx1 * sin + this.ty * cos;\n    return this;\n  }\n  /**\n   * Appends the given Matrix to this Matrix.\n   * @param matrix - The matrix to append.\n   * @returns This matrix. Good for chaining method calls.\n   */\n  append(matrix) {\n    const a1 = this.a;\n    const b1 = this.b;\n    const c1 = this.c;\n    const d1 = this.d;\n    this.a = matrix.a * a1 + matrix.b * c1;\n    this.b = matrix.a * b1 + matrix.b * d1;\n    this.c = matrix.c * a1 + matrix.d * c1;\n    this.d = matrix.c * b1 + matrix.d * d1;\n    this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;\n    this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;\n    return this;\n  }\n  /**\n   * Appends two matrix's and sets the result to this matrix. AB = A * B\n   * @param a - The matrix to append.\n   * @param b - The matrix to append.\n   * @returns This matrix. Good for chaining method calls.\n   */\n  appendFrom(a, b) {\n    const a1 = a.a;\n    const b1 = a.b;\n    const c1 = a.c;\n    const d1 = a.d;\n    const tx = a.tx;\n    const ty = a.ty;\n    const a2 = b.a;\n    const b2 = b.b;\n    const c2 = b.c;\n    const d2 = b.d;\n    this.a = a1 * a2 + b1 * c2;\n    this.b = a1 * b2 + b1 * d2;\n    this.c = c1 * a2 + d1 * c2;\n    this.d = c1 * b2 + d1 * d2;\n    this.tx = tx * a2 + ty * c2 + b.tx;\n    this.ty = tx * b2 + ty * d2 + b.ty;\n    return this;\n  }\n  /**\n   * Sets the matrix based on all the available properties\n   * @param x - Position on the x axis\n   * @param y - Position on the y axis\n   * @param pivotX - Pivot on the x axis\n   * @param pivotY - Pivot on the y axis\n   * @param scaleX - Scale on the x axis\n   * @param scaleY - Scale on the y axis\n   * @param rotation - Rotation in radians\n   * @param skewX - Skew on the x axis\n   * @param skewY - Skew on the y axis\n   * @returns This matrix. Good for chaining method calls.\n   */\n  setTransform(x, y, pivotX, pivotY, scaleX, scaleY, rotation, skewX, skewY) {\n    this.a = Math.cos(rotation + skewY) * scaleX;\n    this.b = Math.sin(rotation + skewY) * scaleX;\n    this.c = -Math.sin(rotation - skewX) * scaleY;\n    this.d = Math.cos(rotation - skewX) * scaleY;\n    this.tx = x - (pivotX * this.a + pivotY * this.c);\n    this.ty = y - (pivotX * this.b + pivotY * this.d);\n    return this;\n  }\n  /**\n   * Prepends the given Matrix to this Matrix.\n   * @param matrix - The matrix to prepend\n   * @returns This matrix. Good for chaining method calls.\n   */\n  prepend(matrix) {\n    const tx1 = this.tx;\n    if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\n      const a1 = this.a;\n      const c1 = this.c;\n      this.a = a1 * matrix.a + this.b * matrix.c;\n      this.b = a1 * matrix.b + this.b * matrix.d;\n      this.c = c1 * matrix.a + this.d * matrix.c;\n      this.d = c1 * matrix.b + this.d * matrix.d;\n    }\n    this.tx = tx1 * matrix.a + this.ty * matrix.c + matrix.tx;\n    this.ty = tx1 * matrix.b + this.ty * matrix.d + matrix.ty;\n    return this;\n  }\n  /**\n   * Decomposes the matrix (x, y, scaleX, scaleY, and rotation) and sets the properties on to a transform.\n   * @param transform - The transform to apply the properties to.\n   * @returns The transform with the newly applied properties\n   */\n  decompose(transform) {\n    const a = this.a;\n    const b = this.b;\n    const c = this.c;\n    const d = this.d;\n    const pivot = transform.pivot;\n    const skewX = -Math.atan2(-c, d);\n    const skewY = Math.atan2(b, a);\n    const delta = Math.abs(skewX + skewY);\n    if (delta < 1e-5 || Math.abs(PI_2 - delta) < 1e-5) {\n      transform.rotation = skewY;\n      transform.skew.x = transform.skew.y = 0;\n    } else {\n      transform.rotation = 0;\n      transform.skew.x = skewX;\n      transform.skew.y = skewY;\n    }\n    transform.scale.x = Math.sqrt(a * a + b * b);\n    transform.scale.y = Math.sqrt(c * c + d * d);\n    transform.position.x = this.tx + (pivot.x * a + pivot.y * c);\n    transform.position.y = this.ty + (pivot.x * b + pivot.y * d);\n    return transform;\n  }\n  /**\n   * Inverts this matrix\n   * @returns This matrix. Good for chaining method calls.\n   */\n  invert() {\n    const a1 = this.a;\n    const b1 = this.b;\n    const c1 = this.c;\n    const d1 = this.d;\n    const tx1 = this.tx;\n    const n = a1 * d1 - b1 * c1;\n    this.a = d1 / n;\n    this.b = -b1 / n;\n    this.c = -c1 / n;\n    this.d = a1 / n;\n    this.tx = (c1 * this.ty - d1 * tx1) / n;\n    this.ty = -(a1 * this.ty - b1 * tx1) / n;\n    return this;\n  }\n  /** Checks if this matrix is an identity matrix */\n  isIdentity() {\n    return this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1 && this.tx === 0 && this.ty === 0;\n  }\n  /**\n   * Resets this Matrix to an identity (default) matrix.\n   * @returns This matrix. Good for chaining method calls.\n   */\n  identity() {\n    this.a = 1;\n    this.b = 0;\n    this.c = 0;\n    this.d = 1;\n    this.tx = 0;\n    this.ty = 0;\n    return this;\n  }\n  /**\n   * Creates a new Matrix object with the same values as this one.\n   * @returns A copy of this matrix. Good for chaining method calls.\n   */\n  clone() {\n    const matrix = new Matrix();\n    matrix.a = this.a;\n    matrix.b = this.b;\n    matrix.c = this.c;\n    matrix.d = this.d;\n    matrix.tx = this.tx;\n    matrix.ty = this.ty;\n    return matrix;\n  }\n  /**\n   * Changes the values of the given matrix to be the same as the ones in this matrix\n   * @param matrix - The matrix to copy to.\n   * @returns The matrix given in parameter with its values updated.\n   */\n  copyTo(matrix) {\n    matrix.a = this.a;\n    matrix.b = this.b;\n    matrix.c = this.c;\n    matrix.d = this.d;\n    matrix.tx = this.tx;\n    matrix.ty = this.ty;\n    return matrix;\n  }\n  /**\n   * Changes the values of the matrix to be the same as the ones in given matrix\n   * @param matrix - The matrix to copy from.\n   * @returns this\n   */\n  copyFrom(matrix) {\n    this.a = matrix.a;\n    this.b = matrix.b;\n    this.c = matrix.c;\n    this.d = matrix.d;\n    this.tx = matrix.tx;\n    this.ty = matrix.ty;\n    return this;\n  }\n  /**\n   * check to see if two matrices are the same\n   * @param matrix - The matrix to compare to.\n   */\n  equals(matrix) {\n    return matrix.a === this.a && matrix.b === this.b && matrix.c === this.c && matrix.d === this.d && matrix.tx === this.tx && matrix.ty === this.ty;\n  }\n  toString() {\n    return `[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`;\n  }\n  /**\n   * A default (identity) matrix.\n   *\n   * This is a shared object, if you want to modify it consider creating a new `Matrix`\n   * @readonly\n   */\n  static get IDENTITY() {\n    return identityMatrix.identity();\n  }\n  /**\n   * A static Matrix that can be used to avoid creating new objects.\n   * Will always ensure the matrix is reset to identity when requested.\n   * Use this object for fast but temporary calculations, as it may be mutated later on.\n   * This is a different object to the `IDENTITY` object and so can be modified without changing `IDENTITY`.\n   * @readonly\n   */\n  static get shared() {\n    return tempMatrix.identity();\n  }\n}\nconst tempMatrix = new Matrix();\nconst identityMatrix = new Matrix();\n\nexport { Matrix };\n//# sourceMappingURL=Matrix.mjs.map\n","import { Matrix } from './Matrix.mjs';\n\n\"use strict\";\nconst ux = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1];\nconst uy = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1];\nconst vx = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1];\nconst vy = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1];\nconst rotationCayley = [];\nconst rotationMatrices = [];\nconst signum = Math.sign;\nfunction init() {\n  for (let i = 0; i < 16; i++) {\n    const row = [];\n    rotationCayley.push(row);\n    for (let j = 0; j < 16; j++) {\n      const _ux = signum(ux[i] * ux[j] + vx[i] * uy[j]);\n      const _uy = signum(uy[i] * ux[j] + vy[i] * uy[j]);\n      const _vx = signum(ux[i] * vx[j] + vx[i] * vy[j]);\n      const _vy = signum(uy[i] * vx[j] + vy[i] * vy[j]);\n      for (let k = 0; k < 16; k++) {\n        if (ux[k] === _ux && uy[k] === _uy && vx[k] === _vx && vy[k] === _vy) {\n          row.push(k);\n          break;\n        }\n      }\n    }\n  }\n  for (let i = 0; i < 16; i++) {\n    const mat = new Matrix();\n    mat.set(ux[i], uy[i], vx[i], vy[i], 0, 0);\n    rotationMatrices.push(mat);\n  }\n}\ninit();\nconst groupD8 = {\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 0       | East      |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  E: 0,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 45     | Southeast |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  SE: 1,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 90     | South     |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  S: 2,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 135    | Southwest |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  SW: 3,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 180     | West      |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  W: 4,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -135/225 | Northwest    |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  NW: 5,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -90/270  | North        |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  N: 6,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -45/315  | Northeast    |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  NE: 7,\n  /**\n   * Reflection about Y-axis.\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  MIRROR_VERTICAL: 8,\n  /**\n   * Reflection about the main diagonal.\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  MAIN_DIAGONAL: 10,\n  /**\n   * Reflection about X-axis.\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  MIRROR_HORIZONTAL: 12,\n  /**\n   * Reflection about reverse diagonal.\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  REVERSE_DIAGONAL: 14,\n  /**\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The X-component of the U-axis\n   *    after rotating the axes.\n   */\n  uX: (ind) => ux[ind],\n  /**\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The Y-component of the U-axis\n   *    after rotating the axes.\n   */\n  uY: (ind) => uy[ind],\n  /**\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The X-component of the V-axis\n   *    after rotating the axes.\n   */\n  vX: (ind) => vx[ind],\n  /**\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The Y-component of the V-axis\n   *    after rotating the axes.\n   */\n  vY: (ind) => vy[ind],\n  /**\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} rotation - symmetry whose opposite\n   *   is needed. Only rotations have opposite symmetries while\n   *   reflections don't.\n   * @returns {GD8Symmetry} The opposite symmetry of `rotation`\n   */\n  inv: (rotation) => {\n    if (rotation & 8) {\n      return rotation & 15;\n    }\n    return -rotation & 7;\n  },\n  /**\n   * Composes the two D8 operations.\n   *\n   * Taking `^` as reflection:\n   *\n   * |       | E=0 | S=2 | W=4 | N=6 | E^=8 | S^=10 | W^=12 | N^=14 |\n   * |-------|-----|-----|-----|-----|------|-------|-------|-------|\n   * | E=0   | E   | S   | W   | N   | E^   | S^    | W^    | N^    |\n   * | S=2   | S   | W   | N   | E   | S^   | W^    | N^    | E^    |\n   * | W=4   | W   | N   | E   | S   | W^   | N^    | E^    | S^    |\n   * | N=6   | N   | E   | S   | W   | N^   | E^    | S^    | W^    |\n   * | E^=8  | E^  | N^  | W^  | S^  | E    | N     | W     | S     |\n   * | S^=10 | S^  | E^  | N^  | W^  | S    | E     | N     | W     |\n   * | W^=12 | W^  | S^  | E^  | N^  | W    | S     | E     | N     |\n   * | N^=14 | N^  | W^  | S^  | E^  | N    | W     | S     | E     |\n   *\n   * [This is a Cayley table]{@link https://en.wikipedia.org/wiki/Cayley_table}\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} rotationSecond - Second operation, which\n   *   is the row in the above cayley table.\n   * @param {GD8Symmetry} rotationFirst - First operation, which\n   *   is the column in the above cayley table.\n   * @returns {GD8Symmetry} Composed operation\n   */\n  add: (rotationSecond, rotationFirst) => rotationCayley[rotationSecond][rotationFirst],\n  /**\n   * Reverse of `add`.\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} rotationSecond - Second operation\n   * @param {GD8Symmetry} rotationFirst - First operation\n   * @returns {GD8Symmetry} Result\n   */\n  sub: (rotationSecond, rotationFirst) => rotationCayley[rotationSecond][groupD8.inv(rotationFirst)],\n  /**\n   * Adds 180 degrees to rotation, which is a commutative\n   * operation.\n   * @memberof maths.groupD8\n   * @param {number} rotation - The number to rotate.\n   * @returns {number} Rotated number\n   */\n  rotate180: (rotation) => rotation ^ 4,\n  /**\n   * Checks if the rotation angle is vertical, i.e. south\n   * or north. It doesn't work for reflections.\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} rotation - The number to check.\n   * @returns {boolean} Whether or not the direction is vertical\n   */\n  isVertical: (rotation) => (rotation & 3) === 2,\n  // rotation % 4 === 2\n  /**\n   * Approximates the vector `V(dx,dy)` into one of the\n   * eight directions provided by `groupD8`.\n   * @memberof maths.groupD8\n   * @param {number} dx - X-component of the vector\n   * @param {number} dy - Y-component of the vector\n   * @returns {GD8Symmetry} Approximation of the vector into\n   *  one of the eight symmetries.\n   */\n  byDirection: (dx, dy) => {\n    if (Math.abs(dx) * 2 <= Math.abs(dy)) {\n      if (dy >= 0) {\n        return groupD8.S;\n      }\n      return groupD8.N;\n    } else if (Math.abs(dy) * 2 <= Math.abs(dx)) {\n      if (dx > 0) {\n        return groupD8.E;\n      }\n      return groupD8.W;\n    } else if (dy > 0) {\n      if (dx > 0) {\n        return groupD8.SE;\n      }\n      return groupD8.SW;\n    } else if (dx > 0) {\n      return groupD8.NE;\n    }\n    return groupD8.NW;\n  },\n  /**\n   * Helps sprite to compensate texture packer rotation.\n   * @memberof maths.groupD8\n   * @param {Matrix} matrix - sprite world matrix\n   * @param {GD8Symmetry} rotation - The rotation factor to use.\n   * @param {number} tx - sprite anchoring\n   * @param {number} ty - sprite anchoring\n   */\n  matrixAppendRotationInv: (matrix, rotation, tx = 0, ty = 0) => {\n    const mat = rotationMatrices[groupD8.inv(rotation)];\n    mat.tx = tx;\n    mat.ty = ty;\n    matrix.append(mat);\n  }\n};\n\nexport { groupD8 };\n//# sourceMappingURL=groupD8.mjs.map\n","import { Point } from '../point/Point.mjs';\n\n\"use strict\";\nconst tempPoints = [new Point(), new Point(), new Point(), new Point()];\nclass Rectangle {\n  /**\n   * @param x - The X coordinate of the upper-left corner of the rectangle\n   * @param y - The Y coordinate of the upper-left corner of the rectangle\n   * @param width - The overall width of the rectangle\n   * @param height - The overall height of the rectangle\n   */\n  constructor(x = 0, y = 0, width = 0, height = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'rectangle'\n     */\n    this.type = \"rectangle\";\n    this.x = Number(x);\n    this.y = Number(y);\n    this.width = Number(width);\n    this.height = Number(height);\n  }\n  /** Returns the left edge of the rectangle. */\n  get left() {\n    return this.x;\n  }\n  /** Returns the right edge of the rectangle. */\n  get right() {\n    return this.x + this.width;\n  }\n  /** Returns the top edge of the rectangle. */\n  get top() {\n    return this.y;\n  }\n  /** Returns the bottom edge of the rectangle. */\n  get bottom() {\n    return this.y + this.height;\n  }\n  /** Determines whether the Rectangle is empty. */\n  isEmpty() {\n    return this.left === this.right || this.top === this.bottom;\n  }\n  /** A constant empty rectangle. This is a new object every time the property is accessed */\n  static get EMPTY() {\n    return new Rectangle(0, 0, 0, 0);\n  }\n  /**\n   * Creates a clone of this Rectangle\n   * @returns a copy of the rectangle\n   */\n  clone() {\n    return new Rectangle(this.x, this.y, this.width, this.height);\n  }\n  /**\n   * Converts a Bounds object to a Rectangle object.\n   * @param bounds - The bounds to copy and convert to a rectangle.\n   * @returns Returns itself.\n   */\n  copyFromBounds(bounds) {\n    this.x = bounds.minX;\n    this.y = bounds.minY;\n    this.width = bounds.maxX - bounds.minX;\n    this.height = bounds.maxY - bounds.minY;\n    return this;\n  }\n  /**\n   * Copies another rectangle to this one.\n   * @param rectangle - The rectangle to copy from.\n   * @returns Returns itself.\n   */\n  copyFrom(rectangle) {\n    this.x = rectangle.x;\n    this.y = rectangle.y;\n    this.width = rectangle.width;\n    this.height = rectangle.height;\n    return this;\n  }\n  /**\n   * Copies this rectangle to another one.\n   * @param rectangle - The rectangle to copy to.\n   * @returns Returns given parameter.\n   */\n  copyTo(rectangle) {\n    rectangle.copyFrom(this);\n    return rectangle;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this Rectangle\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this Rectangle\n   */\n  contains(x, y) {\n    if (this.width <= 0 || this.height <= 0) {\n      return false;\n    }\n    if (x >= this.x && x < this.x + this.width) {\n      if (y >= this.y && y < this.y + this.height) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this rectangle including the stroke.\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @returns Whether the x/y coordinates are within this rectangle\n   */\n  strokeContains(x, y, strokeWidth) {\n    const { width, height } = this;\n    if (width <= 0 || height <= 0)\n      return false;\n    const _x = this.x;\n    const _y = this.y;\n    const outerLeft = _x - strokeWidth / 2;\n    const outerRight = _x + width + strokeWidth / 2;\n    const outerTop = _y - strokeWidth / 2;\n    const outerBottom = _y + height + strokeWidth / 2;\n    const innerLeft = _x + strokeWidth / 2;\n    const innerRight = _x + width - strokeWidth / 2;\n    const innerTop = _y + strokeWidth / 2;\n    const innerBottom = _y + height - strokeWidth / 2;\n    return x >= outerLeft && x <= outerRight && y >= outerTop && y <= outerBottom && !(x > innerLeft && x < innerRight && y > innerTop && y < innerBottom);\n  }\n  /**\n   * Determines whether the `other` Rectangle transformed by `transform` intersects with `this` Rectangle object.\n   * Returns true only if the area of the intersection is >0, this means that Rectangles\n   * sharing a side are not overlapping. Another side effect is that an arealess rectangle\n   * (width or height equal to zero) can't intersect any other rectangle.\n   * @param {Rectangle} other - The Rectangle to intersect with `this`.\n   * @param {Matrix} transform - The transformation matrix of `other`.\n   * @returns {boolean} A value of `true` if the transformed `other` Rectangle intersects with `this`; otherwise `false`.\n   */\n  intersects(other, transform) {\n    if (!transform) {\n      const x02 = this.x < other.x ? other.x : this.x;\n      const x12 = this.right > other.right ? other.right : this.right;\n      if (x12 <= x02) {\n        return false;\n      }\n      const y02 = this.y < other.y ? other.y : this.y;\n      const y12 = this.bottom > other.bottom ? other.bottom : this.bottom;\n      return y12 > y02;\n    }\n    const x0 = this.left;\n    const x1 = this.right;\n    const y0 = this.top;\n    const y1 = this.bottom;\n    if (x1 <= x0 || y1 <= y0) {\n      return false;\n    }\n    const lt = tempPoints[0].set(other.left, other.top);\n    const lb = tempPoints[1].set(other.left, other.bottom);\n    const rt = tempPoints[2].set(other.right, other.top);\n    const rb = tempPoints[3].set(other.right, other.bottom);\n    if (rt.x <= lt.x || lb.y <= lt.y) {\n      return false;\n    }\n    const s = Math.sign(transform.a * transform.d - transform.b * transform.c);\n    if (s === 0) {\n      return false;\n    }\n    transform.apply(lt, lt);\n    transform.apply(lb, lb);\n    transform.apply(rt, rt);\n    transform.apply(rb, rb);\n    if (Math.max(lt.x, lb.x, rt.x, rb.x) <= x0 || Math.min(lt.x, lb.x, rt.x, rb.x) >= x1 || Math.max(lt.y, lb.y, rt.y, rb.y) <= y0 || Math.min(lt.y, lb.y, rt.y, rb.y) >= y1) {\n      return false;\n    }\n    const nx = s * (lb.y - lt.y);\n    const ny = s * (lt.x - lb.x);\n    const n00 = nx * x0 + ny * y0;\n    const n10 = nx * x1 + ny * y0;\n    const n01 = nx * x0 + ny * y1;\n    const n11 = nx * x1 + ny * y1;\n    if (Math.max(n00, n10, n01, n11) <= nx * lt.x + ny * lt.y || Math.min(n00, n10, n01, n11) >= nx * rb.x + ny * rb.y) {\n      return false;\n    }\n    const mx = s * (lt.y - rt.y);\n    const my = s * (rt.x - lt.x);\n    const m00 = mx * x0 + my * y0;\n    const m10 = mx * x1 + my * y0;\n    const m01 = mx * x0 + my * y1;\n    const m11 = mx * x1 + my * y1;\n    if (Math.max(m00, m10, m01, m11) <= mx * lt.x + my * lt.y || Math.min(m00, m10, m01, m11) >= mx * rb.x + my * rb.y) {\n      return false;\n    }\n    return true;\n  }\n  /**\n   * Pads the rectangle making it grow in all directions.\n   * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n   * @param paddingX - The horizontal padding amount.\n   * @param paddingY - The vertical padding amount.\n   * @returns Returns itself.\n   */\n  pad(paddingX = 0, paddingY = paddingX) {\n    this.x -= paddingX;\n    this.y -= paddingY;\n    this.width += paddingX * 2;\n    this.height += paddingY * 2;\n    return this;\n  }\n  /**\n   * Fits this rectangle around the passed one.\n   * @param rectangle - The rectangle to fit.\n   * @returns Returns itself.\n   */\n  fit(rectangle) {\n    const x1 = Math.max(this.x, rectangle.x);\n    const x2 = Math.min(this.x + this.width, rectangle.x + rectangle.width);\n    const y1 = Math.max(this.y, rectangle.y);\n    const y2 = Math.min(this.y + this.height, rectangle.y + rectangle.height);\n    this.x = x1;\n    this.width = Math.max(x2 - x1, 0);\n    this.y = y1;\n    this.height = Math.max(y2 - y1, 0);\n    return this;\n  }\n  /**\n   * Enlarges rectangle that way its corners lie on grid\n   * @param resolution - resolution\n   * @param eps - precision\n   * @returns Returns itself.\n   */\n  ceil(resolution = 1, eps = 1e-3) {\n    const x2 = Math.ceil((this.x + this.width - eps) * resolution) / resolution;\n    const y2 = Math.ceil((this.y + this.height - eps) * resolution) / resolution;\n    this.x = Math.floor((this.x + eps) * resolution) / resolution;\n    this.y = Math.floor((this.y + eps) * resolution) / resolution;\n    this.width = x2 - this.x;\n    this.height = y2 - this.y;\n    return this;\n  }\n  /**\n   * Enlarges this rectangle to include the passed rectangle.\n   * @param rectangle - The rectangle to include.\n   * @returns Returns itself.\n   */\n  enlarge(rectangle) {\n    const x1 = Math.min(this.x, rectangle.x);\n    const x2 = Math.max(this.x + this.width, rectangle.x + rectangle.width);\n    const y1 = Math.min(this.y, rectangle.y);\n    const y2 = Math.max(this.y + this.height, rectangle.y + rectangle.height);\n    this.x = x1;\n    this.width = x2 - x1;\n    this.y = y1;\n    this.height = y2 - y1;\n    return this;\n  }\n  /**\n   * Returns the framing rectangle of the rectangle as a Rectangle object\n   * @param out - optional rectangle to store the result\n   * @returns The framing rectangle\n   */\n  getBounds(out) {\n    out = out || new Rectangle();\n    out.copyFrom(this);\n    return out;\n  }\n  toString() {\n    return `[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`;\n  }\n}\n\nexport { Rectangle };\n//# sourceMappingURL=Rectangle.mjs.map\n","\"use strict\";\nconst uidCache = {\n  default: -1\n};\nfunction uid(name = \"default\") {\n  if (uidCache[name] === void 0) {\n    uidCache[name] = -1;\n  }\n  return ++uidCache[name];\n}\nfunction resetUids() {\n  for (const key in uidCache) {\n    delete uidCache[key];\n  }\n}\n\nexport { resetUids, uid };\n//# sourceMappingURL=uid.mjs.map\n","\"use strict\";\nconst warnings = {};\nconst v8_0_0 = \"8.0.0\";\nfunction deprecation(version, message, ignoreDepth = 3) {\n  if (warnings[message]) {\n    return;\n  }\n  let stack = new Error().stack;\n  if (typeof stack === \"undefined\") {\n    console.warn(\"PixiJS Deprecation Warning: \", `${message}\nDeprecated since v${version}`);\n  } else {\n    stack = stack.split(\"\\n\").splice(ignoreDepth).join(\"\\n\");\n    if (console.groupCollapsed) {\n      console.groupCollapsed(\n        \"%cPixiJS Deprecation Warning: %c%s\",\n        \"color:#614108;background:#fffbe6\",\n        \"font-weight:normal;color:#614108;background:#fffbe6\",\n        `${message}\nDeprecated since v${version}`\n      );\n      console.warn(stack);\n      console.groupEnd();\n    } else {\n      console.warn(\"PixiJS Deprecation Warning: \", `${message}\nDeprecated since v${version}`);\n      console.warn(stack);\n    }\n  }\n  warnings[message] = true;\n}\n\nexport { deprecation, v8_0_0 };\n//# sourceMappingURL=deprecation.mjs.map\n","\"use strict\";\nconst NOOP = () => {\n};\n\nexport { NOOP };\n//# sourceMappingURL=NOOP.mjs.map\n","\"use strict\";\nfunction nextPow2(v) {\n  v += v === 0 ? 1 : 0;\n  --v;\n  v |= v >>> 1;\n  v |= v >>> 2;\n  v |= v >>> 4;\n  v |= v >>> 8;\n  v |= v >>> 16;\n  return v + 1;\n}\nfunction isPow2(v) {\n  return !(v & v - 1) && !!v;\n}\nfunction log2(v) {\n  let r = (v > 65535 ? 1 : 0) << 4;\n  v >>>= r;\n  let shift = (v > 255 ? 1 : 0) << 3;\n  v >>>= shift;\n  r |= shift;\n  shift = (v > 15 ? 1 : 0) << 2;\n  v >>>= shift;\n  r |= shift;\n  shift = (v > 3 ? 1 : 0) << 1;\n  v >>>= shift;\n  r |= shift;\n  return r | v >> 1;\n}\n\nexport { isPow2, log2, nextPow2 };\n//# sourceMappingURL=pow2.mjs.map\n","\"use strict\";\nfunction definedProps(obj) {\n  const result = {};\n  for (const key in obj) {\n    if (obj[key] !== void 0) {\n      result[key] = obj[key];\n    }\n  }\n  return result;\n}\n\nexport { definedProps };\n//# sourceMappingURL=definedProps.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst idHash = /* @__PURE__ */ Object.create(null);\nfunction createResourceIdFromString(value) {\n  const id = idHash[value];\n  if (id === void 0) {\n    idHash[value] = uid(\"resource\");\n  }\n  return id;\n}\nconst _TextureStyle = class _TextureStyle extends EventEmitter {\n  /**\n   * @param options - options for the style\n   */\n  constructor(options = {}) {\n    super();\n    this._resourceType = \"textureSampler\";\n    this._touched = 0;\n    /**\n     * Specifies the maximum anisotropy value clamp used by the sampler.\n     * Note: Most implementations support {@link GPUSamplerDescriptor#maxAnisotropy} values in range\n     * between 1 and 16, inclusive. The used value of {@link GPUSamplerDescriptor#maxAnisotropy} will\n     * be clamped to the maximum value that the platform supports.\n     * @internal\n     * @ignore\n     */\n    this._maxAnisotropy = 1;\n    /**\n     * Has the style been destroyed?\n     * @readonly\n     */\n    this.destroyed = false;\n    options = { ..._TextureStyle.defaultOptions, ...options };\n    this.addressMode = options.addressMode;\n    this.addressModeU = options.addressModeU ?? this.addressModeU;\n    this.addressModeV = options.addressModeV ?? this.addressModeV;\n    this.addressModeW = options.addressModeW ?? this.addressModeW;\n    this.scaleMode = options.scaleMode;\n    this.magFilter = options.magFilter ?? this.magFilter;\n    this.minFilter = options.minFilter ?? this.minFilter;\n    this.mipmapFilter = options.mipmapFilter ?? this.mipmapFilter;\n    this.lodMinClamp = options.lodMinClamp;\n    this.lodMaxClamp = options.lodMaxClamp;\n    this.compare = options.compare;\n    this.maxAnisotropy = options.maxAnisotropy ?? 1;\n  }\n  set addressMode(value) {\n    this.addressModeU = value;\n    this.addressModeV = value;\n    this.addressModeW = value;\n  }\n  /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n  get addressMode() {\n    return this.addressModeU;\n  }\n  set wrapMode(value) {\n    deprecation(v8_0_0, \"TextureStyle.wrapMode is now TextureStyle.addressMode\");\n    this.addressMode = value;\n  }\n  get wrapMode() {\n    return this.addressMode;\n  }\n  set scaleMode(value) {\n    this.magFilter = value;\n    this.minFilter = value;\n    this.mipmapFilter = value;\n  }\n  /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n  get scaleMode() {\n    return this.magFilter;\n  }\n  /** Specifies the maximum anisotropy value clamp used by the sampler. */\n  set maxAnisotropy(value) {\n    this._maxAnisotropy = Math.min(value, 16);\n    if (this._maxAnisotropy > 1) {\n      this.scaleMode = \"linear\";\n    }\n  }\n  get maxAnisotropy() {\n    return this._maxAnisotropy;\n  }\n  // TODO - move this to WebGL?\n  get _resourceId() {\n    return this._sharedResourceId || this._generateResourceId();\n  }\n  update() {\n    this.emit(\"change\", this);\n    this._sharedResourceId = null;\n  }\n  _generateResourceId() {\n    const bigKey = `${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;\n    this._sharedResourceId = createResourceIdFromString(bigKey);\n    return this._resourceId;\n  }\n  /** Destroys the style */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    this.removeAllListeners();\n  }\n};\n/** default options for the style */\n_TextureStyle.defaultOptions = {\n  addressMode: \"clamp-to-edge\",\n  scaleMode: \"linear\"\n};\nlet TextureStyle = _TextureStyle;\n\nexport { TextureStyle };\n//# sourceMappingURL=TextureStyle.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { isPow2 } from '../../../../../maths/misc/pow2.mjs';\nimport { definedProps } from '../../../../../scene/container/utils/definedProps.mjs';\nimport { uid } from '../../../../../utils/data/uid.mjs';\nimport { TextureStyle } from '../TextureStyle.mjs';\n\n\"use strict\";\nconst _TextureSource = class _TextureSource extends EventEmitter {\n  /**\n   * @param options - options for creating a new TextureSource\n   */\n  constructor(options = {}) {\n    super();\n    this.options = options;\n    /** unique id for this Texture source */\n    this.uid = uid(\"textureSource\");\n    /**\n     * The resource type used by this TextureSource. This is used by the bind groups to determine\n     * how to handle this resource.\n     * @ignore\n     * @internal\n     */\n    this._resourceType = \"textureSource\";\n    /**\n     * i unique resource id, used by the bind group systems.\n     * This can change if the texture is resized or its resource changes\n     */\n    this._resourceId = uid(\"resource\");\n    /**\n     * this is how the backends know how to upload this texture to the GPU\n     * It changes depending on the resource type. Classes that extend TextureSource\n     * should override this property.\n     * @ignore\n     * @internal\n     */\n    this.uploadMethodId = \"unknown\";\n    // dimensions\n    this._resolution = 1;\n    /** the pixel width of this texture source. This is the REAL pure number, not accounting resolution */\n    this.pixelWidth = 1;\n    /** the pixel height of this texture source. This is the REAL pure number, not accounting resolution */\n    this.pixelHeight = 1;\n    /**\n     * the width of this texture source, accounting for resolution\n     * eg pixelWidth 200, resolution 2, then width will be 100\n     */\n    this.width = 1;\n    /**\n     * the height of this texture source, accounting for resolution\n     * eg pixelHeight 200, resolution 2, then height will be 100\n     */\n    this.height = 1;\n    /**\n     * The number of samples of a multisample texture. This is always 1 for non-multisample textures.\n     * To enable multisample for a texture, set antialias to true\n     * @internal\n     * @ignore\n     */\n    this.sampleCount = 1;\n    /** The number of mip levels to generate for this texture. this is  overridden if autoGenerateMipmaps is true */\n    this.mipLevelCount = 1;\n    /**\n     * Should we auto generate mipmaps for this texture? This will automatically generate mipmaps\n     * for this texture when uploading to the GPU. Mipmapped textures take up more memory, but\n     * can look better when scaled down.\n     *\n     * For performance reasons, it is recommended to NOT use this with RenderTextures, as they are often updated every frame.\n     * If you do, make sure to call `updateMipmaps` after you update the texture.\n     */\n    this.autoGenerateMipmaps = false;\n    /** the format that the texture data has */\n    this.format = \"rgba8unorm\";\n    /** how many dimensions does this texture have? currently v8 only supports 2d */\n    this.dimension = \"2d\";\n    /**\n     * Only really affects RenderTextures.\n     * Should we use antialiasing for this texture. It will look better, but may impact performance as a\n     * Blit operation will be required to resolve the texture.\n     */\n    this.antialias = false;\n    /**\n     * Used by automatic texture Garbage Collection, stores last GC tick when it was bound\n     * @protected\n     */\n    this._touched = 0;\n    /**\n     * Used by the batcher to build texture batches. faster to have the variable here!\n     * @protected\n     */\n    this._batchTick = -1;\n    /**\n     * A temporary batch location for the texture batching. Here for performance reasons only!\n     * @protected\n     */\n    this._textureBindLocation = -1;\n    options = { ..._TextureSource.defaultOptions, ...options };\n    this.label = options.label ?? \"\";\n    this.resource = options.resource;\n    this.autoGarbageCollect = options.autoGarbageCollect;\n    this._resolution = options.resolution;\n    if (options.width) {\n      this.pixelWidth = options.width * this._resolution;\n    } else {\n      this.pixelWidth = this.resource ? this.resourceWidth ?? 1 : 1;\n    }\n    if (options.height) {\n      this.pixelHeight = options.height * this._resolution;\n    } else {\n      this.pixelHeight = this.resource ? this.resourceHeight ?? 1 : 1;\n    }\n    this.width = this.pixelWidth / this._resolution;\n    this.height = this.pixelHeight / this._resolution;\n    this.format = options.format;\n    this.dimension = options.dimensions;\n    this.mipLevelCount = options.mipLevelCount;\n    this.autoGenerateMipmaps = options.autoGenerateMipmaps;\n    this.sampleCount = options.sampleCount;\n    this.antialias = options.antialias;\n    this.alphaMode = options.alphaMode;\n    this.style = new TextureStyle(definedProps(options));\n    this.destroyed = false;\n    this._refreshPOT();\n  }\n  /** returns itself */\n  get source() {\n    return this;\n  }\n  /** the style of the texture */\n  get style() {\n    return this._style;\n  }\n  set style(value) {\n    if (this.style === value)\n      return;\n    this._style?.off(\"change\", this._onStyleChange, this);\n    this._style = value;\n    this._style?.on(\"change\", this._onStyleChange, this);\n    this._onStyleChange();\n  }\n  /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n  get addressMode() {\n    return this._style.addressMode;\n  }\n  set addressMode(value) {\n    this._style.addressMode = value;\n  }\n  /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n  get repeatMode() {\n    return this._style.addressMode;\n  }\n  set repeatMode(value) {\n    this._style.addressMode = value;\n  }\n  /** Specifies the sampling behavior when the sample footprint is smaller than or equal to one texel. */\n  get magFilter() {\n    return this._style.magFilter;\n  }\n  set magFilter(value) {\n    this._style.magFilter = value;\n  }\n  /** Specifies the sampling behavior when the sample footprint is larger than one texel. */\n  get minFilter() {\n    return this._style.minFilter;\n  }\n  set minFilter(value) {\n    this._style.minFilter = value;\n  }\n  /** Specifies behavior for sampling between mipmap levels. */\n  get mipmapFilter() {\n    return this._style.mipmapFilter;\n  }\n  set mipmapFilter(value) {\n    this._style.mipmapFilter = value;\n  }\n  /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n  get lodMinClamp() {\n    return this._style.lodMinClamp;\n  }\n  set lodMinClamp(value) {\n    this._style.lodMinClamp = value;\n  }\n  /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n  get lodMaxClamp() {\n    return this._style.lodMaxClamp;\n  }\n  set lodMaxClamp(value) {\n    this._style.lodMaxClamp = value;\n  }\n  _onStyleChange() {\n    this.emit(\"styleChange\", this);\n  }\n  /** call this if you have modified the texture outside of the constructor */\n  update() {\n    if (this.resource) {\n      const resolution = this._resolution;\n      const didResize = this.resize(this.resourceWidth / resolution, this.resourceHeight / resolution);\n      if (didResize)\n        return;\n    }\n    this.emit(\"update\", this);\n  }\n  /** Destroys this texture source */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    if (this._style) {\n      this._style.destroy();\n      this._style = null;\n    }\n    this.uploadMethodId = null;\n    this.resource = null;\n    this.removeAllListeners();\n  }\n  /**\n   * This will unload the Texture source from the GPU. This will free up the GPU memory\n   * As soon as it is required fore rendering, it will be re-uploaded.\n   */\n  unload() {\n    this._resourceId = uid(\"resource\");\n    this.emit(\"change\", this);\n    this.emit(\"unload\", this);\n  }\n  /** the width of the resource. This is the REAL pure number, not accounting resolution   */\n  get resourceWidth() {\n    const { resource } = this;\n    return resource.naturalWidth || resource.videoWidth || resource.displayWidth || resource.width;\n  }\n  /** the height of the resource. This is the REAL pure number, not accounting resolution */\n  get resourceHeight() {\n    const { resource } = this;\n    return resource.naturalHeight || resource.videoHeight || resource.displayHeight || resource.height;\n  }\n  /**\n   * the resolution of the texture. Changing this number, will not change the number of pixels in the actual texture\n   * but will the size of the texture when rendered.\n   *\n   * changing the resolution of this texture to 2 for example will make it appear twice as small when rendered (as pixel\n   * density will have increased)\n   */\n  get resolution() {\n    return this._resolution;\n  }\n  set resolution(resolution) {\n    if (this._resolution === resolution)\n      return;\n    this._resolution = resolution;\n    this.width = this.pixelWidth / resolution;\n    this.height = this.pixelHeight / resolution;\n  }\n  /**\n   * Resize the texture, this is handy if you want to use the texture as a render texture\n   * @param width - the new width of the texture\n   * @param height - the new height of the texture\n   * @param resolution - the new resolution of the texture\n   * @returns - if the texture was resized\n   */\n  resize(width, height, resolution) {\n    resolution = resolution || this._resolution;\n    width = width || this.width;\n    height = height || this.height;\n    const newPixelWidth = Math.round(width * resolution);\n    const newPixelHeight = Math.round(height * resolution);\n    this.width = newPixelWidth / resolution;\n    this.height = newPixelHeight / resolution;\n    this._resolution = resolution;\n    if (this.pixelWidth === newPixelWidth && this.pixelHeight === newPixelHeight) {\n      return false;\n    }\n    this._refreshPOT();\n    this.pixelWidth = newPixelWidth;\n    this.pixelHeight = newPixelHeight;\n    this.emit(\"resize\", this);\n    this._resourceId = uid(\"resource\");\n    this.emit(\"change\", this);\n    return true;\n  }\n  /**\n   * Lets the renderer know that this texture has been updated and its mipmaps should be re-generated.\n   * This is only important for RenderTexture instances, as standard Texture instances will have their\n   * mipmaps generated on upload. You should call this method after you make any change to the texture\n   *\n   * The reason for this is is can be quite expensive to update mipmaps for a texture. So by default,\n   * We want you, the developer to specify when this action should happen.\n   *\n   * Generally you don't want to have mipmaps generated on Render targets that are changed every frame,\n   */\n  updateMipmaps() {\n    if (this.autoGenerateMipmaps && this.mipLevelCount > 1) {\n      this.emit(\"updateMipmaps\", this);\n    }\n  }\n  set wrapMode(value) {\n    this._style.wrapMode = value;\n  }\n  get wrapMode() {\n    return this._style.wrapMode;\n  }\n  set scaleMode(value) {\n    this._style.scaleMode = value;\n  }\n  /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n  get scaleMode() {\n    return this._style.scaleMode;\n  }\n  /**\n   * Refresh check for isPowerOfTwo texture based on size\n   * @private\n   */\n  _refreshPOT() {\n    this.isPowerOfTwo = isPow2(this.pixelWidth) && isPow2(this.pixelHeight);\n  }\n  static test(_resource) {\n    throw new Error(\"Unimplemented\");\n  }\n};\n/** The default options used when creating a new TextureSource. override these to add your own defaults */\n_TextureSource.defaultOptions = {\n  resolution: 1,\n  format: \"bgra8unorm\",\n  alphaMode: \"premultiply-alpha-on-upload\",\n  dimensions: \"2d\",\n  mipLevelCount: 1,\n  autoGenerateMipmaps: false,\n  sampleCount: 1,\n  antialias: false,\n  autoGarbageCollect: false\n};\nlet TextureSource = _TextureSource;\n\nexport { TextureSource };\n//# sourceMappingURL=TextureSource.mjs.map\n","import { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass BufferImageSource extends TextureSource {\n  constructor(options) {\n    const buffer = options.resource || new Float32Array(options.width * options.height * 4);\n    let format = options.format;\n    if (!format) {\n      if (buffer instanceof Float32Array) {\n        format = \"rgba32float\";\n      } else if (buffer instanceof Int32Array) {\n        format = \"rgba32uint\";\n      } else if (buffer instanceof Uint32Array) {\n        format = \"rgba32uint\";\n      } else if (buffer instanceof Int16Array) {\n        format = \"rgba16uint\";\n      } else if (buffer instanceof Uint16Array) {\n        format = \"rgba16uint\";\n      } else if (buffer instanceof Int8Array) {\n        format = \"bgra8unorm\";\n      } else {\n        format = \"bgra8unorm\";\n      }\n    }\n    super({\n      ...options,\n      resource: buffer,\n      format\n    });\n    this.uploadMethodId = \"buffer\";\n  }\n  static test(resource) {\n    return resource instanceof Int8Array || resource instanceof Uint8Array || resource instanceof Uint8ClampedArray || resource instanceof Int16Array || resource instanceof Uint16Array || resource instanceof Int32Array || resource instanceof Uint32Array || resource instanceof Float32Array;\n  }\n}\nBufferImageSource.extension = ExtensionType.TextureSource;\n\nexport { BufferImageSource };\n//# sourceMappingURL=BufferSource.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\n\n\"use strict\";\nconst tempMat = new Matrix();\nclass TextureMatrix {\n  /**\n   * @param texture - observed texture\n   * @param clampMargin - Changes frame clamping, 0.5 by default. Use -0.5 for extra border.\n   */\n  constructor(texture, clampMargin) {\n    this.mapCoord = new Matrix();\n    this.uClampFrame = new Float32Array(4);\n    this.uClampOffset = new Float32Array(2);\n    this._textureID = -1;\n    this._updateID = 0;\n    this.clampOffset = 0;\n    if (typeof clampMargin === \"undefined\") {\n      this.clampMargin = texture.width < 10 ? 0 : 0.5;\n    } else {\n      this.clampMargin = clampMargin;\n    }\n    this.isSimple = false;\n    this.texture = texture;\n  }\n  /** Texture property. */\n  get texture() {\n    return this._texture;\n  }\n  set texture(value) {\n    if (this.texture === value)\n      return;\n    this._texture?.removeListener(\"update\", this.update, this);\n    this._texture = value;\n    this._texture.addListener(\"update\", this.update, this);\n    this.update();\n  }\n  /**\n   * Multiplies uvs array to transform\n   * @param uvs - mesh uvs\n   * @param [out=uvs] - output\n   * @returns - output\n   */\n  multiplyUvs(uvs, out) {\n    if (out === void 0) {\n      out = uvs;\n    }\n    const mat = this.mapCoord;\n    for (let i = 0; i < uvs.length; i += 2) {\n      const x = uvs[i];\n      const y = uvs[i + 1];\n      out[i] = x * mat.a + y * mat.c + mat.tx;\n      out[i + 1] = x * mat.b + y * mat.d + mat.ty;\n    }\n    return out;\n  }\n  /**\n   * Updates matrices if texture was changed\n   * @returns - whether or not it was updated\n   */\n  update() {\n    const tex = this._texture;\n    this._updateID++;\n    const uvs = tex.uvs;\n    this.mapCoord.set(uvs.x1 - uvs.x0, uvs.y1 - uvs.y0, uvs.x3 - uvs.x0, uvs.y3 - uvs.y0, uvs.x0, uvs.y0);\n    const orig = tex.orig;\n    const trim = tex.trim;\n    if (trim) {\n      tempMat.set(\n        orig.width / trim.width,\n        0,\n        0,\n        orig.height / trim.height,\n        -trim.x / trim.width,\n        -trim.y / trim.height\n      );\n      this.mapCoord.append(tempMat);\n    }\n    const texBase = tex.source;\n    const frame = this.uClampFrame;\n    const margin = this.clampMargin / texBase._resolution;\n    const offset = this.clampOffset;\n    frame[0] = (tex.frame.x + margin + offset) / texBase.width;\n    frame[1] = (tex.frame.y + margin + offset) / texBase.height;\n    frame[2] = (tex.frame.x + tex.frame.width - margin + offset) / texBase.width;\n    frame[3] = (tex.frame.y + tex.frame.height - margin + offset) / texBase.height;\n    this.uClampOffset[0] = offset / texBase.pixelWidth;\n    this.uClampOffset[1] = offset / texBase.pixelHeight;\n    this.isSimple = tex.frame.width === texBase.width && tex.frame.height === texBase.height && tex.rotate === 0;\n    return true;\n  }\n}\n\nexport { TextureMatrix };\n//# sourceMappingURL=TextureMatrix.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { groupD8 } from '../../../../maths/matrix/groupD8.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\nimport { NOOP } from '../../../../utils/misc/NOOP.mjs';\nimport { BufferImageSource } from './sources/BufferSource.mjs';\nimport { TextureSource } from './sources/TextureSource.mjs';\nimport { TextureMatrix } from './TextureMatrix.mjs';\n\n\"use strict\";\nclass Texture extends EventEmitter {\n  /**\n   * @param {TextureOptions} param0 - Options for the texture\n   */\n  constructor({\n    source,\n    label,\n    frame,\n    orig,\n    trim,\n    defaultAnchor,\n    defaultBorders,\n    rotate,\n    dynamic\n  } = {}) {\n    super();\n    /** unique id for this texture */\n    this.uid = uid(\"texture\");\n    /** A uvs object based on the given frame and the texture source */\n    this.uvs = { x0: 0, y0: 0, x1: 0, y1: 0, x2: 0, y2: 0, x3: 0, y3: 0 };\n    /**\n     * This is the area of the BaseTexture image to actually copy to the Canvas / WebGL when rendering,\n     * irrespective of the actual frame size or placement (which can be influenced by trimmed texture atlases)\n     */\n    this.frame = new Rectangle();\n    /**\n     * Does this Texture have any frame data assigned to it?\n     *\n     * This mode is enabled automatically if no frame was passed inside constructor.\n     *\n     * In this mode texture is subscribed to baseTexture events, and fires `update` on any change.\n     *\n     * Beware, after loading or resize of baseTexture event can fired two times!\n     * If you want more control, subscribe on baseTexture itself.\n     * @example\n     * texture.on('update', () => {});\n     */\n    this.noFrame = false;\n    /**\n     * Set to true if you plan on modifying the uvs of this texture.\n     * When this is the case, sprites and other objects using the texture will\n     * make sure to listen for changes to the uvs and update their vertices accordingly.\n     */\n    this.dynamic = false;\n    /** is it a texture? yes! used for type checking */\n    this.isTexture = true;\n    this.label = label;\n    this.source = source?.source ?? new TextureSource();\n    this.noFrame = !frame;\n    if (frame) {\n      this.frame.copyFrom(frame);\n    } else {\n      const { width, height } = this._source;\n      this.frame.width = width;\n      this.frame.height = height;\n    }\n    this.orig = orig || this.frame;\n    this.trim = trim;\n    this.rotate = rotate ?? 0;\n    this.defaultAnchor = defaultAnchor;\n    this.defaultBorders = defaultBorders;\n    this.destroyed = false;\n    this.dynamic = dynamic || false;\n    this.updateUvs();\n  }\n  set source(value) {\n    if (this._source) {\n      this._source.off(\"resize\", this.update, this);\n    }\n    this._source = value;\n    value.on(\"resize\", this.update, this);\n    this.emit(\"update\", this);\n  }\n  /** the underlying source of the texture (equivalent of baseTexture in v7) */\n  get source() {\n    return this._source;\n  }\n  /** returns a TextureMatrix instance for this texture. By default, that object is not created because its heavy. */\n  get textureMatrix() {\n    if (!this._textureMatrix) {\n      this._textureMatrix = new TextureMatrix(this);\n    }\n    return this._textureMatrix;\n  }\n  /** The width of the Texture in pixels. */\n  get width() {\n    return this.orig.width;\n  }\n  /** The height of the Texture in pixels. */\n  get height() {\n    return this.orig.height;\n  }\n  /** Call this function when you have modified the frame of this texture. */\n  updateUvs() {\n    const { uvs, frame } = this;\n    const { width, height } = this._source;\n    const nX = frame.x / width;\n    const nY = frame.y / height;\n    const nW = frame.width / width;\n    const nH = frame.height / height;\n    let rotate = this.rotate;\n    if (rotate) {\n      const w2 = nW / 2;\n      const h2 = nH / 2;\n      const cX = nX + w2;\n      const cY = nY + h2;\n      rotate = groupD8.add(rotate, groupD8.NW);\n      uvs.x0 = cX + w2 * groupD8.uX(rotate);\n      uvs.y0 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x1 = cX + w2 * groupD8.uX(rotate);\n      uvs.y1 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x2 = cX + w2 * groupD8.uX(rotate);\n      uvs.y2 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x3 = cX + w2 * groupD8.uX(rotate);\n      uvs.y3 = cY + h2 * groupD8.uY(rotate);\n    } else {\n      uvs.x0 = nX;\n      uvs.y0 = nY;\n      uvs.x1 = nX + nW;\n      uvs.y1 = nY;\n      uvs.x2 = nX + nW;\n      uvs.y2 = nY + nH;\n      uvs.x3 = nX;\n      uvs.y3 = nY + nH;\n    }\n  }\n  /**\n   * Destroys this texture\n   * @param destroySource - Destroy the source when the texture is destroyed.\n   */\n  destroy(destroySource = false) {\n    if (this._source) {\n      if (destroySource) {\n        this._source.destroy();\n        this._source = null;\n      }\n    }\n    this._textureMatrix = null;\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n  }\n  /** call this if you have modified the `texture outside` of the constructor */\n  update() {\n    if (this.noFrame) {\n      this.frame.width = this._source.width;\n      this.frame.height = this._source.height;\n    }\n    this.updateUvs();\n    this.emit(\"update\", this);\n  }\n  /** @deprecated since 8.0.0 */\n  get baseTexture() {\n    deprecation(v8_0_0, \"Texture.baseTexture is now Texture.source\");\n    return this._source;\n  }\n}\nTexture.EMPTY = new Texture({\n  label: \"EMPTY\",\n  source: new TextureSource({\n    label: \"EMPTY\"\n  })\n});\nTexture.EMPTY.destroy = NOOP;\nTexture.WHITE = new Texture({\n  source: new BufferImageSource({\n    resource: new Uint8Array([255, 255, 255, 255]),\n    width: 1,\n    height: 1,\n    alphaMode: \"premultiply-alpha-on-upload\",\n    label: \"WHITE\"\n  }),\n  label: \"WHITE\"\n});\nTexture.WHITE.destroy = NOOP;\n\nexport { Texture };\n//# sourceMappingURL=Texture.mjs.map\n","\"use strict\";\nfunction updateQuadBounds(bounds, anchor, texture, padding) {\n  const { width, height } = texture.orig;\n  const trim = texture.trim;\n  if (trim) {\n    const sourceWidth = trim.width;\n    const sourceHeight = trim.height;\n    bounds.minX = trim.x - anchor._x * width - padding;\n    bounds.maxX = bounds.minX + sourceWidth;\n    bounds.minY = trim.y - anchor._y * height - padding;\n    bounds.maxY = bounds.minY + sourceHeight;\n  } else {\n    bounds.minX = -anchor._x * width - padding;\n    bounds.maxX = bounds.minX + width;\n    bounds.minY = -anchor._y * height - padding;\n    bounds.maxY = bounds.minY + height;\n  }\n  return;\n}\n\nexport { updateQuadBounds };\n//# sourceMappingURL=updateQuadBounds.mjs.map\n","var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(r){return\"string\"==typeof r?r.length>0:\"number\"==typeof r},n=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},e=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),r>n?n:r>t?r:t},u=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},a=function(r){return{r:e(r.r,0,255),g:e(r.g,0,255),b:e(r.b,0,255),a:e(r.a)}},o=function(r){return{r:n(r.r),g:n(r.g),b:n(r.b),a:n(r.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(r){var t=r.toString(16);return t.length<2?\"0\"+t:t},h=function(r){var t=r.r,n=r.g,e=r.b,u=r.a,a=Math.max(t,n,e),o=a-Math.min(t,n,e),i=o?a===t?(n-e)/o:a===n?2+(e-t)/o:4+(t-n)/o:0;return{h:60*(i<0?i+6:i),s:a?o/a*100:0,v:a/255*100,a:u}},b=function(r){var t=r.h,n=r.s,e=r.v,u=r.a;t=t/360*6,n/=100,e/=100;var a=Math.floor(t),o=e*(1-n),i=e*(1-(t-a)*n),s=e*(1-(1-t+a)*n),h=a%6;return{r:255*[e,i,o,o,s,e][h],g:255*[s,e,e,i,o,o][h],b:255*[o,o,s,e,e,i][h],a:u}},g=function(r){return{h:u(r.h),s:e(r.s,0,100),l:e(r.l,0,100),a:e(r.a)}},d=function(r){return{h:n(r.h),s:n(r.s),l:n(r.l),a:n(r.a,3)}},f=function(r){return b((n=(t=r).s,{h:t.h,s:(n*=((e=t.l)<50?e:100-e)/100)>0?2*n/(e+n)*100:0,v:e+n,a:t.a}));var t,n,e},c=function(r){return{h:(t=h(r)).h,s:(u=(200-(n=t.s))*(e=t.v)/100)>0&&u<200?n*e/100/(u<=100?u:200-u)*100:0,l:u/2,a:t.a};var t,n,e,u},l=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,p=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s+([+-]?\\d*\\.?\\d+)%\\s+([+-]?\\d*\\.?\\d+)%\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,v=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,m=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,y={string:[[function(r){var t=i.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:4===r.length?n(parseInt(r[3]+r[3],16)/255,2):1}:6===r.length||8===r.length?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:8===r.length?n(parseInt(r.substr(6,2),16)/255,2):1}:null:null},\"hex\"],[function(r){var t=v.exec(r)||m.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},\"rgb\"],[function(t){var n=l.exec(t)||p.exec(t);if(!n)return null;var e,u,a=g({h:(e=n[1],u=n[2],void 0===u&&(u=\"deg\"),Number(e)*(r[u]||1)),s:Number(n[3]),l:Number(n[4]),a:void 0===n[5]?1:Number(n[5])/(n[6]?100:1)});return f(a)},\"hsl\"]],object:[[function(r){var n=r.r,e=r.g,u=r.b,o=r.a,i=void 0===o?1:o;return t(n)&&t(e)&&t(u)?a({r:Number(n),g:Number(e),b:Number(u),a:Number(i)}):null},\"rgb\"],[function(r){var n=r.h,e=r.s,u=r.l,a=r.a,o=void 0===a?1:a;if(!t(n)||!t(e)||!t(u))return null;var i=g({h:Number(n),s:Number(e),l:Number(u),a:Number(o)});return f(i)},\"hsl\"],[function(r){var n=r.h,a=r.s,o=r.v,i=r.a,s=void 0===i?1:i;if(!t(n)||!t(a)||!t(o))return null;var h=function(r){return{h:u(r.h),s:e(r.s,0,100),v:e(r.v,0,100),a:e(r.a)}}({h:Number(n),s:Number(a),v:Number(o),a:Number(s)});return b(h)},\"hsv\"]]},N=function(r,t){for(var n=0;n<t.length;n++){var e=t[n][0](r);if(e)return[e,t[n][1]]}return[null,void 0]},x=function(r){return\"string\"==typeof r?N(r.trim(),y.string):\"object\"==typeof r&&null!==r?N(r,y.object):[null,void 0]},I=function(r){return x(r)[1]},M=function(r,t){var n=c(r);return{h:n.h,s:e(n.s+100*t,0,100),l:n.l,a:n.a}},H=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},$=function(r,t){var n=c(r);return{h:n.h,s:n.s,l:e(n.l+100*t,0,100),a:n.a}},j=function(){function r(r){this.parsed=x(r)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return null!==this.parsed},r.prototype.brightness=function(){return n(H(this.rgba),2)},r.prototype.isDark=function(){return H(this.rgba)<.5},r.prototype.isLight=function(){return H(this.rgba)>=.5},r.prototype.toHex=function(){return r=o(this.rgba),t=r.r,e=r.g,u=r.b,i=(a=r.a)<1?s(n(255*a)):\"\",\"#\"+s(t)+s(e)+s(u)+i;var r,t,e,u,a,i},r.prototype.toRgb=function(){return o(this.rgba)},r.prototype.toRgbString=function(){return r=o(this.rgba),t=r.r,n=r.g,e=r.b,(u=r.a)<1?\"rgba(\"+t+\", \"+n+\", \"+e+\", \"+u+\")\":\"rgb(\"+t+\", \"+n+\", \"+e+\")\";var r,t,n,e,u},r.prototype.toHsl=function(){return d(c(this.rgba))},r.prototype.toHslString=function(){return r=d(c(this.rgba)),t=r.h,n=r.s,e=r.l,(u=r.a)<1?\"hsla(\"+t+\", \"+n+\"%, \"+e+\"%, \"+u+\")\":\"hsl(\"+t+\", \"+n+\"%, \"+e+\"%)\";var r,t,n,e,u},r.prototype.toHsv=function(){return r=h(this.rgba),{h:n(r.h),s:n(r.s),v:n(r.v),a:n(r.a,3)};var r},r.prototype.invert=function(){return w({r:255-(r=this.rgba).r,g:255-r.g,b:255-r.b,a:r.a});var r},r.prototype.saturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,r))},r.prototype.desaturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,-r))},r.prototype.grayscale=function(){return w(M(this.rgba,-1))},r.prototype.lighten=function(r){return void 0===r&&(r=.1),w($(this.rgba,r))},r.prototype.darken=function(r){return void 0===r&&(r=.1),w($(this.rgba,-r))},r.prototype.rotate=function(r){return void 0===r&&(r=15),this.hue(this.hue()+r)},r.prototype.alpha=function(r){return\"number\"==typeof r?w({r:(t=this.rgba).r,g:t.g,b:t.b,a:r}):n(this.rgba.a,3);var t},r.prototype.hue=function(r){var t=c(this.rgba);return\"number\"==typeof r?w({h:r,s:t.s,l:t.l,a:t.a}):n(t.h)},r.prototype.isEqual=function(r){return this.toHex()===w(r).toHex()},r}(),w=function(r){return r instanceof j?r:new j(r)},S=[],k=function(r){r.forEach(function(r){S.indexOf(r)<0&&(r(j,y),S.push(r))})},E=function(){return new j({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};export{j as Colord,w as colord,k as extend,I as getFormat,E as random};\n","export default function(e,f){var a={white:\"#ffffff\",bisque:\"#ffe4c4\",blue:\"#0000ff\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",azure:\"#f0ffff\",whitesmoke:\"#f5f5f5\",papayawhip:\"#ffefd5\",plum:\"#dda0dd\",blanchedalmond:\"#ffebcd\",black:\"#000000\",gold:\"#ffd700\",goldenrod:\"#daa520\",gainsboro:\"#dcdcdc\",cornsilk:\"#fff8dc\",cornflowerblue:\"#6495ed\",burlywood:\"#deb887\",aquamarine:\"#7fffd4\",beige:\"#f5f5dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkkhaki:\"#bdb76b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkgrey:\"#a9a9a9\",peachpuff:\"#ffdab9\",darkmagenta:\"#8b008b\",darkred:\"#8b0000\",darkorchid:\"#9932cc\",darkorange:\"#ff8c00\",darkslateblue:\"#483d8b\",gray:\"#808080\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",wheat:\"#f5deb3\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",ghostwhite:\"#f8f8ff\",darkviolet:\"#9400d3\",magenta:\"#ff00ff\",green:\"#008000\",dodgerblue:\"#1e90ff\",grey:\"#808080\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",blueviolet:\"#8a2be2\",forestgreen:\"#228b22\",lawngreen:\"#7cfc00\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",fuchsia:\"#ff00ff\",brown:\"#a52a2a\",maroon:\"#800000\",mediumblue:\"#0000cd\",lightcoral:\"#f08080\",darkturquoise:\"#00ced1\",lightcyan:\"#e0ffff\",ivory:\"#fffff0\",lightyellow:\"#ffffe0\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",linen:\"#faf0e6\",mediumaquamarine:\"#66cdaa\",lemonchiffon:\"#fffacd\",lime:\"#00ff00\",khaki:\"#f0e68c\",mediumseagreen:\"#3cb371\",limegreen:\"#32cd32\",mediumspringgreen:\"#00fa9a\",lightskyblue:\"#87cefa\",lightblue:\"#add8e6\",midnightblue:\"#191970\",lightpink:\"#ffb6c1\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",mintcream:\"#f5fffa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",navajowhite:\"#ffdead\",navy:\"#000080\",mediumvioletred:\"#c71585\",powderblue:\"#b0e0e6\",palegoldenrod:\"#eee8aa\",oldlace:\"#fdf5e6\",paleturquoise:\"#afeeee\",mediumturquoise:\"#48d1cc\",mediumorchid:\"#ba55d3\",rebeccapurple:\"#663399\",lightsteelblue:\"#b0c4de\",mediumslateblue:\"#7b68ee\",thistle:\"#d8bfd8\",tan:\"#d2b48c\",orchid:\"#da70d6\",mediumpurple:\"#9370db\",purple:\"#800080\",pink:\"#ffc0cb\",skyblue:\"#87ceeb\",springgreen:\"#00ff7f\",palegreen:\"#98fb98\",red:\"#ff0000\",yellow:\"#ffff00\",slateblue:\"#6a5acd\",lavenderblush:\"#fff0f5\",peru:\"#cd853f\",palevioletred:\"#db7093\",violet:\"#ee82ee\",teal:\"#008080\",slategray:\"#708090\",slategrey:\"#708090\",aliceblue:\"#f0f8ff\",darkseagreen:\"#8fbc8f\",darkolivegreen:\"#556b2f\",greenyellow:\"#adff2f\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",tomato:\"#ff6347\",silver:\"#c0c0c0\",sienna:\"#a0522d\",lavender:\"#e6e6fa\",lightgreen:\"#90ee90\",orange:\"#ffa500\",orangered:\"#ff4500\",steelblue:\"#4682b4\",royalblue:\"#4169e1\",turquoise:\"#40e0d0\",yellowgreen:\"#9acd32\",salmon:\"#fa8072\",saddlebrown:\"#8b4513\",sandybrown:\"#f4a460\",rosybrown:\"#bc8f8f\",darksalmon:\"#e9967a\",lightgoldenrodyellow:\"#fafad2\",snow:\"#fffafa\",lightgrey:\"#d3d3d3\",lightgray:\"#d3d3d3\",dimgray:\"#696969\",dimgrey:\"#696969\",olivedrab:\"#6b8e23\",olive:\"#808000\"},r={};for(var d in a)r[a[d]]=d;var l={};e.prototype.toName=function(f){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return\"transparent\";var d,i,n=r[this.toHex()];if(n)return n;if(null==f?void 0:f.closest){var o=this.toRgb(),t=1/0,b=\"black\";if(!l.length)for(var c in a)l[c]=new e(a[c]).toRgb();for(var g in a){var u=(d=o,i=l[g],Math.pow(d.r-i.r,2)+Math.pow(d.g-i.g,2)+Math.pow(d.b-i.b,2));u<t&&(t=u,b=g)}return b}};f.string.push([function(f){var r=f.toLowerCase(),d=\"transparent\"===r?\"#0000\":a[r];return d?new e(d).toRgb():null},\"name\"])}\n","import { extend, colord } from '@pixi/colord';\nimport namesPlugin from '@pixi/colord/plugins/names';\n\n\"use strict\";\nextend([namesPlugin]);\nconst _Color = class _Color {\n  /**\n   * @param {ColorSource} value - Optional value to use, if not provided, white is used.\n   */\n  constructor(value = 16777215) {\n    this._value = null;\n    this._components = new Float32Array(4);\n    this._components.fill(1);\n    this._int = 16777215;\n    this.value = value;\n  }\n  /** Get red component (0 - 1) */\n  get red() {\n    return this._components[0];\n  }\n  /** Get green component (0 - 1) */\n  get green() {\n    return this._components[1];\n  }\n  /** Get blue component (0 - 1) */\n  get blue() {\n    return this._components[2];\n  }\n  /** Get alpha component (0 - 1) */\n  get alpha() {\n    return this._components[3];\n  }\n  /**\n   * Set the value, suitable for chaining\n   * @param value\n   * @see Color.value\n   */\n  setValue(value) {\n    this.value = value;\n    return this;\n  }\n  /**\n   * The current color source.\n   *\n   * When setting:\n   * - Setting to an instance of `Color` will copy its color source and components.\n   * - Otherwise, `Color` will try to normalize the color source and set the components.\n   *   If the color source is invalid, an `Error` will be thrown and the `Color` will left unchanged.\n   *\n   * Note: The `null` in the setter's parameter type is added to match the TypeScript rule: return type of getter\n   * must be assignable to its setter's parameter type. Setting `value` to `null` will throw an `Error`.\n   *\n   * When getting:\n   * - A return value of `null` means the previous value was overridden (e.g., {@link Color.multiply multiply},\n   *   {@link Color.premultiply premultiply} or {@link Color.round round}).\n   * - Otherwise, the color source used when setting is returned.\n   */\n  set value(value) {\n    if (value instanceof _Color) {\n      this._value = this._cloneSource(value._value);\n      this._int = value._int;\n      this._components.set(value._components);\n    } else if (value === null) {\n      throw new Error(\"Cannot set Color#value to null\");\n    } else if (this._value === null || !this._isSourceEqual(this._value, value)) {\n      this._normalize(value);\n      this._value = this._cloneSource(value);\n    }\n  }\n  get value() {\n    return this._value;\n  }\n  /**\n   * Copy a color source internally.\n   * @param value - Color source\n   */\n  _cloneSource(value) {\n    if (typeof value === \"string\" || typeof value === \"number\" || value instanceof Number || value === null) {\n      return value;\n    } else if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n      return value.slice(0);\n    } else if (typeof value === \"object\" && value !== null) {\n      return { ...value };\n    }\n    return value;\n  }\n  /**\n   * Equality check for color sources.\n   * @param value1 - First color source\n   * @param value2 - Second color source\n   * @returns `true` if the color sources are equal, `false` otherwise.\n   */\n  _isSourceEqual(value1, value2) {\n    const type1 = typeof value1;\n    const type2 = typeof value2;\n    if (type1 !== type2) {\n      return false;\n    } else if (type1 === \"number\" || type1 === \"string\" || value1 instanceof Number) {\n      return value1 === value2;\n    } else if (Array.isArray(value1) && Array.isArray(value2) || ArrayBuffer.isView(value1) && ArrayBuffer.isView(value2)) {\n      if (value1.length !== value2.length) {\n        return false;\n      }\n      return value1.every((v, i) => v === value2[i]);\n    } else if (value1 !== null && value2 !== null) {\n      const keys1 = Object.keys(value1);\n      const keys2 = Object.keys(value2);\n      if (keys1.length !== keys2.length) {\n        return false;\n      }\n      return keys1.every((key) => value1[key] === value2[key]);\n    }\n    return value1 === value2;\n  }\n  /**\n   * Convert to a RGBA color object.\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color('white').toRgb(); // returns { r: 1, g: 1, b: 1, a: 1 }\n   */\n  toRgba() {\n    const [r, g, b, a] = this._components;\n    return { r, g, b, a };\n  }\n  /**\n   * Convert to a RGB color object.\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color('white').toRgb(); // returns { r: 1, g: 1, b: 1 }\n   */\n  toRgb() {\n    const [r, g, b] = this._components;\n    return { r, g, b };\n  }\n  /** Convert to a CSS-style rgba string: `rgba(255,255,255,1.0)`. */\n  toRgbaString() {\n    const [r, g, b] = this.toUint8RgbArray();\n    return `rgba(${r},${g},${b},${this.alpha})`;\n  }\n  toUint8RgbArray(out) {\n    const [r, g, b] = this._components;\n    if (!this._arrayRgb) {\n      this._arrayRgb = [];\n    }\n    out = out || this._arrayRgb;\n    out[0] = Math.round(r * 255);\n    out[1] = Math.round(g * 255);\n    out[2] = Math.round(b * 255);\n    return out;\n  }\n  toArray(out) {\n    if (!this._arrayRgba) {\n      this._arrayRgba = [];\n    }\n    out = out || this._arrayRgba;\n    const [r, g, b, a] = this._components;\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    out[3] = a;\n    return out;\n  }\n  toRgbArray(out) {\n    if (!this._arrayRgb) {\n      this._arrayRgb = [];\n    }\n    out = out || this._arrayRgb;\n    const [r, g, b] = this._components;\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    return out;\n  }\n  /**\n   * Convert to a hexadecimal number.\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color('white').toNumber(); // returns 16777215\n   */\n  toNumber() {\n    return this._int;\n  }\n  /**\n   * Convert to a BGR number\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color(0xffcc99).toBgrNumber(); // returns 0x99ccff\n   */\n  toBgrNumber() {\n    const [r, g, b] = this.toUint8RgbArray();\n    return (b << 16) + (g << 8) + r;\n  }\n  /**\n   * Convert to a hexadecimal number in little endian format (e.g., BBGGRR).\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color(0xffcc99).toLittleEndianNumber(); // returns 0x99ccff\n   * @returns {number} - The color as a number in little endian format.\n   */\n  toLittleEndianNumber() {\n    const value = this._int;\n    return (value >> 16) + (value & 65280) + ((value & 255) << 16);\n  }\n  /**\n   * Multiply with another color. This action is destructive, and will\n   * override the previous `value` property to be `null`.\n   * @param {ColorSource} value - The color to multiply by.\n   */\n  multiply(value) {\n    const [r, g, b, a] = _Color._temp.setValue(value)._components;\n    this._components[0] *= r;\n    this._components[1] *= g;\n    this._components[2] *= b;\n    this._components[3] *= a;\n    this._refreshInt();\n    this._value = null;\n    return this;\n  }\n  /**\n   * Converts color to a premultiplied alpha format. This action is destructive, and will\n   * override the previous `value` property to be `null`.\n   * @param alpha - The alpha to multiply by.\n   * @param {boolean} [applyToRGB=true] - Whether to premultiply RGB channels.\n   * @returns {Color} - Itself.\n   */\n  premultiply(alpha, applyToRGB = true) {\n    if (applyToRGB) {\n      this._components[0] *= alpha;\n      this._components[1] *= alpha;\n      this._components[2] *= alpha;\n    }\n    this._components[3] = alpha;\n    this._refreshInt();\n    this._value = null;\n    return this;\n  }\n  /**\n   * Premultiplies alpha with current color.\n   * @param {number} alpha - The alpha to multiply by.\n   * @param {boolean} [applyToRGB=true] - Whether to premultiply RGB channels.\n   * @returns {number} tint multiplied by alpha\n   */\n  toPremultiplied(alpha, applyToRGB = true) {\n    if (alpha === 1) {\n      return (255 << 24) + this._int;\n    }\n    if (alpha === 0) {\n      return applyToRGB ? 0 : this._int;\n    }\n    let r = this._int >> 16 & 255;\n    let g = this._int >> 8 & 255;\n    let b = this._int & 255;\n    if (applyToRGB) {\n      r = r * alpha + 0.5 | 0;\n      g = g * alpha + 0.5 | 0;\n      b = b * alpha + 0.5 | 0;\n    }\n    return (alpha * 255 << 24) + (r << 16) + (g << 8) + b;\n  }\n  /**\n   * Convert to a hexidecimal string.\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color('white').toHex(); // returns \"#ffffff\"\n   */\n  toHex() {\n    const hexString = this._int.toString(16);\n    return `#${\"000000\".substring(0, 6 - hexString.length) + hexString}`;\n  }\n  /**\n   * Convert to a hexidecimal string with alpha.\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color('white').toHexa(); // returns \"#ffffffff\"\n   */\n  toHexa() {\n    const alphaValue = Math.round(this._components[3] * 255);\n    const alphaString = alphaValue.toString(16);\n    return this.toHex() + \"00\".substring(0, 2 - alphaString.length) + alphaString;\n  }\n  /**\n   * Set alpha, suitable for chaining.\n   * @param alpha\n   */\n  setAlpha(alpha) {\n    this._components[3] = this._clamp(alpha);\n    return this;\n  }\n  /**\n   * Normalize the input value into rgba\n   * @param value - Input value\n   */\n  _normalize(value) {\n    let r;\n    let g;\n    let b;\n    let a;\n    if ((typeof value === \"number\" || value instanceof Number) && value >= 0 && value <= 16777215) {\n      const int = value;\n      r = (int >> 16 & 255) / 255;\n      g = (int >> 8 & 255) / 255;\n      b = (int & 255) / 255;\n      a = 1;\n    } else if ((Array.isArray(value) || value instanceof Float32Array) && value.length >= 3 && value.length <= 4) {\n      value = this._clamp(value);\n      [r, g, b, a = 1] = value;\n    } else if ((value instanceof Uint8Array || value instanceof Uint8ClampedArray) && value.length >= 3 && value.length <= 4) {\n      value = this._clamp(value, 0, 255);\n      [r, g, b, a = 255] = value;\n      r /= 255;\n      g /= 255;\n      b /= 255;\n      a /= 255;\n    } else if (typeof value === \"string\" || typeof value === \"object\") {\n      if (typeof value === \"string\") {\n        const match = _Color.HEX_PATTERN.exec(value);\n        if (match) {\n          value = `#${match[2]}`;\n        }\n      }\n      const color = colord(value);\n      if (color.isValid()) {\n        ({ r, g, b, a } = color.rgba);\n        r /= 255;\n        g /= 255;\n        b /= 255;\n      }\n    }\n    if (r !== void 0) {\n      this._components[0] = r;\n      this._components[1] = g;\n      this._components[2] = b;\n      this._components[3] = a;\n      this._refreshInt();\n    } else {\n      throw new Error(`Unable to convert color ${value}`);\n    }\n  }\n  /** Refresh the internal color rgb number */\n  _refreshInt() {\n    this._clamp(this._components);\n    const [r, g, b] = this._components;\n    this._int = (r * 255 << 16) + (g * 255 << 8) + (b * 255 | 0);\n  }\n  /**\n   * Clamps values to a range. Will override original values\n   * @param value - Value(s) to clamp\n   * @param min - Minimum value\n   * @param max - Maximum value\n   */\n  _clamp(value, min = 0, max = 1) {\n    if (typeof value === \"number\") {\n      return Math.min(Math.max(value, min), max);\n    }\n    value.forEach((v, i) => {\n      value[i] = Math.min(Math.max(v, min), max);\n    });\n    return value;\n  }\n  /**\n   * Check if the value is a color-like object\n   * @param value - Value to check\n   * @returns True if the value is a color-like object\n   * @static\n   * @example\n   * import { Color } from 'pixi.js';\n   * Color.isColorLike('white'); // returns true\n   * Color.isColorLike(0xffffff); // returns true\n   * Color.isColorLike([1, 1, 1]); // returns true\n   */\n  static isColorLike(value) {\n    return typeof value === \"number\" || typeof value === \"string\" || value instanceof Number || value instanceof _Color || Array.isArray(value) || value instanceof Uint8Array || value instanceof Uint8ClampedArray || value instanceof Float32Array || value.r !== void 0 && value.g !== void 0 && value.b !== void 0 || value.r !== void 0 && value.g !== void 0 && value.b !== void 0 && value.a !== void 0 || value.h !== void 0 && value.s !== void 0 && value.l !== void 0 || value.h !== void 0 && value.s !== void 0 && value.l !== void 0 && value.a !== void 0 || value.h !== void 0 && value.s !== void 0 && value.v !== void 0 || value.h !== void 0 && value.s !== void 0 && value.v !== void 0 && value.a !== void 0;\n  }\n};\n/**\n * Default Color object for static uses\n * @example\n * import { Color } from 'pixi.js';\n * Color.shared.setValue(0xffffff).toHex(); // '#ffffff'\n */\n_Color.shared = new _Color();\n/**\n * Temporary Color object for static uses internally.\n * As to not conflict with Color.shared.\n * @ignore\n */\n_Color._temp = new _Color();\n/** Pattern for hex strings */\n// eslint-disable-next-line @typescript-eslint/naming-convention\n_Color.HEX_PATTERN = /^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;\nlet Color = _Color;\n\nexport { Color };\n//# sourceMappingURL=Color.mjs.map\n","\"use strict\";\nconst cullingMixin = {\n  cullArea: null,\n  cullable: false,\n  cullableChildren: true\n};\n\nexport { cullingMixin };\n//# sourceMappingURL=cullingMixin.mjs.map\n","\"use strict\";\nfunction removeItems(arr, startIdx, removeCount) {\n  const length = arr.length;\n  let i;\n  if (startIdx >= length || removeCount === 0) {\n    return;\n  }\n  removeCount = startIdx + removeCount > length ? length - startIdx : removeCount;\n  const len = length - removeCount;\n  for (i = startIdx; i < len; ++i) {\n    arr[i] = arr[i + removeCount];\n  }\n  arr.length = len;\n}\n\nexport { removeItems };\n//# sourceMappingURL=removeItems.mjs.map\n","import { removeItems } from '../../../utils/data/removeItems.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst childrenHelperMixin = {\n  allowChildren: true,\n  /**\n   * Removes all children from this container that are within the begin and end indexes.\n   * @param beginIndex - The beginning position.\n   * @param endIndex - The ending position. Default value is size of the container.\n   * @returns - List of removed children\n   * @memberof scene.Container#\n   */\n  removeChildren(beginIndex = 0, endIndex) {\n    const end = endIndex ?? this.children.length;\n    const range = end - beginIndex;\n    const removed = [];\n    if (range > 0 && range <= end) {\n      for (let i = end - 1; i >= beginIndex; i--) {\n        const child = this.children[i];\n        if (!child)\n          continue;\n        if (this.renderGroup) {\n          this.renderGroup.removeChild(child);\n        }\n        removed.push(child);\n        child.parent = null;\n      }\n      removeItems(this.children, beginIndex, end);\n      for (let i = 0; i < removed.length; ++i) {\n        this.emit(\"childRemoved\", removed[i], this, i);\n        removed[i].emit(\"removed\", this);\n      }\n      return removed;\n    } else if (range === 0 && this.children.length === 0) {\n      return removed;\n    }\n    throw new RangeError(\"removeChildren: numeric values are outside the acceptable range.\");\n  },\n  /**\n   * Removes a child from the specified index position.\n   * @param index - The index to get the child from\n   * @returns The child that was removed.\n   * @memberof scene.Container#\n   */\n  removeChildAt(index) {\n    const child = this.getChildAt(index);\n    return this.removeChild(child);\n  },\n  /**\n   * Returns the child at the specified index\n   * @param index - The index to get the child at\n   * @returns - The child at the given index, if any.\n   * @memberof scene.Container#\n   */\n  getChildAt(index) {\n    if (index < 0 || index >= this.children.length) {\n      throw new Error(`getChildAt: Index (${index}) does not exist.`);\n    }\n    return this.children[index];\n  },\n  /**\n   * Changes the position of an existing child in the container container\n   * @param child - The child Container instance for which you want to change the index number\n   * @param index - The resulting index number for the child container\n   * @memberof scene.Container#\n   */\n  setChildIndex(child, index) {\n    if (index < 0 || index >= this.children.length) {\n      throw new Error(`The index ${index} supplied is out of bounds ${this.children.length}`);\n    }\n    this.getChildIndex(child);\n    this.addChildAt(child, index);\n  },\n  /**\n   * Returns the index position of a child Container instance\n   * @param child - The Container instance to identify\n   * @returns - The index position of the child container to identify\n   * @memberof scene.Container#\n   */\n  getChildIndex(child) {\n    const index = this.children.indexOf(child);\n    if (index === -1) {\n      throw new Error(\"The supplied Container must be a child of the caller\");\n    }\n    return index;\n  },\n  /**\n   * Adds a child to the container at a specified index. If the index is out of bounds an error will be thrown.\n   * If the child is already in this container, it will be moved to the specified index.\n   * @param {Container} child - The child to add.\n   * @param {number} index - The absolute index where the child will be positioned at the end of the operation.\n   * @returns {Container} The child that was added.\n   * @memberof scene.Container#\n   */\n  addChildAt(child, index) {\n    if (!this.allowChildren) {\n      deprecation(v8_0_0, \"addChildAt: Only Containers will be allowed to add children in v8.0.0\");\n    }\n    const { children } = this;\n    if (index < 0 || index > children.length) {\n      throw new Error(`${child}addChildAt: The index ${index} supplied is out of bounds ${children.length}`);\n    }\n    if (child.parent) {\n      const currentIndex = child.parent.children.indexOf(child);\n      if (child.parent === this && currentIndex === index) {\n        return child;\n      }\n      if (currentIndex !== -1) {\n        child.parent.children.splice(currentIndex, 1);\n      }\n    }\n    if (index === children.length) {\n      children.push(child);\n    } else {\n      children.splice(index, 0, child);\n    }\n    child.parent = this;\n    child.didChange = true;\n    child.didViewUpdate = false;\n    child._updateFlags = 15;\n    if (this.renderGroup) {\n      this.renderGroup.addChild(child);\n    }\n    if (this.sortableChildren)\n      this.sortDirty = true;\n    this.emit(\"childAdded\", child, this, index);\n    child.emit(\"added\", this);\n    return child;\n  },\n  /**\n   * Swaps the position of 2 Containers within this container.\n   * @param child - First container to swap\n   * @param child2 - Second container to swap\n   */\n  swapChildren(child, child2) {\n    if (child === child2) {\n      return;\n    }\n    const index1 = this.getChildIndex(child);\n    const index2 = this.getChildIndex(child2);\n    this.children[index1] = child2;\n    this.children[index2] = child;\n  },\n  /**\n   * Remove the Container from its parent Container. If the Container has no parent, do nothing.\n   * @memberof scene.Container#\n   */\n  removeFromParent() {\n    this.parent?.removeChild(this);\n  }\n};\n\nexport { childrenHelperMixin };\n//# sourceMappingURL=childrenHelperMixin.mjs.map\n","\"use strict\";\nclass FilterEffect {\n  constructor(options) {\n    this.pipe = \"filter\";\n    this.priority = 1;\n    this.filters = options?.filters;\n    this.filterArea = options?.filterArea;\n  }\n  destroy() {\n    for (let i = 0; i < this.filters.length; i++) {\n      this.filters[i].destroy();\n    }\n    this.filters = null;\n    this.filterArea = null;\n  }\n}\n\nexport { FilterEffect };\n//# sourceMappingURL=FilterEffect.mjs.map\n","\"use strict\";\nclass Pool {\n  /**\n   * Constructs a new Pool.\n   * @param ClassType - The constructor of the items in the pool.\n   * @param {number} [initialSize] - The initial size of the pool.\n   */\n  constructor(ClassType, initialSize) {\n    this._pool = [];\n    this._count = 0;\n    this._index = 0;\n    this._classType = ClassType;\n    if (initialSize) {\n      this.prepopulate(initialSize);\n    }\n  }\n  /**\n   * Prepopulates the pool with a given number of items.\n   * @param total - The number of items to add to the pool.\n   */\n  prepopulate(total) {\n    for (let i = 0; i < total; i++) {\n      this._pool[this._index++] = new this._classType();\n    }\n    this._count += total;\n  }\n  /**\n   * Gets an item from the pool. Calls the item's `init` method if it exists.\n   * If there are no items left in the pool, a new one will be created.\n   * @param {unknown} [data] - Optional data to pass to the item's constructor.\n   * @returns {T} The item from the pool.\n   */\n  get(data) {\n    let item;\n    if (this._index > 0) {\n      item = this._pool[--this._index];\n    } else {\n      item = new this._classType();\n    }\n    item.init?.(data);\n    return item;\n  }\n  /**\n   * Returns an item to the pool. Calls the item's `reset` method if it exists.\n   * @param {T} item - The item to return to the pool.\n   */\n  return(item) {\n    item.reset?.();\n    this._pool[this._index++] = item;\n  }\n  /**\n   * Gets the number of items in the pool.\n   * @readonly\n   * @member {number}\n   */\n  get totalSize() {\n    return this._count;\n  }\n  /**\n   * Gets the number of items in the pool that are free to use without needing to create more.\n   * @readonly\n   * @member {number}\n   */\n  get totalFree() {\n    return this._index;\n  }\n  /**\n   * Gets the number of items in the pool that are currently in use.\n   * @readonly\n   * @member {number}\n   */\n  get totalUsed() {\n    return this._count - this._index;\n  }\n}\n\nexport { Pool };\n//# sourceMappingURL=Pool.mjs.map\n","import { Pool } from './Pool.mjs';\n\n\"use strict\";\nclass PoolGroupClass {\n  constructor() {\n    /**\n     * A map to store the pools by their class type.\n     * @private\n     */\n    this._poolsByClass = /* @__PURE__ */ new Map();\n  }\n  /**\n   * Prepopulates a specific pool with a given number of items.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} Class - The constructor of the items in the pool.\n   * @param {number} total - The number of items to add to the pool.\n   */\n  prepopulate(Class, total) {\n    const classPool = this.getPool(Class);\n    classPool.prepopulate(total);\n  }\n  /**\n   * Gets an item from a specific pool.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} Class - The constructor of the items in the pool.\n   * @param {unknown} [data] - Optional data to pass to the item's constructor.\n   * @returns {T} The item from the pool.\n   */\n  get(Class, data) {\n    const pool = this.getPool(Class);\n    return pool.get(data);\n  }\n  /**\n   * Returns an item to its respective pool.\n   * @param {PoolItem} item - The item to return to the pool.\n   */\n  return(item) {\n    const pool = this.getPool(item.constructor);\n    pool.return(item);\n  }\n  /**\n   * Gets a specific pool based on the class type.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} ClassType - The constructor of the items in the pool.\n   * @returns {Pool<T>} The pool of the given class type.\n   */\n  getPool(ClassType) {\n    if (!this._poolsByClass.has(ClassType)) {\n      this._poolsByClass.set(ClassType, new Pool(ClassType));\n    }\n    return this._poolsByClass.get(ClassType);\n  }\n  /** gets the usage stats of each pool in the system */\n  stats() {\n    const stats = {};\n    this._poolsByClass.forEach((pool) => {\n      const name = stats[pool._classType.name] ? pool._classType.name + pool._classType.ID : pool._classType.name;\n      stats[name] = {\n        free: pool.totalFree,\n        used: pool.totalUsed,\n        size: pool.totalSize\n      };\n    });\n    return stats;\n  }\n}\nconst BigPool = new PoolGroupClass();\n\nexport { BigPool, PoolGroupClass };\n//# sourceMappingURL=PoolGroup.mjs.map\n","import { extensions, ExtensionType } from '../../extensions/Extensions.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\n\n\"use strict\";\nclass MaskEffectManagerClass {\n  constructor() {\n    /**\n     * @private\n     */\n    this._effectClasses = [];\n    this._tests = [];\n    this._initialized = false;\n  }\n  init() {\n    if (this._initialized)\n      return;\n    this._initialized = true;\n    this._effectClasses.forEach((test) => {\n      this.add({\n        test: test.test,\n        maskClass: test\n      });\n    });\n  }\n  add(test) {\n    this._tests.push(test);\n  }\n  getMaskEffect(item) {\n    if (!this._initialized)\n      this.init();\n    for (let i = 0; i < this._tests.length; i++) {\n      const test = this._tests[i];\n      if (test.test(item)) {\n        return BigPool.get(test.maskClass, item);\n      }\n    }\n    return item;\n  }\n  returnMaskEffect(effect) {\n    BigPool.return(effect);\n  }\n}\nconst MaskEffectManager = new MaskEffectManagerClass();\nextensions.handleByList(ExtensionType.MaskEffect, MaskEffectManager._effectClasses);\n\nexport { MaskEffectManager, MaskEffectManagerClass };\n//# sourceMappingURL=MaskEffectManager.mjs.map\n","import { FilterEffect } from '../../../filters/FilterEffect.mjs';\nimport { MaskEffectManager } from '../../../rendering/mask/MaskEffectManager.mjs';\nimport { BigPool } from '../../../utils/pool/PoolGroup.mjs';\n\n\"use strict\";\nconst effectsMixin = {\n  _mask: null,\n  _filters: null,\n  /**\n   * @todo Needs docs.\n   * @memberof scene.Container#\n   * @type {Array<Effect>}\n   */\n  effects: [],\n  /**\n   * @todo Needs docs.\n   * @param effect - The effect to add.\n   * @memberof scene.Container#\n   * @ignore\n   */\n  addEffect(effect) {\n    const index = this.effects.indexOf(effect);\n    if (index !== -1)\n      return;\n    this.effects.push(effect);\n    this.effects.sort((a, b) => a.priority - b.priority);\n    if (this.renderGroup) {\n      this.renderGroup.structureDidChange = true;\n    }\n    this._updateIsSimple();\n  },\n  /**\n   * @todo Needs docs.\n   * @param effect - The effect to remove.\n   * @memberof scene.Container#\n   * @ignore\n   */\n  removeEffect(effect) {\n    const index = this.effects.indexOf(effect);\n    if (index === -1)\n      return;\n    this.effects.splice(index, 1);\n    if (!this.isRenderGroupRoot && this.renderGroup) {\n      this.renderGroup.structureDidChange = true;\n    }\n    this._updateIsSimple();\n  },\n  set mask(value) {\n    this._mask || (this._mask = { mask: null, effect: null });\n    if (this._mask.mask === value)\n      return;\n    if (this._mask.effect) {\n      this.removeEffect(this._mask.effect);\n      MaskEffectManager.returnMaskEffect(this._mask.effect);\n      this._mask.effect = null;\n    }\n    this._mask.mask = value;\n    if (value === null || value === void 0)\n      return;\n    const effect = MaskEffectManager.getMaskEffect(value);\n    this._mask.effect = effect;\n    this.addEffect(effect);\n  },\n  /**\n   * Sets a mask for the displayObject. A mask is an object that limits the visibility of an\n   * object to the shape of the mask applied to it. In PixiJS a regular mask must be a\n   * {@link Graphics} or a {@link Sprite} object. This allows for much faster masking in canvas as it\n   * utilities shape clipping. Furthermore, a mask of an object must be in the subtree of its parent.\n   * Otherwise, `getLocalBounds` may calculate incorrect bounds, which makes the container's width and height wrong.\n   * To remove a mask, set this property to `null`.\n   *\n   * For sprite mask both alpha and red channel are used. Black mask is the same as transparent mask.\n   * @example\n   * import { Graphics, Sprite } from 'pixi.js';\n   *\n   * const graphics = new Graphics();\n   * graphics.beginFill(0xFF3300);\n   * graphics.drawRect(50, 250, 100, 100);\n   * graphics.endFill();\n   *\n   * const sprite = new Sprite(texture);\n   * sprite.mask = graphics;\n   * @memberof scene.Container#\n   */\n  get mask() {\n    return this._mask?.mask;\n  },\n  set filters(value) {\n    if (!Array.isArray(value) && value)\n      value = [value];\n    value = value;\n    this._filters || (this._filters = { filters: null, effect: null, filterArea: null });\n    const hasFilters = value?.length > 0;\n    const didChange = this._filters.effect && !hasFilters || !this._filters.effect && hasFilters;\n    value = Array.isArray(value) ? value.slice(0) : value;\n    this._filters.filters = Object.freeze(value);\n    if (didChange) {\n      if (hasFilters) {\n        const effect = BigPool.get(FilterEffect);\n        this._filters.effect = effect;\n        this.addEffect(effect);\n      } else {\n        const effect = this._filters.effect;\n        this.removeEffect(effect);\n        effect.filterArea = null;\n        effect.filters = null;\n        this._filters.effect = null;\n        BigPool.return(effect);\n      }\n    }\n    if (hasFilters) {\n      this._filters.effect.filters = value;\n      this._filters.effect.filterArea = this.filterArea;\n    }\n  },\n  /**\n   * Sets the filters for the displayObject.\n   * IMPORTANT: This is a WebGL only feature and will be ignored by the canvas renderer.\n   * To remove filters simply set this property to `'null'`.\n   * @memberof scene.Container#\n   */\n  get filters() {\n    return this._filters?.filters;\n  },\n  set filterArea(value) {\n    this._filters || (this._filters = { filters: null, effect: null, filterArea: null });\n    this._filters.filterArea = value;\n  },\n  /**\n   * The area the filter is applied to. This is used as more of an optimization\n   * rather than figuring out the dimensions of the displayObject each frame you can set this rectangle.\n   *\n   * Also works as an interaction mask.\n   * @memberof scene.Container#\n   */\n  get filterArea() {\n    return this._filters?.filterArea;\n  }\n};\n\nexport { effectsMixin };\n//# sourceMappingURL=effectsMixin.mjs.map\n","import { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst findMixin = {\n  /**\n   * The instance label of the object.\n   * @memberof scene.Container#\n   * @member {string} label\n   */\n  label: null,\n  /**\n   * The instance name of the object.\n   * @deprecated since 8.0.0\n   * @see scene.Container#label\n   * @member {string} name\n   * @memberof scene.Container#\n   */\n  get name() {\n    deprecation(v8_0_0, \"Container.name property has been removed, use Container.label instead\");\n    return this.label;\n  },\n  set name(value) {\n    deprecation(v8_0_0, \"Container.name property has been removed, use Container.label instead\");\n    this.label = value;\n  },\n  /**\n   * @method getChildByName\n   * @deprecated since 8.0.0\n   * @param {string} name - Instance name.\n   * @param {boolean}[deep=false] - Whether to search recursively\n   * @returns {Container} The child with the specified name.\n   * @see scene.Container#getChildByLabel\n   * @memberof scene.Container#\n   */\n  getChildByName(name, deep = false) {\n    return this.getChildByLabel(name, deep);\n  },\n  /**\n   * Returns the first child in the container with the specified label.\n   *\n   * Recursive searches are done in a pre-order traversal.\n   * @memberof scene.Container#\n   * @param {string|RegExp} label - Instance label.\n   * @param {boolean}[deep=false] - Whether to search recursively\n   * @returns {Container} The child with the specified label.\n   */\n  getChildByLabel(label, deep = false) {\n    const children = this.children;\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      if (child.label === label || label instanceof RegExp && label.test(child.label))\n        return child;\n    }\n    if (deep) {\n      for (let i = 0; i < children.length; i++) {\n        const child = children[i];\n        const found = child.getChildByLabel(label, true);\n        if (found) {\n          return found;\n        }\n      }\n    }\n    return null;\n  },\n  /**\n   * Returns all children in the container with the specified label.\n   * @memberof scene.Container#\n   * @param {string|RegExp} label - Instance label.\n   * @param {boolean}[deep=false] - Whether to search recursively\n   * @param {Container[]} [out=[]] - The array to store matching children in.\n   * @returns {Container[]} An array of children with the specified label.\n   */\n  getChildrenByLabel(label, deep = false, out = []) {\n    const children = this.children;\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      if (child.label === label || label instanceof RegExp && label.test(child.label)) {\n        out.push(child);\n      }\n    }\n    if (deep) {\n      for (let i = 0; i < children.length; i++) {\n        children[i].getChildrenByLabel(label, true, out);\n      }\n    }\n    return out;\n  }\n};\n\nexport { findMixin };\n//# sourceMappingURL=findMixin.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Rectangle } from '../../../maths/shapes/Rectangle.mjs';\n\n\"use strict\";\nconst defaultMatrix = new Matrix();\nclass Bounds {\n  constructor(minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity) {\n    /** @default Infinity */\n    this.minX = Infinity;\n    /** @default Infinity */\n    this.minY = Infinity;\n    /** @default -Infinity */\n    this.maxX = -Infinity;\n    /** @default -Infinity */\n    this.maxY = -Infinity;\n    this.matrix = defaultMatrix;\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Checks if bounds are empty.\n   * @returns - True if empty.\n   */\n  isEmpty() {\n    return this.minX > this.maxX || this.minY > this.maxY;\n  }\n  /** The bounding rectangle of the bounds. */\n  get rectangle() {\n    if (!this._rectangle) {\n      this._rectangle = new Rectangle();\n    }\n    const rectangle = this._rectangle;\n    if (this.minX > this.maxX || this.minY > this.maxY) {\n      rectangle.x = 0;\n      rectangle.y = 0;\n      rectangle.width = 0;\n      rectangle.height = 0;\n    } else {\n      rectangle.copyFromBounds(this);\n    }\n    return rectangle;\n  }\n  /** Clears the bounds and resets. */\n  clear() {\n    this.minX = Infinity;\n    this.minY = Infinity;\n    this.maxX = -Infinity;\n    this.maxY = -Infinity;\n    this.matrix = defaultMatrix;\n    return this;\n  }\n  /**\n   * Sets the bounds.\n   * @param x0 - left X of frame\n   * @param y0 - top Y of frame\n   * @param x1 - right X of frame\n   * @param y1 - bottom Y of frame\n   */\n  set(x0, y0, x1, y1) {\n    this.minX = x0;\n    this.minY = y0;\n    this.maxX = x1;\n    this.maxY = y1;\n  }\n  /**\n   * Adds sprite frame\n   * @param x0 - left X of frame\n   * @param y0 - top Y of frame\n   * @param x1 - right X of frame\n   * @param y1 - bottom Y of frame\n   * @param matrix\n   */\n  addFrame(x0, y0, x1, y1, matrix) {\n    matrix || (matrix = this.matrix);\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    let minX = this.minX;\n    let minY = this.minY;\n    let maxX = this.maxX;\n    let maxY = this.maxY;\n    let x = a * x0 + c * y0 + tx;\n    let y = b * x0 + d * y0 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x1 + c * y0 + tx;\n    y = b * x1 + d * y0 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x0 + c * y1 + tx;\n    y = b * x0 + d * y1 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x1 + c * y1 + tx;\n    y = b * x1 + d * y1 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Adds a rectangle to the bounds.\n   * @param rect - The rectangle to be added.\n   * @param matrix - The matrix to apply to the bounds.\n   */\n  addRect(rect, matrix) {\n    this.addFrame(rect.x, rect.y, rect.x + rect.width, rect.y + rect.height, matrix);\n  }\n  /**\n   * Adds other {@link Bounds}.\n   * @param bounds - The Bounds to be added\n   * @param matrix\n   */\n  addBounds(bounds, matrix) {\n    this.addFrame(bounds.minX, bounds.minY, bounds.maxX, bounds.maxY, matrix);\n  }\n  /**\n   * Adds other Bounds, masked with Bounds.\n   * @param mask - The Bounds to be added.\n   */\n  addBoundsMask(mask) {\n    this.minX = this.minX > mask.minX ? this.minX : mask.minX;\n    this.minY = this.minY > mask.minY ? this.minY : mask.minY;\n    this.maxX = this.maxX < mask.maxX ? this.maxX : mask.maxX;\n    this.maxY = this.maxY < mask.maxY ? this.maxY : mask.maxY;\n  }\n  /**\n   * Adds other Bounds, multiplied with matrix.\n   * @param matrix - The matrix to apply to the bounds.\n   */\n  applyMatrix(matrix) {\n    const minX = this.minX;\n    const minY = this.minY;\n    const maxX = this.maxX;\n    const maxY = this.maxY;\n    const { a, b, c, d, tx, ty } = matrix;\n    let x = a * minX + c * minY + tx;\n    let y = b * minX + d * minY + ty;\n    this.minX = x;\n    this.minY = y;\n    this.maxX = x;\n    this.maxY = y;\n    x = a * maxX + c * minY + tx;\n    y = b * maxX + d * minY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n    x = a * minX + c * maxY + tx;\n    y = b * minX + d * maxY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n    x = a * maxX + c * maxY + tx;\n    y = b * maxX + d * maxY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n  }\n  /**\n   * Resizes the bounds object to include the given rectangle.\n   * @param rect - The rectangle to be included.\n   */\n  fit(rect) {\n    if (this.minX < rect.left)\n      this.minX = rect.left;\n    if (this.maxX > rect.right)\n      this.maxX = rect.right;\n    if (this.minY < rect.top)\n      this.minY = rect.top;\n    if (this.maxY > rect.bottom)\n      this.maxY = rect.bottom;\n    return this;\n  }\n  /**\n   * Resizes the bounds object to include the given bounds.\n   * @param left - The left value of the bounds.\n   * @param right - The right value of the bounds.\n   * @param top - The top value of the bounds.\n   * @param bottom - The bottom value of the bounds.\n   */\n  fitBounds(left, right, top, bottom) {\n    if (this.minX < left)\n      this.minX = left;\n    if (this.maxX > right)\n      this.maxX = right;\n    if (this.minY < top)\n      this.minY = top;\n    if (this.maxY > bottom)\n      this.maxY = bottom;\n    return this;\n  }\n  /**\n   * Pads bounds object, making it grow in all directions.\n   * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n   * @param paddingX - The horizontal padding amount.\n   * @param paddingY - The vertical padding amount.\n   */\n  pad(paddingX, paddingY = paddingX) {\n    this.minX -= paddingX;\n    this.maxX += paddingX;\n    this.minY -= paddingY;\n    this.maxY += paddingY;\n    return this;\n  }\n  /** Ceils the bounds. */\n  ceil() {\n    this.minX = Math.floor(this.minX);\n    this.minY = Math.floor(this.minY);\n    this.maxX = Math.ceil(this.maxX);\n    this.maxY = Math.ceil(this.maxY);\n    return this;\n  }\n  /** Clones the bounds. */\n  clone() {\n    return new Bounds(this.minX, this.minY, this.maxX, this.maxY);\n  }\n  /**\n   * Scales the bounds by the given values\n   * @param x - The X value to scale by.\n   * @param y - The Y value to scale by.\n   */\n  scale(x, y = x) {\n    this.minX *= x;\n    this.minY *= y;\n    this.maxX *= x;\n    this.maxY *= y;\n    return this;\n  }\n  /** the x value of the bounds. */\n  get x() {\n    return this.minX;\n  }\n  set x(value) {\n    const width = this.maxX - this.minX;\n    this.minX = value;\n    this.maxX = value + width;\n  }\n  /** the y value of the bounds. */\n  get y() {\n    return this.minY;\n  }\n  set y(value) {\n    const height = this.maxY - this.minY;\n    this.minY = value;\n    this.maxY = value + height;\n  }\n  /** the width value of the bounds. */\n  get width() {\n    return this.maxX - this.minX;\n  }\n  set width(value) {\n    this.maxX = this.minX + value;\n  }\n  /** the height value of the bounds. */\n  get height() {\n    return this.maxY - this.minY;\n  }\n  set height(value) {\n    this.maxY = this.minY + value;\n  }\n  /** the left value of the bounds. */\n  get left() {\n    return this.minX;\n  }\n  /** the right value of the bounds. */\n  get right() {\n    return this.maxX;\n  }\n  /** the top value of the bounds. */\n  get top() {\n    return this.minY;\n  }\n  /** the bottom value of the bounds. */\n  get bottom() {\n    return this.maxY;\n  }\n  /** Is the bounds positive. */\n  get isPositive() {\n    return this.maxX - this.minX > 0 && this.maxY - this.minY > 0;\n  }\n  get isValid() {\n    return this.minX + this.minY !== Infinity;\n  }\n  /**\n   * Adds screen vertices from array\n   * @param vertexData - calculated vertices\n   * @param beginOffset - begin offset\n   * @param endOffset - end offset, excluded\n   * @param matrix\n   */\n  addVertexData(vertexData, beginOffset, endOffset, matrix) {\n    let minX = this.minX;\n    let minY = this.minY;\n    let maxX = this.maxX;\n    let maxY = this.maxY;\n    matrix || (matrix = this.matrix);\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    for (let i = beginOffset; i < endOffset; i += 2) {\n      const localX = vertexData[i];\n      const localY = vertexData[i + 1];\n      const x = a * localX + c * localY + tx;\n      const y = b * localX + d * localY + ty;\n      minX = x < minX ? x : minX;\n      minY = y < minY ? y : minY;\n      maxX = x > maxX ? x : maxX;\n      maxY = y > maxY ? y : maxY;\n    }\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Checks if the point is contained within the bounds.\n   * @param x - x coordinate\n   * @param y - y coordinate\n   */\n  containsPoint(x, y) {\n    if (this.minX <= x && this.minY <= y && this.maxX >= x && this.maxY >= y) {\n      return true;\n    }\n    return false;\n  }\n  toString() {\n    return `[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`;\n  }\n}\n\nexport { Bounds };\n//# sourceMappingURL=Bounds.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Pool } from '../../../../utils/pool/Pool.mjs';\nimport { Bounds } from '../Bounds.mjs';\n\n\"use strict\";\nconst matrixPool = new Pool(Matrix);\nconst boundsPool = new Pool(Bounds);\n\nexport { boundsPool, matrixPool };\n//# sourceMappingURL=matrixAndBoundsPool.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { matrixPool, boundsPool } from './utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nfunction getGlobalBounds(target, skipUpdateTransform, bounds) {\n  bounds.clear();\n  let parentTransform;\n  let pooledMatrix;\n  if (target.parent) {\n    if (!skipUpdateTransform) {\n      pooledMatrix = matrixPool.get().identity();\n      parentTransform = updateTransformBackwards(target, pooledMatrix);\n    } else {\n      parentTransform = target.parent.worldTransform;\n    }\n  } else {\n    parentTransform = Matrix.IDENTITY;\n  }\n  _getGlobalBounds(target, bounds, parentTransform, skipUpdateTransform);\n  if (pooledMatrix) {\n    matrixPool.return(pooledMatrix);\n  }\n  if (!bounds.isValid) {\n    bounds.set(0, 0, 0, 0);\n  }\n  return bounds;\n}\nfunction _getGlobalBounds(target, bounds, parentTransform, skipUpdateTransform) {\n  if (!target.visible || !target.measurable)\n    return;\n  let worldTransform;\n  if (!skipUpdateTransform) {\n    target.updateLocalTransform();\n    worldTransform = matrixPool.get();\n    worldTransform.appendFrom(target.localTransform, parentTransform);\n  } else {\n    worldTransform = target.worldTransform;\n  }\n  const parentBounds = bounds;\n  const preserveBounds = !!target.effects.length;\n  if (preserveBounds) {\n    bounds = boundsPool.get().clear();\n  }\n  if (target.boundsArea) {\n    bounds.addRect(target.boundsArea, worldTransform);\n  } else {\n    if (target.addBounds) {\n      bounds.matrix = worldTransform;\n      target.addBounds(bounds);\n    }\n    for (let i = 0; i < target.children.length; i++) {\n      _getGlobalBounds(target.children[i], bounds, worldTransform, skipUpdateTransform);\n    }\n  }\n  if (preserveBounds) {\n    for (let i = 0; i < target.effects.length; i++) {\n      target.effects[i].addBounds?.(bounds);\n    }\n    parentBounds.addBounds(bounds, Matrix.IDENTITY);\n    boundsPool.return(bounds);\n  }\n  if (!skipUpdateTransform) {\n    matrixPool.return(worldTransform);\n  }\n}\nfunction updateTransformBackwards(target, parentTransform) {\n  const parent = target.parent;\n  if (parent) {\n    updateTransformBackwards(parent, parentTransform);\n    parent.updateLocalTransform();\n    parentTransform.append(parent.localTransform);\n  }\n  return parentTransform;\n}\n\nexport { _getGlobalBounds, getGlobalBounds, updateTransformBackwards };\n//# sourceMappingURL=getGlobalBounds.mjs.map\n","\"use strict\";\nlet warnCount = 0;\nconst maxWarnings = 500;\nfunction warn(...args) {\n  if (warnCount === maxWarnings)\n    return;\n  warnCount++;\n  if (warnCount === maxWarnings) {\n    console.warn(\"PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS.\");\n  } else {\n    console.warn(\"PixiJS Warning: \", ...args);\n  }\n}\n\nexport { warn };\n//# sourceMappingURL=warn.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\nimport { matrixPool, boundsPool } from './utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nfunction getLocalBounds(target, bounds, relativeMatrix) {\n  bounds.clear();\n  relativeMatrix || (relativeMatrix = Matrix.IDENTITY);\n  _getLocalBounds(target, bounds, relativeMatrix, target, true);\n  if (!bounds.isValid) {\n    bounds.set(0, 0, 0, 0);\n  }\n  return bounds;\n}\nfunction _getLocalBounds(target, bounds, parentTransform, rootContainer, isRoot) {\n  let relativeTransform;\n  if (!isRoot) {\n    if (!target.visible || !target.measurable)\n      return;\n    target.updateLocalTransform();\n    const localTransform = target.localTransform;\n    relativeTransform = matrixPool.get();\n    relativeTransform.appendFrom(localTransform, parentTransform);\n  } else {\n    relativeTransform = matrixPool.get();\n    relativeTransform = parentTransform.copyTo(relativeTransform);\n  }\n  const parentBounds = bounds;\n  const preserveBounds = !!target.effects.length;\n  if (preserveBounds) {\n    bounds = boundsPool.get().clear();\n  }\n  if (target.boundsArea) {\n    bounds.addRect(target.boundsArea, relativeTransform);\n  } else {\n    if (target.renderPipeId) {\n      bounds.matrix = relativeTransform;\n      target.addBounds(bounds);\n    }\n    const children = target.children;\n    for (let i = 0; i < children.length; i++) {\n      _getLocalBounds(children[i], bounds, relativeTransform, rootContainer, false);\n    }\n  }\n  if (preserveBounds) {\n    for (let i = 0; i < target.effects.length; i++) {\n      target.effects[i].addLocalBounds?.(bounds, rootContainer);\n    }\n    parentBounds.addBounds(bounds, Matrix.IDENTITY);\n    boundsPool.return(bounds);\n  }\n  matrixPool.return(relativeTransform);\n}\nfunction getParent(target, root, matrix) {\n  const parent = target.parent;\n  if (!parent) {\n    warn(\"Item is not inside the root container\");\n    return;\n  }\n  if (parent !== root) {\n    getParent(parent, root, matrix);\n    parent.updateLocalTransform();\n    matrix.append(parent.localTransform);\n  }\n}\n\nexport { getLocalBounds, getParent };\n//# sourceMappingURL=getLocalBounds.mjs.map\n","\"use strict\";\nfunction checkChildrenDidChange(container, previousData) {\n  const children = container.children;\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i];\n    const changeId = (child.uid & 255) << 24 | child._didChangeId & 16777215;\n    if (previousData.data[previousData.index] !== changeId) {\n      previousData.data[previousData.index] = changeId;\n      previousData.didChange = true;\n    }\n    previousData.index++;\n    if (child.children.length) {\n      checkChildrenDidChange(child, previousData);\n    }\n  }\n  return previousData.didChange;\n}\n\nexport { checkChildrenDidChange };\n//# sourceMappingURL=checkChildrenDidChange.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Bounds } from '../bounds/Bounds.mjs';\nimport { getGlobalBounds } from '../bounds/getGlobalBounds.mjs';\nimport { getLocalBounds } from '../bounds/getLocalBounds.mjs';\nimport { checkChildrenDidChange } from '../utils/checkChildrenDidChange.mjs';\n\n\"use strict\";\nconst tempMatrix = new Matrix();\nconst measureMixin = {\n  _localBoundsCacheId: -1,\n  _localBoundsCacheData: null,\n  _setWidth(value, localWidth) {\n    const sign = Math.sign(this.scale.x) || 1;\n    if (localWidth !== 0) {\n      this.scale.x = value / localWidth * sign;\n    } else {\n      this.scale.x = sign;\n    }\n  },\n  _setHeight(value, localHeight) {\n    const sign = Math.sign(this.scale.y) || 1;\n    if (localHeight !== 0) {\n      this.scale.y = value / localHeight * sign;\n    } else {\n      this.scale.y = sign;\n    }\n  },\n  /**\n   * Retrieves the local bounds of the container as a Bounds object.\n   * @returns - The bounding area.\n   * @memberof scene.Container#\n   */\n  getLocalBounds() {\n    if (!this._localBoundsCacheData) {\n      this._localBoundsCacheData = {\n        data: [],\n        index: 1,\n        didChange: false,\n        localBounds: new Bounds()\n      };\n    }\n    const localBoundsCacheData = this._localBoundsCacheData;\n    localBoundsCacheData.index = 1;\n    localBoundsCacheData.didChange = false;\n    if (localBoundsCacheData.data[0] !== this._didChangeId >> 12) {\n      localBoundsCacheData.didChange = true;\n      localBoundsCacheData.data[0] = this._didChangeId >> 12;\n    }\n    checkChildrenDidChange(this, localBoundsCacheData);\n    if (localBoundsCacheData.didChange) {\n      getLocalBounds(this, localBoundsCacheData.localBounds, tempMatrix);\n    }\n    return localBoundsCacheData.localBounds;\n  },\n  /**\n   * Calculates and returns the (world) bounds of the display object as a [Rectangle]{@link Rectangle}.\n   * @param skipUpdate - Setting to `true` will stop the transforms of the scene graph from\n   *  being updated. This means the calculation returned MAY be out of date BUT will give you a\n   *  nice performance boost.\n   * @param bounds - Optional bounds to store the result of the bounds calculation.\n   * @returns - The minimum axis-aligned rectangle in world space that fits around this object.\n   * @memberof scene.Container#\n   */\n  getBounds(skipUpdate, bounds) {\n    return getGlobalBounds(this, skipUpdate, bounds || new Bounds());\n  }\n};\n\nexport { measureMixin };\n//# sourceMappingURL=measureMixin.mjs.map\n","\"use strict\";\nconst onRenderMixin = {\n  _onRender: null,\n  set onRender(func) {\n    const renderGroup = this.renderGroup;\n    if (!func) {\n      if (this._onRender) {\n        renderGroup?.removeOnRender(this);\n      }\n      this._onRender = null;\n      return;\n    }\n    if (!this._onRender) {\n      renderGroup?.addOnRender(this);\n    }\n    this._onRender = func;\n  },\n  /**\n   * This callback is used when the container is rendered. This is where you should add your custom\n   * logic that is needed to be run every frame.\n   *\n   * In v7 many users used `updateTransform` for this, however the way v8 renders objects is different\n   * and \"updateTransform\" is no longer called every frame\n   * @example\n   * const container = new Container();\n   * container.onRender = () => {\n   *    container.rotation += 0.01;\n   * };\n   * @memberof scene.Container#\n   */\n  get onRender() {\n    return this._onRender;\n  }\n};\n\nexport { onRenderMixin };\n//# sourceMappingURL=onRenderMixin.mjs.map\n","\"use strict\";\nconst sortMixin = {\n  _zIndex: 0,\n  /**\n   * Should children be sorted by zIndex at the next render call.\n   *\n   * Will get automatically set to true if a new child is added, or if a child's zIndex changes.\n   * @type {boolean}\n   * @memberof scene.Container#\n   */\n  sortDirty: false,\n  /**\n   * If set to true, the container will sort its children by `zIndex` value\n   * when the next render is called, or manually if `sortChildren()` is called.\n   *\n   * This actually changes the order of elements in the array, so should be treated\n   * as a basic solution that is not performant compared to other solutions,\n   * such as {@link https://github.com/pixijs/layers PixiJS Layers}\n   *\n   * Also be aware of that this may not work nicely with the `addChildAt()` function,\n   * as the `zIndex` sorting may cause the child to automatically sorted to another position.\n   * @type {boolean}\n   * @memberof scene.Container#\n   */\n  sortableChildren: false,\n  /**\n   * The zIndex of the container.\n   *\n   * Setting this value, will automatically set the parent to be sortable. Children will be automatically\n   * sorted by zIndex value; a higher value will mean it will be moved towards the end of the array,\n   * and thus rendered on top of other display objects within the same container.\n   * @see scene.Container#sortableChildren\n   * @memberof scene.Container#\n   */\n  get zIndex() {\n    return this._zIndex;\n  },\n  set zIndex(value) {\n    if (this._zIndex === value)\n      return;\n    this._zIndex = value;\n    this.depthOfChildModified();\n  },\n  depthOfChildModified() {\n    if (this.parent) {\n      this.parent.sortableChildren = true;\n      this.parent.sortDirty = true;\n    }\n    if (this.renderGroup && !this.isRenderGroupRoot) {\n      this.renderGroup.structureDidChange = true;\n    }\n  },\n  /**\n   * Sorts children by zIndex.\n   * @memberof scene.Container#\n   */\n  sortChildren() {\n    if (!this.sortDirty)\n      return;\n    this.sortDirty = false;\n    this.children.sort(sortChildren);\n  }\n};\nfunction sortChildren(a, b) {\n  return a._zIndex - b._zIndex;\n}\n\nexport { sortMixin };\n//# sourceMappingURL=sortMixin.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Point } from '../../../maths/point/Point.mjs';\nimport { updateTransformBackwards } from '../bounds/getGlobalBounds.mjs';\n\n\"use strict\";\nconst toLocalGlobalMixin = {\n  /**\n   * Returns the global position of the container.\n   * @param point - The optional point to write the global value to.\n   * @param skipUpdate - Should we skip the update transform.\n   * @returns - The updated point.\n   * @memberof scene.Container#\n   */\n  getGlobalPosition(point = new Point(), skipUpdate = false) {\n    if (this.parent) {\n      this.parent.toGlobal(this._position, point, skipUpdate);\n    } else {\n      point.x = this._position.x;\n      point.y = this._position.y;\n    }\n    return point;\n  },\n  /**\n   * Calculates the global position of the container.\n   * @param position - The world origin to calculate from.\n   * @param point - A Point object in which to store the value, optional\n   *  (otherwise will create a new Point).\n   * @param skipUpdate - Should we skip the update transform.\n   * @returns - A point object representing the position of this object.\n   * @memberof scene.Container#\n   */\n  toGlobal(position, point, skipUpdate = false) {\n    if (!skipUpdate) {\n      this.updateLocalTransform();\n      const globalMatrix = updateTransformBackwards(this, new Matrix());\n      globalMatrix.append(this.localTransform);\n      return globalMatrix.apply(position, point);\n    }\n    return this.worldTransform.apply(position, point);\n  },\n  /**\n   * Calculates the local position of the container relative to another point.\n   * @param position - The world origin to calculate from.\n   * @param from - The Container to calculate the global position from.\n   * @param point - A Point object in which to store the value, optional\n   *  (otherwise will create a new Point).\n   * @param skipUpdate - Should we skip the update transform\n   * @returns - A point object representing the position of this object\n   * @memberof scene.Container#\n   */\n  toLocal(position, from, point, skipUpdate) {\n    if (from) {\n      position = from.toGlobal(position, point, skipUpdate);\n    }\n    if (!skipUpdate) {\n      this.updateLocalTransform();\n      const globalMatrix = updateTransformBackwards(this, new Matrix());\n      globalMatrix.append(this.localTransform);\n      return globalMatrix.applyInverse(position, point);\n    }\n    return this.worldTransform.applyInverse(position, point);\n  }\n};\n\nexport { toLocalGlobalMixin };\n//# sourceMappingURL=toLocalGlobalMixin.mjs.map\n","import { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nclass InstructionSet {\n  constructor() {\n    /** a unique id for this instruction set used through the renderer */\n    this.uid = uid(\"instructionSet\");\n    /** the array of instructions */\n    this.instructions = [];\n    /** the actual size of the array (any instructions passed this should be ignored) */\n    this.instructionSize = 0;\n  }\n  /** reset the instruction set so it can be reused set size back to 0 */\n  reset() {\n    this.instructionSize = 0;\n  }\n  /**\n   * Add an instruction to the set\n   * @param instruction - add an instruction to the set\n   */\n  add(instruction) {\n    this.instructions[this.instructionSize++] = instruction;\n  }\n  /**\n   * Log the instructions to the console (for debugging)\n   * @internal\n   * @ignore\n   */\n  log() {\n    this.instructions.length = this.instructionSize;\n    console.table(this.instructions, [\"type\", \"action\"]);\n  }\n}\n\nexport { InstructionSet };\n//# sourceMappingURL=InstructionSet.mjs.map\n","import { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { InstructionSet } from '../../rendering/renderers/shared/instructions/InstructionSet.mjs';\n\n\"use strict\";\nclass RenderGroup {\n  constructor(root) {\n    this.renderPipeId = \"renderGroup\";\n    this.root = null;\n    this.canBundle = false;\n    this.renderGroupParent = null;\n    this.renderGroupChildren = [];\n    this._children = [];\n    this.worldTransform = new Matrix();\n    this.worldColorAlpha = 4294967295;\n    this.worldColor = 16777215;\n    this.worldAlpha = 1;\n    // these updates are transform changes..\n    this.childrenToUpdate = /* @__PURE__ */ Object.create(null);\n    this.updateTick = 0;\n    // these update are renderable changes..\n    this.childrenRenderablesToUpdate = { list: [], index: 0 };\n    // other\n    this.structureDidChange = true;\n    this.instructionSet = new InstructionSet();\n    this._onRenderContainers = [];\n    this.root = root;\n    this.addChild(root);\n  }\n  get localTransform() {\n    return this.root.localTransform;\n  }\n  addRenderGroupChild(renderGroupChild) {\n    if (renderGroupChild.renderGroupParent) {\n      renderGroupChild.renderGroupParent._removeRenderGroupChild(renderGroupChild);\n    }\n    renderGroupChild.renderGroupParent = this;\n    this.onChildUpdate(renderGroupChild.root);\n    this.renderGroupChildren.push(renderGroupChild);\n  }\n  _removeRenderGroupChild(renderGroupChild) {\n    if (renderGroupChild.root.didChange) {\n      this._removeChildFromUpdate(renderGroupChild.root);\n    }\n    const index = this.renderGroupChildren.indexOf(renderGroupChild);\n    if (index > -1) {\n      this.renderGroupChildren.splice(index, 1);\n    }\n    renderGroupChild.renderGroupParent = null;\n  }\n  addChild(child) {\n    this.structureDidChange = true;\n    if (child !== this.root) {\n      this._children.push(child);\n      child.updateTick = -1;\n      if (child.parent === this.root) {\n        child.relativeRenderGroupDepth = 1;\n      } else {\n        child.relativeRenderGroupDepth = child.parent.relativeRenderGroupDepth + 1;\n      }\n    }\n    if (child.renderGroup) {\n      if (child.renderGroup.root === child) {\n        this.addRenderGroupChild(child.renderGroup);\n        return;\n      }\n    } else {\n      child.renderGroup = this;\n      child.didChange = true;\n    }\n    if (child._onRender) {\n      if (!child.isRenderGroupRoot) {\n        this.addOnRender(child);\n      } else if (child.renderGroup.root === child) {\n        this.addOnRender(child);\n      }\n    }\n    const children = child.children;\n    if (!child.isRenderGroupRoot) {\n      this.onChildUpdate(child);\n    }\n    for (let i = 0; i < children.length; i++) {\n      this.addChild(children[i]);\n    }\n  }\n  removeChild(child) {\n    this.structureDidChange = true;\n    if (child._onRender) {\n      if (!child.isRenderGroupRoot) {\n        this.removeOnRender(child);\n      } else if (child.renderGroup.root === child) {\n        this.removeOnRender(child);\n      }\n    }\n    if (child.renderGroup.root !== child) {\n      const children = child.children;\n      for (let i = 0; i < children.length; i++) {\n        this.removeChild(children[i]);\n      }\n      if (child.didChange) {\n        child.renderGroup._removeChildFromUpdate(child);\n      }\n      child.renderGroup = null;\n    } else {\n      this._removeRenderGroupChild(child.renderGroup);\n    }\n    const index = this._children.indexOf(child);\n    if (index > -1) {\n      this._children.splice(index, 1);\n    }\n  }\n  onChildUpdate(child) {\n    let childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth];\n    if (!childrenToUpdate) {\n      childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth] = {\n        index: 0,\n        list: []\n      };\n    }\n    childrenToUpdate.list[childrenToUpdate.index++] = child;\n  }\n  // SHOULD THIS BE HERE?\n  updateRenderable(container) {\n    if (container.globalDisplayStatus < 7)\n      return;\n    container.didViewUpdate = false;\n    this.instructionSet.renderPipes[container.renderPipeId].updateRenderable(container);\n  }\n  onChildViewUpdate(child) {\n    this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++] = child;\n  }\n  _removeChildFromUpdate(child) {\n    const childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth];\n    if (!childrenToUpdate) {\n      return;\n    }\n    const index = childrenToUpdate.list.indexOf(child);\n    if (index > -1) {\n      childrenToUpdate.list.splice(index, 1);\n    }\n    childrenToUpdate.index--;\n  }\n  get isRenderable() {\n    return this.root.localDisplayStatus === 7 && this.worldAlpha > 0;\n  }\n  /**\n   * adding a container to the onRender list will make sure the user function\n   * passed in to the user defined 'onRender` callBack\n   * @param container - the container to add to the onRender list\n   */\n  addOnRender(container) {\n    this._onRenderContainers.push(container);\n  }\n  removeOnRender(container) {\n    this._onRenderContainers.splice(this._onRenderContainers.indexOf(container), 1);\n  }\n  runOnRender() {\n    for (let i = 0; i < this._onRenderContainers.length; i++) {\n      this._onRenderContainers[i]._onRender();\n    }\n  }\n}\n\nexport { RenderGroup };\n//# sourceMappingURL=RenderGroup.mjs.map\n","\"use strict\";\nfunction assignWithIgnore(target, options, ignore = {}) {\n  for (const key in options) {\n    if (!ignore[key] && options[key] !== void 0) {\n      target[key] = options[key];\n    }\n  }\n}\n\nexport { assignWithIgnore };\n//# sourceMappingURL=assignWithIgnore.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../color/Color.mjs';\nimport { cullingMixin } from '../../culling/cullingMixin.mjs';\nimport { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { RAD_TO_DEG, DEG_TO_RAD } from '../../maths/misc/const.mjs';\nimport { ObservablePoint } from '../../maths/point/ObservablePoint.mjs';\nimport { uid } from '../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { childrenHelperMixin } from './container-mixins/childrenHelperMixin.mjs';\nimport { effectsMixin } from './container-mixins/effectsMixin.mjs';\nimport { findMixin } from './container-mixins/findMixin.mjs';\nimport { measureMixin } from './container-mixins/measureMixin.mjs';\nimport { onRenderMixin } from './container-mixins/onRenderMixin.mjs';\nimport { sortMixin } from './container-mixins/sortMixin.mjs';\nimport { toLocalGlobalMixin } from './container-mixins/toLocalGlobalMixin.mjs';\nimport { RenderGroup } from './RenderGroup.mjs';\nimport { assignWithIgnore } from './utils/assignWithIgnore.mjs';\n\n\"use strict\";\nconst defaultSkew = new ObservablePoint(null);\nconst defaultPivot = new ObservablePoint(null);\nconst defaultScale = new ObservablePoint(null, 1, 1);\nconst UPDATE_COLOR = 1;\nconst UPDATE_BLEND = 2;\nconst UPDATE_VISIBLE = 4;\nconst UPDATE_TRANSFORM = 8;\nclass Container extends EventEmitter {\n  constructor(options = {}) {\n    super();\n    /** @private */\n    this.uid = uid(\"renderable\");\n    /** @private */\n    this._updateFlags = 15;\n    // is this container the root of a renderGroup?\n    // TODO implement this in a few more places\n    /** @private */\n    this.isRenderGroupRoot = false;\n    // the render group this container belongs to OR owns\n    /** @private */\n    this.renderGroup = null;\n    // set to true if the container has changed. It is reset once the changes have been applied\n    // by the transform system\n    // its here to stop ensure that when things change, only one update gets registers with the transform system\n    /** @private */\n    this.didChange = false;\n    // same as above, but for the renderable\n    /** @private */\n    this.didViewUpdate = false;\n    // how deep is the container relative to its render group..\n    // unless the element is the root render group - it will be relative to its parent\n    /** @private */\n    this.relativeRenderGroupDepth = 0;\n    /**\n     * The array of children of this container.\n     * @readonly\n     */\n    this.children = [];\n    /** The display object container that contains this display object. */\n    this.parent = null;\n    // used internally for changing up the render order.. mainly for masks and filters\n    // TODO setting this should cause a rebuild??\n    /** @private */\n    this.includeInBuild = true;\n    /** @private */\n    this.measurable = true;\n    /** @private */\n    this.isSimple = true;\n    // / /////////////Transform related props//////////////\n    // used by the transform system to check if a container needs to be updated that frame\n    // if the tick matches the current transform system tick, it is not updated again\n    /**\n     * @internal\n     * @ignore\n     */\n    this.updateTick = -1;\n    /**\n     * Current transform of the object based on local factors: position, scale, other stuff.\n     * @readonly\n     */\n    this.localTransform = new Matrix();\n    /**\n     * The relative group transform is a transform relative to the render group it belongs too. It will include all parent\n     * transforms and up to the render group (think of it as kind of like a stage - but the stage can be nested).\n     * If this container is is self a render group matrix will be relative to its parent render group\n     * @readonly\n     */\n    this.relativeGroupTransform = new Matrix();\n    /**\n     * The group transform is a transform relative to the render group it belongs too.\n     * If this container is render group then this will be an identity matrix. other wise it\n     * will be the same as the relativeGroupTransform.\n     * Use this value when actually rendering things to the screen\n     * @readonly\n     */\n    this.groupTransform = this.relativeGroupTransform;\n    /** If the object has been destroyed via destroy(). If true, it should not be used. */\n    this.destroyed = false;\n    // transform data..\n    /**\n     * The coordinate of the object relative to the local coordinates of the parent.\n     * @internal\n     * @ignore\n     */\n    this._position = new ObservablePoint(this, 0, 0);\n    /**\n     * The scale factor of the object.\n     * @internal\n     * @ignore\n     */\n    this._scale = defaultScale;\n    /**\n     * The pivot point of the container that it rotates around.\n     * @internal\n     * @ignore\n     */\n    this._pivot = defaultPivot;\n    /**\n     * The skew amount, on the x and y axis.\n     * @internal\n     * @ignore\n     */\n    this._skew = defaultSkew;\n    /**\n     * The X-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    this._cx = 1;\n    /**\n     * The Y-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    this._sx = 0;\n    /**\n     * The X-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    this._cy = 0;\n    /**\n     * The Y-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    this._sy = 1;\n    /**\n     * The rotation amount.\n     * @internal\n     * @ignore\n     */\n    this._rotation = 0;\n    // / COLOR related props //////////////\n    // color stored as ABGR\n    this.localColor = 16777215;\n    this.localAlpha = 1;\n    this.groupAlpha = 1;\n    // A\n    this.groupColor = 16777215;\n    // BGR\n    this.groupColorAlpha = 4294967295;\n    // ABGR\n    // / BLEND related props //////////////\n    /**\n     * @internal\n     * @ignore\n     */\n    this.localBlendMode = \"inherit\";\n    /**\n     * @internal\n     * @ignore\n     */\n    this.groupBlendMode = \"normal\";\n    // / VISIBILITY related props //////////////\n    // visibility\n    // 0b11\n    // first bit is visible, second bit is renderable\n    /**\n     * This property holds three bits: culled, visible, renderable\n     * the third bit represents culling (0 = culled, 1 = not culled) 0b100\n     * the second bit represents visibility (0 = not visible, 1 = visible) 0b010\n     * the first bit represents renderable (0 = renderable, 1 = not renderable) 0b001\n     * @internal\n     * @ignore\n     */\n    this.localDisplayStatus = 7;\n    // 0b11 | 0b10 | 0b01 | 0b00\n    /**\n     * @internal\n     * @ignore\n     */\n    this.globalDisplayStatus = 7;\n    /**\n     * A value that increments each time the container is modified\n     * the first 12 bits represent the container changes (eg transform, alpha, visible etc)\n     * the second 12 bits represent:\n     *      - for view changes (eg texture swap, geometry change etc)\n     *      - containers changes (eg children added, removed etc)\n     *\n     *  view          container\n     * [000000000000][00000000000]\n     * @ignore\n     */\n    this._didChangeId = 0;\n    /**\n     * property that tracks if the container transform has changed\n     * @ignore\n     */\n    this._didLocalTransformChangeId = -1;\n    assignWithIgnore(this, options, {\n      children: true,\n      parent: true,\n      effects: true\n    });\n    options.children?.forEach((child) => this.addChild(child));\n    this.effects = [];\n    options.parent?.addChild(this);\n  }\n  /**\n   * Mixes all enumerable properties and methods from a source object to Container.\n   * @param source - The source of properties and methods to mix in.\n   */\n  static mixin(source) {\n    Object.defineProperties(Container.prototype, Object.getOwnPropertyDescriptors(source));\n  }\n  /**\n   * Adds one or more children to the container.\n   *\n   * Multiple items can be added like so: `myContainer.addChild(thingOne, thingTwo, thingThree)`\n   * @param {...Container} children - The Container(s) to add to the container\n   * @returns {Container} - The first child that was added.\n   */\n  addChild(...children) {\n    if (!this.allowChildren) {\n      deprecation(v8_0_0, \"addChild: Only Containers will be allowed to add children in v8.0.0\");\n    }\n    if (children.length > 1) {\n      for (let i = 0; i < children.length; i++) {\n        this.addChild(children[i]);\n      }\n      return children[0];\n    }\n    const child = children[0];\n    if (child.parent === this) {\n      this.children.splice(this.children.indexOf(child), 1);\n      this.children.push(child);\n      if (this.renderGroup && !this.isRenderGroupRoot) {\n        this.renderGroup.structureDidChange = true;\n      }\n      return child;\n    }\n    if (child.parent) {\n      child.parent.removeChild(child);\n    }\n    this.children.push(child);\n    if (this.sortableChildren)\n      this.sortDirty = true;\n    child.parent = this;\n    child.didChange = true;\n    child.didViewUpdate = false;\n    child._updateFlags = 15;\n    if (this.renderGroup) {\n      this.renderGroup.addChild(child);\n    }\n    this.emit(\"childAdded\", child, this, this.children.length - 1);\n    child.emit(\"added\", this);\n    this._didChangeId += 1 << 12;\n    if (child._zIndex !== 0) {\n      child.depthOfChildModified();\n    }\n    return child;\n  }\n  /**\n   * Removes one or more children from the container.\n   * @param {...Container} children - The Container(s) to remove\n   * @returns {Container} The first child that was removed.\n   */\n  removeChild(...children) {\n    if (children.length > 1) {\n      for (let i = 0; i < children.length; i++) {\n        this.removeChild(children[i]);\n      }\n      return children[0];\n    }\n    const child = children[0];\n    const index = this.children.indexOf(child);\n    if (index > -1) {\n      this._didChangeId += 1 << 12;\n      this.children.splice(index, 1);\n      if (this.renderGroup) {\n        this.renderGroup.removeChild(child);\n      }\n      child.parent = null;\n      this.emit(\"childRemoved\", child, this, index);\n      child.emit(\"removed\", this);\n    }\n    return child;\n  }\n  /** @ignore */\n  _onUpdate(point) {\n    if (point) {\n      if (point === this._skew) {\n        this._updateSkew();\n      }\n    }\n    this._didChangeId++;\n    if (this.didChange)\n      return;\n    this.didChange = true;\n    if (this.isRenderGroupRoot) {\n      const renderGroupParent = this.renderGroup.renderGroupParent;\n      if (renderGroupParent) {\n        renderGroupParent.onChildUpdate(this);\n      }\n    } else if (this.renderGroup) {\n      this.renderGroup.onChildUpdate(this);\n    }\n  }\n  set isRenderGroup(value) {\n    if (this.isRenderGroupRoot && value === false) {\n      throw new Error(\"[Pixi] cannot undo a render group just yet\");\n    }\n    if (value) {\n      this.enableRenderGroup();\n    }\n  }\n  /**\n   * Returns true if this container is a render group.\n   * This means that it will be rendered as a separate pass, with its own set of instructions\n   */\n  get isRenderGroup() {\n    return this.isRenderGroupRoot;\n  }\n  /** This enables the container to be rendered as a render group. */\n  enableRenderGroup() {\n    if (this.renderGroup && this.renderGroup.root === this)\n      return;\n    this.isRenderGroupRoot = true;\n    const parentRenderGroup = this.renderGroup;\n    if (parentRenderGroup) {\n      parentRenderGroup.removeChild(this);\n    }\n    this.renderGroup = new RenderGroup(this);\n    if (parentRenderGroup) {\n      for (let i = 0; i < parentRenderGroup.renderGroupChildren.length; i++) {\n        const childRenderGroup = parentRenderGroup.renderGroupChildren[i];\n        let parent = childRenderGroup.root;\n        while (parent) {\n          if (parent === this) {\n            this.renderGroup.addRenderGroupChild(childRenderGroup);\n            break;\n          }\n          parent = parent.parent;\n        }\n      }\n      parentRenderGroup.addRenderGroupChild(this.renderGroup);\n    }\n    this._updateIsSimple();\n    this.groupTransform = Matrix.IDENTITY;\n  }\n  /** @ignore */\n  _updateIsSimple() {\n    this.isSimple = !this.isRenderGroupRoot && this.effects.length === 0;\n  }\n  /**\n   * Current transform of the object based on world (parent) factors.\n   * @readonly\n   */\n  get worldTransform() {\n    this._worldTransform || (this._worldTransform = new Matrix());\n    if (this.renderGroup) {\n      if (this.isRenderGroupRoot) {\n        this._worldTransform.copyFrom(this.renderGroup.worldTransform);\n      } else {\n        this._worldTransform.appendFrom(this.relativeGroupTransform, this.renderGroup.worldTransform);\n      }\n    }\n    return this._worldTransform;\n  }\n  // / ////// transform related stuff\n  /**\n   * The position of the container on the x axis relative to the local coordinates of the parent.\n   * An alias to position.x\n   */\n  get x() {\n    return this._position.x;\n  }\n  set x(value) {\n    this._position.x = value;\n  }\n  /**\n   * The position of the container on the y axis relative to the local coordinates of the parent.\n   * An alias to position.y\n   */\n  get y() {\n    return this._position.y;\n  }\n  set y(value) {\n    this._position.y = value;\n  }\n  /**\n   * The coordinate of the object relative to the local coordinates of the parent.\n   * @since 4.0.0\n   */\n  get position() {\n    return this._position;\n  }\n  set position(value) {\n    this._position.copyFrom(value);\n  }\n  /**\n   * The rotation of the object in radians.\n   * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.\n   */\n  get rotation() {\n    return this._rotation;\n  }\n  set rotation(value) {\n    if (this._rotation !== value) {\n      this._rotation = value;\n      this._onUpdate(this._skew);\n    }\n  }\n  /**\n   * The angle of the object in degrees.\n   * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.\n   */\n  get angle() {\n    return this.rotation * RAD_TO_DEG;\n  }\n  set angle(value) {\n    this.rotation = value * DEG_TO_RAD;\n  }\n  /**\n   * The center of rotation, scaling, and skewing for this display object in its local space. The `position`\n   * is the projection of `pivot` in the parent's local space.\n   *\n   * By default, the pivot is the origin (0, 0).\n   * @since 4.0.0\n   */\n  get pivot() {\n    if (this._pivot === defaultPivot) {\n      this._pivot = new ObservablePoint(this, 0, 0);\n    }\n    return this._pivot;\n  }\n  set pivot(value) {\n    if (this._pivot === defaultPivot) {\n      this._pivot = new ObservablePoint(this, 0, 0);\n    }\n    typeof value === \"number\" ? this._pivot.set(value) : this._pivot.copyFrom(value);\n  }\n  /**\n   * The skew factor for the object in radians.\n   * @since 4.0.0\n   */\n  get skew() {\n    if (this._skew === defaultSkew) {\n      this._skew = new ObservablePoint(this, 0, 0);\n    }\n    return this._skew;\n  }\n  set skew(value) {\n    if (this._skew === defaultSkew) {\n      this._skew = new ObservablePoint(this, 0, 0);\n    }\n    this._skew.copyFrom(value);\n  }\n  /**\n   * The scale factors of this object along the local coordinate axes.\n   *\n   * The default scale is (1, 1).\n   * @since 4.0.0\n   */\n  get scale() {\n    if (this._scale === defaultScale) {\n      this._scale = new ObservablePoint(this, 1, 1);\n    }\n    return this._scale;\n  }\n  set scale(value) {\n    if (this._scale === defaultScale) {\n      this._scale = new ObservablePoint(this, 0, 0);\n    }\n    typeof value === \"number\" ? this._scale.set(value) : this._scale.copyFrom(value);\n  }\n  /**\n   * The width of the Container, setting this will actually modify the scale to achieve the value set.\n   * @memberof scene.Container#\n   */\n  get width() {\n    return Math.abs(this.scale.x * this.getLocalBounds().width);\n  }\n  set width(value) {\n    const localWidth = this.getLocalBounds().width;\n    this._setWidth(value, localWidth);\n  }\n  /**\n   * The height of the Container, setting this will actually modify the scale to achieve the value set.\n   * @memberof scene.Container#\n   */\n  get height() {\n    return Math.abs(this.scale.y * this.getLocalBounds().height);\n  }\n  set height(value) {\n    const localHeight = this.getLocalBounds().height;\n    this._setHeight(value, localHeight);\n  }\n  /**\n   * Retrieves the size of the container as a [Size]{@link Size} object.\n   * This is faster than get the width and height separately.\n   * @param out - Optional object to store the size in.\n   * @returns - The size of the container.\n   * @memberof scene.Container#\n   */\n  getSize(out) {\n    if (!out) {\n      out = {};\n    }\n    const bounds = this.getLocalBounds();\n    out.width = Math.abs(this.scale.x * bounds.width);\n    out.height = Math.abs(this.scale.y * bounds.height);\n    return out;\n  }\n  /**\n   * Sets the size of the container to the specified width and height.\n   * This is faster than setting the width and height separately.\n   * @param value - This can be either a number or a [Size]{@link Size} object.\n   * @param height - The height to set. Defaults to the value of `width` if not provided.\n   * @memberof scene.Container#\n   */\n  setSize(value, height) {\n    const size = this.getLocalBounds();\n    let convertedWidth;\n    let convertedHeight;\n    if (typeof value !== \"object\") {\n      convertedWidth = value;\n      convertedHeight = height ?? value;\n    } else {\n      convertedWidth = value.width;\n      convertedHeight = value.height ?? value.width;\n    }\n    if (convertedWidth !== void 0) {\n      this._setWidth(convertedWidth, size.width);\n    }\n    if (convertedHeight !== void 0) {\n      this._setHeight(convertedHeight, size.height);\n    }\n  }\n  /** Called when the skew or the rotation changes. */\n  _updateSkew() {\n    const rotation = this._rotation;\n    const skew = this._skew;\n    this._cx = Math.cos(rotation + skew._y);\n    this._sx = Math.sin(rotation + skew._y);\n    this._cy = -Math.sin(rotation - skew._x);\n    this._sy = Math.cos(rotation - skew._x);\n  }\n  /**\n   * Updates the transform properties of the container (accepts partial values).\n   * @param {object} opts - The options for updating the transform.\n   * @param {number} opts.x - The x position of the container.\n   * @param {number} opts.y - The y position of the container.\n   * @param {number} opts.scaleX - The scale factor on the x-axis.\n   * @param {number} opts.scaleY - The scale factor on the y-axis.\n   * @param {number} opts.rotation - The rotation of the container, in radians.\n   * @param {number} opts.skewX - The skew factor on the x-axis.\n   * @param {number} opts.skewY - The skew factor on the y-axis.\n   * @param {number} opts.pivotX - The x coordinate of the pivot point.\n   * @param {number} opts.pivotY - The y coordinate of the pivot point.\n   */\n  updateTransform(opts) {\n    this.position.set(\n      typeof opts.x === \"number\" ? opts.x : this.position.x,\n      typeof opts.y === \"number\" ? opts.y : this.position.y\n    );\n    this.scale.set(\n      typeof opts.scaleX === \"number\" ? opts.scaleX || 1 : this.scale.x,\n      typeof opts.scaleY === \"number\" ? opts.scaleY || 1 : this.scale.y\n    );\n    this.rotation = typeof opts.rotation === \"number\" ? opts.rotation : this.rotation;\n    this.skew.set(\n      typeof opts.skewX === \"number\" ? opts.skewX : this.skew.x,\n      typeof opts.skewY === \"number\" ? opts.skewY : this.skew.y\n    );\n    this.pivot.set(\n      typeof opts.pivotX === \"number\" ? opts.pivotX : this.pivot.x,\n      typeof opts.pivotY === \"number\" ? opts.pivotY : this.pivot.y\n    );\n    return this;\n  }\n  /**\n   * Updates the local transform using the given matrix.\n   * @param matrix - The matrix to use for updating the transform.\n   */\n  setFromMatrix(matrix) {\n    matrix.decompose(this);\n  }\n  /** Updates the local transform. */\n  updateLocalTransform() {\n    if ((this._didLocalTransformChangeId & 15) === this._didChangeId)\n      return;\n    this._didLocalTransformChangeId = this._didChangeId;\n    const lt = this.localTransform;\n    const scale = this._scale;\n    const pivot = this._pivot;\n    const position = this._position;\n    const sx = scale._x;\n    const sy = scale._y;\n    const px = pivot._x;\n    const py = pivot._y;\n    lt.a = this._cx * sx;\n    lt.b = this._sx * sx;\n    lt.c = this._cy * sy;\n    lt.d = this._sy * sy;\n    lt.tx = position._x - (px * lt.a + py * lt.c);\n    lt.ty = position._y - (px * lt.b + py * lt.d);\n  }\n  // / ///// color related stuff\n  set alpha(value) {\n    if (value === this.localAlpha)\n      return;\n    this.localAlpha = value;\n    this._updateFlags |= UPDATE_COLOR;\n    this._onUpdate();\n  }\n  /** The opacity of the object. */\n  get alpha() {\n    return this.localAlpha;\n  }\n  set tint(value) {\n    const tempColor = Color.shared.setValue(value ?? 16777215);\n    const bgr = tempColor.toBgrNumber();\n    if (bgr === this.localColor)\n      return;\n    this.localColor = bgr;\n    this._updateFlags |= UPDATE_COLOR;\n    this._onUpdate();\n  }\n  /**\n   * The tint applied to the sprite. This is a hex value.\n   *\n   * A value of 0xFFFFFF will remove any tint effect.\n   * @default 0xFFFFFF\n   */\n  get tint() {\n    const bgr = this.localColor;\n    return ((bgr & 255) << 16) + (bgr & 65280) + (bgr >> 16 & 255);\n  }\n  // / //////////////// blend related stuff\n  set blendMode(value) {\n    if (this.localBlendMode === value)\n      return;\n    if (this.renderGroup && !this.isRenderGroupRoot) {\n      this.renderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_BLEND;\n    this.localBlendMode = value;\n    this._onUpdate();\n  }\n  /**\n   * The blend mode to be applied to the sprite. Apply a value of `'normal'` to reset the blend mode.\n   * @default 'normal'\n   */\n  get blendMode() {\n    return this.localBlendMode;\n  }\n  // / ///////// VISIBILITY / RENDERABLE /////////////////\n  /** The visibility of the object. If false the object will not be drawn, and the transform will not be updated. */\n  get visible() {\n    return !!(this.localDisplayStatus & 2);\n  }\n  set visible(value) {\n    const valueNumber = value ? 1 : 0;\n    if ((this.localDisplayStatus & 2) >> 1 === valueNumber)\n      return;\n    if (this.renderGroup && !this.isRenderGroupRoot) {\n      this.renderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 2;\n    this._onUpdate();\n  }\n  /** @ignore */\n  get culled() {\n    return !(this.localDisplayStatus & 4);\n  }\n  /** @ignore */\n  set culled(value) {\n    const valueNumber = value ? 1 : 0;\n    if ((this.localDisplayStatus & 4) >> 2 === valueNumber)\n      return;\n    if (this.renderGroup && !this.isRenderGroupRoot) {\n      this.renderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 4;\n    this._onUpdate();\n  }\n  /** Can this object be rendered, if false the object will not be drawn but the transform will still be updated. */\n  get renderable() {\n    return !!(this.localDisplayStatus & 1);\n  }\n  set renderable(value) {\n    const valueNumber = value ? 1 : 0;\n    if ((this.localDisplayStatus & 1) === valueNumber)\n      return;\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 1;\n    if (this.renderGroup && !this.isRenderGroupRoot) {\n      this.renderGroup.structureDidChange = true;\n    }\n    this._onUpdate();\n  }\n  /** Whether or not the object should be rendered. */\n  get isRenderable() {\n    return this.localDisplayStatus === 7 && this.groupAlpha > 0;\n  }\n  /**\n   * Removes all internal references and listeners as well as removes children from the display list.\n   * Do not use a Container after calling `destroy`.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @param {boolean} [options.children=false] - if set to true, all the children will have their destroy\n   *  method called as well. 'options' will be passed on to those calls.\n   * @param {boolean} [options.texture=false] - Only used for children with textures e.g. Sprites. If options.children\n   * is set to true it should destroy the texture of the child sprite\n   * @param {boolean} [options.textureSource=false] - Only used for children with textures e.g. Sprites.\n   * If options.children is set to true it should destroy the texture source of the child sprite\n   * @param {boolean} [options.context=false] - Only used for children with graphicsContexts e.g. Graphics.\n   * If options.children is set to true it should destroy the context of the child graphics\n   */\n  destroy(options = false) {\n    if (this.destroyed)\n      return;\n    this.destroyed = true;\n    this.removeFromParent();\n    this.parent = null;\n    this._mask = null;\n    this._filters = null;\n    this.effects = null;\n    this._position = null;\n    this._scale = null;\n    this._pivot = null;\n    this._skew = null;\n    this.emit(\"destroyed\", this);\n    this.removeAllListeners();\n    const destroyChildren = typeof options === \"boolean\" ? options : options?.children;\n    const oldChildren = this.removeChildren(0, this.children.length);\n    if (destroyChildren) {\n      for (let i = 0; i < oldChildren.length; ++i) {\n        oldChildren[i].destroy(options);\n      }\n    }\n  }\n}\nContainer.mixin(childrenHelperMixin);\nContainer.mixin(toLocalGlobalMixin);\nContainer.mixin(onRenderMixin);\nContainer.mixin(measureMixin);\nContainer.mixin(effectsMixin);\nContainer.mixin(findMixin);\nContainer.mixin(sortMixin);\nContainer.mixin(cullingMixin);\n\nexport { Container, UPDATE_BLEND, UPDATE_COLOR, UPDATE_TRANSFORM, UPDATE_VISIBLE };\n//# sourceMappingURL=Container.mjs.map\n","import { ObservablePoint } from '../../maths/point/ObservablePoint.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { updateQuadBounds } from '../../utils/data/updateQuadBounds.mjs';\nimport { Container } from '../container/Container.mjs';\n\n\"use strict\";\nclass Sprite extends Container {\n  /**\n   * @param options - The options for creating the sprite.\n   */\n  constructor(options = Texture.EMPTY) {\n    if (options instanceof Texture) {\n      options = { texture: options };\n    }\n    const { texture, anchor, roundPixels, width, height, ...rest } = options;\n    super({\n      label: \"Sprite\",\n      ...rest\n    });\n    this.renderPipeId = \"sprite\";\n    this.batched = true;\n    this._didSpriteUpdate = false;\n    this._bounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    this._sourceBounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    this._boundsDirty = true;\n    this._sourceBoundsDirty = true;\n    this._roundPixels = 0;\n    this._anchor = new ObservablePoint(\n      {\n        _onUpdate: () => {\n          this.onViewUpdate();\n        }\n      }\n    );\n    if (anchor) {\n      this.anchor = anchor;\n    } else if (texture.defaultAnchor) {\n      this.anchor = texture.defaultAnchor;\n    }\n    this.texture = texture;\n    this.allowChildren = false;\n    this.roundPixels = roundPixels ?? false;\n    if (width)\n      this.width = width;\n    if (height)\n      this.height = height;\n  }\n  /**\n   * Helper function that creates a new sprite based on the source you provide.\n   * The source can be - frame id, image, video, canvas element, video element, texture\n   * @param source - Source to create texture from\n   * @param [skipCache] - Whether to skip the cache or not\n   * @returns The newly created sprite\n   */\n  static from(source, skipCache = false) {\n    if (source instanceof Texture) {\n      return new Sprite(source);\n    }\n    return new Sprite(Texture.from(source, skipCache));\n  }\n  set texture(value) {\n    value || (value = Texture.EMPTY);\n    const currentTexture = this._texture;\n    if (currentTexture === value)\n      return;\n    if (currentTexture && currentTexture.dynamic)\n      currentTexture.off(\"update\", this.onViewUpdate, this);\n    if (value.dynamic)\n      value.on(\"update\", this.onViewUpdate, this);\n    this._texture = value;\n    this.onViewUpdate();\n  }\n  /** The texture that the sprite is using. */\n  get texture() {\n    return this._texture;\n  }\n  /**\n   * The local bounds of the sprite.\n   * @type {rendering.Bounds}\n   */\n  get bounds() {\n    if (this._boundsDirty) {\n      this._updateBounds();\n      this._boundsDirty = false;\n    }\n    return this._bounds;\n  }\n  /**\n   * The bounds of the sprite, taking the texture's trim into account.\n   * @type {rendering.Bounds}\n   */\n  get sourceBounds() {\n    if (this._sourceBoundsDirty) {\n      this._updateSourceBounds();\n      this._sourceBoundsDirty = false;\n    }\n    return this._sourceBounds;\n  }\n  /**\n   * Checks if the object contains the given point.\n   * @param point - The point to check\n   */\n  containsPoint(point) {\n    const bounds = this.sourceBounds;\n    if (point.x >= bounds.maxX && point.x <= bounds.minX) {\n      if (point.y >= bounds.maxY && point.y <= bounds.minY) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Adds the bounds of this object to the bounds object.\n   * @param bounds - The output bounds object.\n   */\n  addBounds(bounds) {\n    const _bounds = this._texture.trim ? this.sourceBounds : this.bounds;\n    bounds.addFrame(_bounds.minX, _bounds.minY, _bounds.maxX, _bounds.maxY);\n  }\n  onViewUpdate() {\n    this._didChangeId += 1 << 12;\n    this._didSpriteUpdate = true;\n    this._sourceBoundsDirty = this._boundsDirty = true;\n    if (this.didViewUpdate)\n      return;\n    this.didViewUpdate = true;\n    if (this.renderGroup) {\n      this.renderGroup.onChildViewUpdate(this);\n    }\n  }\n  _updateBounds() {\n    updateQuadBounds(this._bounds, this._anchor, this._texture, 0);\n  }\n  _updateSourceBounds() {\n    const anchor = this._anchor;\n    const texture = this._texture;\n    const sourceBounds = this._sourceBounds;\n    const { width, height } = texture.orig;\n    sourceBounds.maxX = -anchor._x * width;\n    sourceBounds.minX = sourceBounds.maxX + width;\n    sourceBounds.maxY = -anchor._y * height;\n    sourceBounds.minY = sourceBounds.maxY + height;\n  }\n  /**\n   * Destroys this sprite renderable and optionally its texture.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @param {boolean} [options.texture=false] - Should it destroy the current texture of the renderable as well\n   * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the renderable as well\n   */\n  destroy(options = false) {\n    super.destroy(options);\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      this._texture.destroy(destroyTextureSource);\n    }\n    this._texture = null;\n    this._bounds = null;\n    this._sourceBounds = null;\n    this._anchor = null;\n  }\n  /**\n   * The anchor sets the origin point of the sprite. The default value is taken from the {@link Texture}\n   * and passed to the constructor.\n   *\n   * The default is `(0,0)`, this means the sprite's origin is the top left.\n   *\n   * Setting the anchor to `(0.5,0.5)` means the sprite's origin is centered.\n   *\n   * Setting the anchor to `(1,1)` would mean the sprite's origin point will be the bottom right corner.\n   *\n   * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.\n   * @example\n   * import { Sprite } from 'pixi.js';\n   *\n   * const sprite = new Sprite({texture: Texture.WHITE});\n   * sprite.anchor.set(0.5); // This will set the origin to center. (0.5) is same as (0.5, 0.5).\n   */\n  get anchor() {\n    return this._anchor;\n  }\n  set anchor(value) {\n    typeof value === \"number\" ? this._anchor.set(value) : this._anchor.copyFrom(value);\n  }\n  /**\n   *  Whether or not to round the x/y position of the sprite.\n   * @type {boolean}\n   */\n  get roundPixels() {\n    return !!this._roundPixels;\n  }\n  set roundPixels(value) {\n    this._roundPixels = value ? 1 : 0;\n  }\n  /** The width of the sprite, setting this will actually modify the scale to achieve the value set. */\n  get width() {\n    return Math.abs(this.scale.x) * this._texture.orig.width;\n  }\n  set width(value) {\n    this._setWidth(value, this._texture.orig.width);\n  }\n  /** The height of the sprite, setting this will actually modify the scale to achieve the value set. */\n  get height() {\n    return Math.abs(this.scale.y) * this._texture.orig.height;\n  }\n  set height(value) {\n    this._setHeight(value, this._texture.orig.height);\n  }\n  /**\n   * Retrieves the size of the Sprite as a [Size]{@link Size} object.\n   * This is faster than get the width and height separately.\n   * @param out - Optional object to store the size in.\n   * @returns - The size of the Sprite.\n   */\n  getSize(out) {\n    if (!out) {\n      out = {};\n    }\n    out.width = Math.abs(this.scale.x) * this._texture.orig.width;\n    out.height = Math.abs(this.scale.y) * this._texture.orig.height;\n    return out;\n  }\n  /**\n   * Sets the size of the Sprite to the specified width and height.\n   * This is faster than setting the width and height separately.\n   * @param value - This can be either a number or a [Size]{@link Size} object.\n   * @param height - The height to set. Defaults to the value of `width` if not provided.\n   */\n  setSize(value, height) {\n    let convertedWidth;\n    let convertedHeight;\n    if (typeof value !== \"object\") {\n      convertedWidth = value;\n      convertedHeight = height ?? value;\n    } else {\n      convertedWidth = value.width;\n      convertedHeight = value.height ?? value.width;\n    }\n    if (convertedWidth !== void 0) {\n      this._setWidth(convertedWidth, this._texture.orig.width);\n    }\n    if (convertedHeight !== void 0) {\n      this._setHeight(convertedHeight, this._texture.orig.height);\n    }\n  }\n}\n\nexport { Sprite };\n//# sourceMappingURL=Sprite.mjs.map\n","import { Bounds } from '../../../scene/container/bounds/Bounds.mjs';\nimport { getGlobalBounds } from '../../../scene/container/bounds/getGlobalBounds.mjs';\n\n\"use strict\";\nconst tempBounds = new Bounds();\nfunction addMaskBounds(mask, bounds, skipUpdateTransform) {\n  const boundsToMask = tempBounds;\n  mask.measurable = true;\n  getGlobalBounds(mask, skipUpdateTransform, boundsToMask);\n  bounds.addBoundsMask(boundsToMask);\n  mask.measurable = false;\n}\n\nexport { addMaskBounds };\n//# sourceMappingURL=addMaskBounds.mjs.map\n","import { getLocalBounds } from '../../../scene/container/bounds/getLocalBounds.mjs';\nimport { boundsPool, matrixPool } from '../../../scene/container/bounds/utils/matrixAndBoundsPool.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\n\n\"use strict\";\nfunction addMaskLocalBounds(mask, bounds, localRoot) {\n  const boundsToMask = boundsPool.get();\n  mask.measurable = true;\n  const tempMatrix = matrixPool.get().identity();\n  const relativeMask = getMatrixRelativeToParent(mask, localRoot, tempMatrix);\n  getLocalBounds(mask, boundsToMask, relativeMask);\n  mask.measurable = false;\n  bounds.addBoundsMask(boundsToMask);\n  matrixPool.return(tempMatrix);\n  boundsPool.return(boundsToMask);\n}\nfunction getMatrixRelativeToParent(target, root, matrix) {\n  if (!target) {\n    warn(\"Mask bounds, renderable is not inside the root container\");\n    return matrix;\n  }\n  if (target !== root) {\n    getMatrixRelativeToParent(target.parent, root, matrix);\n    target.updateLocalTransform();\n    matrix.append(target.localTransform);\n  }\n  return matrix;\n}\n\nexport { addMaskLocalBounds, getMatrixRelativeToParent };\n//# sourceMappingURL=addMaskLocalBounds.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Sprite } from '../../../scene/sprite/Sprite.mjs';\nimport { addMaskBounds } from '../utils/addMaskBounds.mjs';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds.mjs';\n\n\"use strict\";\nclass AlphaMask {\n  constructor(options) {\n    this.priority = 0;\n    this.pipe = \"alphaMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n    this.renderMaskToTexture = !(mask instanceof Sprite);\n    this.mask.renderable = this.renderMaskToTexture;\n    this.mask.includeInBuild = !this.renderMaskToTexture;\n    this.mask.measurable = false;\n  }\n  reset() {\n    this.mask.measurable = true;\n    this.mask = null;\n  }\n  addBounds(bounds, skipUpdateTransform) {\n    addMaskBounds(this.mask, bounds, skipUpdateTransform);\n  }\n  addLocalBounds(bounds, localRoot) {\n    addMaskLocalBounds(this.mask, bounds, localRoot);\n  }\n  containsPoint(point, hitTestFn) {\n    const mask = this.mask;\n    return hitTestFn(mask, point);\n  }\n  destroy() {\n    this.reset();\n  }\n  static test(mask) {\n    return mask instanceof Sprite;\n  }\n}\nAlphaMask.extension = ExtensionType.MaskEffect;\n\nexport { AlphaMask };\n//# sourceMappingURL=AlphaMask.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass ColorMask {\n  constructor(options) {\n    this.priority = 0;\n    this.pipe = \"colorMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n  }\n  destroy() {\n  }\n  static test(mask) {\n    return typeof mask === \"number\";\n  }\n}\nColorMask.extension = ExtensionType.MaskEffect;\n\nexport { ColorMask };\n//# sourceMappingURL=ColorMask.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Container } from '../../../scene/container/Container.mjs';\nimport { addMaskBounds } from '../utils/addMaskBounds.mjs';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds.mjs';\n\n\"use strict\";\nclass StencilMask {\n  constructor(options) {\n    this.priority = 0;\n    this.pipe = \"stencilMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n    this.mask.includeInBuild = false;\n    this.mask.measurable = false;\n  }\n  reset() {\n    this.mask.measurable = true;\n    this.mask.includeInBuild = true;\n    this.mask = null;\n  }\n  addBounds(bounds, skipUpdateTransform) {\n    addMaskBounds(this.mask, bounds, skipUpdateTransform);\n  }\n  addLocalBounds(bounds, localRoot) {\n    addMaskLocalBounds(this.mask, bounds, localRoot);\n  }\n  containsPoint(point, hitTestFn) {\n    const mask = this.mask;\n    return hitTestFn(mask, point);\n  }\n  destroy() {\n    this.reset();\n  }\n  static test(mask) {\n    return mask instanceof Container;\n  }\n}\nStencilMask.extension = ExtensionType.MaskEffect;\n\nexport { StencilMask };\n//# sourceMappingURL=StencilMask.mjs.map\n","\"use strict\";\nconst BrowserAdapter = {\n  createCanvas: (width, height) => {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  },\n  getCanvasRenderingContext2D: () => CanvasRenderingContext2D,\n  getWebGLRenderingContext: () => WebGLRenderingContext,\n  getNavigator: () => navigator,\n  getBaseUrl: () => document.baseURI ?? window.location.href,\n  getFontFaceSet: () => document.fonts,\n  fetch: (url, options) => fetch(url, options),\n  parseXML: (xml) => {\n    const parser = new DOMParser();\n    return parser.parseFromString(xml, \"text/xml\");\n  }\n};\n\nexport { BrowserAdapter };\n//# sourceMappingURL=BrowserAdapter.mjs.map\n","import { BrowserAdapter } from '../environment-browser/BrowserAdapter.mjs';\n\n\"use strict\";\nlet currentAdapter = BrowserAdapter;\nconst DOMAdapter = {\n  /**\n   * Returns the current adapter.\n   * @returns {environment.Adapter} The current adapter.\n   */\n  get() {\n    return currentAdapter;\n  },\n  /**\n   * Sets the current adapter.\n   * @param adapter - The new adapter.\n   */\n  set(adapter) {\n    currentAdapter = adapter;\n  }\n};\n\nexport { DOMAdapter };\n//# sourceMappingURL=adapter.mjs.map\n","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass CanvasSource extends TextureSource {\n  constructor(options) {\n    if (!options.resource) {\n      options.resource = DOMAdapter.get().createCanvas();\n    }\n    if (!options.width) {\n      options.width = options.resource.width;\n      if (!options.autoDensity) {\n        options.width /= options.resolution;\n      }\n    }\n    if (!options.height) {\n      options.height = options.resource.height;\n      if (!options.autoDensity) {\n        options.height /= options.resolution;\n      }\n    }\n    super(options);\n    this.uploadMethodId = \"image\";\n    this.autoDensity = options.autoDensity;\n    const canvas = options.resource;\n    if (this.pixelWidth !== canvas.width || this.pixelWidth !== canvas.height) {\n      this.resizeCanvas();\n    }\n    this.transparent = !!options.transparent;\n  }\n  resizeCanvas() {\n    if (this.autoDensity) {\n      this.resource.style.width = `${this.width}px`;\n      this.resource.style.height = `${this.height}px`;\n    }\n    if (this.resource.width !== this.pixelWidth || this.resource.height !== this.pixelHeight) {\n      this.resource.width = this.pixelWidth;\n      this.resource.height = this.pixelHeight;\n    }\n  }\n  resize(width = this.width, height = this.height, resolution = this._resolution) {\n    const didResize = super.resize(width, height, resolution);\n    if (didResize) {\n      this.resizeCanvas();\n    }\n    return didResize;\n  }\n  static test(resource) {\n    return globalThis.HTMLCanvasElement && resource instanceof HTMLCanvasElement || globalThis.OffscreenCanvas && resource instanceof OffscreenCanvas;\n  }\n}\nCanvasSource.extension = ExtensionType.TextureSource;\n\nexport { CanvasSource };\n//# sourceMappingURL=CanvasSource.mjs.map\n","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { warn } from '../../../../../utils/logging/warn.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass ImageSource extends TextureSource {\n  constructor(options) {\n    if (options.resource && (globalThis.HTMLImageElement && options.resource instanceof HTMLImageElement)) {\n      const canvas = DOMAdapter.get().createCanvas(options.resource.width, options.resource.height);\n      const context = canvas.getContext(\"2d\");\n      context.drawImage(options.resource, 0, 0);\n      options.resource = canvas;\n      warn(\"ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.\");\n    }\n    super(options);\n    this.uploadMethodId = \"image\";\n    this.autoGarbageCollect = true;\n  }\n  static test(resource) {\n    return globalThis.HTMLImageElement && resource instanceof HTMLImageElement || typeof ImageBitmap !== \"undefined\" && resource instanceof ImageBitmap;\n  }\n}\nImageSource.extension = ExtensionType.TextureSource;\n\nexport { ImageSource };\n//# sourceMappingURL=ImageSource.mjs.map\n","\"use strict\";\nvar UPDATE_PRIORITY = /* @__PURE__ */ ((UPDATE_PRIORITY2) => {\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"INTERACTION\"] = 50] = \"INTERACTION\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"HIGH\"] = 25] = \"HIGH\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"NORMAL\"] = 0] = \"NORMAL\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"LOW\"] = -25] = \"LOW\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"UTILITY\"] = -50] = \"UTILITY\";\n  return UPDATE_PRIORITY2;\n})(UPDATE_PRIORITY || {});\n\nexport { UPDATE_PRIORITY };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nclass TickerListener {\n  /**\n   * Constructor\n   * @private\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @param priority - The priority for emitting\n   * @param once - If the handler should fire once\n   */\n  constructor(fn, context = null, priority = 0, once = false) {\n    /** The next item in chain. */\n    this.next = null;\n    /** The previous item in chain. */\n    this.previous = null;\n    /** `true` if this listener has been destroyed already. */\n    this._destroyed = false;\n    this._fn = fn;\n    this._context = context;\n    this.priority = priority;\n    this._once = once;\n  }\n  /**\n   * Simple compare function to figure out if a function and context match.\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @returns `true` if the listener match the arguments\n   */\n  match(fn, context = null) {\n    return this._fn === fn && this._context === context;\n  }\n  /**\n   * Emit by calling the current function.\n   * @param ticker - The ticker emitting.\n   * @returns Next ticker\n   */\n  emit(ticker) {\n    if (this._fn) {\n      if (this._context) {\n        this._fn.call(this._context, ticker);\n      } else {\n        this._fn(ticker);\n      }\n    }\n    const redirect = this.next;\n    if (this._once) {\n      this.destroy(true);\n    }\n    if (this._destroyed) {\n      this.next = null;\n    }\n    return redirect;\n  }\n  /**\n   * Connect to the list.\n   * @param previous - Input node, previous listener\n   */\n  connect(previous) {\n    this.previous = previous;\n    if (previous.next) {\n      previous.next.previous = this;\n    }\n    this.next = previous.next;\n    previous.next = this;\n  }\n  /**\n   * Destroy and don't use after this.\n   * @param hard - `true` to remove the `next` reference, this\n   *        is considered a hard destroy. Soft destroy maintains the next reference.\n   * @returns The listener to redirect while emitting or removing.\n   */\n  destroy(hard = false) {\n    this._destroyed = true;\n    this._fn = null;\n    this._context = null;\n    if (this.previous) {\n      this.previous.next = this.next;\n    }\n    if (this.next) {\n      this.next.previous = this.previous;\n    }\n    const redirect = this.next;\n    this.next = hard ? null : redirect;\n    this.previous = null;\n    return redirect;\n  }\n}\n\nexport { TickerListener };\n//# sourceMappingURL=TickerListener.mjs.map\n","import { UPDATE_PRIORITY } from './const.mjs';\nimport { TickerListener } from './TickerListener.mjs';\n\n\"use strict\";\nconst _Ticker = class _Ticker {\n  constructor() {\n    /**\n     * Whether or not this ticker should invoke the method\n     * {@link ticker.Ticker#start|start} automatically when a listener is added.\n     */\n    this.autoStart = false;\n    /**\n     * Scalar time value from last frame to this frame.\n     * This value is capped by setting {@link ticker.Ticker#minFPS|minFPS}\n     * and is scaled with {@link ticker.Ticker#speed|speed}.\n     * **Note:** The cap may be exceeded by scaling.\n     */\n    this.deltaTime = 1;\n    /**\n     * The last time {@link ticker.Ticker#update|update} was invoked.\n     * This value is also reset internally outside of invoking\n     * update, but only when a new animation frame is requested.\n     * If the platform supports DOMHighResTimeStamp,\n     * this value will have a precision of 1 s.\n     */\n    this.lastTime = -1;\n    /**\n     * Factor of current {@link ticker.Ticker#deltaTime|deltaTime}.\n     * @example\n     * // Scales ticker.deltaTime to what would be\n     * // the equivalent of approximately 120 FPS\n     * ticker.speed = 2;\n     */\n    this.speed = 1;\n    /**\n     * Whether or not this ticker has been started.\n     * `true` if {@link ticker.Ticker#start|start} has been called.\n     * `false` if {@link ticker.Ticker#stop|Stop} has been called.\n     * While `false`, this value may change to `true` in the\n     * event of {@link ticker.Ticker#autoStart|autoStart} being `true`\n     * and a listener is added.\n     */\n    this.started = false;\n    /** Internal current frame request ID */\n    this._requestId = null;\n    /**\n     * Internal value managed by minFPS property setter and getter.\n     * This is the maximum allowed milliseconds between updates.\n     */\n    this._maxElapsedMS = 100;\n    /**\n     * Internal value managed by minFPS property setter and getter.\n     * This is the minimum allowed milliseconds between updates.\n     */\n    this._minElapsedMS = 0;\n    /** If enabled, deleting is disabled.*/\n    this._protected = false;\n    /** The last time keyframe was executed. Maintains a relatively fixed interval with the previous value. */\n    this._lastFrame = -1;\n    this._head = new TickerListener(null, null, Infinity);\n    this.deltaMS = 1 / _Ticker.targetFPMS;\n    this.elapsedMS = 1 / _Ticker.targetFPMS;\n    this._tick = (time) => {\n      this._requestId = null;\n      if (this.started) {\n        this.update(time);\n        if (this.started && this._requestId === null && this._head.next) {\n          this._requestId = requestAnimationFrame(this._tick);\n        }\n      }\n    };\n  }\n  /**\n   * Conditionally requests a new animation frame.\n   * If a frame has not already been requested, and if the internal\n   * emitter has listeners, a new frame is requested.\n   * @private\n   */\n  _requestIfNeeded() {\n    if (this._requestId === null && this._head.next) {\n      this.lastTime = performance.now();\n      this._lastFrame = this.lastTime;\n      this._requestId = requestAnimationFrame(this._tick);\n    }\n  }\n  /**\n   * Conditionally cancels a pending animation frame.\n   * @private\n   */\n  _cancelIfNeeded() {\n    if (this._requestId !== null) {\n      cancelAnimationFrame(this._requestId);\n      this._requestId = null;\n    }\n  }\n  /**\n   * Conditionally requests a new animation frame.\n   * If the ticker has been started it checks if a frame has not already\n   * been requested, and if the internal emitter has listeners. If these\n   * conditions are met, a new frame is requested. If the ticker has not\n   * been started, but autoStart is `true`, then the ticker starts now,\n   * and continues with the previous conditions to request a new frame.\n   * @private\n   */\n  _startIfPossible() {\n    if (this.started) {\n      this._requestIfNeeded();\n    } else if (this.autoStart) {\n      this.start();\n    }\n  }\n  /**\n   * Register a handler for tick events. Calls continuously unless\n   * it is removed or the ticker is stopped.\n   * @param fn - The listener function to be added for updates\n   * @param context - The listener context\n   * @param {number} [priority=UPDATE_PRIORITY.NORMAL] - The priority for emitting\n   * @returns This instance of a ticker\n   */\n  add(fn, context, priority = UPDATE_PRIORITY.NORMAL) {\n    return this._addListener(new TickerListener(fn, context, priority));\n  }\n  /**\n   * Add a handler for the tick event which is only execute once.\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @param {number} [priority=UPDATE_PRIORITY.NORMAL] - The priority for emitting\n   * @returns This instance of a ticker\n   */\n  addOnce(fn, context, priority = UPDATE_PRIORITY.NORMAL) {\n    return this._addListener(new TickerListener(fn, context, priority, true));\n  }\n  /**\n   * Internally adds the event handler so that it can be sorted by priority.\n   * Priority allows certain handler (user, AnimatedSprite, Interaction) to be run\n   * before the rendering.\n   * @private\n   * @param listener - Current listener being added.\n   * @returns This instance of a ticker\n   */\n  _addListener(listener) {\n    let current = this._head.next;\n    let previous = this._head;\n    if (!current) {\n      listener.connect(previous);\n    } else {\n      while (current) {\n        if (listener.priority > current.priority) {\n          listener.connect(previous);\n          break;\n        }\n        previous = current;\n        current = current.next;\n      }\n      if (!listener.previous) {\n        listener.connect(previous);\n      }\n    }\n    this._startIfPossible();\n    return this;\n  }\n  /**\n   * Removes any handlers matching the function and context parameters.\n   * If no handlers are left after removing, then it cancels the animation frame.\n   * @param fn - The listener function to be removed\n   * @param context - The listener context to be removed\n   * @returns This instance of a ticker\n   */\n  remove(fn, context) {\n    let listener = this._head.next;\n    while (listener) {\n      if (listener.match(fn, context)) {\n        listener = listener.destroy();\n      } else {\n        listener = listener.next;\n      }\n    }\n    if (!this._head.next) {\n      this._cancelIfNeeded();\n    }\n    return this;\n  }\n  /**\n   * The number of listeners on this ticker, calculated by walking through linked list\n   * @readonly\n   * @member {number}\n   */\n  get count() {\n    if (!this._head) {\n      return 0;\n    }\n    let count = 0;\n    let current = this._head;\n    while (current = current.next) {\n      count++;\n    }\n    return count;\n  }\n  /** Starts the ticker. If the ticker has listeners a new animation frame is requested at this point. */\n  start() {\n    if (!this.started) {\n      this.started = true;\n      this._requestIfNeeded();\n    }\n  }\n  /** Stops the ticker. If the ticker has requested an animation frame it is canceled at this point. */\n  stop() {\n    if (this.started) {\n      this.started = false;\n      this._cancelIfNeeded();\n    }\n  }\n  /** Destroy the ticker and don't use after this. Calling this method removes all references to internal events. */\n  destroy() {\n    if (!this._protected) {\n      this.stop();\n      let listener = this._head.next;\n      while (listener) {\n        listener = listener.destroy(true);\n      }\n      this._head.destroy();\n      this._head = null;\n    }\n  }\n  /**\n   * Triggers an update. An update entails setting the\n   * current {@link ticker.Ticker#elapsedMS|elapsedMS},\n   * the current {@link ticker.Ticker#deltaTime|deltaTime},\n   * invoking all listeners with current deltaTime,\n   * and then finally setting {@link ticker.Ticker#lastTime|lastTime}\n   * with the value of currentTime that was provided.\n   * This method will be called automatically by animation\n   * frame callbacks if the ticker instance has been started\n   * and listeners are added.\n   * @param {number} [currentTime=performance.now()] - the current time of execution\n   */\n  update(currentTime = performance.now()) {\n    let elapsedMS;\n    if (currentTime > this.lastTime) {\n      elapsedMS = this.elapsedMS = currentTime - this.lastTime;\n      if (elapsedMS > this._maxElapsedMS) {\n        elapsedMS = this._maxElapsedMS;\n      }\n      elapsedMS *= this.speed;\n      if (this._minElapsedMS) {\n        const delta = currentTime - this._lastFrame | 0;\n        if (delta < this._minElapsedMS) {\n          return;\n        }\n        this._lastFrame = currentTime - delta % this._minElapsedMS;\n      }\n      this.deltaMS = elapsedMS;\n      this.deltaTime = this.deltaMS * _Ticker.targetFPMS;\n      const head = this._head;\n      let listener = head.next;\n      while (listener) {\n        listener = listener.emit(this);\n      }\n      if (!head.next) {\n        this._cancelIfNeeded();\n      }\n    } else {\n      this.deltaTime = this.deltaMS = this.elapsedMS = 0;\n    }\n    this.lastTime = currentTime;\n  }\n  /**\n   * The frames per second at which this ticker is running.\n   * The default is approximately 60 in most modern browsers.\n   * **Note:** This does not factor in the value of\n   * {@link ticker.Ticker#speed|speed}, which is specific\n   * to scaling {@link ticker.Ticker#deltaTime|deltaTime}.\n   * @member {number}\n   * @readonly\n   */\n  get FPS() {\n    return 1e3 / this.elapsedMS;\n  }\n  /**\n   * Manages the maximum amount of milliseconds allowed to\n   * elapse between invoking {@link ticker.Ticker#update|update}.\n   * This value is used to cap {@link ticker.Ticker#deltaTime|deltaTime},\n   * but does not effect the measured value of {@link ticker.Ticker#FPS|FPS}.\n   * When setting this property it is clamped to a value between\n   * `0` and `Ticker.targetFPMS * 1000`.\n   * @member {number}\n   * @default 10\n   */\n  get minFPS() {\n    return 1e3 / this._maxElapsedMS;\n  }\n  set minFPS(fps) {\n    const minFPS = Math.min(this.maxFPS, fps);\n    const minFPMS = Math.min(Math.max(0, minFPS) / 1e3, _Ticker.targetFPMS);\n    this._maxElapsedMS = 1 / minFPMS;\n  }\n  /**\n   * Manages the minimum amount of milliseconds required to\n   * elapse between invoking {@link ticker.Ticker#update|update}.\n   * This will effect the measured value of {@link ticker.Ticker#FPS|FPS}.\n   * If it is set to `0`, then there is no limit; PixiJS will render as many frames as it can.\n   * Otherwise it will be at least `minFPS`\n   * @member {number}\n   * @default 0\n   */\n  get maxFPS() {\n    if (this._minElapsedMS) {\n      return Math.round(1e3 / this._minElapsedMS);\n    }\n    return 0;\n  }\n  set maxFPS(fps) {\n    if (fps === 0) {\n      this._minElapsedMS = 0;\n    } else {\n      const maxFPS = Math.max(this.minFPS, fps);\n      this._minElapsedMS = 1 / (maxFPS / 1e3);\n    }\n  }\n  /**\n   * The shared ticker instance used by {@link AnimatedSprite} and by\n   * {@link VideoResource} to update animation frames / video textures.\n   *\n   * It may also be used by {@link Application} if created with the `sharedTicker` option property set to true.\n   *\n   * The property {@link ticker.Ticker#autoStart|autoStart} is set to `true` for this instance.\n   * Please follow the examples for usage, including how to opt-out of auto-starting the shared ticker.\n   * @example\n   * import { Ticker } from 'pixi.js';\n   *\n   * const ticker = Ticker.shared;\n   * // Set this to prevent starting this ticker when listeners are added.\n   * // By default this is true only for the Ticker.shared instance.\n   * ticker.autoStart = false;\n   *\n   * // FYI, call this to ensure the ticker is stopped. It should be stopped\n   * // if you have not attempted to render anything yet.\n   * ticker.stop();\n   *\n   * // Call this when you are ready for a running shared ticker.\n   * ticker.start();\n   * @example\n   * import { autoDetectRenderer, Container } from 'pixi.js';\n   *\n   * // You may use the shared ticker to render...\n   * const renderer = autoDetectRenderer();\n   * const stage = new Container();\n   * document.body.appendChild(renderer.view);\n   * ticker.add((time) => renderer.render(stage));\n   *\n   * // Or you can just update it manually.\n   * ticker.autoStart = false;\n   * ticker.stop();\n   * const animate = (time) => {\n   *     ticker.update(time);\n   *     renderer.render(stage);\n   *     requestAnimationFrame(animate);\n   * };\n   * animate(performance.now());\n   * @member {ticker.Ticker}\n   * @readonly\n   * @static\n   */\n  static get shared() {\n    if (!_Ticker._shared) {\n      const shared = _Ticker._shared = new _Ticker();\n      shared.autoStart = true;\n      shared._protected = true;\n    }\n    return _Ticker._shared;\n  }\n  /**\n   * The system ticker instance used by {@link BasePrepare} for core timing\n   * functionality that shouldn't usually need to be paused, unlike the `shared`\n   * ticker which drives visual animations and rendering which may want to be paused.\n   *\n   * The property {@link ticker.Ticker#autoStart|autoStart} is set to `true` for this instance.\n   * @member {ticker.Ticker}\n   * @readonly\n   * @static\n   */\n  static get system() {\n    if (!_Ticker._system) {\n      const system = _Ticker._system = new _Ticker();\n      system.autoStart = true;\n      system._protected = true;\n    }\n    return _Ticker._system;\n  }\n};\n/**\n * Target frames per millisecond.\n * @static\n */\n_Ticker.targetFPMS = 0.06;\nlet Ticker = _Ticker;\n\nexport { Ticker };\n//# sourceMappingURL=Ticker.mjs.map\n","\"use strict\";\nlet promise;\nasync function detectVideoAlphaMode() {\n  promise ?? (promise = (async () => {\n    const canvas = document.createElement(\"canvas\");\n    const gl = canvas.getContext(\"webgl\");\n    if (!gl) {\n      return \"premultiply-alpha-on-upload\";\n    }\n    const video = await new Promise((resolve) => {\n      const video2 = document.createElement(\"video\");\n      video2.onloadeddata = () => resolve(video2);\n      video2.onerror = () => resolve(null);\n      video2.autoplay = false;\n      video2.crossOrigin = \"anonymous\";\n      video2.preload = \"auto\";\n      video2.src = \"data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=\";\n      video2.load();\n    });\n    if (!video) {\n      return \"premultiply-alpha-on-upload\";\n    }\n    const texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    const framebuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    gl.framebufferTexture2D(\n      gl.FRAMEBUFFER,\n      gl.COLOR_ATTACHMENT0,\n      gl.TEXTURE_2D,\n      texture,\n      0\n    );\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n    gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, video);\n    const pixel = new Uint8Array(4);\n    gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel);\n    gl.deleteFramebuffer(framebuffer);\n    gl.deleteTexture(texture);\n    gl.getExtension(\"WEBGL_lose_context\")?.loseContext();\n    return pixel[0] <= pixel[3] ? \"premultiplied-alpha\" : \"premultiply-alpha-on-upload\";\n  })());\n  return promise;\n}\n\nexport { detectVideoAlphaMode };\n//# sourceMappingURL=detectVideoAlphaMode.mjs.map\n","import { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { Ticker } from '../../../../../ticker/Ticker.mjs';\nimport { detectVideoAlphaMode } from '../../../../../utils/browser/detectVideoAlphaMode.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nconst _VideoSource = class _VideoSource extends TextureSource {\n  constructor(options) {\n    super(options);\n    // Public\n    /** Whether or not the video is ready to play. */\n    this.isReady = false;\n    /** The upload method for this texture. */\n    this.uploadMethodId = \"video\";\n    options = {\n      ..._VideoSource.defaultOptions,\n      ...options\n    };\n    this._autoUpdate = true;\n    this._isConnectedToTicker = false;\n    this._updateFPS = options.updateFPS || 0;\n    this._msToNextUpdate = 0;\n    this.autoPlay = options.autoPlay !== false;\n    this.alphaMode = options.alphaMode ?? \"premultiply-alpha-on-upload\";\n    this._videoFrameRequestCallback = this._videoFrameRequestCallback.bind(this);\n    this._videoFrameRequestCallbackHandle = null;\n    this._load = null;\n    this._resolve = null;\n    this._reject = null;\n    this._onCanPlay = this._onCanPlay.bind(this);\n    this._onCanPlayThrough = this._onCanPlayThrough.bind(this);\n    this._onError = this._onError.bind(this);\n    this._onPlayStart = this._onPlayStart.bind(this);\n    this._onPlayStop = this._onPlayStop.bind(this);\n    this._onSeeked = this._onSeeked.bind(this);\n    if (options.autoLoad !== false) {\n      void this.load();\n    }\n  }\n  /** Update the video frame if the source is not destroyed and meets certain conditions. */\n  updateFrame() {\n    if (this.destroyed) {\n      return;\n    }\n    if (this._updateFPS) {\n      const elapsedMS = Ticker.shared.elapsedMS * this.resource.playbackRate;\n      this._msToNextUpdate = Math.floor(this._msToNextUpdate - elapsedMS);\n    }\n    if (!this._updateFPS || this._msToNextUpdate <= 0) {\n      this._msToNextUpdate = this._updateFPS ? Math.floor(1e3 / this._updateFPS) : 0;\n    }\n    if (this.isValid) {\n      this.update();\n    }\n  }\n  /** Callback to update the video frame and potentially request the next frame update. */\n  _videoFrameRequestCallback() {\n    this.updateFrame();\n    if (this.destroyed) {\n      this._videoFrameRequestCallbackHandle = null;\n    } else {\n      this._videoFrameRequestCallbackHandle = this.resource.requestVideoFrameCallback(\n        this._videoFrameRequestCallback\n      );\n    }\n  }\n  /**\n   * Checks if the resource has valid dimensions.\n   * @returns {boolean} True if width and height are set, otherwise false.\n   */\n  get isValid() {\n    return !!this.resource.videoWidth && !!this.resource.videoHeight;\n  }\n  /**\n   * Start preloading the video resource.\n   * @returns {Promise<this>} Handle the validate event\n   */\n  async load() {\n    if (this._load) {\n      return this._load;\n    }\n    const source = this.resource;\n    const options = this.options;\n    if ((source.readyState === source.HAVE_ENOUGH_DATA || source.readyState === source.HAVE_FUTURE_DATA) && source.width && source.height) {\n      source.complete = true;\n    }\n    source.addEventListener(\"play\", this._onPlayStart);\n    source.addEventListener(\"pause\", this._onPlayStop);\n    source.addEventListener(\"seeked\", this._onSeeked);\n    if (!this._isSourceReady()) {\n      if (!options.preload) {\n        source.addEventListener(\"canplay\", this._onCanPlay);\n      }\n      source.addEventListener(\"canplaythrough\", this._onCanPlayThrough);\n      source.addEventListener(\"error\", this._onError, true);\n    } else {\n      this._mediaReady();\n    }\n    this.alphaMode = await detectVideoAlphaMode();\n    this._load = new Promise((resolve, reject) => {\n      if (this.isValid) {\n        resolve(this);\n      } else {\n        this._resolve = resolve;\n        this._reject = reject;\n        if (options.preloadTimeoutMs !== void 0) {\n          this._preloadTimeout = setTimeout(() => {\n            this._onError(new ErrorEvent(`Preload exceeded timeout of ${options.preloadTimeoutMs}ms`));\n          });\n        }\n        source.load();\n      }\n    });\n    return this._load;\n  }\n  /**\n   * Handle video error events.\n   * @param event - The error event\n   */\n  _onError(event) {\n    this.resource.removeEventListener(\"error\", this._onError, true);\n    this.emit(\"error\", event);\n    if (this._reject) {\n      this._reject(event);\n      this._reject = null;\n      this._resolve = null;\n    }\n  }\n  /**\n   * Checks if the underlying source is playing.\n   * @returns True if playing.\n   */\n  _isSourcePlaying() {\n    const source = this.resource;\n    return !source.paused && !source.ended;\n  }\n  /**\n   * Checks if the underlying source is ready for playing.\n   * @returns True if ready.\n   */\n  _isSourceReady() {\n    const source = this.resource;\n    return source.readyState > 2;\n  }\n  /** Runs the update loop when the video is ready to play. */\n  _onPlayStart() {\n    if (!this.isValid) {\n      this._mediaReady();\n    }\n    this._configureAutoUpdate();\n  }\n  /** Stops the update loop when a pause event is triggered. */\n  _onPlayStop() {\n    this._configureAutoUpdate();\n  }\n  /** Handles behavior when the video completes seeking to the current playback position. */\n  _onSeeked() {\n    if (this._autoUpdate && !this._isSourcePlaying()) {\n      this._msToNextUpdate = 0;\n      this.updateFrame();\n      this._msToNextUpdate = 0;\n    }\n  }\n  _onCanPlay() {\n    const source = this.resource;\n    source.removeEventListener(\"canplay\", this._onCanPlay);\n    this._mediaReady();\n  }\n  _onCanPlayThrough() {\n    const source = this.resource;\n    source.removeEventListener(\"canplaythrough\", this._onCanPlay);\n    if (this._preloadTimeout) {\n      clearTimeout(this._preloadTimeout);\n      this._preloadTimeout = void 0;\n    }\n    this._mediaReady();\n  }\n  /** Fired when the video is loaded and ready to play. */\n  _mediaReady() {\n    const source = this.resource;\n    if (this.isValid) {\n      this.isReady = true;\n      this.resize(source.videoWidth, source.videoHeight);\n    }\n    this._msToNextUpdate = 0;\n    this.updateFrame();\n    this._msToNextUpdate = 0;\n    if (this._resolve) {\n      this._resolve(this);\n      this._resolve = null;\n      this._reject = null;\n    }\n    if (this._isSourcePlaying()) {\n      this._onPlayStart();\n    } else if (this.autoPlay) {\n      void this.resource.play();\n    }\n  }\n  /** Cleans up resources and event listeners associated with this texture. */\n  destroy() {\n    this._configureAutoUpdate();\n    const source = this.resource;\n    if (source) {\n      source.removeEventListener(\"play\", this._onPlayStart);\n      source.removeEventListener(\"pause\", this._onPlayStop);\n      source.removeEventListener(\"seeked\", this._onSeeked);\n      source.removeEventListener(\"canplay\", this._onCanPlay);\n      source.removeEventListener(\"canplaythrough\", this._onCanPlayThrough);\n      source.removeEventListener(\"error\", this._onError, true);\n      source.pause();\n      source.src = \"\";\n      source.load();\n    }\n    super.destroy();\n  }\n  /** Should the base texture automatically update itself, set to true by default. */\n  get autoUpdate() {\n    return this._autoUpdate;\n  }\n  set autoUpdate(value) {\n    if (value !== this._autoUpdate) {\n      this._autoUpdate = value;\n      this._configureAutoUpdate();\n    }\n  }\n  /**\n   * How many times a second to update the texture from the video.\n   * Leave at 0 to update at every render.\n   * A lower fps can help performance, as updating the texture at 60fps on a 30ps video may not be efficient.\n   */\n  get updateFPS() {\n    return this._updateFPS;\n  }\n  set updateFPS(value) {\n    if (value !== this._updateFPS) {\n      this._updateFPS = value;\n      this._configureAutoUpdate();\n    }\n  }\n  /**\n   * Configures the updating mechanism based on the current state and settings.\n   *\n   * This method decides between using the browser's native video frame callback or a custom ticker\n   * for updating the video frame. It ensures optimal performance and responsiveness\n   * based on the video's state, playback status, and the desired frames-per-second setting.\n   *\n   * - If `_autoUpdate` is enabled and the video source is playing:\n   *   - It will prefer the native video frame callback if available and no specific FPS is set.\n   *   - Otherwise, it will use a custom ticker for manual updates.\n   * - If `_autoUpdate` is disabled or the video isn't playing, any active update mechanisms are halted.\n   */\n  _configureAutoUpdate() {\n    if (this._autoUpdate && this._isSourcePlaying()) {\n      if (!this._updateFPS && this.resource.requestVideoFrameCallback) {\n        if (this._isConnectedToTicker) {\n          Ticker.shared.remove(this.updateFrame, this);\n          this._isConnectedToTicker = false;\n          this._msToNextUpdate = 0;\n        }\n        if (this._videoFrameRequestCallbackHandle === null) {\n          this._videoFrameRequestCallbackHandle = this.resource.requestVideoFrameCallback(\n            this._videoFrameRequestCallback\n          );\n        }\n      } else {\n        if (this._videoFrameRequestCallbackHandle !== null) {\n          this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle);\n          this._videoFrameRequestCallbackHandle = null;\n        }\n        if (!this._isConnectedToTicker) {\n          Ticker.shared.add(this.updateFrame, this);\n          this._isConnectedToTicker = true;\n          this._msToNextUpdate = 0;\n        }\n      }\n    } else {\n      if (this._videoFrameRequestCallbackHandle !== null) {\n        this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle);\n        this._videoFrameRequestCallbackHandle = null;\n      }\n      if (this._isConnectedToTicker) {\n        Ticker.shared.remove(this.updateFrame, this);\n        this._isConnectedToTicker = false;\n        this._msToNextUpdate = 0;\n      }\n    }\n  }\n  static test(resource) {\n    return globalThis.HTMLVideoElement && resource instanceof HTMLVideoElement || globalThis.VideoFrame && resource instanceof VideoFrame;\n  }\n};\n_VideoSource.extension = ExtensionType.TextureSource;\n/** The default options for video sources. */\n_VideoSource.defaultOptions = {\n  ...TextureSource.defaultOptions,\n  /** If true, the video will start loading immediately. */\n  autoLoad: true,\n  /** If true, the video will start playing as soon as it is loaded. */\n  autoPlay: true,\n  /** The number of times a second to update the texture from the video. Leave at 0 to update at every render. */\n  updateFPS: 0,\n  /** If true, the video will be loaded with the `crossorigin` attribute. */\n  crossorigin: true,\n  /** If true, the video will loop when it ends. */\n  loop: false,\n  /** If true, the video will be muted. */\n  muted: true,\n  /** If true, the video will play inline. */\n  playsinline: true,\n  /** If true, the video will be preloaded. */\n  preload: false\n};\n/**\n * Map of video MIME types that can't be directly derived from file extensions.\n * @readonly\n */\n_VideoSource.MIME_TYPES = {\n  ogv: \"video/ogg\",\n  mov: \"video/quicktime\",\n  m4v: \"video/mp4\"\n};\nlet VideoSource = _VideoSource;\n\nexport { VideoSource };\n//# sourceMappingURL=VideoSource.mjs.map\n","\"use strict\";\nconst convertToList = (input, transform, forceTransform = false) => {\n  if (!Array.isArray(input)) {\n    input = [input];\n  }\n  if (!transform) {\n    return input;\n  }\n  return input.map((item) => {\n    if (typeof item === \"string\" || forceTransform) {\n      return transform(item);\n    }\n    return item;\n  });\n};\n\nexport { convertToList };\n//# sourceMappingURL=convertToList.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\n\n\"use strict\";\nclass CacheClass {\n  constructor() {\n    this._parsers = [];\n    this._cache = /* @__PURE__ */ new Map();\n    this._cacheMap = /* @__PURE__ */ new Map();\n  }\n  /** Clear all entries. */\n  reset() {\n    this._cacheMap.clear();\n    this._cache.clear();\n  }\n  /**\n   * Check if the key exists\n   * @param key - The key to check\n   */\n  has(key) {\n    return this._cache.has(key);\n  }\n  /**\n   * Fetch entry by key\n   * @param key - The key of the entry to get\n   */\n  get(key) {\n    const result = this._cache.get(key);\n    if (!result) {\n      warn(`[Assets] Asset id ${key} was not found in the Cache`);\n    }\n    return result;\n  }\n  /**\n   * Set a value by key or keys name\n   * @param key - The key or keys to set\n   * @param value - The value to store in the cache or from which cacheable assets will be derived.\n   */\n  set(key, value) {\n    const keys = convertToList(key);\n    let cacheableAssets;\n    for (let i = 0; i < this.parsers.length; i++) {\n      const parser = this.parsers[i];\n      if (parser.test(value)) {\n        cacheableAssets = parser.getCacheableAssets(keys, value);\n        break;\n      }\n    }\n    const cacheableMap = new Map(Object.entries(cacheableAssets || {}));\n    if (!cacheableAssets) {\n      keys.forEach((key2) => {\n        cacheableMap.set(key2, value);\n      });\n    }\n    const cacheKeys = [...cacheableMap.keys()];\n    const cachedAssets = {\n      cacheKeys,\n      keys\n    };\n    keys.forEach((key2) => {\n      this._cacheMap.set(key2, cachedAssets);\n    });\n    cacheKeys.forEach((key2) => {\n      const val = cacheableAssets ? cacheableAssets[key2] : value;\n      if (this._cache.has(key2) && this._cache.get(key2) !== val) {\n        warn(\"[Cache] already has key:\", key2);\n      }\n      this._cache.set(key2, cacheableMap.get(key2));\n    });\n  }\n  /**\n   * Remove entry by key\n   *\n   * This function will also remove any associated alias from the cache also.\n   * @param key - The key of the entry to remove\n   */\n  remove(key) {\n    if (!this._cacheMap.has(key)) {\n      warn(`[Assets] Asset id ${key} was not found in the Cache`);\n      return;\n    }\n    const cacheMap = this._cacheMap.get(key);\n    const cacheKeys = cacheMap.cacheKeys;\n    cacheKeys.forEach((key2) => {\n      this._cache.delete(key2);\n    });\n    cacheMap.keys.forEach((key2) => {\n      this._cacheMap.delete(key2);\n    });\n  }\n  /** All loader parsers registered */\n  get parsers() {\n    return this._parsers;\n  }\n}\nconst Cache = new CacheClass();\n\nexport { Cache };\n//# sourceMappingURL=Cache.mjs.map\n","import { Cache } from '../../../../../assets/cache/Cache.mjs';\nimport { extensions, ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from '../sources/TextureSource.mjs';\nimport { Texture } from '../Texture.mjs';\n\n\"use strict\";\nconst sources = [];\nextensions.handleByList(ExtensionType.TextureSource, sources);\nfunction autoDetectSource(options = {}) {\n  const hasResource = options && options.resource;\n  const res = hasResource ? options.resource : options;\n  const opts = hasResource ? options : { resource: options };\n  for (let i = 0; i < sources.length; i++) {\n    const Source = sources[i];\n    if (Source.test(res)) {\n      return new Source(opts);\n    }\n  }\n  throw new Error(`Could not find a source type for resource: ${opts.resource}`);\n}\nfunction resourceToTexture(options = {}, skipCache = false) {\n  const hasResource = options && options.resource;\n  const resource = hasResource ? options.resource : options;\n  const opts = hasResource ? options : { resource: options };\n  if (!skipCache && Cache.has(resource)) {\n    return Cache.get(resource);\n  }\n  const texture = new Texture({ source: autoDetectSource(opts) });\n  texture.on(\"destroy\", () => {\n    if (Cache.has(resource)) {\n      Cache.remove(resource);\n    }\n  });\n  if (!skipCache) {\n    Cache.set(resource, texture);\n  }\n  return texture;\n}\nfunction textureFrom(id, skipCache = false) {\n  if (typeof id === \"string\") {\n    return Cache.get(id);\n  } else if (id instanceof TextureSource) {\n    return new Texture({ source: id });\n  }\n  return resourceToTexture(id, skipCache);\n}\nTexture.from = textureFrom;\n\nexport { autoDetectSource, resourceToTexture, textureFrom };\n//# sourceMappingURL=textureFrom.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { AlphaMask } from './mask/alpha/AlphaMask.mjs';\nimport { ColorMask } from './mask/color/ColorMask.mjs';\nimport { StencilMask } from './mask/stencil/StencilMask.mjs';\nimport { BufferImageSource } from './renderers/shared/texture/sources/BufferSource.mjs';\nimport { CanvasSource } from './renderers/shared/texture/sources/CanvasSource.mjs';\nimport { ImageSource } from './renderers/shared/texture/sources/ImageSource.mjs';\nimport { VideoSource } from './renderers/shared/texture/sources/VideoSource.mjs';\nimport './renderers/shared/texture/utils/textureFrom.mjs';\nimport './mask/MaskEffectManager.mjs';\n\n\"use strict\";\nextensions.add(AlphaMask, ColorMask, StencilMask, VideoSource, ImageSource, CanvasSource, BufferImageSource);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nvar LoaderParserPriority = /* @__PURE__ */ ((LoaderParserPriority2) => {\n  LoaderParserPriority2[LoaderParserPriority2[\"Low\"] = 0] = \"Low\";\n  LoaderParserPriority2[LoaderParserPriority2[\"Normal\"] = 1] = \"Normal\";\n  LoaderParserPriority2[LoaderParserPriority2[\"High\"] = 2] = \"High\";\n  return LoaderParserPriority2;\n})(LoaderParserPriority || {});\n\nexport { LoaderParserPriority };\n//# sourceMappingURL=LoaderParser.mjs.map\n","import { DOMAdapter } from '../environment/adapter.mjs';\n\n\"use strict\";\nfunction assertPath(path2) {\n  if (typeof path2 !== \"string\") {\n    throw new TypeError(`Path must be a string. Received ${JSON.stringify(path2)}`);\n  }\n}\nfunction removeUrlParams(url) {\n  const re = url.split(\"?\")[0];\n  return re.split(\"#\")[0];\n}\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\nfunction replaceAll(str, find, replace) {\n  return str.replace(new RegExp(escapeRegExp(find), \"g\"), replace);\n}\nfunction normalizeStringPosix(path2, allowAboveRoot) {\n  let res = \"\";\n  let lastSegmentLength = 0;\n  let lastSlash = -1;\n  let dots = 0;\n  let code = -1;\n  for (let i = 0; i <= path2.length; ++i) {\n    if (i < path2.length) {\n      code = path2.charCodeAt(i);\n    } else if (code === 47) {\n      break;\n    } else {\n      code = 47;\n    }\n    if (code === 47) {\n      if (lastSlash === i - 1 || dots === 1) {\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 || res.charCodeAt(res.length - 2) !== 46) {\n          if (res.length > 2) {\n            const lastSlashIndex = res.lastIndexOf(\"/\");\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = \"\";\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf(\"/\");\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = \"\";\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0) {\n            res += \"/..\";\n          } else {\n            res = \"..\";\n          }\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0) {\n          res += `/${path2.slice(lastSlash + 1, i)}`;\n        } else {\n          res = path2.slice(lastSlash + 1, i);\n        }\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\nconst path = {\n  /**\n   * Converts a path to posix format.\n   * @param path - The path to convert to posix\n   */\n  toPosix(path2) {\n    return replaceAll(path2, \"\\\\\", \"/\");\n  },\n  /**\n   * Checks if the path is a URL e.g. http://, https://\n   * @param path - The path to check\n   */\n  isUrl(path2) {\n    return /^https?:/.test(this.toPosix(path2));\n  },\n  /**\n   * Checks if the path is a data URL\n   * @param path - The path to check\n   */\n  isDataUrl(path2) {\n    return /^data:([a-z]+\\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s<>]*?)$/i.test(path2);\n  },\n  /**\n   * Checks if the path is a blob URL\n   * @param path - The path to check\n   */\n  isBlobUrl(path2) {\n    return path2.startsWith(\"blob:\");\n  },\n  /**\n   * Checks if the path has a protocol e.g. http://, https://, file:///, data:, blob:, C:/\n   * This will return true for windows file paths\n   * @param path - The path to check\n   */\n  hasProtocol(path2) {\n    return /^[^/:]+:/.test(this.toPosix(path2));\n  },\n  /**\n   * Returns the protocol of the path e.g. http://, https://, file:///, data:, blob:, C:/\n   * @param path - The path to get the protocol from\n   */\n  getProtocol(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    const matchFile = /^file:\\/\\/\\//.exec(path2);\n    if (matchFile) {\n      return matchFile[0];\n    }\n    const matchProtocol = /^[^/:]+:\\/{0,2}/.exec(path2);\n    if (matchProtocol) {\n      return matchProtocol[0];\n    }\n    return \"\";\n  },\n  /**\n   * Converts URL to an absolute path.\n   * When loading from a Web Worker, we must use absolute paths.\n   * If the URL is already absolute we return it as is\n   * If it's not, we convert it\n   * @param url - The URL to test\n   * @param customBaseUrl - The base URL to use\n   * @param customRootUrl - The root URL to use\n   */\n  toAbsolute(url, customBaseUrl, customRootUrl) {\n    assertPath(url);\n    if (this.isDataUrl(url) || this.isBlobUrl(url))\n      return url;\n    const baseUrl = removeUrlParams(this.toPosix(customBaseUrl ?? DOMAdapter.get().getBaseUrl()));\n    const rootUrl = removeUrlParams(this.toPosix(customRootUrl ?? this.rootname(baseUrl)));\n    url = this.toPosix(url);\n    if (url.startsWith(\"/\")) {\n      return path.join(rootUrl, url.slice(1));\n    }\n    const absolutePath = this.isAbsolute(url) ? url : this.join(baseUrl, url);\n    return absolutePath;\n  },\n  /**\n   * Normalizes the given path, resolving '..' and '.' segments\n   * @param path - The path to normalize\n   */\n  normalize(path2) {\n    assertPath(path2);\n    if (path2.length === 0)\n      return \".\";\n    if (this.isDataUrl(path2) || this.isBlobUrl(path2))\n      return path2;\n    path2 = this.toPosix(path2);\n    let protocol = \"\";\n    const isAbsolute = path2.startsWith(\"/\");\n    if (this.hasProtocol(path2)) {\n      protocol = this.rootname(path2);\n      path2 = path2.slice(protocol.length);\n    }\n    const trailingSeparator = path2.endsWith(\"/\");\n    path2 = normalizeStringPosix(path2, false);\n    if (path2.length > 0 && trailingSeparator)\n      path2 += \"/\";\n    if (isAbsolute)\n      return `/${path2}`;\n    return protocol + path2;\n  },\n  /**\n   * Determines if path is an absolute path.\n   * Absolute paths can be urls, data urls, or paths on disk\n   * @param path - The path to test\n   */\n  isAbsolute(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    if (this.hasProtocol(path2))\n      return true;\n    return path2.startsWith(\"/\");\n  },\n  /**\n   * Joins all given path segments together using the platform-specific separator as a delimiter,\n   * then normalizes the resulting path\n   * @param segments - The segments of the path to join\n   */\n  join(...segments) {\n    if (segments.length === 0) {\n      return \".\";\n    }\n    let joined;\n    for (let i = 0; i < segments.length; ++i) {\n      const arg = segments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === void 0)\n          joined = arg;\n        else {\n          const prevArg = segments[i - 1] ?? \"\";\n          if (this.joinExtensions.includes(this.extname(prevArg).toLowerCase())) {\n            joined += `/../${arg}`;\n          } else {\n            joined += `/${arg}`;\n          }\n        }\n      }\n    }\n    if (joined === void 0) {\n      return \".\";\n    }\n    return this.normalize(joined);\n  },\n  /**\n   * Returns the directory name of a path\n   * @param path - The path to parse\n   */\n  dirname(path2) {\n    assertPath(path2);\n    if (path2.length === 0)\n      return \".\";\n    path2 = this.toPosix(path2);\n    let code = path2.charCodeAt(0);\n    const hasRoot = code === 47;\n    let end = -1;\n    let matchedSlash = true;\n    const proto = this.getProtocol(path2);\n    const origpath = path2;\n    path2 = path2.slice(proto.length);\n    for (let i = path2.length - 1; i >= 1; --i) {\n      code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n        matchedSlash = false;\n      }\n    }\n    if (end === -1)\n      return hasRoot ? \"/\" : this.isUrl(origpath) ? proto + path2 : proto;\n    if (hasRoot && end === 1)\n      return \"//\";\n    return proto + path2.slice(0, end);\n  },\n  /**\n   * Returns the root of the path e.g. /, C:/, file:///, http://domain.com/\n   * @param path - The path to parse\n   */\n  rootname(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    let root = \"\";\n    if (path2.startsWith(\"/\"))\n      root = \"/\";\n    else {\n      root = this.getProtocol(path2);\n    }\n    if (this.isUrl(path2)) {\n      const index = path2.indexOf(\"/\", root.length);\n      if (index !== -1) {\n        root = path2.slice(0, index);\n      } else\n        root = path2;\n      if (!root.endsWith(\"/\"))\n        root += \"/\";\n    }\n    return root;\n  },\n  /**\n   * Returns the last portion of a path\n   * @param path - The path to test\n   * @param ext - Optional extension to remove\n   */\n  basename(path2, ext) {\n    assertPath(path2);\n    if (ext)\n      assertPath(ext);\n    path2 = removeUrlParams(this.toPosix(path2));\n    let start = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let i;\n    if (ext !== void 0 && ext.length > 0 && ext.length <= path2.length) {\n      if (ext.length === path2.length && ext === path2)\n        return \"\";\n      let extIdx = ext.length - 1;\n      let firstNonSlashEnd = -1;\n      for (i = path2.length - 1; i >= 0; --i) {\n        const code = path2.charCodeAt(i);\n        if (code === 47) {\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                end = i;\n              }\n            } else {\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n      if (start === end)\n        end = firstNonSlashEnd;\n      else if (end === -1)\n        end = path2.length;\n      return path2.slice(start, end);\n    }\n    for (i = path2.length - 1; i >= 0; --i) {\n      if (path2.charCodeAt(i) === 47) {\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n    }\n    if (end === -1)\n      return \"\";\n    return path2.slice(start, end);\n  },\n  /**\n   * Returns the extension of the path, from the last occurrence of the . (period) character to end of string in the last\n   * portion of the path. If there is no . in the last portion of the path, or if there are no . characters other than\n   * the first character of the basename of path, an empty string is returned.\n   * @param path - The path to parse\n   */\n  extname(path2) {\n    assertPath(path2);\n    path2 = removeUrlParams(this.toPosix(path2));\n    let startDot = -1;\n    let startPart = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let preDotState = 0;\n    for (let i = path2.length - 1; i >= 0; --i) {\n      const code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46) {\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        preDotState = -1;\n      }\n    }\n    if (startDot === -1 || end === -1 || preDotState === 0 || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return \"\";\n    }\n    return path2.slice(startDot, end);\n  },\n  /**\n   * Parses a path into an object containing the 'root', `dir`, `base`, `ext`, and `name` properties.\n   * @param path - The path to parse\n   */\n  parse(path2) {\n    assertPath(path2);\n    const ret = { root: \"\", dir: \"\", base: \"\", ext: \"\", name: \"\" };\n    if (path2.length === 0)\n      return ret;\n    path2 = removeUrlParams(this.toPosix(path2));\n    let code = path2.charCodeAt(0);\n    const isAbsolute = this.isAbsolute(path2);\n    let start;\n    const protocol = \"\";\n    ret.root = this.rootname(path2);\n    if (isAbsolute || this.hasProtocol(path2)) {\n      start = 1;\n    } else {\n      start = 0;\n    }\n    let startDot = -1;\n    let startPart = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let i = path2.length - 1;\n    let preDotState = 0;\n    for (; i >= start; --i) {\n      code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46) {\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        preDotState = -1;\n      }\n    }\n    if (startDot === -1 || end === -1 || preDotState === 0 || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute)\n          ret.base = ret.name = path2.slice(1, end);\n        else\n          ret.base = ret.name = path2.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path2.slice(1, startDot);\n        ret.base = path2.slice(1, end);\n      } else {\n        ret.name = path2.slice(startPart, startDot);\n        ret.base = path2.slice(startPart, end);\n      }\n      ret.ext = path2.slice(startDot, end);\n    }\n    ret.dir = this.dirname(path2);\n    if (protocol)\n      ret.dir = protocol + ret.dir;\n    return ret;\n  },\n  sep: \"/\",\n  delimiter: \":\",\n  joinExtensions: [\".html\"]\n};\n\nexport { path };\n//# sourceMappingURL=path.mjs.map\n","\"use strict\";\nfunction processX(base, ids, depth, result, tags) {\n  const id = ids[depth];\n  for (let i = 0; i < id.length; i++) {\n    const value = id[i];\n    if (depth < ids.length - 1) {\n      processX(base.replace(result[depth], value), ids, depth + 1, result, tags);\n    } else {\n      tags.push(base.replace(result[depth], value));\n    }\n  }\n}\nfunction createStringVariations(string) {\n  const regex = /\\{(.*?)\\}/g;\n  const result = string.match(regex);\n  const tags = [];\n  if (result) {\n    const ids = [];\n    result.forEach((vars) => {\n      const split = vars.substring(1, vars.length - 1).split(\",\");\n      ids.push(split);\n    });\n    processX(string, ids, 0, result, tags);\n  } else {\n    tags.push(string);\n  }\n  return tags;\n}\n\nexport { createStringVariations };\n//# sourceMappingURL=createStringVariations.mjs.map\n","\"use strict\";\nconst isSingleItem = (item) => !Array.isArray(item);\n\nexport { isSingleItem };\n//# sourceMappingURL=isSingleItem.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { path } from '../../utils/path.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\nimport { createStringVariations } from '../utils/createStringVariations.mjs';\nimport { isSingleItem } from '../utils/isSingleItem.mjs';\n\n\"use strict\";\nclass Resolver {\n  constructor() {\n    this._defaultBundleIdentifierOptions = {\n      connector: \"-\",\n      createBundleAssetId: (bundleId, assetId) => `${bundleId}${this._bundleIdConnector}${assetId}`,\n      extractAssetIdFromBundle: (bundleId, assetBundleId) => assetBundleId.replace(`${bundleId}${this._bundleIdConnector}`, \"\")\n    };\n    /** The character that is used to connect the bundleId and the assetId when generating a bundle asset id key */\n    this._bundleIdConnector = this._defaultBundleIdentifierOptions.connector;\n    /**\n     * A function that generates a bundle asset id key from a bundleId and an assetId\n     * @param bundleId - the bundleId\n     * @param assetId  - the assetId\n     * @returns the bundle asset id key\n     */\n    this._createBundleAssetId = this._defaultBundleIdentifierOptions.createBundleAssetId;\n    /**\n     * A function that generates an assetId from a bundle asset id key. This is the reverse of generateBundleAssetId\n     * @param bundleId - the bundleId\n     * @param assetBundleId - the bundle asset id key\n     * @returns the assetId\n     */\n    this._extractAssetIdFromBundle = this._defaultBundleIdentifierOptions.extractAssetIdFromBundle;\n    this._assetMap = {};\n    this._preferredOrder = [];\n    this._parsers = [];\n    this._resolverHash = {};\n    this._bundles = {};\n  }\n  /**\n   * Override how the resolver deals with generating bundle ids.\n   * must be called before any bundles are added\n   * @param bundleIdentifier - the bundle identifier options\n   */\n  setBundleIdentifier(bundleIdentifier) {\n    this._bundleIdConnector = bundleIdentifier.connector ?? this._bundleIdConnector;\n    this._createBundleAssetId = bundleIdentifier.createBundleAssetId ?? this._createBundleAssetId;\n    this._extractAssetIdFromBundle = bundleIdentifier.extractAssetIdFromBundle ?? this._extractAssetIdFromBundle;\n    if (this._extractAssetIdFromBundle(\"foo\", this._createBundleAssetId(\"foo\", \"bar\")) !== \"bar\") {\n      throw new Error(\"[Resolver] GenerateBundleAssetId are not working correctly\");\n    }\n  }\n  /**\n   * Let the resolver know which assets you prefer to use when resolving assets.\n   * Multiple prefer user defined rules can be added.\n   * @example\n   * resolver.prefer({\n   *     // first look for something with the correct format, and then then correct resolution\n   *     priority: ['format', 'resolution'],\n   *     params:{\n   *         format:'webp', // prefer webp images\n   *         resolution: 2, // prefer a resolution of 2\n   *     }\n   * })\n   * resolver.add('foo', ['bar@2x.webp', 'bar@2x.png', 'bar.webp', 'bar.png']);\n   * resolver.resolveUrl('foo') // => 'bar@2x.webp'\n   * @param preferOrders - the prefer options\n   */\n  prefer(...preferOrders) {\n    preferOrders.forEach((prefer) => {\n      this._preferredOrder.push(prefer);\n      if (!prefer.priority) {\n        prefer.priority = Object.keys(prefer.params);\n      }\n    });\n    this._resolverHash = {};\n  }\n  /**\n   * Set the base path to prepend to all urls when resolving\n   * @example\n   * resolver.basePath = 'https://home.com/';\n   * resolver.add('foo', 'bar.ong');\n   * resolver.resolveUrl('foo', 'bar.png'); // => 'https://home.com/bar.png'\n   * @param basePath - the base path to use\n   */\n  set basePath(basePath) {\n    this._basePath = basePath;\n  }\n  get basePath() {\n    return this._basePath;\n  }\n  /**\n   * Set the root path for root-relative URLs. By default the `basePath`'s root is used. If no `basePath` is set, then the\n   * default value for browsers is `window.location.origin`\n   * @example\n   * // Application hosted on https://home.com/some-path/index.html\n   * resolver.basePath = 'https://home.com/some-path/';\n   * resolver.rootPath = 'https://home.com/';\n   * resolver.add('foo', '/bar.png');\n   * resolver.resolveUrl('foo', '/bar.png'); // => 'https://home.com/bar.png'\n   * @param rootPath - the root path to use\n   */\n  set rootPath(rootPath) {\n    this._rootPath = rootPath;\n  }\n  get rootPath() {\n    return this._rootPath;\n  }\n  /**\n   * All the active URL parsers that help the parser to extract information and create\n   * an asset object-based on parsing the URL itself.\n   *\n   * Can be added using the extensions API\n   * @example\n   * resolver.add('foo', [\n   *     {\n   *         resolution: 2,\n   *         format: 'png',\n   *         src: 'image@2x.png',\n   *     },\n   *     {\n   *         resolution:1,\n   *         format:'png',\n   *         src: 'image.png',\n   *     },\n   * ]);\n   *\n   * // With a url parser the information such as resolution and file format could extracted from the url itself:\n   * extensions.add({\n   *     extension: ExtensionType.ResolveParser,\n   *     test: loadTextures.test, // test if url ends in an image\n   *     parse: (value: string) =>\n   *     ({\n   *         resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n   *         format: value.split('.').pop(),\n   *         src: value,\n   *     }),\n   * });\n   *\n   * // Now resolution and format can be extracted from the url\n   * resolver.add('foo', [\n   *     'image@2x.png',\n   *     'image.png',\n   * ]);\n   */\n  get parsers() {\n    return this._parsers;\n  }\n  /** Used for testing, this resets the resolver to its initial state */\n  reset() {\n    this.setBundleIdentifier(this._defaultBundleIdentifierOptions);\n    this._assetMap = {};\n    this._preferredOrder = [];\n    this._resolverHash = {};\n    this._rootPath = null;\n    this._basePath = null;\n    this._manifest = null;\n    this._bundles = {};\n    this._defaultSearchParams = null;\n  }\n  /**\n   * Sets the default URL search parameters for the URL resolver. The urls can be specified as a string or an object.\n   * @param searchParams - the default url parameters to append when resolving urls\n   */\n  setDefaultSearchParams(searchParams) {\n    if (typeof searchParams === \"string\") {\n      this._defaultSearchParams = searchParams;\n    } else {\n      const queryValues = searchParams;\n      this._defaultSearchParams = Object.keys(queryValues).map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(queryValues[key])}`).join(\"&\");\n    }\n  }\n  /**\n   * Returns the aliases for a given asset\n   * @param asset - the asset to get the aliases for\n   */\n  getAlias(asset) {\n    const { alias, src } = asset;\n    const aliasesToUse = convertToList(\n      alias || src,\n      (value) => {\n        if (typeof value === \"string\")\n          return value;\n        if (Array.isArray(value))\n          return value.map((v) => v?.src ?? v);\n        if (value?.src)\n          return value.src;\n        return value;\n      },\n      true\n    );\n    return aliasesToUse;\n  }\n  /**\n   * Add a manifest to the asset resolver. This is a nice way to add all the asset information in one go.\n   * generally a manifest would be built using a tool.\n   * @param manifest - the manifest to add to the resolver\n   */\n  addManifest(manifest) {\n    if (this._manifest) {\n      warn(\"[Resolver] Manifest already exists, this will be overwritten\");\n    }\n    this._manifest = manifest;\n    manifest.bundles.forEach((bundle) => {\n      this.addBundle(bundle.name, bundle.assets);\n    });\n  }\n  /**\n   * This adds a bundle of assets in one go so that you can resolve them as a group.\n   * For example you could add a bundle for each screen in you pixi app\n   * @example\n   * resolver.addBundle('animals', [\n   *  { alias: 'bunny', src: 'bunny.png' },\n   *  { alias: 'chicken', src: 'chicken.png' },\n   *  { alias: 'thumper', src: 'thumper.png' },\n   * ]);\n   * // or\n   * resolver.addBundle('animals', {\n   *     bunny: 'bunny.png',\n   *     chicken: 'chicken.png',\n   *     thumper: 'thumper.png',\n   * });\n   *\n   * const resolvedAssets = await resolver.resolveBundle('animals');\n   * @param bundleId - The id of the bundle to add\n   * @param assets - A record of the asset or assets that will be chosen from when loading via the specified key\n   */\n  addBundle(bundleId, assets) {\n    const assetNames = [];\n    let convertedAssets = assets;\n    if (!Array.isArray(assets)) {\n      convertedAssets = Object.entries(assets).map(([alias, src]) => {\n        if (typeof src === \"string\" || Array.isArray(src)) {\n          return { alias, src };\n        }\n        return { alias, ...src };\n      });\n    }\n    convertedAssets.forEach((asset) => {\n      const srcs = asset.src;\n      const aliases = asset.alias;\n      let ids;\n      if (typeof aliases === \"string\") {\n        const bundleAssetId = this._createBundleAssetId(bundleId, aliases);\n        assetNames.push(bundleAssetId);\n        ids = [aliases, bundleAssetId];\n      } else {\n        const bundleIds = aliases.map((name) => this._createBundleAssetId(bundleId, name));\n        assetNames.push(...bundleIds);\n        ids = [...aliases, ...bundleIds];\n      }\n      this.add({\n        ...asset,\n        ...{\n          alias: ids,\n          src: srcs\n        }\n      });\n    });\n    this._bundles[bundleId] = assetNames;\n  }\n  /**\n   * Tells the resolver what keys are associated with witch asset.\n   * The most important thing the resolver does\n   * @example\n   * // Single key, single asset:\n   * resolver.add({alias: 'foo', src: 'bar.png');\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   *\n   * // Multiple keys, single asset:\n   * resolver.add({alias: ['foo', 'boo'], src: 'bar.png'});\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   * resolver.resolveUrl('boo') // => 'bar.png'\n   *\n   * // Multiple keys, multiple assets:\n   * resolver.add({alias: ['foo', 'boo'], src: ['bar.png', 'bar.webp']});\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   *\n   * // Add custom data attached to the resolver\n   * Resolver.add({\n   *     alias: 'bunnyBooBooSmooth',\n   *     src: 'bunny{png,webp}',\n   *     data: { scaleMode:SCALE_MODES.NEAREST }, // Base texture options\n   * });\n   *\n   * resolver.resolve('bunnyBooBooSmooth') // => { src: 'bunny.png', data: { scaleMode: SCALE_MODES.NEAREST } }\n   * @param aliases - the UnresolvedAsset or array of UnresolvedAssets to add to the resolver\n   */\n  add(aliases) {\n    const assets = [];\n    if (Array.isArray(aliases)) {\n      assets.push(...aliases);\n    } else {\n      assets.push(aliases);\n    }\n    let keyCheck;\n    keyCheck = (key) => {\n      if (this.hasKey(key)) {\n        warn(`[Resolver] already has key: ${key} overwriting`);\n      }\n    };\n    const assetArray = convertToList(assets);\n    assetArray.forEach((asset) => {\n      const { src } = asset;\n      let { data, format, loadParser } = asset;\n      const srcsToUse = convertToList(src).map((src2) => {\n        if (typeof src2 === \"string\") {\n          return createStringVariations(src2);\n        }\n        return Array.isArray(src2) ? src2 : [src2];\n      });\n      const aliasesToUse = this.getAlias(asset);\n      Array.isArray(aliasesToUse) ? aliasesToUse.forEach(keyCheck) : keyCheck(aliasesToUse);\n      const resolvedAssets = [];\n      srcsToUse.forEach((srcs) => {\n        srcs.forEach((src2) => {\n          let formattedAsset = {};\n          if (typeof src2 !== \"object\") {\n            formattedAsset.src = src2;\n            for (let i = 0; i < this._parsers.length; i++) {\n              const parser = this._parsers[i];\n              if (parser.test(src2)) {\n                formattedAsset = parser.parse(src2);\n                break;\n              }\n            }\n          } else {\n            data = src2.data ?? data;\n            format = src2.format ?? format;\n            loadParser = src2.loadParser ?? loadParser;\n            formattedAsset = {\n              ...formattedAsset,\n              ...src2\n            };\n          }\n          if (!aliasesToUse) {\n            throw new Error(`[Resolver] alias is undefined for this asset: ${formattedAsset.src}`);\n          }\n          formattedAsset = this._buildResolvedAsset(formattedAsset, {\n            aliases: aliasesToUse,\n            data,\n            format,\n            loadParser\n          });\n          resolvedAssets.push(formattedAsset);\n        });\n      });\n      aliasesToUse.forEach((alias) => {\n        this._assetMap[alias] = resolvedAssets;\n      });\n    });\n  }\n  // TODO: this needs an overload like load did in Assets\n  /**\n   * If the resolver has had a manifest set via setManifest, this will return the assets urls for\n   * a given bundleId or bundleIds.\n   * @example\n   * // Manifest Example\n   * const manifest = {\n   *     bundles: [\n   *         {\n   *             name: 'load-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'background',\n   *                     src: 'sunset.png',\n   *                 },\n   *                 {\n   *                     alias: 'bar',\n   *                     src: 'load-bar.{png,webp}',\n   *                 },\n   *             ],\n   *         },\n   *         {\n   *             name: 'game-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'character',\n   *                     src: 'robot.png',\n   *                 },\n   *                 {\n   *                     alias: 'enemy',\n   *                     src: 'bad-guy.png',\n   *                 },\n   *             ],\n   *         },\n   *     ]\n   * };\n   *\n   * resolver.setManifest(manifest);\n   * const resolved = resolver.resolveBundle('load-screen');\n   * @param bundleIds - The bundle ids to resolve\n   * @returns All the bundles assets or a hash of assets for each bundle specified\n   */\n  resolveBundle(bundleIds) {\n    const singleAsset = isSingleItem(bundleIds);\n    bundleIds = convertToList(bundleIds);\n    const out = {};\n    bundleIds.forEach((bundleId) => {\n      const assetNames = this._bundles[bundleId];\n      if (assetNames) {\n        const results = this.resolve(assetNames);\n        const assets = {};\n        for (const key in results) {\n          const asset = results[key];\n          assets[this._extractAssetIdFromBundle(bundleId, key)] = asset;\n        }\n        out[bundleId] = assets;\n      }\n    });\n    return singleAsset ? out[bundleIds[0]] : out;\n  }\n  /**\n   * Does exactly what resolve does, but returns just the URL rather than the whole asset object\n   * @param key - The key or keys to resolve\n   * @returns - The URLs associated with the key(s)\n   */\n  resolveUrl(key) {\n    const result = this.resolve(key);\n    if (typeof key !== \"string\") {\n      const out = {};\n      for (const i in result) {\n        out[i] = result[i].src;\n      }\n      return out;\n    }\n    return result.src;\n  }\n  resolve(keys) {\n    const singleAsset = isSingleItem(keys);\n    keys = convertToList(keys);\n    const result = {};\n    keys.forEach((key) => {\n      if (!this._resolverHash[key]) {\n        if (this._assetMap[key]) {\n          let assets = this._assetMap[key];\n          const preferredOrder = this._getPreferredOrder(assets);\n          preferredOrder?.priority.forEach((priorityKey) => {\n            preferredOrder.params[priorityKey].forEach((value) => {\n              const filteredAssets = assets.filter((asset) => {\n                if (asset[priorityKey]) {\n                  return asset[priorityKey] === value;\n                }\n                return false;\n              });\n              if (filteredAssets.length) {\n                assets = filteredAssets;\n              }\n            });\n          });\n          this._resolverHash[key] = assets[0];\n        } else {\n          this._resolverHash[key] = this._buildResolvedAsset({\n            alias: [key],\n            src: key\n          }, {});\n        }\n      }\n      result[key] = this._resolverHash[key];\n    });\n    return singleAsset ? result[keys[0]] : result;\n  }\n  /**\n   * Checks if an asset with a given key exists in the resolver\n   * @param key - The key of the asset\n   */\n  hasKey(key) {\n    return !!this._assetMap[key];\n  }\n  /**\n   * Checks if a bundle with the given key exists in the resolver\n   * @param key - The key of the bundle\n   */\n  hasBundle(key) {\n    return !!this._bundles[key];\n  }\n  /**\n   * Internal function for figuring out what prefer criteria an asset should use.\n   * @param assets\n   */\n  _getPreferredOrder(assets) {\n    for (let i = 0; i < assets.length; i++) {\n      const asset = assets[0];\n      const preferred = this._preferredOrder.find((preference) => preference.params.format.includes(asset.format));\n      if (preferred) {\n        return preferred;\n      }\n    }\n    return this._preferredOrder[0];\n  }\n  /**\n   * Appends the default url parameters to the url\n   * @param url - The url to append the default parameters to\n   * @returns - The url with the default parameters appended\n   */\n  _appendDefaultSearchParams(url) {\n    if (!this._defaultSearchParams)\n      return url;\n    const paramConnector = /\\?/.test(url) ? \"&\" : \"?\";\n    return `${url}${paramConnector}${this._defaultSearchParams}`;\n  }\n  _buildResolvedAsset(formattedAsset, data) {\n    const { aliases, data: assetData, loadParser, format } = data;\n    if (this._basePath || this._rootPath) {\n      formattedAsset.src = path.toAbsolute(formattedAsset.src, this._basePath, this._rootPath);\n    }\n    formattedAsset.alias = aliases ?? formattedAsset.alias ?? [formattedAsset.src];\n    formattedAsset.src = this._appendDefaultSearchParams(formattedAsset.src);\n    formattedAsset.data = { ...assetData || {}, ...formattedAsset.data };\n    formattedAsset.loadParser = loadParser ?? formattedAsset.loadParser;\n    formattedAsset.format = format ?? formattedAsset.format ?? getUrlExtension(formattedAsset.src);\n    return formattedAsset;\n  }\n}\n/**\n * The prefix that denotes a URL is for a retina asset.\n * @static\n * @name RETINA_PREFIX\n * @type {RegExp}\n * @default /@([0-9\\.]+)x/\n * @example `@2x`\n */\nResolver.RETINA_PREFIX = /@([0-9\\.]+)x/;\nfunction getUrlExtension(url) {\n  return url.split(\".\").pop().split(\"?\").shift().split(\"#\").shift();\n}\n\nexport { Resolver, getUrlExtension };\n//# sourceMappingURL=Resolver.mjs.map\n","\"use strict\";\nconst copySearchParams = (targetUrl, sourceUrl) => {\n  const searchParams = sourceUrl.split(\"?\")[1];\n  if (searchParams) {\n    targetUrl += `?${searchParams}`;\n  }\n  return targetUrl;\n};\n\nexport { copySearchParams };\n//# sourceMappingURL=copySearchParams.mjs.map\n","import { Rectangle } from '../maths/shapes/Rectangle.mjs';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture.mjs';\n\n\"use strict\";\nconst _Spritesheet = class _Spritesheet {\n  /**\n   * @param texture - Reference to the source BaseTexture object.\n   * @param {object} data - Spritesheet image data.\n   */\n  constructor(texture, data) {\n    /** For multi-packed spritesheets, this contains a reference to all the other spritesheets it depends on. */\n    this.linkedSheets = [];\n    this._texture = texture instanceof Texture ? texture : null;\n    this.textureSource = texture.source;\n    this.textures = {};\n    this.animations = {};\n    this.data = data;\n    const metaResolution = parseFloat(data.meta.scale);\n    if (metaResolution) {\n      this.resolution = metaResolution;\n      texture.source.resolution = this.resolution;\n    } else {\n      this.resolution = texture.source._resolution;\n    }\n    this._frames = this.data.frames;\n    this._frameKeys = Object.keys(this._frames);\n    this._batchIndex = 0;\n    this._callback = null;\n  }\n  /**\n   * Parser spritesheet from loaded data. This is done asynchronously\n   * to prevent creating too many Texture within a single process.\n   */\n  parse() {\n    return new Promise((resolve) => {\n      this._callback = resolve;\n      this._batchIndex = 0;\n      if (this._frameKeys.length <= _Spritesheet.BATCH_SIZE) {\n        this._processFrames(0);\n        this._processAnimations();\n        this._parseComplete();\n      } else {\n        this._nextBatch();\n      }\n    });\n  }\n  /**\n   * Process a batch of frames\n   * @param initialFrameIndex - The index of frame to start.\n   */\n  _processFrames(initialFrameIndex) {\n    let frameIndex = initialFrameIndex;\n    const maxFrames = _Spritesheet.BATCH_SIZE;\n    while (frameIndex - initialFrameIndex < maxFrames && frameIndex < this._frameKeys.length) {\n      const i = this._frameKeys[frameIndex];\n      const data = this._frames[i];\n      const rect = data.frame;\n      if (rect) {\n        let frame = null;\n        let trim = null;\n        const sourceSize = data.trimmed !== false && data.sourceSize ? data.sourceSize : data.frame;\n        const orig = new Rectangle(\n          0,\n          0,\n          Math.floor(sourceSize.w) / this.resolution,\n          Math.floor(sourceSize.h) / this.resolution\n        );\n        if (data.rotated) {\n          frame = new Rectangle(\n            Math.floor(rect.x) / this.resolution,\n            Math.floor(rect.y) / this.resolution,\n            Math.floor(rect.h) / this.resolution,\n            Math.floor(rect.w) / this.resolution\n          );\n        } else {\n          frame = new Rectangle(\n            Math.floor(rect.x) / this.resolution,\n            Math.floor(rect.y) / this.resolution,\n            Math.floor(rect.w) / this.resolution,\n            Math.floor(rect.h) / this.resolution\n          );\n        }\n        if (data.trimmed !== false && data.spriteSourceSize) {\n          trim = new Rectangle(\n            Math.floor(data.spriteSourceSize.x) / this.resolution,\n            Math.floor(data.spriteSourceSize.y) / this.resolution,\n            Math.floor(rect.w) / this.resolution,\n            Math.floor(rect.h) / this.resolution\n          );\n        }\n        this.textures[i] = new Texture({\n          source: this.textureSource,\n          frame,\n          orig,\n          trim,\n          rotate: data.rotated ? 2 : 0,\n          defaultAnchor: data.anchor,\n          defaultBorders: data.borders,\n          label: i.toString()\n        });\n      }\n      frameIndex++;\n    }\n  }\n  /** Parse animations config. */\n  _processAnimations() {\n    const animations = this.data.animations || {};\n    for (const animName in animations) {\n      this.animations[animName] = [];\n      for (let i = 0; i < animations[animName].length; i++) {\n        const frameName = animations[animName][i];\n        this.animations[animName].push(this.textures[frameName]);\n      }\n    }\n  }\n  /** The parse has completed. */\n  _parseComplete() {\n    const callback = this._callback;\n    this._callback = null;\n    this._batchIndex = 0;\n    callback.call(this, this.textures);\n  }\n  /** Begin the next batch of textures. */\n  _nextBatch() {\n    this._processFrames(this._batchIndex * _Spritesheet.BATCH_SIZE);\n    this._batchIndex++;\n    setTimeout(() => {\n      if (this._batchIndex * _Spritesheet.BATCH_SIZE < this._frameKeys.length) {\n        this._nextBatch();\n      } else {\n        this._processAnimations();\n        this._parseComplete();\n      }\n    }, 0);\n  }\n  /**\n   * Destroy Spritesheet and don't use after this.\n   * @param {boolean} [destroyBase=false] - Whether to destroy the base texture as well\n   */\n  destroy(destroyBase = false) {\n    for (const i in this.textures) {\n      this.textures[i].destroy();\n    }\n    this._frames = null;\n    this._frameKeys = null;\n    this.data = null;\n    this.textures = null;\n    if (destroyBase) {\n      this._texture?.destroy();\n      this.textureSource.destroy();\n    }\n    this._texture = null;\n    this.textureSource = null;\n    this.linkedSheets = [];\n  }\n};\n/** The maximum number of Textures to build per process. */\n_Spritesheet.BATCH_SIZE = 1e3;\nlet Spritesheet = _Spritesheet;\n\nexport { Spritesheet };\n//# sourceMappingURL=Spritesheet.mjs.map\n","import { LoaderParserPriority } from '../assets/loader/parsers/LoaderParser.mjs';\nimport { Resolver } from '../assets/resolver/Resolver.mjs';\nimport { copySearchParams } from '../assets/utils/copySearchParams.mjs';\nimport { ExtensionType } from '../extensions/Extensions.mjs';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture.mjs';\nimport { path } from '../utils/path.mjs';\nimport { Spritesheet } from './Spritesheet.mjs';\n\n\"use strict\";\nconst validImages = [\n  \"jpg\",\n  \"png\",\n  \"jpeg\",\n  \"avif\",\n  \"webp\",\n  \"basis\",\n  \"etc2\",\n  \"bc7\",\n  \"bc6h\",\n  \"bc5\",\n  \"bc4\",\n  \"bc3\",\n  \"bc2\",\n  \"bc1\",\n  \"eac\",\n  \"astc\"\n];\nfunction getCacheableAssets(keys, asset, ignoreMultiPack) {\n  const out = {};\n  keys.forEach((key) => {\n    out[key] = asset;\n  });\n  Object.keys(asset.textures).forEach((key) => {\n    out[key] = asset.textures[key];\n  });\n  if (!ignoreMultiPack) {\n    const basePath = path.dirname(keys[0]);\n    asset.linkedSheets.forEach((item, i) => {\n      const out2 = getCacheableAssets([`${basePath}/${asset.data.meta.related_multi_packs[i]}`], item, true);\n      Object.assign(out, out2);\n    });\n  }\n  return out;\n}\nconst spritesheetAsset = {\n  extension: ExtensionType.Asset,\n  /** Handle the caching of the related Spritesheet Textures */\n  cache: {\n    test: (asset) => asset instanceof Spritesheet,\n    getCacheableAssets: (keys, asset) => getCacheableAssets(keys, asset, false)\n  },\n  /** Resolve the resolution of the asset. */\n  resolver: {\n    test: (value) => {\n      const tempURL = value.split(\"?\")[0];\n      const split = tempURL.split(\".\");\n      const extension = split.pop();\n      const format = split.pop();\n      return extension === \"json\" && validImages.includes(format);\n    },\n    parse: (value) => {\n      const split = value.split(\".\");\n      return {\n        resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? \"1\"),\n        format: split[split.length - 2],\n        src: value\n      };\n    }\n  },\n  /**\n   * Loader plugin that parses sprite sheets!\n   * once the JSON has been loaded this checks to see if the JSON is spritesheet data.\n   * If it is, we load the spritesheets image and parse the data into Spritesheet\n   * All textures in the sprite sheet are then added to the cache\n   */\n  loader: {\n    name: \"spritesheetLoader\",\n    extension: {\n      type: ExtensionType.LoadParser,\n      priority: LoaderParserPriority.Normal\n    },\n    async testParse(asset, options) {\n      return path.extname(options.src).toLowerCase() === \".json\" && !!asset.frames;\n    },\n    async parse(asset, options, loader) {\n      const {\n        texture: imageTexture,\n        // if user need to use preloaded texture\n        imageFilename\n        // if user need to use custom filename (not from jsonFile.meta.image)\n      } = options?.data ?? {};\n      let basePath = path.dirname(options.src);\n      if (basePath && basePath.lastIndexOf(\"/\") !== basePath.length - 1) {\n        basePath += \"/\";\n      }\n      let texture;\n      if (imageTexture instanceof Texture) {\n        texture = imageTexture;\n      } else {\n        const imagePath = copySearchParams(basePath + (imageFilename ?? asset.meta.image), options.src);\n        const assets = await loader.load([imagePath]);\n        texture = assets[imagePath];\n      }\n      const spritesheet = new Spritesheet(\n        texture.source,\n        asset\n      );\n      await spritesheet.parse();\n      const multiPacks = asset?.meta?.related_multi_packs;\n      if (Array.isArray(multiPacks)) {\n        const promises = [];\n        for (const item of multiPacks) {\n          if (typeof item !== \"string\") {\n            continue;\n          }\n          let itemUrl = basePath + item;\n          if (options.data?.ignoreMultiPack) {\n            continue;\n          }\n          itemUrl = copySearchParams(itemUrl, options.src);\n          promises.push(loader.load({\n            src: itemUrl,\n            data: {\n              ignoreMultiPack: true\n            }\n          }));\n        }\n        const res = await Promise.all(promises);\n        spritesheet.linkedSheets = res;\n        res.forEach((item) => {\n          item.linkedSheets = [spritesheet].concat(spritesheet.linkedSheets.filter((sp) => sp !== item));\n        });\n      }\n      return spritesheet;\n    },\n    async unload(spritesheet, _resolvedAsset, loader) {\n      await loader.unload(spritesheet.textureSource._sourceOrigin);\n      spritesheet.destroy(false);\n    }\n  }\n};\n\nexport { spritesheetAsset };\n//# sourceMappingURL=spritesheetAsset.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { spritesheetAsset } from './spritesheetAsset.mjs';\n\n\"use strict\";\nextensions.add(spritesheetAsset);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nclass BindGroup {\n  /**\n   * Create a new instance eof the Bind Group.\n   * @param resources - The resources that are bound together for use by a shader.\n   */\n  constructor(resources) {\n    /** The resources that are bound together for use by a shader. */\n    this.resources = /* @__PURE__ */ Object.create(null);\n    this._dirty = true;\n    let index = 0;\n    for (const i in resources) {\n      const resource = resources[i];\n      this.setResource(resource, index++);\n    }\n    this._updateKey();\n  }\n  /**\n   * Updates the key if its flagged as dirty. This is used internally to\n   * match this bind group to a WebGPU BindGroup.\n   * @internal\n   * @ignore\n   */\n  _updateKey() {\n    if (!this._dirty)\n      return;\n    this._dirty = false;\n    const keyParts = [];\n    let index = 0;\n    for (const i in this.resources) {\n      keyParts[index++] = this.resources[i]._resourceId;\n    }\n    this._key = keyParts.join(\"|\");\n  }\n  /**\n   * Set a resource at a given index. this function will\n   * ensure that listeners will be removed from the current resource\n   * and added to the new resource.\n   * @param resource - The resource to set.\n   * @param index - The index to set the resource at.\n   */\n  setResource(resource, index) {\n    const currentResource = this.resources[index];\n    if (resource === currentResource)\n      return;\n    if (currentResource) {\n      resource.off?.(\"change\", this.onResourceChange, this);\n    }\n    resource.on?.(\"change\", this.onResourceChange, this);\n    this.resources[index] = resource;\n    this._dirty = true;\n  }\n  /**\n   * Returns the resource at the current specified index.\n   * @param index - The index of the resource to get.\n   * @returns - The resource at the specified index.\n   */\n  getResource(index) {\n    return this.resources[index];\n  }\n  /**\n   * Used internally to 'touch' each resource, to ensure that the GC\n   * knows that all resources in this bind group are still being used.\n   * @param tick - The current tick.\n   * @internal\n   * @ignore\n   */\n  _touch(tick) {\n    const resources = this.resources;\n    for (const i in resources) {\n      resources[i]._touched = tick;\n    }\n  }\n  /** Destroys this bind group and removes all listeners. */\n  destroy() {\n    const resources = this.resources;\n    for (const i in resources) {\n      const resource = resources[i];\n      resource.off?.(\"change\", this.onResourceChange, this);\n    }\n    this.resources = null;\n  }\n  onResourceChange(resource) {\n    this._dirty = true;\n    if (resource.destroyed) {\n      const resources = this.resources;\n      for (const i in resources) {\n        if (resources[i] === resource) {\n          resources[i] = null;\n        }\n      }\n    } else {\n      this._updateKey();\n    }\n  }\n}\n\nexport { BindGroup };\n//# sourceMappingURL=BindGroup.mjs.map\n","import { extensions, ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst environments = [];\nextensions.handleByNamedList(ExtensionType.Environment, environments);\nasync function autoDetectEnvironment(manageImports) {\n  if (!manageImports)\n    return;\n  for (let i = 0; i < environments.length; i++) {\n    const env = environments[i];\n    if (env.value.test()) {\n      await env.value.load();\n      return;\n    }\n  }\n}\n\nexport { autoDetectEnvironment };\n//# sourceMappingURL=autoDetectEnvironment.mjs.map\n","\"use strict\";\nlet unsafeEval;\nfunction unsafeEvalSupported() {\n  if (typeof unsafeEval === \"boolean\") {\n    return unsafeEval;\n  }\n  try {\n    const func = new Function(\"param1\", \"param2\", \"param3\", \"return param1[param2] === param3;\");\n    unsafeEval = func({ a: \"b\" }, \"a\", \"b\") === true;\n  } catch (e) {\n    unsafeEval = false;\n  }\n  return unsafeEval;\n}\n\nexport { unsafeEvalSupported };\n//# sourceMappingURL=unsafeEvalSupported.mjs.map\n","'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 32767 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim | 0);\n            triangles.push(ear.i / dim | 0);\n            triangles.push(next.i / dim | 0);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    var p = c.next;\n    while (p !== a) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(x0, y0, minX, minY, invSize),\n        maxZ = zOrder(x1, y1, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim | 0);\n            triangles.push(p.i / dim | 0);\n            triangles.push(b.i / dim | 0);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize, 0);\n                earcutLinked(c, triangles, dim, minX, minY, invSize, 0);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    var bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    var bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    filterPoints(bridgeReverse, bridgeReverse.next);\n    return filterPoints(bridge, bridge.next);\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                m = p.x < p.next.x ? p : p.next;\n                if (x === hx) return m; // hole touches outer segment; pick leftmost endpoint\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === 0) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = (x - minX) * invSize | 0;\n    y = (y - minY) * invSize | 0;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) >= (ax - px) * (cy - py) &&\n           (ax - px) * (by - py) >= (bx - px) * (ay - py) &&\n           (bx - px) * (cy - py) >= (cx - px) * (by - py);\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = 0;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n","\"use strict\";\nvar CLEAR = /* @__PURE__ */ ((CLEAR2) => {\n  CLEAR2[CLEAR2[\"NONE\"] = 0] = \"NONE\";\n  CLEAR2[CLEAR2[\"COLOR\"] = 16384] = \"COLOR\";\n  CLEAR2[CLEAR2[\"STENCIL\"] = 1024] = \"STENCIL\";\n  CLEAR2[CLEAR2[\"DEPTH\"] = 256] = \"DEPTH\";\n  CLEAR2[CLEAR2[\"COLOR_DEPTH\"] = 16640] = \"COLOR_DEPTH\";\n  CLEAR2[CLEAR2[\"COLOR_STENCIL\"] = 17408] = \"COLOR_STENCIL\";\n  CLEAR2[CLEAR2[\"DEPTH_STENCIL\"] = 1280] = \"DEPTH_STENCIL\";\n  CLEAR2[CLEAR2[\"ALL\"] = 17664] = \"ALL\";\n  return CLEAR2;\n})(CLEAR || {});\n\nexport { CLEAR };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nclass SystemRunner {\n  /**\n   * @param name - The function name that will be executed on the listeners added to this Runner.\n   */\n  constructor(name) {\n    this.items = [];\n    this._name = name;\n  }\n  /* eslint-disable jsdoc/require-param, jsdoc/check-param-names */\n  /**\n   * Dispatch/Broadcast Runner to all listeners added to the queue.\n   * @param {...any} params - (optional) parameters to pass to each listener\n   */\n  /*  eslint-enable jsdoc/require-param, jsdoc/check-param-names */\n  emit(a0, a1, a2, a3, a4, a5, a6, a7) {\n    const { name, items } = this;\n    for (let i = 0, len = items.length; i < len; i++) {\n      items[i][name](a0, a1, a2, a3, a4, a5, a6, a7);\n    }\n    return this;\n  }\n  /**\n   * Add a listener to the Runner\n   *\n   * Runners do not need to have scope or functions passed to them.\n   * All that is required is to pass the listening object and ensure that it has contains a function that has the same name\n   * as the name provided to the Runner when it was created.\n   *\n   * Eg A listener passed to this Runner will require a 'complete' function.\n   *\n   * ```\n   * import { Runner } from 'pixi.js';\n   *\n   * const complete = new Runner('complete');\n   * ```\n   *\n   * The scope used will be the object itself.\n   * @param {any} item - The object that will be listening.\n   */\n  add(item) {\n    if (item[this._name]) {\n      this.remove(item);\n      this.items.push(item);\n    }\n    return this;\n  }\n  /**\n   * Remove a single listener from the dispatch queue.\n   * @param {any} item - The listener that you would like to remove.\n   */\n  remove(item) {\n    const index = this.items.indexOf(item);\n    if (index !== -1) {\n      this.items.splice(index, 1);\n    }\n    return this;\n  }\n  /**\n   * Check to see if the listener is already in the Runner\n   * @param {any} item - The listener that you would like to check.\n   */\n  contains(item) {\n    return this.items.indexOf(item) !== -1;\n  }\n  /** Remove all listeners from the Runner */\n  removeAll() {\n    this.items.length = 0;\n    return this;\n  }\n  /** Remove all references, don't use after this. */\n  destroy() {\n    this.removeAll();\n    this.items = null;\n    this._name = null;\n  }\n  /**\n   * `true` if there are no this Runner contains no listeners\n   * @readonly\n   */\n  get empty() {\n    return this.items.length === 0;\n  }\n  /**\n   * The name of the runner.\n   * @readonly\n   */\n  get name() {\n    return this._name;\n  }\n}\n\nexport { SystemRunner };\n//# sourceMappingURL=SystemRunner.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { Container } from '../../../../scene/container/Container.mjs';\nimport { unsafeEvalSupported } from '../../../../utils/browser/unsafeEvalSupported.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\nimport '../../../../utils/utils.mjs';\nimport { CLEAR } from '../../gl/const.mjs';\nimport { SystemRunner } from './SystemRunner.mjs';\nimport EventEmitter from 'eventemitter3';\n\n\"use strict\";\nconst defaultRunners = [\n  \"init\",\n  \"destroy\",\n  \"contextChange\",\n  \"resolutionChange\",\n  \"reset\",\n  \"renderEnd\",\n  \"renderStart\",\n  \"render\",\n  \"update\",\n  \"postrender\",\n  \"prerender\"\n];\nconst _AbstractRenderer = class _AbstractRenderer extends EventEmitter {\n  /**\n   * Set up a system with a collection of SystemClasses and runners.\n   * Systems are attached dynamically to this class when added.\n   * @param config - the config for the system manager\n   */\n  constructor(config) {\n    super();\n    this.runners = /* @__PURE__ */ Object.create(null);\n    this.renderPipes = /* @__PURE__ */ Object.create(null);\n    this._initOptions = {};\n    this._systemsHash = /* @__PURE__ */ Object.create(null);\n    this.type = config.type;\n    this.name = config.name;\n    const combinedRunners = [...defaultRunners, ...config.runners ?? []];\n    this._addRunners(...combinedRunners);\n    this._addSystems(config.systems);\n    this._addPipes(config.renderPipes, config.renderPipeAdaptors);\n    this._unsafeEvalCheck();\n  }\n  /**\n   * Initialize the renderer.\n   * @param options - The options to use to create the renderer.\n   */\n  async init(options = {}) {\n    for (const systemName in this._systemsHash) {\n      const system = this._systemsHash[systemName];\n      const defaultSystemOptions = system.constructor.defaultOptions;\n      options = { ...defaultSystemOptions, ...options };\n    }\n    options = { ..._AbstractRenderer.defaultOptions, ...options };\n    this._roundPixels = options.roundPixels ? 1 : 0;\n    for (let i = 0; i < this.runners.init.items.length; i++) {\n      await this.runners.init.items[i].init(options);\n    }\n    this._initOptions = options;\n  }\n  render(args, deprecated) {\n    let options = args;\n    if (options instanceof Container) {\n      options = { container: options };\n      if (deprecated) {\n        deprecation(v8_0_0, \"passing a second argument is deprecated, please use render options instead\");\n        options.target = deprecated.renderTexture;\n      }\n    }\n    options.target || (options.target = this.view.renderTarget);\n    if (options.target === this.view.renderTarget) {\n      this._lastObjectRendered = options.container;\n      options.clearColor = this.background.colorRgba;\n    }\n    if (options.clearColor) {\n      const isRGBAArray = Array.isArray(options.clearColor) && options.clearColor.length === 4;\n      options.clearColor = isRGBAArray ? options.clearColor : Color.shared.setValue(options.clearColor).toArray();\n    }\n    if (!options.transform) {\n      options.container.updateLocalTransform();\n      options.transform = options.container.localTransform;\n    }\n    this.runners.prerender.emit(options);\n    this.runners.renderStart.emit(options);\n    this.runners.render.emit(options);\n    this.runners.renderEnd.emit(options);\n    this.runners.postrender.emit(options);\n  }\n  /**\n   * Resizes the WebGL view to the specified width and height.\n   * @param desiredScreenWidth - The desired width of the screen.\n   * @param desiredScreenHeight - The desired height of the screen.\n   * @param resolution - The resolution / device pixel ratio of the renderer.\n   */\n  resize(desiredScreenWidth, desiredScreenHeight, resolution) {\n    this.view.resize(desiredScreenWidth, desiredScreenHeight, resolution);\n    this.emit(\"resize\", this.view.screen.width, this.view.screen.height);\n  }\n  clear(options = {}) {\n    const renderer = this;\n    options.target || (options.target = renderer.renderTarget.renderTarget);\n    options.clearColor || (options.clearColor = this.background.colorRgba);\n    options.clear ?? (options.clear = CLEAR.ALL);\n    const { clear, clearColor, target } = options;\n    Color.shared.setValue(clearColor ?? this.background.colorRgba);\n    renderer.renderTarget.clear(target, clear, Color.shared.toArray());\n  }\n  /** The resolution / device pixel ratio of the renderer. */\n  get resolution() {\n    return this.view.resolution;\n  }\n  set resolution(value) {\n    this.view.resolution = value;\n    this.runners.resolutionChange.emit(value);\n  }\n  /**\n   * Same as view.width, actual number of pixels in the canvas by horizontal.\n   * @member {number}\n   * @readonly\n   * @default 800\n   */\n  get width() {\n    return this.view.texture.frame.width;\n  }\n  /**\n   * Same as view.height, actual number of pixels in the canvas by vertical.\n   * @default 600\n   */\n  get height() {\n    return this.view.texture.frame.height;\n  }\n  // NOTE: this was `view` in v7\n  /**\n   * The canvas element that everything is drawn to.\n   * @type {environment.ICanvas}\n   */\n  get canvas() {\n    return this.view.canvas;\n  }\n  /**\n   * the last object rendered by the renderer. Useful for other plugins like interaction managers\n   * @readonly\n   */\n  get lastObjectRendered() {\n    return this._lastObjectRendered;\n  }\n  /**\n   * Flag if we are rendering to the screen vs renderTexture\n   * @readonly\n   * @default true\n   */\n  get renderingToScreen() {\n    const renderer = this;\n    return renderer.renderTarget.renderingToScreen;\n  }\n  /**\n   * Measurements of the screen. (0, 0, screenWidth, screenHeight).\n   *\n   * Its safe to use as filterArea or hitArea for the whole stage.\n   */\n  get screen() {\n    return this.view.screen;\n  }\n  /**\n   * Create a bunch of runners based of a collection of ids\n   * @param runnerIds - the runner ids to add\n   */\n  _addRunners(...runnerIds) {\n    runnerIds.forEach((runnerId) => {\n      this.runners[runnerId] = new SystemRunner(runnerId);\n    });\n  }\n  _addSystems(systems) {\n    let i;\n    for (i in systems) {\n      const val = systems[i];\n      this._addSystem(val.value, val.name);\n    }\n  }\n  /**\n   * Add a new system to the renderer.\n   * @param ClassRef - Class reference\n   * @param name - Property name for system, if not specified\n   *        will use a static `name` property on the class itself. This\n   *        name will be assigned as s property on the Renderer so make\n   *        sure it doesn't collide with properties on Renderer.\n   * @returns Return instance of renderer\n   */\n  _addSystem(ClassRef, name) {\n    const system = new ClassRef(this);\n    if (this[name]) {\n      throw new Error(`Whoops! The name \"${name}\" is already in use`);\n    }\n    this[name] = system;\n    this._systemsHash[name] = system;\n    for (const i in this.runners) {\n      this.runners[i].add(system);\n    }\n    return this;\n  }\n  _addPipes(pipes, pipeAdaptors) {\n    const adaptors = pipeAdaptors.reduce((acc, adaptor) => {\n      acc[adaptor.name] = adaptor.value;\n      return acc;\n    }, {});\n    pipes.forEach((pipe) => {\n      const PipeClass = pipe.value;\n      const name = pipe.name;\n      const Adaptor = adaptors[name];\n      this.renderPipes[name] = new PipeClass(\n        this,\n        Adaptor ? new Adaptor() : null\n      );\n    });\n  }\n  destroy(options = false) {\n    this.runners.destroy.items.reverse();\n    this.runners.destroy.emit(options);\n    Object.values(this.runners).forEach((runner) => {\n      runner.destroy();\n    });\n    this._systemsHash = null;\n    this.renderPipes = null;\n  }\n  /**\n   * Generate a texture from a container.\n   * @param options - options or container target to use when generating the texture\n   * @returns a texture\n   */\n  generateTexture(options) {\n    return this.textureGenerator.generateTexture(options);\n  }\n  /**\n   * Whether the renderer will round coordinates to whole pixels when rendering.\n   * Can be overridden on a per scene item basis.\n   */\n  get roundPixels() {\n    return !!this._roundPixels;\n  }\n  /**\n   * Overrideable function by `pixi.js/unsafe-eval` to silence\n   * throwing an error if platform doesn't support unsafe-evals.\n   * @private\n   * @ignore\n   */\n  _unsafeEvalCheck() {\n    if (!unsafeEvalSupported()) {\n      throw new Error(\"Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.\");\n    }\n  }\n};\n/** The default options for the renderer. */\n_AbstractRenderer.defaultOptions = {\n  /**\n   * Default resolution / device pixel ratio of the renderer.\n   * @default 1\n   */\n  resolution: 1,\n  /**\n   * Should the `failIfMajorPerformanceCaveat` flag be enabled as a context option used in the `isWebGLSupported`\n   * function. If set to true, a WebGL renderer can fail to be created if the browser thinks there could be\n   * performance issues when using WebGL.\n   *\n   * In PixiJS v6 this has changed from true to false by default, to allow WebGL to work in as many\n   * scenarios as possible. However, some users may have a poor experience, for example, if a user has a gpu or\n   * driver version blacklisted by the\n   * browser.\n   *\n   * If your application requires high performance rendering, you may wish to set this to false.\n   * We recommend one of two options if you decide to set this flag to false:\n   *\n   * 1: Use the Canvas renderer as a fallback in case high performance WebGL is\n   *    not supported.\n   *\n   * 2: Call `isWebGLSupported` (which if found in the utils package) in your code before attempting to create a\n   *    PixiJS renderer, and show an error message to the user if the function returns false, explaining that their\n   *    device & browser combination does not support high performance WebGL.\n   *    This is a much better strategy than trying to create a PixiJS renderer and finding it then fails.\n   * @default false\n   */\n  failIfMajorPerformanceCaveat: false,\n  /**\n   * Should round pixels be forced when rendering?\n   * @default false\n   */\n  roundPixels: false\n};\nlet AbstractRenderer = _AbstractRenderer;\n\nexport { AbstractRenderer };\n//# sourceMappingURL=AbstractRenderer.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\nimport { AbstractRenderer } from '../../rendering/renderers/shared/system/AbstractRenderer.mjs';\n\n\"use strict\";\nlet _isWebGLSupported;\nfunction isWebGLSupported(failIfMajorPerformanceCaveat) {\n  if (_isWebGLSupported !== void 0)\n    return _isWebGLSupported;\n  _isWebGLSupported = (() => {\n    const contextOptions = {\n      stencil: true,\n      failIfMajorPerformanceCaveat: failIfMajorPerformanceCaveat ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat\n    };\n    try {\n      if (!DOMAdapter.get().getWebGLRenderingContext()) {\n        return false;\n      }\n      const canvas = DOMAdapter.get().createCanvas();\n      let gl = canvas.getContext(\"webgl\", contextOptions);\n      const success = !!gl?.getContextAttributes()?.stencil;\n      if (gl) {\n        const loseContext = gl.getExtension(\"WEBGL_lose_context\");\n        if (loseContext) {\n          loseContext.loseContext();\n        }\n      }\n      gl = null;\n      return success;\n    } catch (e) {\n      return false;\n    }\n  })();\n  return _isWebGLSupported;\n}\n\nexport { isWebGLSupported };\n//# sourceMappingURL=isWebGLSupported.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\n\n\"use strict\";\nlet _isWebGPUSupported;\nasync function isWebGPUSupported(options = {}) {\n  if (_isWebGPUSupported !== void 0)\n    return _isWebGPUSupported;\n  _isWebGPUSupported = await (async () => {\n    const gpu = DOMAdapter.get().getNavigator().gpu;\n    if (!gpu) {\n      return false;\n    }\n    try {\n      const adapter = await navigator.gpu.requestAdapter(options);\n      await adapter.requestDevice();\n      return true;\n    } catch (e) {\n      return false;\n    }\n  })();\n  return _isWebGPUSupported;\n}\n\nexport { isWebGPUSupported };\n//# sourceMappingURL=isWebGPUSupported.mjs.map\n","import { autoDetectEnvironment } from '../../environment/autoDetectEnvironment.mjs';\nimport { isWebGLSupported } from '../../utils/browser/isWebGLSupported.mjs';\nimport { isWebGPUSupported } from '../../utils/browser/isWebGPUSupported.mjs';\nimport { AbstractRenderer } from './shared/system/AbstractRenderer.mjs';\n\n\"use strict\";\nconst renderPriority = [\"webgl\", \"webgpu\", \"canvas\"];\nasync function autoDetectRenderer(options) {\n  let preferredOrder = [];\n  if (options.preference) {\n    preferredOrder.push(options.preference);\n    renderPriority.forEach((item) => {\n      if (item !== options.preference) {\n        preferredOrder.push(item);\n      }\n    });\n  } else {\n    preferredOrder = renderPriority.slice();\n  }\n  let RendererClass;\n  await autoDetectEnvironment(\n    options.manageImports ?? true\n  );\n  let finalOptions = {};\n  for (let i = 0; i < preferredOrder.length; i++) {\n    const rendererType = preferredOrder[i];\n    if (rendererType === \"webgpu\" && await isWebGPUSupported()) {\n      const { WebGPURenderer } = await import('./gpu/WebGPURenderer.mjs');\n      RendererClass = WebGPURenderer;\n      finalOptions = { ...options, ...options.webgpu };\n      break;\n    } else if (rendererType === \"webgl\" && isWebGLSupported(\n      options.failIfMajorPerformanceCaveat ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat\n    )) {\n      const { WebGLRenderer } = await import('./gl/WebGLRenderer.mjs');\n      RendererClass = WebGLRenderer;\n      finalOptions = { ...options, ...options.webgl };\n      break;\n    } else if (rendererType === \"canvas\") {\n      finalOptions = { ...options };\n      throw new Error(\"CanvasRenderer is not yet implemented\");\n    }\n  }\n  delete finalOptions.webgpu;\n  delete finalOptions.webgl;\n  if (!RendererClass) {\n    throw new Error(\"No available renderer for the current environment\");\n  }\n  const renderer = new RendererClass();\n  await renderer.init(finalOptions);\n  return renderer;\n}\n\nexport { autoDetectRenderer };\n//# sourceMappingURL=autoDetectRenderer.mjs.map\n","\nmodule.exports = parse\n\n/**\n * expected argument lengths\n * @type {Object}\n */\n\nvar length = {a: 7, c: 6, h: 1, l: 2, m: 2, q: 4, s: 4, t: 2, v: 1, z: 0}\n\n/**\n * segment pattern\n * @type {RegExp}\n */\n\nvar segment = /([astvzqmhlc])([^astvzqmhlc]*)/ig\n\n/**\n * parse an svg path data string. Generates an Array\n * of commands where each command is an Array of the\n * form `[command, arg1, arg2, ...]`\n *\n * @param {String} path\n * @return {Array}\n */\n\nfunction parse(path) {\n\tvar data = []\n\tpath.replace(segment, function(_, command, args){\n\t\tvar type = command.toLowerCase()\n\t\targs = parseValues(args)\n\n\t\t// overloaded moveTo\n\t\tif (type == 'm' && args.length > 2) {\n\t\t\tdata.push([command].concat(args.splice(0, 2)))\n\t\t\ttype = 'l'\n\t\t\tcommand = command == 'm' ? 'l' : 'L'\n\t\t}\n\n\t\twhile (true) {\n\t\t\tif (args.length == length[type]) {\n\t\t\t\targs.unshift(command)\n\t\t\t\treturn data.push(args)\n\t\t\t}\n\t\t\tif (args.length < length[type]) throw new Error('malformed path data')\n\t\t\tdata.push([command].concat(args.splice(0, length[type])))\n\t\t}\n\t})\n\treturn data\n}\n\nvar number = /-?[0-9]*\\.?[0-9]+(?:e[-+]?\\d+)?/ig\n\nfunction parseValues(args) {\n\tvar numbers = args.match(number)\n\treturn numbers ? numbers.map(Number) : []\n}\n","import parse from 'parse-svg-path';\nimport { warn } from '../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nfunction SVGToGraphicsPath(svgPath, path) {\n  const commands = parse(svgPath);\n  const subpaths = [];\n  let currentSubPath = null;\n  let lastX = 0;\n  let lastY = 0;\n  for (let i = 0; i < commands.length; i++) {\n    const command = commands[i];\n    const type = command[0];\n    const data = command;\n    switch (type) {\n      case \"M\":\n        lastX = data[1];\n        lastY = data[2];\n        path.moveTo(lastX, lastY);\n        break;\n      case \"m\":\n        lastX += data[1];\n        lastY += data[2];\n        path.moveTo(lastX, lastY);\n        break;\n      case \"H\":\n        lastX = data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"h\":\n        lastX += data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"V\":\n        lastY = data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"v\":\n        lastY += data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"L\":\n        lastX = data[1];\n        lastY = data[2];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"l\":\n        lastX += data[1];\n        lastY += data[2];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"C\":\n        lastX = data[5];\n        lastY = data[6];\n        path.bezierCurveTo(\n          data[1],\n          data[2],\n          data[3],\n          data[4],\n          lastX,\n          lastY\n        );\n        break;\n      case \"c\":\n        path.bezierCurveTo(\n          lastX + data[1],\n          lastY + data[2],\n          lastX + data[3],\n          lastY + data[4],\n          lastX + data[5],\n          lastY + data[6]\n        );\n        lastX += data[5];\n        lastY += data[6];\n        break;\n      case \"S\":\n        lastX = data[3];\n        lastY = data[4];\n        path.bezierCurveToShort(\n          data[1],\n          data[2],\n          lastX,\n          lastY\n        );\n        break;\n      case \"s\":\n        path.bezierCurveToShort(\n          lastX + data[1],\n          lastY + data[2],\n          lastX + data[3],\n          lastY + data[4]\n        );\n        lastX += data[3];\n        lastY += data[4];\n        break;\n      case \"Q\":\n        lastX = data[3];\n        lastY = data[4];\n        path.quadraticCurveTo(\n          data[1],\n          data[2],\n          lastX,\n          lastY\n        );\n        break;\n      case \"q\":\n        path.quadraticCurveTo(\n          lastX + data[1],\n          lastY + data[2],\n          lastX + data[3],\n          lastY + data[4]\n        );\n        lastX += data[3];\n        lastY += data[4];\n        break;\n      case \"T\":\n        lastX = data[1];\n        lastY = data[2];\n        path.quadraticCurveToShort(\n          lastX,\n          lastY\n        );\n        break;\n      case \"t\":\n        lastX += data[1];\n        lastY += data[2];\n        path.quadraticCurveToShort(\n          lastX,\n          lastY\n        );\n        break;\n      case \"A\":\n        lastX = data[6];\n        lastY = data[7];\n        path.arcToSvg(\n          data[1],\n          data[2],\n          data[3],\n          data[4],\n          data[5],\n          lastX,\n          lastY\n        );\n        break;\n      case \"a\":\n        lastX += data[6];\n        lastY += data[7];\n        path.arcToSvg(\n          data[1],\n          data[2],\n          data[3],\n          data[4],\n          data[5],\n          lastX,\n          lastY\n        );\n        break;\n      case \"Z\":\n      case \"z\":\n        path.closePath();\n        if (subpaths.length > 0) {\n          currentSubPath = subpaths.pop();\n          if (currentSubPath) {\n            lastX = currentSubPath.startX;\n            lastY = currentSubPath.startY;\n          } else {\n            lastX = 0;\n            lastY = 0;\n          }\n        }\n        currentSubPath = null;\n        break;\n      default:\n        warn(`Unknown SVG path command: ${type}`);\n    }\n    if (type !== \"Z\" && type !== \"z\") {\n      if (currentSubPath === null) {\n        currentSubPath = { startX: lastX, startY: lastY };\n        subpaths.push(currentSubPath);\n      }\n    }\n  }\n  return path;\n}\n\nexport { SVGToGraphicsPath };\n//# sourceMappingURL=SVGToGraphicsPath.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nclass Circle {\n  /**\n   * @param x - The X coordinate of the center of this circle\n   * @param y - The Y coordinate of the center of this circle\n   * @param radius - The radius of the circle\n   */\n  constructor(x = 0, y = 0, radius = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'circle'\n     */\n    this.type = \"circle\";\n    this.x = x;\n    this.y = y;\n    this.radius = radius;\n  }\n  /**\n   * Creates a clone of this Circle instance\n   * @returns A copy of the Circle\n   */\n  clone() {\n    return new Circle(this.x, this.y, this.radius);\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this circle\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this Circle\n   */\n  contains(x, y) {\n    if (this.radius <= 0)\n      return false;\n    const r2 = this.radius * this.radius;\n    let dx = this.x - x;\n    let dy = this.y - y;\n    dx *= dx;\n    dy *= dy;\n    return dx + dy <= r2;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this circle including the stroke.\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param width - The width of the line to check\n   * @returns Whether the x/y coordinates are within this Circle\n   */\n  strokeContains(x, y, width) {\n    if (this.radius === 0)\n      return false;\n    const dx = this.x - x;\n    const dy = this.y - y;\n    const r = this.radius;\n    const w2 = width / 2;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    return distance < r + w2 && distance > r - w2;\n  }\n  /**\n   * Returns the framing rectangle of the circle as a Rectangle object\n   * @param out\n   * @returns The framing rectangle\n   */\n  getBounds(out) {\n    out = out || new Rectangle();\n    out.x = this.x - this.radius;\n    out.y = this.y - this.radius;\n    out.width = this.radius * 2;\n    out.height = this.radius * 2;\n    return out;\n  }\n  /**\n   * Copies another circle to this one.\n   * @param circle - The circle to copy from.\n   * @returns Returns itself.\n   */\n  copyFrom(circle) {\n    this.x = circle.x;\n    this.y = circle.y;\n    this.radius = circle.radius;\n    return this;\n  }\n  /**\n   * Copies this circle to another one.\n   * @param circle - The circle to copy to.\n   * @returns Returns given parameter.\n   */\n  copyTo(circle) {\n    circle.copyFrom(this);\n    return circle;\n  }\n  toString() {\n    return `[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`;\n  }\n}\n\nexport { Circle };\n//# sourceMappingURL=Circle.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nclass Ellipse {\n  /**\n   * @param x - The X coordinate of the center of this ellipse\n   * @param y - The Y coordinate of the center of this ellipse\n   * @param halfWidth - The half width of this ellipse\n   * @param halfHeight - The half height of this ellipse\n   */\n  constructor(x = 0, y = 0, halfWidth = 0, halfHeight = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'ellipse'\n     */\n    this.type = \"ellipse\";\n    this.x = x;\n    this.y = y;\n    this.halfWidth = halfWidth;\n    this.halfHeight = halfHeight;\n  }\n  /**\n   * Creates a clone of this Ellipse instance\n   * @returns {Ellipse} A copy of the ellipse\n   */\n  clone() {\n    return new Ellipse(this.x, this.y, this.halfWidth, this.halfHeight);\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this ellipse\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coords are within this ellipse\n   */\n  contains(x, y) {\n    if (this.halfWidth <= 0 || this.halfHeight <= 0) {\n      return false;\n    }\n    let normx = (x - this.x) / this.halfWidth;\n    let normy = (y - this.y) / this.halfHeight;\n    normx *= normx;\n    normy *= normy;\n    return normx + normy <= 1;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this ellipse including stroke\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param width\n   * @returns Whether the x/y coords are within this ellipse\n   */\n  strokeContains(x, y, width) {\n    const { halfWidth, halfHeight } = this;\n    if (halfWidth <= 0 || halfHeight <= 0) {\n      return false;\n    }\n    const halfStrokeWidth = width / 2;\n    const innerA = halfWidth - halfStrokeWidth;\n    const innerB = halfHeight - halfStrokeWidth;\n    const outerA = halfWidth + halfStrokeWidth;\n    const outerB = halfHeight + halfStrokeWidth;\n    const normalizedX = x - this.x;\n    const normalizedY = y - this.y;\n    const innerEllipse = normalizedX * normalizedX / (innerA * innerA) + normalizedY * normalizedY / (innerB * innerB);\n    const outerEllipse = normalizedX * normalizedX / (outerA * outerA) + normalizedY * normalizedY / (outerB * outerB);\n    return innerEllipse > 1 && outerEllipse <= 1;\n  }\n  /**\n   * Returns the framing rectangle of the ellipse as a Rectangle object\n   * @returns The framing rectangle\n   */\n  getBounds() {\n    return new Rectangle(this.x - this.halfWidth, this.y - this.halfHeight, this.halfWidth * 2, this.halfHeight * 2);\n  }\n  /**\n   * Copies another ellipse to this one.\n   * @param ellipse - The ellipse to copy from.\n   * @returns Returns itself.\n   */\n  copyFrom(ellipse) {\n    this.x = ellipse.x;\n    this.y = ellipse.y;\n    this.halfWidth = ellipse.halfWidth;\n    this.halfHeight = ellipse.halfHeight;\n    return this;\n  }\n  /**\n   * Copies this ellipse to another one.\n   * @param ellipse - The ellipse to copy to.\n   * @returns Returns given parameter.\n   */\n  copyTo(ellipse) {\n    ellipse.copyFrom(this);\n    return ellipse;\n  }\n  toString() {\n    return `[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`;\n  }\n}\n\nexport { Ellipse };\n//# sourceMappingURL=Ellipse.mjs.map\n","\"use strict\";\nfunction squaredDistanceToLineSegment(x, y, x1, y1, x2, y2) {\n  const a = x - x1;\n  const b = y - y1;\n  const c = x2 - x1;\n  const d = y2 - y1;\n  const dot = a * c + b * d;\n  const lenSq = c * c + d * d;\n  let param = -1;\n  if (lenSq !== 0) {\n    param = dot / lenSq;\n  }\n  let xx;\n  let yy;\n  if (param < 0) {\n    xx = x1;\n    yy = y1;\n  } else if (param > 1) {\n    xx = x2;\n    yy = y2;\n  } else {\n    xx = x1 + param * c;\n    yy = y1 + param * d;\n  }\n  const dx = x - xx;\n  const dy = y - yy;\n  return dx * dx + dy * dy;\n}\n\nexport { squaredDistanceToLineSegment };\n//# sourceMappingURL=squaredDistanceToLineSegment.mjs.map\n","import { squaredDistanceToLineSegment } from '../misc/squaredDistanceToLineSegment.mjs';\nimport { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nclass Polygon {\n  /**\n   * @param points - This can be an array of Points\n   *  that form the polygon, a flat array of numbers that will be interpreted as [x,y, x,y, ...], or\n   *  the arguments passed can be all the points of the polygon e.g.\n   *  `new Polygon(new Point(), new Point(), ...)`, or the arguments passed can be flat\n   *  x,y values e.g. `new Polygon(x,y, x,y, x,y, ...)` where `x` and `y` are Numbers.\n   */\n  constructor(...points) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'polygon'\n     */\n    this.type = \"polygon\";\n    let flat = Array.isArray(points[0]) ? points[0] : points;\n    if (typeof flat[0] !== \"number\") {\n      const p = [];\n      for (let i = 0, il = flat.length; i < il; i++) {\n        p.push(flat[i].x, flat[i].y);\n      }\n      flat = p;\n    }\n    this.points = flat;\n    this.closePath = true;\n  }\n  /**\n   * Creates a clone of this polygon.\n   * @returns - A copy of the polygon.\n   */\n  clone() {\n    const points = this.points.slice();\n    const polygon = new Polygon(points);\n    polygon.closePath = this.closePath;\n    return polygon;\n  }\n  /**\n   * Checks whether the x and y coordinates passed to this function are contained within this polygon.\n   * @param x - The X coordinate of the point to test.\n   * @param y - The Y coordinate of the point to test.\n   * @returns - Whether the x/y coordinates are within this polygon.\n   */\n  contains(x, y) {\n    let inside = false;\n    const length = this.points.length / 2;\n    for (let i = 0, j = length - 1; i < length; j = i++) {\n      const xi = this.points[i * 2];\n      const yi = this.points[i * 2 + 1];\n      const xj = this.points[j * 2];\n      const yj = this.points[j * 2 + 1];\n      const intersect = yi > y !== yj > y && x < (xj - xi) * ((y - yi) / (yj - yi)) + xi;\n      if (intersect) {\n        inside = !inside;\n      }\n    }\n    return inside;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this polygon including the stroke.\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @returns Whether the x/y coordinates are within this polygon\n   */\n  strokeContains(x, y, strokeWidth) {\n    const halfStrokeWidth = strokeWidth / 2;\n    const halfStrokeWidthSqrd = halfStrokeWidth * halfStrokeWidth;\n    const { points } = this;\n    const iterationLength = points.length - (this.closePath ? 0 : 2);\n    for (let i = 0; i < iterationLength; i += 2) {\n      const x1 = points[i];\n      const y1 = points[i + 1];\n      const x2 = points[(i + 2) % points.length];\n      const y2 = points[(i + 3) % points.length];\n      const distanceSqrd = squaredDistanceToLineSegment(x, y, x1, y1, x2, y2);\n      if (distanceSqrd <= halfStrokeWidthSqrd) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Returns the framing rectangle of the polygon as a Rectangle object\n   * @param out - optional rectangle to store the result\n   * @returns The framing rectangle\n   */\n  getBounds(out) {\n    out = out || new Rectangle();\n    const points = this.points;\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n    for (let i = 0, n = points.length; i < n; i += 2) {\n      const x = points[i];\n      const y = points[i + 1];\n      minX = x < minX ? x : minX;\n      maxX = x > maxX ? x : maxX;\n      minY = y < minY ? y : minY;\n      maxY = y > maxY ? y : maxY;\n    }\n    out.x = minX;\n    out.width = maxX - minX;\n    out.y = minY;\n    out.height = maxY - minY;\n    return out;\n  }\n  /**\n   * Copies another polygon to this one.\n   * @param polygon - The polygon to copy from.\n   * @returns Returns itself.\n   */\n  copyFrom(polygon) {\n    this.points = polygon.points.slice();\n    this.closePath = polygon.closePath;\n    return this;\n  }\n  /**\n   * Copies this polygon to another one.\n   * @param polygon - The polygon to copy to.\n   * @returns Returns given parameter.\n   */\n  copyTo(polygon) {\n    polygon.copyFrom(this);\n    return polygon;\n  }\n  toString() {\n    return `[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((pointsDesc, currentPoint) => `${pointsDesc}, ${currentPoint}`, \"\")}]`;\n  }\n  /**\n   * Get the last X coordinate of the polygon\n   * @readonly\n   */\n  get lastX() {\n    return this.points[this.points.length - 2];\n  }\n  /**\n   * Get the last Y coordinate of the polygon\n   * @readonly\n   */\n  get lastY() {\n    return this.points[this.points.length - 1];\n  }\n  /**\n   * Get the first X coordinate of the polygon\n   * @readonly\n   */\n  get x() {\n    return this.points[this.points.length - 2];\n  }\n  /**\n   * Get the first Y coordinate of the polygon\n   * @readonly\n   */\n  get y() {\n    return this.points[this.points.length - 1];\n  }\n}\n\nexport { Polygon };\n//# sourceMappingURL=Polygon.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nconst isCornerWithinStroke = (pX, pY, cornerX, cornerY, radius, halfStrokeWidth) => {\n  const dx = pX - cornerX;\n  const dy = pY - cornerY;\n  const distance = Math.sqrt(dx * dx + dy * dy);\n  return distance >= radius - halfStrokeWidth && distance <= radius + halfStrokeWidth;\n};\nclass RoundedRectangle {\n  /**\n   * @param x - The X coordinate of the upper-left corner of the rounded rectangle\n   * @param y - The Y coordinate of the upper-left corner of the rounded rectangle\n   * @param width - The overall width of this rounded rectangle\n   * @param height - The overall height of this rounded rectangle\n   * @param radius - Controls the radius of the rounded corners\n   */\n  constructor(x = 0, y = 0, width = 0, height = 0, radius = 20) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'roundedRectangle'\n     */\n    this.type = \"roundedRectangle\";\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.radius = radius;\n  }\n  /**\n   * Returns the framing rectangle of the rounded rectangle as a Rectangle object\n   * @param out - optional rectangle to store the result\n   * @returns The framing rectangle\n   */\n  getBounds(out) {\n    out = out || new Rectangle();\n    out.x = this.x;\n    out.y = this.y;\n    out.width = this.width;\n    out.height = this.height;\n    return out;\n  }\n  /**\n   * Creates a clone of this Rounded Rectangle.\n   * @returns - A copy of the rounded rectangle.\n   */\n  clone() {\n    return new RoundedRectangle(this.x, this.y, this.width, this.height, this.radius);\n  }\n  /**\n   * Copies another rectangle to this one.\n   * @param rectangle - The rectangle to copy from.\n   * @returns Returns itself.\n   */\n  copyFrom(rectangle) {\n    this.x = rectangle.x;\n    this.y = rectangle.y;\n    this.width = rectangle.width;\n    this.height = rectangle.height;\n    return this;\n  }\n  /**\n   * Copies this rectangle to another one.\n   * @param rectangle - The rectangle to copy to.\n   * @returns Returns given parameter.\n   */\n  copyTo(rectangle) {\n    rectangle.copyFrom(this);\n    return rectangle;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this Rounded Rectangle\n   * @param x - The X coordinate of the point to test.\n   * @param y - The Y coordinate of the point to test.\n   * @returns - Whether the x/y coordinates are within this Rounded Rectangle.\n   */\n  contains(x, y) {\n    if (this.width <= 0 || this.height <= 0) {\n      return false;\n    }\n    if (x >= this.x && x <= this.x + this.width) {\n      if (y >= this.y && y <= this.y + this.height) {\n        const radius = Math.max(0, Math.min(this.radius, Math.min(this.width, this.height) / 2));\n        if (y >= this.y + radius && y <= this.y + this.height - radius || x >= this.x + radius && x <= this.x + this.width - radius) {\n          return true;\n        }\n        let dx = x - (this.x + radius);\n        let dy = y - (this.y + radius);\n        const radius2 = radius * radius;\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dx = x - (this.x + this.width - radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dy = y - (this.y + this.height - radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dx = x - (this.x + radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this rectangle including the stroke.\n   * @param pX - The X coordinate of the point to test\n   * @param pY - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @returns Whether the x/y coordinates are within this rectangle\n   */\n  strokeContains(pX, pY, strokeWidth) {\n    const { x, y, width, height, radius } = this;\n    const halfStrokeWidth = strokeWidth / 2;\n    const innerX = x + radius;\n    const innerY = y + radius;\n    const innerWidth = width - radius * 2;\n    const innerHeight = height - radius * 2;\n    const rightBound = x + width;\n    const bottomBound = y + height;\n    if ((pX >= x - halfStrokeWidth && pX <= x + halfStrokeWidth || pX >= rightBound - halfStrokeWidth && pX <= rightBound + halfStrokeWidth) && pY >= innerY && pY <= innerY + innerHeight) {\n      return true;\n    }\n    if ((pY >= y - halfStrokeWidth && pY <= y + halfStrokeWidth || pY >= bottomBound - halfStrokeWidth && pY <= bottomBound + halfStrokeWidth) && pX >= innerX && pX <= innerX + innerWidth) {\n      return true;\n    }\n    return (\n      // Top-left\n      pX < innerX && pY < innerY && isCornerWithinStroke(pX, pY, innerX, innerY, radius, halfStrokeWidth) || pX > rightBound - radius && pY < innerY && isCornerWithinStroke(pX, pY, rightBound - radius, innerY, radius, halfStrokeWidth) || pX > rightBound - radius && pY > bottomBound - radius && isCornerWithinStroke(pX, pY, rightBound - radius, bottomBound - radius, radius, halfStrokeWidth) || pX < innerX && pY > bottomBound - radius && isCornerWithinStroke(pX, pY, innerX, bottomBound - radius, radius, halfStrokeWidth)\n    );\n  }\n  toString() {\n    return `[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`;\n  }\n}\n\nexport { RoundedRectangle };\n//# sourceMappingURL=RoundedRectangle.mjs.map\n","\"use strict\";\nvar BufferUsage = /* @__PURE__ */ ((BufferUsage2) => {\n  BufferUsage2[BufferUsage2[\"MAP_READ\"] = 1] = \"MAP_READ\";\n  BufferUsage2[BufferUsage2[\"MAP_WRITE\"] = 2] = \"MAP_WRITE\";\n  BufferUsage2[BufferUsage2[\"COPY_SRC\"] = 4] = \"COPY_SRC\";\n  BufferUsage2[BufferUsage2[\"COPY_DST\"] = 8] = \"COPY_DST\";\n  BufferUsage2[BufferUsage2[\"INDEX\"] = 16] = \"INDEX\";\n  BufferUsage2[BufferUsage2[\"VERTEX\"] = 32] = \"VERTEX\";\n  BufferUsage2[BufferUsage2[\"UNIFORM\"] = 64] = \"UNIFORM\";\n  BufferUsage2[BufferUsage2[\"STORAGE\"] = 128] = \"STORAGE\";\n  BufferUsage2[BufferUsage2[\"INDIRECT\"] = 256] = \"INDIRECT\";\n  BufferUsage2[BufferUsage2[\"QUERY_RESOLVE\"] = 512] = \"QUERY_RESOLVE\";\n  BufferUsage2[BufferUsage2[\"STATIC\"] = 1024] = \"STATIC\";\n  return BufferUsage2;\n})(BufferUsage || {});\n\nexport { BufferUsage };\n//# sourceMappingURL=const.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { BufferUsage } from './const.mjs';\n\n\"use strict\";\nclass Buffer extends EventEmitter {\n  /**\n   * Creates a new Buffer with the given options\n   * @param options - the options for the buffer\n   */\n  constructor(options) {\n    let { data, size } = options;\n    const { usage, label, shrinkToFit } = options;\n    super();\n    /**\n     * emits when the underlying buffer has changed shape (i.e. resized)\n     * letting the renderer know that it needs to discard the old buffer on the GPU and create a new one\n     * @event change\n     */\n    /**\n     * emits when the underlying buffer data has been updated. letting the renderer know\n     * that it needs to update the buffer on the GPU\n     * @event update\n     */\n    /**\n     * emits when the buffer is destroyed. letting the renderer know that it needs to destroy the buffer on the GPU\n     * @event destroy\n     */\n    /**\n     * a unique id for this uniform group used through the renderer\n     * @internal\n     * @ignore\n     */\n    this.uid = uid(\"buffer\");\n    /**\n     * a resource type, used to identify how to handle it when its in a bind group / shader resource\n     * @internal\n     * @ignore\n     */\n    this._resourceType = \"buffer\";\n    /**\n     * the resource id used internally by the renderer to build bind group keys\n     * @internal\n     * @ignore\n     */\n    this._resourceId = uid(\"resource\");\n    /**\n     * used internally to know if a uniform group was used in the last render pass\n     * @internal\n     * @ignore\n     */\n    this._touched = 0;\n    /**\n     * @internal\n     * @ignore\n     */\n    this._updateID = 1;\n    /**\n     * should the GPU buffer be shrunk when the data becomes smaller?\n     * changing this will cause the buffer to be destroyed and a new one created on the GPU\n     * this can be expensive, especially if the buffer is already big enough!\n     * setting this to false will prevent the buffer from being shrunk. This will yield better performance\n     * if you are constantly setting data that is changing size often.\n     * @default true\n     */\n    this.shrinkToFit = true;\n    /**\n     * Has the buffer been destroyed?\n     * @readonly\n     */\n    this.destroyed = false;\n    if (data instanceof Array) {\n      data = new Float32Array(data);\n    }\n    this._data = data;\n    size = size ?? data?.byteLength;\n    const mappedAtCreation = !!data;\n    this.descriptor = {\n      size,\n      usage,\n      mappedAtCreation,\n      label\n    };\n    this.shrinkToFit = shrinkToFit ?? true;\n  }\n  /** the data in the buffer */\n  get data() {\n    return this._data;\n  }\n  set data(value) {\n    this.setDataWithSize(value, value.length, true);\n  }\n  /** whether the buffer is static or not */\n  get static() {\n    return !!(this.descriptor.usage & BufferUsage.STATIC);\n  }\n  set static(value) {\n    if (value) {\n      this.descriptor.usage |= BufferUsage.STATIC;\n    } else {\n      this.descriptor.usage &= ~BufferUsage.STATIC;\n    }\n  }\n  /**\n   * Sets the data in the buffer to the given value. This will immediately update the buffer on the GPU.\n   * If you only want to update a subset of the buffer, you can pass in the size of the data.\n   * @param value - the data to set\n   * @param size - the size of the data in bytes\n   * @param syncGPU - should the buffer be updated on the GPU immediately?\n   */\n  setDataWithSize(value, size, syncGPU) {\n    this._updateID++;\n    this._updateSize = size * value.BYTES_PER_ELEMENT;\n    if (this._data === value) {\n      if (syncGPU)\n        this.emit(\"update\", this);\n      return;\n    }\n    const oldData = this._data;\n    this._data = value;\n    if (oldData.length !== value.length) {\n      if (!this.shrinkToFit && value.byteLength < oldData.byteLength) {\n        if (syncGPU)\n          this.emit(\"update\", this);\n      } else {\n        this.descriptor.size = value.byteLength;\n        this._resourceId = uid(\"resource\");\n        this.emit(\"change\", this);\n      }\n      return;\n    }\n    if (syncGPU)\n      this.emit(\"update\", this);\n  }\n  /**\n   * updates the buffer on the GPU to reflect the data in the buffer.\n   * By default it will update the entire buffer. If you only want to update a subset of the buffer,\n   * you can pass in the size of the buffer to update.\n   * @param sizeInBytes - the new size of the buffer in bytes\n   */\n  update(sizeInBytes) {\n    this._updateSize = sizeInBytes ?? this._updateSize;\n    this._updateID++;\n    this.emit(\"update\", this);\n  }\n  /** Destroys the buffer */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    this._data = null;\n    this.descriptor = null;\n    this.removeAllListeners();\n  }\n}\n\nexport { Buffer };\n//# sourceMappingURL=Buffer.mjs.map\n","import { Buffer } from '../../buffer/Buffer.mjs';\nimport { BufferUsage } from '../../buffer/const.mjs';\n\n\"use strict\";\nfunction ensureIsBuffer(buffer, index) {\n  if (!(buffer instanceof Buffer)) {\n    let usage = index ? BufferUsage.INDEX : BufferUsage.VERTEX;\n    if (buffer instanceof Array) {\n      if (index) {\n        buffer = new Uint32Array(buffer);\n        usage = BufferUsage.INDEX | BufferUsage.COPY_DST;\n      } else {\n        buffer = new Float32Array(buffer);\n        usage = BufferUsage.VERTEX | BufferUsage.COPY_DST;\n      }\n    }\n    buffer = new Buffer({\n      data: buffer,\n      label: index ? \"index-mesh-buffer\" : \"vertex-mesh-buffer\",\n      usage\n    });\n  }\n  return buffer;\n}\n\nexport { ensureIsBuffer };\n//# sourceMappingURL=ensureIsBuffer.mjs.map\n","\"use strict\";\nfunction getGeometryBounds(geometry, attributeId, bounds) {\n  const attribute = geometry.getAttribute(attributeId);\n  if (!attribute) {\n    bounds.minX = 0;\n    bounds.minY = 0;\n    bounds.maxX = 0;\n    bounds.maxY = 0;\n    return bounds;\n  }\n  const data = attribute.buffer.data;\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n  const byteSize = data.BYTES_PER_ELEMENT;\n  const offset = (attribute.offset || 0) / byteSize;\n  const stride = (attribute.stride || 2 * 4) / byteSize;\n  for (let i = offset; i < data.length; i += stride) {\n    const x = data[i];\n    const y = data[i + 1];\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n  }\n  bounds.minX = minX;\n  bounds.minY = minY;\n  bounds.maxX = maxX;\n  bounds.maxY = maxY;\n  return bounds;\n}\n\nexport { getGeometryBounds };\n//# sourceMappingURL=getGeometryBounds.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Bounds } from '../../../../scene/container/bounds/Bounds.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { Buffer } from '../buffer/Buffer.mjs';\nimport { ensureIsBuffer } from './utils/ensureIsBuffer.mjs';\nimport { getGeometryBounds } from './utils/getGeometryBounds.mjs';\n\n\"use strict\";\nfunction ensureIsAttribute(attribute) {\n  if (attribute instanceof Buffer || Array.isArray(attribute) || attribute.BYTES_PER_ELEMENT) {\n    attribute = {\n      buffer: attribute\n    };\n  }\n  attribute.buffer = ensureIsBuffer(attribute.buffer, false);\n  return attribute;\n}\nclass Geometry extends EventEmitter {\n  /**\n   * Create a new instance of a geometry\n   * @param options - The options for the geometry.\n   */\n  constructor(options) {\n    const { attributes, indexBuffer, topology } = options;\n    super();\n    /** The unique id of the geometry. */\n    this.uid = uid(\"geometry\");\n    /**\n     * the layout key will be generated by WebGPU all geometries that have the same structure\n     * will have the same layout key. This is used to cache the pipeline layout\n     * @internal\n     * @ignore\n     */\n    this._layoutKey = 0;\n    /** the instance count of the geometry to draw */\n    this.instanceCount = 1;\n    this._bounds = new Bounds();\n    this._boundsDirty = true;\n    this.attributes = attributes;\n    this.buffers = [];\n    this.instanceCount = options.instanceCount || 1;\n    for (const i in attributes) {\n      const attribute = attributes[i] = ensureIsAttribute(attributes[i]);\n      const bufferIndex = this.buffers.indexOf(attribute.buffer);\n      if (bufferIndex === -1) {\n        this.buffers.push(attribute.buffer);\n        attribute.buffer.on(\"update\", this.onBufferUpdate, this);\n        attribute.buffer.on(\"change\", this.onBufferUpdate, this);\n      }\n    }\n    if (indexBuffer) {\n      this.indexBuffer = ensureIsBuffer(indexBuffer, true);\n      this.buffers.push(this.indexBuffer);\n    }\n    this.topology = topology || \"triangle-list\";\n  }\n  onBufferUpdate() {\n    this._boundsDirty = true;\n    this.emit(\"update\", this);\n  }\n  /**\n   * Returns the requested attribute.\n   * @param id - The name of the attribute required\n   * @returns - The attribute requested.\n   */\n  getAttribute(id) {\n    return this.attributes[id];\n  }\n  /**\n   * Returns the index buffer\n   * @returns - The index buffer.\n   */\n  getIndex() {\n    return this.indexBuffer;\n  }\n  /**\n   * Returns the requested buffer.\n   * @param id - The name of the buffer required.\n   * @returns - The buffer requested.\n   */\n  getBuffer(id) {\n    return this.getAttribute(id).buffer;\n  }\n  /**\n   * Used to figure out how many vertices there are in this geometry\n   * @returns the number of vertices in the geometry\n   */\n  getSize() {\n    for (const i in this.attributes) {\n      const attribute = this.attributes[i];\n      const buffer = attribute.buffer;\n      return buffer.data.length / (attribute.stride / 4 || attribute.size);\n    }\n    return 0;\n  }\n  /** Returns the bounds of the geometry. */\n  get bounds() {\n    if (!this._boundsDirty)\n      return this._bounds;\n    this._boundsDirty = false;\n    return getGeometryBounds(this, \"aPosition\", this._bounds);\n  }\n  /**\n   * destroys the geometry.\n   * @param destroyBuffers - destroy the buffers associated with this geometry\n   */\n  destroy(destroyBuffers = false) {\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    if (destroyBuffers) {\n      this.buffers.forEach((buffer) => buffer.destroy());\n    }\n    this.attributes = null;\n    this.buffers = null;\n    this.indexBuffer = null;\n    this._bounds = null;\n  }\n}\n\nexport { Geometry };\n//# sourceMappingURL=Geometry.mjs.map\n","import { Buffer } from '../../renderers/shared/buffer/Buffer.mjs';\nimport { BufferUsage } from '../../renderers/shared/buffer/const.mjs';\nimport { Geometry } from '../../renderers/shared/geometry/Geometry.mjs';\n\n\"use strict\";\nconst placeHolderBufferData = new Float32Array(1);\nconst placeHolderIndexData = new Uint32Array(1);\nclass BatchGeometry extends Geometry {\n  constructor() {\n    const vertexSize = 6;\n    const attributeBuffer = new Buffer({\n      data: placeHolderBufferData,\n      label: \"attribute-batch-buffer\",\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST,\n      shrinkToFit: false\n    });\n    const indexBuffer = new Buffer({\n      data: placeHolderIndexData,\n      label: \"index-batch-buffer\",\n      usage: BufferUsage.INDEX | BufferUsage.COPY_DST,\n      // | BufferUsage.STATIC,\n      shrinkToFit: false\n    });\n    const stride = vertexSize * 4;\n    super({\n      attributes: {\n        aPosition: {\n          buffer: attributeBuffer,\n          format: \"float32x2\",\n          stride,\n          offset: 0,\n          location: 1\n        },\n        aUV: {\n          buffer: attributeBuffer,\n          format: \"float32x2\",\n          stride,\n          offset: 2 * 4,\n          location: 3\n        },\n        aColor: {\n          buffer: attributeBuffer,\n          format: \"unorm8x4\",\n          stride,\n          offset: 4 * 4,\n          location: 0\n        },\n        aTextureIdAndRound: {\n          buffer: attributeBuffer,\n          format: \"uint16x2\",\n          stride,\n          offset: 5 * 4,\n          location: 2\n        }\n      },\n      indexBuffer\n    });\n  }\n}\n\nexport { BatchGeometry };\n//# sourceMappingURL=BatchGeometry.mjs.map\n","\"use strict\";\nconst MAX_TEXTURES = 16;\n\nexport { MAX_TEXTURES };\n//# sourceMappingURL=const.mjs.map\n","import { BindGroup } from '../../renderers/gpu/shader/BindGroup.mjs';\nimport { Texture } from '../../renderers/shared/texture/Texture.mjs';\nimport { MAX_TEXTURES } from '../shared/const.mjs';\n\n\"use strict\";\nconst cachedGroups = {};\nfunction getTextureBatchBindGroup(textures, size) {\n  let uid = 0;\n  for (let i = 0; i < size; i++) {\n    uid = uid * 31 + textures[i].uid >>> 0;\n  }\n  return cachedGroups[uid] || generateTextureBatchBindGroup(textures, uid);\n}\nfunction generateTextureBatchBindGroup(textures, key) {\n  const bindGroupResources = {};\n  let bindIndex = 0;\n  for (let i = 0; i < MAX_TEXTURES; i++) {\n    const texture = i < textures.length ? textures[i] : Texture.EMPTY.source;\n    bindGroupResources[bindIndex++] = texture.source;\n    bindGroupResources[bindIndex++] = texture.style;\n  }\n  const bindGroup = new BindGroup(bindGroupResources);\n  cachedGroups[key] = bindGroup;\n  return bindGroup;\n}\n\nexport { getTextureBatchBindGroup };\n//# sourceMappingURL=getTextureBatchBindGroup.mjs.map\n","\"use strict\";\nclass ViewableBuffer {\n  constructor(sizeOrBuffer) {\n    if (typeof sizeOrBuffer === \"number\") {\n      this.rawBinaryData = new ArrayBuffer(sizeOrBuffer);\n    } else if (sizeOrBuffer instanceof Uint8Array) {\n      this.rawBinaryData = sizeOrBuffer.buffer;\n    } else {\n      this.rawBinaryData = sizeOrBuffer;\n    }\n    this.uint32View = new Uint32Array(this.rawBinaryData);\n    this.float32View = new Float32Array(this.rawBinaryData);\n    this.size = this.rawBinaryData.byteLength;\n  }\n  /** View on the raw binary data as a `Int8Array`. */\n  get int8View() {\n    if (!this._int8View) {\n      this._int8View = new Int8Array(this.rawBinaryData);\n    }\n    return this._int8View;\n  }\n  /** View on the raw binary data as a `Uint8Array`. */\n  get uint8View() {\n    if (!this._uint8View) {\n      this._uint8View = new Uint8Array(this.rawBinaryData);\n    }\n    return this._uint8View;\n  }\n  /**  View on the raw binary data as a `Int16Array`. */\n  get int16View() {\n    if (!this._int16View) {\n      this._int16View = new Int16Array(this.rawBinaryData);\n    }\n    return this._int16View;\n  }\n  /** View on the raw binary data as a `Int32Array`. */\n  get int32View() {\n    if (!this._int32View) {\n      this._int32View = new Int32Array(this.rawBinaryData);\n    }\n    return this._int32View;\n  }\n  /** View on the raw binary data as a `Float64Array`. */\n  get float64View() {\n    if (!this._float64Array) {\n      this._float64Array = new Float64Array(this.rawBinaryData);\n    }\n    return this._float64Array;\n  }\n  /** View on the raw binary data as a `BigUint64Array`. */\n  get bigUint64View() {\n    if (!this._bigUint64Array) {\n      this._bigUint64Array = new BigUint64Array(this.rawBinaryData);\n    }\n    return this._bigUint64Array;\n  }\n  /**\n   * Returns the view of the given type.\n   * @param type - One of `int8`, `uint8`, `int16`,\n   *    `uint16`, `int32`, `uint32`, and `float32`.\n   * @returns - typed array of given type\n   */\n  view(type) {\n    return this[`${type}View`];\n  }\n  /** Destroys all buffer references. Do not use after calling this. */\n  destroy() {\n    this.rawBinaryData = null;\n    this._int8View = null;\n    this._uint8View = null;\n    this._int16View = null;\n    this.uint16View = null;\n    this._int32View = null;\n    this.uint32View = null;\n    this.float32View = null;\n  }\n  /**\n   * Returns the size of the given type in bytes.\n   * @param type - One of `int8`, `uint8`, `int16`,\n   *   `uint16`, `int32`, `uint32`, and `float32`.\n   * @returns - size of the type in bytes\n   */\n  static sizeOf(type) {\n    switch (type) {\n      case \"int8\":\n      case \"uint8\":\n        return 1;\n      case \"int16\":\n      case \"uint16\":\n        return 2;\n      case \"int32\":\n      case \"uint32\":\n      case \"float32\":\n        return 4;\n      default:\n        throw new Error(`${type} isn't a valid view type`);\n    }\n  }\n}\n\nexport { ViewableBuffer };\n//# sourceMappingURL=ViewableBuffer.mjs.map\n","\"use strict\";\nfunction fastCopy(sourceBuffer, destinationBuffer) {\n  const lengthDouble = sourceBuffer.byteLength / 8 | 0;\n  const sourceFloat64View = new Float64Array(sourceBuffer, 0, lengthDouble);\n  const destinationFloat64View = new Float64Array(destinationBuffer, 0, lengthDouble);\n  destinationFloat64View.set(sourceFloat64View);\n  const remainingBytes = sourceBuffer.byteLength - lengthDouble * 8;\n  if (remainingBytes > 0) {\n    const sourceUint8View = new Uint8Array(sourceBuffer, lengthDouble * 8, remainingBytes);\n    const destinationUint8View = new Uint8Array(destinationBuffer, lengthDouble * 8, remainingBytes);\n    destinationUint8View.set(sourceUint8View);\n  }\n}\n\nexport { fastCopy };\n//# sourceMappingURL=fastCopy.mjs.map\n","\"use strict\";\nconst BLEND_TO_NPM = {\n  normal: \"normal-npm\",\n  add: \"add-npm\",\n  screen: \"screen-npm\"\n};\nvar STENCIL_MODES = /* @__PURE__ */ ((STENCIL_MODES2) => {\n  STENCIL_MODES2[STENCIL_MODES2[\"DISABLED\"] = 0] = \"DISABLED\";\n  STENCIL_MODES2[STENCIL_MODES2[\"RENDERING_MASK_ADD\"] = 1] = \"RENDERING_MASK_ADD\";\n  STENCIL_MODES2[STENCIL_MODES2[\"MASK_ACTIVE\"] = 2] = \"MASK_ACTIVE\";\n  STENCIL_MODES2[STENCIL_MODES2[\"RENDERING_MASK_REMOVE\"] = 3] = \"RENDERING_MASK_REMOVE\";\n  STENCIL_MODES2[STENCIL_MODES2[\"NONE\"] = 4] = \"NONE\";\n  return STENCIL_MODES2;\n})(STENCIL_MODES || {});\n\nexport { BLEND_TO_NPM, STENCIL_MODES };\n//# sourceMappingURL=const.mjs.map\n","import { BLEND_TO_NPM } from './const.mjs';\n\n\"use strict\";\nfunction getAdjustedBlendModeBlend(blendMode, textureSource) {\n  if (textureSource.alphaMode === \"no-premultiply-alpha\") {\n    return BLEND_TO_NPM[blendMode] || blendMode;\n  }\n  return blendMode;\n}\n\nexport { getAdjustedBlendModeBlend };\n//# sourceMappingURL=getAdjustedBlendModeBlend.mjs.map\n","\"use strict\";\nclass BatchTextureArray {\n  constructor() {\n    /** Respective locations for textures. */\n    this.ids = /* @__PURE__ */ Object.create(null);\n    this.textures = [];\n    this.count = 0;\n  }\n  /** Clear the textures and their locations. */\n  clear() {\n    for (let i = 0; i < this.count; i++) {\n      const t = this.textures[i];\n      this.textures[i] = null;\n      this.ids[t.uid] = null;\n    }\n    this.count = 0;\n  }\n}\n\nexport { BatchTextureArray };\n//# sourceMappingURL=BatchTextureArray.mjs.map\n","import { uid } from '../../../utils/data/uid.mjs';\nimport { ViewableBuffer } from '../../../utils/data/ViewableBuffer.mjs';\nimport { fastCopy } from '../../renderers/shared/buffer/utils/fastCopy.mjs';\nimport { getAdjustedBlendModeBlend } from '../../renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nimport { BatchTextureArray } from './BatchTextureArray.mjs';\nimport { MAX_TEXTURES } from './const.mjs';\n\n\"use strict\";\nclass Batch {\n  constructor() {\n    this.renderPipeId = \"batch\";\n    this.action = \"startBatch\";\n    // TODO - eventually this could be useful for flagging batches as dirty and then only rebuilding those ones\n    // public elementStart = 0;\n    // public elementSize = 0;\n    // for drawing..\n    this.start = 0;\n    this.size = 0;\n    this.blendMode = \"normal\";\n    this.canBundle = true;\n  }\n  destroy() {\n    this.textures = null;\n    this.gpuBindGroup = null;\n    this.bindGroup = null;\n    this.batcher = null;\n  }\n}\nlet BATCH_TICK = 0;\nconst _Batcher = class _Batcher {\n  constructor(options = {}) {\n    this.uid = uid(\"batcher\");\n    this.dirty = true;\n    this.batchIndex = 0;\n    this.batches = [];\n    // specifics.\n    this._vertexSize = 6;\n    this._elements = [];\n    this._batchPool = [];\n    this._batchPoolIndex = 0;\n    this._textureBatchPool = [];\n    this._textureBatchPoolIndex = 0;\n    options = { ..._Batcher.defaultOptions, ...options };\n    const { vertexSize, indexSize } = options;\n    this.attributeBuffer = new ViewableBuffer(vertexSize * this._vertexSize * 4);\n    this.indexBuffer = new Uint16Array(indexSize);\n  }\n  begin() {\n    this.batchIndex = 0;\n    this.elementSize = 0;\n    this.elementStart = 0;\n    this.indexSize = 0;\n    this.attributeSize = 0;\n    this._batchPoolIndex = 0;\n    this._textureBatchPoolIndex = 0;\n    this._batchIndexStart = 0;\n    this._batchIndexSize = 0;\n    this.dirty = true;\n  }\n  add(batchableObject) {\n    this._elements[this.elementSize++] = batchableObject;\n    batchableObject.indexStart = this.indexSize;\n    batchableObject.location = this.attributeSize;\n    batchableObject.batcher = this;\n    this.indexSize += batchableObject.indexSize;\n    this.attributeSize += batchableObject.vertexSize * this._vertexSize;\n  }\n  checkAndUpdateTexture(batchableObject, texture) {\n    const textureId = batchableObject.batch.textures.ids[texture._source.uid];\n    if (!textureId && textureId !== 0)\n      return false;\n    batchableObject.textureId = textureId;\n    batchableObject.texture = texture;\n    return true;\n  }\n  updateElement(batchableObject) {\n    this.dirty = true;\n    batchableObject.packAttributes(\n      this.attributeBuffer.float32View,\n      this.attributeBuffer.uint32View,\n      batchableObject.location,\n      batchableObject.textureId\n    );\n  }\n  /**\n   * breaks the batcher. This happens when a batch gets too big,\n   * or we need to switch to a different type of rendering (a filter for example)\n   * @param instructionSet\n   */\n  break(instructionSet) {\n    const elements = this._elements;\n    let textureBatch = this._textureBatchPool[this._textureBatchPoolIndex++] || new BatchTextureArray();\n    textureBatch.clear();\n    if (!elements[this.elementStart])\n      return;\n    const firstElement = elements[this.elementStart];\n    let blendMode = getAdjustedBlendModeBlend(firstElement.blendMode, firstElement.texture._source);\n    if (this.attributeSize * 4 > this.attributeBuffer.size) {\n      this._resizeAttributeBuffer(this.attributeSize * 4);\n    }\n    if (this.indexSize > this.indexBuffer.length) {\n      this._resizeIndexBuffer(this.indexSize);\n    }\n    const f32 = this.attributeBuffer.float32View;\n    const u32 = this.attributeBuffer.uint32View;\n    const iBuffer = this.indexBuffer;\n    let size = this._batchIndexSize;\n    let start = this._batchIndexStart;\n    let action = \"startBatch\";\n    let batch = this._batchPool[this._batchPoolIndex++] || new Batch();\n    for (let i = this.elementStart; i < this.elementSize; ++i) {\n      const element = elements[i];\n      elements[i] = null;\n      const texture = element.texture;\n      const source = texture._source;\n      const adjustedBlendMode = getAdjustedBlendModeBlend(element.blendMode, source);\n      const blendModeChange = blendMode !== adjustedBlendMode;\n      if (source._batchTick === BATCH_TICK && !blendModeChange) {\n        element.textureId = source._textureBindLocation;\n        size += element.indexSize;\n        element.packAttributes(f32, u32, element.location, element.textureId);\n        element.packIndex(iBuffer, element.indexStart, element.location / this._vertexSize);\n        element.batch = batch;\n        continue;\n      }\n      source._batchTick = BATCH_TICK;\n      if (textureBatch.count >= MAX_TEXTURES || blendModeChange) {\n        this._finishBatch(\n          batch,\n          start,\n          size - start,\n          textureBatch,\n          blendMode,\n          instructionSet,\n          action\n        );\n        action = \"renderBatch\";\n        start = size;\n        blendMode = adjustedBlendMode;\n        textureBatch = this._textureBatchPool[this._textureBatchPoolIndex++] || new BatchTextureArray();\n        textureBatch.clear();\n        batch = this._batchPool[this._batchPoolIndex++] || new Batch();\n        ++BATCH_TICK;\n      }\n      element.textureId = source._textureBindLocation = textureBatch.count;\n      textureBatch.ids[source.uid] = textureBatch.count;\n      textureBatch.textures[textureBatch.count++] = source;\n      element.batch = batch;\n      size += element.indexSize;\n      element.packAttributes(f32, u32, element.location, element.textureId);\n      element.packIndex(iBuffer, element.indexStart, element.location / this._vertexSize);\n    }\n    if (textureBatch.count > 0) {\n      this._finishBatch(\n        batch,\n        start,\n        size - start,\n        textureBatch,\n        blendMode,\n        instructionSet,\n        action\n      );\n      start = size;\n      ++BATCH_TICK;\n    }\n    this.elementStart = this.elementSize;\n    this._batchIndexStart = start;\n    this._batchIndexSize = size;\n  }\n  _finishBatch(batch, indexStart, indexSize, textureBatch, blendMode, instructionSet, action) {\n    batch.gpuBindGroup = null;\n    batch.action = action;\n    batch.batcher = this;\n    batch.textures = textureBatch;\n    batch.blendMode = blendMode;\n    batch.start = indexStart;\n    batch.size = indexSize;\n    ++BATCH_TICK;\n    instructionSet.add(batch);\n  }\n  finish(instructionSet) {\n    this.break(instructionSet);\n  }\n  /**\n   * Resizes the attribute buffer to the given size (1 = 1 float32)\n   * @param size - the size in vertices to ensure (not bytes!)\n   */\n  ensureAttributeBuffer(size) {\n    if (size * 4 <= this.attributeBuffer.size)\n      return;\n    this._resizeAttributeBuffer(size * 4);\n  }\n  /**\n   * Resizes the index buffer to the given size (1 = 1 float32)\n   * @param size - the size in vertices to ensure (not bytes!)\n   */\n  ensureIndexBuffer(size) {\n    if (size <= this.indexBuffer.length)\n      return;\n    this._resizeIndexBuffer(size);\n  }\n  _resizeAttributeBuffer(size) {\n    const newSize = Math.max(size, this.attributeBuffer.size * 2);\n    const newArrayBuffer = new ViewableBuffer(newSize);\n    fastCopy(this.attributeBuffer.rawBinaryData, newArrayBuffer.rawBinaryData);\n    this.attributeBuffer = newArrayBuffer;\n  }\n  _resizeIndexBuffer(size) {\n    const indexBuffer = this.indexBuffer;\n    let newSize = Math.max(size, indexBuffer.length * 1.5);\n    newSize += newSize % 2;\n    const newIndexBuffer = newSize > 65535 ? new Uint32Array(newSize) : new Uint16Array(newSize);\n    if (newIndexBuffer.BYTES_PER_ELEMENT !== indexBuffer.BYTES_PER_ELEMENT) {\n      for (let i = 0; i < indexBuffer.length; i++) {\n        newIndexBuffer[i] = indexBuffer[i];\n      }\n    } else {\n      fastCopy(indexBuffer.buffer, newIndexBuffer.buffer);\n    }\n    this.indexBuffer = newIndexBuffer;\n  }\n  destroy() {\n    for (let i = 0; i < this.batches.length; i++) {\n      this.batches[i].destroy();\n    }\n    this.batches = null;\n    for (let i = 0; i < this._elements.length; i++) {\n      this._elements[i].batch = null;\n    }\n    this._elements = null;\n    this.indexBuffer = null;\n    this.attributeBuffer.destroy();\n    this.attributeBuffer = null;\n  }\n};\n_Batcher.defaultOptions = {\n  vertexSize: 4,\n  indexSize: 6\n};\nlet Batcher = _Batcher;\n\nexport { Batch, Batcher };\n//# sourceMappingURL=Batcher.mjs.map\n","\"use strict\";\nfunction buildUvs(vertices, verticesStride, verticesOffset, uvs, uvsOffset, uvsStride, size, matrix = null) {\n  let index = 0;\n  verticesOffset *= verticesStride;\n  uvsOffset *= uvsStride;\n  const a = matrix.a;\n  const b = matrix.b;\n  const c = matrix.c;\n  const d = matrix.d;\n  const tx = matrix.tx;\n  const ty = matrix.ty;\n  while (index < size) {\n    const x = vertices[verticesOffset];\n    const y = vertices[verticesOffset + 1];\n    uvs[uvsOffset] = a * x + c * y + tx;\n    uvs[uvsOffset + 1] = b * x + d * y + ty;\n    uvsOffset += uvsStride;\n    verticesOffset += verticesStride;\n    index++;\n  }\n}\nfunction buildSimpleUvs(uvs, uvsOffset, uvsStride, size) {\n  let index = 0;\n  uvsOffset *= uvsStride;\n  while (index < size) {\n    uvs[uvsOffset] = 0;\n    uvs[uvsOffset + 1] = 0;\n    uvsOffset += uvsStride;\n    index++;\n  }\n}\n\nexport { buildSimpleUvs, buildUvs };\n//# sourceMappingURL=buildUvs.mjs.map\n","\"use strict\";\nfunction transformVertices(vertices, m, offset, stride, size) {\n  const a = m.a;\n  const b = m.b;\n  const c = m.c;\n  const d = m.d;\n  const tx = m.tx;\n  const ty = m.ty;\n  offset = offset || 0;\n  stride = stride || 2;\n  size = size || vertices.length / stride - offset;\n  let index = offset * stride;\n  for (let i = 0; i < size; i++) {\n    const x = vertices[index];\n    const y = vertices[index + 1];\n    vertices[index] = a * x + c * y + tx;\n    vertices[index + 1] = b * x + d * y + ty;\n    index += stride;\n  }\n}\n\nexport { transformVertices };\n//# sourceMappingURL=transformVertices.mjs.map\n","\"use strict\";\nfunction multiplyHexColors(color1, color2) {\n  if (color1 === 16777215 || !color2)\n    return color2;\n  if (color2 === 16777215 || !color1)\n    return color1;\n  const r1 = color1 >> 16 & 255;\n  const g1 = color1 >> 8 & 255;\n  const b1 = color1 & 255;\n  const r2 = color2 >> 16 & 255;\n  const g2 = color2 >> 8 & 255;\n  const b2 = color2 & 255;\n  const r = r1 * r2 / 255;\n  const g = g1 * g2 / 255;\n  const b = b1 * b2 / 255;\n  return (r << 16) + (g << 8) + b;\n}\n\nexport { multiplyHexColors };\n//# sourceMappingURL=multiplyHexColors.mjs.map\n","import { multiplyHexColors } from '../../container/utils/multiplyHexColors.mjs';\n\n\"use strict\";\nclass BatchableGraphics {\n  constructor() {\n    this.batcher = null;\n    this.batch = null;\n    this.applyTransform = true;\n    this.roundPixels = 0;\n  }\n  get blendMode() {\n    if (this.applyTransform) {\n      return this.renderable.groupBlendMode;\n    }\n    return \"normal\";\n  }\n  packIndex(indexBuffer, index, indicesOffset) {\n    const indices = this.geometryData.indices;\n    for (let i = 0; i < this.indexSize; i++) {\n      indexBuffer[index++] = indices[i + this.indexOffset] + indicesOffset - this.vertexOffset;\n    }\n  }\n  packAttributes(float32View, uint32View, index, textureId) {\n    const geometry = this.geometryData;\n    const graphics = this.renderable;\n    const positions = geometry.vertices;\n    const uvs = geometry.uvs;\n    const offset = this.vertexOffset * 2;\n    const vertSize = (this.vertexOffset + this.vertexSize) * 2;\n    const rgb = this.color;\n    const bgr = rgb >> 16 | rgb & 65280 | (rgb & 255) << 16;\n    if (this.applyTransform) {\n      const argb = multiplyHexColors(bgr, graphics.groupColor) + (this.alpha * graphics.groupAlpha * 255 << 24);\n      const wt = graphics.groupTransform;\n      const textureIdAndRound = textureId << 16 | this.roundPixels & 65535;\n      const a = wt.a;\n      const b = wt.b;\n      const c = wt.c;\n      const d = wt.d;\n      const tx = wt.tx;\n      const ty = wt.ty;\n      for (let i = offset; i < vertSize; i += 2) {\n        const x = positions[i];\n        const y = positions[i + 1];\n        float32View[index] = a * x + c * y + tx;\n        float32View[index + 1] = b * x + d * y + ty;\n        float32View[index + 2] = uvs[i];\n        float32View[index + 3] = uvs[i + 1];\n        uint32View[index + 4] = argb;\n        uint32View[index + 5] = textureIdAndRound;\n        index += 6;\n      }\n    } else {\n      const argb = bgr + (this.alpha * 255 << 24);\n      for (let i = offset; i < vertSize; i += 2) {\n        float32View[index] = positions[i];\n        float32View[index + 1] = positions[i + 1];\n        float32View[index + 2] = uvs[i];\n        float32View[index + 3] = uvs[i + 1];\n        uint32View[index + 4] = argb;\n        uint32View[index + 5] = textureId << 16;\n        index += 6;\n      }\n    }\n  }\n  // TODO rename to vertexSize\n  get vertSize() {\n    return this.vertexSize;\n  }\n  copyTo(gpuBuffer) {\n    gpuBuffer.indexOffset = this.indexOffset;\n    gpuBuffer.indexSize = this.indexSize;\n    gpuBuffer.vertexOffset = this.vertexOffset;\n    gpuBuffer.vertexSize = this.vertexSize;\n    gpuBuffer.color = this.color;\n    gpuBuffer.alpha = this.alpha;\n    gpuBuffer.texture = this.texture;\n    gpuBuffer.geometryData = this.geometryData;\n  }\n  reset() {\n    this.applyTransform = true;\n  }\n}\n\nexport { BatchableGraphics };\n//# sourceMappingURL=BatchableGraphics.mjs.map\n","\"use strict\";\nconst buildCircle = {\n  build(shape, points) {\n    let x;\n    let y;\n    let dx;\n    let dy;\n    let rx;\n    let ry;\n    if (shape.type === \"circle\") {\n      const circle = shape;\n      x = circle.x;\n      y = circle.y;\n      rx = ry = circle.radius;\n      dx = dy = 0;\n    } else if (shape.type === \"ellipse\") {\n      const ellipse = shape;\n      x = ellipse.x;\n      y = ellipse.y;\n      rx = ellipse.halfWidth;\n      ry = ellipse.halfHeight;\n      dx = dy = 0;\n    } else {\n      const roundedRect = shape;\n      const halfWidth = roundedRect.width / 2;\n      const halfHeight = roundedRect.height / 2;\n      x = roundedRect.x + halfWidth;\n      y = roundedRect.y + halfHeight;\n      rx = ry = Math.max(0, Math.min(roundedRect.radius, Math.min(halfWidth, halfHeight)));\n      dx = halfWidth - rx;\n      dy = halfHeight - ry;\n    }\n    if (!(rx >= 0 && ry >= 0 && dx >= 0 && dy >= 0)) {\n      return points;\n    }\n    const n = Math.ceil(2.3 * Math.sqrt(rx + ry));\n    const m = n * 8 + (dx ? 4 : 0) + (dy ? 4 : 0);\n    if (m === 0) {\n      return points;\n    }\n    if (n === 0) {\n      points[0] = points[6] = x + dx;\n      points[1] = points[3] = y + dy;\n      points[2] = points[4] = x - dx;\n      points[5] = points[7] = y - dy;\n      return points;\n    }\n    let j1 = 0;\n    let j2 = n * 4 + (dx ? 2 : 0) + 2;\n    let j3 = j2;\n    let j4 = m;\n    let x0 = dx + rx;\n    let y0 = dy;\n    let x1 = x + x0;\n    let x2 = x - x0;\n    let y1 = y + y0;\n    points[j1++] = x1;\n    points[j1++] = y1;\n    points[--j2] = y1;\n    points[--j2] = x2;\n    if (dy) {\n      const y22 = y - y0;\n      points[j3++] = x2;\n      points[j3++] = y22;\n      points[--j4] = y22;\n      points[--j4] = x1;\n    }\n    for (let i = 1; i < n; i++) {\n      const a = Math.PI / 2 * (i / n);\n      const x02 = dx + Math.cos(a) * rx;\n      const y02 = dy + Math.sin(a) * ry;\n      const x12 = x + x02;\n      const x22 = x - x02;\n      const y12 = y + y02;\n      const y22 = y - y02;\n      points[j1++] = x12;\n      points[j1++] = y12;\n      points[--j2] = y12;\n      points[--j2] = x22;\n      points[j3++] = x22;\n      points[j3++] = y22;\n      points[--j4] = y22;\n      points[--j4] = x12;\n    }\n    x0 = dx;\n    y0 = dy + ry;\n    x1 = x + x0;\n    x2 = x - x0;\n    y1 = y + y0;\n    const y2 = y - y0;\n    points[j1++] = x1;\n    points[j1++] = y1;\n    points[--j4] = y2;\n    points[--j4] = x1;\n    if (dx) {\n      points[j1++] = x2;\n      points[j1++] = y1;\n      points[--j4] = y2;\n      points[--j4] = x2;\n    }\n    return points;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    if (points.length === 0) {\n      return;\n    }\n    let centerX = 0;\n    let centerY = 0;\n    for (let i = 0; i < points.length; i += 2) {\n      centerX += points[i];\n      centerY += points[i + 1];\n    }\n    centerX /= points.length / 2;\n    centerY /= points.length / 2;\n    let count = verticesOffset;\n    vertices[count * verticesStride] = centerX;\n    vertices[count * verticesStride + 1] = centerY;\n    const centerIndex = count++;\n    for (let i = 0; i < points.length; i += 2) {\n      vertices[count * verticesStride] = points[i];\n      vertices[count * verticesStride + 1] = points[i + 1];\n      if (i > 0) {\n        indices[indicesOffset++] = count;\n        indices[indicesOffset++] = centerIndex;\n        indices[indicesOffset++] = count - 1;\n      }\n      count++;\n    }\n    indices[indicesOffset++] = centerIndex + 1;\n    indices[indicesOffset++] = centerIndex;\n    indices[indicesOffset++] = count - 1;\n  }\n};\n\nexport { buildCircle };\n//# sourceMappingURL=buildCircle.mjs.map\n","\"use strict\";\nconst closePointEps = 1e-4;\nconst curveEps = 1e-4;\n\nexport { closePointEps, curveEps };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nfunction getOrientationOfPoints(points) {\n  const m = points.length;\n  if (m < 6) {\n    return 1;\n  }\n  let area = 0;\n  for (let i = 0, x1 = points[m - 2], y1 = points[m - 1]; i < m; i += 2) {\n    const x2 = points[i];\n    const y2 = points[i + 1];\n    area += (x2 - x1) * (y2 + y1);\n    x1 = x2;\n    y1 = y2;\n  }\n  if (area < 0) {\n    return -1;\n  }\n  return 1;\n}\n\nexport { getOrientationOfPoints };\n//# sourceMappingURL=getOrientationOfPoints.mjs.map\n","import { Point } from '../../../../maths/point/Point.mjs';\nimport { closePointEps, curveEps } from '../const.mjs';\nimport { getOrientationOfPoints } from '../utils/getOrientationOfPoints.mjs';\n\n\"use strict\";\nfunction square(x, y, nx, ny, innerWeight, outerWeight, clockwise, verts) {\n  const ix = x - nx * innerWeight;\n  const iy = y - ny * innerWeight;\n  const ox = x + nx * outerWeight;\n  const oy = y + ny * outerWeight;\n  let exx;\n  let eyy;\n  if (clockwise) {\n    exx = ny;\n    eyy = -nx;\n  } else {\n    exx = -ny;\n    eyy = nx;\n  }\n  const eix = ix + exx;\n  const eiy = iy + eyy;\n  const eox = ox + exx;\n  const eoy = oy + eyy;\n  verts.push(eix, eiy);\n  verts.push(eox, eoy);\n  return 2;\n}\nfunction round(cx, cy, sx, sy, ex, ey, verts, clockwise) {\n  const cx2p0x = sx - cx;\n  const cy2p0y = sy - cy;\n  let angle0 = Math.atan2(cx2p0x, cy2p0y);\n  let angle1 = Math.atan2(ex - cx, ey - cy);\n  if (clockwise && angle0 < angle1) {\n    angle0 += Math.PI * 2;\n  } else if (!clockwise && angle0 > angle1) {\n    angle1 += Math.PI * 2;\n  }\n  let startAngle = angle0;\n  const angleDiff = angle1 - angle0;\n  const absAngleDiff = Math.abs(angleDiff);\n  const radius = Math.sqrt(cx2p0x * cx2p0x + cy2p0y * cy2p0y);\n  const segCount = (15 * absAngleDiff * Math.sqrt(radius) / Math.PI >> 0) + 1;\n  const angleInc = angleDiff / segCount;\n  startAngle += angleInc;\n  if (clockwise) {\n    verts.push(cx, cy);\n    verts.push(sx, sy);\n    for (let i = 1, angle = startAngle; i < segCount; i++, angle += angleInc) {\n      verts.push(cx, cy);\n      verts.push(\n        cx + Math.sin(angle) * radius,\n        cy + Math.cos(angle) * radius\n      );\n    }\n    verts.push(cx, cy);\n    verts.push(ex, ey);\n  } else {\n    verts.push(sx, sy);\n    verts.push(cx, cy);\n    for (let i = 1, angle = startAngle; i < segCount; i++, angle += angleInc) {\n      verts.push(\n        cx + Math.sin(angle) * radius,\n        cy + Math.cos(angle) * radius\n      );\n      verts.push(cx, cy);\n    }\n    verts.push(ex, ey);\n    verts.push(cx, cy);\n  }\n  return segCount * 2;\n}\nfunction buildLine(points, lineStyle, flipAlignment, closed, vertices, _verticesStride, _verticesOffset, indices, _indicesOffset) {\n  const eps = closePointEps;\n  if (points.length === 0) {\n    return;\n  }\n  const style = lineStyle;\n  let alignment = style.alignment;\n  if (lineStyle.alignment !== 0.5) {\n    let orientation = getOrientationOfPoints(points);\n    if (flipAlignment)\n      orientation *= -1;\n    alignment = (alignment - 0.5) * orientation + 0.5;\n  }\n  const firstPoint = new Point(points[0], points[1]);\n  const lastPoint = new Point(points[points.length - 2], points[points.length - 1]);\n  const closedShape = closed;\n  const closedPath = Math.abs(firstPoint.x - lastPoint.x) < eps && Math.abs(firstPoint.y - lastPoint.y) < eps;\n  if (closedShape) {\n    points = points.slice();\n    if (closedPath) {\n      points.pop();\n      points.pop();\n      lastPoint.set(points[points.length - 2], points[points.length - 1]);\n    }\n    const midPointX = (firstPoint.x + lastPoint.x) * 0.5;\n    const midPointY = (lastPoint.y + firstPoint.y) * 0.5;\n    points.unshift(midPointX, midPointY);\n    points.push(midPointX, midPointY);\n  }\n  const verts = vertices;\n  const length = points.length / 2;\n  let indexCount = points.length;\n  const indexStart = verts.length / 2;\n  const width = style.width / 2;\n  const widthSquared = width * width;\n  const miterLimitSquared = style.miterLimit * style.miterLimit;\n  let x0 = points[0];\n  let y0 = points[1];\n  let x1 = points[2];\n  let y1 = points[3];\n  let x2 = 0;\n  let y2 = 0;\n  let perpX = -(y0 - y1);\n  let perpY = x0 - x1;\n  let perp1x = 0;\n  let perp1y = 0;\n  let dist = Math.sqrt(perpX * perpX + perpY * perpY);\n  perpX /= dist;\n  perpY /= dist;\n  perpX *= width;\n  perpY *= width;\n  const ratio = alignment;\n  const innerWeight = (1 - ratio) * 2;\n  const outerWeight = ratio * 2;\n  if (!closedShape) {\n    if (style.cap === \"round\") {\n      indexCount += round(\n        x0 - perpX * (innerWeight - outerWeight) * 0.5,\n        y0 - perpY * (innerWeight - outerWeight) * 0.5,\n        x0 - perpX * innerWeight,\n        y0 - perpY * innerWeight,\n        x0 + perpX * outerWeight,\n        y0 + perpY * outerWeight,\n        verts,\n        true\n      ) + 2;\n    } else if (style.cap === \"square\") {\n      indexCount += square(x0, y0, perpX, perpY, innerWeight, outerWeight, true, verts);\n    }\n  }\n  verts.push(\n    x0 - perpX * innerWeight,\n    y0 - perpY * innerWeight\n  );\n  verts.push(\n    x0 + perpX * outerWeight,\n    y0 + perpY * outerWeight\n  );\n  for (let i = 1; i < length - 1; ++i) {\n    x0 = points[(i - 1) * 2];\n    y0 = points[(i - 1) * 2 + 1];\n    x1 = points[i * 2];\n    y1 = points[i * 2 + 1];\n    x2 = points[(i + 1) * 2];\n    y2 = points[(i + 1) * 2 + 1];\n    perpX = -(y0 - y1);\n    perpY = x0 - x1;\n    dist = Math.sqrt(perpX * perpX + perpY * perpY);\n    perpX /= dist;\n    perpY /= dist;\n    perpX *= width;\n    perpY *= width;\n    perp1x = -(y1 - y2);\n    perp1y = x1 - x2;\n    dist = Math.sqrt(perp1x * perp1x + perp1y * perp1y);\n    perp1x /= dist;\n    perp1y /= dist;\n    perp1x *= width;\n    perp1y *= width;\n    const dx0 = x1 - x0;\n    const dy0 = y0 - y1;\n    const dx1 = x1 - x2;\n    const dy1 = y2 - y1;\n    const dot = dx0 * dx1 + dy0 * dy1;\n    const cross = dy0 * dx1 - dy1 * dx0;\n    const clockwise = cross < 0;\n    if (Math.abs(cross) < 1e-3 * Math.abs(dot)) {\n      verts.push(\n        x1 - perpX * innerWeight,\n        y1 - perpY * innerWeight\n      );\n      verts.push(\n        x1 + perpX * outerWeight,\n        y1 + perpY * outerWeight\n      );\n      if (dot >= 0) {\n        if (style.join === \"round\") {\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 4;\n        } else {\n          indexCount += 2;\n        }\n        verts.push(\n          x1 - perp1x * outerWeight,\n          y1 - perp1y * outerWeight\n        );\n        verts.push(\n          x1 + perp1x * innerWeight,\n          y1 + perp1y * innerWeight\n        );\n      }\n      continue;\n    }\n    const c1 = (-perpX + x0) * (-perpY + y1) - (-perpX + x1) * (-perpY + y0);\n    const c2 = (-perp1x + x2) * (-perp1y + y1) - (-perp1x + x1) * (-perp1y + y2);\n    const px = (dx0 * c2 - dx1 * c1) / cross;\n    const py = (dy1 * c1 - dy0 * c2) / cross;\n    const pDist = (px - x1) * (px - x1) + (py - y1) * (py - y1);\n    const imx = x1 + (px - x1) * innerWeight;\n    const imy = y1 + (py - y1) * innerWeight;\n    const omx = x1 - (px - x1) * outerWeight;\n    const omy = y1 - (py - y1) * outerWeight;\n    const smallerInsideSegmentSq = Math.min(dx0 * dx0 + dy0 * dy0, dx1 * dx1 + dy1 * dy1);\n    const insideWeight = clockwise ? innerWeight : outerWeight;\n    const smallerInsideDiagonalSq = smallerInsideSegmentSq + insideWeight * insideWeight * widthSquared;\n    const insideMiterOk = pDist <= smallerInsideDiagonalSq;\n    if (insideMiterOk) {\n      if (style.join === \"bevel\" || pDist / widthSquared > miterLimitSquared) {\n        if (clockwise) {\n          verts.push(imx, imy);\n          verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n          verts.push(imx, imy);\n          verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n        } else {\n          verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n          verts.push(omx, omy);\n          verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n          verts.push(omx, omy);\n        }\n        indexCount += 2;\n      } else if (style.join === \"round\") {\n        if (clockwise) {\n          verts.push(imx, imy);\n          verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n          indexCount += round(\n            x1,\n            y1,\n            x1 + perpX * outerWeight,\n            y1 + perpY * outerWeight,\n            x1 + perp1x * outerWeight,\n            y1 + perp1y * outerWeight,\n            verts,\n            true\n          ) + 4;\n          verts.push(imx, imy);\n          verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n        } else {\n          verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n          verts.push(omx, omy);\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 4;\n          verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n          verts.push(omx, omy);\n        }\n      } else {\n        verts.push(imx, imy);\n        verts.push(omx, omy);\n      }\n    } else {\n      verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n      verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n      if (style.join === \"round\") {\n        if (clockwise) {\n          indexCount += round(\n            x1,\n            y1,\n            x1 + perpX * outerWeight,\n            y1 + perpY * outerWeight,\n            x1 + perp1x * outerWeight,\n            y1 + perp1y * outerWeight,\n            verts,\n            true\n          ) + 2;\n        } else {\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 2;\n        }\n      } else if (style.join === \"miter\" && pDist / widthSquared <= miterLimitSquared) {\n        if (clockwise) {\n          verts.push(omx, omy);\n          verts.push(omx, omy);\n        } else {\n          verts.push(imx, imy);\n          verts.push(imx, imy);\n        }\n        indexCount += 2;\n      }\n      verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n      verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n      indexCount += 2;\n    }\n  }\n  x0 = points[(length - 2) * 2];\n  y0 = points[(length - 2) * 2 + 1];\n  x1 = points[(length - 1) * 2];\n  y1 = points[(length - 1) * 2 + 1];\n  perpX = -(y0 - y1);\n  perpY = x0 - x1;\n  dist = Math.sqrt(perpX * perpX + perpY * perpY);\n  perpX /= dist;\n  perpY /= dist;\n  perpX *= width;\n  perpY *= width;\n  verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n  verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n  if (!closedShape) {\n    if (style.cap === \"round\") {\n      indexCount += round(\n        x1 - perpX * (innerWeight - outerWeight) * 0.5,\n        y1 - perpY * (innerWeight - outerWeight) * 0.5,\n        x1 - perpX * innerWeight,\n        y1 - perpY * innerWeight,\n        x1 + perpX * outerWeight,\n        y1 + perpY * outerWeight,\n        verts,\n        false\n      ) + 2;\n    } else if (style.cap === \"square\") {\n      indexCount += square(x1, y1, perpX, perpY, innerWeight, outerWeight, false, verts);\n    }\n  }\n  const eps2 = curveEps * curveEps;\n  for (let i = indexStart; i < indexCount + indexStart - 2; ++i) {\n    x0 = verts[i * 2];\n    y0 = verts[i * 2 + 1];\n    x1 = verts[(i + 1) * 2];\n    y1 = verts[(i + 1) * 2 + 1];\n    x2 = verts[(i + 2) * 2];\n    y2 = verts[(i + 2) * 2 + 1];\n    if (Math.abs(x0 * (y1 - y2) + x1 * (y2 - y0) + x2 * (y0 - y1)) < eps2) {\n      continue;\n    }\n    indices.push(i, i + 1, i + 2);\n  }\n}\n\nexport { buildLine };\n//# sourceMappingURL=buildLine.mjs.map\n","import earcut from 'earcut';\n\n\"use strict\";\nfunction triangulateWithHoles(points, holes, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n  const triangles = earcut(points, holes, 2);\n  if (!triangles) {\n    return;\n  }\n  for (let i = 0; i < triangles.length; i += 3) {\n    indices[indicesOffset++] = triangles[i] + verticesOffset;\n    indices[indicesOffset++] = triangles[i + 1] + verticesOffset;\n    indices[indicesOffset++] = triangles[i + 2] + verticesOffset;\n  }\n  let index = verticesOffset * verticesStride;\n  for (let i = 0; i < points.length; i += 2) {\n    vertices[index] = points[i];\n    vertices[index + 1] = points[i + 1];\n    index += verticesStride;\n  }\n}\n\nexport { triangulateWithHoles };\n//# sourceMappingURL=triangulateWithHoles.mjs.map\n","import { triangulateWithHoles } from '../utils/triangulateWithHoles.mjs';\n\n\"use strict\";\nconst emptyArray = [];\nconst buildPolygon = {\n  build(shape, points) {\n    for (let i = 0; i < shape.points.length; i++) {\n      points[i] = shape.points[i];\n    }\n    return points;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    triangulateWithHoles(points, emptyArray, vertices, verticesStride, verticesOffset, indices, indicesOffset);\n  }\n};\n\nexport { buildPolygon };\n//# sourceMappingURL=buildPolygon.mjs.map\n","\"use strict\";\nconst buildRectangle = {\n  build(shape, points) {\n    const rectData = shape;\n    const x = rectData.x;\n    const y = rectData.y;\n    const width = rectData.width;\n    const height = rectData.height;\n    if (!(width >= 0 && height >= 0)) {\n      return points;\n    }\n    points[0] = x;\n    points[1] = y;\n    points[2] = x + width;\n    points[3] = y;\n    points[4] = x + width;\n    points[5] = y + height;\n    points[6] = x;\n    points[7] = y + height;\n    return points;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    let count = 0;\n    verticesOffset *= verticesStride;\n    vertices[verticesOffset + count] = points[0];\n    vertices[verticesOffset + count + 1] = points[1];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[2];\n    vertices[verticesOffset + count + 1] = points[3];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[6];\n    vertices[verticesOffset + count + 1] = points[7];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[4];\n    vertices[verticesOffset + count + 1] = points[5];\n    count += verticesStride;\n    const verticesIndex = verticesOffset / verticesStride;\n    indices[indicesOffset++] = verticesIndex;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 2;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 3;\n    indices[indicesOffset++] = verticesIndex + 2;\n  }\n};\n\nexport { buildRectangle };\n//# sourceMappingURL=buildRectangle.mjs.map\n","\"use strict\";\nconst buildTriangle = {\n  build(shape, points) {\n    points[0] = shape.x;\n    points[1] = shape.y;\n    points[2] = shape.x2;\n    points[3] = shape.y2;\n    points[4] = shape.x3;\n    points[5] = shape.y3;\n    return points;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    let count = 0;\n    verticesOffset *= verticesStride;\n    vertices[verticesOffset + count] = points[0];\n    vertices[verticesOffset + count + 1] = points[1];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[2];\n    vertices[verticesOffset + count + 1] = points[3];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[4];\n    vertices[verticesOffset + count + 1] = points[5];\n    const verticesIndex = verticesOffset / verticesStride;\n    indices[indicesOffset++] = verticesIndex;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 2;\n  }\n};\n\nexport { buildTriangle };\n//# sourceMappingURL=buildTriangle.mjs.map\n","import { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { buildUvs, buildSimpleUvs } from '../../../../rendering/renderers/shared/geometry/utils/buildUvs.mjs';\nimport { transformVertices } from '../../../../rendering/renderers/shared/geometry/utils/transformVertices.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { BigPool } from '../../../../utils/pool/PoolGroup.mjs';\nimport { BatchableGraphics } from '../BatchableGraphics.mjs';\nimport { buildCircle } from '../buildCommands/buildCircle.mjs';\nimport { buildLine } from '../buildCommands/buildLine.mjs';\nimport { buildPolygon } from '../buildCommands/buildPolygon.mjs';\nimport { buildRectangle } from '../buildCommands/buildRectangle.mjs';\nimport { buildTriangle } from '../buildCommands/buildTriangle.mjs';\nimport { triangulateWithHoles } from './triangulateWithHoles.mjs';\n\n\"use strict\";\nconst buildMap = {\n  rectangle: buildRectangle,\n  polygon: buildPolygon,\n  triangle: buildTriangle,\n  circle: buildCircle,\n  ellipse: buildCircle,\n  roundedRectangle: buildCircle\n};\nconst tempRect = new Rectangle();\nfunction buildContextBatches(context, gpuContext) {\n  const { geometryData, batches } = gpuContext;\n  batches.length = 0;\n  geometryData.indices.length = 0;\n  geometryData.vertices.length = 0;\n  geometryData.uvs.length = 0;\n  for (let i = 0; i < context.instructions.length; i++) {\n    const instruction = context.instructions[i];\n    if (instruction.action === \"texture\") {\n      addTextureToGeometryData(instruction.data, batches, geometryData);\n    } else if (instruction.action === \"fill\" || instruction.action === \"stroke\") {\n      const isStroke = instruction.action === \"stroke\";\n      const shapePath = instruction.data.path.shapePath;\n      const style = instruction.data.style;\n      const hole = instruction.data.hole;\n      if (isStroke && hole) {\n        addShapePathToGeometryData(hole.shapePath, style, null, true, batches, geometryData);\n      }\n      addShapePathToGeometryData(shapePath, style, hole, isStroke, batches, geometryData);\n    }\n  }\n}\nfunction addTextureToGeometryData(data, batches, geometryData) {\n  const { vertices, uvs, indices } = geometryData;\n  const indexOffset = indices.length;\n  const vertOffset = vertices.length / 2;\n  const points = [];\n  const build = buildMap.rectangle;\n  const rect = tempRect;\n  const texture = data.image;\n  rect.x = data.dx;\n  rect.y = data.dy;\n  rect.width = data.dw;\n  rect.height = data.dh;\n  const matrix = data.transform;\n  build.build(rect, points);\n  if (matrix) {\n    transformVertices(points, matrix);\n  }\n  build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n  const textureUvs = texture.uvs;\n  uvs.push(\n    textureUvs.x0,\n    textureUvs.y0,\n    textureUvs.x1,\n    textureUvs.y1,\n    textureUvs.x3,\n    textureUvs.y3,\n    textureUvs.x2,\n    textureUvs.y2\n  );\n  const graphicsBatch = BigPool.get(BatchableGraphics);\n  graphicsBatch.indexOffset = indexOffset;\n  graphicsBatch.indexSize = indices.length - indexOffset;\n  graphicsBatch.vertexOffset = vertOffset;\n  graphicsBatch.vertexSize = vertices.length / 2 - vertOffset;\n  graphicsBatch.color = data.style;\n  graphicsBatch.alpha = data.alpha;\n  graphicsBatch.texture = texture;\n  graphicsBatch.geometryData = geometryData;\n  batches.push(graphicsBatch);\n}\nfunction addShapePathToGeometryData(shapePath, style, hole, isStroke, batches, geometryData) {\n  const { vertices, uvs, indices } = geometryData;\n  const lastIndex = shapePath.shapePrimitives.length - 1;\n  shapePath.shapePrimitives.forEach(({ shape, transform: matrix }, i) => {\n    const indexOffset = indices.length;\n    const vertOffset = vertices.length / 2;\n    const points = [];\n    const build = buildMap[shape.type];\n    build.build(shape, points);\n    if (matrix) {\n      transformVertices(points, matrix);\n    }\n    if (!isStroke) {\n      if (hole && lastIndex === i) {\n        if (lastIndex !== 0) {\n          console.warn(\"[Pixi Graphics] only the last shape have be cut out\");\n        }\n        const holeIndices = [];\n        const otherPoints = points.slice();\n        const holeArrays = getHoleArrays(hole.shapePath);\n        holeArrays.forEach((holePoints) => {\n          holeIndices.push(otherPoints.length / 2);\n          otherPoints.push(...holePoints);\n        });\n        triangulateWithHoles(otherPoints, holeIndices, vertices, 2, vertOffset, indices, indexOffset);\n      } else {\n        build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n      }\n    } else {\n      const close = shape.closePath ?? true;\n      const lineStyle = style;\n      buildLine(points, lineStyle, false, close, vertices, 2, vertOffset, indices, indexOffset);\n    }\n    const uvsOffset = uvs.length / 2;\n    const texture = style.texture;\n    if (texture !== Texture.WHITE) {\n      const textureMatrix = style.matrix;\n      if (matrix) {\n        textureMatrix.append(matrix.clone().invert());\n      }\n      buildUvs(vertices, 2, vertOffset, uvs, uvsOffset, 2, vertices.length / 2 - vertOffset, textureMatrix);\n    } else {\n      buildSimpleUvs(uvs, uvsOffset, 2, vertices.length / 2 - vertOffset);\n    }\n    const graphicsBatch = BigPool.get(BatchableGraphics);\n    graphicsBatch.indexOffset = indexOffset;\n    graphicsBatch.indexSize = indices.length - indexOffset;\n    graphicsBatch.vertexOffset = vertOffset;\n    graphicsBatch.vertexSize = vertices.length / 2 - vertOffset;\n    graphicsBatch.color = style.color;\n    graphicsBatch.alpha = style.alpha;\n    graphicsBatch.texture = texture;\n    graphicsBatch.geometryData = geometryData;\n    batches.push(graphicsBatch);\n  });\n}\nfunction getHoleArrays(shape) {\n  if (!shape)\n    return [];\n  const holePrimitives = shape.shapePrimitives;\n  const holeArrays = [];\n  for (let k = 0; k < holePrimitives.length; k++) {\n    const holePrimitive = holePrimitives[k].shape;\n    const holePoints = [];\n    const holeBuilder = buildMap[holePrimitive.type];\n    holeBuilder.build(holePrimitive, holePoints);\n    holeArrays.push(holePoints);\n  }\n  return holeArrays;\n}\n\nexport { buildContextBatches };\n//# sourceMappingURL=buildContextBatches.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { BatchGeometry } from '../../../rendering/batcher/gpu/BatchGeometry.mjs';\nimport { getTextureBatchBindGroup } from '../../../rendering/batcher/gpu/getTextureBatchBindGroup.mjs';\nimport { Batcher } from '../../../rendering/batcher/shared/Batcher.mjs';\nimport { InstructionSet } from '../../../rendering/renderers/shared/instructions/InstructionSet.mjs';\nimport { BigPool } from '../../../utils/pool/PoolGroup.mjs';\nimport { buildContextBatches } from './utils/buildContextBatches.mjs';\n\n\"use strict\";\nclass GpuGraphicsContext {\n  constructor() {\n    this.batches = [];\n    this.geometryData = {\n      vertices: [],\n      uvs: [],\n      indices: []\n    };\n  }\n}\nclass GraphicsContextRenderData {\n  constructor() {\n    this.geometry = new BatchGeometry();\n    this.instructions = new InstructionSet();\n  }\n  init() {\n    this.instructions.reset();\n  }\n}\nconst _GraphicsContextSystem = class _GraphicsContextSystem {\n  constructor() {\n    // the root context batches, used to either make a batch or geometry\n    // all graphics use this as a base\n    this._activeBatchers = [];\n    this._gpuContextHash = {};\n    // used for non-batchable graphics\n    this._graphicsDataContextHash = /* @__PURE__ */ Object.create(null);\n    this._needsContextNeedsRebuild = [];\n  }\n  /**\n   * Runner init called, update the default options\n   * @ignore\n   */\n  init(options) {\n    _GraphicsContextSystem.defaultOptions.bezierSmoothness = options?.bezierSmoothness ?? _GraphicsContextSystem.defaultOptions.bezierSmoothness;\n  }\n  prerender() {\n    this._returnActiveBatchers();\n  }\n  getContextRenderData(context) {\n    return this._graphicsDataContextHash[context.uid] || this._initContextRenderData(context);\n  }\n  // Context management functions\n  updateGpuContext(context) {\n    let gpuContext = this._gpuContextHash[context.uid] || this._initContext(context);\n    if (context.dirty) {\n      if (gpuContext) {\n        this._cleanGraphicsContextData(context);\n      } else {\n        gpuContext = this._initContext(context);\n      }\n      buildContextBatches(context, gpuContext);\n      const batchMode = context.batchMode;\n      if (context.customShader || batchMode === \"no-batch\") {\n        gpuContext.isBatchable = false;\n      } else if (batchMode === \"auto\") {\n        gpuContext.isBatchable = gpuContext.geometryData.vertices.length < 400;\n      }\n      context.dirty = false;\n    }\n    return gpuContext;\n  }\n  getGpuContext(context) {\n    return this._gpuContextHash[context.uid] || this._initContext(context);\n  }\n  _returnActiveBatchers() {\n    for (let i = 0; i < this._activeBatchers.length; i++) {\n      BigPool.return(this._activeBatchers[i]);\n    }\n    this._activeBatchers.length = 0;\n  }\n  _initContextRenderData(context) {\n    const graphicsData = BigPool.get(GraphicsContextRenderData);\n    const { batches, geometryData } = this._gpuContextHash[context.uid];\n    const vertexSize = geometryData.vertices.length;\n    const indexSize = geometryData.indices.length;\n    for (let i = 0; i < batches.length; i++) {\n      batches[i].applyTransform = false;\n    }\n    const batcher = BigPool.get(Batcher);\n    this._activeBatchers.push(batcher);\n    batcher.ensureAttributeBuffer(vertexSize);\n    batcher.ensureIndexBuffer(indexSize);\n    batcher.begin();\n    for (let i = 0; i < batches.length; i++) {\n      const batch = batches[i];\n      batcher.add(batch);\n    }\n    batcher.finish(graphicsData.instructions);\n    const geometry = graphicsData.geometry;\n    geometry.indexBuffer.setDataWithSize(batcher.indexBuffer, batcher.indexSize, true);\n    geometry.buffers[0].setDataWithSize(batcher.attributeBuffer.float32View, batcher.attributeSize, true);\n    const drawBatches = batcher.batches;\n    for (let i = 0; i < drawBatches.length; i++) {\n      const batch = drawBatches[i];\n      batch.bindGroup = getTextureBatchBindGroup(batch.textures.textures, batch.textures.count);\n    }\n    this._graphicsDataContextHash[context.uid] = graphicsData;\n    return graphicsData;\n  }\n  _initContext(context) {\n    const gpuContext = new GpuGraphicsContext();\n    this._gpuContextHash[context.uid] = gpuContext;\n    context.on(\"update\", this.onGraphicsContextUpdate, this);\n    context.on(\"destroy\", this.onGraphicsContextDestroy, this);\n    return this._gpuContextHash[context.uid];\n  }\n  onGraphicsContextUpdate(context) {\n    this._needsContextNeedsRebuild.push(context);\n  }\n  onGraphicsContextDestroy(context) {\n    this._cleanGraphicsContextData(context);\n    context.off(\"update\", this.onGraphicsContextUpdate, this);\n    context.off(\"destroy\", this.onGraphicsContextDestroy, this);\n    this._gpuContextHash[context.uid] = null;\n  }\n  _cleanGraphicsContextData(context) {\n    const gpuContext = this._gpuContextHash[context.uid];\n    if (!gpuContext.isBatchable) {\n      if (this._graphicsDataContextHash[context.uid]) {\n        BigPool.return(this.getContextRenderData(context));\n        this._graphicsDataContextHash[context.uid] = null;\n      }\n    }\n    if (gpuContext.batches) {\n      gpuContext.batches.forEach((batch) => {\n        BigPool.return(batch);\n      });\n    }\n  }\n  destroy() {\n    for (const context of this._needsContextNeedsRebuild) {\n      if (this._gpuContextHash[context.uid]) {\n        this.onGraphicsContextDestroy(context);\n      }\n    }\n    this._needsContextNeedsRebuild.length = 0;\n  }\n};\n/** @ignore */\n_GraphicsContextSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"graphicsContext\"\n};\n/** The default options for the GraphicsContextSystem. */\n_GraphicsContextSystem.defaultOptions = {\n  /**\n   * A value from 0 to 1 that controls the smoothness of bezier curves (the higher the smoother)\n   * @default 0.5\n   */\n  bezierSmoothness: 0.5\n};\nlet GraphicsContextSystem = _GraphicsContextSystem;\n\nexport { GpuGraphicsContext, GraphicsContextRenderData, GraphicsContextSystem };\n//# sourceMappingURL=GraphicsContextSystem.mjs.map\n","import { GraphicsContextSystem } from '../GraphicsContextSystem.mjs';\n\n\"use strict\";\nconst RECURSION_LIMIT = 8;\nconst FLT_EPSILON = 11920929e-14;\nconst PATH_DISTANCE_EPSILON = 1;\nconst curveAngleToleranceEpsilon = 0.01;\nconst mAngleTolerance = 0;\nconst mCuspLimit = 0;\nfunction buildAdaptiveBezier(points, sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, smoothness) {\n  const scale = 1;\n  const smoothing = Math.min(\n    0.99,\n    // a value of 1.0 actually inverts smoothing, so we cap it at 0.99\n    Math.max(0, smoothness ?? GraphicsContextSystem.defaultOptions.bezierSmoothness)\n  );\n  let distanceTolerance = (PATH_DISTANCE_EPSILON - smoothing) / scale;\n  distanceTolerance *= distanceTolerance;\n  begin(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance);\n  return points;\n}\nfunction begin(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance) {\n  recursive(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance, 0);\n  points.push(eX, eY);\n}\nfunction recursive(x1, y1, x2, y2, x3, y3, x4, y4, points, distanceTolerance, level) {\n  if (level > RECURSION_LIMIT) {\n    return;\n  }\n  const pi = Math.PI;\n  const x12 = (x1 + x2) / 2;\n  const y12 = (y1 + y2) / 2;\n  const x23 = (x2 + x3) / 2;\n  const y23 = (y2 + y3) / 2;\n  const x34 = (x3 + x4) / 2;\n  const y34 = (y3 + y4) / 2;\n  const x123 = (x12 + x23) / 2;\n  const y123 = (y12 + y23) / 2;\n  const x234 = (x23 + x34) / 2;\n  const y234 = (y23 + y34) / 2;\n  const x1234 = (x123 + x234) / 2;\n  const y1234 = (y123 + y234) / 2;\n  if (level > 0) {\n    let dx = x4 - x1;\n    let dy = y4 - y1;\n    const d2 = Math.abs((x2 - x4) * dy - (y2 - y4) * dx);\n    const d3 = Math.abs((x3 - x4) * dy - (y3 - y4) * dx);\n    let da1;\n    let da2;\n    if (d2 > FLT_EPSILON && d3 > FLT_EPSILON) {\n      if ((d2 + d3) * (d2 + d3) <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        const a23 = Math.atan2(y3 - y2, x3 - x2);\n        da1 = Math.abs(a23 - Math.atan2(y2 - y1, x2 - x1));\n        da2 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - a23);\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da2 >= pi)\n          da2 = 2 * pi - da2;\n        if (da1 + da2 < mAngleTolerance) {\n          points.push(x1234, y1234);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x2, y2);\n            return;\n          }\n          if (da2 > mCuspLimit) {\n            points.push(x3, y3);\n            return;\n          }\n        }\n      }\n    } else if (d2 > FLT_EPSILON) {\n      if (d2 * d2 <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        da1 = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da1 < mAngleTolerance) {\n          points.push(x2, y2);\n          points.push(x3, y3);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x2, y2);\n            return;\n          }\n        }\n      }\n    } else if (d3 > FLT_EPSILON) {\n      if (d3 * d3 <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        da1 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - Math.atan2(y3 - y2, x3 - x2));\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da1 < mAngleTolerance) {\n          points.push(x2, y2);\n          points.push(x3, y3);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x3, y3);\n            return;\n          }\n        }\n      }\n    } else {\n      dx = x1234 - (x1 + x4) / 2;\n      dy = y1234 - (y1 + y4) / 2;\n      if (dx * dx + dy * dy <= distanceTolerance) {\n        points.push(x1234, y1234);\n        return;\n      }\n    }\n  }\n  recursive(x1, y1, x12, y12, x123, y123, x1234, y1234, points, distanceTolerance, level + 1);\n  recursive(x1234, y1234, x234, y234, x34, y34, x4, y4, points, distanceTolerance, level + 1);\n}\n\nexport { buildAdaptiveBezier };\n//# sourceMappingURL=buildAdaptiveBezier.mjs.map\n","import { GraphicsContextSystem } from '../GraphicsContextSystem.mjs';\n\n\"use strict\";\nconst RECURSION_LIMIT = 8;\nconst FLT_EPSILON = 11920929e-14;\nconst PATH_DISTANCE_EPSILON = 1;\nconst curveAngleToleranceEpsilon = 0.01;\nconst mAngleTolerance = 0;\nfunction buildAdaptiveQuadratic(points, sX, sY, cp1x, cp1y, eX, eY, smoothness) {\n  const scale = 1;\n  const smoothing = Math.min(\n    0.99,\n    // a value of 1.0 actually inverts smoothing, so we cap it at 0.99\n    Math.max(0, smoothness ?? GraphicsContextSystem.defaultOptions.bezierSmoothness)\n  );\n  let distanceTolerance = (PATH_DISTANCE_EPSILON - smoothing) / scale;\n  distanceTolerance *= distanceTolerance;\n  begin(sX, sY, cp1x, cp1y, eX, eY, points, distanceTolerance);\n  return points;\n}\nfunction begin(sX, sY, cp1x, cp1y, eX, eY, points, distanceTolerance) {\n  recursive(points, sX, sY, cp1x, cp1y, eX, eY, distanceTolerance, 0);\n  points.push(eX, eY);\n}\nfunction recursive(points, x1, y1, x2, y2, x3, y3, distanceTolerance, level) {\n  if (level > RECURSION_LIMIT) {\n    return;\n  }\n  const pi = Math.PI;\n  const x12 = (x1 + x2) / 2;\n  const y12 = (y1 + y2) / 2;\n  const x23 = (x2 + x3) / 2;\n  const y23 = (y2 + y3) / 2;\n  const x123 = (x12 + x23) / 2;\n  const y123 = (y12 + y23) / 2;\n  let dx = x3 - x1;\n  let dy = y3 - y1;\n  const d = Math.abs((x2 - x3) * dy - (y2 - y3) * dx);\n  if (d > FLT_EPSILON) {\n    if (d * d <= distanceTolerance * (dx * dx + dy * dy)) {\n      if (mAngleTolerance < curveAngleToleranceEpsilon) {\n        points.push(x123, y123);\n        return;\n      }\n      let da = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));\n      if (da >= pi)\n        da = 2 * pi - da;\n      if (da < mAngleTolerance) {\n        points.push(x123, y123);\n        return;\n      }\n    }\n  } else {\n    dx = x123 - (x1 + x3) / 2;\n    dy = y123 - (y1 + y3) / 2;\n    if (dx * dx + dy * dy <= distanceTolerance) {\n      points.push(x123, y123);\n      return;\n    }\n  }\n  recursive(points, x1, y1, x12, y12, x123, y123, distanceTolerance, level + 1);\n  recursive(points, x123, y123, x23, y23, x3, y3, distanceTolerance, level + 1);\n}\n\nexport { buildAdaptiveQuadratic };\n//# sourceMappingURL=buildAdaptiveQuadratic.mjs.map\n","\"use strict\";\nfunction buildArc(points, x, y, radius, start, end, clockwise, steps) {\n  let dist = Math.abs(start - end);\n  if (!clockwise && start > end) {\n    dist = 2 * Math.PI - dist;\n  } else if (clockwise && end > start) {\n    dist = 2 * Math.PI - dist;\n  }\n  steps = steps || Math.max(6, Math.floor(6 * Math.pow(radius, 1 / 3) * (dist / Math.PI)));\n  steps = Math.max(steps, 3);\n  let f = dist / steps;\n  let t = start;\n  f *= clockwise ? -1 : 1;\n  for (let i = 0; i < steps + 1; i++) {\n    const cs = Math.cos(t);\n    const sn = Math.sin(t);\n    const nx = x + cs * radius;\n    const ny = y + sn * radius;\n    points.push(nx, ny);\n    t += f;\n  }\n}\n\nexport { buildArc };\n//# sourceMappingURL=buildArc.mjs.map\n","import { buildArc } from './buildArc.mjs';\n\n\"use strict\";\nfunction buildArcTo(points, x1, y1, x2, y2, radius) {\n  const fromX = points[points.length - 2];\n  const fromY = points[points.length - 1];\n  const a1 = fromY - y1;\n  const b1 = fromX - x1;\n  const a2 = y2 - y1;\n  const b2 = x2 - x1;\n  const mm = Math.abs(a1 * b2 - b1 * a2);\n  if (mm < 1e-8 || radius === 0) {\n    if (points[points.length - 2] !== x1 || points[points.length - 1] !== y1) {\n      points.push(x1, y1);\n    }\n    return;\n  }\n  const dd = a1 * a1 + b1 * b1;\n  const cc = a2 * a2 + b2 * b2;\n  const tt = a1 * a2 + b1 * b2;\n  const k1 = radius * Math.sqrt(dd) / mm;\n  const k2 = radius * Math.sqrt(cc) / mm;\n  const j1 = k1 * tt / dd;\n  const j2 = k2 * tt / cc;\n  const cx = k1 * b2 + k2 * b1;\n  const cy = k1 * a2 + k2 * a1;\n  const px = b1 * (k2 + j1);\n  const py = a1 * (k2 + j1);\n  const qx = b2 * (k1 + j2);\n  const qy = a2 * (k1 + j2);\n  const startAngle = Math.atan2(py - cy, px - cx);\n  const endAngle = Math.atan2(qy - cy, qx - cx);\n  buildArc(\n    points,\n    cx + x1,\n    cy + y1,\n    radius,\n    startAngle,\n    endAngle,\n    b1 * a2 > b2 * a1\n  );\n}\n\nexport { buildArcTo };\n//# sourceMappingURL=buildArcTo.mjs.map\n","import { buildAdaptiveBezier } from './buildAdaptiveBezier.mjs';\n\n\"use strict\";\nconst TAU = Math.PI * 2;\nconst out = {\n  centerX: 0,\n  centerY: 0,\n  ang1: 0,\n  ang2: 0\n};\nconst mapToEllipse = ({ x, y }, rx, ry, cosPhi, sinPhi, centerX, centerY, out2) => {\n  x *= rx;\n  y *= ry;\n  const xp = cosPhi * x - sinPhi * y;\n  const yp = sinPhi * x + cosPhi * y;\n  out2.x = xp + centerX;\n  out2.y = yp + centerY;\n  return out2;\n};\nfunction approxUnitArc(ang1, ang2) {\n  const a1 = ang2 === -1.5707963267948966 ? -0.551915024494 : 4 / 3 * Math.tan(ang2 / 4);\n  const a = ang2 === 1.5707963267948966 ? 0.551915024494 : a1;\n  const x1 = Math.cos(ang1);\n  const y1 = Math.sin(ang1);\n  const x2 = Math.cos(ang1 + ang2);\n  const y2 = Math.sin(ang1 + ang2);\n  return [\n    {\n      x: x1 - y1 * a,\n      y: y1 + x1 * a\n    },\n    {\n      x: x2 + y2 * a,\n      y: y2 - x2 * a\n    },\n    {\n      x: x2,\n      y: y2\n    }\n  ];\n}\nconst vectorAngle = (ux, uy, vx, vy) => {\n  const sign = ux * vy - uy * vx < 0 ? -1 : 1;\n  let dot = ux * vx + uy * vy;\n  if (dot > 1) {\n    dot = 1;\n  }\n  if (dot < -1) {\n    dot = -1;\n  }\n  return sign * Math.acos(dot);\n};\nconst getArcCenter = (px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinPhi, cosPhi, pxp, pyp, out2) => {\n  const rxSq = Math.pow(rx, 2);\n  const rySq = Math.pow(ry, 2);\n  const pxpSq = Math.pow(pxp, 2);\n  const pypSq = Math.pow(pyp, 2);\n  let radicant = rxSq * rySq - rxSq * pypSq - rySq * pxpSq;\n  if (radicant < 0) {\n    radicant = 0;\n  }\n  radicant /= rxSq * pypSq + rySq * pxpSq;\n  radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n  const centerXp = radicant * rx / ry * pyp;\n  const centerYp = radicant * -ry / rx * pxp;\n  const centerX = cosPhi * centerXp - sinPhi * centerYp + (px + cx) / 2;\n  const centerY = sinPhi * centerXp + cosPhi * centerYp + (py + cy) / 2;\n  const vx1 = (pxp - centerXp) / rx;\n  const vy1 = (pyp - centerYp) / ry;\n  const vx2 = (-pxp - centerXp) / rx;\n  const vy2 = (-pyp - centerYp) / ry;\n  const ang1 = vectorAngle(1, 0, vx1, vy1);\n  let ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n  if (sweepFlag === 0 && ang2 > 0) {\n    ang2 -= TAU;\n  }\n  if (sweepFlag === 1 && ang2 < 0) {\n    ang2 += TAU;\n  }\n  out2.centerX = centerX;\n  out2.centerY = centerY;\n  out2.ang1 = ang1;\n  out2.ang2 = ang2;\n};\nfunction buildArcToSvg(points, px, py, cx, cy, rx, ry, xAxisRotation = 0, largeArcFlag = 0, sweepFlag = 0) {\n  if (rx === 0 || ry === 0) {\n    return;\n  }\n  const sinPhi = Math.sin(xAxisRotation * TAU / 360);\n  const cosPhi = Math.cos(xAxisRotation * TAU / 360);\n  const pxp = cosPhi * (px - cx) / 2 + sinPhi * (py - cy) / 2;\n  const pyp = -sinPhi * (px - cx) / 2 + cosPhi * (py - cy) / 2;\n  if (pxp === 0 && pyp === 0) {\n    return;\n  }\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  const lambda = Math.pow(pxp, 2) / Math.pow(rx, 2) + Math.pow(pyp, 2) / Math.pow(ry, 2);\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n  getArcCenter(\n    px,\n    py,\n    cx,\n    cy,\n    rx,\n    ry,\n    largeArcFlag,\n    sweepFlag,\n    sinPhi,\n    cosPhi,\n    pxp,\n    pyp,\n    out\n  );\n  let { ang1, ang2 } = out;\n  const { centerX, centerY } = out;\n  let ratio = Math.abs(ang2) / (TAU / 4);\n  if (Math.abs(1 - ratio) < 1e-7) {\n    ratio = 1;\n  }\n  const segments = Math.max(Math.ceil(ratio), 1);\n  ang2 /= segments;\n  let lastX = points[points.length - 2];\n  let lastY = points[points.length - 1];\n  const outCurvePoint = { x: 0, y: 0 };\n  for (let i = 0; i < segments; i++) {\n    const curve = approxUnitArc(ang1, ang2);\n    const { x: x1, y: y1 } = mapToEllipse(curve[0], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    const { x: x2, y: y2 } = mapToEllipse(curve[1], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    const { x, y } = mapToEllipse(curve[2], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    buildAdaptiveBezier(\n      points,\n      lastX,\n      lastY,\n      x1,\n      y1,\n      x2,\n      y2,\n      x,\n      y\n    );\n    lastX = x;\n    lastY = y;\n    ang1 += ang2;\n  }\n}\n\nexport { buildArcToSvg };\n//# sourceMappingURL=buildArcToSvg.mjs.map\n","\"use strict\";\nfunction roundedShapeArc(g, points, radius) {\n  const vecFrom = (p, pp) => {\n    const x = pp.x - p.x;\n    const y = pp.y - p.y;\n    const len = Math.sqrt(x * x + y * y);\n    const nx = x / len;\n    const ny = y / len;\n    return { len, nx, ny };\n  };\n  const sharpCorner = (i, p) => {\n    if (i === 0) {\n      g.moveTo(p.x, p.y);\n    } else {\n      g.lineTo(p.x, p.y);\n    }\n  };\n  let p1 = points[points.length - 1];\n  for (let i = 0; i < points.length; i++) {\n    const p2 = points[i % points.length];\n    const pRadius = p2.radius ?? radius;\n    if (pRadius <= 0) {\n      sharpCorner(i, p2);\n      p1 = p2;\n      continue;\n    }\n    const p3 = points[(i + 1) % points.length];\n    const v1 = vecFrom(p2, p1);\n    const v2 = vecFrom(p2, p3);\n    if (v1.len < 1e-4 || v2.len < 1e-4) {\n      sharpCorner(i, p2);\n      p1 = p2;\n      continue;\n    }\n    let angle = Math.asin(v1.nx * v2.ny - v1.ny * v2.nx);\n    let radDirection = 1;\n    let drawDirection = false;\n    if (v1.nx * v2.nx - v1.ny * -v2.ny < 0) {\n      if (angle < 0) {\n        angle = Math.PI + angle;\n      } else {\n        angle = Math.PI - angle;\n        radDirection = -1;\n        drawDirection = true;\n      }\n    } else if (angle > 0) {\n      radDirection = -1;\n      drawDirection = true;\n    }\n    const halfAngle = angle / 2;\n    let cRadius;\n    let lenOut = Math.abs(\n      Math.cos(halfAngle) * pRadius / Math.sin(halfAngle)\n    );\n    if (lenOut > Math.min(v1.len / 2, v2.len / 2)) {\n      lenOut = Math.min(v1.len / 2, v2.len / 2);\n      cRadius = Math.abs(lenOut * Math.sin(halfAngle) / Math.cos(halfAngle));\n    } else {\n      cRadius = pRadius;\n    }\n    const cX = p2.x + v2.nx * lenOut + -v2.ny * cRadius * radDirection;\n    const cY = p2.y + v2.ny * lenOut + v2.nx * cRadius * radDirection;\n    const startAngle = Math.atan2(v1.ny, v1.nx) + Math.PI / 2 * radDirection;\n    const endAngle = Math.atan2(v2.ny, v2.nx) - Math.PI / 2 * radDirection;\n    if (i === 0) {\n      g.moveTo(\n        cX + Math.cos(startAngle) * cRadius,\n        cY + Math.sin(startAngle) * cRadius\n      );\n    }\n    g.arc(cX, cY, cRadius, startAngle, endAngle, drawDirection);\n    p1 = p2;\n  }\n}\nfunction roundedShapeQuadraticCurve(g, points, radius, smoothness) {\n  const distance = (p1, p2) => Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);\n  const pointLerp = (p1, p2, t) => ({\n    x: p1.x + (p2.x - p1.x) * t,\n    y: p1.y + (p2.y - p1.y) * t\n  });\n  const numPoints = points.length;\n  for (let i = 0; i < numPoints; i++) {\n    const thisPoint = points[(i + 1) % numPoints];\n    const pRadius = thisPoint.radius ?? radius;\n    if (pRadius <= 0) {\n      if (i === 0) {\n        g.moveTo(thisPoint.x, thisPoint.y);\n      } else {\n        g.lineTo(thisPoint.x, thisPoint.y);\n      }\n      continue;\n    }\n    const lastPoint = points[i];\n    const nextPoint = points[(i + 2) % numPoints];\n    const lastEdgeLength = distance(lastPoint, thisPoint);\n    let start;\n    if (lastEdgeLength < 1e-4) {\n      start = thisPoint;\n    } else {\n      const lastOffsetDistance = Math.min(lastEdgeLength / 2, pRadius);\n      start = pointLerp(\n        thisPoint,\n        lastPoint,\n        lastOffsetDistance / lastEdgeLength\n      );\n    }\n    const nextEdgeLength = distance(nextPoint, thisPoint);\n    let end;\n    if (nextEdgeLength < 1e-4) {\n      end = thisPoint;\n    } else {\n      const nextOffsetDistance = Math.min(nextEdgeLength / 2, pRadius);\n      end = pointLerp(\n        thisPoint,\n        nextPoint,\n        nextOffsetDistance / nextEdgeLength\n      );\n    }\n    if (i === 0) {\n      g.moveTo(start.x, start.y);\n    } else {\n      g.lineTo(start.x, start.y);\n    }\n    g.quadraticCurveTo(thisPoint.x, thisPoint.y, end.x, end.y, smoothness);\n  }\n}\n\nexport { roundedShapeArc, roundedShapeQuadraticCurve };\n//# sourceMappingURL=roundShape.mjs.map\n","import { Circle } from '../../../../maths/shapes/Circle.mjs';\nimport { Ellipse } from '../../../../maths/shapes/Ellipse.mjs';\nimport { Polygon } from '../../../../maths/shapes/Polygon.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { RoundedRectangle } from '../../../../maths/shapes/RoundedRectangle.mjs';\nimport { Bounds } from '../../../container/bounds/Bounds.mjs';\nimport { buildAdaptiveBezier } from '../buildCommands/buildAdaptiveBezier.mjs';\nimport { buildAdaptiveQuadratic } from '../buildCommands/buildAdaptiveQuadratic.mjs';\nimport { buildArc } from '../buildCommands/buildArc.mjs';\nimport { buildArcTo } from '../buildCommands/buildArcTo.mjs';\nimport { buildArcToSvg } from '../buildCommands/buildArcToSvg.mjs';\nimport { roundedShapeQuadraticCurve, roundedShapeArc } from './roundShape.mjs';\n\n\"use strict\";\nconst tempRectangle = new Rectangle();\nclass ShapePath {\n  constructor(graphicsPath2D) {\n    /** The list of shape primitives that make up the path. */\n    this.shapePrimitives = [];\n    this._currentPoly = null;\n    this._bounds = new Bounds();\n    this._graphicsPath2D = graphicsPath2D;\n  }\n  /**\n   * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n   * @param x - The x-coordinate for the starting point.\n   * @param y - The y-coordinate for the starting point.\n   * @returns The instance of the current object for chaining.\n   */\n  moveTo(x, y) {\n    this.startPoly(x, y);\n    return this;\n  }\n  /**\n   * Connects the current point to a new point with a straight line. This method updates the current path.\n   * @param x - The x-coordinate of the new point to connect to.\n   * @param y - The y-coordinate of the new point to connect to.\n   * @returns The instance of the current object for chaining.\n   */\n  lineTo(x, y) {\n    this._ensurePoly();\n    const points = this._currentPoly.points;\n    const fromX = points[points.length - 2];\n    const fromY = points[points.length - 1];\n    if (fromX !== x || fromY !== y) {\n      points.push(x, y);\n    }\n    return this;\n  }\n  /**\n   * Adds an arc to the path. The arc is centered at (x, y)\n   *  position with radius `radius` starting at `startAngle` and ending at `endAngle`.\n   * @param x - The x-coordinate of the arc's center.\n   * @param y - The y-coordinate of the arc's center.\n   * @param radius - The radius of the arc.\n   * @param startAngle - The starting angle of the arc, in radians.\n   * @param endAngle - The ending angle of the arc, in radians.\n   * @param counterclockwise - Specifies whether the arc should be drawn in the anticlockwise direction. False by default.\n   * @returns The instance of the current object for chaining.\n   */\n  arc(x, y, radius, startAngle, endAngle, counterclockwise) {\n    this._ensurePoly(false);\n    const points = this._currentPoly.points;\n    buildArc(points, x, y, radius, startAngle, endAngle, counterclockwise);\n    return this;\n  }\n  /**\n   * Adds an arc to the path with the arc tangent to the line joining two specified points.\n   * The arc radius is specified by `radius`.\n   * @param x1 - The x-coordinate of the first point.\n   * @param y1 - The y-coordinate of the first point.\n   * @param x2 - The x-coordinate of the second point.\n   * @param y2 - The y-coordinate of the second point.\n   * @param radius - The radius of the arc.\n   * @returns The instance of the current object for chaining.\n   */\n  arcTo(x1, y1, x2, y2, radius) {\n    this._ensurePoly();\n    const points = this._currentPoly.points;\n    buildArcTo(points, x1, y1, x2, y2, radius);\n    return this;\n  }\n  /**\n   * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n   * @param rx - The x-radius of the ellipse.\n   * @param ry - The y-radius of the ellipse.\n   * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n   * to the x-axis of the coordinate system, in degrees.\n   * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n   * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n   * @param x - The x-coordinate of the arc's end point.\n   * @param y - The y-coordinate of the arc's end point.\n   * @returns The instance of the current object for chaining.\n   */\n  arcToSvg(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\n    const points = this._currentPoly.points;\n    buildArcToSvg(\n      points,\n      this._currentPoly.lastX,\n      this._currentPoly.lastY,\n      x,\n      y,\n      rx,\n      ry,\n      xAxisRotation,\n      largeArcFlag,\n      sweepFlag\n    );\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires three points: the first two are control points and the third one is the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the first control point.\n   * @param cp1y - The y-coordinate of the first control point.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y, smoothness) {\n    this._ensurePoly();\n    const currentPoly = this._currentPoly;\n    buildAdaptiveBezier(\n      this._currentPoly.points,\n      currentPoly.lastX,\n      currentPoly.lastY,\n      cp1x,\n      cp1y,\n      cp2x,\n      cp2y,\n      x,\n      y,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the control point.\n   * @param cp1y - The y-coordinate of the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothing - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveTo(cp1x, cp1y, x, y, smoothing) {\n    this._ensurePoly();\n    const currentPoly = this._currentPoly;\n    buildAdaptiveQuadratic(\n      this._currentPoly.points,\n      currentPoly.lastX,\n      currentPoly.lastY,\n      cp1x,\n      cp1y,\n      x,\n      y,\n      smoothing\n    );\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this.endPoly(true);\n    return this;\n  }\n  /**\n   * Adds another path to the current path. This method allows for the combination of multiple paths into one.\n   * @param path - The `GraphicsPath` object representing the path to add.\n   * @param transform - An optional `Matrix` object to apply a transformation to the path before adding it.\n   * @returns The instance of the current object for chaining.\n   */\n  addPath(path, transform) {\n    this.endPoly();\n    if (transform && !transform.isIdentity()) {\n      path = path.clone(true);\n      path.transform(transform);\n    }\n    for (let i = 0; i < path.instructions.length; i++) {\n      const instruction = path.instructions[i];\n      this[instruction.action](...instruction.data);\n    }\n    return this;\n  }\n  /**\n   * Finalizes the drawing of the current path. Optionally, it can close the path.\n   * @param closePath - A boolean indicating whether to close the path after finishing. False by default.\n   */\n  finish(closePath = false) {\n    this.endPoly(closePath);\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h, transform) {\n    this.drawShape(new Rectangle(x, y, w, h), transform);\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius, transform) {\n    this.drawShape(new Circle(x, y, radius), transform);\n    return this;\n  }\n  /**\n   * Draws a polygon shape. This method allows for the creation of complex polygons by specifying a sequence of points.\n   * @param points - An array of numbers, or or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n   * representing the x and y coordinates of the polygon's vertices, in sequence.\n   * @param close - A boolean indicating whether to close the polygon path. True by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  poly(points, close, transform) {\n    const polygon = new Polygon(points);\n    polygon.closePath = close;\n    this.drawShape(polygon, transform);\n    return this;\n  }\n  /**\n   * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  regularPoly(x, y, radius, sides, rotation = 0, transform) {\n    sides = Math.max(sides | 0, 3);\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const delta = Math.PI * 2 / sides;\n    const polygon = [];\n    for (let i = 0; i < sides; i++) {\n      const angle = i * delta + startAngle;\n      polygon.push(\n        x + radius * Math.cos(angle),\n        y + radius * Math.sin(angle)\n      );\n    }\n    this.poly(polygon, true, transform);\n    return this;\n  }\n  /**\n   * Draws a polygon with rounded corners.\n   * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param corner - The radius of the rounding of the corners.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param smoothness - Optional parameter to adjust the smoothness of the rounding.\n   * @returns The instance of the current object for chaining.\n   */\n  roundPoly(x, y, radius, sides, corner, rotation = 0, smoothness) {\n    sides = Math.max(sides | 0, 3);\n    if (corner <= 0) {\n      return this.regularPoly(x, y, radius, sides, rotation);\n    }\n    const sideLength = radius * Math.sin(Math.PI / sides) - 1e-3;\n    corner = Math.min(corner, sideLength);\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const delta = Math.PI * 2 / sides;\n    const internalAngle = (sides - 2) * Math.PI / sides / 2;\n    for (let i = 0; i < sides; i++) {\n      const angle = i * delta + startAngle;\n      const x0 = x + radius * Math.cos(angle);\n      const y0 = y + radius * Math.sin(angle);\n      const a1 = angle + Math.PI + internalAngle;\n      const a2 = angle - Math.PI - internalAngle;\n      const x1 = x0 + corner * Math.cos(a1);\n      const y1 = y0 + corner * Math.sin(a1);\n      const x3 = x0 + corner * Math.cos(a2);\n      const y3 = y0 + corner * Math.sin(a2);\n      if (i === 0) {\n        this.moveTo(x1, y1);\n      } else {\n        this.lineTo(x1, y1);\n      }\n      this.quadraticCurveTo(x0, y0, x3, y3, smoothness);\n    }\n    return this.closePath();\n  }\n  /**\n   * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n   * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n   * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n   * A minimum of 3 points is required.\n   * @param radius - The default radius for the corners.\n   * This radius is applied to all corners unless overridden in `points`.\n   * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n   *  method instead of an arc method. Defaults to false.\n   * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n   * Higher values make the curve smoother.\n   * @returns The instance of the current object for chaining.\n   */\n  roundShape(points, radius, useQuadratic = false, smoothness) {\n    if (points.length < 3) {\n      return this;\n    }\n    if (useQuadratic) {\n      roundedShapeQuadraticCurve(this, points, radius, smoothness);\n    } else {\n      roundedShapeArc(this, points, radius);\n    }\n    return this.closePath();\n  }\n  /**\n   * Draw Rectangle with fillet corners. This is much like rounded rectangle\n   * however it support negative numbers as well for the corner radius.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param fillet - accept negative or positive values\n   */\n  filletRect(x, y, width, height, fillet) {\n    if (fillet === 0) {\n      return this.rect(x, y, width, height);\n    }\n    const maxFillet = Math.min(width, height) / 2;\n    const inset = Math.min(maxFillet, Math.max(-maxFillet, fillet));\n    const right = x + width;\n    const bottom = y + height;\n    const dir = inset < 0 ? -inset : 0;\n    const size = Math.abs(inset);\n    return this.moveTo(x, y + size).arcTo(x + dir, y + dir, x + size, y, size).lineTo(right - size, y).arcTo(right - dir, y + dir, right, y + size, size).lineTo(right, bottom - size).arcTo(right - dir, bottom - dir, x + width - size, bottom, size).lineTo(x + size, bottom).arcTo(x + dir, bottom - dir, x, bottom - size, size).closePath();\n  }\n  /**\n   * Draw Rectangle with chamfer corners. These are angled corners.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param chamfer - non-zero real number, size of corner cutout\n   * @param transform\n   */\n  chamferRect(x, y, width, height, chamfer, transform) {\n    if (chamfer <= 0) {\n      return this.rect(x, y, width, height);\n    }\n    const inset = Math.min(chamfer, Math.min(width, height) / 2);\n    const right = x + width;\n    const bottom = y + height;\n    const points = [\n      x + inset,\n      y,\n      right - inset,\n      y,\n      right,\n      y + inset,\n      right,\n      bottom - inset,\n      right - inset,\n      bottom,\n      x + inset,\n      bottom,\n      x,\n      bottom - inset,\n      x,\n      y + inset\n    ];\n    for (let i = points.length - 1; i >= 2; i -= 2) {\n      if (points[i] === points[i - 2] && points[i - 1] === points[i - 3]) {\n        points.splice(i - 1, 2);\n      }\n    }\n    return this.poly(points, true, transform);\n  }\n  /**\n   * Draws an ellipse at the specified location and with the given x and y radii.\n   * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n   * @param x - The x-coordinate of the center of the ellipse.\n   * @param y - The y-coordinate of the center of the ellipse.\n   * @param radiusX - The horizontal radius of the ellipse.\n   * @param radiusY - The vertical radius of the ellipse.\n   * @param transform - An optional `Matrix` object to apply a transformation to the ellipse. This can include rotations.\n   * @returns The instance of the current object for chaining.\n   */\n  ellipse(x, y, radiusX, radiusY, transform) {\n    this.drawShape(new Ellipse(x, y, radiusX, radiusY), transform);\n    return this;\n  }\n  /**\n   * Draws a rectangle with rounded corners.\n   * The corner radius can be specified to determine how rounded the corners should be.\n   * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  roundRect(x, y, w, h, radius, transform) {\n    this.drawShape(new RoundedRectangle(x, y, w, h, radius), transform);\n    return this;\n  }\n  /**\n   * Draws a given shape on the canvas.\n   * This is a generic method that can draw any type of shape specified by the `ShapePrimitive` parameter.\n   * An optional transformation matrix can be applied to the shape, allowing for complex transformations.\n   * @param shape - The shape to draw, defined as a `ShapePrimitive` object.\n   * @param matrix - An optional `Matrix` for transforming the shape. This can include rotations,\n   * scaling, and translations.\n   * @returns The instance of the current object for chaining.\n   */\n  drawShape(shape, matrix) {\n    this.endPoly();\n    this.shapePrimitives.push({ shape, transform: matrix });\n    return this;\n  }\n  /**\n   * Starts a new polygon path from the specified starting point.\n   * This method initializes a new polygon or ends the current one if it exists.\n   * @param x - The x-coordinate of the starting point of the new polygon.\n   * @param y - The y-coordinate of the starting point of the new polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  startPoly(x, y) {\n    let currentPoly = this._currentPoly;\n    if (currentPoly) {\n      this.endPoly();\n    }\n    currentPoly = new Polygon();\n    currentPoly.points.push(x, y);\n    this._currentPoly = currentPoly;\n    return this;\n  }\n  /**\n   * Ends the current polygon path. If `closePath` is set to true,\n   * the path is closed by connecting the last point to the first one.\n   * This method finalizes the current polygon and prepares it for drawing or adding to the shape primitives.\n   * @param closePath - A boolean indicating whether to close the polygon by connecting the last point\n   *  back to the starting point. False by default.\n   * @returns The instance of the current object for chaining.\n   */\n  endPoly(closePath = false) {\n    const shape = this._currentPoly;\n    if (shape && shape.points.length > 2) {\n      shape.closePath = closePath;\n      this.shapePrimitives.push({ shape });\n    }\n    this._currentPoly = null;\n    return this;\n  }\n  _ensurePoly(start = true) {\n    if (this._currentPoly)\n      return;\n    this._currentPoly = new Polygon();\n    if (start) {\n      const lastShape = this.shapePrimitives[this.shapePrimitives.length - 1];\n      if (lastShape) {\n        let lx = lastShape.shape.x;\n        let ly = lastShape.shape.y;\n        if (!lastShape.transform.isIdentity()) {\n          const t = lastShape.transform;\n          const tempX = lx;\n          lx = t.a * lx + t.c * ly + t.tx;\n          ly = t.b * tempX + t.d * ly + t.ty;\n        }\n        this._currentPoly.points.push(lx, ly);\n      } else {\n        this._currentPoly.points.push(0, 0);\n      }\n    }\n  }\n  /** Builds the path. */\n  buildPath() {\n    const path = this._graphicsPath2D;\n    this.shapePrimitives.length = 0;\n    this._currentPoly = null;\n    for (let i = 0; i < path.instructions.length; i++) {\n      const instruction = path.instructions[i];\n      this[instruction.action](...instruction.data);\n    }\n    this.finish();\n  }\n  /** Gets the bounds of the path. */\n  get bounds() {\n    const bounds = this._bounds;\n    bounds.clear();\n    const shapePrimitives = this.shapePrimitives;\n    for (let i = 0; i < shapePrimitives.length; i++) {\n      const shapePrimitive = shapePrimitives[i];\n      const boundsRect = shapePrimitive.shape.getBounds(tempRectangle);\n      if (shapePrimitive.transform) {\n        bounds.addRect(boundsRect, shapePrimitive.transform);\n      } else {\n        bounds.addRect(boundsRect);\n      }\n    }\n    return bounds;\n  }\n}\n\nexport { ShapePath };\n//# sourceMappingURL=ShapePath.mjs.map\n","import { Point } from '../../../../maths/point/Point.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { SVGToGraphicsPath } from '../svg/SVGToGraphicsPath.mjs';\nimport { ShapePath } from './ShapePath.mjs';\n\n\"use strict\";\nclass GraphicsPath {\n  /**\n   * Creates a `GraphicsPath` instance optionally from an SVG path string or an array of `PathInstruction`.\n   * @param instructions - An SVG path string or an array of `PathInstruction` objects.\n   */\n  constructor(instructions) {\n    this.instructions = [];\n    this.uid = uid(\"graphicsPath\");\n    this._dirty = true;\n    if (typeof instructions === \"string\") {\n      SVGToGraphicsPath(instructions, this);\n    } else {\n      this.instructions = instructions?.slice() ?? [];\n    }\n  }\n  /**\n   * Provides access to the internal shape path, ensuring it is up-to-date with the current instructions.\n   * @returns The `ShapePath` instance associated with this `GraphicsPath`.\n   */\n  get shapePath() {\n    if (!this._shapePath) {\n      this._shapePath = new ShapePath(this);\n    }\n    if (this._dirty) {\n      this._dirty = false;\n      this._shapePath.buildPath();\n    }\n    return this._shapePath;\n  }\n  /**\n   * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n   * @param path - The `GraphicsPath` to add.\n   * @param transform - An optional transformation to apply to the added path.\n   * @returns The instance of the current object for chaining.\n   */\n  addPath(path, transform) {\n    path = path.clone();\n    this.instructions.push({ action: \"addPath\", data: [path, transform] });\n    this._dirty = true;\n    return this;\n  }\n  arc(...args) {\n    this.instructions.push({ action: \"arc\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  arcTo(...args) {\n    this.instructions.push({ action: \"arcTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  arcToSvg(...args) {\n    this.instructions.push({ action: \"arcToSvg\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  bezierCurveTo(...args) {\n    this.instructions.push({ action: \"bezierCurveTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires two points: the second control point and the end point. The first control point is assumed to be\n   * The starting point is the last point in the current path.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveToShort(cp2x, cp2y, x, y, smoothness) {\n    const last = this.instructions[this.instructions.length - 1];\n    const lastPoint = this.getLastPoint(Point.shared);\n    let cp1x = 0;\n    let cp1y = 0;\n    if (!last || last.action !== \"bezierCurveTo\") {\n      cp1x = lastPoint.x;\n      cp1y = lastPoint.y;\n    } else {\n      cp1x = last.data[2];\n      cp1y = last.data[3];\n      const currentX = lastPoint.x;\n      const currentY = lastPoint.y;\n      cp1x = currentX + (currentX - cp1x);\n      cp1y = currentY + (currentY - cp1y);\n    }\n    this.instructions.push({ action: \"bezierCurveTo\", data: [cp1x, cp1y, cp2x, cp2y, x, y, smoothness] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this.instructions.push({ action: \"closePath\", data: [] });\n    this._dirty = true;\n    return this;\n  }\n  ellipse(...args) {\n    this.instructions.push({ action: \"ellipse\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  lineTo(...args) {\n    this.instructions.push({ action: \"lineTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  moveTo(...args) {\n    this.instructions.push({ action: \"moveTo\", data: args });\n    return this;\n  }\n  quadraticCurveTo(...args) {\n    this.instructions.push({ action: \"quadraticCurveTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It uses the previous point as the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveToShort(x, y, smoothness) {\n    const last = this.instructions[this.instructions.length - 1];\n    const lastPoint = this.getLastPoint(Point.shared);\n    let cpx1 = 0;\n    let cpy1 = 0;\n    if (!last || last.action !== \"quadraticCurveTo\") {\n      cpx1 = lastPoint.x;\n      cpy1 = lastPoint.y;\n    } else {\n      cpx1 = last.data[0];\n      cpy1 = last.data[1];\n      const currentX = lastPoint.x;\n      const currentY = lastPoint.y;\n      cpx1 = currentX + (currentX - cpx1);\n      cpy1 = currentY + (currentY - cpy1);\n    }\n    this.instructions.push({ action: \"quadraticCurveTo\", data: [cpx1, cpy1, x, y, smoothness] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h, transform) {\n    this.instructions.push({ action: \"rect\", data: [x, y, w, h, transform] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius, transform) {\n    this.instructions.push({ action: \"circle\", data: [x, y, radius, transform] });\n    this._dirty = true;\n    return this;\n  }\n  roundRect(...args) {\n    this.instructions.push({ action: \"roundRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  poly(...args) {\n    this.instructions.push({ action: \"poly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  regularPoly(...args) {\n    this.instructions.push({ action: \"regularPoly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  roundPoly(...args) {\n    this.instructions.push({ action: \"roundPoly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  roundShape(...args) {\n    this.instructions.push({ action: \"roundShape\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  filletRect(...args) {\n    this.instructions.push({ action: \"filletRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  chamferRect(...args) {\n    this.instructions.push({ action: \"chamferRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a star shape centered at a specified location. This method allows for the creation\n   *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n   * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n   * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n   * @param x - The x-coordinate of the center of the star.\n   * @param y - The y-coordinate of the center of the star.\n   * @param points - The number of points of the star.\n   * @param radius - The outer radius of the star (distance from the center to the outer points).\n   * @param innerRadius - Optional. The inner radius of the star\n   * (distance from the center to the inner points between the outer points).\n   * If not provided, defaults to half of the `radius`.\n   * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n   * Defaults to 0, meaning one point is directly upward.\n   * @param transform - An optional `Matrix` object to apply a transformation to the star.\n   * This can include rotations, scaling, and translations.\n   * @returns The instance of the current object for chaining further drawing commands.\n   */\n  // eslint-disable-next-line max-len\n  star(x, y, points, radius, innerRadius, rotation, transform) {\n    innerRadius = innerRadius || radius / 2;\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const len = points * 2;\n    const delta = Math.PI * 2 / len;\n    const polygon = [];\n    for (let i = 0; i < len; i++) {\n      const r = i % 2 ? innerRadius : radius;\n      const angle = i * delta + startAngle;\n      polygon.push(\n        x + r * Math.cos(angle),\n        y + r * Math.sin(angle)\n      );\n    }\n    this.poly(polygon, true, transform);\n    return this;\n  }\n  /**\n   * Creates a copy of the current `GraphicsPath` instance. This method supports both shallow and deep cloning.\n   * A shallow clone copies the reference of the instructions array, while a deep clone creates a new array and\n   * copies each instruction individually, ensuring that modifications to the instructions of the cloned `GraphicsPath`\n   * do not affect the original `GraphicsPath` and vice versa.\n   * @param deep - A boolean flag indicating whether the clone should be deep.\n   * @returns A new `GraphicsPath` instance that is a clone of the current instance.\n   */\n  clone(deep = false) {\n    const newGraphicsPath2D = new GraphicsPath();\n    if (!deep) {\n      newGraphicsPath2D.instructions = this.instructions.slice();\n    } else {\n      for (let i = 0; i < this.instructions.length; i++) {\n        const instruction = this.instructions[i];\n        newGraphicsPath2D.instructions.push({ action: instruction.action, data: instruction.data.slice() });\n      }\n    }\n    return newGraphicsPath2D;\n  }\n  clear() {\n    this.instructions.length = 0;\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Applies a transformation matrix to all drawing instructions within the `GraphicsPath`.\n   * This method enables the modification of the path's geometry according to the provided\n   * transformation matrix, which can include translations, rotations, scaling, and skewing.\n   *\n   * Each drawing instruction in the path is updated to reflect the transformation,\n   * ensuring the visual representation of the path is consistent with the applied matrix.\n   *\n   * Note: The transformation is applied directly to the coordinates and control points of the drawing instructions,\n   * not to the path as a whole. This means the transformation's effects are baked into the individual instructions,\n   * allowing for fine-grained control over the path's appearance.\n   * @param matrix - A `Matrix` object representing the transformation to apply.\n   * @returns The instance of the current object for chaining further operations.\n   */\n  transform(matrix) {\n    if (matrix.isIdentity())\n      return this;\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    let x = 0;\n    let y = 0;\n    let cpx1 = 0;\n    let cpy1 = 0;\n    let cpx2 = 0;\n    let cpy2 = 0;\n    let rx = 0;\n    let ry = 0;\n    for (let i = 0; i < this.instructions.length; i++) {\n      const instruction = this.instructions[i];\n      const data = instruction.data;\n      switch (instruction.action) {\n        case \"moveTo\":\n        case \"lineTo\":\n          x = data[0];\n          y = data[1];\n          data[0] = a * x + c * y + tx;\n          data[1] = b * x + d * y + ty;\n          break;\n        case \"bezierCurveTo\":\n          cpx1 = data[0];\n          cpy1 = data[1];\n          cpx2 = data[2];\n          cpy2 = data[3];\n          x = data[4];\n          y = data[5];\n          data[0] = a * cpx1 + c * cpy1 + tx;\n          data[1] = b * cpx1 + d * cpy1 + ty;\n          data[2] = a * cpx2 + c * cpy2 + tx;\n          data[3] = b * cpx2 + d * cpy2 + ty;\n          data[4] = a * x + c * y + tx;\n          data[5] = b * x + d * y + ty;\n          break;\n        case \"quadraticCurveTo\":\n          cpx1 = data[0];\n          cpy1 = data[1];\n          x = data[2];\n          y = data[3];\n          data[0] = a * cpx1 + c * cpy1 + tx;\n          data[1] = b * cpx1 + d * cpy1 + ty;\n          data[2] = a * x + c * y + tx;\n          data[3] = b * x + d * y + ty;\n          break;\n        case \"arcToSvg\":\n          x = data[5];\n          y = data[6];\n          rx = data[0];\n          ry = data[1];\n          data[0] = a * rx + c * ry;\n          data[1] = b * rx + d * ry;\n          data[5] = a * x + c * y + tx;\n          data[6] = b * x + d * y + ty;\n          break;\n        case \"circle\":\n          data[4] = adjustTransform(data[3], matrix);\n          break;\n        case \"rect\":\n          data[4] = adjustTransform(data[4], matrix);\n          break;\n        case \"ellipse\":\n          data[8] = adjustTransform(data[8], matrix);\n          break;\n        case \"roundRect\":\n          data[5] = adjustTransform(data[5], matrix);\n          break;\n        case \"addPath\":\n          data[0].transform(matrix);\n          break;\n        case \"poly\":\n          data[2] = adjustTransform(data[2], matrix);\n          break;\n        default:\n          warn(\"unknown transform action\", instruction.action);\n          break;\n      }\n    }\n    this._dirty = true;\n    return this;\n  }\n  get bounds() {\n    return this.shapePath.bounds;\n  }\n  /**\n   * Retrieves the last point from the current drawing instructions in the `GraphicsPath`.\n   * This method is useful for operations that depend on the path's current endpoint,\n   * such as connecting subsequent shapes or paths. It supports various drawing instructions,\n   * ensuring the last point's position is accurately determined regardless of the path's complexity.\n   *\n   * If the last instruction is a `closePath`, the method iterates backward through the instructions\n   *  until it finds an actionable instruction that defines a point (e.g., `moveTo`, `lineTo`,\n   * `quadraticCurveTo`, etc.). For compound paths added via `addPath`, it recursively retrieves\n   * the last point from the nested path.\n   * @param out - A `Point` object where the last point's coordinates will be stored.\n   * This object is modified directly to contain the result.\n   * @returns The `Point` object containing the last point's coordinates.\n   */\n  getLastPoint(out) {\n    let index = this.instructions.length - 1;\n    let lastInstruction = this.instructions[index];\n    if (!lastInstruction) {\n      out.x = 0;\n      out.y = 0;\n      return out;\n    }\n    while (lastInstruction.action === \"closePath\") {\n      index--;\n      if (index < 0) {\n        out.x = 0;\n        out.y = 0;\n        return out;\n      }\n      lastInstruction = this.instructions[index];\n    }\n    switch (lastInstruction.action) {\n      case \"moveTo\":\n      case \"lineTo\":\n        out.x = lastInstruction.data[0];\n        out.y = lastInstruction.data[1];\n        break;\n      case \"quadraticCurveTo\":\n        out.x = lastInstruction.data[2];\n        out.y = lastInstruction.data[3];\n        break;\n      case \"bezierCurveTo\":\n        out.x = lastInstruction.data[4];\n        out.y = lastInstruction.data[5];\n        break;\n      case \"arc\":\n      case \"arcToSvg\":\n        out.x = lastInstruction.data[5];\n        out.y = lastInstruction.data[6];\n        break;\n      case \"addPath\":\n        lastInstruction.data[0].getLastPoint(out);\n        break;\n    }\n    return out;\n  }\n}\nfunction adjustTransform(currentMatrix, transform) {\n  if (currentMatrix) {\n    return currentMatrix.prepend(transform);\n  }\n  return transform.clone();\n}\n\nexport { GraphicsPath };\n//# sourceMappingURL=GraphicsPath.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { GraphicsPath } from '../path/GraphicsPath.mjs';\n\n\"use strict\";\nfunction SVGParser(svg, graphicsContext) {\n  if (typeof svg === \"string\") {\n    const div = document.createElement(\"div\");\n    div.innerHTML = svg.trim();\n    svg = div.querySelector(\"svg\");\n  }\n  const session = {\n    context: graphicsContext,\n    path: new GraphicsPath()\n  };\n  renderChildren(svg, session, null, null);\n  return graphicsContext;\n}\nfunction renderChildren(svg, session, fillStyle, strokeStyle) {\n  const children = svg.children;\n  const { fillStyle: f1, strokeStyle: s1 } = parseStyle(svg);\n  if (f1 && fillStyle) {\n    fillStyle = { ...fillStyle, ...f1 };\n  } else if (f1) {\n    fillStyle = f1;\n  }\n  if (s1 && strokeStyle) {\n    strokeStyle = { ...strokeStyle, ...s1 };\n  } else if (s1) {\n    strokeStyle = s1;\n  }\n  session.context.fillStyle = fillStyle;\n  session.context.strokeStyle = strokeStyle;\n  let x;\n  let y;\n  let x1;\n  let y1;\n  let x2;\n  let y2;\n  let cx;\n  let cy;\n  let r;\n  let rx;\n  let ry;\n  let points;\n  let pointsString;\n  let d;\n  let graphicsPath;\n  let width;\n  let height;\n  switch (svg.nodeName.toLowerCase()) {\n    case \"path\":\n      d = svg.getAttribute(\"d\");\n      graphicsPath = new GraphicsPath(d);\n      session.context.path(graphicsPath);\n      if (fillStyle)\n        session.context.fill();\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"circle\":\n      cx = parseFloatAttribute(svg, \"cx\", 0);\n      cy = parseFloatAttribute(svg, \"cy\", 0);\n      r = parseFloatAttribute(svg, \"r\", 0);\n      session.context.ellipse(cx, cy, r, r);\n      if (fillStyle)\n        session.context.fill();\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"rect\":\n      x = parseFloatAttribute(svg, \"x\", 0);\n      y = parseFloatAttribute(svg, \"y\", 0);\n      width = parseFloatAttribute(svg, \"width\", 0);\n      height = parseFloatAttribute(svg, \"height\", 0);\n      rx = parseFloatAttribute(svg, \"rx\", 0);\n      ry = parseFloatAttribute(svg, \"ry\", 0);\n      if (rx || ry) {\n        session.context.roundRect(x, y, width, height, rx || ry);\n      } else {\n        session.context.rect(x, y, width, height);\n      }\n      if (fillStyle)\n        session.context.fill();\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"ellipse\":\n      cx = parseFloatAttribute(svg, \"cx\", 0);\n      cy = parseFloatAttribute(svg, \"cy\", 0);\n      rx = parseFloatAttribute(svg, \"rx\", 0);\n      ry = parseFloatAttribute(svg, \"ry\", 0);\n      session.context.beginPath();\n      session.context.ellipse(cx, cy, rx, ry);\n      if (fillStyle)\n        session.context.fill();\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"line\":\n      x1 = parseFloatAttribute(svg, \"x1\", 0);\n      y1 = parseFloatAttribute(svg, \"y1\", 0);\n      x2 = parseFloatAttribute(svg, \"x2\", 0);\n      y2 = parseFloatAttribute(svg, \"y2\", 0);\n      session.context.beginPath();\n      session.context.moveTo(x1, y1);\n      session.context.lineTo(x2, y2);\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"polygon\":\n      pointsString = svg.getAttribute(\"points\");\n      points = pointsString.match(/\\d+/g).map((n) => parseInt(n, 10));\n      session.context.poly(points, true);\n      if (fillStyle)\n        session.context.fill();\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"polyline\":\n      pointsString = svg.getAttribute(\"points\");\n      points = pointsString.match(/\\d+/g).map((n) => parseInt(n, 10));\n      session.context.poly(points, false);\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"g\":\n    case \"svg\":\n      break;\n    default: {\n      console.info(`[SVG parser] <${svg.nodeName}> elements unsupported`);\n      break;\n    }\n  }\n  for (let i = 0; i < children.length; i++) {\n    renderChildren(children[i], session, fillStyle, strokeStyle);\n  }\n}\nfunction parseFloatAttribute(svg, id, defaultValue) {\n  const value = svg.getAttribute(id);\n  return value ? Number(value) : defaultValue;\n}\nfunction parseStyle(svg) {\n  const style = svg.getAttribute(\"style\");\n  const strokeStyle = {};\n  const fillStyle = {};\n  let useFill = false;\n  let useStroke = false;\n  if (style) {\n    const styleParts = style.split(\";\");\n    for (let i = 0; i < styleParts.length; i++) {\n      const stylePart = styleParts[i];\n      const [key, value] = stylePart.split(\":\");\n      switch (key) {\n        case \"stroke\":\n          if (value !== \"none\") {\n            strokeStyle.color = Color.shared.setValue(value).toNumber();\n            useStroke = true;\n          }\n          break;\n        case \"stroke-width\":\n          strokeStyle.width = Number(value);\n          break;\n        case \"fill\":\n          if (value !== \"none\") {\n            useFill = true;\n            fillStyle.color = Color.shared.setValue(value).toNumber();\n          }\n          break;\n        case \"fill-opacity\":\n          fillStyle.alpha = Number(value);\n          break;\n        case \"stroke-opacity\":\n          strokeStyle.alpha = Number(value);\n          break;\n        case \"opacity\":\n          fillStyle.alpha = Number(value);\n          strokeStyle.alpha = Number(value);\n          break;\n      }\n    }\n  } else {\n    const stroke = svg.getAttribute(\"stroke\");\n    if (stroke && stroke !== \"none\") {\n      useStroke = true;\n      strokeStyle.color = Color.shared.setValue(stroke).toNumber();\n      strokeStyle.width = parseFloatAttribute(svg, \"stroke-width\", 1);\n    }\n    const fill = svg.getAttribute(\"fill\");\n    if (fill && fill !== \"none\") {\n      useFill = true;\n      fillStyle.color = Color.shared.setValue(fill).toNumber();\n    }\n  }\n  return {\n    strokeStyle: useStroke ? strokeStyle : null,\n    fillStyle: useFill ? fillStyle : null\n  };\n}\n\nexport { SVGParser };\n//# sourceMappingURL=SVGParser.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nconst _FillGradient = class _FillGradient {\n  constructor(x0, y0, x1, y1) {\n    this.uid = uid(\"fillGradient\");\n    this.type = \"linear\";\n    this.gradientStops = [];\n    this.x0 = x0;\n    this.y0 = y0;\n    this.x1 = x1;\n    this.y1 = y1;\n  }\n  addColorStop(offset, color) {\n    this.gradientStops.push({ offset, color: Color.shared.setValue(color).toHex() });\n    return this;\n  }\n  // TODO move to the system!\n  buildLinearGradient() {\n    const defaultSize = _FillGradient.defaultTextureSize;\n    const { gradientStops } = this;\n    const canvas = DOMAdapter.get().createCanvas();\n    canvas.width = defaultSize;\n    canvas.height = defaultSize;\n    const ctx = canvas.getContext(\"2d\");\n    const gradient = ctx.createLinearGradient(0, 0, _FillGradient.defaultTextureSize, 1);\n    for (let i = 0; i < gradientStops.length; i++) {\n      const stop = gradientStops[i];\n      gradient.addColorStop(stop.offset, stop.color);\n    }\n    ctx.fillStyle = gradient;\n    ctx.fillRect(0, 0, defaultSize, defaultSize);\n    this.texture = new Texture({\n      source: new ImageSource({\n        resource: canvas,\n        addressModeU: \"clamp-to-edge\",\n        addressModeV: \"repeat\"\n      })\n    });\n    const { x0, y0, x1, y1 } = this;\n    const m = new Matrix();\n    const dx = x1 - x0;\n    const dy = y1 - y0;\n    const dist = Math.sqrt(dx * dx + dy * dy);\n    const angle = Math.atan2(dy, dx);\n    m.translate(-x0, -y0);\n    m.scale(1 / defaultSize, 1 / defaultSize);\n    m.rotate(-angle);\n    m.scale(256 / dist, 1);\n    this.transform = m;\n  }\n};\n_FillGradient.defaultTextureSize = 256;\nlet FillGradient = _FillGradient;\n\nexport { FillGradient };\n//# sourceMappingURL=FillGradient.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nconst repetitionMap = {\n  repeat: {\n    addressModeU: \"repeat\",\n    addressModeV: \"repeat\"\n  },\n  \"repeat-x\": {\n    addressModeU: \"repeat\",\n    addressModeV: \"clamp-to-edge\"\n  },\n  \"repeat-y\": {\n    addressModeU: \"clamp-to-edge\",\n    addressModeV: \"repeat\"\n  },\n  \"no-repeat\": {\n    addressModeU: \"clamp-to-edge\",\n    addressModeV: \"clamp-to-edge\"\n  }\n};\nclass FillPattern {\n  constructor(texture, repetition) {\n    this.uid = uid(\"fillPattern\");\n    this.transform = new Matrix();\n    this.texture = texture;\n    this.transform.scale(\n      1 / texture.frame.width,\n      1 / texture.frame.height\n    );\n    if (repetition) {\n      texture.source.style.addressModeU = repetitionMap[repetition].addressModeU;\n      texture.source.style.addressModeV = repetitionMap[repetition].addressModeV;\n    }\n  }\n  setTransform(transform) {\n    const texture = this.texture;\n    this.transform.copyFrom(transform);\n    this.transform.invert();\n    this.transform.scale(\n      1 / texture.frame.width,\n      1 / texture.frame.height\n    );\n  }\n}\n\nexport { FillPattern };\n//# sourceMappingURL=FillPattern.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { FillGradient } from '../fill/FillGradient.mjs';\nimport { FillPattern } from '../fill/FillPattern.mjs';\n\n\"use strict\";\nfunction convertFillInputToFillStyle(value, defaultStyle) {\n  if (value === void 0 || value === null) {\n    return null;\n  }\n  let fillStyleToParse;\n  let styleToMerge;\n  if (value?.fill) {\n    styleToMerge = value.fill;\n    fillStyleToParse = { ...defaultStyle, ...value };\n  } else {\n    styleToMerge = value;\n    fillStyleToParse = defaultStyle;\n  }\n  if (Color.isColorLike(styleToMerge)) {\n    const temp = Color.shared.setValue(styleToMerge ?? 0);\n    const opts = {\n      ...fillStyleToParse,\n      color: temp.toNumber(),\n      alpha: temp.alpha === 1 ? fillStyleToParse.alpha : temp.alpha,\n      texture: Texture.WHITE\n    };\n    return opts;\n  } else if (styleToMerge instanceof FillPattern) {\n    const pattern = styleToMerge;\n    return {\n      ...fillStyleToParse,\n      color: 16777215,\n      texture: pattern.texture,\n      matrix: pattern.transform,\n      fill: fillStyleToParse.fill ?? null\n    };\n  } else if (styleToMerge instanceof FillGradient) {\n    const gradient = styleToMerge;\n    gradient.buildLinearGradient();\n    return {\n      ...fillStyleToParse,\n      color: 16777215,\n      texture: gradient.texture,\n      matrix: gradient.transform\n    };\n  }\n  const style = { ...defaultStyle, ...value };\n  if (style.texture) {\n    if (style.texture !== Texture.WHITE) {\n      const m = style.matrix?.invert() || new Matrix();\n      m.scale(\n        1 / style.texture.frame.width,\n        1 / style.texture.frame.height\n      );\n      style.matrix = m;\n    }\n    const sourceStyle = style.texture.source.style;\n    if (sourceStyle.addressMode === \"clamp-to-edge\") {\n      sourceStyle.addressMode = \"repeat\";\n    }\n  }\n  const color = Color.shared.setValue(style.color);\n  style.alpha *= color.alpha;\n  style.color = color.toNumber();\n  style.matrix = style.matrix ? style.matrix.clone() : null;\n  return style;\n}\n\nexport { convertFillInputToFillStyle };\n//# sourceMappingURL=convertFillInputToFillStyle.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../../color/Color.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Point } from '../../../maths/point/Point.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { uid } from '../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\nimport { Bounds } from '../../container/bounds/Bounds.mjs';\nimport { GraphicsPath } from './path/GraphicsPath.mjs';\nimport { SVGParser } from './svg/SVGParser.mjs';\nimport { convertFillInputToFillStyle } from './utils/convertFillInputToFillStyle.mjs';\n\n\"use strict\";\nconst tmpPoint = new Point();\nconst tempMatrix = new Matrix();\nconst _GraphicsContext = class _GraphicsContext extends EventEmitter {\n  constructor() {\n    super(...arguments);\n    this.uid = uid(\"graphicsContext\");\n    this.dirty = true;\n    this.batchMode = \"auto\";\n    this.instructions = [];\n    this._activePath = new GraphicsPath();\n    this._transform = new Matrix();\n    this._fillStyle = { ..._GraphicsContext.defaultFillStyle };\n    this._strokeStyle = { ..._GraphicsContext.defaultStrokeStyle };\n    this._stateStack = [];\n    this._tick = 0;\n    this._bounds = new Bounds();\n    this._boundsDirty = true;\n  }\n  /**\n   * Creates a new GraphicsContext object that is a clone of this instance, copying all properties,\n   * including the current drawing state, transformations, styles, and instructions.\n   * @returns A new GraphicsContext instance with the same properties and state as this one.\n   */\n  clone() {\n    const clone = new _GraphicsContext();\n    clone.batchMode = this.batchMode;\n    clone.instructions = this.instructions.slice();\n    clone._activePath = this._activePath.clone();\n    clone._transform = this._transform.clone();\n    clone._fillStyle = { ...this._fillStyle };\n    clone._strokeStyle = { ...this._strokeStyle };\n    clone._stateStack = this._stateStack.slice();\n    clone._bounds = this._bounds.clone();\n    clone._boundsDirty = true;\n    return clone;\n  }\n  /**\n   * The current fill style of the graphics context. This can be a color, gradient, pattern, or a more complex style defined by a FillStyle object.\n   */\n  get fillStyle() {\n    return this._fillStyle;\n  }\n  set fillStyle(value) {\n    this._fillStyle = convertFillInputToFillStyle(value, _GraphicsContext.defaultFillStyle);\n  }\n  /**\n   * The current stroke style of the graphics context. Similar to fill styles, stroke styles can encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n   */\n  get strokeStyle() {\n    return this._strokeStyle;\n  }\n  set strokeStyle(value) {\n    this._strokeStyle = convertFillInputToFillStyle(value, _GraphicsContext.defaultStrokeStyle);\n  }\n  /**\n   * Sets the current fill style of the graphics context. The fill style can be a color, gradient,\n   * pattern, or a more complex style defined by a FillStyle object.\n   * @param style - The fill style to apply. This can be a simple color, a gradient or pattern object,\n   *                or a FillStyle or ConvertedFillStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setFillStyle(style) {\n    this._fillStyle = convertFillInputToFillStyle(style, _GraphicsContext.defaultFillStyle);\n    return this;\n  }\n  /**\n   * Sets the current stroke style of the graphics context. Similar to fill styles, stroke styles can\n   * encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n   * @param style - The stroke style to apply. Can be defined as a color, a gradient or pattern,\n   *                or a StrokeStyle or ConvertedStrokeStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setStrokeStyle(style) {\n    this._strokeStyle = convertFillInputToFillStyle(style, _GraphicsContext.defaultStrokeStyle);\n    return this;\n  }\n  texture(texture, tint, dx, dy, dw, dh) {\n    this.instructions.push({\n      action: \"texture\",\n      data: {\n        image: texture,\n        dx: dx || 0,\n        dy: dy || 0,\n        dw: dw || texture.frame.width,\n        dh: dh || texture.frame.height,\n        transform: this._transform.clone(),\n        alpha: this._fillStyle.alpha,\n        style: tint ? Color.shared.setValue(tint).toNumber() : 16777215\n      }\n    });\n    this.onUpdate();\n    return this;\n  }\n  /**\n   * Resets the current path. Any previous path and its commands are discarded and a new path is\n   * started. This is typically called before beginning a new shape or series of drawing commands.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  beginPath() {\n    this._activePath = new GraphicsPath();\n    return this;\n  }\n  fill(style, alpha) {\n    let path;\n    const lastInstruction = this.instructions[this.instructions.length - 1];\n    if (this._tick === 0 && lastInstruction && lastInstruction.action === \"stroke\") {\n      path = lastInstruction.data.path;\n    } else {\n      path = this._activePath.clone();\n    }\n    if (!path)\n      return this;\n    if (style != null) {\n      if (alpha !== void 0 && typeof style === \"number\") {\n        deprecation(v8_0_0, \"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead\");\n        style = { color: style, alpha };\n      }\n      this._fillStyle = convertFillInputToFillStyle(style, _GraphicsContext.defaultFillStyle);\n    }\n    this.instructions.push({\n      action: \"fill\",\n      // TODO copy fill style!\n      data: { style: this.fillStyle, path }\n    });\n    this.onUpdate();\n    this._initNextPathLocation();\n    this._tick = 0;\n    return this;\n  }\n  _initNextPathLocation() {\n    const { x, y } = this._activePath.getLastPoint(Point.shared);\n    this._activePath.clear();\n    this._activePath.moveTo(x, y);\n  }\n  /**\n   * Strokes the current path with the current stroke style. This method can take an optional\n   * FillStyleInputs parameter to define the stroke's appearance, including its color, width, and other properties.\n   * @param style - (Optional) The stroke style to apply. Can be defined as a simple color or a more complex style object. If omitted, uses the current stroke style.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  stroke(style) {\n    let path;\n    const lastInstruction = this.instructions[this.instructions.length - 1];\n    if (this._tick === 0 && lastInstruction && lastInstruction.action === \"fill\") {\n      path = lastInstruction.data.path;\n    } else {\n      path = this._activePath.clone();\n    }\n    if (!path)\n      return this;\n    if (style != null) {\n      this._strokeStyle = convertFillInputToFillStyle(style, _GraphicsContext.defaultStrokeStyle);\n    }\n    this.instructions.push({\n      action: \"stroke\",\n      // TODO copy fill style!\n      data: { style: this.strokeStyle, path }\n    });\n    this.onUpdate();\n    this._initNextPathLocation();\n    this._tick = 0;\n    return this;\n  }\n  /**\n   * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n   * subtracting a path from the previously drawn path. If a hole is not completely in a shape, it will\n   * fail to cut correctly!\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  cut() {\n    for (let i = 0; i < 2; i++) {\n      const lastInstruction = this.instructions[this.instructions.length - 1 - i];\n      const holePath = this._activePath.clone();\n      if (lastInstruction) {\n        if (lastInstruction.action === \"stroke\" || lastInstruction.action === \"fill\") {\n          if (lastInstruction.data.hole) {\n            lastInstruction.data.hole.addPath(holePath);\n          } else {\n            lastInstruction.data.hole = holePath;\n            break;\n          }\n        }\n      }\n    }\n    this._initNextPathLocation();\n    return this;\n  }\n  /**\n   * Adds an arc to the current path, which is centered at (x, y) with the specified radius,\n   * starting and ending angles, and direction.\n   * @param x - The x-coordinate of the arc's center.\n   * @param y - The y-coordinate of the arc's center.\n   * @param radius - The arc's radius.\n   * @param startAngle - The starting angle, in radians.\n   * @param endAngle - The ending angle, in radians.\n   * @param counterclockwise - (Optional) Specifies whether the arc is drawn counterclockwise (true) or clockwise (false). Defaults to false.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  arc(x, y, radius, startAngle, endAngle, counterclockwise) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arc(\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      radius,\n      startAngle,\n      endAngle,\n      counterclockwise\n    );\n    return this;\n  }\n  /**\n   * Adds an arc to the current path with the given control points and radius, connected to the previous point\n   * by a straight line if necessary.\n   * @param x1 - The x-coordinate of the first control point.\n   * @param y1 - The y-coordinate of the first control point.\n   * @param x2 - The x-coordinate of the second control point.\n   * @param y2 - The y-coordinate of the second control point.\n   * @param radius - The arc's radius.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  arcTo(x1, y1, x2, y2, radius) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arcTo(\n      t.a * x1 + t.c * y1 + t.tx,\n      t.b * x1 + t.d * y1 + t.ty,\n      t.a * x2 + t.c * y2 + t.tx,\n      t.b * x2 + t.d * y2 + t.ty,\n      radius\n    );\n    return this;\n  }\n  /**\n   * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n   * @param rx - The x-radius of the ellipse.\n   * @param ry - The y-radius of the ellipse.\n   * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n   * to the x-axis of the coordinate system, in degrees.\n   * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n   * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n   * @param x - The x-coordinate of the arc's end point.\n   * @param y - The y-coordinate of the arc's end point.\n   * @returns The instance of the current object for chaining.\n   */\n  arcToSvg(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arcToSvg(\n      rx,\n      ry,\n      xAxisRotation,\n      // should we rotate this with transform??\n      largeArcFlag,\n      sweepFlag,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty\n    );\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires three points: the first two are control points and the third one is the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the first control point.\n   * @param cp1y - The y-coordinate of the first control point.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y, smoothness) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.bezierCurveTo(\n      t.a * cp1x + t.c * cp1y + t.tx,\n      t.b * cp1x + t.d * cp1y + t.ty,\n      t.a * cp2x + t.c * cp2y + t.tx,\n      t.b * cp2x + t.d * cp2y + t.ty,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this._tick++;\n    this._activePath?.closePath();\n    return this;\n  }\n  /**\n   * Draws an ellipse at the specified location and with the given x and y radii.\n   * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n   * @param x - The x-coordinate of the center of the ellipse.\n   * @param y - The y-coordinate of the center of the ellipse.\n   * @param radiusX - The horizontal radius of the ellipse.\n   * @param radiusY - The vertical radius of the ellipse.\n   * @returns The instance of the current object for chaining.\n   */\n  ellipse(x, y, radiusX, radiusY) {\n    this._tick++;\n    this._activePath.ellipse(x, y, radiusX, radiusY, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius) {\n    this._tick++;\n    this._activePath.circle(x, y, radius, this._transform.clone());\n    return this;\n  }\n  /**\n   * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n   * @param path - The `GraphicsPath` to add.\n   * @returns The instance of the current object for chaining.\n   */\n  path(path) {\n    this._tick++;\n    this._activePath.addPath(path, this._transform.clone());\n    return this;\n  }\n  /**\n   * Connects the current point to a new point with a straight line. This method updates the current path.\n   * @param x - The x-coordinate of the new point to connect to.\n   * @param y - The y-coordinate of the new point to connect to.\n   * @returns The instance of the current object for chaining.\n   */\n  lineTo(x, y) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.lineTo(\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty\n    );\n    return this;\n  }\n  /**\n   * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n   * @param x - The x-coordinate for the starting point.\n   * @param y - The y-coordinate for the starting point.\n   * @returns The instance of the current object for chaining.\n   */\n  moveTo(x, y) {\n    this._tick++;\n    const t = this._transform;\n    const instructions = this._activePath.instructions;\n    const transformedX = t.a * x + t.c * y + t.tx;\n    const transformedY = t.b * x + t.d * y + t.ty;\n    if (instructions.length === 1 && instructions[0].action === \"moveTo\") {\n      instructions[0].data[0] = transformedX;\n      instructions[0].data[1] = transformedY;\n      return this;\n    }\n    this._activePath.moveTo(\n      transformedX,\n      transformedY\n    );\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n   * The starting point is the last point in the current path.\n   * @param cpx - The x-coordinate of the control point.\n   * @param cpy - The y-coordinate of the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveTo(cpx, cpy, x, y, smoothness) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.quadraticCurveTo(\n      t.a * cpx + t.c * cpy + t.tx,\n      t.b * cpx + t.d * cpy + t.ty,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h) {\n    this._tick++;\n    this._activePath.rect(x, y, w, h, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a rectangle with rounded corners.\n   * The corner radius can be specified to determine how rounded the corners should be.\n   * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n   * @returns The instance of the current object for chaining.\n   */\n  roundRect(x, y, w, h, radius) {\n    this._tick++;\n    this._activePath.roundRect(x, y, w, h, radius, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a polygon shape by specifying a sequence of points. This method allows for the creation of complex polygons,\n   * which can be both open and closed. An optional transformation can be applied, enabling the polygon to be scaled,\n   * rotated, or translated as needed.\n   * @param points - An array of numbers, or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n   * representing the x and y coordinates, of the polygon's vertices, in sequence.\n   * @param close - A boolean indicating whether to close the polygon path. True by default.\n   */\n  poly(points, close) {\n    this._tick++;\n    this._activePath.poly(points, close, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  regularPoly(x, y, radius, sides, rotation = 0, transform) {\n    this._tick++;\n    this._activePath.regularPoly(x, y, radius, sides, rotation, transform);\n    return this;\n  }\n  /**\n   * Draws a polygon with rounded corners.\n   * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param corner - The radius of the rounding of the corners.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @returns The instance of the current object for chaining.\n   */\n  roundPoly(x, y, radius, sides, corner, rotation) {\n    this._tick++;\n    this._activePath.roundPoly(x, y, radius, sides, corner, rotation);\n    return this;\n  }\n  /**\n   * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n   * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n   * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n   * A minimum of 3 points is required.\n   * @param radius - The default radius for the corners.\n   * This radius is applied to all corners unless overridden in `points`.\n   * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n   *  method instead of an arc method. Defaults to false.\n   * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n   * Higher values make the curve smoother.\n   * @returns The instance of the current object for chaining.\n   */\n  roundShape(points, radius, useQuadratic, smoothness) {\n    this._tick++;\n    this._activePath.roundShape(points, radius, useQuadratic, smoothness);\n    return this;\n  }\n  /**\n   * Draw Rectangle with fillet corners. This is much like rounded rectangle\n   * however it support negative numbers as well for the corner radius.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param fillet - accept negative or positive values\n   */\n  filletRect(x, y, width, height, fillet) {\n    this._tick++;\n    this._activePath.filletRect(x, y, width, height, fillet);\n    return this;\n  }\n  /**\n   * Draw Rectangle with chamfer corners. These are angled corners.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param chamfer - non-zero real number, size of corner cutout\n   * @param transform\n   */\n  chamferRect(x, y, width, height, chamfer, transform) {\n    this._tick++;\n    this._activePath.chamferRect(x, y, width, height, chamfer, transform);\n    return this;\n  }\n  /**\n   * Draws a star shape centered at a specified location. This method allows for the creation\n   *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n   * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n   * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n   * @param x - The x-coordinate of the center of the star.\n   * @param y - The y-coordinate of the center of the star.\n   * @param points - The number of points of the star.\n   * @param radius - The outer radius of the star (distance from the center to the outer points).\n   * @param innerRadius - Optional. The inner radius of the star\n   * (distance from the center to the inner points between the outer points).\n   * If not provided, defaults to half of the `radius`.\n   * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n   * Defaults to 0, meaning one point is directly upward.\n   * @returns The instance of the current object for chaining further drawing commands.\n   */\n  star(x, y, points, radius, innerRadius = 0, rotation = 0) {\n    this._tick++;\n    this._activePath.star(x, y, points, radius, innerRadius, rotation, this._transform.clone());\n    return this;\n  }\n  /**\n   * Parses and renders an SVG string into the graphics context. This allows for complex shapes and paths\n   * defined in SVG format to be drawn within the graphics context.\n   * @param svg - The SVG string to be parsed and rendered.\n   */\n  svg(svg) {\n    this._tick++;\n    SVGParser(svg, this);\n    return this;\n  }\n  /**\n   * Restores the most recently saved graphics state by popping the top of the graphics state stack.\n   * This includes transformations, fill styles, and stroke styles.\n   */\n  restore() {\n    const state = this._stateStack.pop();\n    if (state) {\n      this._transform = state.transform;\n      this._fillStyle = state.fillStyle;\n      this._strokeStyle = state.strokeStyle;\n    }\n    return this;\n  }\n  /** Saves the current graphics state, including transformations, fill styles, and stroke styles, onto a stack. */\n  save() {\n    this._stateStack.push({\n      transform: this._transform.clone(),\n      fillStyle: { ...this._fillStyle },\n      strokeStyle: { ...this._strokeStyle }\n    });\n    return this;\n  }\n  /**\n   * Returns the current transformation matrix of the graphics context.\n   * @returns The current transformation matrix.\n   */\n  getTransform() {\n    return this._transform;\n  }\n  /**\n   * Resets the current transformation matrix to the identity matrix, effectively removing any transformations (rotation, scaling, translation) previously applied.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  resetTransform() {\n    this._transform.identity();\n    return this;\n  }\n  /**\n   * Applies a rotation transformation to the graphics context around the current origin.\n   * @param angle - The angle of rotation in radians.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  rotate(angle) {\n    this._transform.rotate(angle);\n    return this;\n  }\n  /**\n   * Applies a scaling transformation to the graphics context, scaling drawings by x horizontally and by y vertically.\n   * @param x - The scale factor in the horizontal direction.\n   * @param y - (Optional) The scale factor in the vertical direction. If not specified, the x value is used for both directions.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  scale(x, y = x) {\n    this._transform.scale(x, y);\n    return this;\n  }\n  setTransform(a, b, c, d, dx, dy) {\n    if (a instanceof Matrix) {\n      this._transform.set(a.a, a.b, a.c, a.d, a.tx, a.ty);\n      return this;\n    }\n    this._transform.set(a, b, c, d, dx, dy);\n    return this;\n  }\n  transform(a, b, c, d, dx, dy) {\n    if (a instanceof Matrix) {\n      this._transform.append(a);\n      return this;\n    }\n    tempMatrix.set(a, b, c, d, dx, dy);\n    this._transform.append(tempMatrix);\n    return this;\n  }\n  /**\n   * Applies a translation transformation to the graphics context, moving the origin by the specified amounts.\n   * @param x - The amount to translate in the horizontal direction.\n   * @param y - (Optional) The amount to translate in the vertical direction. If not specified, the x value is used for both directions.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  translate(x, y = x) {\n    this._transform.translate(x, y);\n    return this;\n  }\n  /**\n   * Clears all drawing commands from the graphics context, effectively resetting it. This includes clearing the path,\n   * and optionally resetting transformations to the identity matrix.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  clear() {\n    this.instructions.length = 0;\n    this.resetTransform();\n    this.onUpdate();\n    return this;\n  }\n  onUpdate() {\n    if (this.dirty)\n      return;\n    this.emit(\"update\", this, 16);\n    this.dirty = true;\n    this._boundsDirty = true;\n  }\n  /** The bounds of the graphic shape. */\n  get bounds() {\n    if (!this._boundsDirty)\n      return this._bounds;\n    const bounds = this._bounds;\n    bounds.clear();\n    for (let i = 0; i < this.instructions.length; i++) {\n      const instruction = this.instructions[i];\n      const action = instruction.action;\n      if (action === \"fill\") {\n        const data = instruction.data;\n        bounds.addBounds(data.path.bounds);\n      } else if (action === \"texture\") {\n        const data = instruction.data;\n        bounds.addFrame(data.dx, data.dy, data.dx + data.dw, data.dy + data.dh, data.transform);\n      }\n      if (action === \"stroke\") {\n        const data = instruction.data;\n        const padding = data.style.width / 2;\n        const _bounds = data.path.bounds;\n        bounds.addFrame(\n          _bounds.minX - padding,\n          _bounds.minY - padding,\n          _bounds.maxX + padding,\n          _bounds.maxY + padding\n        );\n      }\n    }\n    return bounds;\n  }\n  /**\n   * Check to see if a point is contained within this geometry.\n   * @param point - Point to check if it's contained.\n   * @returns {boolean} `true` if the point is contained within geometry.\n   */\n  containsPoint(point) {\n    if (!this.bounds.containsPoint(point.x, point.y))\n      return false;\n    const instructions = this.instructions;\n    let hasHit = false;\n    for (let k = 0; k < instructions.length; k++) {\n      const instruction = instructions[k];\n      const data = instruction.data;\n      const path = data.path;\n      if (!instruction.action || !path)\n        continue;\n      const style = data.style;\n      const shapes = path.shapePath.shapePrimitives;\n      for (let i = 0; i < shapes.length; i++) {\n        const shape = shapes[i].shape;\n        if (!style || !shape)\n          continue;\n        const transform = shapes[i].transform;\n        const transformedPoint = transform ? transform.applyInverse(point, tmpPoint) : point;\n        if (instruction.action === \"fill\") {\n          hasHit = shape.contains(transformedPoint.x, transformedPoint.y);\n        } else {\n          hasHit = shape.strokeContains(transformedPoint.x, transformedPoint.y, style.width);\n        }\n        const holes = data.hole;\n        if (holes) {\n          const holeShapes = holes.shapePath?.shapePrimitives;\n          if (holeShapes) {\n            for (let j = 0; j < holeShapes.length; j++) {\n              if (holeShapes[j].shape.contains(transformedPoint.x, transformedPoint.y)) {\n                hasHit = false;\n              }\n            }\n          }\n        }\n        if (hasHit) {\n          return true;\n        }\n      }\n    }\n    return hasHit;\n  }\n  /**\n   * Destroys the GraphicsData object.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @param {boolean} [options.texture=false] - Should it destroy the current texture of the fill/stroke style?\n   * @param {boolean} [options.textureSource=false] - Should it destroy the texture source of the fill/stroke style?\n   */\n  destroy(options = false) {\n    this._stateStack.length = 0;\n    this._transform = null;\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      if (this._fillStyle.texture) {\n        this._fillStyle.texture.destroy(destroyTextureSource);\n      }\n      if (this._strokeStyle.texture) {\n        this._strokeStyle.texture.destroy(destroyTextureSource);\n      }\n    }\n    this._fillStyle = null;\n    this._strokeStyle = null;\n    this.instructions = null;\n    this._activePath = null;\n    this._bounds = null;\n    this._stateStack = null;\n    this.customShader = null;\n    this._transform = null;\n  }\n};\n/** The default fill style to use when none is provided. */\n_GraphicsContext.defaultFillStyle = {\n  /** The color to use for the fill. */\n  color: 16777215,\n  /** The alpha value to use for the fill. */\n  alpha: 1,\n  /** The texture to use for the fill. */\n  texture: Texture.WHITE,\n  /** The matrix to apply. */\n  matrix: null,\n  /** The fill pattern to use. */\n  fill: null\n};\n/** The default stroke style to use when none is provided. */\n_GraphicsContext.defaultStrokeStyle = {\n  /** The width of the stroke. */\n  width: 1,\n  /** The color to use for the stroke. */\n  color: 16777215,\n  /** The alpha value to use for the stroke. */\n  alpha: 1,\n  /** The alignment of the stroke. */\n  alignment: 0.5,\n  /** The miter limit to use. */\n  miterLimit: 10,\n  /** The line cap style to use. */\n  cap: \"butt\",\n  /** The line join style to use. */\n  join: \"miter\",\n  /** The texture to use for the fill. */\n  texture: Texture.WHITE,\n  /** The matrix to apply. */\n  matrix: null,\n  /** The fill pattern to use. */\n  fill: null\n};\nlet GraphicsContext = _GraphicsContext;\n\nexport { GraphicsContext };\n//# sourceMappingURL=GraphicsContext.mjs.map\n","import { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\nimport { Container } from '../../container/Container.mjs';\nimport { GraphicsContext } from './GraphicsContext.mjs';\n\n\"use strict\";\nclass Graphics extends Container {\n  /**\n   * @param options - Options for the Graphics.\n   */\n  constructor(options) {\n    if (options instanceof GraphicsContext) {\n      options = { context: options };\n    }\n    const { context, roundPixels, ...rest } = options || {};\n    super({\n      label: \"Graphics\",\n      ...rest\n    });\n    this.canBundle = true;\n    this.renderPipeId = \"graphics\";\n    this._roundPixels = 0;\n    if (!context) {\n      this._context = this._ownedContext = new GraphicsContext();\n    } else {\n      this._context = context;\n    }\n    this._context.on(\"update\", this.onViewUpdate, this);\n    this.allowChildren = false;\n    this.roundPixels = roundPixels ?? false;\n  }\n  set context(context) {\n    if (context === this._context)\n      return;\n    this._context.off(\"update\", this.onViewUpdate, this);\n    this._context = context;\n    this._context.on(\"update\", this.onViewUpdate, this);\n    this.onViewUpdate();\n  }\n  get context() {\n    return this._context;\n  }\n  /**\n   * The local bounds of the graphic.\n   * @type {rendering.Bounds}\n   */\n  get bounds() {\n    return this._context.bounds;\n  }\n  /**\n   * Adds the bounds of this object to the bounds object.\n   * @param bounds - The output bounds object.\n   */\n  addBounds(bounds) {\n    bounds.addBounds(this._context.bounds);\n  }\n  /**\n   * Checks if the object contains the given point.\n   * @param point - The point to check\n   */\n  containsPoint(point) {\n    return this._context.containsPoint(point);\n  }\n  /**\n   *  Whether or not to round the x/y position of the graphic.\n   * @type {boolean}\n   */\n  get roundPixels() {\n    return !!this._roundPixels;\n  }\n  set roundPixels(value) {\n    this._roundPixels = value ? 1 : 0;\n  }\n  onViewUpdate() {\n    this._didChangeId += 1 << 12;\n    this._didGraphicsUpdate = true;\n    if (this.didViewUpdate)\n      return;\n    this.didViewUpdate = true;\n    if (this.renderGroup) {\n      this.renderGroup.onChildViewUpdate(this);\n    }\n  }\n  /**\n   * Destroys this graphics renderable and optionally its context.\n   * @param options - Options parameter. A boolean will act as if all options\n   *\n   * If the context was created by this graphics and `destroy(false)` or `destroy()` is called\n   * then the context will still be destroyed.\n   *\n   * If you want to explicitly not destroy this context that this graphics created,\n   * then you should pass destroy({ context: false })\n   *\n   * If the context was passed in as an argument to the constructor then it will not be destroyed\n   * @param {boolean} [options.texture=false] - Should destroy the texture of the graphics context\n   * @param {boolean} [options.textureSource=false] - Should destroy the texture source of the graphics context\n   * @param {boolean} [options.context=false] - Should destroy the context\n   */\n  destroy(options) {\n    if (this._ownedContext && !options) {\n      this._ownedContext.destroy(options);\n    } else if (options === true || options?.context === true) {\n      this._context.destroy(options);\n    }\n    this._ownedContext = null;\n    this._context = null;\n    super.destroy(options);\n  }\n  _callContextMethod(method, args) {\n    this.context[method](...args);\n    return this;\n  }\n  // --------------------------------------- GraphicsContext methods ---------------------------------------\n  /**\n   * Sets the current fill style of the graphics context. The fill style can be a color, gradient,\n   * pattern, or a more complex style defined by a FillStyle object.\n   * @param {FillStyleInputs} args - The fill style to apply. This can be a simple color, a gradient or\n   * pattern object, or a FillStyle or ConvertedFillStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setFillStyle(...args) {\n    return this._callContextMethod(\"setFillStyle\", args);\n  }\n  /**\n   * Sets the current stroke style of the graphics context. Similar to fill styles, stroke styles can\n   * encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n   * @param {FillStyleInputs} args - The stroke style to apply. Can be defined as a color, a gradient or pattern,\n   * or a StrokeStyle or ConvertedStrokeStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setStrokeStyle(...args) {\n    return this._callContextMethod(\"setStrokeStyle\", args);\n  }\n  fill(...args) {\n    return this._callContextMethod(\"fill\", args);\n  }\n  /**\n   * Strokes the current path with the current stroke style. This method can take an optional\n   * FillStyleInputs parameter to define the stroke's appearance, including its color, width, and other properties.\n   * @param {FillStyleInputs} args - (Optional) The stroke style to apply. Can be defined as a simple color or a more\n   * complex style object. If omitted, uses the current stroke style.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  stroke(...args) {\n    return this._callContextMethod(\"stroke\", args);\n  }\n  texture(...args) {\n    return this._callContextMethod(\"texture\", args);\n  }\n  /**\n   * Resets the current path. Any previous path and its commands are discarded and a new path is\n   * started. This is typically called before beginning a new shape or series of drawing commands.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  beginPath() {\n    return this._callContextMethod(\"beginPath\", []);\n  }\n  /**\n   * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n   * subtracting a path from the previously drawn path. If a hole is not completely in a shape, it will\n   * fail to cut correctly!\n   */\n  cut() {\n    return this._callContextMethod(\"cut\", []);\n  }\n  arc(...args) {\n    return this._callContextMethod(\"arc\", args);\n  }\n  arcTo(...args) {\n    return this._callContextMethod(\"arcTo\", args);\n  }\n  arcToSvg(...args) {\n    return this._callContextMethod(\"arcToSvg\", args);\n  }\n  bezierCurveTo(...args) {\n    return this._callContextMethod(\"bezierCurveTo\", args);\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    return this._callContextMethod(\"closePath\", []);\n  }\n  ellipse(...args) {\n    return this._callContextMethod(\"ellipse\", args);\n  }\n  circle(...args) {\n    return this._callContextMethod(\"circle\", args);\n  }\n  path(...args) {\n    return this._callContextMethod(\"path\", args);\n  }\n  lineTo(...args) {\n    return this._callContextMethod(\"lineTo\", args);\n  }\n  moveTo(...args) {\n    return this._callContextMethod(\"moveTo\", args);\n  }\n  quadraticCurveTo(...args) {\n    return this._callContextMethod(\"quadraticCurveTo\", args);\n  }\n  rect(...args) {\n    return this._callContextMethod(\"rect\", args);\n  }\n  roundRect(...args) {\n    return this._callContextMethod(\"roundRect\", args);\n  }\n  poly(...args) {\n    return this._callContextMethod(\"poly\", args);\n  }\n  regularPoly(...args) {\n    return this._callContextMethod(\"regularPoly\", args);\n  }\n  roundPoly(...args) {\n    return this._callContextMethod(\"roundPoly\", args);\n  }\n  roundShape(...args) {\n    return this._callContextMethod(\"roundShape\", args);\n  }\n  filletRect(...args) {\n    return this._callContextMethod(\"filletRect\", args);\n  }\n  chamferRect(...args) {\n    return this._callContextMethod(\"chamferRect\", args);\n  }\n  star(...args) {\n    return this._callContextMethod(\"star\", args);\n  }\n  svg(...args) {\n    return this._callContextMethod(\"svg\", args);\n  }\n  restore(...args) {\n    return this._callContextMethod(\"restore\", args);\n  }\n  /** Saves the current graphics state, including transformations, fill styles, and stroke styles, onto a stack. */\n  save() {\n    return this._callContextMethod(\"save\", []);\n  }\n  /**\n   * Returns the current transformation matrix of the graphics context.\n   * @returns The current transformation matrix.\n   */\n  getTransform() {\n    return this.context.getTransform();\n  }\n  /**\n   * Resets the current transformation matrix to the identity matrix, effectively removing\n   * any transformations (rotation, scaling, translation) previously applied.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  resetTransform() {\n    return this._callContextMethod(\"resetTransform\", []);\n  }\n  rotateTransform(...args) {\n    return this._callContextMethod(\"rotate\", args);\n  }\n  scaleTransform(...args) {\n    return this._callContextMethod(\"scale\", args);\n  }\n  setTransform(...args) {\n    return this._callContextMethod(\"setTransform\", args);\n  }\n  transform(...args) {\n    return this._callContextMethod(\"transform\", args);\n  }\n  translateTransform(...args) {\n    return this._callContextMethod(\"translate\", args);\n  }\n  /**\n   * Clears all drawing commands from the graphics context, effectively resetting it. This includes clearing the path,\n   * and optionally resetting transformations to the identity matrix.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  clear() {\n    return this._callContextMethod(\"clear\", []);\n  }\n  /**\n   * The fill style to use.\n   * @type {ConvertedFillStyle}\n   */\n  get fillStyle() {\n    return this._context.fillStyle;\n  }\n  set fillStyle(value) {\n    this._context.fillStyle = value;\n  }\n  /**\n   * The stroke style to use.\n   * @type {ConvertedStrokeStyle}\n   */\n  get strokeStyle() {\n    return this._context.strokeStyle;\n  }\n  set strokeStyle(value) {\n    this._context.strokeStyle = value;\n  }\n  /**\n   * Creates a new Graphics object.\n   * Note that only the context of the object is cloned, not its transform (position,scale,etc)\n   * @param deep - Whether to create a deep clone of the graphics object. If false, the context\n   * will be shared between the two objects (default false). If true, the context will be\n   * cloned (recommended if you need to modify the context in any way).\n   * @returns - A clone of the graphics object\n   */\n  clone(deep = false) {\n    if (deep) {\n      return new Graphics(this._context.clone());\n    }\n    this._ownedContext = null;\n    const clone = new Graphics(this._context);\n    return clone;\n  }\n  // -------- v7 deprecations ---------\n  /**\n   * @param width\n   * @param color\n   * @param alpha\n   * @deprecated since 8.0.0 Use {@link Graphics#setStrokeStyle} instead\n   */\n  lineStyle(width, color, alpha) {\n    deprecation(v8_0_0, \"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.\");\n    const strokeStyle = {};\n    width && (strokeStyle.width = width);\n    color && (strokeStyle.color = color);\n    alpha && (strokeStyle.alpha = alpha);\n    this.context.strokeStyle = strokeStyle;\n    return this;\n  }\n  /**\n   * @param color\n   * @param alpha\n   * @deprecated since 8.0.0 Use {@link Graphics#fill} instead\n   */\n  beginFill(color, alpha) {\n    deprecation(v8_0_0, \"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.\");\n    const fillStyle = {};\n    color && (fillStyle.color = color);\n    alpha && (fillStyle.alpha = alpha);\n    this.context.fillStyle = fillStyle;\n    return this;\n  }\n  /**\n   * @deprecated since 8.0.0 Use {@link Graphics#fill} instead\n   */\n  endFill() {\n    deprecation(v8_0_0, \"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.\");\n    this.context.fill();\n    const strokeStyle = this.context.strokeStyle;\n    if (strokeStyle.width !== GraphicsContext.defaultStrokeStyle.width || strokeStyle.color !== GraphicsContext.defaultStrokeStyle.color || strokeStyle.alpha !== GraphicsContext.defaultStrokeStyle.alpha) {\n      this.context.stroke();\n    }\n    return this;\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#circle} instead\n   */\n  drawCircle(...args) {\n    deprecation(v8_0_0, \"Graphics#drawCircle has been renamed to Graphics#circle\");\n    return this._callContextMethod(\"circle\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#ellipse} instead\n   */\n  drawEllipse(...args) {\n    deprecation(v8_0_0, \"Graphics#drawEllipse has been renamed to Graphics#ellipse\");\n    return this._callContextMethod(\"ellipse\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#poly} instead\n   */\n  drawPolygon(...args) {\n    deprecation(v8_0_0, \"Graphics#drawPolygon has been renamed to Graphics#poly\");\n    return this._callContextMethod(\"poly\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#rect} instead\n   */\n  drawRect(...args) {\n    deprecation(v8_0_0, \"Graphics#drawRect has been renamed to Graphics#rect\");\n    return this._callContextMethod(\"rect\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#roundRect} instead\n   */\n  drawRoundedRect(...args) {\n    deprecation(v8_0_0, \"Graphics#drawRoundedRect has been renamed to Graphics#roundRect\");\n    return this._callContextMethod(\"roundRect\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#star} instead\n   */\n  drawStar(...args) {\n    deprecation(v8_0_0, \"Graphics#drawStar has been renamed to Graphics#star\");\n    return this._callContextMethod(\"star\", args);\n  }\n}\n\nexport { Graphics };\n//# sourceMappingURL=Graphics.mjs.map\n","import { browserExt } from './environment-browser/browserExt.mjs';\nimport { webworkerExt } from './environment-webworker/webworkerExt.mjs';\nimport { extensions } from './extensions/Extensions.mjs';\nexport { ExtensionType, normalizeExtensionPriority } from './extensions/Extensions.mjs';\nimport './rendering/init.mjs';\nimport './spritesheet/init.mjs';\nimport './accessibility/index.mjs';\nimport './advanced-blend-modes/index.mjs';\nimport './app/index.mjs';\nimport './assets/index.mjs';\nimport './color/index.mjs';\nimport './compressed-textures/index.mjs';\nimport './culling/index.mjs';\nimport './environment/index.mjs';\nimport './environment-browser/index.mjs';\nimport './environment-webworker/index.mjs';\nimport './events/index.mjs';\nimport './extensions/index.mjs';\nimport './filters/index.mjs';\nimport './maths/index.mjs';\nimport './prepare/index.mjs';\nimport './rendering/index.mjs';\nimport './scene/index.mjs';\nimport './spritesheet/index.mjs';\nimport './ticker/index.mjs';\nimport './utils/index.mjs';\nexport { AccessibilitySystem } from './accessibility/AccessibilitySystem.mjs';\nexport { accessibilityTarget } from './accessibility/accessibilityTarget.mjs';\nexport { ColorBlend } from './advanced-blend-modes/ColorBlend.mjs';\nexport { ColorBurnBlend } from './advanced-blend-modes/ColorBurnBlend.mjs';\nexport { ColorDodgeBlend } from './advanced-blend-modes/ColorDodgeBlend.mjs';\nexport { DarkenBlend } from './advanced-blend-modes/DarkenBlend.mjs';\nexport { DifferenceBlend } from './advanced-blend-modes/DifferenceBlend.mjs';\nexport { DivideBlend } from './advanced-blend-modes/DivideBlend.mjs';\nexport { ExclusionBlend } from './advanced-blend-modes/ExclusionBlend.mjs';\nexport { HardLightBlend } from './advanced-blend-modes/HardLightBlend.mjs';\nexport { HardMixBlend } from './advanced-blend-modes/HardMixBlend.mjs';\nexport { LightenBlend } from './advanced-blend-modes/LightenBlend.mjs';\nexport { LinearBurnBlend } from './advanced-blend-modes/LinearBurnBlend.mjs';\nexport { LinearDodgeBlend } from './advanced-blend-modes/LinearDodgeBlend.mjs';\nexport { LinearLightBlend } from './advanced-blend-modes/LinearLightBlend.mjs';\nexport { LuminosityBlend } from './advanced-blend-modes/LuminosityBlend.mjs';\nexport { NegationBlend } from './advanced-blend-modes/NegationBlend.mjs';\nexport { OverlayBlend } from './advanced-blend-modes/OverlayBlend.mjs';\nexport { PinLightBlend } from './advanced-blend-modes/PinLightBlend.mjs';\nexport { SaturationBlend } from './advanced-blend-modes/SaturationBlend.mjs';\nexport { SoftLightBlend } from './advanced-blend-modes/SoftLightBlend.mjs';\nexport { SubtractBlend } from './advanced-blend-modes/SubtractBlend.mjs';\nexport { VividLightBlend } from './advanced-blend-modes/VividLightBlend.mjs';\nexport { Application } from './app/Application.mjs';\nexport { ResizePlugin } from './app/ResizePlugin.mjs';\nexport { TickerPlugin } from './app/TickerPlugin.mjs';\nexport { Assets, AssetsClass } from './assets/Assets.mjs';\nexport { BackgroundLoader } from './assets/BackgroundLoader.mjs';\nexport { Cache } from './assets/cache/Cache.mjs';\nexport { cacheTextureArray } from './assets/cache/parsers/cacheTextureArray.mjs';\nexport { detectAvif } from './assets/detections/parsers/detectAvif.mjs';\nexport { detectDefaults } from './assets/detections/parsers/detectDefaults.mjs';\nexport { detectMp4 } from './assets/detections/parsers/detectMp4.mjs';\nexport { detectOgv } from './assets/detections/parsers/detectOgv.mjs';\nexport { detectWebm } from './assets/detections/parsers/detectWebm.mjs';\nexport { detectWebp } from './assets/detections/parsers/detectWebp.mjs';\nexport { testImageFormat } from './assets/detections/utils/testImageFormat.mjs';\nexport { testVideoFormat } from './assets/detections/utils/testVideoFormat.mjs';\nexport { Loader } from './assets/loader/Loader.mjs';\nexport { LoaderParserPriority } from './assets/loader/parsers/LoaderParser.mjs';\nexport { loadJson } from './assets/loader/parsers/loadJson.mjs';\nexport { loadTxt } from './assets/loader/parsers/loadTxt.mjs';\nexport { getFontFamilyName, loadWebFont } from './assets/loader/parsers/loadWebFont.mjs';\nexport { loadSvg } from './assets/loader/parsers/textures/loadSVG.mjs';\nexport { loadImageBitmap, loadTextures } from './assets/loader/parsers/textures/loadTextures.mjs';\nexport { crossOrigin, determineCrossOrigin, loadVideoTextures, preloadVideo } from './assets/loader/parsers/textures/loadVideoTextures.mjs';\nexport { createTexture } from './assets/loader/parsers/textures/utils/createTexture.mjs';\nexport { WorkerManager } from './assets/loader/workers/WorkerManager.mjs';\nexport { resolveJsonUrl } from './assets/resolver/parsers/resolveJsonUrl.mjs';\nexport { resolveTextureUrl } from './assets/resolver/parsers/resolveTextureUrl.mjs';\nexport { Resolver, getUrlExtension } from './assets/resolver/Resolver.mjs';\nexport { checkDataUrl } from './assets/utils/checkDataUrl.mjs';\nexport { checkExtension } from './assets/utils/checkExtension.mjs';\nexport { convertToList } from './assets/utils/convertToList.mjs';\nexport { copySearchParams } from './assets/utils/copySearchParams.mjs';\nexport { createStringVariations } from './assets/utils/createStringVariations.mjs';\nexport { isSingleItem } from './assets/utils/isSingleItem.mjs';\nexport { Color } from './color/Color.mjs';\nexport { detectBasis } from './compressed-textures/basis/detectBasis.mjs';\nexport { loadBasis } from './compressed-textures/basis/loadBasis.mjs';\nexport { createLevelBuffers } from './compressed-textures/basis/utils/createLevelBuffers.mjs';\nexport { gpuFormatToBasisTranscoderFormat } from './compressed-textures/basis/utils/gpuFormatToBasisTranscoderFormat.mjs';\nexport { basisTranscoderUrls, setBasisTranscoderPath } from './compressed-textures/basis/utils/setBasisTranscoderPath.mjs';\nexport { loadBasisOnWorker } from './compressed-textures/basis/worker/loadBasisOnWorker.mjs';\nexport { DDS, DXGI_TO_TEXTURE_FORMAT, FOURCC_TO_TEXTURE_FORMAT, TEXTURE_FORMAT_BLOCK_SIZE } from './compressed-textures/dds/const.mjs';\nexport { loadDDS } from './compressed-textures/dds/loadDDS.mjs';\nexport { parseDDS } from './compressed-textures/dds/parseDDS.mjs';\nexport { loadKTX } from './compressed-textures/ktx/loadKTX.mjs';\nexport { parseKTX } from './compressed-textures/ktx/parseKTX.mjs';\nexport { GL_INTERNAL_FORMAT, KTX } from './compressed-textures/ktx2/const.mjs';\nexport { loadKTX2 } from './compressed-textures/ktx2/loadKTX2.mjs';\nexport { convertFormatIfRequired } from './compressed-textures/ktx2/utils/convertFormatIfRequired.mjs';\nexport { createLevelBuffersFromKTX } from './compressed-textures/ktx2/utils/createLevelBuffersFromKTX.mjs';\nexport { getTextureFormatFromKTXTexture } from './compressed-textures/ktx2/utils/getTextureFormatFromKTXTexture.mjs';\nexport { glFormatToGPUFormat } from './compressed-textures/ktx2/utils/glFormatToGPUFormat.mjs';\nexport { gpuFormatToKTXBasisTranscoderFormat } from './compressed-textures/ktx2/utils/gpuFormatToKTXBasisTranscoderFormat.mjs';\nexport { ktxTranscoderUrls, setKTXTranscoderPath } from './compressed-textures/ktx2/utils/setKTXTranscoderPath.mjs';\nexport { vkFormatToGPUFormat } from './compressed-textures/ktx2/utils/vkFormatToGPUFormat.mjs';\nexport { loadKTX2onWorker } from './compressed-textures/ktx2/worker/loadKTX2onWorker.mjs';\nexport { detectCompressed } from './compressed-textures/shared/detectCompressed.mjs';\nexport { resolveCompressedTextureUrl, validFormats } from './compressed-textures/shared/resolveCompressedTextureUrl.mjs';\nexport { Culler } from './culling/Culler.mjs';\nexport { CullerPlugin } from './culling/CullerPlugin.mjs';\nexport { cullingMixin } from './culling/cullingMixin.mjs';\nexport { DOMAdapter } from './environment/adapter.mjs';\nexport { autoDetectEnvironment } from './environment/autoDetectEnvironment.mjs';\nexport { BrowserAdapter } from './environment-browser/BrowserAdapter.mjs';\nexport { WebWorkerAdapter } from './environment-webworker/WebWorkerAdapter.mjs';\nexport { EventBoundary } from './events/EventBoundary.mjs';\nexport { EventSystem } from './events/EventSystem.mjs';\nexport { EventsTicker } from './events/EventTicker.mjs';\nexport { FederatedEvent } from './events/FederatedEvent.mjs';\nexport { FederatedContainer } from './events/FederatedEventTarget.mjs';\nexport { FederatedMouseEvent } from './events/FederatedMouseEvent.mjs';\nexport { FederatedPointerEvent } from './events/FederatedPointerEvent.mjs';\nexport { FederatedWheelEvent } from './events/FederatedWheelEvent.mjs';\nexport { default as blendTemplateFrag } from './filters/blend-modes/blend-template.frag.mjs';\nexport { default as blendTemplateVert } from './filters/blend-modes/blend-template.vert.mjs';\nexport { default as blendTemplateWgsl } from './filters/blend-modes/blend-template.wgsl.mjs';\nexport { default as hslWgsl } from './filters/blend-modes/hsl.wgsl.mjs';\nexport { default as alphaFrag } from './filters/defaults/alpha/alpha.frag.mjs';\nexport { default as alphaWgsl } from './filters/defaults/alpha/alpha.wgsl.mjs';\nexport { default as blurTemplateWgsl } from './filters/defaults/blur/gpu/blur-template.wgsl.mjs';\nexport { default as colorMatrixFilterFrag } from './filters/defaults/color-matrix/colorMatrixFilter.frag.mjs';\nexport { default as colorMatrixFilterWgsl } from './filters/defaults/color-matrix/colorMatrixFilter.wgsl.mjs';\nexport { default as defaultFilterVert } from './filters/defaults/defaultFilter.vert.mjs';\nexport { default as displacementFrag } from './filters/defaults/displacement/displacement.frag.mjs';\nexport { default as displacementVert } from './filters/defaults/displacement/displacement.vert.mjs';\nexport { default as displacementWgsl } from './filters/defaults/displacement/displacement.wgsl.mjs';\nexport { default as noiseFrag } from './filters/defaults/noise/noise.frag.mjs';\nexport { default as noiseWgsl } from './filters/defaults/noise/noise.wgsl.mjs';\nexport { default as maskFrag } from './filters/mask/mask.frag.mjs';\nexport { default as maskVert } from './filters/mask/mask.vert.mjs';\nexport { default as maskWgsl } from './filters/mask/mask.wgsl.mjs';\nexport { BlendModeFilter } from './filters/blend-modes/BlendModeFilter.mjs';\nexport { hslgl } from './filters/blend-modes/hls/GLhls.mjs';\nexport { hslgpu } from './filters/blend-modes/hls/GPUhls.mjs';\nexport { AlphaFilter } from './filters/defaults/alpha/AlphaFilter.mjs';\nexport { BlurFilter } from './filters/defaults/blur/BlurFilter.mjs';\nexport { BlurFilterPass } from './filters/defaults/blur/BlurFilterPass.mjs';\nexport { GAUSSIAN_VALUES } from './filters/defaults/blur/const.mjs';\nexport { generateBlurFragSource } from './filters/defaults/blur/gl/generateBlurFragSource.mjs';\nexport { generateBlurGlProgram } from './filters/defaults/blur/gl/generateBlurGlProgram.mjs';\nexport { generateBlurVertSource } from './filters/defaults/blur/gl/generateBlurVertSource.mjs';\nexport { generateBlurProgram } from './filters/defaults/blur/gpu/generateBlurProgram.mjs';\nexport { ColorMatrixFilter } from './filters/defaults/color-matrix/ColorMatrixFilter.mjs';\nexport { DisplacementFilter } from './filters/defaults/displacement/DisplacementFilter.mjs';\nexport { NoiseFilter } from './filters/defaults/noise/NoiseFilter.mjs';\nexport { Filter } from './filters/Filter.mjs';\nexport { FilterEffect } from './filters/FilterEffect.mjs';\nexport { FilterPipe } from './filters/FilterPipe.mjs';\nexport { FilterSystem } from './filters/FilterSystem.mjs';\nexport { MaskFilter } from './filters/mask/MaskFilter.mjs';\nexport { groupD8 } from './maths/matrix/groupD8.mjs';\nexport { Matrix } from './maths/matrix/Matrix.mjs';\nexport { DEG_TO_RAD, PI_2, RAD_TO_DEG } from './maths/misc/const.mjs';\nexport { isPow2, log2, nextPow2 } from './maths/misc/pow2.mjs';\nexport { squaredDistanceToLineSegment } from './maths/misc/squaredDistanceToLineSegment.mjs';\nexport { ObservablePoint } from './maths/point/ObservablePoint.mjs';\nexport { Point } from './maths/point/Point.mjs';\nexport { pointInTriangle } from './maths/point/pointInTriangle.mjs';\nexport { Circle } from './maths/shapes/Circle.mjs';\nexport { Ellipse } from './maths/shapes/Ellipse.mjs';\nexport { Polygon } from './maths/shapes/Polygon.mjs';\nexport { Rectangle } from './maths/shapes/Rectangle.mjs';\nexport { RoundedRectangle } from './maths/shapes/RoundedRectangle.mjs';\nexport { Triangle } from './maths/shapes/Triangle.mjs';\nexport { PrepareBase } from './prepare/PrepareBase.mjs';\nexport { PrepareQueue } from './prepare/PrepareQueue.mjs';\nexport { PrepareSystem } from './prepare/PrepareSystem.mjs';\nexport { PrepareUpload } from './prepare/PrepareUpload.mjs';\nexport { GlBatchAdaptor } from './rendering/batcher/gl/GlBatchAdaptor.mjs';\nexport { BatchGeometry } from './rendering/batcher/gpu/BatchGeometry.mjs';\nexport { generateGPULayout } from './rendering/batcher/gpu/generateGPULayout.mjs';\nexport { generateLayout } from './rendering/batcher/gpu/generateLayout.mjs';\nexport { getTextureBatchBindGroup } from './rendering/batcher/gpu/getTextureBatchBindGroup.mjs';\nexport { GpuBatchAdaptor } from './rendering/batcher/gpu/GpuBatchAdaptor.mjs';\nexport { Batch, Batcher } from './rendering/batcher/shared/Batcher.mjs';\nexport { BatcherPipe } from './rendering/batcher/shared/BatcherPipe.mjs';\nexport { BatchTextureArray } from './rendering/batcher/shared/BatchTextureArray.mjs';\nexport { MAX_TEXTURES } from './rendering/batcher/shared/const.mjs';\nexport { compileHighShaderGlProgram, compileHighShaderGpuProgram } from './rendering/high-shader/compileHighShaderToProgram.mjs';\nexport { compileHighShader, compileHighShaderGl } from './rendering/high-shader/compiler/compileHighShader.mjs';\nexport { addBits } from './rendering/high-shader/compiler/utils/addBits.mjs';\nexport { compileHooks, findHooksRx } from './rendering/high-shader/compiler/utils/compileHooks.mjs';\nexport { compileInputs } from './rendering/high-shader/compiler/utils/compileInputs.mjs';\nexport { compileOutputs } from './rendering/high-shader/compiler/utils/compileOutputs.mjs';\nexport { formatShader } from './rendering/high-shader/compiler/utils/formatShader.mjs';\nexport { injectBits } from './rendering/high-shader/compiler/utils/injectBits.mjs';\nexport { fragmentGPUTemplate, fragmentGlTemplate, vertexGPUTemplate, vertexGlTemplate } from './rendering/high-shader/defaultProgramTemplate.mjs';\nexport { colorBit, colorBitGl } from './rendering/high-shader/shader-bits/colorBit.mjs';\nexport { generateTextureBatchBit, generateTextureBatchBitGl } from './rendering/high-shader/shader-bits/generateTextureBatchBit.mjs';\nexport { globalUniformsBit, globalUniformsBitGl, globalUniformsUBOBitGl } from './rendering/high-shader/shader-bits/globalUniformsBit.mjs';\nexport { localUniformBit, localUniformBitGl, localUniformBitGroup2 } from './rendering/high-shader/shader-bits/localUniformBit.mjs';\nexport { roundPixelsBit, roundPixelsBitGl } from './rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nexport { textureBit, textureBitGl } from './rendering/high-shader/shader-bits/textureBit.mjs';\nexport { AlphaMask } from './rendering/mask/alpha/AlphaMask.mjs';\nexport { AlphaMaskPipe } from './rendering/mask/alpha/AlphaMaskPipe.mjs';\nexport { ColorMask } from './rendering/mask/color/ColorMask.mjs';\nexport { ColorMaskPipe } from './rendering/mask/color/ColorMaskPipe.mjs';\nexport { MaskEffectManager, MaskEffectManagerClass } from './rendering/mask/MaskEffectManager.mjs';\nexport { ScissorMask } from './rendering/mask/scissor/ScissorMask.mjs';\nexport { StencilMask } from './rendering/mask/stencil/StencilMask.mjs';\nexport { StencilMaskPipe } from './rendering/mask/stencil/StencilMaskPipe.mjs';\nexport { addMaskBounds } from './rendering/mask/utils/addMaskBounds.mjs';\nexport { addMaskLocalBounds, getMatrixRelativeToParent } from './rendering/mask/utils/addMaskLocalBounds.mjs';\nexport { autoDetectRenderer } from './rendering/renderers/autoDetectRenderer.mjs';\nexport { BUFFER_TYPE } from './rendering/renderers/gl/buffer/const.mjs';\nexport { GlBuffer } from './rendering/renderers/gl/buffer/GlBuffer.mjs';\nexport { GlBufferSystem } from './rendering/renderers/gl/buffer/GlBufferSystem.mjs';\nexport { CLEAR } from './rendering/renderers/gl/const.mjs';\nexport { GlContextSystem } from './rendering/renderers/gl/context/GlContextSystem.mjs';\nexport { GlGeometrySystem } from './rendering/renderers/gl/geometry/GlGeometrySystem.mjs';\nexport { getGlTypeFromFormat } from './rendering/renderers/gl/geometry/utils/getGlTypeFromFormat.mjs';\nexport { GlBackBufferSystem } from './rendering/renderers/gl/GlBackBufferSystem.mjs';\nexport { GlColorMaskSystem } from './rendering/renderers/gl/GlColorMaskSystem.mjs';\nexport { GlEncoderSystem } from './rendering/renderers/gl/GlEncoderSystem.mjs';\nexport { GlRenderTarget } from './rendering/renderers/gl/GlRenderTarget.mjs';\nexport { GlStencilSystem } from './rendering/renderers/gl/GlStencilSystem.mjs';\nexport { GlUboSystem } from './rendering/renderers/gl/GlUboSystem.mjs';\nexport { GlRenderTargetAdaptor } from './rendering/renderers/gl/renderTarget/GlRenderTargetAdaptor.mjs';\nexport { GlRenderTargetSystem } from './rendering/renderers/gl/renderTarget/GlRenderTargetSystem.mjs';\nexport { batchSamplersUniformGroup } from './rendering/renderers/gl/shader/batchSamplersUniformGroup.mjs';\nexport { generateShaderSyncCode } from './rendering/renderers/gl/shader/GenerateShaderSyncCode.mjs';\nexport { GlProgram } from './rendering/renderers/gl/shader/GlProgram.mjs';\nexport { GlProgramData, IGLUniformData } from './rendering/renderers/gl/shader/GlProgramData.mjs';\nexport { GlShaderSystem } from './rendering/renderers/gl/shader/GlShaderSystem.mjs';\nexport { GlUniformGroupSystem } from './rendering/renderers/gl/shader/GlUniformGroupSystem.mjs';\nexport { migrateFragmentFromV7toV8 } from './rendering/renderers/gl/shader/migrateFragmentFromV7toV8.mjs';\nexport { compileShader } from './rendering/renderers/gl/shader/program/compileShader.mjs';\nexport { defaultValue } from './rendering/renderers/gl/shader/program/defaultValue.mjs';\nexport { ensureAttributes } from './rendering/renderers/gl/shader/program/ensureAttributes.mjs';\nexport { extractAttributesFromGlProgram } from './rendering/renderers/gl/shader/program/extractAttributesFromGlProgram.mjs';\nexport { generateProgram } from './rendering/renderers/gl/shader/program/generateProgram.mjs';\nexport { getMaxFragmentPrecision } from './rendering/renderers/gl/shader/program/getMaxFragmentPrecision.mjs';\nexport { getTestContext } from './rendering/renderers/gl/shader/program/getTestContext.mjs';\nexport { getUboData } from './rendering/renderers/gl/shader/program/getUboData.mjs';\nexport { getUniformData } from './rendering/renderers/gl/shader/program/getUniformData.mjs';\nexport { logProgramError } from './rendering/renderers/gl/shader/program/logProgramError.mjs';\nexport { mapSize } from './rendering/renderers/gl/shader/program/mapSize.mjs';\nexport { mapGlToVertexFormat, mapType } from './rendering/renderers/gl/shader/program/mapType.mjs';\nexport { addProgramDefines } from './rendering/renderers/gl/shader/program/preprocessors/addProgramDefines.mjs';\nexport { ensurePrecision } from './rendering/renderers/gl/shader/program/preprocessors/ensurePrecision.mjs';\nexport { insertVersion } from './rendering/renderers/gl/shader/program/preprocessors/insertVersion.mjs';\nexport { setProgramName } from './rendering/renderers/gl/shader/program/preprocessors/setProgramName.mjs';\nexport { stripVersion } from './rendering/renderers/gl/shader/program/preprocessors/stripVersion.mjs';\nexport { WGSL_TO_STD40_SIZE, createUboElementsSTD40 } from './rendering/renderers/gl/shader/utils/createUboElementsSTD40.mjs';\nexport { createUboSyncFunctionSTD40 } from './rendering/renderers/gl/shader/utils/createUboSyncSTD40.mjs';\nexport { generateArraySyncSTD40 } from './rendering/renderers/gl/shader/utils/generateArraySyncSTD40.mjs';\nexport { generateUniformsSync } from './rendering/renderers/gl/shader/utils/generateUniformsSync.mjs';\nexport { UNIFORM_TO_ARRAY_SETTERS, UNIFORM_TO_SINGLE_SETTERS } from './rendering/renderers/gl/shader/utils/generateUniformsSyncTypes.mjs';\nexport { GlStateSystem } from './rendering/renderers/gl/state/GlStateSystem.mjs';\nexport { mapWebGLBlendModesToPixi } from './rendering/renderers/gl/state/mapWebGLBlendModesToPixi.mjs';\nexport { GL_FORMATS, GL_TARGETS, GL_TYPES, GL_WRAP_MODES } from './rendering/renderers/gl/texture/const.mjs';\nexport { GlTexture } from './rendering/renderers/gl/texture/GlTexture.mjs';\nexport { GlTextureSystem } from './rendering/renderers/gl/texture/GlTextureSystem.mjs';\nexport { glUploadBufferImageResource } from './rendering/renderers/gl/texture/uploaders/glUploadBufferImageResource.mjs';\nexport { glUploadCompressedTextureResource } from './rendering/renderers/gl/texture/uploaders/glUploadCompressedTextureResource.mjs';\nexport { glUploadImageResource } from './rendering/renderers/gl/texture/uploaders/glUploadImageResource.mjs';\nexport { glUploadVideoResource } from './rendering/renderers/gl/texture/uploaders/glUploadVideoResource.mjs';\nexport { applyStyleParams } from './rendering/renderers/gl/texture/utils/applyStyleParams.mjs';\nexport { getSupportedGlCompressedTextureFormats } from './rendering/renderers/gl/texture/utils/getSupportedGlCompressedTextureFormats.mjs';\nexport { mapFormatToGlFormat } from './rendering/renderers/gl/texture/utils/mapFormatToGlFormat.mjs';\nexport { mapFormatToGlInternalFormat } from './rendering/renderers/gl/texture/utils/mapFormatToGlInternalFormat.mjs';\nexport { mapFormatToGlType } from './rendering/renderers/gl/texture/utils/mapFormatToGlType.mjs';\nexport { compareModeToGlCompare, mipmapScaleModeToGlFilter, scaleModeToGlFilter, wrapModeToGlAddress } from './rendering/renderers/gl/texture/utils/pixiToGlMaps.mjs';\nexport { unpremultiplyAlpha } from './rendering/renderers/gl/texture/utils/unpremultiplyAlpha.mjs';\nexport { WebGLRenderer } from './rendering/renderers/gl/WebGLRenderer.mjs';\nexport { BindGroupSystem } from './rendering/renderers/gpu/BindGroupSystem.mjs';\nexport { GpuBufferSystem } from './rendering/renderers/gpu/buffer/GpuBufferSystem.mjs';\nexport { GpuReadBuffer } from './rendering/renderers/gpu/buffer/GpuReadBuffer.mjs';\nexport { UboBatch } from './rendering/renderers/gpu/buffer/UboBatch.mjs';\nexport { GpuColorMaskSystem } from './rendering/renderers/gpu/GpuColorMaskSystem.mjs';\nexport { GpuDeviceSystem } from './rendering/renderers/gpu/GpuDeviceSystem.mjs';\nexport { GpuEncoderSystem } from './rendering/renderers/gpu/GpuEncoderSystem.mjs';\nexport { GpuStencilSystem } from './rendering/renderers/gpu/GpuStencilSystem.mjs';\nexport { GpuUboSystem } from './rendering/renderers/gpu/GpuUboSystem.mjs';\nexport { GpuUniformBatchPipe } from './rendering/renderers/gpu/GpuUniformBatchPipe.mjs';\nexport { PipelineSystem } from './rendering/renderers/gpu/pipeline/PipelineSystem.mjs';\nexport { calculateProjection } from './rendering/renderers/gpu/renderTarget/calculateProjection.mjs';\nexport { GpuRenderTarget } from './rendering/renderers/gpu/renderTarget/GpuRenderTarget.mjs';\nexport { GpuRenderTargetAdaptor } from './rendering/renderers/gpu/renderTarget/GpuRenderTargetAdaptor.mjs';\nexport { GpuRenderTargetSystem } from './rendering/renderers/gpu/renderTarget/GpuRenderTargetSystem.mjs';\nexport { BindGroup } from './rendering/renderers/gpu/shader/BindGroup.mjs';\nexport { GpuProgram } from './rendering/renderers/gpu/shader/GpuProgram.mjs';\nexport { GpuShaderSystem } from './rendering/renderers/gpu/shader/GpuShaderSystem.mjs';\nexport { WGSL_ALIGN_SIZE_DATA, createUboElementsWGSL } from './rendering/renderers/gpu/shader/utils/createUboElementsWGSL.mjs';\nexport { createUboSyncFunctionWGSL } from './rendering/renderers/gpu/shader/utils/createUboSyncFunctionWGSL.mjs';\nexport { extractAttributesFromGpuProgram } from './rendering/renderers/gpu/shader/utils/extractAttributesFromGpuProgram.mjs';\nexport { extractStructAndGroups } from './rendering/renderers/gpu/shader/utils/extractStructAndGroups.mjs';\nexport { generateArraySyncWGSL } from './rendering/renderers/gpu/shader/utils/generateArraySyncWGSL.mjs';\nexport { generateGpuLayoutGroups } from './rendering/renderers/gpu/shader/utils/generateGpuLayoutGroups.mjs';\nexport { generateLayoutHash } from './rendering/renderers/gpu/shader/utils/generateLayoutHash.mjs';\nexport { removeStructAndGroupDuplicates } from './rendering/renderers/gpu/shader/utils/removeStructAndGroupDuplicates.mjs';\nexport { GpuBlendModesToPixi } from './rendering/renderers/gpu/state/GpuBlendModesToPixi.mjs';\nexport { GpuStateSystem } from './rendering/renderers/gpu/state/GpuStateSystem.mjs';\nexport { GpuStencilModesToPixi } from './rendering/renderers/gpu/state/GpuStencilModesToPixi.mjs';\nexport { GpuTextureSystem } from './rendering/renderers/gpu/texture/GpuTextureSystem.mjs';\nexport { gpuUploadBufferImageResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadBufferImageResource.mjs';\nexport { blockDataMap, gpuUploadCompressedTextureResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadCompressedTextureResource.mjs';\nexport { gpuUploadImageResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadImageSource.mjs';\nexport { gpuUploadVideoResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadVideoSource.mjs';\nexport { getSupportedGPUCompressedTextureFormats } from './rendering/renderers/gpu/texture/utils/getSupportedGPUCompressedTextureFormats.mjs';\nexport { GpuMipmapGenerator } from './rendering/renderers/gpu/texture/utils/GpuMipmapGenerator.mjs';\nexport { WebGPURenderer } from './rendering/renderers/gpu/WebGPURenderer.mjs';\nexport { BackgroundSystem } from './rendering/renderers/shared/background/BackgroundSystem.mjs';\nexport { BlendModePipe } from './rendering/renderers/shared/blendModes/BlendModePipe.mjs';\nexport { Buffer } from './rendering/renderers/shared/buffer/Buffer.mjs';\nexport { BufferResource } from './rendering/renderers/shared/buffer/BufferResource.mjs';\nexport { BufferUsage } from './rendering/renderers/shared/buffer/const.mjs';\nexport { fastCopy } from './rendering/renderers/shared/buffer/utils/fastCopy.mjs';\nexport { ExtractSystem } from './rendering/renderers/shared/extract/ExtractSystem.mjs';\nexport { GenerateTextureSystem } from './rendering/renderers/shared/extract/GenerateTextureSystem.mjs';\nexport { DRAW_MODES } from './rendering/renderers/shared/geometry/const.mjs';\nexport { Geometry } from './rendering/renderers/shared/geometry/Geometry.mjs';\nexport { buildSimpleUvs, buildUvs } from './rendering/renderers/shared/geometry/utils/buildUvs.mjs';\nexport { ensureIsBuffer } from './rendering/renderers/shared/geometry/utils/ensureIsBuffer.mjs';\nexport { getAttributeInfoFromFormat } from './rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat.mjs';\nexport { getGeometryBounds } from './rendering/renderers/shared/geometry/utils/getGeometryBounds.mjs';\nexport { transformVertices } from './rendering/renderers/shared/geometry/utils/transformVertices.mjs';\nexport { InstructionSet } from './rendering/renderers/shared/instructions/InstructionSet.mjs';\nexport { GlobalUniformSystem } from './rendering/renderers/shared/renderTarget/GlobalUniformSystem.mjs';\nexport { isRenderingToScreen } from './rendering/renderers/shared/renderTarget/isRenderingToScreen.mjs';\nexport { RenderTarget } from './rendering/renderers/shared/renderTarget/RenderTarget.mjs';\nexport { RenderTargetSystem } from './rendering/renderers/shared/renderTarget/RenderTargetSystem.mjs';\nexport { viewportFromFrame } from './rendering/renderers/shared/renderTarget/viewportFromFrame.mjs';\nexport { ShaderStage } from './rendering/renderers/shared/shader/const.mjs';\nexport { Shader } from './rendering/renderers/shared/shader/Shader.mjs';\nexport { UboSystem } from './rendering/renderers/shared/shader/UboSystem.mjs';\nexport { UniformGroup } from './rendering/renderers/shared/shader/UniformGroup.mjs';\nexport { createUboSyncFunction } from './rendering/renderers/shared/shader/utils/createUboSyncFunction.mjs';\nexport { getDefaultUniformValue } from './rendering/renderers/shared/shader/utils/getDefaultUniformValue.mjs';\nexport { uboSyncFunctionsSTD40, uboSyncFunctionsWGSL } from './rendering/renderers/shared/shader/utils/uboSyncFunctions.mjs';\nexport { uniformParsers } from './rendering/renderers/shared/shader/utils/uniformParsers.mjs';\nexport { HelloSystem } from './rendering/renderers/shared/startup/HelloSystem.mjs';\nexport { BLEND_TO_NPM, STENCIL_MODES } from './rendering/renderers/shared/state/const.mjs';\nexport { getAdjustedBlendModeBlend } from './rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nexport { State } from './rendering/renderers/shared/state/State.mjs';\nexport { AbstractRenderer } from './rendering/renderers/shared/system/AbstractRenderer.mjs';\nexport { SharedRenderPipes, SharedSystems } from './rendering/renderers/shared/system/SharedSystems.mjs';\nexport { SystemRunner } from './rendering/renderers/shared/system/SystemRunner.mjs';\nexport { CanvasPool, CanvasPoolClass } from './rendering/renderers/shared/texture/CanvasPool.mjs';\nexport { DEPRECATED_SCALE_MODES, DEPRECATED_WRAP_MODES, MSAA_QUALITY, SCALE_MODES, WRAP_MODES } from './rendering/renderers/shared/texture/const.mjs';\nexport { RenderTexture } from './rendering/renderers/shared/texture/RenderTexture.mjs';\nexport { BufferImageSource } from './rendering/renderers/shared/texture/sources/BufferSource.mjs';\nexport { CanvasSource } from './rendering/renderers/shared/texture/sources/CanvasSource.mjs';\nexport { CompressedSource } from './rendering/renderers/shared/texture/sources/CompressedSource.mjs';\nexport { ImageSource } from './rendering/renderers/shared/texture/sources/ImageSource.mjs';\nexport { TextureSource } from './rendering/renderers/shared/texture/sources/TextureSource.mjs';\nexport { VideoSource } from './rendering/renderers/shared/texture/sources/VideoSource.mjs';\nexport { Texture } from './rendering/renderers/shared/texture/Texture.mjs';\nexport { TextureGCSystem } from './rendering/renderers/shared/texture/TextureGCSystem.mjs';\nexport { TextureMatrix } from './rendering/renderers/shared/texture/TextureMatrix.mjs';\nexport { TexturePool, TexturePoolClass } from './rendering/renderers/shared/texture/TexturePool.mjs';\nexport { TextureStyle } from './rendering/renderers/shared/texture/TextureStyle.mjs';\nexport { TextureUvs } from './rendering/renderers/shared/texture/TextureUvs.mjs';\nexport { generateUID } from './rendering/renderers/shared/texture/utils/generateUID.mjs';\nexport { getCanvasTexture, hasCachedCanvasTexture } from './rendering/renderers/shared/texture/utils/getCanvasTexture.mjs';\nexport { getSupportedCompressedTextureFormats } from './rendering/renderers/shared/texture/utils/getSupportedCompressedTextureFormats.mjs';\nexport { getSupportedTextureFormats, nonCompressedFormats } from './rendering/renderers/shared/texture/utils/getSupportedTextureFormats.mjs';\nexport { autoDetectSource, resourceToTexture, textureFrom } from './rendering/renderers/shared/texture/utils/textureFrom.mjs';\nexport { createIdFromString } from './rendering/renderers/shared/utils/createIdFromString.mjs';\nexport { parseFunctionBody } from './rendering/renderers/shared/utils/parseFunctionBody.mjs';\nexport { ViewSystem } from './rendering/renderers/shared/view/ViewSystem.mjs';\nexport { RendererType } from './rendering/renderers/types.mjs';\nexport { Bounds } from './scene/container/bounds/Bounds.mjs';\nexport { _getGlobalBoundsRecursive, getFastGlobalBounds } from './scene/container/bounds/getFastGlobalBounds.mjs';\nexport { _getGlobalBounds, getGlobalBounds, updateTransformBackwards } from './scene/container/bounds/getGlobalBounds.mjs';\nexport { getLocalBounds, getParent } from './scene/container/bounds/getLocalBounds.mjs';\nexport { getGlobalRenderableBounds } from './scene/container/bounds/getRenderableBounds.mjs';\nexport { boundsPool, matrixPool } from './scene/container/bounds/utils/matrixAndBoundsPool.mjs';\nexport { childrenHelperMixin } from './scene/container/container-mixins/childrenHelperMixin.mjs';\nexport { effectsMixin } from './scene/container/container-mixins/effectsMixin.mjs';\nexport { findMixin } from './scene/container/container-mixins/findMixin.mjs';\nexport { measureMixin } from './scene/container/container-mixins/measureMixin.mjs';\nexport { onRenderMixin } from './scene/container/container-mixins/onRenderMixin.mjs';\nexport { sortMixin } from './scene/container/container-mixins/sortMixin.mjs';\nexport { toLocalGlobalMixin } from './scene/container/container-mixins/toLocalGlobalMixin.mjs';\nexport { Container, UPDATE_BLEND, UPDATE_COLOR, UPDATE_TRANSFORM, UPDATE_VISIBLE } from './scene/container/Container.mjs';\nexport { CustomRenderPipe } from './scene/container/CustomRenderPipe.mjs';\nexport { RenderContainer } from './scene/container/RenderContainer.mjs';\nexport { RenderGroup } from './scene/container/RenderGroup.mjs';\nexport { RenderGroupPipe } from './scene/container/RenderGroupPipe.mjs';\nexport { RenderGroupSystem } from './scene/container/RenderGroupSystem.mjs';\nexport { assignWithIgnore } from './scene/container/utils/assignWithIgnore.mjs';\nexport { buildInstructions, collectAllRenderables } from './scene/container/utils/buildInstructions.mjs';\nexport { checkChildrenDidChange } from './scene/container/utils/checkChildrenDidChange.mjs';\nexport { collectRenderGroups } from './scene/container/utils/collectRenderGroups.mjs';\nexport { definedProps } from './scene/container/utils/definedProps.mjs';\nexport { executeInstructions } from './scene/container/utils/executeInstructions.mjs';\nexport { mixColors, mixStandardAnd32BitColors } from './scene/container/utils/mixColors.mjs';\nexport { mixHexColors } from './scene/container/utils/mixHexColors.mjs';\nexport { multiplyHexColors } from './scene/container/utils/multiplyHexColors.mjs';\nexport { updateLocalTransform } from './scene/container/utils/updateLocalTransform.mjs';\nexport { updateRenderGroupTransform, updateRenderGroupTransforms, updateTransformAndChildren } from './scene/container/utils/updateRenderGroupTransforms.mjs';\nexport { updateWorldTransform } from './scene/container/utils/updateWorldTransform.mjs';\nexport { validateRenderables } from './scene/container/utils/validateRenderables.mjs';\nexport { GlGraphicsAdaptor } from './scene/graphics/gl/GlGraphicsAdaptor.mjs';\nexport { color32BitToUniform, colorToUniform } from './scene/graphics/gpu/colorToUniform.mjs';\nexport { GpuGraphicsAdaptor } from './scene/graphics/gpu/GpuGraphicsAdaptor.mjs';\nexport { BatchableGraphics } from './scene/graphics/shared/BatchableGraphics.mjs';\nexport { buildAdaptiveBezier } from './scene/graphics/shared/buildCommands/buildAdaptiveBezier.mjs';\nexport { buildAdaptiveQuadratic } from './scene/graphics/shared/buildCommands/buildAdaptiveQuadratic.mjs';\nexport { buildArc } from './scene/graphics/shared/buildCommands/buildArc.mjs';\nexport { buildArcTo } from './scene/graphics/shared/buildCommands/buildArcTo.mjs';\nexport { buildArcToSvg } from './scene/graphics/shared/buildCommands/buildArcToSvg.mjs';\nexport { buildCircle } from './scene/graphics/shared/buildCommands/buildCircle.mjs';\nexport { buildLine } from './scene/graphics/shared/buildCommands/buildLine.mjs';\nexport { buildPolygon } from './scene/graphics/shared/buildCommands/buildPolygon.mjs';\nexport { buildRectangle } from './scene/graphics/shared/buildCommands/buildRectangle.mjs';\nexport { buildTriangle } from './scene/graphics/shared/buildCommands/buildTriangle.mjs';\nexport { closePointEps, curveEps } from './scene/graphics/shared/const.mjs';\nexport { FillGradient } from './scene/graphics/shared/fill/FillGradient.mjs';\nexport { FillPattern } from './scene/graphics/shared/fill/FillPattern.mjs';\nexport { Graphics } from './scene/graphics/shared/Graphics.mjs';\nexport { GraphicsContext } from './scene/graphics/shared/GraphicsContext.mjs';\nexport { GpuGraphicsContext, GraphicsContextRenderData, GraphicsContextSystem } from './scene/graphics/shared/GraphicsContextSystem.mjs';\nexport { GraphicsPipe } from './scene/graphics/shared/GraphicsPipe.mjs';\nexport { GraphicsPath } from './scene/graphics/shared/path/GraphicsPath.mjs';\nexport { roundedShapeArc, roundedShapeQuadraticCurve } from './scene/graphics/shared/path/roundShape.mjs';\nexport { ShapePath } from './scene/graphics/shared/path/ShapePath.mjs';\nexport { SVGParser } from './scene/graphics/shared/svg/SVGParser.mjs';\nexport { SVGToGraphicsPath } from './scene/graphics/shared/svg/SVGToGraphicsPath.mjs';\nexport { buildContextBatches } from './scene/graphics/shared/utils/buildContextBatches.mjs';\nexport { buildGeometryFromPath } from './scene/graphics/shared/utils/buildGeometryFromPath.mjs';\nexport { convertFillInputToFillStyle } from './scene/graphics/shared/utils/convertFillInputToFillStyle.mjs';\nexport { getOrientationOfPoints } from './scene/graphics/shared/utils/getOrientationOfPoints.mjs';\nexport { triangulateWithHoles } from './scene/graphics/shared/utils/triangulateWithHoles.mjs';\nexport { MeshPlane } from './scene/mesh-plane/MeshPlane.mjs';\nexport { PlaneGeometry } from './scene/mesh-plane/PlaneGeometry.mjs';\nexport { MeshRope } from './scene/mesh-simple/MeshRope.mjs';\nexport { MeshSimple } from './scene/mesh-simple/MeshSimple.mjs';\nexport { RopeGeometry } from './scene/mesh-simple/RopeGeometry.mjs';\nexport { GlMeshAdaptor } from './scene/mesh/gl/GlMeshAdaptor.mjs';\nexport { GpuMeshAdapter } from './scene/mesh/gpu/GpuMeshAdapter.mjs';\nexport { BatchableMesh } from './scene/mesh/shared/BatchableMesh.mjs';\nexport { getTextureDefaultMatrix } from './scene/mesh/shared/getTextureDefaultMatrix.mjs';\nexport { Mesh } from './scene/mesh/shared/Mesh.mjs';\nexport { MeshGeometry } from './scene/mesh/shared/MeshGeometry.mjs';\nexport { MeshPipe } from './scene/mesh/shared/MeshPipe.mjs';\nexport { AnimatedSprite } from './scene/sprite-animated/AnimatedSprite.mjs';\nexport { NineSliceGeometry } from './scene/sprite-nine-slice/NineSliceGeometry.mjs';\nexport { NineSlicePlane, NineSliceSprite } from './scene/sprite-nine-slice/NineSliceSprite.mjs';\nexport { NineSliceSpritePipe } from './scene/sprite-nine-slice/NineSliceSpritePipe.mjs';\nexport { tilingBit, tilingBitGl } from './scene/sprite-tiling/shader/tilingBit.mjs';\nexport { TilingSpriteShader } from './scene/sprite-tiling/shader/TilingSpriteShader.mjs';\nexport { TilingSprite } from './scene/sprite-tiling/TilingSprite.mjs';\nexport { TilingSpritePipe } from './scene/sprite-tiling/TilingSpritePipe.mjs';\nexport { applyMatrix } from './scene/sprite-tiling/utils/applyMatrix.mjs';\nexport { QuadGeometry } from './scene/sprite-tiling/utils/QuadGeometry.mjs';\nexport { setPositions } from './scene/sprite-tiling/utils/setPositions.mjs';\nexport { setUvs } from './scene/sprite-tiling/utils/setUvs.mjs';\nexport { BatchableSprite } from './scene/sprite/BatchableSprite.mjs';\nexport { Sprite } from './scene/sprite/Sprite.mjs';\nexport { SpritePipe } from './scene/sprite/SpritePipe.mjs';\nexport { AbstractBitmapFont } from './scene/text-bitmap/AbstractBitmapFont.mjs';\nexport { bitmapFontTextParser } from './scene/text-bitmap/asset/bitmapFontTextParser.mjs';\nexport { bitmapFontXMLParser } from './scene/text-bitmap/asset/bitmapFontXMLParser.mjs';\nexport { bitmapFontXMLStringParser } from './scene/text-bitmap/asset/bitmapFontXMLStringParser.mjs';\nexport { bitmapFontCachePlugin, loadBitmapFont } from './scene/text-bitmap/asset/loadBitmapFont.mjs';\nexport { BitmapFont } from './scene/text-bitmap/BitmapFont.mjs';\nexport { BitmapFontManager } from './scene/text-bitmap/BitmapFontManager.mjs';\nexport { BitmapText } from './scene/text-bitmap/BitmapText.mjs';\nexport { BitmapTextPipe } from './scene/text-bitmap/BitmapTextPipe.mjs';\nexport { DynamicBitmapFont } from './scene/text-bitmap/DynamicBitmapFont.mjs';\nexport { getBitmapTextLayout } from './scene/text-bitmap/utils/getBitmapTextLayout.mjs';\nexport { resolveCharacters } from './scene/text-bitmap/utils/resolveCharacters.mjs';\nexport { HTMLText } from './scene/text-html/HTMLText.mjs';\nexport { HTMLTextPipe } from './scene/text-html/HTMLTextPipe.mjs';\nexport { HTMLTextRenderData, nssvg, nsxhtml } from './scene/text-html/HTMLTextRenderData.mjs';\nexport { HTMLTextStyle } from './scene/text-html/HtmlTextStyle.mjs';\nexport { HTMLTextSystem } from './scene/text-html/HTMLTextSystem.mjs';\nexport { extractFontFamilies } from './scene/text-html/utils/extractFontFamilies.mjs';\nexport { FontStylePromiseCache, getFontCss } from './scene/text-html/utils/getFontCss.mjs';\nexport { getSVGUrl } from './scene/text-html/utils/getSVGUrl.mjs';\nexport { getTemporaryCanvasFromImage } from './scene/text-html/utils/getTemporaryCanvasFromImage.mjs';\nexport { loadFontAsBase64 } from './scene/text-html/utils/loadFontAsBase64.mjs';\nexport { loadFontCSS } from './scene/text-html/utils/loadFontCSS.mjs';\nexport { loadSVGImage } from './scene/text-html/utils/loadSVGImage.mjs';\nexport { measureHtmlText } from './scene/text-html/utils/measureHtmlText.mjs';\nexport { textStyleToCSS } from './scene/text-html/utils/textStyleToCSS.mjs';\nexport { AbstractText, ensureOptions } from './scene/text/AbstractText.mjs';\nexport { CanvasTextMetrics } from './scene/text/canvas/CanvasTextMetrics.mjs';\nexport { CanvasTextPipe } from './scene/text/canvas/CanvasTextPipe.mjs';\nexport { CanvasTextSystem } from './scene/text/canvas/CanvasTextSystem.mjs';\nexport { fontStringFromTextStyle } from './scene/text/canvas/utils/fontStringFromTextStyle.mjs';\nexport { getCanvasFillStyle } from './scene/text/canvas/utils/getCanvasFillStyle.mjs';\nexport { SdfShader } from './scene/text/sdfShader/SdfShader.mjs';\nexport { localUniformMSDFBit, localUniformMSDFBitGl } from './scene/text/sdfShader/shader-bits/localUniformMSDFBit.mjs';\nexport { mSDFBit, mSDFBitGl } from './scene/text/sdfShader/shader-bits/mSDFBit.mjs';\nexport { Text } from './scene/text/Text.mjs';\nexport { TextStyle } from './scene/text/TextStyle.mjs';\nexport { ensureTextStyle } from './scene/text/utils/ensureTextStyle.mjs';\nexport { generateTextStyleKey } from './scene/text/utils/generateTextStyleKey.mjs';\nexport { getPo2TextureFromSource } from './scene/text/utils/getPo2TextureFromSource.mjs';\nexport { Spritesheet } from './spritesheet/Spritesheet.mjs';\nexport { spritesheetAsset } from './spritesheet/spritesheetAsset.mjs';\nexport { UPDATE_PRIORITY } from './ticker/const.mjs';\nexport { Ticker } from './ticker/Ticker.mjs';\nexport { TickerListener } from './ticker/TickerListener.mjs';\nexport { detectVideoAlphaMode } from './utils/browser/detectVideoAlphaMode.mjs';\nexport { isMobile } from './utils/browser/isMobile.mjs';\nexport { isSafari } from './utils/browser/isSafari.mjs';\nexport { isWebGLSupported } from './utils/browser/isWebGLSupported.mjs';\nexport { isWebGPUSupported } from './utils/browser/isWebGPUSupported.mjs';\nexport { unsafeEvalSupported } from './utils/browser/unsafeEvalSupported.mjs';\nexport { getCanvasBoundingBox } from './utils/canvas/getCanvasBoundingBox.mjs';\nexport { DATA_URI } from './utils/const.mjs';\nexport { default as EventEmitter } from 'eventemitter3';\nexport { removeItems } from './utils/data/removeItems.mjs';\nexport { resetUids, uid } from './utils/data/uid.mjs';\nexport { updateQuadBounds } from './utils/data/updateQuadBounds.mjs';\nexport { ViewableBuffer } from './utils/data/ViewableBuffer.mjs';\nexport { deprecation, v8_0_0 } from './utils/logging/deprecation.mjs';\nexport { logDebugTexture } from './utils/logging/logDebugTexture.mjs';\nexport { logRenderGroupScene, logScene } from './utils/logging/logScene.mjs';\nexport { warn } from './utils/logging/warn.mjs';\nexport { NOOP } from './utils/misc/NOOP.mjs';\nexport { Transform } from './utils/misc/Transform.mjs';\nexport { getResolutionOfUrl } from './utils/network/getResolutionOfUrl.mjs';\nexport { path } from './utils/path.mjs';\nexport { Pool } from './utils/pool/Pool.mjs';\nexport { BigPool, PoolGroupClass } from './utils/pool/PoolGroup.mjs';\nexport { VERSION, sayHello } from './utils/sayHello.mjs';\nexport { default as earcut } from 'earcut';\n\n\"use strict\";\nextensions.add(browserExt, webworkerExt);\n\nexport { browserExt, extensions, webworkerExt };\n//# sourceMappingURL=index.mjs.map\n","\nexport default function quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) swap(arr, left, right);\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) i++;\n            while (compare(arr[j], t) > 0) j--;\n        }\n\n        if (compare(arr[left], t) === 0) swap(arr, left, j);\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n","import quickselect from 'quickselect';\n\nexport default class RBush {\n    constructor(maxEntries = 9) {\n        // max entries in a node is 9 by default; min node fill is 40% for best performance\n        this._maxEntries = Math.max(4, maxEntries);\n        this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n        this.clear();\n    }\n\n    all() {\n        return this._all(this.data, []);\n    }\n\n    search(bbox) {\n        let node = this.data;\n        const result = [];\n\n        if (!intersects(bbox, node)) return result;\n\n        const toBBox = this.toBBox;\n        const nodesToSearch = [];\n\n        while (node) {\n            for (let i = 0; i < node.children.length; i++) {\n                const child = node.children[i];\n                const childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf) result.push(child);\n                    else if (contains(bbox, childBBox)) this._all(child, result);\n                    else nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return result;\n    }\n\n    collides(bbox) {\n        let node = this.data;\n\n        if (!intersects(bbox, node)) return false;\n\n        const nodesToSearch = [];\n        while (node) {\n            for (let i = 0; i < node.children.length; i++) {\n                const child = node.children[i];\n                const childBBox = node.leaf ? this.toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf || contains(bbox, childBBox)) return true;\n                    nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return false;\n    }\n\n    load(data) {\n        if (!(data && data.length)) return this;\n\n        if (data.length < this._minEntries) {\n            for (let i = 0; i < data.length; i++) {\n                this.insert(data[i]);\n            }\n            return this;\n        }\n\n        // recursively build the tree with the given data from scratch using OMT algorithm\n        let node = this._build(data.slice(), 0, data.length - 1, 0);\n\n        if (!this.data.children.length) {\n            // save as is if tree is empty\n            this.data = node;\n\n        } else if (this.data.height === node.height) {\n            // split root if trees have the same height\n            this._splitRoot(this.data, node);\n\n        } else {\n            if (this.data.height < node.height) {\n                // swap trees if inserted one is bigger\n                const tmpNode = this.data;\n                this.data = node;\n                node = tmpNode;\n            }\n\n            // insert the small tree into the large tree at appropriate level\n            this._insert(node, this.data.height - node.height - 1, true);\n        }\n\n        return this;\n    }\n\n    insert(item) {\n        if (item) this._insert(item, this.data.height - 1);\n        return this;\n    }\n\n    clear() {\n        this.data = createNode([]);\n        return this;\n    }\n\n    remove(item, equalsFn) {\n        if (!item) return this;\n\n        let node = this.data;\n        const bbox = this.toBBox(item);\n        const path = [];\n        const indexes = [];\n        let i, parent, goingUp;\n\n        // depth-first iterative tree traversal\n        while (node || path.length) {\n\n            if (!node) { // go up\n                node = path.pop();\n                parent = path[path.length - 1];\n                i = indexes.pop();\n                goingUp = true;\n            }\n\n            if (node.leaf) { // check current node\n                const index = findItem(item, node.children, equalsFn);\n\n                if (index !== -1) {\n                    // item found, remove the item and condense tree upwards\n                    node.children.splice(index, 1);\n                    path.push(node);\n                    this._condense(path);\n                    return this;\n                }\n            }\n\n            if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n                path.push(node);\n                indexes.push(i);\n                i = 0;\n                parent = node;\n                node = node.children[0];\n\n            } else if (parent) { // go right\n                i++;\n                node = parent.children[i];\n                goingUp = false;\n\n            } else node = null; // nothing found\n        }\n\n        return this;\n    }\n\n    toBBox(item) { return item; }\n\n    compareMinX(a, b) { return a.minX - b.minX; }\n    compareMinY(a, b) { return a.minY - b.minY; }\n\n    toJSON() { return this.data; }\n\n    fromJSON(data) {\n        this.data = data;\n        return this;\n    }\n\n    _all(node, result) {\n        const nodesToSearch = [];\n        while (node) {\n            if (node.leaf) result.push(...node.children);\n            else nodesToSearch.push(...node.children);\n\n            node = nodesToSearch.pop();\n        }\n        return result;\n    }\n\n    _build(items, left, right, height) {\n\n        const N = right - left + 1;\n        let M = this._maxEntries;\n        let node;\n\n        if (N <= M) {\n            // reached leaf level; return leaf\n            node = createNode(items.slice(left, right + 1));\n            calcBBox(node, this.toBBox);\n            return node;\n        }\n\n        if (!height) {\n            // target height of the bulk-loaded tree\n            height = Math.ceil(Math.log(N) / Math.log(M));\n\n            // target number of root entries to maximize storage utilization\n            M = Math.ceil(N / Math.pow(M, height - 1));\n        }\n\n        node = createNode([]);\n        node.leaf = false;\n        node.height = height;\n\n        // split the items into M mostly square tiles\n\n        const N2 = Math.ceil(N / M);\n        const N1 = N2 * Math.ceil(Math.sqrt(M));\n\n        multiSelect(items, left, right, N1, this.compareMinX);\n\n        for (let i = left; i <= right; i += N1) {\n\n            const right2 = Math.min(i + N1 - 1, right);\n\n            multiSelect(items, i, right2, N2, this.compareMinY);\n\n            for (let j = i; j <= right2; j += N2) {\n\n                const right3 = Math.min(j + N2 - 1, right2);\n\n                // pack each entry recursively\n                node.children.push(this._build(items, j, right3, height - 1));\n            }\n        }\n\n        calcBBox(node, this.toBBox);\n\n        return node;\n    }\n\n    _chooseSubtree(bbox, node, level, path) {\n        while (true) {\n            path.push(node);\n\n            if (node.leaf || path.length - 1 === level) break;\n\n            let minArea = Infinity;\n            let minEnlargement = Infinity;\n            let targetNode;\n\n            for (let i = 0; i < node.children.length; i++) {\n                const child = node.children[i];\n                const area = bboxArea(child);\n                const enlargement = enlargedArea(bbox, child) - area;\n\n                // choose entry with the least area enlargement\n                if (enlargement < minEnlargement) {\n                    minEnlargement = enlargement;\n                    minArea = area < minArea ? area : minArea;\n                    targetNode = child;\n\n                } else if (enlargement === minEnlargement) {\n                    // otherwise choose one with the smallest area\n                    if (area < minArea) {\n                        minArea = area;\n                        targetNode = child;\n                    }\n                }\n            }\n\n            node = targetNode || node.children[0];\n        }\n\n        return node;\n    }\n\n    _insert(item, level, isNode) {\n        const bbox = isNode ? item : this.toBBox(item);\n        const insertPath = [];\n\n        // find the best node for accommodating the item, saving all nodes along the path too\n        const node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n        // put the item into the node\n        node.children.push(item);\n        extend(node, bbox);\n\n        // split on node overflow; propagate upwards if necessary\n        while (level >= 0) {\n            if (insertPath[level].children.length > this._maxEntries) {\n                this._split(insertPath, level);\n                level--;\n            } else break;\n        }\n\n        // adjust bboxes along the insertion path\n        this._adjustParentBBoxes(bbox, insertPath, level);\n    }\n\n    // split overflowed node into two\n    _split(insertPath, level) {\n        const node = insertPath[level];\n        const M = node.children.length;\n        const m = this._minEntries;\n\n        this._chooseSplitAxis(node, m, M);\n\n        const splitIndex = this._chooseSplitIndex(node, m, M);\n\n        const newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n        newNode.height = node.height;\n        newNode.leaf = node.leaf;\n\n        calcBBox(node, this.toBBox);\n        calcBBox(newNode, this.toBBox);\n\n        if (level) insertPath[level - 1].children.push(newNode);\n        else this._splitRoot(node, newNode);\n    }\n\n    _splitRoot(node, newNode) {\n        // split root node\n        this.data = createNode([node, newNode]);\n        this.data.height = node.height + 1;\n        this.data.leaf = false;\n        calcBBox(this.data, this.toBBox);\n    }\n\n    _chooseSplitIndex(node, m, M) {\n        let index;\n        let minOverlap = Infinity;\n        let minArea = Infinity;\n\n        for (let i = m; i <= M - m; i++) {\n            const bbox1 = distBBox(node, 0, i, this.toBBox);\n            const bbox2 = distBBox(node, i, M, this.toBBox);\n\n            const overlap = intersectionArea(bbox1, bbox2);\n            const area = bboxArea(bbox1) + bboxArea(bbox2);\n\n            // choose distribution with minimum overlap\n            if (overlap < minOverlap) {\n                minOverlap = overlap;\n                index = i;\n\n                minArea = area < minArea ? area : minArea;\n\n            } else if (overlap === minOverlap) {\n                // otherwise choose distribution with minimum area\n                if (area < minArea) {\n                    minArea = area;\n                    index = i;\n                }\n            }\n        }\n\n        return index || M - m;\n    }\n\n    // sorts node children by the best axis for split\n    _chooseSplitAxis(node, m, M) {\n        const compareMinX = node.leaf ? this.compareMinX : compareNodeMinX;\n        const compareMinY = node.leaf ? this.compareMinY : compareNodeMinY;\n        const xMargin = this._allDistMargin(node, m, M, compareMinX);\n        const yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n        // if total distributions margin value is minimal for x, sort by minX,\n        // otherwise it's already sorted by minY\n        if (xMargin < yMargin) node.children.sort(compareMinX);\n    }\n\n    // total margin of all possible split distributions where each node is at least m full\n    _allDistMargin(node, m, M, compare) {\n        node.children.sort(compare);\n\n        const toBBox = this.toBBox;\n        const leftBBox = distBBox(node, 0, m, toBBox);\n        const rightBBox = distBBox(node, M - m, M, toBBox);\n        let margin = bboxMargin(leftBBox) + bboxMargin(rightBBox);\n\n        for (let i = m; i < M - m; i++) {\n            const child = node.children[i];\n            extend(leftBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(leftBBox);\n        }\n\n        for (let i = M - m - 1; i >= m; i--) {\n            const child = node.children[i];\n            extend(rightBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(rightBBox);\n        }\n\n        return margin;\n    }\n\n    _adjustParentBBoxes(bbox, path, level) {\n        // adjust bboxes along the given tree path\n        for (let i = level; i >= 0; i--) {\n            extend(path[i], bbox);\n        }\n    }\n\n    _condense(path) {\n        // go through the path, removing empty nodes and updating bboxes\n        for (let i = path.length - 1, siblings; i >= 0; i--) {\n            if (path[i].children.length === 0) {\n                if (i > 0) {\n                    siblings = path[i - 1].children;\n                    siblings.splice(siblings.indexOf(path[i]), 1);\n\n                } else this.clear();\n\n            } else calcBBox(path[i], this.toBBox);\n        }\n    }\n}\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) return items.indexOf(item);\n\n    for (let i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) return i;\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) destNode = createNode(null);\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (let i = k; i < p; i++) {\n        const child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    const minX = Math.max(a.minX, b.minX);\n    const minY = Math.max(a.minY, b.minY);\n    const maxX = Math.min(a.maxX, b.maxX);\n    const maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    const stack = [left, right];\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) continue;\n\n        const mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n","import * as PIXI from 'pixi.js';\nimport RBush from 'rbush'\nimport OpenSeadragon from 'openseadragon';\nimport { ShapeType } from '@annotorious/annotorious';\nimport type { AnnotationState, DrawingStyle, DrawingStyleExpression, Filter, Selection } from '@annotorious/core';\nimport type { Ellipse, ImageAnnotation, Polygon, Rectangle, Shape } from '@annotorious/annotorious';\n\nconst DEFAULT_FILL = 0x1a73e8;\nconst DEFAULT_ALPHA = 0.25;\n\n// If scale has changed by more than UPDATE_SCALE_THRESHOLD in log scale, all annotations are redrawn\nconst UPDATE_SCALE_THRESHOLD = 0.20;\n\n// If move has changed by more than UPDATE_MOVE_THRESHOLD, all annotations are redrawn\nconst UPDATE_MOVE_THRESHOLD = 0.25;\n\n// Extra offset for updating annotations in view\nconst OFFSET_SEARCH = 0.30;\n\ninterface AnnotationShape {\n\n  annotation: ImageAnnotation;\n\n  fill: PIXI.Graphics;\n\n  stroke: PIXI.Graphics;\n\n  strokeWidth: number;\n\n  drawFn: (g: PIXI.Graphics) => void;\n}\nexport class StageRenderer {\n  // Likewise, if scale has not changed, counter-scaling is also skipped\n  private lastScale: number = 0;\n\n  // Likewise, if center has not changed, counter-translation is also skipped\n  private lastCenter: OpenSeadragon.Point = new OpenSeadragon.Point(undefined, undefined);\n\n  // RBush tree for fast annotation lookup (spatial search)\n  private annotationTree = new RBush<{\n    minX: number;\n    minY: number;\n    maxX: number;\n    maxY: number;\n    annotationId: string;\n  }>(16);\n\n  // Keep track of which annotations have been updated\n  private isAnnotationUpdated = new Map<string, boolean>();\n\n  // Update annotations in view\n  private updateAnnotationShape = (viewportBounds: OpenSeadragon.Rect, shapes: Map<String, AnnotationShape>, fn: (shape: AnnotationShape) => void) => {\n    if (shapes.size === 0) return;\n\n    const offsetX = viewportBounds.width * OFFSET_SEARCH;\n    const offsetY = viewportBounds.height * OFFSET_SEARCH;\n\n    const updateAnnotations = this.annotationTree.search({\n      minX: viewportBounds.x - offsetX,\n      minY: viewportBounds.y - offsetY,\n      maxX: viewportBounds.x + viewportBounds.width + offsetX,\n      maxY: viewportBounds.y + viewportBounds.height + offsetY\n    })\n\n    updateAnnotations.forEach(({ annotationId }) => {\n      const shape = shapes.get(annotationId);\n      if (shape && !this.isAnnotationUpdated.get(annotationId)) {\n        fn(shape);\n\n        this.isAnnotationUpdated.set(annotationId, true);\n      }\n    });\n\n  }\n\n  // Remove annotation from RBush tree\n  private removeAnnotationFromTree = (annotation: ImageAnnotation) => {\n    this.annotationTree.remove({\n      minX: annotation.target.selector.geometry.bounds.minX,\n      minY: annotation.target.selector.geometry.bounds.minY,\n      maxX: annotation.target.selector.geometry.bounds.maxX,\n      maxY: annotation.target.selector.geometry.bounds.maxY,\n      annotationId: annotation.id\n    }, (a, b) => a.annotationId === b.annotationId)\n  }\n\n  private getGraphicsStyle = (style?: DrawingStyle) => {\n    const fillStyle = {\n      tint: style?.fill ? new PIXI.Color(style.fill).toNumber() : DEFAULT_FILL,\n      alpha: style?.fillOpacity === undefined ? DEFAULT_ALPHA : Math.min(style.fillOpacity, 1)\n    };\n\n    const strokeStyle = {\n      tint: style?.stroke && new PIXI.Color(style.stroke).toNumber(),\n      alpha: style?.strokeOpacity === undefined ? (style?.stroke ? 1 : 0) : Math.min(style.strokeOpacity, 1),\n      lineWidth: style?.stroke ? style?.strokeWidth || 1 : 0\n    }\n\n    return { fillStyle, strokeStyle };\n  }\n\n  private drawShape = <T extends Shape>(fn: (s: T, g: PIXI.Graphics) => void) => (container: PIXI.Container, shape: T, style?: DrawingStyle) => {\n    const { fillStyle, strokeStyle } = this.getGraphicsStyle(style);\n\n    const fillGraphics = new PIXI.Graphics();\n    fn(shape, fillGraphics);\n    fillGraphics.fill(0xffffff)\n    fillGraphics.tint = fillStyle.tint;\n    fillGraphics.alpha = fillStyle.alpha;\n\n    container.addChild(fillGraphics);\n\n    const lineWidth = strokeStyle.lineWidth / this.lastScale;\n\n    const strokeGraphics = new PIXI.Graphics();\n    fn(shape, strokeGraphics);\n    strokeGraphics.stroke({\n      color: 0xffffff,\n      width: lineWidth,\n      alpha: 1,\n      alignment: 0.5,\n    })\n    strokeGraphics.tint = strokeStyle.tint || 0xFFFFFF;\n    strokeGraphics.alpha = strokeStyle.alpha;\n\n    container.addChild(strokeGraphics);\n\n    return { fill: fillGraphics, stroke: strokeGraphics, strokeWidth: strokeStyle.lineWidth, drawFn: (graphics: PIXI.Graphics) => fn(shape, graphics) };\n  }\n\n  private drawEllipse = this.drawShape((ellipse: Ellipse, g: PIXI.Graphics) => {\n    const { cx, cy, rx, ry } = ellipse.geometry;\n    g.ellipse(cx, cy, rx, ry)\n  });\n\n  private drawPolygon = this.drawShape((polygon: Polygon, g: PIXI.Graphics) => {\n    const flattend = polygon.geometry.points.reduce((flat, xy) => ([...flat, ...xy]), []);\n    g.poly(flattend);\n  });\n\n  private drawRectangle = this.drawShape((rectangle: Rectangle, g: PIXI.Graphics) => {\n    const { x, y, w, h } = rectangle.geometry;\n    g.rect(x, y, w, h);\n  });\n\n  private getCurrentScale = (viewer: OpenSeadragon.Viewer) => {\n    const containerWidth = viewer.viewport.getContainerSize().x;\n    const zoom = viewer.viewport.getZoom(true);\n    return zoom * containerWidth / viewer.world.getContentFactor();\n  }\n\n  private redrawStage = (\n    viewer: OpenSeadragon.Viewer,\n    container: PIXI.Container,\n    shapes: Map<String, AnnotationShape>,\n    renderer: PIXI.Renderer<PIXI.ICanvas>\n  ) => () => {\n    const viewportBounds = viewer.viewport.viewportToImageRectangle(viewer.viewport.getBounds(true));\n    const scale = this.getCurrentScale(viewer);\n    const center = viewportBounds.getCenter();\n\n    // console.log(Math.log(viewer.viewport.getZoom(true)))\n\n    if (scale !== this.lastScale) {\n      if (Math.abs(Math.log(scale / this.lastScale)) > UPDATE_SCALE_THRESHOLD) {\n        this.isAnnotationUpdated.clear()\n\n        this.updateAnnotationShape(viewportBounds, shapes, ({ stroke, strokeWidth, drawFn }) => {\n          stroke.clear()\n          drawFn(stroke);\n          stroke.stroke({\n            color: 0xffffff,\n            width: strokeWidth / scale,\n            alpha: 1,\n            alignment: 0.5,\n          })\n        })\n\n        this.lastScale = scale;\n      }\n    }\n\n    if (!center.equals(this.lastCenter)) {\n      const thresholdX = viewportBounds.width * UPDATE_MOVE_THRESHOLD;\n      const thresholdY = viewportBounds.height * UPDATE_MOVE_THRESHOLD;\n\n      if (Math.abs(center.x - this.lastCenter.x) > thresholdX || Math.abs(center.y - this.lastCenter.y) > thresholdY) {\n        this.updateAnnotationShape(viewportBounds, shapes, ({ stroke, strokeWidth, drawFn }) => {\n          stroke.clear()\n          drawFn(stroke);\n          stroke.stroke({\n            color: 0xffffff,\n            width: strokeWidth / scale,\n            alpha: 1,\n            alignment: 0.5,\n          })\n        });\n\n        this.lastCenter = center;\n      }\n\n    }\n\n    const rotation = Math.PI * viewer.viewport.getRotation() / 180;\n\n    const dx = - viewportBounds.x * scale;\n    const dy = - viewportBounds.y * scale;\n\n    let offsetX: number, offsetY: number;\n\n    if (rotation > 0 && rotation <= Math.PI / 2) {\n      offsetX = viewportBounds.height * scale;\n      offsetY = 0;\n    } else if (rotation > Math.PI / 2 && rotation <= Math.PI) {\n      offsetX = viewportBounds.width * scale;\n      offsetY = viewportBounds.height * scale;\n    } else if (rotation > Math.PI && rotation <= Math.PI * 1.5) {\n      offsetX = 0;\n      offsetY = viewportBounds.width * scale;\n    } else {\n      offsetX = 0;\n      offsetY = 0;\n    }\n\n    container.position.x = offsetX + dx * Math.cos(rotation) - dy * Math.sin(rotation);\n    container.position.y = offsetY + dx * Math.sin(rotation) + dy * Math.cos(rotation);\n    container.scale.set(scale, scale);\n    container.rotation = rotation;\n\n    renderer.render(container);\n  }\n\n  createStage = async (viewer: OpenSeadragon.Viewer, canvas: HTMLCanvasElement) => {\n    const container = new PIXI.Container();\n\n    const renderer = await PIXI.autoDetectRenderer({\n      width: canvas.width,\n      height: canvas.height,\n      backgroundAlpha: 0,\n      canvas: canvas,\n      antialias: true,\n      resolution: 2,\n    });\n\n    // Lookup table: shapes and annotations by annotation ID\n    const annotationShapes = new Map<string, AnnotationShape>();\n\n    // Current selection (if any)\n    let selectedIds = new Set<string>();\n\n    // Current hover (if any)\n    let hovered: string | undefined;\n\n    // Current style (if any)\n    let style: DrawingStyleExpression<ImageAnnotation> | undefined = undefined;\n\n    this.lastScale = this.getCurrentScale(viewer);\n\n    const addAnnotation = (annotation: ImageAnnotation, state?: AnnotationState) => {\n      const { selector } = annotation.target;\n\n      const s = typeof style == 'function' ? style(annotation, state) : style;\n\n      let rendered: { fill: PIXI.Graphics, stroke: PIXI.Graphics, strokeWidth: number, drawFn: (g: PIXI.Graphics) => void } | undefined;\n\n      if (selector.type === ShapeType.RECTANGLE) {\n        rendered = this.drawRectangle(container, selector as Rectangle, s);\n      } else if (selector.type === ShapeType.POLYGON) {\n        rendered = this.drawPolygon(container, selector as Polygon, s);\n      } else if (selector.type === ShapeType.ELLIPSE) {\n        rendered = this.drawEllipse(container, selector as Ellipse, s);\n      } else {\n        console.warn(`Unsupported shape type: ${selector.type}`)\n      }\n\n      if (rendered) {\n        this.annotationTree.insert({\n          minX: selector.geometry.bounds.minX,\n          minY: selector.geometry.bounds.minY,\n          maxX: selector.geometry.bounds.maxX,\n          maxY: selector.geometry.bounds.maxY,\n          annotationId: annotation.id\n        });\n\n        annotationShapes.set(annotation.id, { annotation, ...rendered });\n      }\n    }\n\n    const removeAnnotation = (annotation: ImageAnnotation) => {\n      const rendered = annotationShapes.get(annotation.id);\n      if (rendered) {\n        this.removeAnnotationFromTree(annotation);\n        annotationShapes.delete(annotation.id);\n        rendered.fill.destroy();\n        rendered.stroke.destroy();\n      }\n    }\n\n    const updateAnnotation = (oldValue: ImageAnnotation, newValue: ImageAnnotation, state?: AnnotationState) => {\n      const rendered = annotationShapes.get(oldValue.id);\n\n      if (rendered) {\n        this.removeAnnotationFromTree(oldValue);\n        annotationShapes.delete(oldValue.id);\n        rendered.fill.destroy();\n        rendered.stroke.destroy();\n\n        addAnnotation(newValue, state);\n      }\n    }\n\n    const redrawAnnotation = (id: string, state?: AnnotationState) => {\n      const rendered = annotationShapes.get(id);\n      if (rendered) {\n\n        this.removeAnnotationFromTree(rendered.annotation);\n        annotationShapes.delete(id);\n        rendered.fill.destroy();\n        rendered.stroke.destroy();\n\n        addAnnotation(rendered.annotation, state);\n      }\n    }\n\n    const resize = (width: number, height: number) => {\n      renderer.resize(width, height);\n      renderer.render(container);\n    }\n\n    const setFilter = (filter?: Filter<ImageAnnotation>) => {\n      const { children } = container;\n\n      annotationShapes.forEach(({ fill, stroke, annotation }) => {\n        // Note: selected annotation always remains visible\n        const visible = filter ?\n          selectedIds.has(annotation.id) || filter(annotation) :\n          true;\n\n        if (visible && !(children.includes(fill))) {\n          container.addChild(fill);\n          container.addChild(stroke);\n        } else if (!visible && children.includes(fill)) {\n          container.removeChild(fill);\n          container.removeChild(stroke)\n        }\n      });\n\n      renderer.render(container);\n    }\n\n    const setHovered = (annotationId?: string) => {\n      if (hovered === annotationId) return;\n\n      // Unhover current, if any\n      if (hovered)\n        redrawAnnotation(hovered, { selected: selectedIds.has(hovered) });\n\n      // Set next hover\n      if (annotationId)\n        redrawAnnotation(annotationId, { selected: selectedIds.has(annotationId), hovered: true });\n\n      hovered = annotationId;\n\n      renderer.render(container);\n    }\n\n    const setSelected = (selection: Selection) => {\n      const nextIds = selection.selected.map(s => s.id);\n\n      const toSelect =\n        nextIds.filter(id => !selectedIds.has(id));\n\n      const toDeselect = [...selectedIds]\n        .filter(id => !nextIds.includes(id));\n\n      [...toSelect, ...toDeselect].forEach(id =>\n        redrawAnnotation(id, { selected: nextIds.includes(id), hovered: id === hovered }));\n\n      selectedIds = new Set(nextIds);\n\n      renderer.render(container);\n    }\n\n    const setStyle = (s?: DrawingStyleExpression<ImageAnnotation>) => {\n      if (typeof s === 'function') {\n        annotationShapes.forEach(({ annotation, fill, stroke, strokeWidth, drawFn }, _) => {\n          const { fillStyle, strokeStyle } = this.getGraphicsStyle(s(annotation));\n\n          fill.tint = fillStyle.tint;\n          fill.alpha = fillStyle.alpha;\n\n          stroke.tint = strokeStyle.tint || 0xFFFFFF;\n          stroke.alpha = strokeStyle.alpha;\n\n          annotationShapes.set(annotation.id, { annotation, fill, stroke, strokeWidth, drawFn });\n        });\n      } else {\n        const { fillStyle, strokeStyle } = this.getGraphicsStyle(s);\n\n        annotationShapes.forEach(({ annotation, fill, stroke, strokeWidth, drawFn }, _) => {\n          fill.tint = fillStyle.tint;\n          fill.alpha = fillStyle.alpha;\n\n          stroke.tint = strokeStyle.tint || 0xFFFFFF;\n          stroke.alpha = strokeStyle.alpha;\n\n          annotationShapes.set(annotation.id, { annotation, fill, stroke, strokeWidth, drawFn });\n        });\n      }\n\n      style = s;\n\n      renderer.render(container);\n    }\n\n    const setVisible = (visible: boolean) => {\n      if (visible)\n        canvas.classList.remove('hidden');\n      else\n        canvas.classList.add('hidden');\n    }\n\n    const destroy = () => {\n      this.annotationTree.clear();\n      renderer.destroy();\n    }\n\n    return {\n      addAnnotation,\n      destroy,\n      redraw: this.redrawStage(viewer, container, annotationShapes, renderer),\n      removeAnnotation,\n      resize,\n      setFilter,\n      setHovered,\n      setSelected,\n      setStyle,\n      setVisible,\n      updateAnnotation\n    }\n\n  }\n}","<script lang=\"ts\">\n  import { createEventDispatcher, onMount } from 'svelte';\n  import OpenSeadragon from 'openseadragon';\n  import type { DrawingStyleExpression } from '@annotorious/core';\n  import type { Filter, ImageAnnotation, ImageAnnotatorState } from '@annotorious/annotorious';\n  import type { PixiLayerClickEvent } from './PixiLayerClickEvent';\n  import { StageRenderer } from './stageRenderer';\n\n  import './PixiLayer.css';\n\n  /** Props */\n  export let filter: Filter<ImageAnnotation> | undefined;\n  export let state: ImageAnnotatorState;\n  export let style: DrawingStyleExpression<ImageAnnotation> | undefined;\n  export let viewer: OpenSeadragon.Viewer;\n  export let visible = true;\n\n  const { store, hover, selection, viewport } = state;\n  \n  const dispatch = createEventDispatcher<{ click: PixiLayerClickEvent}>();\n\n  let stage: Awaited<ReturnType<typeof StageRenderer.prototype.createStage>>\n  let resoleStage: () => void\n  let waitStage = new Promise<void>(resolve => {resoleStage = resolve});\n\n  let lastPress: { x: number, y: number } | undefined;\n\n  $: stage?.setFilter(filter);\n\n  $: stage?.setSelected($selection);\n\n  $: stage?.setStyle(style);\n\n  $: stage?.setVisible(visible);\n\n  // Helper\n  const getImageXY = (xy: OpenSeadragon.Point): OpenSeadragon.Point => {\n    const offsetXY = new OpenSeadragon.Point(xy.x, xy.y);\n    const {x, y} = viewer.viewport.pointFromPixel(offsetXY);\n    return viewer.viewport.viewportToImageCoordinates(x, y);\n  }\n\n  const onCanvasPress = (evt: OpenSeadragon.CanvasPressEvent) => {\n    const { x, y } = evt.position;\n    lastPress = { x, y };\n  }\n\n  const onPointerMove = (canvas: HTMLCanvasElement) => (evt: PointerEvent) => {\n    const {x, y} = getImageXY(new OpenSeadragon.Point(evt.offsetX, evt.offsetY));\n    \n    const hit = store.getAt(x, y);\n    const isVisibleHit = hit && (!filter || filter(hit));\n\n    if (isVisibleHit) {\n      canvas.classList.add('hover');\n\n      if ($hover !== hit.id) {\n        hover.set(hit.id);\n        stage.setHovered(hit.id);\n      }\n    } else {\n      canvas.classList.remove('hover');\n\n      if ($hover) {\n        hover.set(undefined);\n        stage.setHovered(undefined);\n      }\n    }\n  }\n\n  const onCanvasRelease = (evt: OpenSeadragon.CanvasReleaseEvent) => {\n    const originalEvent = evt.originalEvent as PointerEvent;\n\n    const { x, y } = evt.position;\n    const dx = x - lastPress!.x;\n    const dy = y - lastPress!.y;\n\n    const dist = Math.sqrt(dx * dx + dy * dy);\n\n    if (dist < 5) {\n      const {x, y} = getImageXY(evt.position);\n      const annotation = store.getAt(x, y);\n\n      if (annotation)\n        dispatch('click', { originalEvent, annotation });\n      else\n        dispatch('click', { originalEvent });\n    }\n\n    lastPress = undefined;\n  }\n\n  let currentViewportBounds: { x: number, y: number, width: number, height: number };\n\n  onMount(() => {\n    const { offsetWidth, offsetHeight } = viewer.canvas;\n\n    // Create Canvas element\n    const canvas = document.createElement('canvas');\n    canvas.width = offsetWidth;\n    canvas.height = offsetHeight;\n    canvas.className = 'a9s-gl-canvas';\n\n    viewer.element.querySelector('.openseadragon-canvas')?.appendChild(canvas);\n    \n    const moveHandler = onPointerMove(canvas);\n\n    const updateViewportState = () => {\n        const viewportBounds = viewer.viewport.getBounds();\n        currentViewportBounds = viewer.viewport.viewportToImageRectangle(viewportBounds);\n  \n        const { x, y, width, height } = currentViewportBounds;\n  \n        const intersecting = store.getIntersecting(x, y, width, height);\n        viewport.set(intersecting.map(a => a.id));\n      }\n\n    // Create Pixi stage\n    new StageRenderer().createStage(viewer, canvas).then((s)=> {\n      stage = s\n\n      // // Event handlers\n      canvas.addEventListener('pointermove', moveHandler); \n  \n      const observer = new ResizeObserver(entries => {\n        try {\n          const { width, height } = entries[0].contentRect;\n  \n          // canvas.width = width;\n          // canvas.height = height;\n          \n          stage.resize(width, height);\n        } catch {\n          console.warn('WebGL canvas already disposed');\n        }\n      });\n  \n      observer.observe(canvas);\n  \n      viewer.addHandler('canvas-press', onCanvasPress);\n      viewer.addHandler('canvas-release', onCanvasRelease);\n      viewer.addHandler('update-viewport', stage.redraw);\n      viewer.addHandler('animation-finish', updateViewportState);\n\n      resoleStage();\n    })\n\n\n    return () => {\n      canvas.removeEventListener('pointermove', moveHandler);\n\n      viewer.removeHandler('canvas-press', onCanvasPress);\n      viewer.removeHandler('canvas-release', onCanvasRelease);\n      viewer.removeHandler('update-viewport', stage.redraw);\n      viewer.removeHandler('animation-finish', updateViewportState);\n\n      stage.destroy();\n\n      canvas.parentNode?.removeChild(canvas);\n    }\n  });\n\n  store.observe(async event => {\n    await waitStage;\n\n    const { created, updated, deleted } = event.changes;\n\n    (created || []).forEach(annotation => stage.addAnnotation(annotation));\n\n    (updated || []).forEach(({ oldValue, newValue }) => stage.updateAnnotation(oldValue, newValue));\n\n    (deleted || []).forEach(annotation => stage.removeAnnotation(annotation));\n\n    if (currentViewportBounds) {\n      const { x, y, width, height } = currentViewportBounds;\n\n      const intersecting = store.getIntersecting(x, y, width, height);\n      viewport.set(intersecting.map(a => a.id));\n    } else {\n      viewport.set(store.all().map(a => a.id));\n    }\n    \n    stage.redraw();\n  });\n</script>\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import type { AbstractSelector } from '@annotorious/core';\n\nexport interface Shape extends AbstractSelector {\n\n  type: ShapeType;\n\n  geometry: Geometry;\n\n}\n\nexport enum ShapeType {\n\n  ELLIPSE = 'ELLIPSE',\n\n  POLYGON = 'POLYGON',\n\n  RECTANGLE = 'RECTANGLE'\n\n}\n\nexport interface Geometry {\n\n  bounds: Bounds;\n\n}\n\nexport interface Bounds {\n\n  minX: number;\n\n  minY: number;\n\n  maxX: number;\n\n  maxY: number;\n\n}","import type { Bounds, Shape, ShapeType } from './Shape';\n\nexport interface ShapeUtil<T extends Shape> {\n\n  area: (shape: T) => number;\n\n  intersects: (shape: T, x: number, y: number) => boolean;\n\n}\n\nconst Utils: { [key: string]: ShapeUtil<any> } = {};\n\n/**\n * Registers a new ShapeUtil for a given shape type.\n * @param type the shape type\n * @param util the ShapeUtil implementation for this shape type\n */\nexport const registerShapeUtil = (type: ShapeType | string, util: ShapeUtil<any>) =>\n  (Utils[type] = util);\n\n/**\n * Computes the area of the given shape. Delegates to the corresponding ShapeUtil.\n * @param shape the shape\n */\nexport const computeArea = (shape: Shape) => Utils[shape.type].area(shape);\n\n/**\n * Tests if the given shape intersects the given point. Delegates to\n * the corresponding ShapeUtil.\n * @param shape the shape\n * @param x point x coord\n * @param y point y coord\n * @returns true if shape and point intersect\n */\nexport const intersects = (shape: Shape, x: number, y: number): boolean =>\n  Utils[shape.type].intersects(shape, x, y);\n\n/**\n * Computes Bounds from a given list of points.\n * @param points the points\n * @returns the Bounds\n */\nexport const boundsFromPoints = (points: Array<[number, number]>): Bounds => {\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n\n  points.forEach(([x, y]) => {\n    minX = Math.min(minX, x);\n    minY = Math.min(minY, y);\n    maxX = Math.max(maxX, x);\n    maxY = Math.max(maxY, y);\n  });\n\n  return { minX, minY, maxX, maxY };\n};","import { ShapeType } from '../Shape';\nimport { registerShapeUtil, type ShapeUtil } from '../shapeUtils';\nimport type { Ellipse } from './Ellipse';\n\nconst EllipseUtil: ShapeUtil<Ellipse> = {\n\n  area: (e: Ellipse): number => Math.PI * e.geometry.rx * e.geometry.ry,\n\n  intersects: (e: Ellipse, x: number, y: number): boolean => {\n    const { cx, cy, rx, ry } = e.geometry;\n\n    // For future use\n    const rot = 0;\n\n    const cos = Math.cos(rot);\n    const sin = Math.sin(rot);\n  \n    const dx  = x - cx;\n    const dy  = y - cy;\n  \n    const tdx = cos * dx + sin * dy;\n    const tdy = sin * dx - cos * dy;\n  \n    return (tdx * tdx) / (rx * rx) + (tdy * tdy) / (ry * ry) <= 1;\n  }\n};\n\nregisterShapeUtil(ShapeType.ELLIPSE, EllipseUtil);","import { ShapeType } from '../Shape';\nimport { registerShapeUtil, type ShapeUtil } from '../shapeUtils';\nimport type { Polygon } from './Polygon';\n\nconst PolygonUtil: ShapeUtil<Polygon> = {\n\n  area: (polygon: Polygon): number => {\n    const { points } = polygon.geometry;\n\n    let area = 0;\n    let j = points.length - 1;\n\n    for (let i = 0; i < points.length; i++) {\n      area += (points[j][0] + points[i][0]) * (points[j][1] - points[i][1]);\n      j = i;\n    }\n\n    return Math.abs(0.5 * area);\n  },\n\n  intersects: (polygon: Polygon, x: number, y: number): boolean => {\n    // Based on https://wrf.ecse.rpi.edu/Research/Short_Notes/pnpoly.html/pnpoly.html\n    const { points } = polygon.geometry;\n\n    let inside = false;\n\n    for (let i = 0, j = points.length - 1; i < points.length; j = i++) {\n      const xi = points[i][0],\n        yi = points[i][1];\n      const xj = points[j][0],\n        yj = points[j][1];\n\n      const intersect = yi > y != yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\n\n      if (intersect) inside = !inside;\n    }\n\n    return inside;\n  }\n  \n};\n\nregisterShapeUtil(ShapeType.POLYGON, PolygonUtil);","import { ShapeType } from '../Shape';\nimport type { Rectangle } from './Rectangle';\nimport { registerShapeUtil, type ShapeUtil } from '../shapeUtils';\n\nexport const RectangleUtil: ShapeUtil<Rectangle> = {\n\n  area: (rect: Rectangle): number => rect.geometry.w * rect.geometry.h,\n\n  intersects: (rect: Rectangle, x: number, y: number): boolean =>\n    x >= rect.geometry.x &&\n    x <= rect.geometry.x + rect.geometry.w &&\n    y >= rect.geometry.y &&\n    y <= rect.geometry.y + rect.geometry.h\n    \n};\n\nregisterShapeUtil(ShapeType.RECTANGLE, RectangleUtil);","<script lang=\"ts\">\n  import { boundsFromPoints } from '../../../model';\n  import type { Polygon, PolygonGeometry, Shape } from '../../../model';\n  import type { Transform } from '../../Transform';\n  import { Editor, Handle } from '..';\n\n  /** Props */\n  export let shape: Polygon;\n  export let computedStyle: string | undefined;\n  export let transform: Transform;\n  export let viewportScale: number = 1;\n\n  $: geom = shape.geometry;\n\n  const editor = (polygon: Shape, handle: string, delta: [number, number]) => {\n    let points: [number, number][];\n\n    const geom = (polygon.geometry) as PolygonGeometry;\n\n    if (handle === 'SHAPE') {\n      points = geom.points.map(([x, y]) => [x + delta[0], y + delta[1]]);\n    } else {\n      points = geom.points.map(([x, y], idx) =>\n        handle === `HANDLE-${idx}` ? [x + delta[0], y + delta[1]] : [x, y]\n      );\n    }\n\n    const bounds = boundsFromPoints(points);\n\n    return {\n      ...polygon,\n      geometry: { points, bounds }\n    }\n  }\n</script>\n\n<Editor\n  shape={shape}\n  transform={transform}\n  editor={editor}\n  on:change \n  on:grab\n  on:release\n  let:grab={grab}>\n\n  <polygon\n    class=\"a9s-outer\"\n    style={computedStyle ? 'display:none;' : undefined}\n    on:pointerdown={grab('SHAPE')}\n    points={geom.points.map(xy => xy.join(',')).join(' ')} />\n\n  <polygon\n    class=\"a9s-inner a9s-shape-handle\"\n    style={computedStyle}\n    on:pointerdown={grab('SHAPE')}\n    points={geom.points.map(xy => xy.join(',')).join(' ')} />\n\n  {#each geom.points as point, idx}\n    <Handle \n      on:pointerdown={grab(`HANDLE-${idx}`)}\n      x={point[0]} y={point[1]} \n      scale={viewportScale} />\n  {/each}\n</Editor>","export const isTouch = 'ontouchstart' in window \n  || navigator.maxTouchPoints > 0\n  // @ts-ignore\n  || navigator.msMaxTouchPoints > 0;\n","<script lang=\"ts\">\n  import { isTouch } from '../utils';\n\n  /** props **/\n  export let x: number;\n  export let y: number;\n  export let scale: number;\n  export let radius: number = 30;\n\n  let touched = false;\n\n  const onPointerDown = (event: PointerEvent) => {\n    if (event.pointerType === 'touch')\n      touched = true;\n  }\n\n  const onPointerUp = () =>\n    touched = false;\n\n  $: handleSize = 10 / scale;\n</script>\n\n{#if isTouch}\n  <g class=\"a9s-touch-handle\">\n    <circle \n      cx={x} \n      cy={y} \n      r={radius / scale}\n      class=\"a9s-touch-halo\"\n      class:touched={touched}\n      on:pointerdown\n      on:pointerdown={onPointerDown} \n      on:pointerup={onPointerUp} />\n\n    <rect \n      class={`a9s-handle ${$$props.class || ''}`.trim()}\n      x={x - handleSize / 2} \n      y={y - handleSize / 2} \n      width={handleSize} \n      height={handleSize}\n      on:pointerdown\n      on:pointerdown={onPointerDown} \n      on:pointerup={onPointerUp}  />\n  </g>\n{:else}\n  <rect \n    class={`a9s-handle ${$$props.class || ''}`.trim()}\n    x={x - handleSize / 2} \n    y={y - handleSize / 2} \n    width={handleSize} \n    height={handleSize} \n    on:pointerdown />\n{/if}\n\n<style>\n  .a9s-touch-halo {\n    fill: transparent;\n    stroke-width: 0;\n  }\n\n  .a9s-touch-halo.touched {\n    fill: rgba(255, 255, 255, 0.25);\n  }\n\n\n</style>\n","<script lang=\"ts\">\n  import Handle from '../Handle.svelte';\n  import type { Rectangle, Shape } from '../../../model';\n  import type { Transform } from '../../Transform';\n  import { Editor } from '..';\n\n  /** Props */\n  export let shape: Rectangle;\n  export let computedStyle: string | undefined;\n  export let transform: Transform;\n  export let viewportScale: number = 1;\n\n  $: geom = shape.geometry;\n\n  const editor = (rectangle: Shape, handle: string, delta: [number, number]) => {\n    const initialBounds = rectangle.geometry.bounds;\n\n    let [x0, y0] = [initialBounds.minX, initialBounds.minY];\n    let [x1, y1] = [initialBounds.maxX, initialBounds.maxY];\n\n    const [dx, dy] = delta;\n\n    if (handle === 'SHAPE') {\n      x0 += dx;\n      x1 += dx;\n      y0 += dy;\n      y1 += dy;\n    } else {\n      switch (handle) {\n        case 'TOP':\n        case 'TOP_LEFT':\n        case 'TOP_RIGHT': {\n          y0 += dy;\n          break;\n        }\n\n        case 'BOTTOM':\n        case 'BOTTOM_LEFT':\n        case 'BOTTOM_RIGHT': {\n          y1 += dy;\n          break;\n        }\n      }\n\n      switch (handle) {\n        case 'LEFT':\n        case 'TOP_LEFT':\n        case 'BOTTOM_LEFT': {\n          x0 += dx;\n          break;\n        }\n\n        case 'RIGHT':\n        case 'TOP_RIGHT':\n        case 'BOTTOM_RIGHT': {\n          x1 += dx;\n          break;\n        }\n      }\n    }\n\n    const x = Math.min(x0, x1);\n    const y = Math.min(y0, y1);\n    const w = Math.abs(x1 - x0);\n    const h = Math.abs(y1 - y0);\n\n    return {\n      ...rectangle,\n      geometry: {\n        x, y, w, h,\n        bounds: {\n          minX: x,\n          minY: y,\n          maxX: x + w,\n          maxY: y + h\n        }\n      }\n    };\n  }\n</script>\n\n<Editor\n  shape={shape}\n  transform={transform}\n  editor={editor}\n  on:grab\n  on:change \n  on:release\n  let:grab={grab}>\n\n  <rect \n    class=\"a9s-outer\"\n    style={computedStyle ? 'display:none;' : undefined}\n    on:pointerdown={grab('SHAPE')}\n    x={geom.x} y={geom.y} width={geom.w} height={geom.h} />\n\n  <rect \n    class=\"a9s-inner a9s-shape-handle\"\n    style={computedStyle}\n    on:pointerdown={grab('SHAPE')}\n    x={geom.x} y={geom.y} width={geom.w} height={geom.h} />\n\n  <rect \n    class=\"a9s-edge-handle a9s-edge-handle-top\" \n    on:pointerdown={grab('TOP')}\n    x={geom.x} y={geom.y} height={1} width={geom.w} />\n\n  <rect \n    class=\"a9s-edge-handle a9s-edge-handle-right\"\n    on:pointerdown={grab('RIGHT')}\n    x={geom.x + geom.w} y={geom.y} height={geom.h} width={1}/>\n\n  <rect \n    class=\"a9s-edge-handle a9s-edge-handle-bottom\" \n    on:pointerdown={grab('BOTTOM')}\n    x={geom.x} y={geom.y + geom.h} height={1} width={geom.w} />\n\n  <rect \n    class=\"a9s-edge-handle a9s-edge-handle-left\" \n    on:pointerdown={grab('LEFT')}\n    x={geom.x} y={geom.y} height={geom.h} width={1} />\n\n  <Handle\n    class=\"a9s-corner-handle-topleft\"\n    on:pointerdown={grab('TOP_LEFT')}\n    x={geom.x} y={geom.y}\n    scale={viewportScale} /> \n\n  <Handle\n    class=\"a9s-corner-handle-topright\"\n    on:pointerdown={grab('TOP_RIGHT')}\n    x={geom.x + geom.w} y={geom.y} \n    scale={viewportScale} />\n  \n  <Handle \n    class=\"a9s-corner-handle-bottomright\"\n    on:pointerdown={grab('BOTTOM_RIGHT')}\n    x={geom.x + geom.w} y={geom.y + geom.h} \n    scale={viewportScale} />\n    \n  <Handle \n    class=\"a9s-corner-handle-bottomleft\"\n    on:pointerdown={grab('BOTTOM_LEFT')}\n    x={geom.x} y={geom.y + geom.h} \n    scale={viewportScale} />\n</Editor>","import { ShapeType, type Shape } from '../../model';\nimport type { SvelteComponent } from 'svelte';\nimport { PolygonEditor } from './polygon';\nimport { RectangleEditor } from './rectangle';\n\nconst REGISTERED = new Map<ShapeType, typeof SvelteComponent>([\n  [ShapeType.RECTANGLE, RectangleEditor],\n  [ShapeType.POLYGON, PolygonEditor]\n]);\n\nexport const getEditor = (shape: Shape) => REGISTERED.get(shape.type);\n\nexport const registerEditor = (shapeType: ShapeType, editor: typeof SvelteComponent) =>\n  REGISTERED.set(shapeType, editor);","<script lang=\"ts\">\n  import { createEventDispatcher } from 'svelte';\n  import type { Shape } from '../../model';\n  import type { Transform } from '../Transform';\n\n  const dispatch = createEventDispatcher<{ grab: PointerEvent, release: PointerEvent, change: Shape }>();\n\n  /** Props */\n  export let shape: Shape;\n  export let editor: (shape: Shape, handle: string, delta: [number, number]) => Shape;\n  export let transform: Transform;\n\n  let grabbedHandle: string | undefined;\n\n  let origin: [number, number];\n\n  let initialShape: Shape | undefined;\n\n  const onGrab = (handle: string) => (evt: PointerEvent) => {\n    grabbedHandle = handle;\n    origin = transform.elementToImage(evt.offsetX, evt.offsetY);\n    initialShape = shape;\n\n    const target = evt.target as Element;\n    target.setPointerCapture(evt.pointerId);\n\n    dispatch('grab', evt);\n  }\n\n  const onPointerMove = (evt: PointerEvent) => {\n    if (grabbedHandle) {\n      const [x, y] = transform.elementToImage(evt.offsetX, evt.offsetY);\n\n      const delta: [number, number] = [x - origin[0], y - origin[1]];\n\n      shape = editor(initialShape!, grabbedHandle, delta);\n      \n      dispatch('change', shape);\n    }\n  }\n\n  const onRelease = (evt: PointerEvent) => {    \n    const target = evt.target as Element;\n    target.releasePointerCapture(evt.pointerId);\n\n    grabbedHandle = undefined;\n\n    initialShape = shape;\n    \n    dispatch('release', evt);\n  }\n</script>\n\n<g\n  class=\"a9s-annotation selected\"\n  on:pointerup={onRelease}\n  on:pointermove={onPointerMove}>\n\n  <slot grab={onGrab} />\n</g>","import type { DrawingStyleExpression } from '@annotorious/core';\nimport type { ImageAnnotation } from '../../model';\n\nexport const computeStyle = (\n  annotation: ImageAnnotation, \n  style?: DrawingStyleExpression<ImageAnnotation>\n) => {\n  const computed = typeof style === 'function' ? style(annotation) : style;\n\n  if (computed) {\n    const { fill, fillOpacity } = computed;\n\n    let css = '';\n    \n    if (fill)\n      css += `fill:${fill};stroke:${fill};`;\n    \n    css += `fill-opacity:${fillOpacity || '0.25'};`;\n\n    return css;\n  }\n}","<script lang=\"ts\">\n  import type { DrawingStyleExpression } from '@annotorious/core';\n  import { createEventDispatcher, onMount, type SvelteComponent } from 'svelte';\n  import type { ImageAnnotation, Shape } from '../../model';\n  import { computeStyle } from '../utils/styling';\n  import type { Transform } from '../Transform';\n\n  const dispatch = createEventDispatcher<{ grab: PointerEvent, release: PointerEvent, change: Shape }>();\n\n  /** Props */\n  export let annotation: ImageAnnotation;\n  export let editor: typeof SvelteComponent;\n  export let style: DrawingStyleExpression<ImageAnnotation> | undefined;\n  export let target: SVGGElement;\n  export let transform: Transform;\n  export let viewportScale: number;\n\n  let editorComponent: SvelteComponent;\n\n  $: computedStyle = computeStyle(annotation, style);\n\n  $: if (annotation) editorComponent?.$set({ shape: annotation.target.selector });\n  $: if (editorComponent) editorComponent.$set({ transform });\n  $: if (editorComponent) editorComponent.$set({ viewportScale });\n\n  onMount(() => {\n    editorComponent = new editor({\n      target,\n      props: { shape: annotation.target.selector, computedStyle, transform, viewportScale }\n    });\n\n    editorComponent.$on('change', event => {\n      editorComponent.$$set({ shape: event.detail });\n      dispatch('change', event.detail);\n    });\n\n    editorComponent.$on('grab', event => dispatch('grab', event.detail));\n    editorComponent.$on('release', event => dispatch('release', event.detail));\n\n    return () => {\n      editorComponent.$destroy();\n    }\n  });\n</script>","import type { Annotation, UndoStack } from '@annotorious/core';\n\nconst isMac = navigator.userAgent.indexOf('Mac OS X') !== -1;\n\nexport const initKeyboardCommands = <T extends Annotation>(\n  undoStack: UndoStack<T>,\n  container?: Element \n) => {\n\n  const el = container || document;\n\n  const onWinKeyDown = (evt: Event) => {\n    const event = evt as KeyboardEvent;\n    \n    if (event.key === 'z' && event.ctrlKey) {\n      undoStack.undo();\n    } else if (event.key === 'y' && event.ctrlKey) {\n      undoStack.redo()\n    }\n  };\n\n  const onMacKeyDown = (evt: Event) => {\n    const event = evt as KeyboardEvent;\n\n    if (event.key === 'z' && event.metaKey) {\n      if (event.shiftKey) {\n        undoStack.redo()\n      } else {\n        undoStack.undo();\n      }\n    }\n  }\n\n  const destroy = () => {\n    if (isMac) {\n      el.removeEventListener('keydown', onMacKeyDown);\n    } else {\n      el.removeEventListener('keydown', onWinKeyDown);\n    }\n  }\n\n  if (isMac)\n    el.addEventListener('keydown', onMacKeyDown);\n  else\n    el.addEventListener('keydown', onWinKeyDown);\n\n  return { \n    destroy\n  }\n}\n","<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import OpenSeadragon from 'openseadragon';\n    \n  export let viewer: OpenSeadragon.Viewer;\n\n  // Current layer scale\n  let scale = 1;\n\n  // CSS layer transform\n  let layerTransform: string;\n\n  const onUpdateViewport = () => {\n    const containerWidth = viewer.viewport.getContainerSize().x;\n\n    const zoom = viewer.viewport.getZoom(true);\n    const flipped = viewer.viewport.getFlip();\n\n    const p = viewer.viewport.pixelFromPoint(new OpenSeadragon.Point(0, 0), true);\n    if (flipped)\n      p.x = containerWidth - p.x;\n    \n    const scaleY = zoom * containerWidth / viewer.world.getContentFactor();\n    const scaleX = flipped ? - scaleY : scaleY;\n    const rotation = viewer.viewport.getRotation();\n\n    layerTransform = `translate(${p.x}, ${p.y}) scale(${scaleX}, ${scaleY}) rotate(${rotation})`;\n\n    scale = zoom * containerWidth / viewer.world.getContentFactor();\n  }\n\n  onMount(() => {\n    viewer.addHandler('update-viewport', onUpdateViewport);\n\n    return () => {\n      viewer.removeHandler('update-viewport', onUpdateViewport);\n    }\n  });\n</script>\n\n<slot transform={layerTransform} scale={scale} />","<script lang=\"ts\">\n  import { createEventDispatcher, onMount, type SvelteComponent } from 'svelte';\n  import type OpenSeadragon from 'openseadragon';\n  import type { DrawingMode, Shape, Transform } from '@annotorious/annotorious';\n\n  const dispatch = createEventDispatcher<{ create: Shape }>();\n\n  /** Props **/\n  export let drawingMode: DrawingMode;\n  export let target: SVGGElement;\n  export let tool: typeof SvelteComponent;\n  export let transform: Transform;\n  export let viewer: OpenSeadragon.Viewer\n  export let viewportScale: number;\n\n  let toolComponent: SvelteComponent;\n\n  $: if (toolComponent) toolComponent.$set({ transform });\n  $: if (toolComponent) toolComponent.$set({ viewportScale });\n\n  onMount(() => {\n    const svg = target.closest('svg');\n\n    const cleanup: Function[] = [];\n\n    const addEventListener = (name: string, handler: (evt: Event) => void, capture?: boolean) => {\n      // Attach to SVG element\n      svg?.addEventListener(name, handler, capture);\n      cleanup.push(() => svg?.removeEventListener(name, handler, capture));\n\n      if (name === 'pointerup' || name === 'dblclick') {\n        // OpenSeadragon, by design, stops the 'pointerup' event. In order to capture pointer up events,\n        // we need to listen to the canvas-click event instead\n        const osdHandler = (event: OpenSeadragon.CanvasClickEvent | OpenSeadragon.CanvasDoubleClickEvent) => {\n          const { originalEvent } = event;\n          handler(originalEvent as PointerEvent);\n        }\n\n        const osdName = name === 'pointerup' ? 'canvas-click' : 'canvas-double-click';\n\n        viewer.addHandler(osdName, osdHandler);\n        cleanup.push(() => viewer.removeHandler(osdName, osdHandler));\n      } else if (name === 'pointermove') {\n        const dragHandler = (event: OpenSeadragon.CanvasDragEvent) => {\n          const { originalEvent } = event;\n          handler(originalEvent as PointerEvent);\n        }\n\n        viewer.addHandler('canvas-drag', dragHandler);\n        cleanup.push(() => viewer.removeHandler('canvas-drag', dragHandler));\n      }\n    }\n\n    toolComponent = new tool({\n      target,\n      props: { \n        addEventListener,\n        drawingMode,\n        transform, \n        viewportScale\n      }\n    });\n\n    toolComponent.$on('create', \n      event => dispatch('create', event.detail));\n\n    return () => {\n      cleanup.forEach(fn => fn());\n      toolComponent.$destroy();\n    }\n  });\n</script>","<script lang=\"ts\">\n  import { SvelteComponent } from 'svelte';\n  import { v4 as uuidv4 } from 'uuid';\n  import OpenSeadragon from 'openseadragon';\n  import type { DrawingStyle, Filter, StoreChangeEvent, User } from '@annotorious/core';\n  import { EditorMount } from '@annotorious/annotorious/src'; // Import Svelte components from source\n  import { getEditor as _getEditor, getTool, listDrawingTools } from '@annotorious/annotorious';\n  import type { ImageAnnotation, Shape, ImageAnnotatorState, DrawingMode } from '@annotorious/annotorious';\n  import OSDLayer from '../OSDLayer.svelte';\n  import OSDToolMount from './OSDToolMount.svelte';\n\n  /** Props **/\n  export let drawingEnabled: boolean;\n  export let filter: Filter<ImageAnnotation> | undefined;\n  export let preferredDrawingMode: DrawingMode;\n  export let state: ImageAnnotatorState;\n  export let style: DrawingStyle | ((annotation: ImageAnnotation) => DrawingStyle) | undefined = undefined;\n  export let toolName: string = listDrawingTools()[0];\n  export let user: User;\n  export let viewer: OpenSeadragon.Viewer;\n\n  $: ({ tool, opts } = getTool(toolName) || { tool: undefined, opts: undefined });\n\n  /** Drawing tool layer **/\n  let drawingEl: SVGGElement;\n\n  /** Tool lifecycle **/\n  $: drawingMode = opts?.drawingMode || preferredDrawingMode;\n\n  $: drawingEnabled && drawingMode === 'drag' ? viewer.setMouseNavEnabled(false) : viewer.setMouseNavEnabled(true); \n\n  $: drawingEnabled && selection.clear();\n\n  /** Selection tracking **/\n  const { store, selection, hover } = state;\n\n  let storeObserver: (event: StoreChangeEvent<ImageAnnotation>) => void;\n\n  let editableAnnotations: ImageAnnotation[] | undefined;\n\n  let grabbedAt: number | undefined;\n \n  $: if ($selection.selected.length === 0 && drawingMode === 'drag' && drawingEnabled) { viewer.setMouseNavEnabled(false) }\n\n  $: trackSelection($selection.selected);\n\n  const trackSelection = (selected: { id: string, editable?: boolean}[]) => {\n    store.unobserve(storeObserver);\n\n    // Track only editable annotations\n    const editableIds = \n      selected.filter(({ editable }) => editable).map(({ id }) => id);\n\n    if (editableIds.length > 0) {\n      // Resolve selected IDs from the store\n      editableAnnotations = editableIds.map(id => store.getAnnotation(id)!);\n\n      // Track updates on the selected annotations\n      storeObserver = (event: StoreChangeEvent<ImageAnnotation>) => {\n        const { updated } = event.changes;\n        editableAnnotations = (updated || []).map(change => change.newValue);\n      }   \n      \n      store.observe(storeObserver, { annotations: editableIds });\n    } else {\n      editableAnnotations = undefined;\n    }\n  }\n\n  // Coordinate transform, element offset to OSD image coordinates\n  const toolTransform = (offsetX: number, offsetY: number): [number, number] => {\n    const {x, y} = viewer.viewport.viewerElementToImageCoordinates(new OpenSeadragon.Point(offsetX, offsetY));\n    return [x, y];\n  }\n\n  const onGrab = (evt: CustomEvent<PointerEvent>) => {\n    viewer.setMouseNavEnabled(false);\n\n    // Record timestamp, so we can differentiate between actual\n    // grab (edit) and click (possibly select overlapping shape)\n    grabbedAt = evt.timeStamp;\n  }\n\n  const onRelease = (evt: CustomEvent<PointerEvent>) => { \n    viewer.setMouseNavEnabled(true);\n\n    const timeDifference = performance.now() - (grabbedAt || 0);\n    if (timeDifference < 300) {\n      // Click - check if another shape needs selecting\n      const { offsetX, offsetY } = evt.detail;\n      const [x, y] = toolTransform(offsetX, offsetY);\n\n      const hit = store.getAt(x, y);\n      const isVisibleHit = hit && (!filter || filter(hit));\n\n      if (isVisibleHit && !editableAnnotations!.find(e => e.id === hit.id)) {\n        hover.set(hit.id);\n        selection.setSelected(hit.id);\n      }\n    }\n  }\n\n  const onChangeSelected = (annotation: ImageAnnotation) => (event: CustomEvent<Shape>) => {  \n    const { target } = annotation;\n\n    // We don't consider a shape edit an 'update' if it happens within 10mins\n    const GRACE_PERIOD = 10 * 60 * 1000;\n\n    const isUpdate = \n      target.creator?.id !== user.id ||\n      !target.created ||\n      new Date().getTime() - target.created.getTime() > GRACE_PERIOD;\n\n    store.updateTarget({\n      ...target,\n      selector: event.detail,\n      created: isUpdate ? target.created : new Date(),\n      updated: isUpdate ? new Date() : undefined,\n      updatedBy: isUpdate ? user : undefined\n    });\n  }\n\n  const onSelectionCreated = <T extends Shape>(evt: CustomEvent<T>) => {\n    const id = uuidv4();\n\n    const annotation: ImageAnnotation = {\n      id,\n      bodies: [],\n      target: {\n        annotation: id,\n        selector: evt.detail,\n        creator: user,\n        created: new Date()\n      }\n    }\n\n    store.addAnnotation(annotation);\n\n    selection.setSelected(annotation.id);\n\n    viewer.setMouseNavEnabled(true);\n  }\n\n  // To get around lack of TypeScript support in Svelte markup\n  const getEditor = (shape: Shape): typeof SvelteComponent => _getEditor(shape)!;\n</script>\n\n<OSDLayer viewer={viewer} let:transform let:scale>\n  <svg \n    class=\"a9s-annotationlayer a9s-osd-drawinglayer\"\n    class:drawing={drawingEnabled}>\n\n    <g \n      bind:this={drawingEl}\n      transform={transform}>\n      {#if drawingEl && editableAnnotations}\n        {#each editableAnnotations as editable}\n          {#key editable.id}\n            <EditorMount\n              target={drawingEl}\n              editor={getEditor(editable.target.selector)}\n              annotation={editable}\n              style={style}\n              transform={{ elementToImage: toolTransform }}\n              viewportScale={scale}\n              on:grab={onGrab} \n              on:change={onChangeSelected(editable)}\n              on:release={onRelease} />\n            {/key}\n        {/each}\n      {:else if (drawingEl && tool && drawingEnabled)} \n        {#key toolName} \n          <OSDToolMount\n            target={drawingEl}\n            tool={tool}\n            drawingMode={drawingMode}\n            transform={{ elementToImage: toolTransform }}\n            viewer={viewer}\n            viewportScale={scale}\n            on:create={onSelectionCreated} />\n        {/key}\n      {/if}\n    </g>\n  </svg>\n</OSDLayer>\n\n<style>\n  svg {\n    pointer-events: none;\n  }\n  \n  svg.drawing {\n    pointer-events: all;\n  }\n\n  svg * {\n    pointer-events: all;\n  }\n</style>","<script lang=\"ts\">\n  import type { PresentUser } from '@annotorious/core';\n\n  export let x: number;\n\n  export let y: number;\n\n  export let user: PresentUser;\n\n  export let scale: number;\n\n  export let hAlign: 'CENTER' | null = null;\n\n  let g: SVGGElement;\n\n  $: if (g) setWidth(scale);\n\n  const setWidth = (scale: number) => {\n    const textEl = g.querySelector('text');\n    const rectEl = g.querySelector('rect');\n\n    const width = textEl!.getBBox().width + 10 / scale;\n\n    if (hAlign === 'CENTER') {\n      g.setAttribute('style', `transform: translateX(-${width / 2}px)`);\n    }\n\n    rectEl!.setAttribute('width', `${width}`);\n  }\n</script>\n\n<g bind:this={g} class=\"a9s-presence-label\">\n  <rect\n    class=\"a9s-presence-label-bg\" \n    x={x} \n    y={y - 18 / scale} \n    height={18 / scale} \n    fill={user.appearance.color}\n    stroke={user.appearance.color} />\n\n  <text font-size={12 / scale} x={x + Math.round(5 / scale)} y={y - 5 / scale}>{user.appearance.label}</text>\n</g>\n\n<style>\n  text {\n    fill: #fff;\n    font-family: Arial, Helvetica, sans-serif;\n    font-weight: 600;\n  }\n\n  rect {\n    stroke-width: 1.2;\n    vector-effect: non-scaling-stroke;\n  }\n</style>","<script lang=\"ts\">\n  import type { PresentUser } from '@annotorious/core';\n  import type { ImageAnnotation, PolygonGeometry } from '@annotorious/annotorious/src';\n  import SVGPresenceLabel from '../SVGPresenceLabel.svelte';\n\n  export let annotation: ImageAnnotation;\n\n  export let user: PresentUser;\n\n  export let scale: number;\n\n  $: geom = annotation.target.selector.geometry as PolygonGeometry;\n\n  $: origin = getHighestPoint(geom);\n\n  const getHighestPoint = (geom: PolygonGeometry) => {\n    let [highestPoint, ...rest] = geom.points;\n\n    rest.forEach(([x, y]) => {\n      if (y < highestPoint[1])\n        highestPoint = [x,y];\n    });\n\n    return highestPoint;\n  }\n</script>\n\n<g class=\"a9s-presence-overlay\">\n  <SVGPresenceLabel \n    scale={scale} \n    user={user} \n    x={origin[0]} y={origin[1]} \n    hAlign=\"CENTER\" />\n  \n  <polygon\n    class=\"a9s-presence-shape a9s-presence-polygon\"\n    stroke={user.appearance.color}\n    fill=\"transparent\"\n    points={geom.points.map(xy => xy.join(',')).join(' ')} />\n</g>\n\n<style>\n  polygon {\n    stroke-width: 1.2;\n    vector-effect: non-scaling-stroke;\n  }\n</style>","<script lang=\"ts\">\n  import type { PresentUser } from '@annotorious/core';\n  import type { ImageAnnotation, RectangleGeometry } from '@annotorious/annotorious/src';\n  import SVGPresenceLabel from '../SVGPresenceLabel.svelte';\n\n  export let annotation: ImageAnnotation;\n\n  export let user: PresentUser;\n\n  export let scale: number;\n\n  $: geom = annotation.target.selector.geometry as RectangleGeometry;\n</script>\n\n<g class=\"a9s-presence-overlay\">\n  <SVGPresenceLabel scale={scale} user={user} x={geom.x} y={geom.y} />\n  <rect\n    class=\"a9s-presence-shape a9s-presence-rectangle\"\n    stroke={user.appearance.color}\n    fill=\"transparent\"\n    x={geom.x} y={geom.y} width={geom.w} height={geom.h} />\n</g>\n\n<style>\n  rect {\n    stroke-width: 1.2;\n    vector-effect: non-scaling-stroke;\n  }\n</style>","<script lang=\"ts\">\n  import { onDestroy } from 'svelte';\n  import type { PresenceProvider, PresentUser, StoreChangeEvent } from '@annotorious/core';\n  import { ShapeType, type ImageAnnotation, type ImageAnnotationStore } from '@annotorious/annotorious';\n  import OSDLayer from '../OSDLayer.svelte';\n  import SVGPresencePolygon from './shapes/PresencePolygon.svelte';\n  import SVGPresenceRectangle from './shapes/PresenceRectangle.svelte';\n\n  interface TrackedAnnotation {\n\n    annotation: ImageAnnotation;\n\n    selectedBy: PresentUser;\n\n  }\n\n  export let store: ImageAnnotationStore;\n  \n  export let viewer: OpenSeadragon.Viewer;\n\n  export let provider: PresenceProvider | undefined;\n\n  let trackedAnnotations: TrackedAnnotation[] = [];\n\n  let storeObserver: (event: StoreChangeEvent<ImageAnnotation>) => void;\n\n  $: if (provider) provider.on('selectionChange', onSelectionChange);\n\n  const onSelectionChange = (p: PresentUser, selection: string[] | null) => {\n    trackedAnnotations = [\n      ...trackedAnnotations\n        .filter(({ selectedBy }) => selectedBy.presenceKey !== p.presenceKey),\n      ...(selection || []).map(id => ({ \n          // Warning - could be undefined!\n          annotation: store.getAnnotation(id)!,\n          selectedBy: p\n        }))\n    ].filter(({ annotation }) => {\n      if (!annotation)\n        console.warn('Selection event on unknown annotation');\n\n      return Boolean(annotation);\n    });\n    \n    // Track selection state in the store\n    if (storeObserver)\n      store.unobserve(storeObserver);\n\n    storeObserver = (event: StoreChangeEvent<ImageAnnotation>) => {      \n      const { deleted, updated } = event.changes;\n\n      const deletedIds = new Set((deleted || []).map(a => a.id));\n\n      const next: TrackedAnnotation[] = trackedAnnotations\n        // Remove deleted\n        .filter(({ annotation }) => !deletedIds.has(annotation.id))\n        // Replace updated\n        .map(tracked => {\n          const u = (updated || []).find(update => update.oldValue.id === tracked.annotation.id);\n          if (u) {\n            return { selectedBy: tracked.selectedBy, annotation: u.newValue }; \n          } else {\n            return tracked; \n          }\n        });\n\n      trackedAnnotations = next;\n    }\n\n    store.observe(storeObserver, { \n      annotations: trackedAnnotations.map(t => t.annotation.id)\n    });\n  }\n\n  onDestroy(() => {\n    if (storeObserver)\n      store.unobserve(storeObserver);\n  });\n</script>\n\n{#if Boolean(provider)}\n  <OSDLayer\n    viewer={viewer}\n    let:transform\n    let:scale>\n    <svg \n      class=\"a9s-osd-presencelayer\">\n      <g transform={transform}>\n        {#if trackedAnnotations.length > 0}\n          {#each trackedAnnotations as tracked}\n            {#if (tracked.annotation.target.selector.type === ShapeType.RECTANGLE)}\n              <SVGPresenceRectangle\n                annotation={tracked.annotation} \n                user={tracked.selectedBy}\n                scale={scale} />\n            {:else if (tracked.annotation.target.selector.type === ShapeType.POLYGON)}\n              <SVGPresencePolygon\n                annotation={tracked.annotation} \n                user={tracked.selectedBy}\n                scale={scale} />\n            {/if}\n          {/each}\n        {/if}\n      </g>\n    </svg>\n  </OSDLayer>\n{/if}\n\n<style>\n  svg {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    outline: none;\n    pointer-events: none;\n  }\n</style>\n","import type OpenSeadragon from 'openseadragon';\nimport type { Theme } from '@annotorious/annotorious';\nimport { detectTheme } from '@annotorious/annotorious';\n\nexport const setTheme = (viewer: OpenSeadragon.Viewer, theme: Theme) => {\n  if (theme === 'auto') {\n    // Wait for image to load and then detect theme\n    viewer.addHandler('open', event => {\n      const itemCount = viewer.world.getItemCount();\n\n      const lastItem = viewer.world.getItemAt(itemCount - 1);\n      lastItem.addOnceHandler('fully-loaded-change', event => {\n        const { fullyLoaded } = event;\n\n        if (fullyLoaded) {\n          // The current image was fully loaded, all tiles rendered\n          const canvas = viewer.canvas.querySelector('canvas');\n          \n          const detected = detectTheme(canvas!);\n          viewer.element.setAttribute('data-theme', detected);\n        }\n      })\n    });\n  } else {\n    viewer.element.setAttribute('data-theme', theme);\n  }\n\n}","import type { ImageAnnotationStore } from '@annotorious/annotorious';\nimport type OpenSeadragon from 'openseadragon';\n\nexport interface FitboundsOptions {\n\n  immediately?: boolean;\n\n  padding?: number | [number, number, number, number]\n\n}\n\nconst _fitBounds = (\n  viewer: OpenSeadragon.Viewer,\n  store: ImageAnnotationStore,\n  fn: string\n) => (arg: { id: string } | string, opts: FitboundsOptions = {}) => {\n  const id = typeof arg === 'string' ? arg : arg.id;\n\n  const annotation = store.getAnnotation(id);\n  if  (!annotation)\n    return;\n\n  const containerBounds = viewer.container.getBoundingClientRect();\n\n  const { padding } = opts;\n\n  let [pt, pr, pb, pl] = padding ? (\n    Array.isArray(padding) ? padding : [ padding, padding, padding, padding ]\n  ) : [0, 0, 0, 0];\n\n  // Relative padding\n  pt = pt / containerBounds.height;\n  pr = pr / containerBounds.width;\n  pb = pb / containerBounds.height;\n  pl = pl / containerBounds.width;\n\n  const { minX, minY, maxX, maxY } = annotation.target.selector.geometry.bounds;\n\n  const w = maxX - minX;\n  const h = maxY - minY;\n\n  const padX = minX - pl * w;\n  const padY = minY - pt * h;\n  const padW = w + (pr + pl) * w;\n  const padH = h + (pt + pb) * h;\n\n  const rect = viewer.viewport.imageToViewportRectangle(padX, padY, padW, padH);\n\n  // @ts-ignore\n  viewer.viewport[fn](rect, opts.immediately);\n} \n\nexport const fitBounds = (\n  viewer: OpenSeadragon.Viewer,\n  store: ImageAnnotationStore\n) => _fitBounds(viewer, store, 'fitBounds');\n\nexport const fitBoundsWithConstraints = (\n  viewer: OpenSeadragon.Viewer,\n  store: ImageAnnotationStore\n) => _fitBounds(viewer, store, 'fitBoundsWithConstraints');\n","import type OpenSeadragon from 'openseadragon';\nimport type { SvelteComponent } from 'svelte';\nimport { \n  createAnonymousGuest, \n  createBaseAnnotator, \n  createLifecyleObserver, \n  createUndoStack, \n  PointerSelectAction\n} from '@annotorious/core';\nimport type { \n  Annotator, \n  DrawingStyleExpression, \n  Filter, \n  PresenceProvider, \n  User \n} from '@annotorious/core';\nimport { \n  createImageAnnotatorState, \n  fillDefaults, \n  getTool,\n  initKeyboardCommands,\n  isTouch,\n  listDrawingTools,\n  registerTool,\n  registerEditor\n} from '@annotorious/annotorious';\nimport type {\n  AnnotoriousOpts, \n  DrawingTool, \n  DrawingToolOpts, \n  ImageAnnotation, \n  ShapeType, \n  Theme\n} from '@annotorious/annotorious';\nimport type { PixiLayerClickEvent } from './annotation';\nimport { PixiLayer, SVGDrawingLayer, SVGPresenceLayer } from './annotation';\nimport { setTheme as _setTheme } from './themes';\nimport { \n  fitBounds as _fitBounds, \n  fitBoundsWithConstraints as _fitBoundsWithConstraints, \n  type FitboundsOptions \n} from './api';\n\nimport '@annotorious/annotorious/annotorious.css';\n\nexport interface OpenSeadragonAnnotator<E extends unknown = ImageAnnotation> extends Annotator<ImageAnnotation, E> {\n\n  viewer: OpenSeadragon.Viewer;\n\n  fitBounds(arg: { id: string } | string, opts?: FitboundsOptions): void;\n\n  fitBoundsWithConstraints(arg: { id: string } | string, opts?: FitboundsOptions): void;\n\n  listDrawingTools(): string[];\n\n  registerDrawingTool(name: string, tool: typeof SvelteComponent, opts?: DrawingToolOpts): void;\n\n  registerShapeEditor(shapeType: ShapeType, editor: typeof SvelteComponent): void;\n\n  setDrawingTool(name: DrawingTool): void;\n\n  setDrawingEnabled(enabled: boolean): void;\n\n  setTheme(theme: 'light' | 'dark' | 'auto'): void;\n\n}\n\nexport const createOSDAnnotator = <E extends unknown = ImageAnnotation>(\n  viewer: OpenSeadragon.Viewer, \n  options: AnnotoriousOpts<ImageAnnotation, E> = {}\n): OpenSeadragonAnnotator<E> => {\n\n  const opts = fillDefaults<ImageAnnotation, E>(options, {\n    drawingEnabled: false,\n    drawingMode: isTouch ? 'drag' : 'click',\n    pointerSelectAction: PointerSelectAction.EDIT,\n    theme: 'light'\n  });\n\n  const state = createImageAnnotatorState(opts);\n\n  const { hover, selection, store } = state;\n\n  const undoStack = createUndoStack(store);\n\n  const lifecycle = createLifecyleObserver(\n    state, undoStack, opts.adapter, opts.autoSave);\n\n  let currentUser: User = createAnonymousGuest();\n\n  let drawingEnabled = opts.drawingEnabled;\n\n  let drawingMode = opts.drawingMode;\n\n  const keyboardCommands = initKeyboardCommands(undoStack, viewer.element);\n\n  const displayLayer = new PixiLayer({\n    target: viewer.element,\n    props: { \n      state, \n      viewer, \n      style: opts.style,\n      filter: undefined\n    }\n  });\n\n  const presenceLayer = new SVGPresenceLayer({\n    target: viewer.element.querySelector('.openseadragon-canvas')!,\n    props: { \n      provider: undefined,\n      store,\n      viewer\n    }\n  });\n\n  const drawingLayer = new SVGDrawingLayer({\n    target: viewer.element.querySelector('.openseadragon-canvas')!,\n    props: { \n      drawingEnabled: Boolean(drawingEnabled),\n      filter: undefined,\n      preferredDrawingMode: drawingMode!,\n      state,\n      style: opts.style,\n      user: currentUser, \n      viewer\n    }\n  });\n\n  displayLayer.$on('click', (evt: CustomEvent<PixiLayerClickEvent>) => {\n    const { originalEvent, annotation } = evt.detail;\n\n    // Ignore click event if drawing is currently active with mode  'click'\n    const blockEvent = drawingMode === 'click' && drawingEnabled;\n\n    if (annotation && !blockEvent)\n      selection.clickSelect(annotation.id, originalEvent);\n    else if (!selection.isEmpty())\n      selection.clear();\n  });\n\n  viewer.element.addEventListener('pointerdown', (event: PointerEvent) => {\n    if (hover.current) {\n      const hovered = store.getAnnotation(hover.current)!;\n      lifecycle.emit('clickAnnotation', hovered, event);\n    }\n  });\n  \n  _setTheme(viewer, opts.theme!);\n\n  /*************************/\n  /*      External API     */\n  /******++++++*************/\n\n  // Most of the external API functions are covered in the base annotator\n  const base = createBaseAnnotator<ImageAnnotation, E>(state, undoStack, opts.adapter);\n\n  const destroy = () => {\n    // Destroy Svelte layers\n    displayLayer.$destroy();\n    presenceLayer.$destroy();\n    drawingLayer.$destroy();\n\n    // Other cleanup actions\n    keyboardCommands.destroy();\n    undoStack.destroy();\n  }\n\n  const fitBounds = _fitBounds(viewer, store);\n\n  const fitBoundsWithConstraints = _fitBoundsWithConstraints(viewer, store);\n\n  const getUser = () => currentUser;\n\n  const registerDrawingTool = (name: string, tool: typeof SvelteComponent, opts?: DrawingToolOpts) =>\n    registerTool(name, tool, opts);\n\n  const registerShapeEditor = (shapeType: ShapeType, editor: typeof SvelteComponent) =>\n    registerEditor(shapeType, editor);\n\n  const setDrawingTool = (name: DrawingTool) => {\n    // Validate that the tool exists\n    const toolSpec = getTool(name);\n    if (!toolSpec)\n      throw `No drawing tool named ${name}`;\n    \n    // @ts-ignore\n    drawingLayer.$set({ toolName: name });\n  }\n\n  const setDrawingEnabled = (enabled: boolean) => {\n    drawingEnabled = enabled;\n    drawingLayer.$set({ drawingEnabled });\n  }\n\n  const setFilter = (filter: Filter | undefined) => {\n    // @ts-ignore\n    displayLayer.$set({ filter });\n    // @ts-ignore\n    drawingLayer.$set({ filter });\n  }\n\n  const setStyle = (style: DrawingStyleExpression<ImageAnnotation> | undefined) => {\n    displayLayer.$set({ style });\n    drawingLayer.$set({ style });\n  }\n\n  const setPresenceProvider = (provider: PresenceProvider) =>\n    // @ts-ignore\n    presenceLayer.$set({ provider });\n\n  const setTheme = (theme: Theme) => _setTheme(viewer, theme);\n\n  const setUser = (user: User) => {\n    currentUser = user;\n    drawingLayer.$set({ user });\n  }\n\n  const setVisible = (visible: boolean) =>\n    // @ts-ignore\n    displayLayer.$set({ visible });\n\n  return {\n    ...base,\n    destroy,\n    fitBounds,\n    fitBoundsWithConstraints,\n    getUser,\n    listDrawingTools,\n    on: lifecycle.on,\n    off: lifecycle.off,\n    registerDrawingTool,\n    registerShapeEditor,\n    setDrawingEnabled,\n    setDrawingTool,\n    setFilter,\n    setPresenceProvider,\n    setStyle,\n    setTheme,\n    setUser,\n    setVisible,\n    state,\n    viewer\n  }\n\n}\n","export * from './Annotorious';\n\n// Essential re-exports from @annotorious/core\nexport type {\n  Annotation,\n  AnnotationBody,\n  AnnotationState,\n  AnnotationTarget,\n  Annotator,\n  AnnotatorState,\n  Color,\n  DrawingStyle,\n  DrawingStyleExpression,\n  FormatAdapter,\n  HoverState,\n  Selection,\n  SelectionState,\n  Store,\n  StoreChangeEvent,\n  StoreObserver,\n  ParseResult,\n  User,\n  W3CAnnotation,\n  W3CAnnotationBody,\n  W3CAnnotationTarget\n} from '@annotorious/core';\n\nimport { \n  createBody as _createBody,\n  defaultColorProvider as _defaultColorProvider,\n  PointerSelectAction as _PointerSelectAction\n} from '@annotorious/core'; \n\nexport const defaultColorProvider = _defaultColorProvider;\nexport const PointerSelectAction = _PointerSelectAction;\nexport const createBody = _createBody;\n\n// Essential re-exports from @annotorious/annotorious \nexport type {\n  AnnotoriousOpts,\n  DrawingMode,\n  DrawingTool,\n  FragmentSelector,\n  ImageAnnotator as AnnotoriousImageAnnotator,\n  ImageAnnotation,\n  ImageAnnotator,\n  ImageAnnotatorState,\n  Polygon,\n  PolygonGeometry,\n  Rectangle,\n  RectangleGeometry,\n  Shape,\n  SVGSelector,\n  W3CImageAnnotation,\n  W3CImageAnnotationTarget\n} from '@annotorious/annotorious';\n\nimport {   \n  createImageAnnotator as _createImageAnnotator,\n  ShapeType as _ShapeType,\n  W3CImageFormat as _W3CImageFormat\n} from '@annotorious/annotorious';\n\nexport const createImageAnnotator = _createImageAnnotator;\nexport const ShapeType = _ShapeType;\nexport const W3CImageFormat = _W3CImageFormat;\n"],"names":["j","B","n","t","o","G","$","F","J","D","Q","X","M","Z","Ue","K","ee","te","ne","P","O","ie","s","p","L","E","y","h","u","U","w","b","S","W","ae","Te","a","A","m","R","Re","l","g","N","x","v","re","xe","ce","le","ue","fe","pe","Ie","me","Ae","i","nn","on","Ke","nt","Ut","dt","sn","Vt","ht","rn","Gt","ln","r","an","cn","gt","ze","fn","k","rt","C","zt","un","Ee","dn","Pe","Ht","Ye","de","we","He","mt","hn","ot","gn","Ft","it","We","mn","pn","Ge","he","I","Se","yn","c","f","oe","_n","q","lt","at","st","wn","Fe","bn","En","An","Sn","Tn","jt","pt","Mn","Ln","vn","kn","On","Bn","Ne","In","Pn","Yn","Dn","yt","qt","_t","ge","Je","Xn","ct","Cn","Kt","Qe","Rn","Nn","Un","Vn","Gn","zn","Hn","Wt","H","Fn","jn","qn","Kn","T","_","V","Y","Wn","Jn","Qn","Zn","xn","$n","eo","to","no","oo","io","so","ro","lo","ao","Jt","co","fo","Yi","uo","ho","wt","bt","ke","go","Et","At","mo","Zt","po","yo","Ze","ye","_o","wo","bo","Ao","So","To","Mo","Lo","Me","se","Le","z","qe","ut","De","Xe","Ce","vo","ko","Oo","Qt","Bo","Io","Po","St","Yo","Do","je","Xo","Co","Ro","No","Tt","Uo","Vo","Go","Mt","Lt","zo","Ho","Fo","jo","qo","ft","xt","$t","Ko","Wo","Jo","Qo","Zo","xo","$o","ei","ti","ni","oi","ii","si","ri","li","ai","en","vt","kt","$e","Ot","Bt","ci","fi","ui","It","Pt","hi","di","Yt","Xt","Dt","gi","mi","pi","yi","tn","_i","ve","wi","Ve","tt","be","bi","_e","Ct","et","Si","Be","Oe","Ti","Ei","Ai","Mi","d","Li","vi","ki","Oi","Rt","Bi","Nt","Ii","Xi","noop","assign","tar","src","run","blank_object","run_all","fns","is_function","thing","safe_not_equal","is_empty","obj","subscribe","store","callbacks","callback","unsub","component_subscribe","component","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","get_slot_changes","dirty","lets","merged","len","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","get_all_dirty_from_scope","length","exclude_internal_props","props","result","null_to_empty","value","globals","append","target","node","insert","anchor","detach","destroy_each","iterations","detaching","svg_element","name","text","data","space","empty","listen","event","handler","options","attr","attribute","children","element","set_data","toggle_class","toggle","custom_event","type","detail","bubbles","cancelable","current_component","set_current_component","get_current_component","onMount","onDestroy","createEventDispatcher","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","update_scheduled","schedule_update","flush","add_render_callback","seen_callbacks","flushidx","saved_component","update","e","$$","flush_render_callbacks","filtered","targets","outroing","outros","group_outros","check_outros","transition_in","block","local","transition_out","ensure_array_like","array_like_or_iterator","create_component","mount_component","fragment","after_update","new_on_destroy","destroy_component","make_dirty","init","instance","create_fragment","not_equal","append_styles","parent_component","ready","ret","rest","nodes","SvelteComponent","__publicField","index","PUBLIC_VERSION","ExtensionType","ExtensionType2","normalizeExtension","ext","normalizeExtensionPriority","defaultPriority","extensions","extensions2","_b","_a","handlers","queue","onAdd","onRemove","addHandlers","removeHandlers","map","extension","item","list","browserExt","webworkerExt","ObservablePoint","observer","has","prefix","Events","EE","context","once","addListener","emitter","listener","evt","clearEvent","EventEmitter","names","events","listeners","a1","a2","a3","a4","a5","args","module","PI_2","RAD_TO_DEG","DEG_TO_RAD","Point","tempPoint","Matrix","tx","ty","array","transpose","out","pos","newPos","id","angle","cos","sin","c1","tx1","matrix","b1","d1","b2","c2","d2","pivotX","pivotY","scaleX","scaleY","rotation","skewX","skewY","transform","pivot","delta","identityMatrix","tempMatrix","ux","uy","vx","vy","rotationCayley","rotationMatrices","signum","row","_ux","_uy","_vx","_vy","mat","groupD8","ind","rotationSecond","rotationFirst","dx","dy","tempPoints","Rectangle","width","height","bounds","rectangle","strokeWidth","_x","_y","outerLeft","outerRight","outerTop","outerBottom","innerLeft","innerRight","innerTop","innerBottom","other","x02","y02","x0","x1","y0","y1","lb","rb","nx","ny","n00","n10","n01","n11","mx","my","m00","m10","m01","m11","paddingX","paddingY","x2","y2","resolution","eps","uidCache","uid","warnings","v8_0_0","deprecation","version","message","ignoreDepth","stack","NOOP","nextPow2","isPow2","definedProps","key","idHash","createResourceIdFromString","_TextureStyle","bigKey","TextureStyle","_TextureSource","resource","newPixelWidth","newPixelHeight","_resource","TextureSource","BufferImageSource","buffer","format","tempMat","TextureMatrix","texture","clampMargin","uvs","tex","orig","trim","texBase","frame","margin","offset","Texture","source","label","defaultAnchor","defaultBorders","rotate","dynamic","nX","nY","nW","nH","w2","h2","cX","cY","destroySource","updateQuadBounds","padding","sourceWidth","sourceHeight","namesPlugin","extend","_Color","value1","value2","type1","keys1","keys2","alpha","applyToRGB","hexString","alphaString","int","match","color","colord","min","max","Color","cullingMixin","removeItems","arr","startIdx","removeCount","childrenHelperMixin","beginIndex","endIndex","end","range","removed","child","currentIndex","child2","index1","index2","FilterEffect","Pool","ClassType","initialSize","total","PoolGroupClass","Class","stats","pool","BigPool","MaskEffectManagerClass","test","effect","MaskEffectManager","effectsMixin","hasFilters","didChange","findMixin","deep","found","defaultMatrix","Bounds","minX","minY","maxX","maxY","rect","mask","left","right","top","bottom","vertexData","beginOffset","endOffset","localX","localY","matrixPool","boundsPool","getGlobalBounds","skipUpdateTransform","parentTransform","pooledMatrix","updateTransformBackwards","_getGlobalBounds","worldTransform","parentBounds","preserveBounds","parent","warnCount","maxWarnings","warn","getLocalBounds","relativeMatrix","_getLocalBounds","rootContainer","isRoot","relativeTransform","localTransform","checkChildrenDidChange","container","previousData","changeId","measureMixin","localWidth","sign","localHeight","localBoundsCacheData","skipUpdate","onRenderMixin","func","renderGroup","sortMixin","sortChildren","toLocalGlobalMixin","point","position","globalMatrix","from","InstructionSet","instruction","RenderGroup","root","renderGroupChild","childrenToUpdate","assignWithIgnore","ignore","defaultSkew","defaultPivot","defaultScale","UPDATE_COLOR","UPDATE_BLEND","UPDATE_VISIBLE","Container","renderGroupParent","parentRenderGroup","childRenderGroup","size","convertedWidth","convertedHeight","skew","opts","scale","sx","sy","px","py","bgr","valueNumber","destroyChildren","oldChildren","Sprite","roundPixels","skipCache","currentTexture","_bounds","sourceBounds","destroyTextureSource","tempBounds","addMaskBounds","boundsToMask","addMaskLocalBounds","localRoot","relativeMask","getMatrixRelativeToParent","AlphaMask","hitTestFn","ColorMask","StencilMask","BrowserAdapter","canvas","url","xml","currentAdapter","DOMAdapter","adapter","CanvasSource","didResize","ImageSource","UPDATE_PRIORITY","UPDATE_PRIORITY2","TickerListener","priority","ticker","redirect","previous","hard","_Ticker","time","current","count","currentTime","elapsedMS","head","fps","minFPS","minFPMS","maxFPS","shared","system","Ticker","promise","detectVideoAlphaMode","gl","video","resolve","video2","framebuffer","pixel","_VideoSource","reject","VideoSource","convertToList","input","forceTransform","CacheClass","keys","cacheableAssets","parser","cacheableMap","key2","cacheKeys","cachedAssets","val","cacheMap","Cache","sources","autoDetectSource","hasResource","res","Source","resourceToTexture","textureFrom","LoaderParserPriority","LoaderParserPriority2","assertPath","path2","removeUrlParams","escapeRegExp","string","replaceAll","str","find","replace","normalizeStringPosix","allowAboveRoot","lastSegmentLength","lastSlash","dots","code","lastSlashIndex","path","matchFile","matchProtocol","customBaseUrl","customRootUrl","baseUrl","rootUrl","protocol","isAbsolute","trailingSeparator","segments","joined","arg","prevArg","hasRoot","matchedSlash","proto","origpath","start","extIdx","firstNonSlashEnd","startDot","startPart","preDotState","processX","base","ids","depth","tags","createStringVariations","regex","vars","split","isSingleItem","Resolver","bundleId","assetId","assetBundleId","bundleIdentifier","preferOrders","prefer","basePath","rootPath","searchParams","queryValues","asset","alias","manifest","bundle","assets","assetNames","convertedAssets","srcs","aliases","bundleAssetId","bundleIds","keyCheck","loadParser","srcsToUse","src2","aliasesToUse","resolvedAssets","formattedAsset","singleAsset","results","preferredOrder","priorityKey","filteredAssets","preferred","preference","paramConnector","assetData","getUrlExtension","copySearchParams","targetUrl","sourceUrl","_Spritesheet","metaResolution","initialFrameIndex","frameIndex","maxFrames","sourceSize","animations","animName","frameName","destroyBase","Spritesheet","validImages","getCacheableAssets","ignoreMultiPack","out2","spritesheetAsset","loader","imageTexture","imageFilename","imagePath","spritesheet","multiPacks","promises","itemUrl","sp","_resolvedAsset","BindGroup","resources","keyParts","currentResource","tick","environments","autoDetectEnvironment","manageImports","env","unsafeEval","unsafeEvalSupported","earcutModule","earcut","holeIndices","dim","hasHoles","outerLen","outerNode","linkedList","triangles","invSize","eliminateHoles","earcutLinked","clockwise","last","signedArea","insertNode","equals","removeNode","filterPoints","again","area","ear","pass","indexCurve","stop","prev","next","isEarHashed","isEar","cureLocalIntersections","splitEarcut","ax","bx","cx","ay","by","cy","pointInTriangle","minZ","zOrder","maxZ","intersects","locallyInside","isValidDiagonal","splitPolygon","getLeftmost","compareX","eliminateHole","hole","bridge","findHoleBridge","bridgeReverse","hx","hy","qx","tanMin","tan","sectorContainsSector","sortLinked","tail","numMerges","pSize","qSize","inSize","leftmost","intersectsPolygon","middleInside","p1","p2","q1","q2","o1","o2","o3","o4","onSegment","num","inside","Node","bp","polygonArea","trianglesArea","sum","holeIndex","CLEAR","CLEAR2","SystemRunner","a0","a6","a7","items","defaultRunners","_AbstractRenderer","config","combinedRunners","systemName","deprecated","isRGBAArray","desiredScreenWidth","desiredScreenHeight","renderer","clear","clearColor","runnerIds","runnerId","systems","ClassRef","pipes","pipeAdaptors","adaptors","acc","adaptor","pipe","PipeClass","Adaptor","runner","AbstractRenderer","_isWebGLSupported","isWebGLSupported","failIfMajorPerformanceCaveat","contextOptions","success","loseContext","_isWebGPUSupported","isWebGPUSupported","renderPriority","autoDetectRenderer","RendererClass","finalOptions","rendererType","WebGPURenderer","WebGLRenderer","parseSvgPath","parse","segment","command","parseValues","number","numbers","SVGToGraphicsPath","svgPath","commands","subpaths","currentSubPath","lastX","lastY","Circle","radius","r2","distance","circle","Ellipse","halfWidth","halfHeight","normx","normy","halfStrokeWidth","innerA","innerB","outerA","outerB","normalizedX","normalizedY","innerEllipse","outerEllipse","ellipse","squaredDistanceToLineSegment","dot","lenSq","param","xx","yy","Polygon","points","flat","il","polygon","xi","xj","yj","halfStrokeWidthSqrd","iterationLength","pointsDesc","currentPoint","isCornerWithinStroke","pX","pY","cornerX","cornerY","RoundedRectangle","radius2","innerX","innerY","innerWidth","innerHeight","rightBound","bottomBound","BufferUsage","BufferUsage2","Buffer","usage","shrinkToFit","mappedAtCreation","syncGPU","oldData","sizeInBytes","ensureIsBuffer","getGeometryBounds","geometry","attributeId","byteSize","stride","ensureIsAttribute","Geometry","attributes","indexBuffer","topology","destroyBuffers","placeHolderBufferData","placeHolderIndexData","BatchGeometry","attributeBuffer","MAX_TEXTURES","cachedGroups","getTextureBatchBindGroup","textures","generateTextureBatchBindGroup","bindGroupResources","bindIndex","bindGroup","ViewableBuffer","sizeOrBuffer","fastCopy","sourceBuffer","destinationBuffer","lengthDouble","sourceFloat64View","remainingBytes","sourceUint8View","BLEND_TO_NPM","STENCIL_MODES","STENCIL_MODES2","getAdjustedBlendModeBlend","blendMode","textureSource","BatchTextureArray","Batch","BATCH_TICK","_Batcher","vertexSize","indexSize","batchableObject","textureId","instructionSet","elements","textureBatch","firstElement","f32","u32","iBuffer","action","batch","adjustedBlendMode","blendModeChange","indexStart","newSize","newArrayBuffer","newIndexBuffer","Batcher","buildUvs","vertices","verticesStride","verticesOffset","uvsOffset","uvsStride","buildSimpleUvs","transformVertices","multiplyHexColors","color1","color2","r1","g1","g2","BatchableGraphics","indicesOffset","indices","float32View","uint32View","graphics","positions","vertSize","rgb","argb","textureIdAndRound","gpuBuffer","buildCircle","shape","rx","ry","roundedRect","j1","j2","j3","j4","y22","x12","x22","y12","centerX","centerY","centerIndex","closePointEps","curveEps","getOrientationOfPoints","square","innerWeight","outerWeight","verts","ix","iy","ox","oy","exx","eyy","eix","eiy","eox","eoy","round","ex","ey","cx2p0x","cy2p0y","angle0","angle1","startAngle","angleDiff","absAngleDiff","segCount","angleInc","buildLine","lineStyle","flipAlignment","closed","_verticesStride","_verticesOffset","_indicesOffset","style","alignment","orientation","firstPoint","lastPoint","closedShape","closedPath","midPointX","midPointY","indexCount","widthSquared","miterLimitSquared","perpX","perpY","perp1x","perp1y","dist","ratio","dx0","dy0","dx1","dy1","cross","pDist","imx","imy","omx","omy","smallerInsideSegmentSq","insideWeight","smallerInsideDiagonalSq","eps2","triangulateWithHoles","holes","emptyArray","buildPolygon","buildRectangle","rectData","verticesIndex","buildTriangle","buildMap","tempRect","buildContextBatches","gpuContext","geometryData","batches","addTextureToGeometryData","isStroke","shapePath","addShapePathToGeometryData","indexOffset","vertOffset","build","textureUvs","graphicsBatch","lastIndex","close","otherPoints","getHoleArrays","holePoints","textureMatrix","holePrimitives","holeArrays","holePrimitive","GpuGraphicsContext","GraphicsContextRenderData","_GraphicsContextSystem","batchMode","graphicsData","batcher","drawBatches","GraphicsContextSystem","RECURSION_LIMIT","FLT_EPSILON","PATH_DISTANCE_EPSILON","buildAdaptiveBezier","sX","sY","cp1x","cp1y","cp2x","cp2y","eX","eY","smoothness","smoothing","distanceTolerance","begin","recursive","x3","y3","x4","y4","level","x23","y23","x34","y34","x123","y123","x234","y234","x1234","y1234","d3","buildAdaptiveQuadratic","buildArc","steps","cs","buildArcTo","fromX","mm","dd","cc","k1","k2","qy","endAngle","TAU","mapToEllipse","cosPhi","sinPhi","xp","yp","approxUnitArc","ang1","ang2","vectorAngle","getArcCenter","largeArcFlag","sweepFlag","pxp","pyp","rxSq","rySq","pxpSq","pypSq","radicant","centerXp","centerYp","vx1","vy1","vx2","vy2","buildArcToSvg","xAxisRotation","lambda","outCurvePoint","curve","roundedShapeArc","vecFrom","pp","sharpCorner","pRadius","p3","v1","v2","radDirection","drawDirection","halfAngle","cRadius","lenOut","roundedShapeQuadraticCurve","pointLerp","numPoints","thisPoint","nextPoint","lastEdgeLength","lastOffsetDistance","nextEdgeLength","nextOffsetDistance","tempRectangle","ShapePath","graphicsPath2D","fromY","counterclockwise","currentPoly","closePath","sides","corner","sideLength","internalAngle","useQuadratic","fillet","maxFillet","inset","dir","chamfer","radiusX","radiusY","lastShape","lx","ly","tempX","shapePrimitives","shapePrimitive","boundsRect","GraphicsPath","instructions","currentX","currentY","cpx1","cpy1","innerRadius","newGraphicsPath2D","cpx2","cpy2","adjustTransform","lastInstruction","currentMatrix","SVGParser","svg","graphicsContext","div","session","renderChildren","fillStyle","strokeStyle","f1","s1","parseStyle","pointsString","graphicsPath","parseFloatAttribute","defaultValue","useFill","useStroke","styleParts","stylePart","stroke","fill","_FillGradient","defaultSize","gradientStops","gradient","FillGradient","repetitionMap","FillPattern","repetition","convertFillInputToFillStyle","defaultStyle","fillStyleToParse","styleToMerge","temp","pattern","sourceStyle","tmpPoint","_GraphicsContext","clone","tint","dw","dh","holePath","transformedX","transformedY","cpx","cpy","state","hasHit","shapes","transformedPoint","holeShapes","GraphicsContext","Graphics","method","quickselect","compare","quickselectStep","defaultCompare","sd","newLeft","newRight","swap","tmp","RBush","maxEntries","bbox","toBBox","nodesToSearch","childBBox","contains","tmpNode","createNode","equalsFn","indexes","goingUp","findItem","calcBBox","N2","N1","multiSelect","right2","right3","minArea","minEnlargement","targetNode","bboxArea","enlargement","enlargedArea","isNode","insertPath","splitIndex","newNode","minOverlap","bbox1","distBBox","bbox2","overlap","intersectionArea","compareMinX","compareNodeMinX","compareMinY","compareNodeMinY","xMargin","yMargin","leftBBox","rightBBox","bboxMargin","siblings","destNode","mid","DEFAULT_FILL","DEFAULT_ALPHA","UPDATE_SCALE_THRESHOLD","UPDATE_MOVE_THRESHOLD","OFFSET_SEARCH","StageRenderer","OpenSeadragon","viewportBounds","offsetX","offsetY","annotationId","annotation","PIXI.Color","fillGraphics","PIXI.Graphics","lineWidth","strokeGraphics","flattend","xy","viewer","containerWidth","center","drawFn","thresholdX","thresholdY","PIXI.Container","PIXI.autoDetectRenderer","annotationShapes","selectedIds","hovered","addAnnotation","selector","rendered","ShapeType","removeAnnotation","updateAnnotation","oldValue","newValue","redrawAnnotation","resize","setFilter","filter","visible","setHovered","setSelected","selection","nextIds","toSelect","toDeselect","setStyle","setVisible","$$props","hover","viewport","dispatch","stage","resoleStage","waitStage","lastPress","getImageXY","offsetXY","onCanvasPress","onPointerMove","hit","$hover","onCanvasRelease","originalEvent","currentViewportBounds","offsetWidth","offsetHeight","moveHandler","updateViewportState","intersecting","$$invalidate","entries","created","updated","deleted","$selection","getRandomValues","rnds8","rng","byteToHex","unsafeStringify","randomUUID","native","v4","buf","rnds","registerShapeUtil","util","boundsFromPoints","EllipseUtil","rot","tdx","tdy","PolygonUtil","RectangleUtil","handle_changes","each_value","polygon0","polygon0_points_value","polygon1","polygon1_points_value","func_1","each_blocks","grab","computedStyle","viewportScale","editor","handle","geom","idx","isTouch","rect_class_value","circle_r_value","create_if_block","touched","onPointerDown","onPointerUp","handleSize","rect0","rect0_x_value","rect0_y_value","rect0_width_value","rect0_height_value","rect1","rect1_x_value","rect1_y_value","rect1_width_value","rect1_height_value","rect2","rect2_x_value","rect2_y_value","rect2_width_value","rect3","rect3_x_value","rect3_y_value","rect3_height_value","rect4","rect4_x_value","rect4_y_value","rect4_width_value","rect5","rect5_x_value","rect5_y_value","rect5_height_value","handle0_changes","handle1_changes","handle2_changes","handle3_changes","initialBounds","grabbedHandle","origin","initialShape","onGrab","onRelease","computeStyle","computed","fillOpacity","css","editorComponent","layerTransform","onUpdateViewport","zoom","flipped","drawingMode","tool","toolComponent","cleanup","addEventListener","capture","osdHandler","osdName","dragHandler","editormount_changes","previous_key","drawingEnabled","preferredDrawingMode","toolName","listDrawingTools","user","drawingEl","storeObserver","editableAnnotations","grabbedAt","trackSelection","selected","editableIds","editable","change","toolTransform","onChangeSelected","GRACE_PERIOD","isUpdate","onSelectionCreated","uuidv4","getEditor","_getEditor","$$value","getTool","rect_height_value","text_1","text_1_font_size_value","text_1_x_value","g_1","t_value","hAlign","setWidth","textEl","rectEl","polygon_points_value","svgpresencelabel_changes","getHighestPoint","highestPoint","rect_x_value","rect_y_value","rect_width_value","svgpresencepolygon_changes","svgpresencerectangle_changes","create_if_block_1","show_if","provider","trackedAnnotations","onSelectionChange","selectedBy","deletedIds","tracked","setTheme","theme","itemCount","fullyLoaded","detected","detectTheme","_fitBounds","containerBounds","pr","pb","pl","padX","padY","padW","padH","fitBounds","fitBoundsWithConstraints","createOSDAnnotator","fillDefaults","PointerSelectAction","createImageAnnotatorState","undoStack","createUndoStack","lifecycle","createLifecyleObserver","currentUser","createAnonymousGuest","keyboardCommands","initKeyboardCommands","displayLayer","PixiLayer","presenceLayer","SVGPresenceLayer","drawingLayer","SVGDrawingLayer","_setTheme","createBaseAnnotator","destroy","_fitBoundsWithConstraints","getUser","registerDrawingTool","registerTool","registerShapeEditor","shapeType","registerEditor","setDrawingTool","setDrawingEnabled","enabled","setPresenceProvider","setUser","defaultColorProvider","_defaultColorProvider","_PointerSelectAction","createBody","_createBody","createImageAnnotator","_createImageAnnotator","_ShapeType","W3CImageFormat","_W3CImageFormat"],"mappings":"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","x_google_ignoreList":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,151,152,153,154]}