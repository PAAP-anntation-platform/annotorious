{"version":3,"file":"annotorious-openseadragon.js","sources":["../../annotorious-core/dist/annotorious-core.es.js","../../annotorious/dist/annotorious.es.js","../../../node_modules/svelte/src/runtime/internal/utils.js","../../../node_modules/svelte/src/runtime/internal/globals.js","../../../node_modules/svelte/src/runtime/internal/dom.js","../../../node_modules/svelte/src/runtime/internal/lifecycle.js","../../../node_modules/svelte/src/runtime/internal/scheduler.js","../../../node_modules/svelte/src/runtime/internal/transitions.js","../../../node_modules/svelte/src/runtime/internal/each.js","../../../node_modules/svelte/src/runtime/internal/Component.js","../../../node_modules/svelte/src/shared/version.js","../../../node_modules/svelte/src/runtime/internal/disclose-version/index.js","../../../node_modules/pixi.js/lib/extensions/Extensions.mjs","../../../node_modules/pixi.js/lib/environment-browser/browserExt.mjs","../../../node_modules/pixi.js/lib/environment-webworker/webworkerExt.mjs","../../../node_modules/pixi.js/lib/maths/point/ObservablePoint.mjs","../../../node_modules/eventemitter3/index.js","../../../node_modules/pixi.js/lib/maths/misc/const.mjs","../../../node_modules/pixi.js/lib/maths/point/Point.mjs","../../../node_modules/pixi.js/lib/maths/matrix/Matrix.mjs","../../../node_modules/pixi.js/lib/maths/matrix/groupD8.mjs","../../../node_modules/pixi.js/lib/maths/shapes/Rectangle.mjs","../../../node_modules/pixi.js/lib/utils/data/uid.mjs","../../../node_modules/pixi.js/lib/utils/logging/deprecation.mjs","../../../node_modules/pixi.js/lib/utils/misc/NOOP.mjs","../../../node_modules/pixi.js/lib/maths/misc/pow2.mjs","../../../node_modules/pixi.js/lib/scene/container/utils/definedProps.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/TextureStyle.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/TextureSource.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/BufferSource.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/TextureMatrix.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/Texture.mjs","../../../node_modules/pixi.js/lib/utils/data/updateQuadBounds.mjs","../../../node_modules/@pixi/colord/index.mjs","../../../node_modules/@pixi/colord/plugins/names.mjs","../../../node_modules/pixi.js/lib/color/Color.mjs","../../../node_modules/pixi.js/lib/culling/cullingMixin.mjs","../../../node_modules/pixi.js/lib/utils/data/removeItems.mjs","../../../node_modules/pixi.js/lib/scene/container/container-mixins/childrenHelperMixin.mjs","../../../node_modules/pixi.js/lib/filters/FilterEffect.mjs","../../../node_modules/pixi.js/lib/utils/pool/Pool.mjs","../../../node_modules/pixi.js/lib/utils/pool/PoolGroup.mjs","../../../node_modules/pixi.js/lib/rendering/mask/MaskEffectManager.mjs","../../../node_modules/pixi.js/lib/scene/container/container-mixins/effectsMixin.mjs","../../../node_modules/pixi.js/lib/scene/container/container-mixins/findMixin.mjs","../../../node_modules/pixi.js/lib/scene/container/bounds/Bounds.mjs","../../../node_modules/pixi.js/lib/scene/container/bounds/utils/matrixAndBoundsPool.mjs","../../../node_modules/pixi.js/lib/scene/container/bounds/getGlobalBounds.mjs","../../../node_modules/pixi.js/lib/utils/logging/warn.mjs","../../../node_modules/pixi.js/lib/scene/container/bounds/getLocalBounds.mjs","../../../node_modules/pixi.js/lib/scene/container/utils/checkChildrenDidChange.mjs","../../../node_modules/pixi.js/lib/scene/container/container-mixins/measureMixin.mjs","../../../node_modules/pixi.js/lib/scene/container/container-mixins/onRenderMixin.mjs","../../../node_modules/pixi.js/lib/scene/container/container-mixins/sortMixin.mjs","../../../node_modules/pixi.js/lib/scene/container/container-mixins/toLocalGlobalMixin.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/instructions/InstructionSet.mjs","../../../node_modules/pixi.js/lib/scene/container/RenderGroup.mjs","../../../node_modules/pixi.js/lib/scene/container/utils/assignWithIgnore.mjs","../../../node_modules/pixi.js/lib/scene/container/Container.mjs","../../../node_modules/pixi.js/lib/scene/sprite/Sprite.mjs","../../../node_modules/pixi.js/lib/rendering/mask/utils/addMaskBounds.mjs","../../../node_modules/pixi.js/lib/rendering/mask/utils/addMaskLocalBounds.mjs","../../../node_modules/pixi.js/lib/rendering/mask/alpha/AlphaMask.mjs","../../../node_modules/pixi.js/lib/rendering/mask/color/ColorMask.mjs","../../../node_modules/pixi.js/lib/rendering/mask/stencil/StencilMask.mjs","../../../node_modules/pixi.js/lib/environment/adapter.mjs","../../../node_modules/pixi.js/lib/environment-browser/BrowserAdapter.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/CanvasSource.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/ImageSource.mjs","../../../node_modules/pixi.js/lib/ticker/const.mjs","../../../node_modules/pixi.js/lib/ticker/TickerListener.mjs","../../../node_modules/pixi.js/lib/ticker/Ticker.mjs","../../../node_modules/pixi.js/lib/utils/browser/detectVideoAlphaMode.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/VideoSource.mjs","../../../node_modules/pixi.js/lib/assets/utils/convertToList.mjs","../../../node_modules/pixi.js/lib/assets/cache/Cache.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/utils/textureFrom.mjs","../../../node_modules/pixi.js/lib/rendering/init.mjs","../../../node_modules/pixi.js/lib/assets/loader/parsers/LoaderParser.mjs","../../../node_modules/pixi.js/lib/utils/path.mjs","../../../node_modules/pixi.js/lib/assets/utils/createStringVariations.mjs","../../../node_modules/pixi.js/lib/assets/utils/isSingleItem.mjs","../../../node_modules/pixi.js/lib/assets/resolver/Resolver.mjs","../../../node_modules/pixi.js/lib/assets/utils/copySearchParams.mjs","../../../node_modules/pixi.js/lib/spritesheet/Spritesheet.mjs","../../../node_modules/pixi.js/lib/spritesheet/spritesheetAsset.mjs","../../../node_modules/pixi.js/lib/spritesheet/init.mjs","../../../node_modules/pixi.js/lib/events/FederatedEvent.mjs","../../../node_modules/ismobilejs/esm/isMobile.js","../../../node_modules/pixi.js/lib/utils/browser/isMobile.mjs","../../../node_modules/pixi.js/lib/accessibility/AccessibilitySystem.mjs","../../../node_modules/pixi.js/lib/accessibility/accessibilityTarget.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/utils/createIdFromString.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/getTestContext.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/getMaxFragmentPrecision.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/addProgramDefines.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/ensurePrecision.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/insertVersion.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/setProgramName.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/stripVersion.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/GlProgram.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/extractAttributesFromGpuProgram.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/extractStructAndGroups.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/shader/const.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/generateGpuLayoutGroups.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/generateLayoutHash.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/removeStructAndGroupDuplicates.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/GpuProgram.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/shader/utils/getDefaultUniformValue.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/shader/UniformGroup.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/BindGroup.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/types.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/shader/Shader.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/state/State.mjs","../../../node_modules/pixi.js/lib/filters/Filter.mjs","../../../node_modules/pixi.js/lib/environment/autoDetectEnvironment.mjs","../../../node_modules/pixi.js/lib/utils/browser/unsafeEvalSupported.mjs","../../../node_modules/earcut/src/earcut.js","../../../node_modules/pixi.js/lib/rendering/renderers/gl/const.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/system/SystemRunner.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/system/AbstractRenderer.mjs","../../../node_modules/pixi.js/lib/utils/browser/isWebGLSupported.mjs","../../../node_modules/pixi.js/lib/utils/browser/isWebGPUSupported.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/autoDetectRenderer.mjs","../../../node_modules/pixi.js/lib/app/ResizePlugin.mjs","../../../node_modules/pixi.js/lib/app/TickerPlugin.mjs","../../../node_modules/parse-svg-path/index.js","../../../node_modules/pixi.js/lib/scene/graphics/shared/svg/SVGToGraphicsPath.mjs","../../../node_modules/pixi.js/lib/maths/shapes/Circle.mjs","../../../node_modules/pixi.js/lib/maths/shapes/Ellipse.mjs","../../../node_modules/pixi.js/lib/maths/misc/squaredDistanceToLineSegment.mjs","../../../node_modules/pixi.js/lib/maths/shapes/Polygon.mjs","../../../node_modules/pixi.js/lib/maths/shapes/RoundedRectangle.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/buffer/const.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/buffer/Buffer.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/ensureIsBuffer.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/getGeometryBounds.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/Geometry.mjs","../../../node_modules/pixi.js/lib/rendering/batcher/gpu/BatchGeometry.mjs","../../../node_modules/pixi.js/lib/rendering/batcher/shared/const.mjs","../../../node_modules/pixi.js/lib/rendering/batcher/gpu/getTextureBatchBindGroup.mjs","../../../node_modules/pixi.js/lib/utils/data/ViewableBuffer.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/buffer/utils/fastCopy.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/state/const.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs","../../../node_modules/pixi.js/lib/rendering/batcher/shared/BatchTextureArray.mjs","../../../node_modules/pixi.js/lib/rendering/batcher/shared/Batcher.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/buildUvs.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/transformVertices.mjs","../../../node_modules/pixi.js/lib/scene/container/utils/multiplyHexColors.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/BatchableGraphics.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildCircle.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/const.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/utils/getOrientationOfPoints.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildLine.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/utils/triangulateWithHoles.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildPolygon.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/utils/buildContextBatches.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildRectangle.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildTriangle.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/GraphicsContextSystem.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildAdaptiveBezier.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildAdaptiveQuadratic.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArc.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArcTo.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArcToSvg.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/path/roundShape.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/path/ShapePath.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/path/GraphicsPath.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/svg/SVGParser.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/fill/FillGradient.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/fill/FillPattern.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/utils/convertFillInputToFillStyle.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/GraphicsContext.mjs","../../../node_modules/pixi.js/lib/events/EventTicker.mjs","../../../node_modules/pixi.js/lib/events/FederatedMouseEvent.mjs","../../../node_modules/pixi.js/lib/events/FederatedPointerEvent.mjs","../../../node_modules/pixi.js/lib/events/FederatedWheelEvent.mjs","../../../node_modules/pixi.js/lib/events/EventBoundary.mjs","../../../node_modules/pixi.js/lib/events/EventSystem.mjs","../../../node_modules/pixi.js/lib/events/FederatedEventTarget.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/TexturePool.mjs","../../../node_modules/pixi.js/lib/filters/FilterPipe.mjs","../../../node_modules/pixi.js/lib/scene/container/bounds/getFastGlobalBounds.mjs","../../../node_modules/pixi.js/lib/scene/container/bounds/getRenderableBounds.mjs","../../../node_modules/pixi.js/lib/filters/FilterSystem.mjs","../../../node_modules/pixi.js/lib/filters/mask/mask.frag.mjs","../../../node_modules/pixi.js/lib/filters/mask/mask.vert.mjs","../../../node_modules/pixi.js/lib/filters/mask/mask.wgsl.mjs","../../../node_modules/pixi.js/lib/filters/mask/MaskFilter.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/Graphics.mjs","../../../node_modules/pixi.js/lib/scene/mesh/shared/MeshGeometry.mjs","../../../node_modules/pixi.js/lib/scene/text/canvas/utils/fontStringFromTextStyle.mjs","../../../node_modules/pixi.js/lib/scene/text/canvas/CanvasTextMetrics.mjs","../../../node_modules/pixi.js/lib/scene/text/utils/generateTextStyleKey.mjs","../../../node_modules/pixi.js/lib/scene/text/TextStyle.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/CanvasPool.mjs","../../../node_modules/pixi.js/lib/scene/text/canvas/utils/getCanvasFillStyle.mjs","../../../node_modules/pixi.js/lib/scene/text-bitmap/AbstractBitmapFont.mjs","../../../node_modules/pixi.js/lib/scene/text-bitmap/utils/resolveCharacters.mjs","../../../node_modules/pixi.js/lib/scene/text-bitmap/DynamicBitmapFont.mjs","../../../node_modules/pixi.js/lib/scene/text-bitmap/utils/getBitmapTextLayout.mjs","../../../node_modules/pixi.js/lib/scene/text-bitmap/BitmapFontManager.mjs","../../../node_modules/pixi.js/lib/scene/text-html/utils/textStyleToCSS.mjs","../../../node_modules/pixi.js/lib/scene/text-html/HtmlTextStyle.mjs","../../../node_modules/pixi.js/lib/scene/text-html/HTMLTextRenderData.mjs","../../../node_modules/pixi.js/lib/scene/text-html/utils/measureHtmlText.mjs","../../../node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/addBits.mjs","../../../node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/compileHooks.mjs","../../../node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/compileInputs.mjs","../../../node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/compileOutputs.mjs","../../../node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/injectBits.mjs","../../../node_modules/pixi.js/lib/rendering/high-shader/compiler/compileHighShader.mjs","../../../node_modules/pixi.js/lib/rendering/high-shader/defaultProgramTemplate.mjs","../../../node_modules/pixi.js/lib/rendering/high-shader/shader-bits/globalUniformsBit.mjs","../../../node_modules/pixi.js/lib/rendering/high-shader/compileHighShaderToProgram.mjs","../../../node_modules/pixi.js/lib/rendering/high-shader/shader-bits/colorBit.mjs","../../../node_modules/pixi.js/lib/rendering/high-shader/shader-bits/generateTextureBatchBit.mjs","../../../node_modules/pixi.js/lib/rendering/high-shader/shader-bits/roundPixelsBit.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/batchSamplersUniformGroup.mjs","../../../node_modules/pixi.js/lib/rendering/batcher/gl/GlBatchAdaptor.mjs","../../../node_modules/pixi.js/lib/rendering/batcher/gpu/GpuBatchAdaptor.mjs","../../../node_modules/pixi.js/lib/rendering/batcher/shared/BatcherPipe.mjs","../../../node_modules/pixi.js/lib/rendering/high-shader/shader-bits/localUniformBit.mjs","../../../node_modules/pixi.js/lib/rendering/high-shader/shader-bits/textureBit.mjs","../../../node_modules/pixi.js/lib/scene/container/utils/buildInstructions.mjs","../../../node_modules/pixi.js/lib/rendering/mask/alpha/AlphaMaskPipe.mjs","../../../node_modules/pixi.js/lib/rendering/mask/color/ColorMaskPipe.mjs","../../../node_modules/pixi.js/lib/rendering/mask/stencil/StencilMaskPipe.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/buffer/const.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/buffer/GlBuffer.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/buffer/GlBufferSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/context/GlContextSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/ensureAttributes.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/const.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/geometry/utils/getGlTypeFromFormat.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/geometry/GlGeometrySystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/GlBackBufferSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/GlColorMaskSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/GlEncoderSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/GlRenderTarget.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/state/GpuStencilModesToPixi.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/GlStencilSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/shader/UboSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/utils/createUboElementsSTD40.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/shader/utils/uniformParsers.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/shader/utils/createUboSyncFunction.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/shader/utils/uboSyncFunctions.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/utils/generateArraySyncSTD40.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/utils/createUboSyncSTD40.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/GlUboSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/renderTarget/GlRenderTargetAdaptor.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/renderTarget/calculateProjection.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/utils/getCanvasTexture.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/renderTarget/isRenderingToScreen.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/renderTarget/RenderTarget.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/renderTarget/RenderTargetSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/renderTarget/GlRenderTargetSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/buffer/BufferResource.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/GenerateShaderSyncCode.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/GlProgramData.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/compileShader.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/defaultValue.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/mapType.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/extractAttributesFromGlProgram.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/getUboData.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/getUniformData.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/logProgramError.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/generateProgram.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/GlShaderSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/utils/generateUniformsSyncTypes.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/utils/generateUniformsSync.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/GlUniformGroupSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/state/mapWebGLBlendModesToPixi.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/state/GlStateSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/GlTexture.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/uploaders/glUploadBufferImageResource.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/uploaders/glUploadCompressedTextureResource.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/uploaders/glUploadImageResource.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/uploaders/glUploadVideoResource.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/utils/pixiToGlMaps.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/utils/applyStyleParams.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/utils/mapFormatToGlFormat.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/utils/mapFormatToGlInternalFormat.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/utils/mapFormatToGlType.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/texture/GlTextureSystem.mjs","../../../node_modules/pixi.js/lib/scene/graphics/gl/GlGraphicsAdaptor.mjs","../../../node_modules/pixi.js/lib/scene/mesh/gl/GlMeshAdaptor.mjs","../../../node_modules/pixi.js/lib/scene/container/CustomRenderPipe.mjs","../../../node_modules/pixi.js/lib/scene/container/utils/executeInstructions.mjs","../../../node_modules/pixi.js/lib/scene/container/RenderGroupPipe.mjs","../../../node_modules/pixi.js/lib/scene/container/utils/collectRenderGroups.mjs","../../../node_modules/pixi.js/lib/scene/container/utils/mixHexColors.mjs","../../../node_modules/pixi.js/lib/scene/container/utils/mixColors.mjs","../../../node_modules/pixi.js/lib/scene/container/utils/updateRenderGroupTransforms.mjs","../../../node_modules/pixi.js/lib/scene/container/utils/validateRenderables.mjs","../../../node_modules/pixi.js/lib/scene/container/RenderGroupSystem.mjs","../../../node_modules/pixi.js/lib/scene/sprite/BatchableSprite.mjs","../../../node_modules/pixi.js/lib/scene/sprite/SpritePipe.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/background/BackgroundSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/blendModes/BlendModePipe.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/extract/ExtractSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/RenderTexture.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/extract/GenerateTextureSystem.mjs","../../../node_modules/pixi.js/lib/scene/graphics/gpu/colorToUniform.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/renderTarget/GlobalUniformSystem.mjs","../../../node_modules/pixi.js/lib/utils/sayHello.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/startup/HelloSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/TextureGCSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/view/ViewSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/shared/system/SharedSystems.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gl/WebGLRenderer.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/BindGroupSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/buffer/GpuBufferSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/buffer/UboBatch.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/GpuColorMaskSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/GpuDeviceSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/GpuEncoderSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/GpuStencilSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/createUboElementsWGSL.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/generateArraySyncWGSL.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/createUboSyncFunctionWGSL.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/GpuUboSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/GpuUniformBatchPipe.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/pipeline/PipelineSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/renderTarget/GpuRenderTarget.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/renderTarget/GpuRenderTargetAdaptor.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/renderTarget/GpuRenderTargetSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/GpuShaderSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/state/GpuBlendModesToPixi.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/state/GpuStateSystem.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/texture/uploaders/gpuUploadBufferImageResource.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/texture/uploaders/gpuUploadCompressedTextureResource.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/texture/uploaders/gpuUploadImageSource.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/texture/uploaders/gpuUploadVideoSource.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/texture/utils/GpuMipmapGenerator.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/texture/GpuTextureSystem.mjs","../../../node_modules/pixi.js/lib/scene/graphics/gpu/GpuGraphicsAdaptor.mjs","../../../node_modules/pixi.js/lib/scene/mesh/gpu/GpuMeshAdapter.mjs","../../../node_modules/pixi.js/lib/rendering/renderers/gpu/WebGPURenderer.mjs","../../../node_modules/pixi.js/lib/scene/graphics/shared/GraphicsPipe.mjs","../../../node_modules/pixi.js/lib/scene/mesh-plane/PlaneGeometry.mjs","../../../node_modules/pixi.js/lib/scene/mesh/shared/BatchableMesh.mjs","../../../node_modules/pixi.js/lib/scene/mesh/shared/MeshPipe.mjs","../../../node_modules/pixi.js/lib/scene/sprite-nine-slice/NineSliceGeometry.mjs","../../../node_modules/pixi.js/lib/scene/sprite-nine-slice/NineSliceSpritePipe.mjs","../../../node_modules/pixi.js/lib/scene/sprite-tiling/shader/tilingBit.mjs","../../../node_modules/pixi.js/lib/scene/sprite-tiling/shader/TilingSpriteShader.mjs","../../../node_modules/pixi.js/lib/scene/sprite-tiling/utils/QuadGeometry.mjs","../../../node_modules/pixi.js/lib/scene/sprite-tiling/utils/setPositions.mjs","../../../node_modules/pixi.js/lib/scene/sprite-tiling/utils/applyMatrix.mjs","../../../node_modules/pixi.js/lib/scene/sprite-tiling/utils/setUvs.mjs","../../../node_modules/pixi.js/lib/scene/sprite-tiling/TilingSpritePipe.mjs","../../../node_modules/pixi.js/lib/scene/text-bitmap/asset/bitmapFontTextParser.mjs","../../../node_modules/pixi.js/lib/scene/text-bitmap/asset/bitmapFontXMLParser.mjs","../../../node_modules/pixi.js/lib/scene/text-bitmap/asset/bitmapFontXMLStringParser.mjs","../../../node_modules/pixi.js/lib/scene/text-bitmap/BitmapFont.mjs","../../../node_modules/pixi.js/lib/scene/text-bitmap/asset/loadBitmapFont.mjs","../../../node_modules/pixi.js/lib/scene/text/sdfShader/shader-bits/localUniformMSDFBit.mjs","../../../node_modules/pixi.js/lib/scene/text/sdfShader/shader-bits/mSDFBit.mjs","../../../node_modules/pixi.js/lib/scene/text/sdfShader/SdfShader.mjs","../../../node_modules/pixi.js/lib/scene/text-bitmap/BitmapTextPipe.mjs","../../../node_modules/pixi.js/lib/scene/text-html/HTMLTextPipe.mjs","../../../node_modules/pixi.js/lib/utils/browser/isSafari.mjs","../../../node_modules/pixi.js/lib/scene/text/utils/getPo2TextureFromSource.mjs","../../../node_modules/pixi.js/lib/scene/text-html/utils/extractFontFamilies.mjs","../../../node_modules/pixi.js/lib/scene/text-html/utils/loadFontAsBase64.mjs","../../../node_modules/pixi.js/lib/scene/text-html/utils/loadFontCSS.mjs","../../../node_modules/pixi.js/lib/scene/text-html/utils/getFontCss.mjs","../../../node_modules/pixi.js/lib/scene/text-html/utils/getSVGUrl.mjs","../../../node_modules/pixi.js/lib/scene/text-html/utils/getTemporaryCanvasFromImage.mjs","../../../node_modules/pixi.js/lib/scene/text-html/utils/loadSVGImage.mjs","../../../node_modules/pixi.js/lib/scene/text-html/HTMLTextSystem.mjs","../../../node_modules/pixi.js/lib/scene/text/canvas/CanvasTextPipe.mjs","../../../node_modules/pixi.js/lib/utils/canvas/getCanvasBoundingBox.mjs","../../../node_modules/pixi.js/lib/scene/text/canvas/CanvasTextSystem.mjs","../../../node_modules/pixi.js/lib/index.mjs","../src/annotation/pixi/stageRenderer.ts","../src/annotation/pixi/PixiLayer.svelte","../../../node_modules/uuid/dist/esm-browser/rng.js","../../../node_modules/uuid/dist/esm-browser/stringify.js","../../../node_modules/uuid/dist/esm-browser/native.js","../../../node_modules/uuid/dist/esm-browser/v4.js","../../annotorious/src/model/core/Shape.ts","../../annotorious/src/model/core/shapeUtils.ts","../../annotorious/src/model/core/ellipse/ellipseUtils.ts","../../annotorious/src/model/core/polygon/polygonUtils.ts","../../annotorious/src/model/core/rectangle/rectangleUtils.ts","../../annotorious/src/annotation/editors/polygon/PolygonEditor.svelte","../../annotorious/src/annotation/utils/touch.ts","../../annotorious/src/annotation/editors/Handle.svelte","../../annotorious/src/annotation/editors/rectangle/RectangleEditor.svelte","../../annotorious/src/annotation/editors/editorsRegistry.ts","../../annotorious/src/annotation/editors/Editor.svelte","../../annotorious/src/annotation/utils/styling.ts","../../annotorious/src/annotation/editors/EditorMount.svelte","../../annotorious/src/keyboardCommands.ts","../src/annotation/svg/OSDLayer.svelte","../src/annotation/svg/drawing/OSDToolMount.svelte","../src/annotation/svg/drawing/SVGDrawingLayer.svelte","../src/annotation/svg/presence/SVGPresenceLabel.svelte","../src/annotation/svg/presence/shapes/PresencePolygon.svelte","../src/annotation/svg/presence/shapes/PresenceRectangle.svelte","../src/annotation/svg/presence/SVGPresenceLayer.svelte","../src/themes/setTheme.ts","../src/api/fitBounds.ts","../src/Annotorious.ts","../src/index.ts","../../../node_modules/pixi.js/lib/accessibility/init.mjs","../../../node_modules/pixi.js/lib/app/init.mjs","../../../node_modules/pixi.js/lib/events/init.mjs","../../../node_modules/pixi.js/lib/scene/graphics/init.mjs","../../../node_modules/pixi.js/lib/scene/mesh/init.mjs","../../../node_modules/pixi.js/lib/scene/text/init.mjs","../../../node_modules/pixi.js/lib/scene/text-bitmap/init.mjs","../../../node_modules/pixi.js/lib/scene/text-html/init.mjs","../../../node_modules/pixi.js/lib/scene/sprite-tiling/init.mjs","../../../node_modules/pixi.js/lib/scene/sprite-nine-slice/init.mjs","../../../node_modules/pixi.js/lib/filters/init.mjs"],"sourcesContent":["var j = Object.prototype.hasOwnProperty;\nfunction B(e, n) {\n  var t, o;\n  if (e === n)\n    return !0;\n  if (e && n && (t = e.constructor) === n.constructor) {\n    if (t === Date)\n      return e.getTime() === n.getTime();\n    if (t === RegExp)\n      return e.toString() === n.toString();\n    if (t === Array) {\n      if ((o = e.length) === n.length)\n        for (; o-- && B(e[o], n[o]); )\n          ;\n      return o === -1;\n    }\n    if (!t || typeof e == \"object\") {\n      o = 0;\n      for (t in e)\n        if (j.call(e, t) && ++o && !j.call(n, t) || !(t in n) || !B(e[t], n[t]))\n          return !1;\n      return Object.keys(n).length === o;\n    }\n  }\n  return e !== e && n !== n;\n}\nfunction z() {\n}\nfunction q(e, n) {\n  return e != e ? n == n : e !== n || e && typeof e == \"object\" || typeof e == \"function\";\n}\nconst k = [];\nfunction Y(e, n = z) {\n  let t;\n  const o = /* @__PURE__ */ new Set();\n  function i(E) {\n    if (q(e, E) && (e = E, t)) {\n      const y = !k.length;\n      for (const u of o)\n        u[1](), k.push(u, e);\n      if (y) {\n        for (let u = 0; u < k.length; u += 2)\n          k[u][0](k[u + 1]);\n        k.length = 0;\n      }\n    }\n  }\n  function p(E) {\n    i(E(e));\n  }\n  function L(E, y = z) {\n    const u = [E, y];\n    return o.add(u), o.size === 1 && (t = n(i, p) || z), E(e), () => {\n      o.delete(u), o.size === 0 && t && (t(), t = null);\n    };\n  }\n  return { set: i, update: p, subscribe: L };\n}\nconst Ce = (e) => {\n  const { subscribe: n, set: t } = Y();\n  let o;\n  return n((i) => o = i), e.observe(({ changes: i }) => {\n    if (o) {\n      (i.deleted || []).some((E) => E.id === o) && t(void 0);\n      const L = (i.updated || []).find(({ oldValue: E }) => E.id === o);\n      L && t(L.newValue.id);\n    }\n  }), {\n    get current() {\n      return o;\n    },\n    subscribe: n,\n    set: t\n  };\n};\nvar G = /* @__PURE__ */ ((e) => (e.EDIT = \"EDIT\", e.SELECT = \"SELECT\", e.NONE = \"NONE\", e))(G || {});\nconst V = { selected: [] }, we = (e, n = \"EDIT\") => {\n  const { subscribe: t, set: o } = Y(V);\n  let i = V;\n  t((s) => i = s);\n  const p = () => o(V), L = () => {\n    var s;\n    return ((s = i.selected) == null ? void 0 : s.length) === 0;\n  }, E = (s) => {\n    if (i.selected.length === 0)\n      return !1;\n    const h = typeof s == \"string\" ? s : s.id;\n    return i.selected.some((w) => w.id === h);\n  }, y = (s, h) => {\n    const w = e.getAnnotation(s);\n    if (w) {\n      const b = H(w, n);\n      o(b === \"EDIT\" ? { selected: [{ id: s, editable: !0 }], pointerEvent: h } : b === \"SELECT\" ? { selected: [{ id: s }], pointerEvent: h } : { selected: [], pointerEvent: h });\n    } else\n      console.warn(\"Invalid selection: \" + s);\n  }, u = (s, h = !0) => {\n    const w = Array.isArray(s) ? s : [s], b = w.map((S) => e.getAnnotation(S)).filter(Boolean);\n    o({ selected: b.map(({ id: S }) => ({ id: S, editable: h })) }), b.length !== w.length && console.warn(\"Invalid selection\", s);\n  }, U = (s) => {\n    if (i.selected.length === 0)\n      return !1;\n    const { selected: h } = i;\n    h.filter(({ id: b }) => s.includes(b)).length > 0 && o({ selected: h.filter(({ id: b }) => !s.includes(b)) });\n  };\n  return e.observe(({ changes: s }) => U((s.deleted || []).map((h) => h.id))), {\n    clear: p,\n    clickSelect: y,\n    get selected() {\n      return i ? [...i.selected] : null;\n    },\n    get pointerEvent() {\n      return i ? i.pointerEvent : null;\n    },\n    isEmpty: L,\n    isSelected: E,\n    setSelected: u,\n    subscribe: t\n  };\n}, H = (e, n) => typeof n == \"function\" ? n(e) || \"EDIT\" : n || \"EDIT\";\nlet $;\nconst F = new Uint8Array(16);\nfunction J() {\n  if (!$ && ($ = typeof crypto < \"u\" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto), !$))\n    throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");\n  return $(F);\n}\nconst D = [];\nfor (let e = 0; e < 256; ++e)\n  D.push((e + 256).toString(16).slice(1));\nfunction Q(e, n = 0) {\n  return D[e[n + 0]] + D[e[n + 1]] + D[e[n + 2]] + D[e[n + 3]] + \"-\" + D[e[n + 4]] + D[e[n + 5]] + \"-\" + D[e[n + 6]] + D[e[n + 7]] + \"-\" + D[e[n + 8]] + D[e[n + 9]] + \"-\" + D[e[n + 10]] + D[e[n + 11]] + D[e[n + 12]] + D[e[n + 13]] + D[e[n + 14]] + D[e[n + 15]];\n}\nconst X = typeof crypto < \"u\" && crypto.randomUUID && crypto.randomUUID.bind(crypto), M = {\n  randomUUID: X\n};\nfunction Z(e, n, t) {\n  if (M.randomUUID && !n && !e)\n    return M.randomUUID();\n  e = e || {};\n  const o = e.random || (e.rng || J)();\n  return o[6] = o[6] & 15 | 64, o[8] = o[8] & 63 | 128, Q(o);\n}\nconst Le = (e) => {\n  const { creator: n, updatedBy: t } = e.target, o = e.bodies.reduce((i, p) => [...i, p.creator, p.updatedBy].filter(Boolean), []);\n  return [\n    n,\n    t,\n    ...o\n  ].filter((i) => i);\n}, Ue = (e, n, t, o) => ({\n  id: Z(),\n  annotation: e.id,\n  created: t || /* @__PURE__ */ new Date(),\n  creator: o,\n  ...n\n}), K = (e, n) => {\n  const t = new Set(e.bodies.map((o) => o.id));\n  return n.bodies.filter((o) => !t.has(o.id));\n}, ee = (e, n) => {\n  const t = new Set(n.bodies.map((o) => o.id));\n  return e.bodies.filter((o) => !t.has(o.id));\n}, te = (e, n) => n.bodies.map((t) => {\n  const o = e.bodies.find((i) => i.id === t.id);\n  return { newBody: t, oldBody: o && !B(o, t) ? o : void 0 };\n}).filter(({ oldBody: t }) => t).map(({ oldBody: t, newBody: o }) => ({ oldBody: t, newBody: o })), ne = (e, n) => !B(e.target, n.target), P = (e, n) => {\n  const t = K(e, n), o = ee(e, n), i = te(e, n);\n  return {\n    oldValue: e,\n    newValue: n,\n    bodiesCreated: t.length > 0 ? t : void 0,\n    bodiesDeleted: o.length > 0 ? o : void 0,\n    bodiesUpdated: i.length > 0 ? i : void 0,\n    targetUpdated: ne(e, n) ? { oldTarget: e.target, newTarget: n.target } : void 0\n  };\n};\nvar oe = /* @__PURE__ */ ((e) => (e.BODY_ONLY = \"BODY_ONLY\", e.TARGET_ONLY = \"TARGET_ONLY\", e))(oe || {}), O = /* @__PURE__ */ ((e) => (e.LOCAL = \"LOCAL\", e.REMOTE = \"REMOTE\", e))(O || {});\nconst se = (e, n) => {\n  var p, L;\n  const { changes: t, origin: o } = n;\n  if (!(!e.options.origin || e.options.origin === o))\n    return !1;\n  if (e.options.ignore) {\n    const { ignore: E } = e.options, y = (U) => U && U.length > 0;\n    if (!(y(t.created) || y(t.deleted))) {\n      const U = (p = t.updated) == null ? void 0 : p.some((h) => y(h.bodiesCreated) || y(h.bodiesDeleted) || y(h.bodiesUpdated)), s = (L = t.updated) == null ? void 0 : L.some((h) => h.targetUpdated);\n      if (E === \"BODY_ONLY\" && U && !s || E === \"TARGET_ONLY\" && s && !U)\n        return !1;\n    }\n  }\n  if (e.options.annotations) {\n    const E = /* @__PURE__ */ new Set([\n      ...(t.created || []).map((u) => u.id),\n      ...(t.deleted || []).map((u) => u.id),\n      ...(t.updated || []).map(({ oldValue: u }) => u.id)\n    ]);\n    return !!(Array.isArray(e.options.annotations) ? e.options.annotations : [e.options.annotations]).find((u) => E.has(u));\n  } else\n    return !0;\n}, ie = (e, n) => {\n  const t = new Set((e.created || []).map((s) => s.id)), o = new Set((e.updated || []).map(({ newValue: s }) => s.id)), i = new Set((n.created || []).map((s) => s.id)), p = new Set((n.deleted || []).map((s) => s.id)), L = new Set((n.updated || []).map(({ oldValue: s }) => s.id)), E = new Set((n.updated || []).filter(({ oldValue: s }) => t.has(s.id) || o.has(s.id)).map(({ oldValue: s }) => s.id)), y = [\n    ...(e.created || []).filter((s) => !p.has(s.id)).map((s) => L.has(s.id) ? n.updated.find(({ oldValue: h }) => h.id === s.id).newValue : s),\n    ...n.created || []\n  ], u = [\n    ...(e.deleted || []).filter((s) => !i.has(s.id)),\n    ...(n.deleted || []).filter((s) => !t.has(s.id))\n  ], U = [\n    ...(e.updated || []).filter(({ newValue: s }) => !p.has(s.id)).map((s) => {\n      const { oldValue: h, newValue: w } = s;\n      if (L.has(w.id)) {\n        const b = n.updated.find((S) => S.oldValue.id === w.id).newValue;\n        return P(h, b);\n      } else\n        return s;\n    }),\n    ...(n.updated || []).filter(({ oldValue: s }) => !E.has(s.id))\n  ];\n  return { created: y, deleted: u, updated: U };\n}, de = (e) => e.id !== void 0, Se = () => {\n  const e = /* @__PURE__ */ new Map(), n = /* @__PURE__ */ new Map(), t = [], o = (d, r = {}) => t.push({ onChange: d, options: r }), i = (d) => {\n    const r = t.findIndex((c) => c.onChange == d);\n    r > -1 && t.splice(r, 1);\n  }, p = (d, r) => {\n    const c = {\n      origin: d,\n      changes: {\n        created: r.created || [],\n        updated: r.updated || [],\n        deleted: r.deleted || []\n      },\n      state: [...e.values()]\n    };\n    t.forEach((f) => {\n      se(f, c) && f.onChange(c);\n    });\n  }, L = (d, r = O.LOCAL) => {\n    if (e.get(d.id))\n      throw Error(`Cannot add annotation ${d.id} - exists already`);\n    e.set(d.id, d), d.bodies.forEach((f) => n.set(f.id, d.id)), p(r, { created: [d] });\n  }, E = (d, r) => {\n    const c = typeof d == \"string\" ? r : d, f = typeof d == \"string\" ? d : d.id, C = e.get(f);\n    if (C) {\n      const T = P(C, c);\n      return f === c.id ? e.set(f, c) : (e.delete(f), e.set(c.id, c)), C.bodies.forEach((I) => n.delete(I.id)), c.bodies.forEach((I) => n.set(I.id, c.id)), T;\n    } else\n      console.warn(`Cannot update annotation ${f} - does not exist`);\n  }, y = (d, r = O.LOCAL, c = O.LOCAL) => {\n    const f = de(r) ? c : r, C = E(d, r);\n    C && p(f, { updated: [C] });\n  }, u = (d, r = O.LOCAL) => {\n    const c = d.reduce((f, C) => {\n      const T = E(C);\n      return T ? [...f, T] : f;\n    }, []);\n    c.length > 0 && p(r, { updated: c });\n  }, U = (d, r = O.LOCAL) => {\n    const c = e.get(d.annotation);\n    if (c) {\n      const f = {\n        ...c,\n        bodies: [...c.bodies, d]\n      };\n      e.set(c.id, f), n.set(d.id, f.id), p(r, { updated: [{\n        oldValue: c,\n        newValue: f,\n        bodiesCreated: [d]\n      }] });\n    } else\n      console.warn(`Attempt to add body to missing annotation: ${d.annotation}`);\n  }, s = () => [...e.values()], h = (d = O.LOCAL) => {\n    const r = [...e.values()];\n    e.clear(), n.clear(), p(d, { deleted: r });\n  }, w = (d, r = !0, c = O.LOCAL) => {\n    if (r) {\n      const f = [...e.values()];\n      e.clear(), n.clear(), d.forEach((C) => {\n        e.set(C.id, C), C.bodies.forEach((T) => n.set(T.id, C.id));\n      }), p(c, { created: d, deleted: f });\n    } else {\n      const f = d.reduce((C, T) => {\n        const I = e.get(T.id);\n        return I ? [...C, I] : C;\n      }, []);\n      if (f.length > 0)\n        throw Error(`Bulk insert would overwrite the following annotations: ${f.map((C) => C.id).join(\", \")}`);\n      d.forEach((C) => {\n        e.set(C.id, C), C.bodies.forEach((T) => n.set(T.id, C.id));\n      }), p(c, { created: d });\n    }\n  }, b = (d) => {\n    const r = typeof d == \"string\" ? d : d.id, c = e.get(r);\n    if (c)\n      return e.delete(r), c.bodies.forEach((f) => n.delete(f.id)), c;\n    console.warn(`Attempt to delete missing annotation: ${r}`);\n  }, S = (d, r = O.LOCAL) => {\n    const c = b(d);\n    c && p(r, { deleted: [c] });\n  }, v = (d, r = O.LOCAL) => {\n    const c = d.reduce((f, C) => {\n      const T = b(C);\n      return T ? [...f, T] : f;\n    }, []);\n    c.length > 0 && p(r, { deleted: c });\n  }, l = (d) => {\n    const r = e.get(d.annotation);\n    if (r) {\n      const c = r.bodies.find((f) => f.id === d.id);\n      if (c) {\n        n.delete(c.id);\n        const f = {\n          ...r,\n          bodies: r.bodies.filter((T) => T.id !== d.id)\n        };\n        return e.set(r.id, f), {\n          oldValue: r,\n          newValue: f,\n          bodiesDeleted: [c]\n        };\n      } else\n        console.warn(`Attempt to delete missing body ${d.id} from annotation ${d.annotation}`);\n    } else\n      console.warn(`Attempt to delete body from missing annotation ${d.annotation}`);\n  }, g = (d, r = O.LOCAL) => {\n    const c = l(d);\n    c && p(r, { updated: [c] });\n  }, a = (d, r = O.LOCAL) => {\n    const c = d.map((f) => l(f)).filter(Boolean);\n    c.length > 0 && p(r, { updated: c });\n  }, A = (d) => {\n    const r = e.get(d);\n    return r ? { ...r } : void 0;\n  }, m = (d) => {\n    const r = n.get(d);\n    if (r) {\n      const f = A(r).bodies.find((C) => C.id === d);\n      if (f)\n        return f;\n      console.error(`Store integrity error: body ${d} in index, but not in annotation`);\n    } else\n      console.warn(`Attempt to retrieve missing body: ${d}`);\n  }, R = (d, r) => {\n    if (d.annotation !== r.annotation)\n      throw \"Annotation integrity violation: annotation ID must be the same when updating bodies\";\n    const c = e.get(d.annotation);\n    if (c) {\n      const f = c.bodies.find((T) => T.id === d.id), C = {\n        ...c,\n        bodies: c.bodies.map((T) => T.id === f.id ? r : T)\n      };\n      return e.set(c.id, C), f.id !== r.id && (n.delete(f.id), n.set(r.id, C.id)), {\n        oldValue: c,\n        newValue: C,\n        bodiesUpdated: [{ oldBody: f, newBody: r }]\n      };\n    } else\n      console.warn(`Attempt to add body to missing annotation ${d.annotation}`);\n  }, N = (d, r, c = O.LOCAL) => {\n    const f = R(d, r);\n    f && p(c, { updated: [f] });\n  }, x = (d, r = O.LOCAL) => {\n    const c = d.map((f) => R({ id: f.id, annotation: f.annotation }, f)).filter(Boolean);\n    p(r, { updated: c });\n  }, _ = (d) => {\n    const r = e.get(d.annotation);\n    if (r) {\n      const c = {\n        ...r,\n        target: {\n          ...r.target,\n          ...d\n        }\n      };\n      return e.set(r.id, c), {\n        oldValue: r,\n        newValue: c,\n        targetUpdated: {\n          oldTarget: r.target,\n          newTarget: d\n        }\n      };\n    } else\n      console.warn(`Attempt to update target on missing annotation: ${d.annotation}`);\n  };\n  return {\n    addAnnotation: L,\n    addBody: U,\n    all: s,\n    bulkAddAnnotation: w,\n    bulkDeleteAnnotation: v,\n    bulkDeleteBodies: a,\n    bulkUpdateAnnotation: u,\n    bulkUpdateBodies: x,\n    bulkUpdateTargets: (d, r = O.LOCAL) => {\n      const c = d.map((f) => _(f)).filter(Boolean);\n      c.length > 0 && p(r, { updated: c });\n    },\n    clear: h,\n    deleteAnnotation: S,\n    deleteBody: g,\n    getAnnotation: A,\n    getBody: m,\n    observe: o,\n    unobserve: i,\n    updateAnnotation: y,\n    updateBody: N,\n    updateTarget: (d, r = O.LOCAL) => {\n      const c = _(d);\n      c && p(r, { updated: [c] });\n    }\n  };\n}, Oe = (e) => ({\n  ...e,\n  subscribe: (t) => {\n    const o = (i) => t(i.state);\n    return e.observe(o), t(e.all()), () => e.unobserve(o);\n  }\n});\nlet W = () => ({\n  emit(e, ...n) {\n    for (let t = 0, o = this.events[e] || [], i = o.length; t < i; t++)\n      o[t](...n);\n  },\n  events: {},\n  on(e, n) {\n    var t;\n    return ((t = this.events)[e] || (t[e] = [])).push(n), () => {\n      var o;\n      this.events[e] = (o = this.events[e]) == null ? void 0 : o.filter((i) => n !== i);\n    };\n  }\n});\nconst ae = 250, Te = (e) => {\n  const n = W(), t = [];\n  let o = -1, i = !1, p = 0;\n  const L = (a) => {\n    if (!i) {\n      const { changes: A } = a, m = performance.now();\n      if (m - p > ae)\n        t.splice(o + 1), t.push(A), o = t.length - 1;\n      else {\n        const R = t.length - 1;\n        t[R] = ie(t[R], A);\n      }\n      p = m;\n    }\n    i = !1;\n  };\n  e.observe(L, { origin: O.LOCAL });\n  const E = (a) => a && a.length > 0 && e.bulkDeleteAnnotation(a), y = (a) => a && a.length > 0 && e.bulkAddAnnotation(a, !1), u = (a) => a && a.length > 0 && e.bulkUpdateAnnotation(a.map(({ oldValue: A }) => A)), U = (a) => a && a.length > 0 && e.bulkUpdateAnnotation(a.map(({ newValue: A }) => A)), s = (a) => a && a.length > 0 && e.bulkAddAnnotation(a, !1), h = (a) => a && a.length > 0 && e.bulkDeleteAnnotation(a);\n  return {\n    canRedo: () => t.length - 1 > o,\n    canUndo: () => o > -1,\n    destroy: () => e.unobserve(L),\n    on: (a, A) => n.on(a, A),\n    redo: () => {\n      if (t.length - 1 > o) {\n        i = !0;\n        const { created: a, updated: A, deleted: m } = t[o + 1];\n        y(a), U(A), h(m), n.emit(\"redo\", t[o + 1]), o += 1;\n      }\n    },\n    undo: () => {\n      if (o > -1) {\n        i = !0;\n        const { created: a, updated: A, deleted: m } = t[o];\n        E(a), u(A), s(m), n.emit(\"undo\", t[o]), o -= 1;\n      }\n    }\n  };\n}, De = () => {\n  const { subscribe: e, set: n } = Y([]);\n  return {\n    subscribe: e,\n    set: n\n  };\n}, Re = (e, n, t, o) => {\n  const { store: i, selection: p, hover: L, viewport: E } = e, y = /* @__PURE__ */ new Map();\n  let u = [], U, s;\n  const h = (l, g) => {\n    y.has(l) ? y.get(l).push(g) : y.set(l, [g]);\n  }, w = (l, g) => {\n    const a = y.get(l);\n    a && a.indexOf(g) > 0 && a.splice(a.indexOf(g), 1);\n  }, b = (l, g, a) => {\n    y.has(l) && setTimeout(() => {\n      y.get(l).forEach((A) => {\n        if (t) {\n          const m = Array.isArray(g) ? g.map((N) => t.serialize(N)) : t.serialize(g), R = a ? a instanceof PointerEvent ? a : t.serialize(a) : void 0;\n          A(m, R);\n        } else\n          A(g, a);\n      });\n    }, 1);\n  }, S = () => {\n    const { selected: l } = p, g = (l || []).map(({ id: a }) => i.getAnnotation(a));\n    g.forEach((a) => {\n      const A = u.find((m) => m.id === a.id);\n      (!A || !B(A, a)) && b(\"updateAnnotation\", a, A);\n    }), u = u.map((a) => {\n      const A = g.find(({ id: m }) => m === a.id);\n      return A || a;\n    });\n  };\n  p.subscribe(({ selected: l }) => {\n    if (!(u.length === 0 && l.length === 0)) {\n      if (u.length === 0 && l.length > 0)\n        u = l.map(({ id: g }) => i.getAnnotation(g));\n      else if (u.length > 0 && l.length === 0)\n        u.forEach((g) => {\n          const a = i.getAnnotation(g.id);\n          a && !B(a, g) && b(\"updateAnnotation\", a, g);\n        }), u = [];\n      else {\n        const g = new Set(u.map((m) => m.id)), a = new Set(l.map(({ id: m }) => m));\n        u.filter((m) => !a.has(m.id)).forEach((m) => {\n          const R = i.getAnnotation(m.id);\n          R && !B(R, m) && b(\"updateAnnotation\", R, m);\n        }), u = [\n          // Remove annotations that were deselected\n          ...u.filter((m) => a.has(m.id)),\n          // Add editable annotations that were selected\n          ...l.filter(({ id: m }) => !g.has(m)).map(({ id: m }) => i.getAnnotation(m))\n        ];\n      }\n      b(\"selectionChanged\", u);\n    }\n  }), L.subscribe((l) => {\n    !U && l ? b(\"mouseEnterAnnotation\", i.getAnnotation(l)) : U && !l ? b(\"mouseLeaveAnnotation\", i.getAnnotation(U)) : U && l && (b(\"mouseLeaveAnnotation\", i.getAnnotation(U)), b(\"mouseEnterAnnotation\", i.getAnnotation(l))), U = l;\n  }), E == null || E.subscribe((l) => b(\"viewportIntersect\", l.map((g) => i.getAnnotation(g)))), i.observe((l) => {\n    o && (s && clearTimeout(s), s = setTimeout(S, 1e3));\n    const { created: g, deleted: a } = l.changes;\n    (g || []).forEach((m) => b(\"createAnnotation\", m)), (a || []).forEach((m) => b(\"deleteAnnotation\", m)), (l.changes.updated || []).filter((m) => [\n      ...m.bodiesCreated || [],\n      ...m.bodiesDeleted || [],\n      ...m.bodiesUpdated || []\n    ].length > 0).forEach(({ oldValue: m, newValue: R }) => {\n      const N = u.find((x) => x.id === m.id) || m;\n      u = u.map((x) => x.id === m.id ? R : x), b(\"updateAnnotation\", R, N);\n    });\n  }, { origin: O.LOCAL }), i.observe((l) => {\n    if (u) {\n      const g = new Set(u.map((A) => A.id)), a = (l.changes.updated || []).filter(({ newValue: A }) => g.has(A.id)).map(({ newValue: A }) => A);\n      a.length > 0 && (u = u.map((A) => {\n        const m = a.find((R) => R.id === A.id);\n        return m || A;\n      }));\n    }\n  }, { origin: O.REMOTE });\n  const v = (l) => (g) => {\n    const { updated: a } = g;\n    l ? (a || []).forEach((A) => b(\"updateAnnotation\", A.oldValue, A.newValue)) : (a || []).forEach((A) => b(\"updateAnnotation\", A.newValue, A.oldValue));\n  };\n  return n.on(\"undo\", v(!0)), n.on(\"redo\", v(!1)), { on: h, off: w, emit: b };\n}, Be = (e) => (n) => n.map((t) => e.serialize(t)), re = (e) => (n) => n.reduce((t, o) => {\n  const { parsed: i, error: p } = e.parse(o);\n  return p ? {\n    parsed: t.parsed,\n    failed: [...t.failed, o]\n  } : i ? {\n    parsed: [...t.parsed, i],\n    failed: t.failed\n  } : {\n    ...t\n  };\n}, { parsed: [], failed: [] }), xe = (e, n, t) => {\n  const { store: o, selection: i } = e, p = (v) => {\n    if (t) {\n      const { parsed: l, error: g } = t.parse(v);\n      l ? o.addAnnotation(l, O.REMOTE) : console.error(g);\n    } else\n      o.addAnnotation(v, O.REMOTE);\n  }, L = () => i.clear(), E = () => o.clear(), y = (v) => {\n    const l = o.getAnnotation(v);\n    return t && l ? t.serialize(l) : l;\n  }, u = () => t ? o.all().map(t.serialize) : o.all(), U = () => {\n    var g;\n    const l = (((g = i.selected) == null ? void 0 : g.map((a) => a.id)) || []).map((a) => o.getAnnotation(a)).filter(Boolean);\n    return t ? l.map(t.serialize) : l;\n  }, s = (v, l = !0) => fetch(v).then((g) => g.json()).then((g) => (w(g, l), g)), h = (v) => {\n    if (typeof v == \"string\") {\n      const l = o.getAnnotation(v);\n      if (o.deleteAnnotation(v), l)\n        return t ? t.serialize(l) : l;\n    } else {\n      const l = t ? t.parse(v).parsed : v;\n      if (l)\n        return o.deleteAnnotation(l), v;\n    }\n  }, w = (v, l = !0) => {\n    if (t) {\n      const { parsed: g, failed: a } = re(t)(v);\n      a.length > 0 && console.warn(`Discarded ${a.length} invalid annotations`, a), o.bulkAddAnnotation(g, l, O.REMOTE);\n    } else\n      o.bulkAddAnnotation(v, l, O.REMOTE);\n  }, b = (v) => {\n    v ? i.setSelected(v) : i.clear();\n  }, S = (v) => {\n    if (t) {\n      const l = t.parse(v).parsed, g = t.serialize(o.getAnnotation(l.id));\n      return o.updateAnnotation(l), g;\n    } else {\n      const l = o.getAnnotation(v.id);\n      return o.updateAnnotation(v), l;\n    }\n  };\n  return {\n    addAnnotation: p,\n    cancelSelected: L,\n    canRedo: n.canRedo,\n    canUndo: n.canUndo,\n    clearAnnotations: E,\n    getAnnotationById: y,\n    getAnnotations: u,\n    getSelected: U,\n    loadAnnotations: s,\n    redo: n.redo,\n    removeAnnotation: h,\n    setAnnotations: w,\n    setSelected: b,\n    undo: n.undo,\n    updateAnnotation: S\n  };\n}, ce = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\nlet le = (e) => crypto.getRandomValues(new Uint8Array(e)), ue = (e, n, t) => {\n  let o = (2 << Math.log(e.length - 1) / Math.LN2) - 1, i = -~(1.6 * o * n / e.length);\n  return (p = n) => {\n    let L = \"\";\n    for (; ; ) {\n      let E = t(i), y = i;\n      for (; y--; )\n        if (L += e[E[y] & o] || \"\", L.length === p)\n          return L;\n    }\n  };\n}, fe = (e, n = 21) => ue(e, n, le), pe = (e = 21) => {\n  let n = \"\", t = crypto.getRandomValues(new Uint8Array(e));\n  for (; e--; )\n    n += ce[t[e] & 63];\n  return n;\n};\nconst Ie = () => ({ isGuest: !0, id: fe(\"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_\", 20)() }), he = (e) => {\n  const n = JSON.stringify(e);\n  let t = 0;\n  for (let o = 0, i = n.length; o < i; o++) {\n    let p = n.charCodeAt(o);\n    t = (t << 5) - t + p, t |= 0;\n  }\n  return `${t}`;\n}, ge = (e) => e ? typeof e == \"object\" ? { ...e } : e : void 0, ke = (e, n) => (Array.isArray(e) ? e : [e]).map((t) => {\n  const { id: o, type: i, purpose: p, value: L, created: E, creator: y, ...u } = t;\n  return {\n    id: o || `temp-${he(t)}`,\n    annotation: n,\n    type: i,\n    purpose: p,\n    value: L,\n    created: E ? new Date(E) : void 0,\n    creator: ge(y),\n    ...u\n  };\n}), Ne = (e) => e.map((n) => {\n  var o, i;\n  const t = { ...n };\n  return delete t.annotation, (o = t.id) != null && o.startsWith(\"temp-\") && delete t.id, { ...t, created: (i = t.created) == null ? void 0 : i.toISOString() };\n}), me = [\n  \"#ff7c00\",\n  // orange\n  \"#1ac938\",\n  // green\n  \"#e8000b\",\n  // red\n  \"#8b2be2\",\n  // purple\n  \"#9f4800\",\n  // brown\n  \"#f14cc1\",\n  // pink\n  \"#ffc400\",\n  // khaki\n  \"#00d7ff\",\n  // cyan\n  \"#023eff\"\n  // blue\n], Ae = () => {\n  const e = [...me];\n  return { assignRandomColor: () => {\n    const o = Math.floor(Math.random() * e.length), i = e[o];\n    return e.splice(o, 1), i;\n  }, releaseColor: (o) => e.push(o) };\n}, be = () => {\n  const e = Ae();\n  return { addUser: (o, i) => {\n    const p = e.assignRandomColor();\n    return {\n      label: i.name || i.id,\n      avatar: i.avatar,\n      color: p\n    };\n  }, removeUser: (o) => e.releaseColor(o.appearance.color) };\n}, Ee = (e, n) => e.every((t) => e.includes(t)) && n.every((t) => e.includes(t)), $e = pe(), ze = (e = be()) => {\n  const n = W(), t = /* @__PURE__ */ new Map(), o = /* @__PURE__ */ new Map(), i = (s, h) => {\n    if (t.has(s)) {\n      console.warn(\"Attempt to add user that is already present\", s, h);\n      return;\n    }\n    const w = e.addUser(s, h);\n    t.set(s, {\n      ...h,\n      presenceKey: s,\n      appearance: w\n    });\n  }, p = (s) => {\n    const h = t.get(s);\n    if (!h) {\n      console.warn(\"Attempt to remove user that is not present\", s);\n      return;\n    }\n    e.removeUser(h), t.delete(s);\n  }, L = (s) => {\n    const h = new Set(s.map((S) => S.presenceKey)), w = s.filter(({ presenceKey: S }) => !t.has(S)), b = Array.from(t.values()).filter((S) => !h.has(S.presenceKey));\n    w.forEach(({ presenceKey: S, user: v }) => i(S, v)), b.forEach((S) => {\n      const { presenceKey: v } = S;\n      o.has(v) && n.emit(\"selectionChange\", S, null), p(v);\n    }), (w.length > 0 || b.length > 0) && n.emit(\"presence\", u());\n  }, E = (s, h) => {\n    const w = t.get(s);\n    if (!w) {\n      console.warn(\"Activity notification from user that is not present\");\n      return;\n    }\n    const b = o.get(s);\n    (!b || !Ee(b, h)) && (o.set(s, h), n.emit(\"selectionChange\", w, h));\n  }, y = (s, h) => {\n    const w = t.get(s);\n    if (!w) {\n      console.warn(\"Selection change for user that is not present\", s);\n      return;\n    }\n    h ? o.set(s, h) : o.delete(s), n.emit(\"selectionChange\", w, h);\n  }, u = () => [...Array.from(t.values())];\n  return {\n    getPresentUsers: u,\n    notifyActivity: E,\n    on: (s, h) => n.on(s, h),\n    syncUsers: L,\n    updateSelection: y\n  };\n};\nexport {\n  oe as Ignore,\n  O as Origin,\n  $e as PRESENCE_KEY,\n  G as PointerSelectAction,\n  Ie as createAnonymousGuest,\n  xe as createBaseAnnotator,\n  Ue as createBody,\n  be as createDefaultAppearenceProvider,\n  Ce as createHoverState,\n  Re as createLifecyleObserver,\n  ze as createPresenceState,\n  we as createSelectionState,\n  Se as createStore,\n  Te as createUndoStack,\n  De as createViewportState,\n  Ae as defaultColorProvider,\n  P as diffAnnotations,\n  Le as getContributors,\n  ie as mergeChanges,\n  H as onPointerSelect,\n  re as parseAll,\n  ke as parseW3CBodies,\n  ge as parseW3CUser,\n  Be as serializeAll,\n  Ne as serializeW3CBodies,\n  se as shouldNotify,\n  Oe as toSvelteStore\n};\n//# sourceMappingURL=annotorious-core.es.js.map\n","var nn = Object.defineProperty;\nvar on = (e, t, n) => t in e ? nn(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n;\nvar Ke = (e, t, n) => (on(e, typeof t != \"symbol\" ? t + \"\" : t, n), n);\nfunction F() {\n}\nfunction nt(e, t) {\n  for (const n in t)\n    e[n] = t[n];\n  return (\n    /** @type {T & S} */\n    e\n  );\n}\nfunction Ut(e) {\n  return e();\n}\nfunction dt() {\n  return /* @__PURE__ */ Object.create(null);\n}\nfunction ce(e) {\n  e.forEach(Ut);\n}\nfunction K(e) {\n  return typeof e == \"function\";\n}\nfunction J(e, t) {\n  return e != e ? t == t : e !== t || e && typeof e == \"object\" || typeof e == \"function\";\n}\nfunction sn(e) {\n  return Object.keys(e).length === 0;\n}\nfunction Vt(e, ...t) {\n  if (e == null) {\n    for (const o of t)\n      o(void 0);\n    return F;\n  }\n  const n = e.subscribe(...t);\n  return n.unsubscribe ? () => n.unsubscribe() : n;\n}\nfunction ht(e, t, n) {\n  e.$$.on_destroy.push(Vt(t, n));\n}\nfunction rn(e, t, n, o) {\n  if (e) {\n    const i = Gt(e, t, n, o);\n    return e[0](i);\n  }\n}\nfunction Gt(e, t, n, o) {\n  return e[1] && o ? nt(n.ctx.slice(), e[1](o(t))) : n.ctx;\n}\nfunction ln(e, t, n, o) {\n  if (e[2] && o) {\n    const i = e[2](o(n));\n    if (t.dirty === void 0)\n      return i;\n    if (typeof i == \"object\") {\n      const s = [], r = Math.max(t.dirty.length, i.length);\n      for (let l = 0; l < r; l += 1)\n        s[l] = t.dirty[l] | i[l];\n      return s;\n    }\n    return t.dirty | i;\n  }\n  return t.dirty;\n}\nfunction an(e, t, n, o, i, s) {\n  if (i) {\n    const r = Gt(t, n, o, s);\n    e.p(r, i);\n  }\n}\nfunction cn(e) {\n  if (e.ctx.length > 32) {\n    const t = [], n = e.ctx.length / 32;\n    for (let o = 0; o < n; o++)\n      t[o] = -1;\n    return t;\n  }\n  return -1;\n}\nfunction gt(e) {\n  const t = {};\n  for (const n in e)\n    n[0] !== \"$\" && (t[n] = e[n]);\n  return t;\n}\nfunction ze(e) {\n  return e ?? \"\";\n}\nconst fn = typeof window < \"u\" ? window : typeof globalThis < \"u\" ? globalThis : (\n  // @ts-ignore Node typings have this\n  global\n);\nfunction re(e, t) {\n  e.appendChild(t);\n}\nfunction O(e, t, n) {\n  e.insertBefore(t, n || null);\n}\nfunction k(e) {\n  e.parentNode && e.parentNode.removeChild(e);\n}\nfunction rt(e, t) {\n  for (let n = 0; n < e.length; n += 1)\n    e[n] && e[n].d(t);\n}\nfunction C(e) {\n  return document.createElementNS(\"http://www.w3.org/2000/svg\", e);\n}\nfunction zt(e) {\n  return document.createTextNode(e);\n}\nfunction ie() {\n  return zt(\" \");\n}\nfunction fe() {\n  return zt(\"\");\n}\nfunction j(e, t, n, o) {\n  return e.addEventListener(t, n, o), () => e.removeEventListener(t, n, o);\n}\nfunction h(e, t, n) {\n  n == null ? e.removeAttribute(t) : e.getAttribute(t) !== n && e.setAttribute(t, n);\n}\nfunction un(e) {\n  return Array.from(e.childNodes);\n}\nfunction Ee(e, t, n) {\n  e.classList.toggle(t, !!n);\n}\nfunction dn(e, t, { bubbles: n = !1, cancelable: o = !1 } = {}) {\n  return new CustomEvent(e, { detail: t, bubbles: n, cancelable: o });\n}\nlet Pe;\nfunction Ie(e) {\n  Pe = e;\n}\nfunction Ht() {\n  if (!Pe)\n    throw new Error(\"Function called outside component initialization\");\n  return Pe;\n}\nfunction Ye(e) {\n  Ht().$$.on_mount.push(e);\n}\nfunction Te() {\n  const e = Ht();\n  return (t, n, { cancelable: o = !1 } = {}) => {\n    const i = e.$$.callbacks[t];\n    if (i) {\n      const s = dn(\n        /** @type {string} */\n        t,\n        n,\n        { cancelable: o }\n      );\n      return i.slice().forEach((r) => {\n        r.call(e, s);\n      }), !s.defaultPrevented;\n    }\n    return !0;\n  };\n}\nfunction de(e, t) {\n  const n = e.$$.callbacks[t.type];\n  n && n.slice().forEach((o) => o.call(this, t));\n}\nconst we = [], He = [];\nlet Ae = [];\nconst mt = [], hn = /* @__PURE__ */ Promise.resolve();\nlet ot = !1;\nfunction gn() {\n  ot || (ot = !0, hn.then(Ft));\n}\nfunction it(e) {\n  Ae.push(e);\n}\nconst We = /* @__PURE__ */ new Set();\nlet me = 0;\nfunction Ft() {\n  if (me !== 0)\n    return;\n  const e = Pe;\n  do {\n    try {\n      for (; me < we.length; ) {\n        const t = we[me];\n        me++, Ie(t), mn(t.$$);\n      }\n    } catch (t) {\n      throw we.length = 0, me = 0, t;\n    }\n    for (Ie(null), we.length = 0, me = 0; He.length; )\n      He.pop()();\n    for (let t = 0; t < Ae.length; t += 1) {\n      const n = Ae[t];\n      We.has(n) || (We.add(n), n());\n    }\n    Ae.length = 0;\n  } while (we.length);\n  for (; mt.length; )\n    mt.pop()();\n  ot = !1, We.clear(), Ie(e);\n}\nfunction mn(e) {\n  if (e.fragment !== null) {\n    e.update(), ce(e.before_update);\n    const t = e.dirty;\n    e.dirty = [-1], e.fragment && e.fragment.p(e.ctx, t), e.after_update.forEach(it);\n  }\n}\nfunction pn(e) {\n  const t = [], n = [];\n  Ae.forEach((o) => e.indexOf(o) === -1 ? t.push(o) : n.push(o)), n.forEach((o) => o()), Ae = t;\n}\nconst Ge = /* @__PURE__ */ new Set();\nlet he;\nfunction le() {\n  he = {\n    r: 0,\n    c: [],\n    p: he\n    // parent group\n  };\n}\nfunction ae() {\n  he.r || ce(he.c), he = he.p;\n}\nfunction I(e, t) {\n  e && e.i && (Ge.delete(e), e.i(t));\n}\nfunction X(e, t, n, o) {\n  if (e && e.o) {\n    if (Ge.has(e))\n      return;\n    Ge.add(e), he.c.push(() => {\n      Ge.delete(e), o && (n && e.d(1), o());\n    }), e.o(t);\n  } else\n    o && o();\n}\nfunction Se(e) {\n  return (e == null ? void 0 : e.length) !== void 0 ? e : Array.from(e);\n}\nfunction te(e) {\n  e && e.c();\n}\nfunction $(e, t, n) {\n  const { fragment: o, after_update: i } = e.$$;\n  o && o.m(t, n), it(() => {\n    const s = e.$$.on_mount.map(Ut).filter(K);\n    e.$$.on_destroy ? e.$$.on_destroy.push(...s) : ce(s), e.$$.on_mount = [];\n  }), i.forEach(it);\n}\nfunction ee(e, t) {\n  const n = e.$$;\n  n.fragment !== null && (pn(n.after_update), ce(n.on_destroy), n.fragment && n.fragment.d(t), n.on_destroy = n.fragment = null, n.ctx = []);\n}\nfunction yn(e, t) {\n  e.$$.dirty[0] === -1 && (we.push(e), gn(), e.$$.dirty.fill(0)), e.$$.dirty[t / 31 | 0] |= 1 << t % 31;\n}\nfunction ne(e, t, n, o, i, s, r = null, l = [-1]) {\n  const a = Pe;\n  Ie(e);\n  const c = e.$$ = {\n    fragment: null,\n    ctx: [],\n    // state\n    props: s,\n    update: F,\n    not_equal: i,\n    bound: dt(),\n    // lifecycle\n    on_mount: [],\n    on_destroy: [],\n    on_disconnect: [],\n    before_update: [],\n    after_update: [],\n    context: new Map(t.context || (a ? a.$$.context : [])),\n    // everything else\n    callbacks: dt(),\n    dirty: l,\n    skip_bound: !1,\n    root: t.target || a.$$.root\n  };\n  r && r(c.root);\n  let u = !1;\n  if (c.ctx = n ? n(e, t.props || {}, (f, d, ...g) => {\n    const m = g.length ? g[0] : d;\n    return c.ctx && i(c.ctx[f], c.ctx[f] = m) && (!c.skip_bound && c.bound[f] && c.bound[f](m), u && yn(e, f)), d;\n  }) : [], c.update(), u = !0, ce(c.before_update), c.fragment = o ? o(c.ctx) : !1, t.target) {\n    if (t.hydrate) {\n      const f = un(t.target);\n      c.fragment && c.fragment.l(f), f.forEach(k);\n    } else\n      c.fragment && c.fragment.c();\n    t.intro && I(e.$$.fragment), $(e, t.target, t.anchor), Ft();\n  }\n  Ie(a);\n}\nclass oe {\n  constructor() {\n    /**\n     * ### PRIVATE API\n     *\n     * Do not use, may change at any time\n     *\n     * @type {any}\n     */\n    Ke(this, \"$$\");\n    /**\n     * ### PRIVATE API\n     *\n     * Do not use, may change at any time\n     *\n     * @type {any}\n     */\n    Ke(this, \"$$set\");\n  }\n  /** @returns {void} */\n  $destroy() {\n    ee(this, 1), this.$destroy = F;\n  }\n  /**\n   * @template {Extract<keyof Events, string>} K\n   * @param {K} type\n   * @param {((e: Events[K]) => void) | null | undefined} callback\n   * @returns {() => void}\n   */\n  $on(t, n) {\n    if (!K(n))\n      return F;\n    const o = this.$$.callbacks[t] || (this.$$.callbacks[t] = []);\n    return o.push(n), () => {\n      const i = o.indexOf(n);\n      i !== -1 && o.splice(i, 1);\n    };\n  }\n  /**\n   * @param {Partial<Props>} props\n   * @returns {void}\n   */\n  $set(t) {\n    this.$$set && !sn(t) && (this.$$.skip_bound = !0, this.$$set(t), this.$$.skip_bound = !1);\n  }\n}\nconst _n = \"4\";\ntypeof window < \"u\" && (window.__svelte || (window.__svelte = { v: /* @__PURE__ */ new Set() })).v.add(_n);\nvar q = /* @__PURE__ */ ((e) => (e.ELLIPSE = \"ELLIPSE\", e.POLYGON = \"POLYGON\", e.RECTANGLE = \"RECTANGLE\", e))(q || {});\nconst lt = {}, at = (e, t) => lt[e] = t, st = (e) => lt[e.type].area(e), wn = (e, t, n) => lt[e.type].intersects(e, t, n), Fe = (e) => {\n  let t = 1 / 0, n = 1 / 0, o = -1 / 0, i = -1 / 0;\n  return e.forEach(([s, r]) => {\n    t = Math.min(t, s), n = Math.min(n, r), o = Math.max(o, s), i = Math.max(i, r);\n  }), { minX: t, minY: n, maxX: o, maxY: i };\n}, bn = {\n  area: (e) => Math.PI * e.geometry.rx * e.geometry.ry,\n  intersects: (e, t, n) => {\n    const { cx: o, cy: i, rx: s, ry: r } = e.geometry, l = 0, a = Math.cos(l), c = Math.sin(l), u = t - o, f = n - i, d = a * u + c * f, g = c * u - a * f;\n    return d * d / (s * s) + g * g / (r * r) <= 1;\n  }\n};\nat(q.ELLIPSE, bn);\nconst En = {\n  area: (e) => {\n    const { points: t } = e.geometry;\n    let n = 0, o = t.length - 1;\n    for (let i = 0; i < t.length; i++)\n      n += (t[o][0] + t[i][0]) * (t[o][1] - t[i][1]), o = i;\n    return Math.abs(0.5 * n);\n  },\n  intersects: (e, t, n) => {\n    const { points: o } = e.geometry;\n    let i = !1;\n    for (let s = 0, r = o.length - 1; s < o.length; r = s++) {\n      const l = o[s][0], a = o[s][1], c = o[r][0], u = o[r][1];\n      a > n != u > n && t < (c - l) * (n - a) / (u - a) + l && (i = !i);\n    }\n    return i;\n  }\n};\nat(q.POLYGON, En);\nconst An = {\n  area: (e) => e.geometry.w * e.geometry.h,\n  intersects: (e, t, n) => t >= e.geometry.x && t <= e.geometry.x + e.geometry.w && n >= e.geometry.y && n <= e.geometry.y + e.geometry.h\n};\nat(q.RECTANGLE, An);\nconst Sn = (e, t = !1) => {\n  const n = typeof e == \"string\" ? e : e.value, o = /^(xywh)=(pixel|percent)?:?(.+?),(.+?),(.+?),(.+)*/g, i = [...n.matchAll(o)][0], [s, r, l, a, c, u, f] = i;\n  if (r !== \"xywh\")\n    throw new Error(\"Unsupported MediaFragment: \" + n);\n  if (l && l !== \"pixel\")\n    throw new Error(`Unsupported MediaFragment unit: ${l}`);\n  const [d, g, m, y] = [a, c, u, f].map(parseFloat);\n  return {\n    type: q.RECTANGLE,\n    geometry: {\n      x: d,\n      y: g,\n      w: m,\n      h: y,\n      bounds: {\n        minX: d,\n        minY: t ? g - y : g,\n        maxX: d + m,\n        maxY: t ? g : g + y\n      }\n    }\n  };\n}, Tn = (e) => {\n  const { x: t, y: n, w: o, h: i } = e;\n  return {\n    type: \"FragmentSelector\",\n    conformsTo: \"http://www.w3.org/TR/media-frags/\",\n    value: `xywh=pixel:${t},${n},${o},${i}`\n  };\n}, jt = \"http://www.w3.org/2000/svg\", pt = (e) => {\n  const t = (o) => {\n    Array.from(o.attributes).forEach((i) => {\n      i.name.startsWith(\"on\") && o.removeAttribute(i.name);\n    });\n  }, n = e.getElementsByTagName(\"script\");\n  return Array.from(n).reverse().forEach((o) => o.parentNode.removeChild(o)), Array.from(e.querySelectorAll(\"*\")).forEach(t), e;\n}, Mn = (e) => {\n  const o = new XMLSerializer().serializeToString(e.documentElement).replace(\"<svg>\", `<svg xmlns=\"${jt}\">`);\n  return new DOMParser().parseFromString(o, \"image/svg+xml\").documentElement;\n}, Ln = (e) => {\n  const n = new DOMParser().parseFromString(e, \"image/svg+xml\"), o = n.lookupPrefix(jt), i = n.lookupNamespaceURI(null);\n  return o || i ? pt(n).firstChild : pt(Mn(n)).firstChild;\n}, vn = (e) => {\n  const [t, n, o] = e.match(/(<polygon points=[\"|'])([^(\"|')]*)/) || [], i = o.split(\" \").map((s) => s.split(\",\").map(parseFloat));\n  return {\n    type: q.POLYGON,\n    geometry: {\n      points: i,\n      bounds: Fe(i)\n    }\n  };\n}, kn = (e) => {\n  const t = Ln(e), n = parseFloat(t.getAttribute(\"cx\")), o = parseFloat(t.getAttribute(\"cy\")), i = parseFloat(t.getAttribute(\"rx\")), s = parseFloat(t.getAttribute(\"ry\")), r = {\n    minX: n - i,\n    minY: o - s,\n    maxX: n + i,\n    maxY: o + s\n  };\n  return {\n    type: q.ELLIPSE,\n    geometry: {\n      cx: n,\n      cy: o,\n      rx: i,\n      ry: s,\n      bounds: r\n    }\n  };\n}, On = (e) => {\n  const t = typeof e == \"string\" ? e : e.value;\n  if (t.includes(\"<polygon points=\"))\n    return vn(t);\n  if (t.includes(\"<ellipse \"))\n    return kn(t);\n  throw \"Unsupported SVG shape: \" + t;\n}, Bn = (e) => {\n  let t;\n  if (e.type === q.POLYGON) {\n    const n = e.geometry, { points: o } = n;\n    t = `<svg><polygon points=\"${o.map((i) => i.join(\",\")).join(\" \")}\" /></svg>`;\n  } else if (e.type === q.ELLIPSE) {\n    const n = e.geometry;\n    t = `<svg><ellipse cx=\"${n.cx}\" cy=\"${n.cy}\" rx=\"${n.rx}\" ry=\"${n.ry}\" /></svg>`;\n  }\n  if (t)\n    return { type: \"SvgSelector\", value: t };\n  throw `Unsupported shape type: ${e.type}`;\n};\nlet Ne;\nconst In = new Uint8Array(16);\nfunction Pn() {\n  if (!Ne && (Ne = typeof crypto < \"u\" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto), !Ne))\n    throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");\n  return Ne(In);\n}\nconst W = [];\nfor (let e = 0; e < 256; ++e)\n  W.push((e + 256).toString(16).slice(1));\nfunction Yn(e, t = 0) {\n  return W[e[t + 0]] + W[e[t + 1]] + W[e[t + 2]] + W[e[t + 3]] + \"-\" + W[e[t + 4]] + W[e[t + 5]] + \"-\" + W[e[t + 6]] + W[e[t + 7]] + \"-\" + W[e[t + 8]] + W[e[t + 9]] + \"-\" + W[e[t + 10]] + W[e[t + 11]] + W[e[t + 12]] + W[e[t + 13]] + W[e[t + 14]] + W[e[t + 15]];\n}\nconst Dn = typeof crypto < \"u\" && crypto.randomUUID && crypto.randomUUID.bind(crypto), yt = {\n  randomUUID: Dn\n};\nfunction qt(e, t, n) {\n  if (yt.randomUUID && !t && !e)\n    return yt.randomUUID();\n  e = e || {};\n  const o = e.random || (e.rng || Pn)();\n  return o[6] = o[6] & 15 | 64, o[8] = o[8] & 63 | 128, Yn(o);\n}\nvar _t = Object.prototype.hasOwnProperty;\nfunction ge(e, t) {\n  var n, o;\n  if (e === t)\n    return !0;\n  if (e && t && (n = e.constructor) === t.constructor) {\n    if (n === Date)\n      return e.getTime() === t.getTime();\n    if (n === RegExp)\n      return e.toString() === t.toString();\n    if (n === Array) {\n      if ((o = e.length) === t.length)\n        for (; o-- && ge(e[o], t[o]); )\n          ;\n      return o === -1;\n    }\n    if (!n || typeof e == \"object\") {\n      o = 0;\n      for (n in e)\n        if (_t.call(e, n) && ++o && !_t.call(t, n) || !(n in t) || !ge(e[n], t[n]))\n          return !1;\n      return Object.keys(t).length === o;\n    }\n  }\n  return e !== e && t !== t;\n}\nfunction Je() {\n}\nfunction Xn(e, t) {\n  return e != e ? t == t : e !== t || e && typeof e == \"object\" || typeof e == \"function\";\n}\nconst pe = [];\nfunction ct(e, t = Je) {\n  let n;\n  const o = /* @__PURE__ */ new Set();\n  function i(l) {\n    if (Xn(e, l) && (e = l, n)) {\n      const a = !pe.length;\n      for (const c of o)\n        c[1](), pe.push(c, e);\n      if (a) {\n        for (let c = 0; c < pe.length; c += 2)\n          pe[c][0](pe[c + 1]);\n        pe.length = 0;\n      }\n    }\n  }\n  function s(l) {\n    i(l(e));\n  }\n  function r(l, a = Je) {\n    const c = [l, a];\n    return o.add(c), o.size === 1 && (n = t(i, s) || Je), l(e), () => {\n      o.delete(c), o.size === 0 && n && (n(), n = null);\n    };\n  }\n  return { set: i, update: s, subscribe: r };\n}\nconst Cn = (e) => {\n  const { subscribe: t, set: n } = ct();\n  let o;\n  return t((i) => o = i), e.observe(({ changes: i }) => {\n    if (o) {\n      (i.deleted || []).some((r) => r.id === o) && n(void 0);\n      const s = (i.updated || []).find(({ oldValue: r }) => r.id === o);\n      s && n(s.newValue.id);\n    }\n  }), {\n    get current() {\n      return o;\n    },\n    subscribe: t,\n    set: n\n  };\n};\nvar Kt = /* @__PURE__ */ ((e) => (e.EDIT = \"EDIT\", e.SELECT = \"SELECT\", e.NONE = \"NONE\", e))(Kt || {});\nconst Qe = { selected: [] }, Rn = (e, t = \"EDIT\") => {\n  const { subscribe: n, set: o } = ct(Qe);\n  let i = Qe;\n  n((f) => i = f);\n  const s = () => o(Qe), r = () => {\n    var f;\n    return ((f = i.selected) == null ? void 0 : f.length) === 0;\n  }, l = (f) => {\n    if (i.selected.length === 0)\n      return !1;\n    const d = typeof f == \"string\" ? f : f.id;\n    return i.selected.some((g) => g.id === d);\n  }, a = (f, d) => {\n    const g = e.getAnnotation(f);\n    if (g) {\n      const m = Nn(g, t);\n      o(m === \"EDIT\" ? { selected: [{ id: f, editable: !0 }], pointerEvent: d } : m === \"SELECT\" ? { selected: [{ id: f }], pointerEvent: d } : { selected: [], pointerEvent: d });\n    } else\n      console.warn(\"Invalid selection: \" + f);\n  }, c = (f, d = !0) => {\n    const g = Array.isArray(f) ? f : [f], m = g.map((y) => e.getAnnotation(y)).filter(Boolean);\n    o({ selected: m.map(({ id: y }) => ({ id: y, editable: d })) }), m.length !== g.length && console.warn(\"Invalid selection\", f);\n  }, u = (f) => {\n    if (i.selected.length === 0)\n      return !1;\n    const { selected: d } = i;\n    d.filter(({ id: g }) => f.includes(g)).length > 0 && o({ selected: d.filter(({ id: g }) => !f.includes(g)) });\n  };\n  return e.observe(({ changes: f }) => u((f.deleted || []).map((d) => d.id))), {\n    clear: s,\n    clickSelect: a,\n    get selected() {\n      return i ? [...i.selected] : null;\n    },\n    get pointerEvent() {\n      return i ? i.pointerEvent : null;\n    },\n    isEmpty: r,\n    isSelected: l,\n    setSelected: c,\n    subscribe: n\n  };\n}, Nn = (e, t) => typeof t == \"function\" ? t(e) || \"EDIT\" : t || \"EDIT\", Un = [];\nfor (let e = 0; e < 256; ++e)\n  Un.push((e + 256).toString(16).slice(1));\ntypeof crypto < \"u\" && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nconst Vn = (e, t) => {\n  const n = new Set(e.bodies.map((o) => o.id));\n  return t.bodies.filter((o) => !n.has(o.id));\n}, Gn = (e, t) => {\n  const n = new Set(t.bodies.map((o) => o.id));\n  return e.bodies.filter((o) => !n.has(o.id));\n}, zn = (e, t) => t.bodies.map((n) => {\n  const o = e.bodies.find((i) => i.id === n.id);\n  return { newBody: n, oldBody: o && !ge(o, n) ? o : void 0 };\n}).filter(({ oldBody: n }) => n).map(({ oldBody: n, newBody: o }) => ({ oldBody: n, newBody: o })), Hn = (e, t) => !ge(e.target, t.target), Wt = (e, t) => {\n  const n = Vn(e, t), o = Gn(e, t), i = zn(e, t);\n  return {\n    oldValue: e,\n    newValue: t,\n    bodiesCreated: n.length > 0 ? n : void 0,\n    bodiesDeleted: o.length > 0 ? o : void 0,\n    bodiesUpdated: i.length > 0 ? i : void 0,\n    targetUpdated: Hn(e, t) ? { oldTarget: e.target, newTarget: t.target } : void 0\n  };\n};\nvar H = /* @__PURE__ */ ((e) => (e.LOCAL = \"LOCAL\", e.REMOTE = \"REMOTE\", e))(H || {});\nconst Fn = (e, t) => {\n  var n, o;\n  const { changes: i, origin: s } = t;\n  if (!(!e.options.origin || e.options.origin === s))\n    return !1;\n  if (e.options.ignore) {\n    const { ignore: r } = e.options, l = (a) => a && a.length > 0;\n    if (!(l(i.created) || l(i.deleted))) {\n      const a = (n = i.updated) == null ? void 0 : n.some((u) => l(u.bodiesCreated) || l(u.bodiesDeleted) || l(u.bodiesUpdated)), c = (o = i.updated) == null ? void 0 : o.some((u) => u.targetUpdated);\n      if (r === \"BODY_ONLY\" && a && !c || r === \"TARGET_ONLY\" && c && !a)\n        return !1;\n    }\n  }\n  if (e.options.annotations) {\n    const r = /* @__PURE__ */ new Set([\n      ...(i.created || []).map((l) => l.id),\n      ...(i.deleted || []).map((l) => l.id),\n      ...(i.updated || []).map(({ oldValue: l }) => l.id)\n    ]);\n    return !!(Array.isArray(e.options.annotations) ? e.options.annotations : [e.options.annotations]).find((l) => r.has(l));\n  } else\n    return !0;\n}, jn = (e, t) => {\n  const n = new Set((e.created || []).map((f) => f.id)), o = new Set((e.updated || []).map(({ newValue: f }) => f.id)), i = new Set((t.created || []).map((f) => f.id)), s = new Set((t.deleted || []).map((f) => f.id)), r = new Set((t.updated || []).map(({ oldValue: f }) => f.id)), l = new Set((t.updated || []).filter(({ oldValue: f }) => n.has(f.id) || o.has(f.id)).map(({ oldValue: f }) => f.id)), a = [\n    ...(e.created || []).filter((f) => !s.has(f.id)).map((f) => r.has(f.id) ? t.updated.find(({ oldValue: d }) => d.id === f.id).newValue : f),\n    ...t.created || []\n  ], c = [\n    ...(e.deleted || []).filter((f) => !i.has(f.id)),\n    ...(t.deleted || []).filter((f) => !n.has(f.id))\n  ], u = [\n    ...(e.updated || []).filter(({ newValue: f }) => !s.has(f.id)).map((f) => {\n      const { oldValue: d, newValue: g } = f;\n      if (r.has(g.id)) {\n        const m = t.updated.find((y) => y.oldValue.id === g.id).newValue;\n        return Wt(d, m);\n      } else\n        return f;\n    }),\n    ...(t.updated || []).filter(({ oldValue: f }) => !l.has(f.id))\n  ];\n  return { created: a, deleted: c, updated: u };\n}, qn = (e) => e.id !== void 0, Kn = () => {\n  const e = /* @__PURE__ */ new Map(), t = /* @__PURE__ */ new Map(), n = [], o = (w, S = {}) => n.push({ onChange: w, options: S }), i = (w) => {\n    const S = n.findIndex((T) => T.onChange == w);\n    S > -1 && n.splice(S, 1);\n  }, s = (w, S) => {\n    const T = {\n      origin: w,\n      changes: {\n        created: S.created || [],\n        updated: S.updated || [],\n        deleted: S.deleted || []\n      },\n      state: [...e.values()]\n    };\n    n.forEach((M) => {\n      Fn(M, T) && M.onChange(T);\n    });\n  }, r = (w, S = H.LOCAL) => {\n    if (e.get(w.id))\n      throw Error(`Cannot add annotation ${w.id} - exists already`);\n    e.set(w.id, w), w.bodies.forEach((T) => t.set(T.id, w.id)), s(S, { created: [w] });\n  }, l = (w, S) => {\n    const T = typeof w == \"string\" ? S : w, M = typeof w == \"string\" ? w : w.id, P = e.get(M);\n    if (P) {\n      const G = Wt(P, T);\n      return M === T.id ? e.set(M, T) : (e.delete(M), e.set(T.id, T)), P.bodies.forEach((x) => t.delete(x.id)), T.bodies.forEach((x) => t.set(x.id, T.id)), G;\n    } else\n      console.warn(`Cannot update annotation ${M} - does not exist`);\n  }, a = (w, S = H.LOCAL, T = H.LOCAL) => {\n    const M = qn(S) ? T : S, P = l(w, S);\n    P && s(M, { updated: [P] });\n  }, c = (w, S = H.LOCAL) => {\n    const T = w.reduce((M, P) => {\n      const G = l(P);\n      return G ? [...M, G] : M;\n    }, []);\n    T.length > 0 && s(S, { updated: T });\n  }, u = (w, S = H.LOCAL) => {\n    const T = e.get(w.annotation);\n    if (T) {\n      const M = {\n        ...T,\n        bodies: [...T.bodies, w]\n      };\n      e.set(T.id, M), t.set(w.id, M.id), s(S, { updated: [{\n        oldValue: T,\n        newValue: M,\n        bodiesCreated: [w]\n      }] });\n    } else\n      console.warn(`Attempt to add body to missing annotation: ${w.annotation}`);\n  }, f = () => [...e.values()], d = (w = H.LOCAL) => {\n    const S = [...e.values()];\n    e.clear(), t.clear(), s(w, { deleted: S });\n  }, g = (w, S = !0, T = H.LOCAL) => {\n    if (S) {\n      const M = [...e.values()];\n      e.clear(), t.clear(), w.forEach((P) => {\n        e.set(P.id, P), P.bodies.forEach((G) => t.set(G.id, P.id));\n      }), s(T, { created: w, deleted: M });\n    } else {\n      const M = w.reduce((P, G) => {\n        const x = e.get(G.id);\n        return x ? [...P, x] : P;\n      }, []);\n      if (M.length > 0)\n        throw Error(`Bulk insert would overwrite the following annotations: ${M.map((P) => P.id).join(\", \")}`);\n      w.forEach((P) => {\n        e.set(P.id, P), P.bodies.forEach((G) => t.set(G.id, P.id));\n      }), s(T, { created: w });\n    }\n  }, m = (w) => {\n    const S = typeof w == \"string\" ? w : w.id, T = e.get(S);\n    if (T)\n      return e.delete(S), T.bodies.forEach((M) => t.delete(M.id)), T;\n    console.warn(`Attempt to delete missing annotation: ${S}`);\n  }, y = (w, S = H.LOCAL) => {\n    const T = m(w);\n    T && s(S, { deleted: [T] });\n  }, b = (w, S = H.LOCAL) => {\n    const T = w.reduce((M, P) => {\n      const G = m(P);\n      return G ? [...M, G] : M;\n    }, []);\n    T.length > 0 && s(S, { deleted: T });\n  }, p = (w) => {\n    const S = e.get(w.annotation);\n    if (S) {\n      const T = S.bodies.find((M) => M.id === w.id);\n      if (T) {\n        t.delete(T.id);\n        const M = {\n          ...S,\n          bodies: S.bodies.filter((P) => P.id !== w.id)\n        };\n        return e.set(S.id, M), {\n          oldValue: S,\n          newValue: M,\n          bodiesDeleted: [T]\n        };\n      } else\n        console.warn(`Attempt to delete missing body ${w.id} from annotation ${w.annotation}`);\n    } else\n      console.warn(`Attempt to delete body from missing annotation ${w.annotation}`);\n  }, A = (w, S = H.LOCAL) => {\n    const T = p(w);\n    T && s(S, { updated: [T] });\n  }, _ = (w, S = H.LOCAL) => {\n    const T = w.map((M) => p(M)).filter(Boolean);\n    T.length > 0 && s(S, { updated: T });\n  }, E = (w) => {\n    const S = e.get(w);\n    return S ? { ...S } : void 0;\n  }, B = (w) => {\n    const S = t.get(w);\n    if (S) {\n      const T = E(S).bodies.find((M) => M.id === w);\n      if (T)\n        return T;\n      console.error(`Store integrity error: body ${w} in index, but not in annotation`);\n    } else\n      console.warn(`Attempt to retrieve missing body: ${w}`);\n  }, V = (w, S) => {\n    if (w.annotation !== S.annotation)\n      throw \"Annotation integrity violation: annotation ID must be the same when updating bodies\";\n    const T = e.get(w.annotation);\n    if (T) {\n      const M = T.bodies.find((G) => G.id === w.id), P = {\n        ...T,\n        bodies: T.bodies.map((G) => G.id === M.id ? S : G)\n      };\n      return e.set(T.id, P), M.id !== S.id && (t.delete(M.id), t.set(S.id, P.id)), {\n        oldValue: T,\n        newValue: P,\n        bodiesUpdated: [{ oldBody: M, newBody: S }]\n      };\n    } else\n      console.warn(`Attempt to add body to missing annotation ${w.annotation}`);\n  }, U = (w, S, T = H.LOCAL) => {\n    const M = V(w, S);\n    M && s(T, { updated: [M] });\n  }, R = (w, S = H.LOCAL) => {\n    const T = w.map((M) => V({ id: M.id, annotation: M.annotation }, M)).filter(Boolean);\n    s(S, { updated: T });\n  }, Y = (w) => {\n    const S = e.get(w.annotation);\n    if (S) {\n      const T = {\n        ...S,\n        target: {\n          ...S.target,\n          ...w\n        }\n      };\n      return e.set(S.id, T), {\n        oldValue: S,\n        newValue: T,\n        targetUpdated: {\n          oldTarget: S.target,\n          newTarget: w\n        }\n      };\n    } else\n      console.warn(`Attempt to update target on missing annotation: ${w.annotation}`);\n  };\n  return {\n    addAnnotation: r,\n    addBody: u,\n    all: f,\n    bulkAddAnnotation: g,\n    bulkDeleteAnnotation: b,\n    bulkDeleteBodies: _,\n    bulkUpdateAnnotation: c,\n    bulkUpdateBodies: R,\n    bulkUpdateTargets: (w, S = H.LOCAL) => {\n      const T = w.map((M) => Y(M)).filter(Boolean);\n      T.length > 0 && s(S, { updated: T });\n    },\n    clear: d,\n    deleteAnnotation: y,\n    deleteBody: A,\n    getAnnotation: E,\n    getBody: B,\n    observe: o,\n    unobserve: i,\n    updateAnnotation: a,\n    updateBody: U,\n    updateTarget: (w, S = H.LOCAL) => {\n      const T = Y(w);\n      T && s(S, { updated: [T] });\n    }\n  };\n}, Wn = (e) => ({\n  ...e,\n  subscribe: (t) => {\n    const n = (o) => t(o.state);\n    return e.observe(n), t(e.all()), () => e.unobserve(n);\n  }\n});\nlet Jn = () => ({\n  emit(e, ...t) {\n    for (let n = 0, o = this.events[e] || [], i = o.length; n < i; n++)\n      o[n](...t);\n  },\n  events: {},\n  on(e, t) {\n    var n;\n    return ((n = this.events)[e] || (n[e] = [])).push(t), () => {\n      var o;\n      this.events[e] = (o = this.events[e]) == null ? void 0 : o.filter((i) => t !== i);\n    };\n  }\n});\nconst Qn = 250, Zn = (e) => {\n  const t = Jn(), n = [];\n  let o = -1, i = !1, s = 0;\n  const r = (g) => {\n    if (!i) {\n      const { changes: m } = g, y = performance.now();\n      if (y - s > Qn)\n        n.splice(o + 1), n.push(m), o = n.length - 1;\n      else {\n        const b = n.length - 1;\n        n[b] = jn(n[b], m);\n      }\n      s = y;\n    }\n    i = !1;\n  };\n  e.observe(r, { origin: H.LOCAL });\n  const l = (g) => g && g.length > 0 && e.bulkDeleteAnnotation(g), a = (g) => g && g.length > 0 && e.bulkAddAnnotation(g, !1), c = (g) => g && g.length > 0 && e.bulkUpdateAnnotation(g.map(({ oldValue: m }) => m)), u = (g) => g && g.length > 0 && e.bulkUpdateAnnotation(g.map(({ newValue: m }) => m)), f = (g) => g && g.length > 0 && e.bulkAddAnnotation(g, !1), d = (g) => g && g.length > 0 && e.bulkDeleteAnnotation(g);\n  return {\n    canRedo: () => n.length - 1 > o,\n    canUndo: () => o > -1,\n    destroy: () => e.unobserve(r),\n    on: (g, m) => t.on(g, m),\n    redo: () => {\n      if (n.length - 1 > o) {\n        i = !0;\n        const { created: g, updated: m, deleted: y } = n[o + 1];\n        a(g), u(m), d(y), t.emit(\"redo\", n[o + 1]), o += 1;\n      }\n    },\n    undo: () => {\n      if (o > -1) {\n        i = !0;\n        const { created: g, updated: m, deleted: y } = n[o];\n        l(g), c(m), f(y), t.emit(\"undo\", n[o]), o -= 1;\n      }\n    }\n  };\n}, xn = () => {\n  const { subscribe: e, set: t } = ct([]);\n  return {\n    subscribe: e,\n    set: t\n  };\n}, $n = (e, t, n, o) => {\n  const { store: i, selection: s, hover: r, viewport: l } = e, a = /* @__PURE__ */ new Map();\n  let c = [], u, f;\n  const d = (p, A) => {\n    a.has(p) ? a.get(p).push(A) : a.set(p, [A]);\n  }, g = (p, A) => {\n    const _ = a.get(p);\n    _ && _.indexOf(A) > 0 && _.splice(_.indexOf(A), 1);\n  }, m = (p, A, _) => {\n    a.has(p) && setTimeout(() => {\n      a.get(p).forEach((E) => {\n        if (n) {\n          const B = Array.isArray(A) ? A.map((U) => n.serialize(U)) : n.serialize(A), V = _ ? _ instanceof PointerEvent ? _ : n.serialize(_) : void 0;\n          E(B, V);\n        } else\n          E(A, _);\n      });\n    }, 1);\n  }, y = () => {\n    const { selected: p } = s, A = (p || []).map(({ id: _ }) => i.getAnnotation(_));\n    A.forEach((_) => {\n      const E = c.find((B) => B.id === _.id);\n      (!E || !ge(E, _)) && m(\"updateAnnotation\", _, E);\n    }), c = c.map((_) => A.find(({ id: B }) => B === _.id) || _);\n  };\n  s.subscribe(({ selected: p }) => {\n    if (!(c.length === 0 && p.length === 0)) {\n      if (c.length === 0 && p.length > 0)\n        c = p.map(({ id: A }) => i.getAnnotation(A));\n      else if (c.length > 0 && p.length === 0)\n        c.forEach((A) => {\n          const _ = i.getAnnotation(A.id);\n          _ && !ge(_, A) && m(\"updateAnnotation\", _, A);\n        }), c = [];\n      else {\n        const A = new Set(c.map((E) => E.id)), _ = new Set(p.map(({ id: E }) => E));\n        c.filter((E) => !_.has(E.id)).forEach((E) => {\n          const B = i.getAnnotation(E.id);\n          B && !ge(B, E) && m(\"updateAnnotation\", B, E);\n        }), c = [\n          // Remove annotations that were deselected\n          ...c.filter((E) => _.has(E.id)),\n          // Add editable annotations that were selected\n          ...p.filter(({ id: E }) => !A.has(E)).map(({ id: E }) => i.getAnnotation(E))\n        ];\n      }\n      m(\"selectionChanged\", c);\n    }\n  }), r.subscribe((p) => {\n    !u && p ? m(\"mouseEnterAnnotation\", i.getAnnotation(p)) : u && !p ? m(\"mouseLeaveAnnotation\", i.getAnnotation(u)) : u && p && (m(\"mouseLeaveAnnotation\", i.getAnnotation(u)), m(\"mouseEnterAnnotation\", i.getAnnotation(p))), u = p;\n  }), l == null || l.subscribe((p) => m(\"viewportIntersect\", p.map((A) => i.getAnnotation(A)))), i.observe((p) => {\n    o && (f && clearTimeout(f), f = setTimeout(y, 1e3));\n    const { created: A, deleted: _ } = p.changes;\n    (A || []).forEach((E) => m(\"createAnnotation\", E)), (_ || []).forEach((E) => m(\"deleteAnnotation\", E)), (p.changes.updated || []).filter((E) => [\n      ...E.bodiesCreated || [],\n      ...E.bodiesDeleted || [],\n      ...E.bodiesUpdated || []\n    ].length > 0).forEach(({ oldValue: E, newValue: B }) => {\n      const V = c.find((U) => U.id === E.id) || E;\n      c = c.map((U) => U.id === E.id ? B : U), m(\"updateAnnotation\", B, V);\n    });\n  }, { origin: H.LOCAL }), i.observe((p) => {\n    if (c) {\n      const A = new Set(c.map((E) => E.id)), _ = (p.changes.updated || []).filter(({ newValue: E }) => A.has(E.id)).map(({ newValue: E }) => E);\n      _.length > 0 && (c = c.map((E) => _.find((V) => V.id === E.id) || E));\n    }\n  }, { origin: H.REMOTE });\n  const b = (p) => (A) => {\n    const { updated: _ } = A;\n    p ? (_ || []).forEach((E) => m(\"updateAnnotation\", E.oldValue, E.newValue)) : (_ || []).forEach((E) => m(\"updateAnnotation\", E.newValue, E.oldValue));\n  };\n  return t.on(\"undo\", b(!0)), t.on(\"redo\", b(!1)), { on: d, off: g, emit: m };\n}, eo = (e) => (t) => t.reduce((n, o) => {\n  const { parsed: i, error: s } = e.parse(o);\n  return s ? {\n    parsed: n.parsed,\n    failed: [...n.failed, o]\n  } : i ? {\n    parsed: [...n.parsed, i],\n    failed: n.failed\n  } : {\n    ...n\n  };\n}, { parsed: [], failed: [] }), to = (e, t, n) => {\n  const { store: o, selection: i } = e, s = (b) => {\n    if (n) {\n      const { parsed: p, error: A } = n.parse(b);\n      p ? o.addAnnotation(p, H.REMOTE) : console.error(A);\n    } else\n      o.addAnnotation(b, H.REMOTE);\n  }, r = () => i.clear(), l = () => o.clear(), a = (b) => {\n    const p = o.getAnnotation(b);\n    return n && p ? n.serialize(p) : p;\n  }, c = () => n ? o.all().map(n.serialize) : o.all(), u = () => {\n    var b;\n    const p = (((b = i.selected) == null ? void 0 : b.map((A) => A.id)) || []).map((A) => o.getAnnotation(A)).filter(Boolean);\n    return n ? p.map(n.serialize) : p;\n  }, f = (b, p = !0) => fetch(b).then((A) => A.json()).then((A) => (g(A, p), A)), d = (b) => {\n    if (typeof b == \"string\") {\n      const p = o.getAnnotation(b);\n      if (o.deleteAnnotation(b), p)\n        return n ? n.serialize(p) : p;\n    } else {\n      const p = n ? n.parse(b).parsed : b;\n      if (p)\n        return o.deleteAnnotation(p), b;\n    }\n  }, g = (b, p = !0) => {\n    if (n) {\n      const { parsed: A, failed: _ } = eo(n)(b);\n      _.length > 0 && console.warn(`Discarded ${_.length} invalid annotations`, _), o.bulkAddAnnotation(A, p, H.REMOTE);\n    } else\n      o.bulkAddAnnotation(b, p, H.REMOTE);\n  }, m = (b) => {\n    b ? i.setSelected(b) : i.clear();\n  }, y = (b) => {\n    if (n) {\n      const p = n.parse(b).parsed, A = n.serialize(o.getAnnotation(p.id));\n      return o.updateAnnotation(p), A;\n    } else {\n      const p = o.getAnnotation(b.id);\n      return o.updateAnnotation(b), p;\n    }\n  };\n  return {\n    addAnnotation: s,\n    cancelSelected: r,\n    canRedo: t.canRedo,\n    canUndo: t.canUndo,\n    clearAnnotations: l,\n    getAnnotationById: a,\n    getAnnotations: c,\n    getSelected: u,\n    loadAnnotations: f,\n    redo: t.redo,\n    removeAnnotation: d,\n    setAnnotations: g,\n    setSelected: m,\n    undo: t.undo,\n    updateAnnotation: y\n  };\n}, no = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\nlet oo = (e) => crypto.getRandomValues(new Uint8Array(e)), io = (e, t, n) => {\n  let o = (2 << Math.log(e.length - 1) / Math.LN2) - 1, i = -~(1.6 * o * t / e.length);\n  return (s = t) => {\n    let r = \"\";\n    for (; ; ) {\n      let l = n(i), a = i;\n      for (; a--; )\n        if (r += e[l[a] & o] || \"\", r.length === s)\n          return r;\n    }\n  };\n}, so = (e, t = 21) => io(e, t, oo), ro = (e = 21) => {\n  let t = \"\", n = crypto.getRandomValues(new Uint8Array(e));\n  for (; e--; )\n    t += no[n[e] & 63];\n  return t;\n};\nconst lo = () => ({ isGuest: !0, id: so(\"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_\", 20)() }), ao = (e) => {\n  const t = JSON.stringify(e);\n  let n = 0;\n  for (let o = 0, i = t.length; o < i; o++) {\n    let s = t.charCodeAt(o);\n    n = (n << 5) - n + s, n |= 0;\n  }\n  return `${n}`;\n}, Jt = (e) => e ? typeof e == \"object\" ? { ...e } : e : void 0, co = (e, t) => (Array.isArray(e) ? e : [e]).map((n) => {\n  const { id: o, type: i, purpose: s, value: r, created: l, creator: a, ...c } = n;\n  return {\n    id: o || `temp-${ao(n)}`,\n    annotation: t,\n    type: i,\n    purpose: s,\n    value: r,\n    created: l ? new Date(l) : void 0,\n    creator: Jt(a),\n    ...c\n  };\n}), fo = (e) => e.map((t) => {\n  var n, o;\n  const i = { ...t };\n  return delete i.annotation, (n = i.id) != null && n.startsWith(\"temp-\") && delete i.id, { ...i, created: (o = i.created) == null ? void 0 : o.toISOString() };\n});\nro();\nconst Yi = (e, t = !1) => ({ parse: (i) => uo(i, t), serialize: (i) => ho(i, e) }), uo = (e, t = !1) => {\n  const n = e.id || qt(), {\n    creator: o,\n    created: i,\n    modified: s,\n    body: r,\n    ...l\n  } = e, a = co(r, n), c = Array.isArray(e.target) ? e.target[0] : e.target, u = Array.isArray(c.selector) ? c.selector[0] : c.selector, f = (u == null ? void 0 : u.type) === \"FragmentSelector\" ? Sn(u, t) : (u == null ? void 0 : u.type) === \"SvgSelector\" ? On(u) : void 0;\n  return f ? {\n    parsed: {\n      ...l,\n      id: n,\n      bodies: a,\n      target: {\n        created: i ? new Date(i) : void 0,\n        creator: Jt(o),\n        updated: s ? new Date(s) : void 0,\n        ...Array.isArray(l.target) ? l.target[0] : l.target,\n        annotation: n,\n        selector: f\n      }\n    }\n  } : {\n    error: Error(`Invalid selector: ${JSON.stringify(u)}`)\n  };\n}, ho = (e, t) => {\n  const {\n    selector: n,\n    creator: o,\n    created: i,\n    updated: s,\n    updatedBy: r,\n    // Excluded from serialization\n    ...l\n  } = e.target, a = n.type == q.RECTANGLE ? Tn(n.geometry) : Bn(n), c = {\n    ...e,\n    \"@context\": \"http://www.w3.org/ns/anno.jsonld\",\n    id: e.id,\n    type: \"Annotation\",\n    body: fo(e.bodies),\n    created: i == null ? void 0 : i.toISOString(),\n    creator: o,\n    modified: s == null ? void 0 : s.toISOString(),\n    target: {\n      ...l,\n      source: t,\n      selector: a\n    }\n  };\n  return delete c.bodies, \"annotation\" in c.target && delete c.target.annotation, c;\n};\nfunction wt(e, t, n) {\n  const o = e.slice();\n  return o[10] = t[n], o[12] = n, o;\n}\nfunction bt(e) {\n  let t, n;\n  return t = new ke({\n    props: {\n      x: (\n        /*point*/\n        e[10][0]\n      ),\n      y: (\n        /*point*/\n        e[10][1]\n      ),\n      scale: (\n        /*viewportScale*/\n        e[3]\n      )\n    }\n  }), t.$on(\"pointerdown\", function() {\n    K(\n      /*grab*/\n      e[9](`HANDLE-${/*idx*/\n      e[12]}`)\n    ) && e[9](`HANDLE-${/*idx*/\n    e[12]}`).apply(this, arguments);\n  }), {\n    c() {\n      te(t.$$.fragment);\n    },\n    m(o, i) {\n      $(t, o, i), n = !0;\n    },\n    p(o, i) {\n      e = o;\n      const s = {};\n      i & /*geom*/\n      16 && (s.x = /*point*/\n      e[10][0]), i & /*geom*/\n      16 && (s.y = /*point*/\n      e[10][1]), i & /*viewportScale*/\n      8 && (s.scale = /*viewportScale*/\n      e[3]), t.$set(s);\n    },\n    i(o) {\n      n || (I(t.$$.fragment, o), n = !0);\n    },\n    o(o) {\n      X(t.$$.fragment, o), n = !1;\n    },\n    d(o) {\n      ee(t, o);\n    }\n  };\n}\nfunction go(e) {\n  let t, n, o, i, s, r, l, a, c, u, f, d = Se(\n    /*geom*/\n    e[4].points\n  ), g = [];\n  for (let y = 0; y < d.length; y += 1)\n    g[y] = bt(wt(e, d, y));\n  const m = (y) => X(g[y], 1, 1, () => {\n    g[y] = null;\n  });\n  return {\n    c() {\n      t = C(\"polygon\"), i = ie(), s = C(\"polygon\"), l = ie();\n      for (let y = 0; y < g.length; y += 1)\n        g[y].c();\n      a = fe(), h(t, \"class\", \"a9s-outer\"), h(t, \"style\", n = /*computedStyle*/\n      e[1] ? \"display:none;\" : void 0), h(t, \"points\", o = /*geom*/\n      e[4].points.map(Et).join(\" \")), h(s, \"class\", \"a9s-inner a9s-shape-handle\"), h(\n        s,\n        \"style\",\n        /*computedStyle*/\n        e[1]\n      ), h(s, \"points\", r = /*geom*/\n      e[4].points.map(At).join(\" \"));\n    },\n    m(y, b) {\n      O(y, t, b), O(y, i, b), O(y, s, b), O(y, l, b);\n      for (let p = 0; p < g.length; p += 1)\n        g[p] && g[p].m(y, b);\n      O(y, a, b), c = !0, u || (f = [\n        j(t, \"pointerdown\", function() {\n          K(\n            /*grab*/\n            e[9](\"SHAPE\")\n          ) && e[9](\"SHAPE\").apply(this, arguments);\n        }),\n        j(s, \"pointerdown\", function() {\n          K(\n            /*grab*/\n            e[9](\"SHAPE\")\n          ) && e[9](\"SHAPE\").apply(this, arguments);\n        })\n      ], u = !0);\n    },\n    p(y, b) {\n      if (e = y, (!c || b & /*computedStyle*/\n      2 && n !== (n = /*computedStyle*/\n      e[1] ? \"display:none;\" : void 0)) && h(t, \"style\", n), (!c || b & /*geom*/\n      16 && o !== (o = /*geom*/\n      e[4].points.map(Et).join(\" \"))) && h(t, \"points\", o), (!c || b & /*computedStyle*/\n      2) && h(\n        s,\n        \"style\",\n        /*computedStyle*/\n        e[1]\n      ), (!c || b & /*geom*/\n      16 && r !== (r = /*geom*/\n      e[4].points.map(At).join(\" \"))) && h(s, \"points\", r), b & /*geom, viewportScale, grab*/\n      536) {\n        d = Se(\n          /*geom*/\n          e[4].points\n        );\n        let p;\n        for (p = 0; p < d.length; p += 1) {\n          const A = wt(e, d, p);\n          g[p] ? (g[p].p(A, b), I(g[p], 1)) : (g[p] = bt(A), g[p].c(), I(g[p], 1), g[p].m(a.parentNode, a));\n        }\n        for (le(), p = d.length; p < g.length; p += 1)\n          m(p);\n        ae();\n      }\n    },\n    i(y) {\n      if (!c) {\n        for (let b = 0; b < d.length; b += 1)\n          I(g[b]);\n        c = !0;\n      }\n    },\n    o(y) {\n      g = g.filter(Boolean);\n      for (let b = 0; b < g.length; b += 1)\n        X(g[b]);\n      c = !1;\n    },\n    d(y) {\n      y && (k(t), k(i), k(s), k(l), k(a)), rt(g, y), u = !1, ce(f);\n    }\n  };\n}\nfunction mo(e) {\n  let t, n;\n  return t = new Zt({\n    props: {\n      shape: (\n        /*shape*/\n        e[0]\n      ),\n      transform: (\n        /*transform*/\n        e[2]\n      ),\n      editor: (\n        /*editor*/\n        e[5]\n      ),\n      $$slots: {\n        default: [\n          go,\n          ({ grab: o }) => ({ 9: o }),\n          ({ grab: o }) => o ? 512 : 0\n        ]\n      },\n      $$scope: { ctx: e }\n    }\n  }), t.$on(\n    \"change\",\n    /*change_handler*/\n    e[6]\n  ), t.$on(\n    \"grab\",\n    /*grab_handler*/\n    e[7]\n  ), t.$on(\n    \"release\",\n    /*release_handler*/\n    e[8]\n  ), {\n    c() {\n      te(t.$$.fragment);\n    },\n    m(o, i) {\n      $(t, o, i), n = !0;\n    },\n    p(o, [i]) {\n      const s = {};\n      i & /*shape*/\n      1 && (s.shape = /*shape*/\n      o[0]), i & /*transform*/\n      4 && (s.transform = /*transform*/\n      o[2]), i & /*$$scope, geom, viewportScale, grab, computedStyle*/\n      8730 && (s.$$scope = { dirty: i, ctx: o }), t.$set(s);\n    },\n    i(o) {\n      n || (I(t.$$.fragment, o), n = !0);\n    },\n    o(o) {\n      X(t.$$.fragment, o), n = !1;\n    },\n    d(o) {\n      ee(t, o);\n    }\n  };\n}\nconst Et = (e) => e.join(\",\"), At = (e) => e.join(\",\");\nfunction po(e, t, n) {\n  let o, { shape: i } = t, { computedStyle: s } = t, { transform: r } = t, { viewportScale: l = 1 } = t;\n  const a = (d, g, m) => {\n    let y;\n    const b = d.geometry;\n    g === \"SHAPE\" ? y = b.points.map(([A, _]) => [A + m[0], _ + m[1]]) : y = b.points.map(([A, _], E) => g === `HANDLE-${E}` ? [A + m[0], _ + m[1]] : [A, _]);\n    const p = Fe(y);\n    return { ...d, geometry: { points: y, bounds: p } };\n  };\n  function c(d) {\n    de.call(this, e, d);\n  }\n  function u(d) {\n    de.call(this, e, d);\n  }\n  function f(d) {\n    de.call(this, e, d);\n  }\n  return e.$$set = (d) => {\n    \"shape\" in d && n(0, i = d.shape), \"computedStyle\" in d && n(1, s = d.computedStyle), \"transform\" in d && n(2, r = d.transform), \"viewportScale\" in d && n(3, l = d.viewportScale);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*shape*/\n    1 && n(4, o = i.geometry);\n  }, [\n    i,\n    s,\n    r,\n    l,\n    o,\n    a,\n    c,\n    u,\n    f\n  ];\n}\nclass yo extends oe {\n  constructor(t) {\n    super(), ne(this, t, po, mo, J, {\n      shape: 0,\n      computedStyle: 1,\n      transform: 2,\n      viewportScale: 3\n    });\n  }\n}\nconst Ze = (e, t) => {\n  const n = Math.abs(t[0] - e[0]), o = Math.abs(t[1] - e[1]);\n  return Math.sqrt(Math.pow(n, 2) + Math.pow(o, 2));\n}, ye = [];\nfunction _o(e, t = F) {\n  let n;\n  const o = /* @__PURE__ */ new Set();\n  function i(l) {\n    if (J(e, l) && (e = l, n)) {\n      const a = !ye.length;\n      for (const c of o)\n        c[1](), ye.push(c, e);\n      if (a) {\n        for (let c = 0; c < ye.length; c += 2)\n          ye[c][0](ye[c + 1]);\n        ye.length = 0;\n      }\n    }\n  }\n  function s(l) {\n    i(l(e));\n  }\n  function r(l, a = F) {\n    const c = [l, a];\n    return o.add(c), o.size === 1 && (n = t(i, s) || F), l(e), () => {\n      o.delete(c), o.size === 0 && n && (n(), n = null);\n    };\n  }\n  return { set: i, update: s, subscribe: r };\n}\nconst wo = (e, t) => {\n  const { naturalWidth: n, naturalHeight: o } = e;\n  if (!n && !o) {\n    const { width: i, height: s } = e;\n    t.setAttribute(\"viewBox\", `0 0 ${i} ${s}`), e.addEventListener(\"load\", (r) => {\n      const l = r.target;\n      t.setAttribute(\"viewBox\", `0 0 ${l.naturalWidth} ${l.naturalHeight}`);\n    });\n  } else\n    t.setAttribute(\"viewBox\", `0 0 ${n} ${o}`);\n}, bo = (e, t) => {\n  wo(e, t);\n  const { subscribe: n, set: o } = _o(1);\n  let i;\n  return window.ResizeObserver && (i = new ResizeObserver(() => {\n    const r = t.getBoundingClientRect(), { width: l, height: a } = t.viewBox.baseVal, c = Math.max(\n      r.width / l,\n      r.height / a\n    );\n    o(c);\n  }), i.observe(t.parentElement)), { destroy: () => {\n    i && i.disconnect();\n  }, subscribe: n };\n}, Eo = \"ontouchstart\" in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;\nfunction Ao(e) {\n  let t, n, o, i, s, r;\n  return {\n    c() {\n      t = C(\"rect\"), h(t, \"class\", n = ze(`a9s-handle ${/*$$props*/\n      e[8].class || \"\"}`.trim()) + \" svelte-1sgkh33\"), h(t, \"x\", o = /*x*/\n      e[0] - /*handleSize*/\n      e[5] / 2), h(t, \"y\", i = /*y*/\n      e[1] - /*handleSize*/\n      e[5] / 2), h(\n        t,\n        \"width\",\n        /*handleSize*/\n        e[5]\n      ), h(\n        t,\n        \"height\",\n        /*handleSize*/\n        e[5]\n      );\n    },\n    m(l, a) {\n      O(l, t, a), s || (r = j(\n        t,\n        \"pointerdown\",\n        /*pointerdown_handler_2*/\n        e[11]\n      ), s = !0);\n    },\n    p(l, a) {\n      a & /*$$props*/\n      256 && n !== (n = ze(`a9s-handle ${/*$$props*/\n      l[8].class || \"\"}`.trim()) + \" svelte-1sgkh33\") && h(t, \"class\", n), a & /*x, handleSize*/\n      33 && o !== (o = /*x*/\n      l[0] - /*handleSize*/\n      l[5] / 2) && h(t, \"x\", o), a & /*y, handleSize*/\n      34 && i !== (i = /*y*/\n      l[1] - /*handleSize*/\n      l[5] / 2) && h(t, \"y\", i), a & /*handleSize*/\n      32 && h(\n        t,\n        \"width\",\n        /*handleSize*/\n        l[5]\n      ), a & /*handleSize*/\n      32 && h(\n        t,\n        \"height\",\n        /*handleSize*/\n        l[5]\n      );\n    },\n    d(l) {\n      l && k(t), s = !1, r();\n    }\n  };\n}\nfunction So(e) {\n  let t, n, o, i, s, r, l, a, c;\n  return {\n    c() {\n      t = C(\"g\"), n = C(\"circle\"), i = C(\"rect\"), h(\n        n,\n        \"cx\",\n        /*x*/\n        e[0]\n      ), h(\n        n,\n        \"cy\",\n        /*y*/\n        e[1]\n      ), h(n, \"r\", o = /*radius*/\n      e[3] / /*scale*/\n      e[2]), h(n, \"class\", \"a9s-touch-halo svelte-1sgkh33\"), Ee(\n        n,\n        \"touched\",\n        /*touched*/\n        e[4]\n      ), h(i, \"class\", s = ze(`a9s-handle ${/*$$props*/\n      e[8].class || \"\"}`.trim()) + \" svelte-1sgkh33\"), h(i, \"x\", r = /*x*/\n      e[0] - /*handleSize*/\n      e[5] / 2), h(i, \"y\", l = /*y*/\n      e[1] - /*handleSize*/\n      e[5] / 2), h(\n        i,\n        \"width\",\n        /*handleSize*/\n        e[5]\n      ), h(\n        i,\n        \"height\",\n        /*handleSize*/\n        e[5]\n      ), h(t, \"class\", \"a9s-touch-handle\");\n    },\n    m(u, f) {\n      O(u, t, f), re(t, n), re(t, i), a || (c = [\n        j(\n          n,\n          \"pointerdown\",\n          /*pointerdown_handler*/\n          e[10]\n        ),\n        j(\n          n,\n          \"pointerdown\",\n          /*onPointerDown*/\n          e[6]\n        ),\n        j(\n          n,\n          \"pointerup\",\n          /*onPointerUp*/\n          e[7]\n        ),\n        j(\n          i,\n          \"pointerdown\",\n          /*pointerdown_handler_1*/\n          e[9]\n        ),\n        j(\n          i,\n          \"pointerdown\",\n          /*onPointerDown*/\n          e[6]\n        ),\n        j(\n          i,\n          \"pointerup\",\n          /*onPointerUp*/\n          e[7]\n        )\n      ], a = !0);\n    },\n    p(u, f) {\n      f & /*x*/\n      1 && h(\n        n,\n        \"cx\",\n        /*x*/\n        u[0]\n      ), f & /*y*/\n      2 && h(\n        n,\n        \"cy\",\n        /*y*/\n        u[1]\n      ), f & /*radius, scale*/\n      12 && o !== (o = /*radius*/\n      u[3] / /*scale*/\n      u[2]) && h(n, \"r\", o), f & /*touched*/\n      16 && Ee(\n        n,\n        \"touched\",\n        /*touched*/\n        u[4]\n      ), f & /*$$props*/\n      256 && s !== (s = ze(`a9s-handle ${/*$$props*/\n      u[8].class || \"\"}`.trim()) + \" svelte-1sgkh33\") && h(i, \"class\", s), f & /*x, handleSize*/\n      33 && r !== (r = /*x*/\n      u[0] - /*handleSize*/\n      u[5] / 2) && h(i, \"x\", r), f & /*y, handleSize*/\n      34 && l !== (l = /*y*/\n      u[1] - /*handleSize*/\n      u[5] / 2) && h(i, \"y\", l), f & /*handleSize*/\n      32 && h(\n        i,\n        \"width\",\n        /*handleSize*/\n        u[5]\n      ), f & /*handleSize*/\n      32 && h(\n        i,\n        \"height\",\n        /*handleSize*/\n        u[5]\n      );\n    },\n    d(u) {\n      u && k(t), a = !1, ce(c);\n    }\n  };\n}\nfunction To(e) {\n  let t;\n  function n(s, r) {\n    return Eo ? So : Ao;\n  }\n  let i = n()(e);\n  return {\n    c() {\n      i.c(), t = fe();\n    },\n    m(s, r) {\n      i.m(s, r), O(s, t, r);\n    },\n    p(s, [r]) {\n      i.p(s, r);\n    },\n    i: F,\n    o: F,\n    d(s) {\n      s && k(t), i.d(s);\n    }\n  };\n}\nfunction Mo(e, t, n) {\n  let o, { x: i } = t, { y: s } = t, { scale: r } = t, { radius: l = 30 } = t, a = !1;\n  const c = (m) => {\n    m.pointerType === \"touch\" && n(4, a = !0);\n  }, u = () => n(4, a = !1);\n  function f(m) {\n    de.call(this, e, m);\n  }\n  function d(m) {\n    de.call(this, e, m);\n  }\n  function g(m) {\n    de.call(this, e, m);\n  }\n  return e.$$set = (m) => {\n    n(8, t = nt(nt({}, t), gt(m))), \"x\" in m && n(0, i = m.x), \"y\" in m && n(1, s = m.y), \"scale\" in m && n(2, r = m.scale), \"radius\" in m && n(3, l = m.radius);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*scale*/\n    4 && n(5, o = 10 / r);\n  }, t = gt(t), [\n    i,\n    s,\n    r,\n    l,\n    a,\n    o,\n    c,\n    u,\n    t,\n    f,\n    d,\n    g\n  ];\n}\nclass ke extends oe {\n  constructor(t) {\n    super(), ne(this, t, Mo, To, J, { x: 0, y: 1, scale: 2, radius: 3 });\n  }\n}\nfunction Lo(e) {\n  let t, n, o, i, s, r, l, a, c, u, f, d, g, m, y, b, p, A, _, E, B, V, U, R, Y, w, S, T, M, P, G, x, Me, se, Le, v, Q, z, ue, Z, N, qe, ut;\n  return se = new ke({\n    props: {\n      class: \"a9s-corner-handle-topleft\",\n      x: (\n        /*geom*/\n        e[4].x\n      ),\n      y: (\n        /*geom*/\n        e[4].y\n      ),\n      scale: (\n        /*viewportScale*/\n        e[3]\n      )\n    }\n  }), se.$on(\"pointerdown\", function() {\n    K(\n      /*grab*/\n      e[9](\"TOP_LEFT\")\n    ) && e[9](\"TOP_LEFT\").apply(this, arguments);\n  }), v = new ke({\n    props: {\n      class: \"a9s-corner-handle-topright\",\n      x: (\n        /*geom*/\n        e[4].x + /*geom*/\n        e[4].w\n      ),\n      y: (\n        /*geom*/\n        e[4].y\n      ),\n      scale: (\n        /*viewportScale*/\n        e[3]\n      )\n    }\n  }), v.$on(\"pointerdown\", function() {\n    K(\n      /*grab*/\n      e[9](\"TOP_RIGHT\")\n    ) && e[9](\"TOP_RIGHT\").apply(this, arguments);\n  }), z = new ke({\n    props: {\n      class: \"a9s-corner-handle-bottomright\",\n      x: (\n        /*geom*/\n        e[4].x + /*geom*/\n        e[4].w\n      ),\n      y: (\n        /*geom*/\n        e[4].y + /*geom*/\n        e[4].h\n      ),\n      scale: (\n        /*viewportScale*/\n        e[3]\n      )\n    }\n  }), z.$on(\"pointerdown\", function() {\n    K(\n      /*grab*/\n      e[9](\"BOTTOM_RIGHT\")\n    ) && e[9](\"BOTTOM_RIGHT\").apply(this, arguments);\n  }), Z = new ke({\n    props: {\n      class: \"a9s-corner-handle-bottomleft\",\n      x: (\n        /*geom*/\n        e[4].x\n      ),\n      y: (\n        /*geom*/\n        e[4].y + /*geom*/\n        e[4].h\n      ),\n      scale: (\n        /*viewportScale*/\n        e[3]\n      )\n    }\n  }), Z.$on(\"pointerdown\", function() {\n    K(\n      /*grab*/\n      e[9](\"BOTTOM_LEFT\")\n    ) && e[9](\"BOTTOM_LEFT\").apply(this, arguments);\n  }), {\n    c() {\n      t = C(\"rect\"), l = ie(), a = C(\"rect\"), g = ie(), m = C(\"rect\"), A = ie(), _ = C(\"rect\"), U = ie(), R = C(\"rect\"), T = ie(), M = C(\"rect\"), Me = ie(), te(se.$$.fragment), Le = ie(), te(v.$$.fragment), Q = ie(), te(z.$$.fragment), ue = ie(), te(Z.$$.fragment), h(t, \"class\", \"a9s-outer\"), h(t, \"style\", n = /*computedStyle*/\n      e[1] ? \"display:none;\" : void 0), h(t, \"x\", o = /*geom*/\n      e[4].x), h(t, \"y\", i = /*geom*/\n      e[4].y), h(t, \"width\", s = /*geom*/\n      e[4].w), h(t, \"height\", r = /*geom*/\n      e[4].h), h(a, \"class\", \"a9s-inner a9s-shape-handle\"), h(\n        a,\n        \"style\",\n        /*computedStyle*/\n        e[1]\n      ), h(a, \"x\", c = /*geom*/\n      e[4].x), h(a, \"y\", u = /*geom*/\n      e[4].y), h(a, \"width\", f = /*geom*/\n      e[4].w), h(a, \"height\", d = /*geom*/\n      e[4].h), h(m, \"class\", \"a9s-edge-handle a9s-edge-handle-top\"), h(m, \"x\", y = /*geom*/\n      e[4].x), h(m, \"y\", b = /*geom*/\n      e[4].y), h(m, \"height\", 1), h(m, \"width\", p = /*geom*/\n      e[4].w), h(_, \"class\", \"a9s-edge-handle a9s-edge-handle-right\"), h(_, \"x\", E = /*geom*/\n      e[4].x + /*geom*/\n      e[4].w), h(_, \"y\", B = /*geom*/\n      e[4].y), h(_, \"height\", V = /*geom*/\n      e[4].h), h(_, \"width\", 1), h(R, \"class\", \"a9s-edge-handle a9s-edge-handle-bottom\"), h(R, \"x\", Y = /*geom*/\n      e[4].x), h(R, \"y\", w = /*geom*/\n      e[4].y + /*geom*/\n      e[4].h), h(R, \"height\", 1), h(R, \"width\", S = /*geom*/\n      e[4].w), h(M, \"class\", \"a9s-edge-handle a9s-edge-handle-left\"), h(M, \"x\", P = /*geom*/\n      e[4].x), h(M, \"y\", G = /*geom*/\n      e[4].y), h(M, \"height\", x = /*geom*/\n      e[4].h), h(M, \"width\", 1);\n    },\n    m(D, L) {\n      O(D, t, L), O(D, l, L), O(D, a, L), O(D, g, L), O(D, m, L), O(D, A, L), O(D, _, L), O(D, U, L), O(D, R, L), O(D, T, L), O(D, M, L), O(D, Me, L), $(se, D, L), O(D, Le, L), $(v, D, L), O(D, Q, L), $(z, D, L), O(D, ue, L), $(Z, D, L), N = !0, qe || (ut = [\n        j(t, \"pointerdown\", function() {\n          K(\n            /*grab*/\n            e[9](\"SHAPE\")\n          ) && e[9](\"SHAPE\").apply(this, arguments);\n        }),\n        j(a, \"pointerdown\", function() {\n          K(\n            /*grab*/\n            e[9](\"SHAPE\")\n          ) && e[9](\"SHAPE\").apply(this, arguments);\n        }),\n        j(m, \"pointerdown\", function() {\n          K(\n            /*grab*/\n            e[9](\"TOP\")\n          ) && e[9](\"TOP\").apply(this, arguments);\n        }),\n        j(_, \"pointerdown\", function() {\n          K(\n            /*grab*/\n            e[9](\"RIGHT\")\n          ) && e[9](\"RIGHT\").apply(this, arguments);\n        }),\n        j(R, \"pointerdown\", function() {\n          K(\n            /*grab*/\n            e[9](\"BOTTOM\")\n          ) && e[9](\"BOTTOM\").apply(this, arguments);\n        }),\n        j(M, \"pointerdown\", function() {\n          K(\n            /*grab*/\n            e[9](\"LEFT\")\n          ) && e[9](\"LEFT\").apply(this, arguments);\n        })\n      ], qe = !0);\n    },\n    p(D, L) {\n      e = D, (!N || L & /*computedStyle*/\n      2 && n !== (n = /*computedStyle*/\n      e[1] ? \"display:none;\" : void 0)) && h(t, \"style\", n), (!N || L & /*geom*/\n      16 && o !== (o = /*geom*/\n      e[4].x)) && h(t, \"x\", o), (!N || L & /*geom*/\n      16 && i !== (i = /*geom*/\n      e[4].y)) && h(t, \"y\", i), (!N || L & /*geom*/\n      16 && s !== (s = /*geom*/\n      e[4].w)) && h(t, \"width\", s), (!N || L & /*geom*/\n      16 && r !== (r = /*geom*/\n      e[4].h)) && h(t, \"height\", r), (!N || L & /*computedStyle*/\n      2) && h(\n        a,\n        \"style\",\n        /*computedStyle*/\n        e[1]\n      ), (!N || L & /*geom*/\n      16 && c !== (c = /*geom*/\n      e[4].x)) && h(a, \"x\", c), (!N || L & /*geom*/\n      16 && u !== (u = /*geom*/\n      e[4].y)) && h(a, \"y\", u), (!N || L & /*geom*/\n      16 && f !== (f = /*geom*/\n      e[4].w)) && h(a, \"width\", f), (!N || L & /*geom*/\n      16 && d !== (d = /*geom*/\n      e[4].h)) && h(a, \"height\", d), (!N || L & /*geom*/\n      16 && y !== (y = /*geom*/\n      e[4].x)) && h(m, \"x\", y), (!N || L & /*geom*/\n      16 && b !== (b = /*geom*/\n      e[4].y)) && h(m, \"y\", b), (!N || L & /*geom*/\n      16 && p !== (p = /*geom*/\n      e[4].w)) && h(m, \"width\", p), (!N || L & /*geom*/\n      16 && E !== (E = /*geom*/\n      e[4].x + /*geom*/\n      e[4].w)) && h(_, \"x\", E), (!N || L & /*geom*/\n      16 && B !== (B = /*geom*/\n      e[4].y)) && h(_, \"y\", B), (!N || L & /*geom*/\n      16 && V !== (V = /*geom*/\n      e[4].h)) && h(_, \"height\", V), (!N || L & /*geom*/\n      16 && Y !== (Y = /*geom*/\n      e[4].x)) && h(R, \"x\", Y), (!N || L & /*geom*/\n      16 && w !== (w = /*geom*/\n      e[4].y + /*geom*/\n      e[4].h)) && h(R, \"y\", w), (!N || L & /*geom*/\n      16 && S !== (S = /*geom*/\n      e[4].w)) && h(R, \"width\", S), (!N || L & /*geom*/\n      16 && P !== (P = /*geom*/\n      e[4].x)) && h(M, \"x\", P), (!N || L & /*geom*/\n      16 && G !== (G = /*geom*/\n      e[4].y)) && h(M, \"y\", G), (!N || L & /*geom*/\n      16 && x !== (x = /*geom*/\n      e[4].h)) && h(M, \"height\", x);\n      const De = {};\n      L & /*geom*/\n      16 && (De.x = /*geom*/\n      e[4].x), L & /*geom*/\n      16 && (De.y = /*geom*/\n      e[4].y), L & /*viewportScale*/\n      8 && (De.scale = /*viewportScale*/\n      e[3]), se.$set(De);\n      const Xe = {};\n      L & /*geom*/\n      16 && (Xe.x = /*geom*/\n      e[4].x + /*geom*/\n      e[4].w), L & /*geom*/\n      16 && (Xe.y = /*geom*/\n      e[4].y), L & /*viewportScale*/\n      8 && (Xe.scale = /*viewportScale*/\n      e[3]), v.$set(Xe);\n      const Ce = {};\n      L & /*geom*/\n      16 && (Ce.x = /*geom*/\n      e[4].x + /*geom*/\n      e[4].w), L & /*geom*/\n      16 && (Ce.y = /*geom*/\n      e[4].y + /*geom*/\n      e[4].h), L & /*viewportScale*/\n      8 && (Ce.scale = /*viewportScale*/\n      e[3]), z.$set(Ce);\n      const Re = {};\n      L & /*geom*/\n      16 && (Re.x = /*geom*/\n      e[4].x), L & /*geom*/\n      16 && (Re.y = /*geom*/\n      e[4].y + /*geom*/\n      e[4].h), L & /*viewportScale*/\n      8 && (Re.scale = /*viewportScale*/\n      e[3]), Z.$set(Re);\n    },\n    i(D) {\n      N || (I(se.$$.fragment, D), I(v.$$.fragment, D), I(z.$$.fragment, D), I(Z.$$.fragment, D), N = !0);\n    },\n    o(D) {\n      X(se.$$.fragment, D), X(v.$$.fragment, D), X(z.$$.fragment, D), X(Z.$$.fragment, D), N = !1;\n    },\n    d(D) {\n      D && (k(t), k(l), k(a), k(g), k(m), k(A), k(_), k(U), k(R), k(T), k(M), k(Me), k(Le), k(Q), k(ue)), ee(se, D), ee(v, D), ee(z, D), ee(Z, D), qe = !1, ce(ut);\n    }\n  };\n}\nfunction vo(e) {\n  let t, n;\n  return t = new Zt({\n    props: {\n      shape: (\n        /*shape*/\n        e[0]\n      ),\n      transform: (\n        /*transform*/\n        e[2]\n      ),\n      editor: (\n        /*editor*/\n        e[5]\n      ),\n      $$slots: {\n        default: [\n          Lo,\n          ({ grab: o }) => ({ 9: o }),\n          ({ grab: o }) => o ? 512 : 0\n        ]\n      },\n      $$scope: { ctx: e }\n    }\n  }), t.$on(\n    \"grab\",\n    /*grab_handler*/\n    e[6]\n  ), t.$on(\n    \"change\",\n    /*change_handler*/\n    e[7]\n  ), t.$on(\n    \"release\",\n    /*release_handler*/\n    e[8]\n  ), {\n    c() {\n      te(t.$$.fragment);\n    },\n    m(o, i) {\n      $(t, o, i), n = !0;\n    },\n    p(o, [i]) {\n      const s = {};\n      i & /*shape*/\n      1 && (s.shape = /*shape*/\n      o[0]), i & /*transform*/\n      4 && (s.transform = /*transform*/\n      o[2]), i & /*$$scope, geom, viewportScale, grab, computedStyle*/\n      1562 && (s.$$scope = { dirty: i, ctx: o }), t.$set(s);\n    },\n    i(o) {\n      n || (I(t.$$.fragment, o), n = !0);\n    },\n    o(o) {\n      X(t.$$.fragment, o), n = !1;\n    },\n    d(o) {\n      ee(t, o);\n    }\n  };\n}\nfunction ko(e, t, n) {\n  let o, { shape: i } = t, { computedStyle: s } = t, { transform: r } = t, { viewportScale: l = 1 } = t;\n  const a = (d, g, m) => {\n    const y = d.geometry.bounds;\n    let [b, p] = [y.minX, y.minY], [A, _] = [y.maxX, y.maxY];\n    const [E, B] = m;\n    if (g === \"SHAPE\")\n      b += E, A += E, p += B, _ += B;\n    else {\n      switch (g) {\n        case \"TOP\":\n        case \"TOP_LEFT\":\n        case \"TOP_RIGHT\": {\n          p += B;\n          break;\n        }\n        case \"BOTTOM\":\n        case \"BOTTOM_LEFT\":\n        case \"BOTTOM_RIGHT\": {\n          _ += B;\n          break;\n        }\n      }\n      switch (g) {\n        case \"LEFT\":\n        case \"TOP_LEFT\":\n        case \"BOTTOM_LEFT\": {\n          b += E;\n          break;\n        }\n        case \"RIGHT\":\n        case \"TOP_RIGHT\":\n        case \"BOTTOM_RIGHT\": {\n          A += E;\n          break;\n        }\n      }\n    }\n    const V = Math.min(b, A), U = Math.min(p, _), R = Math.abs(A - b), Y = Math.abs(_ - p);\n    return {\n      ...d,\n      geometry: {\n        x: V,\n        y: U,\n        w: R,\n        h: Y,\n        bounds: {\n          minX: V,\n          minY: U,\n          maxX: V + R,\n          maxY: U + Y\n        }\n      }\n    };\n  };\n  function c(d) {\n    de.call(this, e, d);\n  }\n  function u(d) {\n    de.call(this, e, d);\n  }\n  function f(d) {\n    de.call(this, e, d);\n  }\n  return e.$$set = (d) => {\n    \"shape\" in d && n(0, i = d.shape), \"computedStyle\" in d && n(1, s = d.computedStyle), \"transform\" in d && n(2, r = d.transform), \"viewportScale\" in d && n(3, l = d.viewportScale);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*shape*/\n    1 && n(4, o = i.geometry);\n  }, [\n    i,\n    s,\n    r,\n    l,\n    o,\n    a,\n    c,\n    u,\n    f\n  ];\n}\nclass Oo extends oe {\n  constructor(t) {\n    super(), ne(this, t, ko, vo, J, {\n      shape: 0,\n      computedStyle: 1,\n      transform: 2,\n      viewportScale: 3\n    });\n  }\n}\nconst Qt = /* @__PURE__ */ new Map([\n  [q.RECTANGLE, Oo],\n  [q.POLYGON, yo]\n]), Bo = (e) => Qt.get(e.type), Io = (e, t) => Qt.set(e, t), Po = (e) => ({}), St = (e) => ({ grab: (\n  /*onGrab*/\n  e[0]\n) });\nfunction Yo(e) {\n  let t, n, o, i;\n  const s = (\n    /*#slots*/\n    e[7].default\n  ), r = rn(\n    s,\n    e,\n    /*$$scope*/\n    e[6],\n    St\n  );\n  return {\n    c() {\n      t = C(\"g\"), r && r.c(), h(t, \"class\", \"a9s-annotation selected\");\n    },\n    m(l, a) {\n      O(l, t, a), r && r.m(t, null), n = !0, o || (i = [\n        j(\n          t,\n          \"pointerup\",\n          /*onRelease*/\n          e[2]\n        ),\n        j(\n          t,\n          \"pointermove\",\n          /*onPointerMove*/\n          e[1]\n        )\n      ], o = !0);\n    },\n    p(l, [a]) {\n      r && r.p && (!n || a & /*$$scope*/\n      64) && an(\n        r,\n        s,\n        l,\n        /*$$scope*/\n        l[6],\n        n ? ln(\n          s,\n          /*$$scope*/\n          l[6],\n          a,\n          Po\n        ) : cn(\n          /*$$scope*/\n          l[6]\n        ),\n        St\n      );\n    },\n    i(l) {\n      n || (I(r, l), n = !0);\n    },\n    o(l) {\n      X(r, l), n = !1;\n    },\n    d(l) {\n      l && k(t), r && r.d(l), o = !1, ce(i);\n    }\n  };\n}\nfunction Do(e, t, n) {\n  let { $$slots: o = {}, $$scope: i } = t;\n  const s = Te();\n  let { shape: r } = t, { editor: l } = t, { transform: a } = t, c, u, f;\n  const d = (y) => (b) => {\n    c = y, u = a.elementToImage(b.offsetX, b.offsetY), f = r, b.target.setPointerCapture(b.pointerId), s(\"grab\", b);\n  }, g = (y) => {\n    if (c) {\n      const [b, p] = a.elementToImage(y.offsetX, y.offsetY), A = [b - u[0], p - u[1]];\n      n(3, r = l(f, c, A)), s(\"change\", r);\n    }\n  }, m = (y) => {\n    y.target.releasePointerCapture(y.pointerId), c = void 0, f = r, s(\"release\", y);\n  };\n  return e.$$set = (y) => {\n    \"shape\" in y && n(3, r = y.shape), \"editor\" in y && n(4, l = y.editor), \"transform\" in y && n(5, a = y.transform), \"$$scope\" in y && n(6, i = y.$$scope);\n  }, [d, g, m, r, l, a, i, o];\n}\nclass Zt extends oe {\n  constructor(t) {\n    super(), ne(this, t, Do, Yo, J, { shape: 3, editor: 4, transform: 5 });\n  }\n}\nconst je = (e, t) => {\n  const n = typeof t == \"function\" ? t(e) : t;\n  if (n) {\n    const { fill: o, fillOpacity: i } = n;\n    let s = \"\";\n    return o && (s += `fill:${o};stroke:${o};`), s += `fill-opacity:${i || \"0.25\"};`, s;\n  }\n};\nfunction Xo(e, t, n) {\n  let o;\n  const i = Te();\n  let { annotation: s } = t, { editor: r } = t, { style: l } = t, { target: a } = t, { transform: c } = t, { viewportScale: u } = t, f;\n  return Ye(() => (n(6, f = new r({\n    target: a,\n    props: {\n      shape: s.target.selector,\n      computedStyle: o,\n      transform: c,\n      viewportScale: u\n    }\n  })), f.$on(\"change\", (d) => {\n    f.$$set({ shape: d.detail }), i(\"change\", d.detail);\n  }), f.$on(\"grab\", (d) => i(\"grab\", d.detail)), f.$on(\"release\", (d) => i(\"release\", d.detail)), () => {\n    f.$destroy();\n  })), e.$$set = (d) => {\n    \"annotation\" in d && n(0, s = d.annotation), \"editor\" in d && n(1, r = d.editor), \"style\" in d && n(2, l = d.style), \"target\" in d && n(3, a = d.target), \"transform\" in d && n(4, c = d.transform), \"viewportScale\" in d && n(5, u = d.viewportScale);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*annotation, style*/\n    5 && (o = je(s, l)), e.$$.dirty & /*annotation, editorComponent*/\n    65 && s && (f == null || f.$set({ shape: s.target.selector })), e.$$.dirty & /*editorComponent, transform*/\n    80 && f && f.$set({ transform: c }), e.$$.dirty & /*editorComponent, viewportScale*/\n    96 && f && f.$set({ viewportScale: u });\n  }, [s, r, l, a, c, u, f];\n}\nclass Co extends oe {\n  constructor(t) {\n    super(), ne(this, t, Xo, null, J, {\n      annotation: 0,\n      editor: 1,\n      style: 2,\n      target: 3,\n      transform: 4,\n      viewportScale: 5\n    });\n  }\n}\nfunction Ro(e, t, n) {\n  const o = Te();\n  let { drawingMode: i } = t, { target: s } = t, { tool: r } = t, { transform: l } = t, { viewportScale: a } = t, c;\n  return Ye(() => {\n    const u = s.closest(\"svg\"), f = [], d = (g, m, y) => {\n      u == null || u.addEventListener(g, m, y), f.push(() => u == null ? void 0 : u.removeEventListener(g, m, y));\n    };\n    return n(5, c = new r({\n      target: s,\n      props: {\n        addEventListener: d,\n        drawingMode: i,\n        transform: l,\n        viewportScale: a\n      }\n    })), c.$on(\"create\", (g) => o(\"create\", g.detail)), () => {\n      f.forEach((g) => g()), c.$destroy();\n    };\n  }), e.$$set = (u) => {\n    \"drawingMode\" in u && n(0, i = u.drawingMode), \"target\" in u && n(1, s = u.target), \"tool\" in u && n(2, r = u.tool), \"transform\" in u && n(3, l = u.transform), \"viewportScale\" in u && n(4, a = u.viewportScale);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*toolComponent, transform*/\n    40 && c && c.$set({ transform: l }), e.$$.dirty & /*toolComponent, viewportScale*/\n    48 && c && c.$set({ viewportScale: a });\n  }, [i, s, r, l, a, c];\n}\nclass No extends oe {\n  constructor(t) {\n    super(), ne(this, t, Ro, null, J, {\n      drawingMode: 0,\n      target: 1,\n      tool: 2,\n      transform: 3,\n      viewportScale: 4\n    });\n  }\n}\nfunction Tt(e) {\n  let t, n;\n  return {\n    c() {\n      t = C(\"rect\"), n = C(\"rect\"), h(t, \"class\", \"a9s-outer\"), h(\n        t,\n        \"x\",\n        /*x*/\n        e[1]\n      ), h(\n        t,\n        \"y\",\n        /*y*/\n        e[2]\n      ), h(\n        t,\n        \"width\",\n        /*w*/\n        e[3]\n      ), h(\n        t,\n        \"height\",\n        /*h*/\n        e[4]\n      ), h(n, \"class\", \"a9s-inner\"), h(\n        n,\n        \"x\",\n        /*x*/\n        e[1]\n      ), h(\n        n,\n        \"y\",\n        /*y*/\n        e[2]\n      ), h(\n        n,\n        \"width\",\n        /*w*/\n        e[3]\n      ), h(\n        n,\n        \"height\",\n        /*h*/\n        e[4]\n      );\n    },\n    m(o, i) {\n      O(o, t, i), O(o, n, i);\n    },\n    p(o, i) {\n      i & /*x*/\n      2 && h(\n        t,\n        \"x\",\n        /*x*/\n        o[1]\n      ), i & /*y*/\n      4 && h(\n        t,\n        \"y\",\n        /*y*/\n        o[2]\n      ), i & /*w*/\n      8 && h(\n        t,\n        \"width\",\n        /*w*/\n        o[3]\n      ), i & /*h*/\n      16 && h(\n        t,\n        \"height\",\n        /*h*/\n        o[4]\n      ), i & /*x*/\n      2 && h(\n        n,\n        \"x\",\n        /*x*/\n        o[1]\n      ), i & /*y*/\n      4 && h(\n        n,\n        \"y\",\n        /*y*/\n        o[2]\n      ), i & /*w*/\n      8 && h(\n        n,\n        \"width\",\n        /*w*/\n        o[3]\n      ), i & /*h*/\n      16 && h(\n        n,\n        \"height\",\n        /*h*/\n        o[4]\n      );\n    },\n    d(o) {\n      o && (k(t), k(n));\n    }\n  };\n}\nfunction Uo(e) {\n  let t, n = (\n    /*origin*/\n    e[0] && Tt(e)\n  );\n  return {\n    c() {\n      t = C(\"g\"), n && n.c(), h(t, \"class\", \"a9s-annotation a9s-rubberband\");\n    },\n    m(o, i) {\n      O(o, t, i), n && n.m(t, null);\n    },\n    p(o, [i]) {\n      /*origin*/\n      o[0] ? n ? n.p(o, i) : (n = Tt(o), n.c(), n.m(t, null)) : n && (n.d(1), n = null);\n    },\n    i: F,\n    o: F,\n    d(o) {\n      o && k(t), n && n.d();\n    }\n  };\n}\nfunction Vo(e, t, n) {\n  const o = Te();\n  let { addEventListener: i } = t, { drawingMode: s } = t, { transform: r } = t, l, a, c, u, f, d, g;\n  const m = (A) => {\n    const _ = A;\n    l = performance.now(), s === \"drag\" && (n(0, a = r.elementToImage(_.offsetX, _.offsetY)), c = a, n(1, u = a[0]), n(2, f = a[1]), n(3, d = 1), n(4, g = 1));\n  }, y = (A) => {\n    const _ = A;\n    a && (c = r.elementToImage(_.offsetX, _.offsetY), n(1, u = Math.min(c[0], a[0])), n(2, f = Math.min(c[1], a[1])), n(3, d = Math.abs(c[0] - a[0])), n(4, g = Math.abs(c[1] - a[1])));\n  }, b = (A) => {\n    const _ = A, E = performance.now() - l;\n    if (s === \"click\") {\n      if (E > 300)\n        return;\n      _.stopPropagation(), a ? p() : (n(0, a = r.elementToImage(_.offsetX, _.offsetY)), c = a, n(1, u = a[0]), n(2, f = a[1]), n(3, d = 1), n(4, g = 1));\n    } else\n      a && (E > 300 || d * g > 100 ? (_.stopPropagation(), p()) : (n(0, a = void 0), c = void 0));\n  }, p = () => {\n    if (d * g > 15) {\n      const A = {\n        type: q.RECTANGLE,\n        geometry: {\n          bounds: {\n            minX: u,\n            minY: f,\n            maxX: u + d,\n            maxY: f + g\n          },\n          x: u,\n          y: f,\n          w: d,\n          h: g\n        }\n      };\n      o(\"create\", A);\n    }\n    n(0, a = void 0), c = void 0;\n  };\n  return Ye(() => {\n    i(\"pointerdown\", m), i(\"pointermove\", y), i(\"pointerup\", b, !0);\n  }), e.$$set = (A) => {\n    \"addEventListener\" in A && n(5, i = A.addEventListener), \"drawingMode\" in A && n(6, s = A.drawingMode), \"transform\" in A && n(7, r = A.transform);\n  }, [a, u, f, d, g, i, s, r];\n}\nclass Go extends oe {\n  constructor(t) {\n    super(), ne(this, t, Vo, Uo, J, {\n      addEventListener: 5,\n      drawingMode: 6,\n      transform: 7\n    });\n  }\n}\nfunction xe(e) {\n  const t = e.slice(), n = (\n    /*isClosable*/\n    (t[2] ? (\n      /*points*/\n      t[0]\n    ) : [\n      .../*points*/\n      t[0],\n      /*cursor*/\n      t[1]\n    ]).map((o) => o.join(\",\")).join(\" \")\n  );\n  return t[16] = n, t;\n}\nfunction Mt(e) {\n  let t, n, o, i, s, r = (\n    /*isClosable*/\n    e[2] && Lt(e)\n  );\n  return {\n    c() {\n      t = C(\"polygon\"), o = C(\"polygon\"), r && r.c(), s = fe(), h(t, \"class\", \"a9s-outer\"), h(t, \"points\", n = /*coords*/\n      e[16]), h(o, \"class\", \"a9s-inner\"), h(o, \"points\", i = /*coords*/\n      e[16]);\n    },\n    m(l, a) {\n      O(l, t, a), O(l, o, a), r && r.m(l, a), O(l, s, a);\n    },\n    p(l, a) {\n      a & /*isClosable, points, cursor*/\n      7 && n !== (n = /*coords*/\n      l[16]) && h(t, \"points\", n), a & /*isClosable, points, cursor*/\n      7 && i !== (i = /*coords*/\n      l[16]) && h(o, \"points\", i), /*isClosable*/\n      l[2] ? r ? r.p(l, a) : (r = Lt(l), r.c(), r.m(s.parentNode, s)) : r && (r.d(1), r = null);\n    },\n    d(l) {\n      l && (k(t), k(o), k(s)), r && r.d(l);\n    }\n  };\n}\nfunction Lt(e) {\n  let t, n, o;\n  return {\n    c() {\n      t = C(\"rect\"), h(t, \"class\", \"a9s-corner-handle\"), h(t, \"x\", n = /*points*/\n      e[0][0][0] - /*handleSize*/\n      e[3] / 2), h(t, \"y\", o = /*points*/\n      e[0][0][1] - /*handleSize*/\n      e[3] / 2), h(\n        t,\n        \"height\",\n        /*handleSize*/\n        e[3]\n      ), h(\n        t,\n        \"width\",\n        /*handleSize*/\n        e[3]\n      );\n    },\n    m(i, s) {\n      O(i, t, s);\n    },\n    p(i, s) {\n      s & /*points, handleSize*/\n      9 && n !== (n = /*points*/\n      i[0][0][0] - /*handleSize*/\n      i[3] / 2) && h(t, \"x\", n), s & /*points, handleSize*/\n      9 && o !== (o = /*points*/\n      i[0][0][1] - /*handleSize*/\n      i[3] / 2) && h(t, \"y\", o), s & /*handleSize*/\n      8 && h(\n        t,\n        \"height\",\n        /*handleSize*/\n        i[3]\n      ), s & /*handleSize*/\n      8 && h(\n        t,\n        \"width\",\n        /*handleSize*/\n        i[3]\n      );\n    },\n    d(i) {\n      i && k(t);\n    }\n  };\n}\nfunction zo(e) {\n  let t, n = (\n    /*cursor*/\n    e[1] && Mt(xe(e))\n  );\n  return {\n    c() {\n      t = C(\"g\"), n && n.c(), h(t, \"class\", \"a9s-annotation a9s-rubberband\");\n    },\n    m(o, i) {\n      O(o, t, i), n && n.m(t, null);\n    },\n    p(o, [i]) {\n      /*cursor*/\n      o[1] ? n ? n.p(xe(o), i) : (n = Mt(xe(o)), n.c(), n.m(t, null)) : n && (n.d(1), n = null);\n    },\n    i: F,\n    o: F,\n    d(o) {\n      o && k(t), n && n.d();\n    }\n  };\n}\nconst Ho = 20, Fo = 1500;\nfunction jo(e, t, n) {\n  let o;\n  const i = Te();\n  let { addEventListener: s } = t, { drawingMode: r } = t, { transform: l } = t, { viewportScale: a = 1 } = t, c, u = [], f, d, g = !1;\n  const m = (_) => {\n    const E = _, { timeStamp: B, offsetX: V, offsetY: U } = E;\n    if (c = { timeStamp: B, offsetX: V, offsetY: U }, r === \"drag\" && u.length === 0) {\n      const R = l.elementToImage(E.offsetX, E.offsetY);\n      u.push(R), n(1, f = R);\n    }\n  }, y = (_) => {\n    const E = _;\n    if (d && clearTimeout(d), u.length > 0) {\n      if (n(1, f = l.elementToImage(E.offsetX, E.offsetY)), u.length > 2) {\n        const B = Ze(f, u[0]) * a;\n        n(2, g = B < Ho);\n      }\n      E.pointerType === \"touch\" && (d = setTimeout(\n        () => {\n          p();\n        },\n        Fo\n      ));\n    }\n  }, b = (_) => {\n    const E = _;\n    if (d && clearTimeout(d), r === \"click\") {\n      const B = E.timeStamp - c.timeStamp, V = Ze([c.offsetX, c.offsetY], [E.offsetX, E.offsetY]);\n      if (B > 300 || V > 15)\n        return;\n      if (g)\n        A();\n      else if (u.length === 0) {\n        const U = l.elementToImage(E.offsetX, E.offsetY);\n        u.push(U), n(1, f = U);\n      } else\n        u.push(f);\n    } else {\n      if (u.length === 1 && Ze(u[0], f) <= 4) {\n        n(0, u = []), n(1, f = void 0);\n        return;\n      }\n      E.stopImmediatePropagation(), g ? A() : u.push(f);\n    }\n  }, p = () => {\n    if (!f)\n      return;\n    const _ = [...u, f], E = {\n      type: q.POLYGON,\n      geometry: { bounds: Fe(_), points: _ }\n    };\n    st(E) > 4 && (n(0, u = []), n(1, f = void 0), i(\"create\", E));\n  }, A = () => {\n    const _ = {\n      type: q.POLYGON,\n      geometry: {\n        bounds: Fe(u),\n        points: [...u]\n      }\n    };\n    n(0, u = []), n(1, f = void 0), i(\"create\", _);\n  };\n  return Ye(() => {\n    s(\"pointerdown\", m, !0), s(\"pointermove\", y), s(\"pointerup\", b, !0), s(\"dblclick\", p, !0);\n  }), e.$$set = (_) => {\n    \"addEventListener\" in _ && n(4, s = _.addEventListener), \"drawingMode\" in _ && n(5, r = _.drawingMode), \"transform\" in _ && n(6, l = _.transform), \"viewportScale\" in _ && n(7, a = _.viewportScale);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*viewportScale*/\n    128 && n(3, o = 10 / a);\n  }, [\n    u,\n    f,\n    g,\n    o,\n    s,\n    r,\n    l,\n    a\n  ];\n}\nclass qo extends oe {\n  constructor(t) {\n    super(), ne(this, t, jo, zo, J, {\n      addEventListener: 4,\n      drawingMode: 5,\n      transform: 6,\n      viewportScale: 7\n    });\n  }\n}\nconst ft = /* @__PURE__ */ new Map([\n  [\"rectangle\", { tool: Go }],\n  [\"polygon\", { tool: qo }]\n]), xt = () => [...ft.keys()], $t = (e) => ft.get(e), Ko = (e, t, n) => ft.set(e, { tool: t, opts: n });\nfunction Wo(e) {\n  let t, n, o, i, s;\n  return {\n    c() {\n      t = C(\"g\"), n = C(\"ellipse\"), i = C(\"ellipse\"), h(n, \"class\", \"a9s-outer\"), h(n, \"style\", o = /*computedStyle*/\n      e[1] ? \"display:none;\" : void 0), h(\n        n,\n        \"cx\",\n        /*cx*/\n        e[2]\n      ), h(\n        n,\n        \"cy\",\n        /*cy*/\n        e[3]\n      ), h(\n        n,\n        \"rx\",\n        /*rx*/\n        e[4]\n      ), h(\n        n,\n        \"ry\",\n        /*ry*/\n        e[5]\n      ), h(i, \"class\", \"a9s-inner\"), h(\n        i,\n        \"style\",\n        /*computedStyle*/\n        e[1]\n      ), h(\n        i,\n        \"cx\",\n        /*cx*/\n        e[2]\n      ), h(\n        i,\n        \"cy\",\n        /*cy*/\n        e[3]\n      ), h(\n        i,\n        \"rx\",\n        /*rx*/\n        e[4]\n      ), h(\n        i,\n        \"ry\",\n        /*ry*/\n        e[5]\n      ), h(t, \"data-id\", s = /*annotation*/\n      e[0].id);\n    },\n    m(r, l) {\n      O(r, t, l), re(t, n), re(t, i);\n    },\n    p(r, [l]) {\n      l & /*computedStyle*/\n      2 && o !== (o = /*computedStyle*/\n      r[1] ? \"display:none;\" : void 0) && h(n, \"style\", o), l & /*computedStyle*/\n      2 && h(\n        i,\n        \"style\",\n        /*computedStyle*/\n        r[1]\n      ), l & /*annotation*/\n      1 && s !== (s = /*annotation*/\n      r[0].id) && h(t, \"data-id\", s);\n    },\n    i: F,\n    o: F,\n    d(r) {\n      r && k(t);\n    }\n  };\n}\nfunction Jo(e, t, n) {\n  let o, { annotation: i } = t, { geom: s } = t, { style: r } = t;\n  const { cx: l, cy: a, rx: c, ry: u } = s;\n  return e.$$set = (f) => {\n    \"annotation\" in f && n(0, i = f.annotation), \"geom\" in f && n(6, s = f.geom), \"style\" in f && n(7, r = f.style);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*annotation, style*/\n    129 && n(1, o = je(i, r));\n  }, [i, o, l, a, c, u, s, r];\n}\nclass Qo extends oe {\n  constructor(t) {\n    super(), ne(this, t, Jo, Wo, J, { annotation: 0, geom: 6, style: 7 });\n  }\n}\nfunction Zo(e) {\n  let t, n, o, i, s;\n  return {\n    c() {\n      t = C(\"g\"), n = C(\"polygon\"), i = C(\"polygon\"), h(n, \"class\", \"a9s-outer\"), h(n, \"style\", o = /*computedStyle*/\n      e[1] ? \"display:none;\" : void 0), h(\n        n,\n        \"points\",\n        /*points*/\n        e[2].map(xo).join(\" \")\n      ), h(i, \"class\", \"a9s-inner\"), h(\n        i,\n        \"style\",\n        /*computedStyle*/\n        e[1]\n      ), h(\n        i,\n        \"points\",\n        /*points*/\n        e[2].map($o).join(\" \")\n      ), h(t, \"data-id\", s = /*annotation*/\n      e[0].id);\n    },\n    m(r, l) {\n      O(r, t, l), re(t, n), re(t, i);\n    },\n    p(r, [l]) {\n      l & /*computedStyle*/\n      2 && o !== (o = /*computedStyle*/\n      r[1] ? \"display:none;\" : void 0) && h(n, \"style\", o), l & /*computedStyle*/\n      2 && h(\n        i,\n        \"style\",\n        /*computedStyle*/\n        r[1]\n      ), l & /*annotation*/\n      1 && s !== (s = /*annotation*/\n      r[0].id) && h(t, \"data-id\", s);\n    },\n    i: F,\n    o: F,\n    d(r) {\n      r && k(t);\n    }\n  };\n}\nconst xo = (e) => e.join(\",\"), $o = (e) => e.join(\",\");\nfunction ei(e, t, n) {\n  let o, { annotation: i } = t, { geom: s } = t, { style: r } = t;\n  const { points: l } = s;\n  return e.$$set = (a) => {\n    \"annotation\" in a && n(0, i = a.annotation), \"geom\" in a && n(3, s = a.geom), \"style\" in a && n(4, r = a.style);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*annotation, style*/\n    17 && n(1, o = je(i, r));\n  }, [i, o, l, s, r];\n}\nclass ti extends oe {\n  constructor(t) {\n    super(), ne(this, t, ei, Zo, J, { annotation: 0, geom: 3, style: 4 });\n  }\n}\nfunction ni(e) {\n  let t, n, o, i, s;\n  return {\n    c() {\n      t = C(\"g\"), n = C(\"rect\"), i = C(\"rect\"), h(n, \"class\", \"a9s-outer\"), h(n, \"style\", o = /*computedStyle*/\n      e[5] ? \"display:none;\" : void 0), h(\n        n,\n        \"x\",\n        /*x*/\n        e[4]\n      ), h(\n        n,\n        \"y\",\n        /*y*/\n        e[3]\n      ), h(\n        n,\n        \"width\",\n        /*w*/\n        e[2]\n      ), h(\n        n,\n        \"height\",\n        /*h*/\n        e[1]\n      ), h(i, \"class\", \"a9s-inner\"), h(\n        i,\n        \"style\",\n        /*computedStyle*/\n        e[5]\n      ), h(\n        i,\n        \"x\",\n        /*x*/\n        e[4]\n      ), h(\n        i,\n        \"y\",\n        /*y*/\n        e[3]\n      ), h(\n        i,\n        \"width\",\n        /*w*/\n        e[2]\n      ), h(\n        i,\n        \"height\",\n        /*h*/\n        e[1]\n      ), h(t, \"data-id\", s = /*annotation*/\n      e[0].id);\n    },\n    m(r, l) {\n      O(r, t, l), re(t, n), re(t, i);\n    },\n    p(r, [l]) {\n      l & /*computedStyle*/\n      32 && o !== (o = /*computedStyle*/\n      r[5] ? \"display:none;\" : void 0) && h(n, \"style\", o), l & /*x*/\n      16 && h(\n        n,\n        \"x\",\n        /*x*/\n        r[4]\n      ), l & /*y*/\n      8 && h(\n        n,\n        \"y\",\n        /*y*/\n        r[3]\n      ), l & /*w*/\n      4 && h(\n        n,\n        \"width\",\n        /*w*/\n        r[2]\n      ), l & /*h*/\n      2 && h(\n        n,\n        \"height\",\n        /*h*/\n        r[1]\n      ), l & /*computedStyle*/\n      32 && h(\n        i,\n        \"style\",\n        /*computedStyle*/\n        r[5]\n      ), l & /*x*/\n      16 && h(\n        i,\n        \"x\",\n        /*x*/\n        r[4]\n      ), l & /*y*/\n      8 && h(\n        i,\n        \"y\",\n        /*y*/\n        r[3]\n      ), l & /*w*/\n      4 && h(\n        i,\n        \"width\",\n        /*w*/\n        r[2]\n      ), l & /*h*/\n      2 && h(\n        i,\n        \"height\",\n        /*h*/\n        r[1]\n      ), l & /*annotation*/\n      1 && s !== (s = /*annotation*/\n      r[0].id) && h(t, \"data-id\", s);\n    },\n    i: F,\n    o: F,\n    d(r) {\n      r && k(t);\n    }\n  };\n}\nfunction oi(e, t, n) {\n  let o, i, s, r, l, { annotation: a } = t, { geom: c } = t, { style: u } = t;\n  return e.$$set = (f) => {\n    \"annotation\" in f && n(0, a = f.annotation), \"geom\" in f && n(6, c = f.geom), \"style\" in f && n(7, u = f.style);\n  }, e.$$.update = () => {\n    e.$$.dirty & /*annotation, style*/\n    129 && n(5, o = je(a, u)), e.$$.dirty & /*geom*/\n    64 && n(4, { x: i, y: s, w: r, h: l } = c, i, (n(3, s), n(6, c)), (n(2, r), n(6, c)), (n(1, l), n(6, c)));\n  }, [a, l, r, s, i, o, c, u];\n}\nclass ii extends oe {\n  constructor(t) {\n    super(), ne(this, t, oi, ni, J, { annotation: 0, geom: 6, style: 7 });\n  }\n}\nconst Di = {\n  elementToImage: (e, t) => [e, t]\n}, si = (e) => ({\n  elementToImage: (t, n) => {\n    const o = e.getBoundingClientRect(), i = e.createSVGPoint();\n    i.x = t + o.x, i.y = n + o.y;\n    const { x: s, y: r } = i.matrixTransform(e.getScreenCTM().inverse());\n    return [s, r];\n  }\n}), ri = 250, li = (e, t) => {\n  const n = Te();\n  let o;\n  return { onPointerDown: () => o = performance.now(), onPointerUp: (r) => {\n    if (performance.now() - o < ri) {\n      const { x: a, y: c } = ai(r, e), u = t.getAt(a, c);\n      u ? n(\"click\", { originalEvent: r, annotation: u }) : n(\"click\", { originalEvent: r });\n    }\n  } };\n}, ai = (e, t) => {\n  const n = t.createSVGPoint(), o = t.getBoundingClientRect(), i = e.clientX - o.x, s = e.clientY - o.y, { left: r, top: l } = t.getBoundingClientRect();\n  return n.x = i + r, n.y = s + l, n.matrixTransform(t.getScreenCTM().inverse());\n}, { Boolean: en } = fn;\nfunction vt(e, t, n) {\n  const o = e.slice();\n  return o[31] = t[n], o;\n}\nfunction kt(e, t, n) {\n  const o = e.slice();\n  return o[34] = t[n], o;\n}\nfunction $e(e) {\n  const t = e.slice(), n = (\n    /*annotation*/\n    t[34].target.selector\n  );\n  return t[37] = n, t;\n}\nfunction Ot(e) {\n  let t = (\n    /*annotation*/\n    e[34].id\n  ), n, o, i = Bt(e);\n  return {\n    c() {\n      i.c(), n = fe();\n    },\n    m(s, r) {\n      i.m(s, r), O(s, n, r), o = !0;\n    },\n    p(s, r) {\n      r[0] & /*$store*/\n      16384 && J(t, t = /*annotation*/\n      s[34].id) ? (le(), X(i, 1, 1, F), ae(), i = Bt(s), i.c(), I(i, 1), i.m(n.parentNode, n)) : i.p(s, r);\n    },\n    i(s) {\n      o || (I(i), o = !0);\n    },\n    o(s) {\n      X(i), o = !1;\n    },\n    d(s) {\n      s && k(n), i.d(s);\n    }\n  };\n}\nfunction ci(e) {\n  let t, n;\n  return t = new ti({\n    props: {\n      annotation: (\n        /*annotation*/\n        e[34]\n      ),\n      geom: (\n        /*selector*/\n        e[37].geometry\n      ),\n      style: (\n        /*style*/\n        e[1]\n      )\n    }\n  }), {\n    c() {\n      te(t.$$.fragment);\n    },\n    m(o, i) {\n      $(t, o, i), n = !0;\n    },\n    p(o, i) {\n      const s = {};\n      i[0] & /*$store*/\n      16384 && (s.annotation = /*annotation*/\n      o[34]), i[0] & /*$store*/\n      16384 && (s.geom = /*selector*/\n      o[37].geometry), i[0] & /*style*/\n      2 && (s.style = /*style*/\n      o[1]), t.$set(s);\n    },\n    i(o) {\n      n || (I(t.$$.fragment, o), n = !0);\n    },\n    o(o) {\n      X(t.$$.fragment, o), n = !1;\n    },\n    d(o) {\n      ee(t, o);\n    }\n  };\n}\nfunction fi(e) {\n  let t, n;\n  return t = new ii({\n    props: {\n      annotation: (\n        /*annotation*/\n        e[34]\n      ),\n      geom: (\n        /*selector*/\n        e[37].geometry\n      ),\n      style: (\n        /*style*/\n        e[1]\n      )\n    }\n  }), {\n    c() {\n      te(t.$$.fragment);\n    },\n    m(o, i) {\n      $(t, o, i), n = !0;\n    },\n    p(o, i) {\n      const s = {};\n      i[0] & /*$store*/\n      16384 && (s.annotation = /*annotation*/\n      o[34]), i[0] & /*$store*/\n      16384 && (s.geom = /*selector*/\n      o[37].geometry), i[0] & /*style*/\n      2 && (s.style = /*style*/\n      o[1]), t.$set(s);\n    },\n    i(o) {\n      n || (I(t.$$.fragment, o), n = !0);\n    },\n    o(o) {\n      X(t.$$.fragment, o), n = !1;\n    },\n    d(o) {\n      ee(t, o);\n    }\n  };\n}\nfunction ui(e) {\n  let t, n;\n  return t = new Qo({\n    props: {\n      annotation: (\n        /*annotation*/\n        e[34]\n      ),\n      geom: (\n        /*selector*/\n        e[37].geometry\n      ),\n      style: (\n        /*style*/\n        e[1]\n      )\n    }\n  }), {\n    c() {\n      te(t.$$.fragment);\n    },\n    m(o, i) {\n      $(t, o, i), n = !0;\n    },\n    p(o, i) {\n      const s = {};\n      i[0] & /*$store*/\n      16384 && (s.annotation = /*annotation*/\n      o[34]), i[0] & /*$store*/\n      16384 && (s.geom = /*selector*/\n      o[37].geometry), i[0] & /*style*/\n      2 && (s.style = /*style*/\n      o[1]), t.$set(s);\n    },\n    i(o) {\n      n || (I(t.$$.fragment, o), n = !0);\n    },\n    o(o) {\n      X(t.$$.fragment, o), n = !1;\n    },\n    d(o) {\n      ee(t, o);\n    }\n  };\n}\nfunction Bt(e) {\n  let t, n, o, i;\n  const s = [ui, fi, ci], r = [];\n  function l(a, c) {\n    return (\n      /*selector*/\n      a[37].type === q.ELLIPSE ? 0 : (\n        /*selector*/\n        a[37].type === q.RECTANGLE ? 1 : (\n          /*selector*/\n          a[37].type === q.POLYGON ? 2 : -1\n        )\n      )\n    );\n  }\n  return ~(t = l(e)) && (n = r[t] = s[t](e)), {\n    c() {\n      n && n.c(), o = fe();\n    },\n    m(a, c) {\n      ~t && r[t].m(a, c), O(a, o, c), i = !0;\n    },\n    p(a, c) {\n      let u = t;\n      t = l(a), t === u ? ~t && r[t].p(a, c) : (n && (le(), X(r[u], 1, 1, () => {\n        r[u] = null;\n      }), ae()), ~t ? (n = r[t], n ? n.p(a, c) : (n = r[t] = s[t](a), n.c()), I(n, 1), n.m(o.parentNode, o)) : n = null);\n    },\n    i(a) {\n      i || (I(n), i = !0);\n    },\n    o(a) {\n      X(n), i = !1;\n    },\n    d(a) {\n      a && k(o), ~t && r[t].d(a);\n    }\n  };\n}\nfunction It(e) {\n  let t = !/*isEditable*/\n  e[8](\n    /*annotation*/\n    e[34]\n  ), n, o, i = t && Ot($e(e));\n  return {\n    c() {\n      i && i.c(), n = fe();\n    },\n    m(s, r) {\n      i && i.m(s, r), O(s, n, r), o = !0;\n    },\n    p(s, r) {\n      r[0] & /*isEditable, $store*/\n      16640 && (t = !/*isEditable*/\n      s[8](\n        /*annotation*/\n        s[34]\n      )), t ? i ? (i.p($e(s), r), r[0] & /*isEditable, $store*/\n      16640 && I(i, 1)) : (i = Ot($e(s)), i.c(), I(i, 1), i.m(n.parentNode, n)) : i && (le(), X(i, 1, 1, () => {\n        i = null;\n      }), ae());\n    },\n    i(s) {\n      o || (I(i), o = !0);\n    },\n    o(s) {\n      X(i), o = !1;\n    },\n    d(s) {\n      s && k(n), i && i.d(s);\n    }\n  };\n}\nfunction Pt(e) {\n  let t, n, o, i;\n  const s = [hi, di], r = [];\n  function l(a, c) {\n    return (\n      /*editableAnnotations*/\n      a[7] ? 0 : (\n        /*tool*/\n        a[13] && /*drawingEnabled*/\n        a[0] ? 1 : -1\n      )\n    );\n  }\n  return ~(t = l(e)) && (n = r[t] = s[t](e)), {\n    c() {\n      n && n.c(), o = fe();\n    },\n    m(a, c) {\n      ~t && r[t].m(a, c), O(a, o, c), i = !0;\n    },\n    p(a, c) {\n      let u = t;\n      t = l(a), t === u ? ~t && r[t].p(a, c) : (n && (le(), X(r[u], 1, 1, () => {\n        r[u] = null;\n      }), ae()), ~t ? (n = r[t], n ? n.p(a, c) : (n = r[t] = s[t](a), n.c()), I(n, 1), n.m(o.parentNode, o)) : n = null);\n    },\n    i(a) {\n      i || (I(n), i = !0);\n    },\n    o(a) {\n      X(n), i = !1;\n    },\n    d(a) {\n      a && k(o), ~t && r[t].d(a);\n    }\n  };\n}\nfunction di(e) {\n  let t = (\n    /*toolName*/\n    e[2]\n  ), n, o, i = Yt(e);\n  return {\n    c() {\n      i.c(), n = fe();\n    },\n    m(s, r) {\n      i.m(s, r), O(s, n, r), o = !0;\n    },\n    p(s, r) {\n      r[0] & /*toolName*/\n      4 && J(t, t = /*toolName*/\n      s[2]) ? (le(), X(i, 1, 1, F), ae(), i = Yt(s), i.c(), I(i, 1), i.m(n.parentNode, n)) : i.p(s, r);\n    },\n    i(s) {\n      o || (I(i), o = !0);\n    },\n    o(s) {\n      X(i), o = !1;\n    },\n    d(s) {\n      s && k(n), i.d(s);\n    }\n  };\n}\nfunction hi(e) {\n  let t, n, o = Se(\n    /*editableAnnotations*/\n    e[7]\n  ), i = [];\n  for (let r = 0; r < o.length; r += 1)\n    i[r] = Xt(vt(e, o, r));\n  const s = (r) => X(i[r], 1, 1, () => {\n    i[r] = null;\n  });\n  return {\n    c() {\n      for (let r = 0; r < i.length; r += 1)\n        i[r].c();\n      t = fe();\n    },\n    m(r, l) {\n      for (let a = 0; a < i.length; a += 1)\n        i[a] && i[a].m(r, l);\n      O(r, t, l), n = !0;\n    },\n    p(r, l) {\n      if (l[0] & /*editableAnnotations, drawingEl, getEditor, style, transform, $scale, onChangeSelected*/\n      1607842) {\n        o = Se(\n          /*editableAnnotations*/\n          r[7]\n        );\n        let a;\n        for (a = 0; a < o.length; a += 1) {\n          const c = vt(r, o, a);\n          i[a] ? (i[a].p(c, l), I(i[a], 1)) : (i[a] = Xt(c), i[a].c(), I(i[a], 1), i[a].m(t.parentNode, t));\n        }\n        for (le(), a = o.length; a < i.length; a += 1)\n          s(a);\n        ae();\n      }\n    },\n    i(r) {\n      if (!n) {\n        for (let l = 0; l < o.length; l += 1)\n          I(i[l]);\n        n = !0;\n      }\n    },\n    o(r) {\n      i = i.filter(en);\n      for (let l = 0; l < i.length; l += 1)\n        X(i[l]);\n      n = !1;\n    },\n    d(r) {\n      r && k(t), rt(i, r);\n    }\n  };\n}\nfunction Yt(e) {\n  let t, n;\n  return t = new No({\n    props: {\n      target: (\n        /*drawingEl*/\n        e[5]\n      ),\n      tool: (\n        /*tool*/\n        e[13]\n      ),\n      drawingMode: (\n        /*drawingMode*/\n        e[12]\n      ),\n      transform: (\n        /*transform*/\n        e[11]\n      ),\n      viewportScale: (\n        /*$scale*/\n        e[15]\n      )\n    }\n  }), t.$on(\n    \"create\",\n    /*onSelectionCreated*/\n    e[18]\n  ), {\n    c() {\n      te(t.$$.fragment);\n    },\n    m(o, i) {\n      $(t, o, i), n = !0;\n    },\n    p(o, i) {\n      const s = {};\n      i[0] & /*drawingEl*/\n      32 && (s.target = /*drawingEl*/\n      o[5]), i[0] & /*tool*/\n      8192 && (s.tool = /*tool*/\n      o[13]), i[0] & /*drawingMode*/\n      4096 && (s.drawingMode = /*drawingMode*/\n      o[12]), i[0] & /*transform*/\n      2048 && (s.transform = /*transform*/\n      o[11]), i[0] & /*$scale*/\n      32768 && (s.viewportScale = /*$scale*/\n      o[15]), t.$set(s);\n    },\n    i(o) {\n      n || (I(t.$$.fragment, o), n = !0);\n    },\n    o(o) {\n      X(t.$$.fragment, o), n = !1;\n    },\n    d(o) {\n      ee(t, o);\n    }\n  };\n}\nfunction Dt(e) {\n  let t, n;\n  return t = new Co({\n    props: {\n      target: (\n        /*drawingEl*/\n        e[5]\n      ),\n      editor: (\n        /*getEditor*/\n        e[20](\n          /*editable*/\n          e[31].target.selector\n        )\n      ),\n      annotation: (\n        /*editable*/\n        e[31]\n      ),\n      style: (\n        /*style*/\n        e[1]\n      ),\n      transform: (\n        /*transform*/\n        e[11]\n      ),\n      viewportScale: (\n        /*$scale*/\n        e[15]\n      )\n    }\n  }), t.$on(\"change\", function() {\n    K(\n      /*onChangeSelected*/\n      e[19](\n        /*editable*/\n        e[31]\n      )\n    ) && e[19](\n      /*editable*/\n      e[31]\n    ).apply(this, arguments);\n  }), {\n    c() {\n      te(t.$$.fragment);\n    },\n    m(o, i) {\n      $(t, o, i), n = !0;\n    },\n    p(o, i) {\n      e = o;\n      const s = {};\n      i[0] & /*drawingEl*/\n      32 && (s.target = /*drawingEl*/\n      e[5]), i[0] & /*editableAnnotations*/\n      128 && (s.editor = /*getEditor*/\n      e[20](\n        /*editable*/\n        e[31].target.selector\n      )), i[0] & /*editableAnnotations*/\n      128 && (s.annotation = /*editable*/\n      e[31]), i[0] & /*style*/\n      2 && (s.style = /*style*/\n      e[1]), i[0] & /*transform*/\n      2048 && (s.transform = /*transform*/\n      e[11]), i[0] & /*$scale*/\n      32768 && (s.viewportScale = /*$scale*/\n      e[15]), t.$set(s);\n    },\n    i(o) {\n      n || (I(t.$$.fragment, o), n = !0);\n    },\n    o(o) {\n      X(t.$$.fragment, o), n = !1;\n    },\n    d(o) {\n      ee(t, o);\n    }\n  };\n}\nfunction Xt(e) {\n  let t = (\n    /*editable*/\n    e[31].id\n  ), n, o, i = Dt(e);\n  return {\n    c() {\n      i.c(), n = fe();\n    },\n    m(s, r) {\n      i.m(s, r), O(s, n, r), o = !0;\n    },\n    p(s, r) {\n      r[0] & /*editableAnnotations*/\n      128 && J(t, t = /*editable*/\n      s[31].id) ? (le(), X(i, 1, 1, F), ae(), i = Dt(s), i.c(), I(i, 1), i.m(n.parentNode, n)) : i.p(s, r);\n    },\n    i(s) {\n      o || (I(i), o = !0);\n    },\n    o(s) {\n      X(i), o = !1;\n    },\n    d(s) {\n      s && k(n), i.d(s);\n    }\n  };\n}\nfunction gi(e) {\n  let t, n, o, i, s, r, l = Se(\n    /*$store*/\n    e[14]\n  ), a = [];\n  for (let f = 0; f < l.length; f += 1)\n    a[f] = It(kt(e, l, f));\n  const c = (f) => X(a[f], 1, 1, () => {\n    a[f] = null;\n  });\n  let u = (\n    /*drawingEl*/\n    e[5] && Pt(e)\n  );\n  return {\n    c() {\n      t = C(\"svg\"), n = C(\"g\");\n      for (let f = 0; f < a.length; f += 1)\n        a[f].c();\n      o = C(\"g\"), u && u.c(), h(o, \"class\", \"drawing\"), h(t, \"class\", \"a9s-annotationlayer\"), Ee(\n        t,\n        \"drawing\",\n        /*tool*/\n        e[13]\n      ), Ee(t, \"hidden\", !/*visible*/\n      e[3]);\n    },\n    m(f, d) {\n      O(f, t, d), re(t, n);\n      for (let g = 0; g < a.length; g += 1)\n        a[g] && a[g].m(n, null);\n      re(t, o), u && u.m(o, null), e[27](o), e[28](t), i = !0, s || (r = [\n        j(t, \"pointerup\", function() {\n          K(\n            /*onPointerUp*/\n            e[9]\n          ) && e[9].apply(this, arguments);\n        }),\n        j(t, \"pointerdown\", function() {\n          K(\n            /*onPointerDown*/\n            e[10]\n          ) && e[10].apply(this, arguments);\n        })\n      ], s = !0);\n    },\n    p(f, d) {\n      if (e = f, d[0] & /*$store, style, isEditable*/\n      16642) {\n        l = Se(\n          /*$store*/\n          e[14]\n        );\n        let g;\n        for (g = 0; g < l.length; g += 1) {\n          const m = kt(e, l, g);\n          a[g] ? (a[g].p(m, d), I(a[g], 1)) : (a[g] = It(m), a[g].c(), I(a[g], 1), a[g].m(n, null));\n        }\n        for (le(), g = l.length; g < a.length; g += 1)\n          c(g);\n        ae();\n      }\n      /*drawingEl*/\n      e[5] ? u ? (u.p(e, d), d[0] & /*drawingEl*/\n      32 && I(u, 1)) : (u = Pt(e), u.c(), I(u, 1), u.m(o, null)) : u && (le(), X(u, 1, 1, () => {\n        u = null;\n      }), ae()), (!i || d[0] & /*tool*/\n      8192) && Ee(\n        t,\n        \"drawing\",\n        /*tool*/\n        e[13]\n      ), (!i || d[0] & /*visible*/\n      8) && Ee(t, \"hidden\", !/*visible*/\n      e[3]);\n    },\n    i(f) {\n      if (!i) {\n        for (let d = 0; d < l.length; d += 1)\n          I(a[d]);\n        I(u), i = !0;\n      }\n    },\n    o(f) {\n      a = a.filter(en);\n      for (let d = 0; d < a.length; d += 1)\n        X(a[d]);\n      X(u), i = !1;\n    },\n    d(f) {\n      f && k(t), rt(a, f), u && u.d(), e[27](null), e[28](null), s = !1, ce(r);\n    }\n  };\n}\nfunction mi(e, t, n) {\n  let o, i, s, r, l, a, c, u, f, d, g = F, m = () => (g(), g = Vt(Y, (v) => n(15, d = v)), Y);\n  e.$$.on_destroy.push(() => g());\n  let { drawingEnabled: y } = t, { image: b } = t, { preferredDrawingMode: p } = t, { state: A } = t, { style: _ = void 0 } = t, { toolName: E = xt()[0] } = t, { user: B } = t, { visible: V = !0 } = t, U, R, Y;\n  Ye(() => m(n(6, Y = bo(b, R))));\n  const { selection: w, store: S } = A;\n  ht(e, w, (v) => n(26, u = v)), ht(e, S, (v) => n(14, f = v));\n  let T, M;\n  const P = (v) => {\n    T && S.unobserve(T);\n    const Q = v.filter(({ editable: z }) => z).map(({ id: z }) => z);\n    Q.length > 0 ? (n(7, M = Q.map((z) => S.getAnnotation(z)).filter(Boolean)), T = (z) => {\n      const { updated: ue } = z.changes;\n      n(7, M = ue == null ? void 0 : ue.map((Z) => Z.newValue));\n    }, S.observe(T, { annotations: Q })) : n(7, M = void 0);\n  }, G = (v) => {\n    const Q = qt(), z = {\n      id: Q,\n      bodies: [],\n      target: {\n        annotation: Q,\n        selector: v.detail,\n        creator: B,\n        created: /* @__PURE__ */ new Date()\n      }\n    };\n    S.addAnnotation(z), w.setSelected(z.id);\n  }, x = (v) => (Q) => {\n    var N;\n    const { target: z } = v, ue = 10 * 60 * 1e3, Z = ((N = z.creator) == null ? void 0 : N.id) !== B.id || !z.created || (/* @__PURE__ */ new Date()).getTime() - z.created.getTime() > ue;\n    S.updateTarget({\n      ...z,\n      selector: Q.detail,\n      created: Z ? z.created : /* @__PURE__ */ new Date(),\n      updated: Z ? /* @__PURE__ */ new Date() : void 0,\n      updatedBy: Z ? B : void 0\n    });\n  }, Me = (v) => Bo(v);\n  function se(v) {\n    He[v ? \"unshift\" : \"push\"](() => {\n      U = v, n(5, U);\n    });\n  }\n  function Le(v) {\n    He[v ? \"unshift\" : \"push\"](() => {\n      R = v, n(4, R);\n    });\n  }\n  return e.$$set = (v) => {\n    \"drawingEnabled\" in v && n(0, y = v.drawingEnabled), \"image\" in v && n(21, b = v.image), \"preferredDrawingMode\" in v && n(22, p = v.preferredDrawingMode), \"state\" in v && n(23, A = v.state), \"style\" in v && n(1, _ = v.style), \"toolName\" in v && n(2, E = v.toolName), \"user\" in v && n(24, B = v.user), \"visible\" in v && n(3, V = v.visible);\n  }, e.$$.update = () => {\n    e.$$.dirty[0] & /*toolName*/\n    4 && n(13, { tool: o, opts: i } = $t(E) || { tool: void 0, opts: void 0 }, o, (n(25, i), n(2, E))), e.$$.dirty[0] & /*opts, preferredDrawingMode*/\n    37748736 && n(12, s = (i == null ? void 0 : i.drawingMode) || p), e.$$.dirty[0] & /*svgEl*/\n    16 && n(11, r = si(R)), e.$$.dirty[0] & /*svgEl*/\n    16 && n(10, { onPointerDown: l, onPointerUp: a } = li(R, S), l, (n(9, a), n(4, R))), e.$$.dirty[0] & /*$selection*/\n    67108864 && n(8, c = (v) => u.selected.find((Q) => Q.id === v.id && Q.editable)), e.$$.dirty[0] & /*$selection*/\n    67108864 && P(u.selected);\n  }, [\n    y,\n    _,\n    E,\n    V,\n    R,\n    U,\n    Y,\n    M,\n    c,\n    a,\n    l,\n    r,\n    s,\n    o,\n    f,\n    d,\n    w,\n    S,\n    G,\n    x,\n    Me,\n    b,\n    p,\n    A,\n    B,\n    i,\n    u,\n    se,\n    Le\n  ];\n}\nclass pi extends oe {\n  constructor(t) {\n    super(), ne(\n      this,\n      t,\n      mi,\n      gi,\n      J,\n      {\n        drawingEnabled: 0,\n        image: 21,\n        preferredDrawingMode: 22,\n        state: 23,\n        style: 1,\n        toolName: 2,\n        user: 24,\n        visible: 3\n      },\n      null,\n      [-1, -1]\n    );\n  }\n}\nfunction yi(e, t, n, o, i) {\n  tn(e, t, n || 0, o || e.length - 1, i || _i);\n}\nfunction tn(e, t, n, o, i) {\n  for (; o > n; ) {\n    if (o - n > 600) {\n      var s = o - n + 1, r = t - n + 1, l = Math.log(s), a = 0.5 * Math.exp(2 * l / 3), c = 0.5 * Math.sqrt(l * a * (s - a) / s) * (r - s / 2 < 0 ? -1 : 1), u = Math.max(n, Math.floor(t - r * a / s + c)), f = Math.min(o, Math.floor(t + (s - r) * a / s + c));\n      tn(e, t, u, f, i);\n    }\n    var d = e[t], g = n, m = o;\n    for (ve(e, n, t), i(e[o], d) > 0 && ve(e, n, o); g < m; ) {\n      for (ve(e, g, m), g++, m--; i(e[g], d) < 0; )\n        g++;\n      for (; i(e[m], d) > 0; )\n        m--;\n    }\n    i(e[n], d) === 0 ? ve(e, n, m) : (m++, ve(e, m, o)), m <= t && (n = m + 1), t <= m && (o = m - 1);\n  }\n}\nfunction ve(e, t, n) {\n  var o = e[t];\n  e[t] = e[n], e[n] = o;\n}\nfunction _i(e, t) {\n  return e < t ? -1 : e > t ? 1 : 0;\n}\nclass wi {\n  constructor(t = 9) {\n    this._maxEntries = Math.max(4, t), this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4)), this.clear();\n  }\n  all() {\n    return this._all(this.data, []);\n  }\n  search(t) {\n    let n = this.data;\n    const o = [];\n    if (!Ve(t, n))\n      return o;\n    const i = this.toBBox, s = [];\n    for (; n; ) {\n      for (let r = 0; r < n.children.length; r++) {\n        const l = n.children[r], a = n.leaf ? i(l) : l;\n        Ve(t, a) && (n.leaf ? o.push(l) : tt(t, a) ? this._all(l, o) : s.push(l));\n      }\n      n = s.pop();\n    }\n    return o;\n  }\n  collides(t) {\n    let n = this.data;\n    if (!Ve(t, n))\n      return !1;\n    const o = [];\n    for (; n; ) {\n      for (let i = 0; i < n.children.length; i++) {\n        const s = n.children[i], r = n.leaf ? this.toBBox(s) : s;\n        if (Ve(t, r)) {\n          if (n.leaf || tt(t, r))\n            return !0;\n          o.push(s);\n        }\n      }\n      n = o.pop();\n    }\n    return !1;\n  }\n  load(t) {\n    if (!(t && t.length))\n      return this;\n    if (t.length < this._minEntries) {\n      for (let o = 0; o < t.length; o++)\n        this.insert(t[o]);\n      return this;\n    }\n    let n = this._build(t.slice(), 0, t.length - 1, 0);\n    if (!this.data.children.length)\n      this.data = n;\n    else if (this.data.height === n.height)\n      this._splitRoot(this.data, n);\n    else {\n      if (this.data.height < n.height) {\n        const o = this.data;\n        this.data = n, n = o;\n      }\n      this._insert(n, this.data.height - n.height - 1, !0);\n    }\n    return this;\n  }\n  insert(t) {\n    return t && this._insert(t, this.data.height - 1), this;\n  }\n  clear() {\n    return this.data = be([]), this;\n  }\n  remove(t, n) {\n    if (!t)\n      return this;\n    let o = this.data;\n    const i = this.toBBox(t), s = [], r = [];\n    let l, a, c;\n    for (; o || s.length; ) {\n      if (o || (o = s.pop(), a = s[s.length - 1], l = r.pop(), c = !0), o.leaf) {\n        const u = bi(t, o.children, n);\n        if (u !== -1)\n          return o.children.splice(u, 1), s.push(o), this._condense(s), this;\n      }\n      !c && !o.leaf && tt(o, i) ? (s.push(o), r.push(l), l = 0, a = o, o = o.children[0]) : a ? (l++, o = a.children[l], c = !1) : o = null;\n    }\n    return this;\n  }\n  toBBox(t) {\n    return t;\n  }\n  compareMinX(t, n) {\n    return t.minX - n.minX;\n  }\n  compareMinY(t, n) {\n    return t.minY - n.minY;\n  }\n  toJSON() {\n    return this.data;\n  }\n  fromJSON(t) {\n    return this.data = t, this;\n  }\n  _all(t, n) {\n    const o = [];\n    for (; t; )\n      t.leaf ? n.push(...t.children) : o.push(...t.children), t = o.pop();\n    return n;\n  }\n  _build(t, n, o, i) {\n    const s = o - n + 1;\n    let r = this._maxEntries, l;\n    if (s <= r)\n      return l = be(t.slice(n, o + 1)), _e(l, this.toBBox), l;\n    i || (i = Math.ceil(Math.log(s) / Math.log(r)), r = Math.ceil(s / Math.pow(r, i - 1))), l = be([]), l.leaf = !1, l.height = i;\n    const a = Math.ceil(s / r), c = a * Math.ceil(Math.sqrt(r));\n    Ct(t, n, o, c, this.compareMinX);\n    for (let u = n; u <= o; u += c) {\n      const f = Math.min(u + c - 1, o);\n      Ct(t, u, f, a, this.compareMinY);\n      for (let d = u; d <= f; d += a) {\n        const g = Math.min(d + a - 1, f);\n        l.children.push(this._build(t, d, g, i - 1));\n      }\n    }\n    return _e(l, this.toBBox), l;\n  }\n  _chooseSubtree(t, n, o, i) {\n    for (; i.push(n), !(n.leaf || i.length - 1 === o); ) {\n      let s = 1 / 0, r = 1 / 0, l;\n      for (let a = 0; a < n.children.length; a++) {\n        const c = n.children[a], u = et(c), f = Si(t, c) - u;\n        f < r ? (r = f, s = u < s ? u : s, l = c) : f === r && u < s && (s = u, l = c);\n      }\n      n = l || n.children[0];\n    }\n    return n;\n  }\n  _insert(t, n, o) {\n    const i = o ? t : this.toBBox(t), s = [], r = this._chooseSubtree(i, this.data, n, s);\n    for (r.children.push(t), Be(r, i); n >= 0 && s[n].children.length > this._maxEntries; )\n      this._split(s, n), n--;\n    this._adjustParentBBoxes(i, s, n);\n  }\n  // split overflowed node into two\n  _split(t, n) {\n    const o = t[n], i = o.children.length, s = this._minEntries;\n    this._chooseSplitAxis(o, s, i);\n    const r = this._chooseSplitIndex(o, s, i), l = be(o.children.splice(r, o.children.length - r));\n    l.height = o.height, l.leaf = o.leaf, _e(o, this.toBBox), _e(l, this.toBBox), n ? t[n - 1].children.push(l) : this._splitRoot(o, l);\n  }\n  _splitRoot(t, n) {\n    this.data = be([t, n]), this.data.height = t.height + 1, this.data.leaf = !1, _e(this.data, this.toBBox);\n  }\n  _chooseSplitIndex(t, n, o) {\n    let i, s = 1 / 0, r = 1 / 0;\n    for (let l = n; l <= o - n; l++) {\n      const a = Oe(t, 0, l, this.toBBox), c = Oe(t, l, o, this.toBBox), u = Ti(a, c), f = et(a) + et(c);\n      u < s ? (s = u, i = l, r = f < r ? f : r) : u === s && f < r && (r = f, i = l);\n    }\n    return i || o - n;\n  }\n  // sorts node children by the best axis for split\n  _chooseSplitAxis(t, n, o) {\n    const i = t.leaf ? this.compareMinX : Ei, s = t.leaf ? this.compareMinY : Ai, r = this._allDistMargin(t, n, o, i), l = this._allDistMargin(t, n, o, s);\n    r < l && t.children.sort(i);\n  }\n  // total margin of all possible split distributions where each node is at least m full\n  _allDistMargin(t, n, o, i) {\n    t.children.sort(i);\n    const s = this.toBBox, r = Oe(t, 0, n, s), l = Oe(t, o - n, o, s);\n    let a = Ue(r) + Ue(l);\n    for (let c = n; c < o - n; c++) {\n      const u = t.children[c];\n      Be(r, t.leaf ? s(u) : u), a += Ue(r);\n    }\n    for (let c = o - n - 1; c >= n; c--) {\n      const u = t.children[c];\n      Be(l, t.leaf ? s(u) : u), a += Ue(l);\n    }\n    return a;\n  }\n  _adjustParentBBoxes(t, n, o) {\n    for (let i = o; i >= 0; i--)\n      Be(n[i], t);\n  }\n  _condense(t) {\n    for (let n = t.length - 1, o; n >= 0; n--)\n      t[n].children.length === 0 ? n > 0 ? (o = t[n - 1].children, o.splice(o.indexOf(t[n]), 1)) : this.clear() : _e(t[n], this.toBBox);\n  }\n}\nfunction bi(e, t, n) {\n  if (!n)\n    return t.indexOf(e);\n  for (let o = 0; o < t.length; o++)\n    if (n(e, t[o]))\n      return o;\n  return -1;\n}\nfunction _e(e, t) {\n  Oe(e, 0, e.children.length, t, e);\n}\nfunction Oe(e, t, n, o, i) {\n  i || (i = be(null)), i.minX = 1 / 0, i.minY = 1 / 0, i.maxX = -1 / 0, i.maxY = -1 / 0;\n  for (let s = t; s < n; s++) {\n    const r = e.children[s];\n    Be(i, e.leaf ? o(r) : r);\n  }\n  return i;\n}\nfunction Be(e, t) {\n  return e.minX = Math.min(e.minX, t.minX), e.minY = Math.min(e.minY, t.minY), e.maxX = Math.max(e.maxX, t.maxX), e.maxY = Math.max(e.maxY, t.maxY), e;\n}\nfunction Ei(e, t) {\n  return e.minX - t.minX;\n}\nfunction Ai(e, t) {\n  return e.minY - t.minY;\n}\nfunction et(e) {\n  return (e.maxX - e.minX) * (e.maxY - e.minY);\n}\nfunction Ue(e) {\n  return e.maxX - e.minX + (e.maxY - e.minY);\n}\nfunction Si(e, t) {\n  return (Math.max(t.maxX, e.maxX) - Math.min(t.minX, e.minX)) * (Math.max(t.maxY, e.maxY) - Math.min(t.minY, e.minY));\n}\nfunction Ti(e, t) {\n  const n = Math.max(e.minX, t.minX), o = Math.max(e.minY, t.minY), i = Math.min(e.maxX, t.maxX), s = Math.min(e.maxY, t.maxY);\n  return Math.max(0, i - n) * Math.max(0, s - o);\n}\nfunction tt(e, t) {\n  return e.minX <= t.minX && e.minY <= t.minY && t.maxX <= e.maxX && t.maxY <= e.maxY;\n}\nfunction Ve(e, t) {\n  return t.minX <= e.maxX && t.minY <= e.maxY && t.maxX >= e.minX && t.maxY >= e.minY;\n}\nfunction be(e) {\n  return {\n    children: e,\n    height: 1,\n    leaf: !0,\n    minX: 1 / 0,\n    minY: 1 / 0,\n    maxX: -1 / 0,\n    maxY: -1 / 0\n  };\n}\nfunction Ct(e, t, n, o, i) {\n  const s = [t, n];\n  for (; s.length; ) {\n    if (n = s.pop(), t = s.pop(), n - t <= o)\n      continue;\n    const r = t + Math.ceil((n - t) / o / 2) * o;\n    yi(e, r, t, n, i), s.push(t, r, r, n);\n  }\n}\nconst Mi = () => {\n  const e = new wi(), t = /* @__PURE__ */ new Map(), n = () => [...t.values()], o = () => {\n    e.clear(), t.clear();\n  }, i = (f) => {\n    const { minX: d, minY: g, maxX: m, maxY: y } = f.selector.geometry.bounds, b = { minX: d, minY: g, maxX: m, maxY: y, target: f };\n    e.insert(b), t.set(f.annotation, b);\n  }, s = (f) => {\n    const d = t.get(f.annotation);\n    d && e.remove(d), t.delete(f.annotation);\n  };\n  return {\n    all: n,\n    clear: o,\n    getAt: (f, d) => {\n      const m = e.search({\n        minX: f,\n        minY: d,\n        maxX: f,\n        maxY: d\n      }).map((y) => y.target).filter((y) => y.selector.type === q.RECTANGLE || wn(y.selector, f, d));\n      if (m.length > 0)\n        return m.sort((y, b) => st(y.selector) - st(b.selector)), m[0];\n    },\n    getIntersecting: (f, d, g, m) => e.search({\n      minX: f,\n      minY: d,\n      maxX: f + g,\n      maxY: d + m\n    }).map((y) => y.target),\n    insert: i,\n    remove: s,\n    set: (f, d = !0) => {\n      d && o();\n      const g = f.map((m) => {\n        const { minX: y, minY: b, maxX: p, maxY: A } = m.selector.geometry.bounds;\n        return { minX: y, minY: b, maxX: p, maxY: A, target: m };\n      });\n      g.forEach((m) => t.set(m.target.annotation, m)), e.load(g);\n    },\n    size: () => e.all().length,\n    update: (f, d) => {\n      s(f), i(d);\n    }\n  };\n}, Li = (e) => {\n  const t = Kn(), n = Mi(), o = Rn(t, e.pointerSelectAction), i = Cn(t), s = xn();\n  return t.observe(({ changes: a }) => {\n    n.set((a.created || []).map((c) => c.target), !1), (a.deleted || []).forEach((c) => n.remove(c.target)), (a.updated || []).forEach(({ oldValue: c, newValue: u }) => n.update(c.target, u.target));\n  }), {\n    store: {\n      ...t,\n      getAt: (a, c) => {\n        const u = n.getAt(a, c);\n        return u ? t.getAnnotation(u.annotation) : void 0;\n      },\n      getIntersecting: (a, c, u, f) => n.getIntersecting(a, c, u, f).map((d) => t.getAnnotation(d.annotation))\n    },\n    selection: o,\n    hover: i,\n    viewport: s\n  };\n}, vi = (e) => {\n  const t = Li(e);\n  return {\n    ...t,\n    store: Wn(t.store)\n  };\n}, ki = (e) => {\n  let t, n;\n  if (e.nodeName === \"CANVAS\")\n    t = e, n = t.getContext(\"2d\", { willReadFrequently: !0 });\n  else {\n    const i = e;\n    t = document.createElement(\"canvas\"), t.width = i.width, t.height = i.height, n = t.getContext(\"2d\", { willReadFrequently: !0 }), n.drawImage(i, 0, 0, i.width, i.height);\n  }\n  let o = 0;\n  for (let i = 1; i < 10; i++)\n    for (let s = 1; s < 10; s++) {\n      const r = Math.round(s * t.width / 10), l = Math.round(i * t.height / 10), a = n.getImageData(r, l, 1, 1).data, c = (0.299 * a[0] + 0.587 * a[1] + 0.114 * a[2]) / 255;\n      o += c;\n    }\n  return o / 81;\n}, Oi = (e) => {\n  const t = ki(e), n = t > 0.6 ? \"dark\" : \"light\";\n  return console.log(`[Annotorious] Image brightness: ${t.toFixed(1)}. Setting ${n} theme.`), n;\n}, Rt = (e, t, n) => t.setAttribute(\"data-theme\", n === \"auto\" ? Oi(e) : n), Bi = (e, t) => ({\n  ...e,\n  drawingEnabled: e.drawingEnabled === void 0 ? t.drawingEnabled : e.drawingEnabled,\n  drawingMode: e.drawingMode || t.drawingMode,\n  pointerSelectAction: e.pointerSelectAction || t.pointerSelectAction,\n  theme: e.theme || t.theme\n}), Nt = navigator.userAgent.indexOf(\"Mac OS X\") !== -1, Ii = (e, t) => {\n  const n = t || document, o = (r) => {\n    const l = r;\n    l.key === \"z\" && l.ctrlKey ? e.undo() : l.key === \"y\" && l.ctrlKey && e.redo();\n  }, i = (r) => {\n    const l = r;\n    l.key === \"z\" && l.metaKey && (l.shiftKey ? e.redo() : e.undo());\n  }, s = () => {\n    Nt ? n.removeEventListener(\"keydown\", i) : n.removeEventListener(\"keydown\", o);\n  };\n  return Nt ? n.addEventListener(\"keydown\", i) : n.addEventListener(\"keydown\", o), {\n    destroy: s\n  };\n}, Xi = (e, t = {}) => {\n  if (!e)\n    throw \"Missing argument: image\";\n  const n = typeof e == \"string\" ? document.getElementById(e) : e, o = Bi(t, {\n    drawingEnabled: !0,\n    drawingMode: \"drag\",\n    pointerSelectAction: Kt.EDIT,\n    theme: \"light\"\n  }), i = vi(o), { selection: s, store: r } = i, l = Zn(r), a = $n(\n    i,\n    l,\n    o.adapter,\n    o.autoSave\n  ), c = document.createElement(\"DIV\");\n  c.style.position = \"relative\", c.style.display = \"inline-block\", n.style.display = \"block\", n.parentNode.insertBefore(c, n), c.appendChild(n);\n  const u = Ii(l);\n  let f = lo();\n  Rt(n, c, o.theme);\n  const d = new pi({\n    target: c,\n    props: {\n      drawingEnabled: !!o.drawingEnabled,\n      image: n,\n      preferredDrawingMode: o.drawingMode,\n      state: i,\n      style: o.style,\n      user: f\n    }\n  });\n  d.$on(\"click\", (Y) => {\n    const { originalEvent: w, annotation: S } = Y.detail;\n    S ? s.clickSelect(S.id, w) : s.isEmpty() || s.clear();\n  });\n  const g = to(i, l, o.adapter), m = () => {\n    d.$destroy(), c.parentNode.insertBefore(n, c), c.parentNode.removeChild(c), u.destroy(), l.destroy();\n  }, y = () => f, b = (Y, w, S) => Ko(Y, w, S), p = (Y, w) => Io(Y, w), A = (Y) => {\n    if (!$t(Y))\n      throw `No drawing tool named ${Y}`;\n    d.$set({ toolName: Y });\n  }, _ = (Y) => d.$set({ drawingEnabled: Y }), E = (Y) => {\n    console.warn(\"Filter not implemented yet\");\n  }, B = (Y) => d.$set({ style: Y }), V = (Y) => Rt(n, c, Y), U = (Y) => {\n    f = Y, d.$set({ user: Y });\n  }, R = (Y) => (\n    // @ts-ignore\n    d.$set({ visible: Y })\n  );\n  return {\n    ...g,\n    destroy: m,\n    getUser: y,\n    listDrawingTools: xt,\n    on: a.on,\n    off: a.off,\n    registerDrawingTool: b,\n    registerShapeEditor: p,\n    setDrawingEnabled: _,\n    setDrawingTool: A,\n    setFilter: E,\n    setStyle: B,\n    setTheme: V,\n    setUser: U,\n    setVisible: R,\n    state: i\n  };\n};\nexport {\n  Zt as Editor,\n  Co as EditorMount,\n  ke as Handle,\n  Di as IdentityTransform,\n  yo as PolygonEditor,\n  Oo as RectangleEditor,\n  An as RectangleUtil,\n  Go as RubberbandRectangle,\n  pi as SVGAnnotationLayer,\n  q as ShapeType,\n  No as ToolMount,\n  Yi as W3CImageFormat,\n  li as addEventListeners,\n  Fe as boundsFromPoints,\n  st as computeArea,\n  Xi as createImageAnnotator,\n  Li as createImageAnnotatorState,\n  si as createSVGTransform,\n  vi as createSvelteImageAnnotatorState,\n  Oi as detectTheme,\n  Ze as distance,\n  bo as enableResponsive,\n  Bi as fillDefaults,\n  Bo as getEditor,\n  $t as getTool,\n  Ii as initKeyboardCommands,\n  wn as intersects,\n  Eo as isTouch,\n  xt as listDrawingTools,\n  Sn as parseFragmentSelector,\n  On as parseSVGSelector,\n  uo as parseW3CImageAnnotation,\n  Io as registerEditor,\n  at as registerShapeUtil,\n  Ko as registerTool,\n  ki as sampleBrightness,\n  Tn as serializeFragmentSelector,\n  Bn as serializeSVGSelector,\n  ho as serializeW3CImageAnnotation,\n  Rt as setTheme\n};\n//# sourceMappingURL=annotorious.es.js.map\n","/** @returns {void} */\nexport function noop() {}\n\nexport const identity = (x) => x;\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nexport function assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n/**\n * @param {any} value\n * @returns {value is PromiseLike<any>}\n */\nexport function is_promise(value) {\n\treturn (\n\t\t!!value &&\n\t\t(typeof value === 'object' || typeof value === 'function') &&\n\t\ttypeof (/** @type {any} */ (value).then) === 'function'\n\t);\n}\n\n/** @returns {void} */\nexport function add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nexport function run(fn) {\n\treturn fn();\n}\n\nexport function blank_object() {\n\treturn Object.create(null);\n}\n\n/**\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function run_all(fns) {\n\tfns.forEach(run);\n}\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\n/** @returns {boolean} */\nexport function safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\n}\n\nlet src_url_equal_anchor;\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nexport function src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\tif (!src_url_equal_anchor) {\n\t\tsrc_url_equal_anchor = document.createElement('a');\n\t}\n\t// This is actually faster than doing URL(..).href\n\tsrc_url_equal_anchor.href = url;\n\treturn element_src === src_url_equal_anchor.href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element_srcset\n * @param {string | undefined | null} srcset\n * @returns {boolean}\n */\nexport function srcset_url_equal(element_srcset, srcset) {\n\tconst element_urls = split_srcset(element_srcset.srcset);\n\tconst urls = split_srcset(srcset || '');\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n\n/** @returns {boolean} */\nexport function not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\n/** @returns {boolean} */\nexport function is_empty(obj) {\n\treturn Object.keys(obj).length === 0;\n}\n\n/** @returns {void} */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nexport function subscribe(store, ...callbacks) {\n\tif (store == null) {\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(undefined);\n\t\t}\n\t\treturn noop;\n\t}\n\tconst unsub = store.subscribe(...callbacks);\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * https://svelte.dev/docs/svelte-store#get\n * @template T\n * @param {import('../store/public.js').Readable<T>} store\n * @returns {T}\n */\nexport function get_store_value(store) {\n\tlet value;\n\tsubscribe(store, (_) => (value = _))();\n\treturn value;\n}\n\n/** @returns {void} */\nexport function component_subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(subscribe(store, callback));\n}\n\nexport function create_slot(definition, ctx, $$scope, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n\treturn definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;\n}\n\nexport function get_slot_changes(definition, $$scope, dirty, fn) {\n\tif (definition[2] && fn) {\n\t\tconst lets = definition[2](fn(dirty));\n\t\tif ($$scope.dirty === undefined) {\n\t\t\treturn lets;\n\t\t}\n\t\tif (typeof lets === 'object') {\n\t\t\tconst merged = [];\n\t\t\tconst len = Math.max($$scope.dirty.length, lets.length);\n\t\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\t\tmerged[i] = $$scope.dirty[i] | lets[i];\n\t\t\t}\n\t\t\treturn merged;\n\t\t}\n\t\treturn $$scope.dirty | lets;\n\t}\n\treturn $$scope.dirty;\n}\n\n/** @returns {void} */\nexport function update_slot_base(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tslot_changes,\n\tget_slot_context_fn\n) {\n\tif (slot_changes) {\n\t\tconst slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n\t\tslot.p(slot_context, slot_changes);\n\t}\n}\n\n/** @returns {void} */\nexport function update_slot(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tdirty,\n\tget_slot_changes_fn,\n\tget_slot_context_fn\n) {\n\tconst slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n\tupdate_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\n\n/** @returns {any[] | -1} */\nexport function get_all_dirty_from_scope($$scope) {\n\tif ($$scope.ctx.length > 32) {\n\t\tconst dirty = [];\n\t\tconst length = $$scope.ctx.length / 32;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdirty[i] = -1;\n\t\t}\n\t\treturn dirty;\n\t}\n\treturn -1;\n}\n\n/** @returns {{}} */\nexport function exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\n/** @returns {{}} */\nexport function compute_rest_props(props, keys) {\n\tconst rest = {};\n\tkeys = new Set(keys);\n\tfor (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];\n\treturn rest;\n}\n\n/** @returns {{}} */\nexport function compute_slots(slots) {\n\tconst result = {};\n\tfor (const key in slots) {\n\t\tresult[key] = true;\n\t}\n\treturn result;\n}\n\n/** @returns {(this: any, ...args: any[]) => void} */\nexport function once(fn) {\n\tlet ran = false;\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\t\tfn.call(this, ...args);\n\t};\n}\n\nexport function null_to_empty(value) {\n\treturn value == null ? '' : value;\n}\n\nexport function set_store_value(store, ret, value) {\n\tstore.set(value);\n\treturn ret;\n}\n\nexport const has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport function action_destroyer(action_result) {\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nexport function split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\nexport const contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n","/** @type {typeof globalThis} */\nexport const globals =\n\ttypeof window !== 'undefined'\n\t\t? window\n\t\t: typeof globalThis !== 'undefined'\n\t\t? globalThis\n\t\t: // @ts-ignore Node typings have this\n\t\t  global;\n","import { contenteditable_truthy_values, has_prop } from './utils.js';\n\nimport { ResizeObserverSingleton } from './ResizeObserverSingleton.js';\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\n\n/**\n * @returns {void}\n */\nexport function start_hydrating() {\n\tis_hydrating = true;\n}\n\n/**\n * @returns {void}\n */\nexport function end_hydrating() {\n\tis_hydrating = false;\n}\n\n/**\n * @param {number} low\n * @param {number} high\n * @param {(index: number) => number} key\n * @param {number} value\n * @returns {number}\n */\nfunction upper_bound(low, high, key, value) {\n\t// Return first index of value larger than input value in the range [low, high)\n\twhile (low < high) {\n\t\tconst mid = low + ((high - low) >> 1);\n\t\tif (key(mid) <= value) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\treturn low;\n}\n\n/**\n * @param {NodeEx} target\n * @returns {void}\n */\nfunction init_hydrate(target) {\n\tif (target.hydrate_init) return;\n\ttarget.hydrate_init = true;\n\t// We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n\n\tlet children = /** @type {ArrayLike<NodeEx2>} */ (target.childNodes);\n\t// If target is <head>, there may be children without claim_order\n\tif (target.nodeName === 'HEAD') {\n\t\tconst my_children = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst node = children[i];\n\t\t\tif (node.claim_order !== undefined) {\n\t\t\t\tmy_children.push(node);\n\t\t\t}\n\t\t}\n\t\tchildren = my_children;\n\t}\n\t/*\n\t * Reorder claimed children optimally.\n\t * We can reorder claimed children optimally by finding the longest subsequence of\n\t * nodes that are already claimed in order and only moving the rest. The longest\n\t * subsequence of nodes that are claimed in order can be found by\n\t * computing the longest increasing subsequence of .claim_order values.\n\t *\n\t * This algorithm is optimal in generating the least amount of reorder operations\n\t * possible.\n\t *\n\t * Proof:\n\t * We know that, given a set of reordering operations, the nodes that do not move\n\t * always form an increasing subsequence, since they do not move among each other\n\t * meaning that they must be already ordered among each other. Thus, the maximal\n\t * set of nodes that do not move form a longest increasing subsequence.\n\t */\n\t// Compute longest increasing subsequence\n\t// m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n\tconst m = new Int32Array(children.length + 1);\n\t// Predecessor indices + 1\n\tconst p = new Int32Array(children.length);\n\tm[0] = -1;\n\tlet longest = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst current = children[i].claim_order;\n\t\t// Find the largest subsequence length such that it ends in a value less than our current value\n\t\t// upper_bound returns first greater value, so we subtract one\n\t\t// with fast path for when we are on the current longest subsequence\n\t\tconst seq_len =\n\t\t\t(longest > 0 && children[m[longest]].claim_order <= current\n\t\t\t\t? longest + 1\n\t\t\t\t: upper_bound(1, longest, (idx) => children[m[idx]].claim_order, current)) - 1;\n\t\tp[i] = m[seq_len] + 1;\n\t\tconst new_len = seq_len + 1;\n\t\t// We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n\t\tm[new_len] = i;\n\t\tlongest = Math.max(new_len, longest);\n\t}\n\t// The longest increasing subsequence of nodes (initially reversed)\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst lis = [];\n\t// The rest of the nodes, nodes that will be moved\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst to_move = [];\n\tlet last = children.length - 1;\n\tfor (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n\t\tlis.push(children[cur - 1]);\n\t\tfor (; last >= cur; last--) {\n\t\t\tto_move.push(children[last]);\n\t\t}\n\t\tlast--;\n\t}\n\tfor (; last >= 0; last--) {\n\t\tto_move.push(children[last]);\n\t}\n\tlis.reverse();\n\t// We sort the nodes being moved to guarantee that their insertion order matches the claim order\n\tto_move.sort((a, b) => a.claim_order - b.claim_order);\n\t// Finally, we move the nodes\n\tfor (let i = 0, j = 0; i < to_move.length; i++) {\n\t\twhile (j < lis.length && to_move[i].claim_order >= lis[j].claim_order) {\n\t\t\tj++;\n\t\t}\n\t\tconst anchor = j < lis.length ? lis[j] : null;\n\t\ttarget.insertBefore(to_move[i], anchor);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @returns {void}\n */\nexport function append(target, node) {\n\ttarget.appendChild(node);\n}\n\n/**\n * @param {Node} target\n * @param {string} style_sheet_id\n * @param {string} styles\n * @returns {void}\n */\nexport function append_styles(target, style_sheet_id, styles) {\n\tconst append_styles_to = get_root_for_style(target);\n\tif (!append_styles_to.getElementById(style_sheet_id)) {\n\t\tconst style = element('style');\n\t\tstyle.id = style_sheet_id;\n\t\tstyle.textContent = styles;\n\t\tappend_stylesheet(append_styles_to, style);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {ShadowRoot | Document}\n */\nexport function get_root_for_style(node) {\n\tif (!node) return document;\n\tconst root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n\tif (root && /** @type {ShadowRoot} */ (root).host) {\n\t\treturn /** @type {ShadowRoot} */ (root);\n\t}\n\treturn node.ownerDocument;\n}\n\n/**\n * @param {Node} node\n * @returns {CSSStyleSheet}\n */\nexport function append_empty_stylesheet(node) {\n\tconst style_element = element('style');\n\t// For transitions to work without 'style-src: unsafe-inline' Content Security Policy,\n\t// these empty tags need to be allowed with a hash as a workaround until we move to the Web Animations API.\n\t// Using the hash for the empty string (for an empty tag) works in all browsers except Safari.\n\t// So as a workaround for the workaround, when we append empty style tags we set their content to /* empty */.\n\t// The hash 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=' will then work even in Safari.\n\tstyle_element.textContent = '/* empty */';\n\tappend_stylesheet(get_root_for_style(node), style_element);\n\treturn style_element.sheet;\n}\n\n/**\n * @param {ShadowRoot | Document} node\n * @param {HTMLStyleElement} style\n * @returns {CSSStyleSheet}\n */\nfunction append_stylesheet(node, style) {\n\tappend(/** @type {Document} */ (node).head || node, style);\n\treturn style.sheet;\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @returns {void}\n */\nexport function append_hydration(target, node) {\n\tif (is_hydrating) {\n\t\tinit_hydrate(target);\n\t\tif (\n\t\t\ttarget.actual_end_child === undefined ||\n\t\t\t(target.actual_end_child !== null && target.actual_end_child.parentNode !== target)\n\t\t) {\n\t\t\ttarget.actual_end_child = target.firstChild;\n\t\t}\n\t\t// Skip nodes of undefined ordering\n\t\twhile (target.actual_end_child !== null && target.actual_end_child.claim_order === undefined) {\n\t\t\ttarget.actual_end_child = target.actual_end_child.nextSibling;\n\t\t}\n\t\tif (node !== target.actual_end_child) {\n\t\t\t// We only insert if the ordering of this node should be modified or the parent node is not target\n\t\t\tif (node.claim_order !== undefined || node.parentNode !== target) {\n\t\t\t\ttarget.insertBefore(node, target.actual_end_child);\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.actual_end_child = node.nextSibling;\n\t\t}\n\t} else if (node.parentNode !== target || node.nextSibling !== null) {\n\t\ttarget.appendChild(node);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @param {Node} [anchor]\n * @returns {void}\n */\nexport function insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor || null);\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @param {NodeEx} [anchor]\n * @returns {void}\n */\nexport function insert_hydration(target, node, anchor) {\n\tif (is_hydrating && !anchor) {\n\t\tappend_hydration(target, node);\n\t} else if (node.parentNode !== target || node.nextSibling != anchor) {\n\t\ttarget.insertBefore(node, anchor || null);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {void}\n */\nexport function detach(node) {\n\tif (node.parentNode) {\n\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element(name) {\n\treturn document.createElement(name);\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @param {string} is\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element_is(name, is) {\n\treturn document.createElement(name, { is });\n}\n\n/**\n * @template T\n * @template {keyof T} K\n * @param {T} obj\n * @param {K[]} exclude\n * @returns {Pick<T, Exclude<keyof T, K>>}\n */\nexport function object_without_properties(obj, exclude) {\n\tconst target = /** @type {Pick<T, Exclude<keyof T, K>>} */ ({});\n\tfor (const k in obj) {\n\t\tif (\n\t\t\thas_prop(obj, k) &&\n\t\t\t// @ts-ignore\n\t\t\texclude.indexOf(k) === -1\n\t\t) {\n\t\t\t// @ts-ignore\n\t\t\ttarget[k] = obj[k];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * @template {keyof SVGElementTagNameMap} K\n * @param {K} name\n * @returns {SVGElement}\n */\nexport function svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\n/**\n * @param {string} data\n * @returns {Text}\n */\nexport function text(data) {\n\treturn document.createTextNode(data);\n}\n\n/**\n * @returns {Text} */\nexport function space() {\n\treturn text(' ');\n}\n\n/**\n * @returns {Text} */\nexport function empty() {\n\treturn text('');\n}\n\n/**\n * @param {string} content\n * @returns {Comment}\n */\nexport function comment(content) {\n\treturn document.createComment(content);\n}\n\n/**\n * @param {EventTarget} node\n * @param {string} event\n * @param {EventListenerOrEventListenerObject} handler\n * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]\n * @returns {() => void}\n */\nexport function listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function prevent_default(fn) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_immediate_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function self(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.target === this) fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function trusted(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.isTrusted) fn.call(this, event);\n\t};\n}\n\n/**\n * @param {Element} node\n * @param {string} attribute\n * @param {string} [value]\n * @returns {void}\n */\nexport function attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_attributes(node, attributes) {\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n\tfor (const key in attributes) {\n\t\tif (attributes[key] == null) {\n\t\t\tnode.removeAttribute(key);\n\t\t} else if (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key === '__value') {\n\t\t\t/** @type {any} */ (node).value = node[key] = attributes[key];\n\t\t} else if (\n\t\t\tdescriptors[key] &&\n\t\t\tdescriptors[key].set &&\n\t\t\talways_set_through_set_attribute.indexOf(key) === -1\n\t\t) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_svg_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tattr(node, key, attributes[key]);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} data_map\n * @returns {void}\n */\nexport function set_custom_element_data_map(node, data_map) {\n\tObject.keys(data_map).forEach((key) => {\n\t\tset_custom_element_data(node, key, data_map[key]);\n\t});\n}\n\n/**\n * @returns {void} */\nexport function set_custom_element_data(node, prop, value) {\n\tconst lower = prop.toLowerCase(); // for backwards compatibility with existing behavior we do lowercase first\n\tif (lower in node) {\n\t\tnode[lower] = typeof node[lower] === 'boolean' && value === '' ? true : value;\n\t} else if (prop in node) {\n\t\tnode[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\n/**\n * @param {string} tag\n */\nexport function set_dynamic_element_data(tag) {\n\treturn /-/.test(tag) ? set_custom_element_data_map : set_attributes;\n}\n\n/**\n * @returns {void}\n */\nexport function xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @returns {string}\n */\nexport function get_svelte_dataset(node) {\n\treturn node.dataset.svelteH;\n}\n\n/**\n * @returns {unknown[]} */\nexport function get_binding_group_value(group, __value, checked) {\n\tconst value = new Set();\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.add(group[i].__value);\n\t}\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement[]} group\n * @returns {{ p(...inputs: HTMLInputElement[]): void; r(): void; }}\n */\nexport function init_binding_group(group) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\treturn {\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\t_inputs.forEach((input) => group.push(input));\n\t\t},\n\t\t/* remove */ r() {\n\t\t\t_inputs.forEach((input) => group.splice(group.indexOf(input), 1));\n\t\t}\n\t};\n}\n\n/**\n * @param {number[]} indexes\n * @returns {{ u(new_indexes: number[]): void; p(...inputs: HTMLInputElement[]): void; r: () => void; }}\n */\nexport function init_binding_group_dynamic(group, indexes) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _group = get_binding_group(group);\n\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\n\tfunction get_binding_group(group) {\n\t\tfor (let i = 0; i < indexes.length; i++) {\n\t\t\tgroup = group[indexes[i]] = group[indexes[i]] || [];\n\t\t}\n\t\treturn group;\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction push() {\n\t\t_inputs.forEach((input) => _group.push(input));\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction remove() {\n\t\t_inputs.forEach((input) => _group.splice(_group.indexOf(input), 1));\n\t}\n\treturn {\n\t\t/* update */ u(new_indexes) {\n\t\t\tindexes = new_indexes;\n\t\t\tconst new_group = get_binding_group(group);\n\t\t\tif (new_group !== _group) {\n\t\t\t\tremove();\n\t\t\t\t_group = new_group;\n\t\t\t\tpush();\n\t\t\t}\n\t\t},\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\tpush();\n\t\t},\n\t\t/* remove */ r: remove\n\t};\n}\n\n/** @returns {number} */\nexport function to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/** @returns {any[]} */\nexport function time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\n/**\n * @param {Element} element\n * @returns {ChildNode[]}\n */\nexport function children(element) {\n\treturn Array.from(element.childNodes);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {void}\n */\nfunction init_claim_info(nodes) {\n\tif (nodes.claim_info === undefined) {\n\t\tnodes.claim_info = { last_index: 0, total_claimed: 0 };\n\t}\n}\n\n/**\n * @template {ChildNodeEx} R\n * @param {ChildNodeArray} nodes\n * @param {(node: ChildNodeEx) => node is R} predicate\n * @param {(node: ChildNodeEx) => ChildNodeEx | undefined} process_node\n * @param {() => R} create_node\n * @param {boolean} dont_update_last_index\n * @returns {R}\n */\nfunction claim_node(nodes, predicate, process_node, create_node, dont_update_last_index = false) {\n\t// Try to find nodes in an order such that we lengthen the longest increasing subsequence\n\tinit_claim_info(nodes);\n\tconst result_node = (() => {\n\t\t// We first try to find an element after the previous one\n\t\tfor (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// Otherwise, we try to find one before\n\t\t// We iterate in reverse so that we don't go too far back\n\t\tfor (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t} else if (replacement === undefined) {\n\t\t\t\t\t// Since we spliced before the last_index, we decrease it\n\t\t\t\t\tnodes.claim_info.last_index--;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// If we can't find any matching node, we create a new one\n\t\treturn create_node();\n\t})();\n\tresult_node.claim_order = nodes.claim_info.total_claimed;\n\tnodes.claim_info.total_claimed += 1;\n\treturn result_node;\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @param {(name: string) => Element | SVGElement} create_element\n * @returns {Element | SVGElement}\n */\nfunction claim_element_base(nodes, name, attributes, create_element) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Element | SVGElement} */\n\t\t(node) => node.nodeName === name,\n\t\t/** @param {Element} node */\n\t\t(node) => {\n\t\t\tconst remove = [];\n\t\t\tfor (let j = 0; j < node.attributes.length; j++) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) {\n\t\t\t\t\tremove.push(attribute.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremove.forEach((v) => node.removeAttribute(v));\n\t\t\treturn undefined;\n\t\t},\n\t\t() => create_element(name)\n\t);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_svg_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, svg_element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Text}\n */\nexport function claim_text(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Text} */\n\t\t(node) => node.nodeType === 3,\n\t\t/** @param {Text} node */\n\t\t(node) => {\n\t\t\tconst data_str = '' + data;\n\t\t\tif (node.data.startsWith(data_str)) {\n\t\t\t\tif (node.data.length !== data_str.length) {\n\t\t\t\t\treturn node.splitText(data_str.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode.data = data_str;\n\t\t\t}\n\t\t},\n\t\t() => text(data),\n\t\ttrue // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n\t);\n}\n\n/**\n * @returns {Text} */\nexport function claim_space(nodes) {\n\treturn claim_text(nodes, ' ');\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Comment}\n */\nexport function claim_comment(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Comment} */\n\t\t(node) => node.nodeType === 8,\n\t\t/** @param {Comment} node */\n\t\t(node) => {\n\t\t\tnode.data = '' + data;\n\t\t\treturn undefined;\n\t\t},\n\t\t() => comment(data),\n\t\ttrue\n\t);\n}\n\nfunction get_comment_idx(nodes, text, start) {\n\tfor (let i = start; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * @param {boolean} is_svg\n * @returns {HtmlTagHydration}\n */\nexport function claim_html_tag(nodes, is_svg) {\n\t// find html opening tag\n\tconst start_index = get_comment_idx(nodes, 'HTML_TAG_START', 0);\n\tconst end_index = get_comment_idx(nodes, 'HTML_TAG_END', start_index + 1);\n\tif (start_index === -1 || end_index === -1) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\n\tinit_claim_info(nodes);\n\tconst html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n\tdetach(html_tag_nodes[0]);\n\tdetach(html_tag_nodes[html_tag_nodes.length - 1]);\n\tconst claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n\tif (claimed_nodes.length === 0) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\tfor (const n of claimed_nodes) {\n\t\tn.claim_order = nodes.claim_info.total_claimed;\n\t\tnodes.claim_info.total_claimed += 1;\n\t}\n\treturn new HtmlTagHydration(is_svg, claimed_nodes);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data_contenteditable(text, data) {\n\tdata = '' + data;\n\tif (text.wholeText === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @param {string} attr_value\n * @returns {void}\n */\nexport function set_data_maybe_contenteditable(text, data, attr_value) {\n\tif (~contenteditable_truthy_values.indexOf(attr_value)) {\n\t\tset_data_contenteditable(text, data);\n\t} else {\n\t\tset_data(text, data);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_input_value(input, value) {\n\tinput.value = value == null ? '' : value;\n}\n\n/**\n * @returns {void} */\nexport function set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_style(node, key, value, important) {\n\tif (value == null) {\n\t\tnode.style.removeProperty(key);\n\t} else {\n\t\tnode.style.setProperty(key, value, important ? 'important' : '');\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_option(select, value, mounting) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nexport function select_value(select) {\n\tconst selected_option = select.querySelector(':checked');\n\treturn selected_option && selected_option.__value;\n}\n\nexport function select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), (option) => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\n\n/**\n * @type {boolean} */\nlet crossorigin;\n\n/**\n * @returns {boolean} */\nexport function is_crossorigin() {\n\tif (crossorigin === undefined) {\n\t\tcrossorigin = false;\n\t\ttry {\n\t\t\tif (typeof window !== 'undefined' && window.parent) {\n\t\t\t\tvoid window.parent.document;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tcrossorigin = true;\n\t\t}\n\t}\n\treturn crossorigin;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {() => void} fn\n * @returns {() => void}\n */\nexport function add_iframe_resize_listener(node, fn) {\n\tconst computed_style = getComputedStyle(node);\n\tif (computed_style.position === 'static') {\n\t\tnode.style.position = 'relative';\n\t}\n\tconst iframe = element('iframe');\n\tiframe.setAttribute(\n\t\t'style',\n\t\t'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n\t\t\t'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;'\n\t);\n\tiframe.setAttribute('aria-hidden', 'true');\n\tiframe.tabIndex = -1;\n\tconst crossorigin = is_crossorigin();\n\n\t/**\n\t * @type {() => void}\n\t */\n\tlet unsubscribe;\n\tif (crossorigin) {\n\t\tiframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n\t\tunsubscribe = listen(\n\t\t\twindow,\n\t\t\t'message',\n\t\t\t/** @param {MessageEvent} event */ (event) => {\n\t\t\t\tif (event.source === iframe.contentWindow) fn();\n\t\t\t}\n\t\t);\n\t} else {\n\t\tiframe.src = 'about:blank';\n\t\tiframe.onload = () => {\n\t\t\tunsubscribe = listen(iframe.contentWindow, 'resize', fn);\n\t\t\t// make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n\t\t\t// see https://github.com/sveltejs/svelte/issues/4233\n\t\t\tfn();\n\t\t};\n\t}\n\tappend(node, iframe);\n\treturn () => {\n\t\tif (crossorigin) {\n\t\t\tunsubscribe();\n\t\t} else if (unsubscribe && iframe.contentWindow) {\n\t\t\tunsubscribe();\n\t\t}\n\t\tdetach(iframe);\n\t};\n}\nexport const resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\nexport const resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\nexport const resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton(\n\t{ box: 'device-pixel-content-box' }\n);\nexport { ResizeObserverSingleton };\n\n/**\n * @returns {void} */\nexport function toggle_class(element, name, toggle) {\n\t// The `!!` is required because an `undefined` flag means flipping the current state.\n\telement.classList.toggle(name, !!toggle);\n}\n\n/**\n * @template T\n * @param {string} type\n * @param {T} [detail]\n * @param {{ bubbles?: boolean, cancelable?: boolean }} [options]\n * @returns {CustomEvent<T>}\n */\nexport function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {ChildNodeArray}\n */\nexport function query_selector_all(selector, parent = document.body) {\n\treturn Array.from(parent.querySelectorAll(selector));\n}\n\n/**\n * @param {string} nodeId\n * @param {HTMLElement} head\n * @returns {any[]}\n */\nexport function head_selector(nodeId, head) {\n\tconst result = [];\n\tlet started = 0;\n\tfor (const node of head.childNodes) {\n\t\tif (node.nodeType === 8 /* comment node */) {\n\t\t\tconst comment = node.textContent.trim();\n\t\t\tif (comment === `HEAD_${nodeId}_END`) {\n\t\t\t\tstarted -= 1;\n\t\t\t\tresult.push(node);\n\t\t\t} else if (comment === `HEAD_${nodeId}_START`) {\n\t\t\t\tstarted += 1;\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t} else if (started > 0) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n/** */\nexport class HtmlTag {\n\t/**\n\t * @private\n\t * @default false\n\t */\n\tis_svg = false;\n\t/** parent for creating node */\n\te = undefined;\n\t/** html tag nodes */\n\tn = undefined;\n\t/** target */\n\tt = undefined;\n\t/** anchor */\n\ta = undefined;\n\tconstructor(is_svg = false) {\n\t\tthis.is_svg = is_svg;\n\t\tthis.e = this.n = null;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tthis.h(html);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @param {HTMLElement | SVGElement} target\n\t * @param {HTMLElement | SVGElement} anchor\n\t * @returns {void}\n\t */\n\tm(html, target, anchor = null) {\n\t\tif (!this.e) {\n\t\t\tif (this.is_svg)\n\t\t\t\tthis.e = svg_element(/** @type {keyof SVGElementTagNameMap} */ (target.nodeName));\n\t\t\t/** #7364  target for <template> may be provided as #document-fragment(11) */ else\n\t\t\t\tthis.e = element(\n\t\t\t\t\t/** @type {keyof HTMLElementTagNameMap} */ (\n\t\t\t\t\t\ttarget.nodeType === 11 ? 'TEMPLATE' : target.nodeName\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tthis.t =\n\t\t\t\ttarget.tagName !== 'TEMPLATE'\n\t\t\t\t\t? target\n\t\t\t\t\t: /** @type {HTMLTemplateElement} */ (target).content;\n\t\t\tthis.c(html);\n\t\t}\n\t\tthis.i(anchor);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\th(html) {\n\t\tthis.e.innerHTML = html;\n\t\tthis.n = Array.from(\n\t\t\tthis.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes\n\t\t);\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert(this.t, this.n[i], anchor);\n\t\t}\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tp(html) {\n\t\tthis.d();\n\t\tthis.h(html);\n\t\tthis.i(this.a);\n\t}\n\n\t/**\n\t * @returns {void} */\n\td() {\n\t\tthis.n.forEach(detach);\n\t}\n}\n\nexport class HtmlTagHydration extends HtmlTag {\n\t/** @type {Element[]} hydration claimed nodes */\n\tl = undefined;\n\n\tconstructor(is_svg = false, claimed_nodes) {\n\t\tsuper(is_svg);\n\t\tthis.e = this.n = null;\n\t\tthis.l = claimed_nodes;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tif (this.l) {\n\t\t\tthis.n = this.l;\n\t\t} else {\n\t\t\tsuper.c(html);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert_hydration(this.t, this.n[i], anchor);\n\t\t}\n\t}\n}\n\n/**\n * @param {NamedNodeMap} attributes\n * @returns {{}}\n */\nexport function attribute_to_object(attributes) {\n\tconst result = {};\n\tfor (const attribute of attributes) {\n\t\tresult[attribute.name] = attribute.value;\n\t}\n\treturn result;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t'&': '&amp;',\n\t'<': '&lt;'\n};\n\nconst regex_attribute_characters_to_escape = /[\"&<]/g;\n\n/**\n * Note that the attribute itself should be surrounded in double quotes\n * @param {any} attribute\n */\nfunction escape_attribute(attribute) {\n\treturn String(attribute).replace(regex_attribute_characters_to_escape, (match) => escaped[match]);\n}\n\n/**\n * @param {Record<string, string>} attributes\n */\nexport function stringify_spread(attributes) {\n\tlet str = ' ';\n\tfor (const key in attributes) {\n\t\tif (attributes[key] != null) {\n\t\t\tstr += `${key}=\"${escape_attribute(attributes[key])}\" `;\n\t\t}\n\t}\n\n\treturn str;\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {{}}\n */\nexport function get_custom_elements_slots(element) {\n\tconst result = {};\n\telement.childNodes.forEach(\n\t\t/** @param {Element} node */ (node) => {\n\t\t\tresult[node.slot || 'default'] = true;\n\t\t}\n\t);\n\treturn result;\n}\n\nexport function construct_svelte_component(component, props) {\n\treturn new component(props);\n}\n\n/**\n * @typedef {Node & {\n * \tclaim_order?: number;\n * \thydrate_init?: true;\n * \tactual_end_child?: NodeEx;\n * \tchildNodes: NodeListOf<NodeEx>;\n * }} NodeEx\n */\n\n/** @typedef {ChildNode & NodeEx} ChildNodeEx */\n\n/** @typedef {NodeEx & { claim_order: number }} NodeEx2 */\n\n/**\n * @typedef {ChildNodeEx[] & {\n * \tclaim_info?: {\n * \t\tlast_index: number;\n * \t\ttotal_claimed: number;\n * \t};\n * }} ChildNodeArray\n */\n","import { custom_event } from './dom.js';\n\nexport let current_component;\n\n/** @returns {void} */\nexport function set_current_component(component) {\n\tcurrent_component = component;\n}\n\nexport function get_current_component() {\n\tif (!current_component) throw new Error('Function called outside component initialization');\n\treturn current_component;\n}\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#beforeupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tget_current_component().$$.before_update.push(fn);\n}\n\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.\n *\n * `onMount` does not run inside a [server-side component](https://svelte.dev/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs/svelte#onmount\n * @template T\n * @param {() => import('./private.js').NotFunction<T> | Promise<import('./private.js').NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#afterupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tget_current_component().$$.after_update.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs/svelte#ondestroy\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: never; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * https://svelte.dev/docs/svelte#createeventdispatcher\n * @template {Record<string, any>} [EventMap=any]\n * @returns {import('./public.js').EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst component = get_current_component();\n\treturn (type, detail, { cancelable = false } = {}) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(/** @type {string} */ (type), detail, { cancelable });\n\t\t\tcallbacks.slice().forEach((fn) => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#setcontext\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n\treturn context;\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#getcontext\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs/svelte#getallcontexts\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\treturn get_current_component().$$.context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#hascontext\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_current_component().$$.context.has(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\n/**\n * @param component\n * @param event\n * @returns {void}\n */\nexport function bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\tif (callbacks) {\n\t\t// @ts-ignore\n\t\tcallbacks.slice().forEach((fn) => fn.call(this, event));\n\t}\n}\n","import { run_all } from './utils.js';\nimport { current_component, set_current_component } from './lifecycle.js';\n\nexport const dirty_components = [];\nexport const intros = { enabled: false };\nexport const binding_callbacks = [];\n\nlet render_callbacks = [];\n\nconst flush_callbacks = [];\n\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\n\nlet update_scheduled = false;\n\n/** @returns {void} */\nexport function schedule_update() {\n\tif (!update_scheduled) {\n\t\tupdate_scheduled = true;\n\t\tresolved_promise.then(flush);\n\t}\n}\n\n/** @returns {Promise<void>} */\nexport function tick() {\n\tschedule_update();\n\treturn resolved_promise;\n}\n\n/** @returns {void} */\nexport function add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\n/** @returns {void} */\nexport function add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\n\nlet flushidx = 0; // Do *not* move this inside the flush() function\n\n/** @returns {void} */\nexport function flush() {\n\t// Do not reenter flush while dirty components are updated, as this can\n\t// result in an infinite loop. Instead, let the inner flush handle it.\n\t// Reentrancy is ok afterwards for bindings etc.\n\tif (flushidx !== 0) {\n\t\treturn;\n\t}\n\tconst saved_component = current_component;\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\ttry {\n\t\t\twhile (flushidx < dirty_components.length) {\n\t\t\t\tconst component = dirty_components[flushidx];\n\t\t\t\tflushidx++;\n\t\t\t\tset_current_component(component);\n\t\t\t\tupdate(component.$$);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// reset dirty state to not end up in a deadlocked state and then rethrow\n\t\t\tdirty_components.length = 0;\n\t\t\tflushidx = 0;\n\t\t\tthrow e;\n\t\t}\n\t\tset_current_component(null);\n\t\tdirty_components.length = 0;\n\t\tflushidx = 0;\n\t\twhile (binding_callbacks.length) binding_callbacks.pop()();\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\tfor (let i = 0; i < render_callbacks.length; i += 1) {\n\t\t\tconst callback = render_callbacks[i];\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\trender_callbacks.length = 0;\n\t} while (dirty_components.length);\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\tupdate_scheduled = false;\n\tseen_callbacks.clear();\n\tset_current_component(saved_component);\n}\n\n/** @returns {void} */\nfunction update($$) {\n\tif ($$.fragment !== null) {\n\t\t$$.update();\n\t\trun_all($$.before_update);\n\t\tconst dirty = $$.dirty;\n\t\t$$.dirty = [-1];\n\t\t$$.fragment && $$.fragment.p($$.ctx, dirty);\n\t\t$$.after_update.forEach(add_render_callback);\n\t}\n}\n\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function flush_render_callbacks(fns) {\n\tconst filtered = [];\n\tconst targets = [];\n\trender_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));\n\ttargets.forEach((c) => c());\n\trender_callbacks = filtered;\n}\n","import { identity as linear, is_function, noop, run_all } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\nimport { custom_event } from './dom.js';\nimport { add_render_callback } from './scheduler.js';\n\n/**\n * @type {Promise<void> | null}\n */\nlet promise;\n\n/**\n * @returns {Promise<void>}\n */\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\treturn promise;\n}\n\n/**\n * @param {Element} node\n * @param {INTRO | OUTRO | boolean} direction\n * @param {'start' | 'end'} kind\n * @returns {void}\n */\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nconst outroing = new Set();\n\n/**\n * @type {Outro}\n */\nlet outros;\n\n/**\n * @returns {void} */\nexport function group_outros() {\n\toutros = {\n\t\tr: 0,\n\t\tc: [],\n\t\tp: outros // parent group\n\t};\n}\n\n/**\n * @returns {void} */\nexport function check_outros() {\n\tif (!outros.r) {\n\t\trun_all(outros.c);\n\t}\n\toutros = outros.p;\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} [local]\n * @returns {void}\n */\nexport function transition_in(block, local) {\n\tif (block && block.i) {\n\t\toutroing.delete(block);\n\t\tblock.i(local);\n\t}\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} local\n * @param {0 | 1} [detach]\n * @param {() => void} [callback]\n * @returns {void}\n */\nexport function transition_out(block, local, detach, callback) {\n\tif (block && block.o) {\n\t\tif (outroing.has(block)) return;\n\t\toutroing.add(block);\n\t\toutros.c.push(() => {\n\t\t\toutroing.delete(block);\n\t\t\tif (callback) {\n\t\t\t\tif (detach) block.d(1);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t\tblock.o(local);\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @type {import('../transition/public.js').TransitionConfig}\n */\nconst null_transition = { duration: 0 };\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ start(): void; invalidate(): void; end(): void; }}\n */\nexport function create_in_transition(node, fn, params) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'in' };\n\tlet config = fn(node, params, options);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\t/**\n\t * @returns {void} */\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick(0, 1);\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tif (task) task.abort();\n\t\trunning = true;\n\t\tadd_render_callback(() => dispatch(node, true, 'start'));\n\t\ttask = loop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(1, 0);\n\t\t\t\t\tdispatch(node, true, 'end');\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn (running = false);\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\tlet started = false;\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\t\t\tstarted = true;\n\t\t\tdelete_rule(node);\n\t\t\tif (is_function(config)) {\n\t\t\t\tconfig = config(options);\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ end(reset: any): void; }}\n */\nexport function create_out_transition(node, fn, params) {\n\t/** @type {TransitionOptions} */\n\tconst options = { direction: 'out' };\n\tlet config = fn(node, params, options);\n\tlet running = true;\n\tlet animation_name;\n\tconst group = outros;\n\tgroup.r += 1;\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tadd_render_callback(() => dispatch(node, false, 'start'));\n\n\t\tif ('inert' in node) {\n\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\tnode.inert = true;\n\t\t}\n\n\t\tloop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(0, 1);\n\t\t\t\t\tdispatch(node, false, 'end');\n\t\t\t\t\tif (!--group.r) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.c);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (is_function(config)) {\n\t\twait().then(() => {\n\t\t\t// @ts-ignore\n\t\t\tconfig = config(options);\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && 'inert' in node) {\n\t\t\t\tnode.inert = original_inert_value;\n\t\t\t}\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @param {boolean} intro\n * @returns {{ run(b: 0 | 1): void; end(): void; }}\n */\nexport function create_bidirectional_transition(node, fn, params, intro) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'both' };\n\tlet config = fn(node, params, options);\n\tlet t = intro ? 0 : 1;\n\n\t/**\n\t * @type {Program | null} */\n\tlet running_program = null;\n\n\t/**\n\t * @type {PendingProgram | null} */\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @param {PendingProgram} program\n\t * @param {number} duration\n\t * @returns {Program}\n\t */\n\tfunction init(program, duration) {\n\t\tconst d = /** @type {Program['d']} */ (program.b - t);\n\t\tduration *= Math.abs(d);\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\t/**\n\t * @param {INTRO | OUTRO} b\n\t * @returns {void}\n\t */\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\t/**\n\t\t * @type {PendingProgram} */\n\t\tconst program = {\n\t\t\tstart: now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\t// @ts-ignore todo: improve typings\n\t\t\tprogram.group = outros;\n\t\t\toutros.r += 1;\n\t\t}\n\n\t\tif ('inert' in node) {\n\t\t\tif (b) {\n\t\t\t\tif (original_inert_value !== undefined) {\n\t\t\t\t\t// aborted/reversed outro  restore previous inert value\n\t\t\t\t\tnode.inert = original_inert_value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\t\tnode.inert = true;\n\t\t\t}\n\t\t}\n\n\t\tif (running_program || pending_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\t\t\tif (b) tick(0, 1);\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\t\t\tloop((now) => {\n\t\t\t\tif (pending_program && now > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tt,\n\t\t\t\t\t\t\trunning_program.b,\n\t\t\t\t\t\t\trunning_program.duration,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\teasing,\n\t\t\t\t\t\t\tconfig.css\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now >= running_program.end) {\n\t\t\t\t\t\ttick((t = running_program.b), 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro  we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro  needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.r) run_all(running_program.group.c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t} else if (now >= running_program.start) {\n\t\t\t\t\t\tconst p = now - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\trun(b) {\n\t\t\tif (is_function(config)) {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconst opts = { direction: b ? 'in' : 'out' };\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconfig = config(opts);\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\n/** @typedef {1} INTRO */\n/** @typedef {0} OUTRO */\n/** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */\n/** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */\n\n/**\n * @typedef {Object} Outro\n * @property {number} r\n * @property {Function[]} c\n * @property {Object} p\n */\n\n/**\n * @typedef {Object} PendingProgram\n * @property {number} start\n * @property {INTRO|OUTRO} b\n * @property {Outro} [group]\n */\n\n/**\n * @typedef {Object} Program\n * @property {number} a\n * @property {INTRO|OUTRO} b\n * @property {1|-1} d\n * @property {number} duration\n * @property {number} start\n * @property {number} end\n * @property {Outro} [group]\n */\n","import { transition_in, transition_out } from './transitions.js';\nimport { run_all } from './utils.js';\n\n// general each functions:\n\nexport function ensure_array_like(array_like_or_iterator) {\n\treturn array_like_or_iterator?.length !== undefined\n\t\t? array_like_or_iterator\n\t\t: Array.from(array_like_or_iterator);\n}\n\n// keyed each functions:\n\n/** @returns {void} */\nexport function destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\n/** @returns {void} */\nexport function outro_and_destroy_block(block, lookup) {\n\ttransition_out(block, 1, 1, () => {\n\t\tlookup.delete(block.key);\n\t});\n}\n\n/** @returns {void} */\nexport function fix_and_destroy_block(block, lookup) {\n\tblock.f();\n\tdestroy_block(block, lookup);\n}\n\n/** @returns {void} */\nexport function fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\n/** @returns {any[]} */\nexport function update_keyed_each(\n\told_blocks,\n\tdirty,\n\tget_key,\n\tdynamic,\n\tctx,\n\tlist,\n\tlookup,\n\tnode,\n\tdestroy,\n\tcreate_each_block,\n\tnext,\n\tget_context\n) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\tconst updates = [];\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\t// defer updates until all the DOM shuffling is done\n\t\t\tupdates.push(() => block.p(child_ctx, dirty));\n\t\t}\n\t\tnew_lookup.set(key, (new_blocks[i] = block));\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\t/** @returns {void} */\n\tfunction insert(block) {\n\t\ttransition_in(block, 1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t} else if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t} else if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t} else if (did_move.has(old_key)) {\n\t\t\to--;\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\twhile (n) insert(new_blocks[n - 1]);\n\trun_all(updates);\n\treturn new_blocks;\n}\n\n/** @returns {void} */\nexport function validate_each_keys(ctx, list, get_context, get_key) {\n\tconst keys = new Map();\n\tfor (let i = 0; i < list.length; i++) {\n\t\tconst key = get_key(get_context(ctx, list, i));\n\t\tif (keys.has(key)) {\n\t\t\tlet value = '';\n\t\t\ttry {\n\t\t\t\tvalue = `with value '${String(key)}' `;\n\t\t\t} catch (e) {\n\t\t\t\t// can't stringify\n\t\t\t}\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot have duplicate keys in a keyed each: Keys at index ${keys.get(\n\t\t\t\t\tkey\n\t\t\t\t)} and ${i} ${value}are duplicates`\n\t\t\t);\n\t\t}\n\t\tkeys.set(key, i);\n\t}\n}\n","import {\n\tadd_render_callback,\n\tflush,\n\tflush_render_callbacks,\n\tschedule_update,\n\tdirty_components\n} from './scheduler.js';\nimport { current_component, set_current_component } from './lifecycle.js';\nimport { blank_object, is_empty, is_function, run, run_all, noop } from './utils.js';\nimport {\n\tchildren,\n\tdetach,\n\tstart_hydrating,\n\tend_hydrating,\n\tget_custom_elements_slots,\n\tinsert,\n\telement,\n\tattr\n} from './dom.js';\nimport { transition_in } from './transitions.js';\n\n/** @returns {void} */\nexport function bind(component, name, callback) {\n\tconst index = component.$$.props[name];\n\tif (index !== undefined) {\n\t\tcomponent.$$.bound[index] = callback;\n\t\tcallback(component.$$.ctx[index]);\n\t}\n}\n\n/** @returns {void} */\nexport function create_component(block) {\n\tblock && block.c();\n}\n\n/** @returns {void} */\nexport function claim_component(block, parent_nodes) {\n\tblock && block.l(parent_nodes);\n}\n\n/** @returns {void} */\nexport function mount_component(component, target, anchor) {\n\tconst { fragment, after_update } = component.$$;\n\tfragment && fragment.m(target, anchor);\n\t// onMount happens before the initial afterUpdate\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n\t\t// if the component was destroyed immediately\n\t\t// it will update the `$$.on_destroy` reference to `null`.\n\t\t// the destructured on_destroy may still reference to the old array\n\t\tif (component.$$.on_destroy) {\n\t\t\tcomponent.$$.on_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\tafter_update.forEach(add_render_callback);\n}\n\n/** @returns {void} */\nexport function destroy_component(component, detaching) {\n\tconst $$ = component.$$;\n\tif ($$.fragment !== null) {\n\t\tflush_render_callbacks($$.after_update);\n\t\trun_all($$.on_destroy);\n\t\t$$.fragment && $$.fragment.d(detaching);\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\t$$.on_destroy = $$.fragment = null;\n\t\t$$.ctx = [];\n\t}\n}\n\n/** @returns {void} */\nfunction make_dirty(component, i) {\n\tif (component.$$.dirty[0] === -1) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty.fill(0);\n\t}\n\tcomponent.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n}\n\n// TODO: Document the other params\n/**\n * @param {SvelteComponent} component\n * @param {import('./public.js').ComponentConstructorOptions} options\n *\n * @param {import('./utils.js')['not_equal']} not_equal Used to compare props and state values.\n * @param {(target: Element | ShadowRoot) => void} [append_styles] Function that appends styles to the DOM when the component is first initialised.\n * This will be the `add_css` function from the compiled component.\n *\n * @returns {void}\n */\nexport function init(\n\tcomponent,\n\toptions,\n\tinstance,\n\tcreate_fragment,\n\tnot_equal,\n\tprops,\n\tappend_styles = null,\n\tdirty = [-1]\n) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\t/** @type {import('./private.js').T$$} */\n\tconst $$ = (component.$$ = {\n\t\tfragment: null,\n\t\tctx: [],\n\t\t// state\n\t\tprops,\n\t\tupdate: noop,\n\t\tnot_equal,\n\t\tbound: blank_object(),\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\ton_disconnect: [],\n\t\tbefore_update: [],\n\t\tafter_update: [],\n\t\tcontext: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty,\n\t\tskip_bound: false,\n\t\troot: options.target || parent_component.$$.root\n\t});\n\tappend_styles && append_styles($$.root);\n\tlet ready = false;\n\t$$.ctx = instance\n\t\t? instance(component, options.props || {}, (i, ret, ...rest) => {\n\t\t\t\tconst value = rest.length ? rest[0] : ret;\n\t\t\t\tif ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n\t\t\t\t\tif (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n\t\t\t\t\tif (ready) make_dirty(component, i);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t  })\n\t\t: [];\n\t$$.update();\n\tready = true;\n\trun_all($$.before_update);\n\t// `false` as a special case of no DOM component\n\t$$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\tstart_hydrating();\n\t\t\t// TODO: what is the correct type here?\n\t\t\t// @ts-expect-error\n\t\t\tconst nodes = children(options.target);\n\t\t\t$$.fragment && $$.fragment.l(nodes);\n\t\t\tnodes.forEach(detach);\n\t\t} else {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t$$.fragment && $$.fragment.c();\n\t\t}\n\t\tif (options.intro) transition_in(component.$$.fragment);\n\t\tmount_component(component, options.target, options.anchor);\n\t\tend_hydrating();\n\t\tflush();\n\t}\n\tset_current_component(parent_component);\n}\n\nexport let SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n\tSvelteElement = class extends HTMLElement {\n\t\t/** The Svelte component constructor */\n\t\t$$ctor;\n\t\t/** Slots */\n\t\t$$s;\n\t\t/** The Svelte component instance */\n\t\t$$c;\n\t\t/** Whether or not the custom element is connected */\n\t\t$$cn = false;\n\t\t/** Component props data */\n\t\t$$d = {};\n\t\t/** `true` if currently in the process of reflecting component props back to attributes */\n\t\t$$r = false;\n\t\t/** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */\n\t\t$$p_d = {};\n\t\t/** @type {Record<string, Function[]>} Event listeners */\n\t\t$$l = {};\n\t\t/** @type {Map<Function, Function>} Event listener unsubscribe functions */\n\t\t$$l_u = new Map();\n\n\t\tconstructor($$componentCtor, $$slots, use_shadow_dom) {\n\t\t\tsuper();\n\t\t\tthis.$$ctor = $$componentCtor;\n\t\t\tthis.$$s = $$slots;\n\t\t\tif (use_shadow_dom) {\n\t\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\t}\n\t\t}\n\n\t\taddEventListener(type, listener, options) {\n\t\t\t// We can't determine upfront if the event is a custom event or not, so we have to\n\t\t\t// listen to both. If someone uses a custom event with the same name as a regular\n\t\t\t// browser event, this fires twice - we can't avoid that.\n\t\t\tthis.$$l[type] = this.$$l[type] || [];\n\t\t\tthis.$$l[type].push(listener);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t}\n\t\t\tsuper.addEventListener(type, listener, options);\n\t\t}\n\n\t\tremoveEventListener(type, listener, options) {\n\t\t\tsuper.removeEventListener(type, listener, options);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$l_u.get(listener);\n\t\t\t\tif (unsub) {\n\t\t\t\t\tunsub();\n\t\t\t\t\tthis.$$l_u.delete(listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync connectedCallback() {\n\t\t\tthis.$$cn = true;\n\t\t\tif (!this.$$c) {\n\t\t\t\t// We wait one tick to let possible child slot elements be created/mounted\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tif (!this.$$cn || this.$$c) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfunction create_slot(name) {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tlet node;\n\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t\tc: function create() {\n\t\t\t\t\t\t\t\tnode = element('slot');\n\t\t\t\t\t\t\t\tif (name !== 'default') {\n\t\t\t\t\t\t\t\t\tattr(node, 'name', name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @param {HTMLElement} target\n\t\t\t\t\t\t\t * @param {HTMLElement} [anchor]\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tm: function mount(target, anchor) {\n\t\t\t\t\t\t\t\tinsert(target, node, anchor);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\td: function destroy(detaching) {\n\t\t\t\t\t\t\t\tif (detaching) {\n\t\t\t\t\t\t\t\t\tdetach(node);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst $$slots = {};\n\t\t\t\tconst existing_slots = get_custom_elements_slots(this);\n\t\t\t\tfor (const name of this.$$s) {\n\t\t\t\t\tif (name in existing_slots) {\n\t\t\t\t\t\t$$slots[name] = [create_slot(name)];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\t// this.$$data takes precedence over this.attributes\n\t\t\t\t\tconst name = this.$$g_p(attribute.name);\n\t\t\t\t\tif (!(name in this.$$d)) {\n\t\t\t\t\t\tthis.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, 'toProp');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Port over props that were set programmatically before ce was initialized\n\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\tif (!(key in this.$$d) && this[key] !== undefined) {\n\t\t\t\t\t\tthis.$$d[key] = this[key]; // don't transform, these were set through JavaScript\n\t\t\t\t\t\tdelete this[key]; // remove the property that shadows the getter/setter\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$c = new this.$$ctor({\n\t\t\t\t\ttarget: this.shadowRoot || this,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...this.$$d,\n\t\t\t\t\t\t$$slots,\n\t\t\t\t\t\t$$scope: {\n\t\t\t\t\t\t\tctx: []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Reflect component props as attributes\n\t\t\t\tconst reflect_attributes = () => {\n\t\t\t\t\tthis.$$r = true;\n\t\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\t\tthis.$$d[key] = this.$$c.$$.ctx[this.$$c.$$.props[key]];\n\t\t\t\t\t\tif (this.$$p_d[key].reflect) {\n\t\t\t\t\t\t\tconst attribute_value = get_custom_element_value(\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tthis.$$d[key],\n\t\t\t\t\t\t\t\tthis.$$p_d,\n\t\t\t\t\t\t\t\t'toAttribute'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (attribute_value == null) {\n\t\t\t\t\t\t\t\tthis.removeAttribute(this.$$p_d[key].attribute || key);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setAttribute(this.$$p_d[key].attribute || key, attribute_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.$$r = false;\n\t\t\t\t};\n\t\t\t\tthis.$$c.$$.after_update.push(reflect_attributes);\n\t\t\t\treflect_attributes(); // once initially because after_update is added too late for first render\n\n\t\t\t\tfor (const type in this.$$l) {\n\t\t\t\t\tfor (const listener of this.$$l[type]) {\n\t\t\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$l = {};\n\t\t\t}\n\t\t}\n\n\t\t// We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte\n\t\t// and setting attributes through setAttribute etc, this is helpful\n\t\tattributeChangedCallback(attr, _oldValue, newValue) {\n\t\t\tif (this.$$r) return;\n\t\t\tattr = this.$$g_p(attr);\n\t\t\tthis.$$d[attr] = get_custom_element_value(attr, newValue, this.$$p_d, 'toProp');\n\t\t\tthis.$$c?.$set({ [attr]: this.$$d[attr] });\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.$$cn = false;\n\t\t\t// In a microtask, because this could be a move within the DOM\n\t\t\tPromise.resolve().then(() => {\n\t\t\t\tif (!this.$$cn) {\n\t\t\t\t\tthis.$$c.$destroy();\n\t\t\t\t\tthis.$$c = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$$g_p(attribute_name) {\n\t\t\treturn (\n\t\t\t\tObject.keys(this.$$p_d).find(\n\t\t\t\t\t(key) =>\n\t\t\t\t\t\tthis.$$p_d[key].attribute === attribute_name ||\n\t\t\t\t\t\t(!this.$$p_d[key].attribute && key.toLowerCase() === attribute_name)\n\t\t\t\t) || attribute_name\n\t\t\t);\n\t\t}\n\t};\n}\n\n/**\n * @param {string} prop\n * @param {any} value\n * @param {Record<string, CustomElementPropDefinition>} props_definition\n * @param {'toAttribute' | 'toProp'} [transform]\n */\nfunction get_custom_element_value(prop, value, props_definition, transform) {\n\tconst type = props_definition[prop]?.type;\n\tvalue = type === 'Boolean' && typeof value !== 'boolean' ? value != null : value;\n\tif (!transform || !props_definition[prop]) {\n\t\treturn value;\n\t} else if (transform === 'toAttribute') {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value == null ? null : JSON.stringify(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value ? '' : null;\n\t\t\tcase 'Number':\n\t\t\t\treturn value == null ? null : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t} else {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value && JSON.parse(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value; // conversion already handled above\n\t\t\tcase 'Number':\n\t\t\t\treturn value != null ? +value : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t}\n}\n\n/**\n * @internal\n *\n * Turn a Svelte component into a custom element.\n * @param {import('./public.js').ComponentType} Component  A Svelte component constructor\n * @param {Record<string, CustomElementPropDefinition>} props_definition  The props to observe\n * @param {string[]} slots  The slots to create\n * @param {string[]} accessors  Other accessors besides the ones for props the component has\n * @param {boolean} use_shadow_dom  Whether to use shadow DOM\n * @param {(ce: new () => HTMLElement) => new () => HTMLElement} [extend]\n */\nexport function create_custom_element(\n\tComponent,\n\tprops_definition,\n\tslots,\n\taccessors,\n\tuse_shadow_dom,\n\textend\n) {\n\tlet Class = class extends SvelteElement {\n\t\tconstructor() {\n\t\t\tsuper(Component, slots, use_shadow_dom);\n\t\t\tthis.$$p_d = props_definition;\n\t\t}\n\t\tstatic get observedAttributes() {\n\t\t\treturn Object.keys(props_definition).map((key) =>\n\t\t\t\t(props_definition[key].attribute || key).toLowerCase()\n\t\t\t);\n\t\t}\n\t};\n\tObject.keys(props_definition).forEach((prop) => {\n\t\tObject.defineProperty(Class.prototype, prop, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c && prop in this.$$c ? this.$$c[prop] : this.$$d[prop];\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tvalue = get_custom_element_value(prop, value, props_definition);\n\t\t\t\tthis.$$d[prop] = value;\n\t\t\t\tthis.$$c?.$set({ [prop]: value });\n\t\t\t}\n\t\t});\n\t});\n\taccessors.forEach((accessor) => {\n\t\tObject.defineProperty(Class.prototype, accessor, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c?.[accessor];\n\t\t\t}\n\t\t});\n\t});\n\tif (extend) {\n\t\t// @ts-expect-error - assigning here is fine\n\t\tClass = extend(Class);\n\t}\n\tComponent.element = /** @type {any} */ (Class);\n\treturn Class;\n}\n\n/**\n * Base class for Svelte components. Used when dev=false.\n *\n * @template {Record<string, any>} [Props=any]\n * @template {Record<string, any>} [Events=any]\n */\nexport class SvelteComponent {\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$ = undefined;\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$set = undefined;\n\n\t/** @returns {void} */\n\t$destroy() {\n\t\tdestroy_component(this, 1);\n\t\tthis.$destroy = noop;\n\t}\n\n\t/**\n\t * @template {Extract<keyof Events, string>} K\n\t * @param {K} type\n\t * @param {((e: Events[K]) => void) | null | undefined} callback\n\t * @returns {() => void}\n\t */\n\t$on(type, callback) {\n\t\tif (!is_function(callback)) {\n\t\t\treturn noop;\n\t\t}\n\t\tconst callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n\t\tcallbacks.push(callback);\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t/**\n\t * @param {Partial<Props>} props\n\t * @returns {void}\n\t */\n\t$set(props) {\n\t\tif (this.$$set && !is_empty(props)) {\n\t\t\tthis.$$.skip_bound = true;\n\t\t\tthis.$$set(props);\n\t\t\tthis.$$.skip_bound = false;\n\t\t}\n\t}\n}\n\n/**\n * @typedef {Object} CustomElementPropDefinition\n * @property {string} [attribute]\n * @property {boolean} [reflect]\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\n */\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n *\n * https://svelte.dev/docs/svelte-compiler#svelte-version\n * @type {string}\n */\nexport const VERSION = '4.2.15';\nexport const PUBLIC_VERSION = '4';\n","import { PUBLIC_VERSION } from '../../../shared/version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);\n","\"use strict\";\nvar ExtensionType = /* @__PURE__ */ ((ExtensionType2) => {\n  ExtensionType2[\"Application\"] = \"application\";\n  ExtensionType2[\"WebGLPipes\"] = \"webgl-pipes\";\n  ExtensionType2[\"WebGLPipesAdaptor\"] = \"webgl-pipes-adaptor\";\n  ExtensionType2[\"WebGLSystem\"] = \"webgl-system\";\n  ExtensionType2[\"WebGPUPipes\"] = \"webgpu-pipes\";\n  ExtensionType2[\"WebGPUPipesAdaptor\"] = \"webgpu-pipes-adaptor\";\n  ExtensionType2[\"WebGPUSystem\"] = \"webgpu-system\";\n  ExtensionType2[\"CanvasSystem\"] = \"canvas-system\";\n  ExtensionType2[\"CanvasPipesAdaptor\"] = \"canvas-pipes-adaptor\";\n  ExtensionType2[\"CanvasPipes\"] = \"canvas-pipes\";\n  ExtensionType2[\"Asset\"] = \"asset\";\n  ExtensionType2[\"LoadParser\"] = \"load-parser\";\n  ExtensionType2[\"ResolveParser\"] = \"resolve-parser\";\n  ExtensionType2[\"CacheParser\"] = \"cache-parser\";\n  ExtensionType2[\"DetectionParser\"] = \"detection-parser\";\n  ExtensionType2[\"MaskEffect\"] = \"mask-effect\";\n  ExtensionType2[\"BlendMode\"] = \"blend-mode\";\n  ExtensionType2[\"TextureSource\"] = \"texture-source\";\n  ExtensionType2[\"Environment\"] = \"environment\";\n  return ExtensionType2;\n})(ExtensionType || {});\nconst normalizeExtension = (ext) => {\n  if (typeof ext === \"function\" || typeof ext === \"object\" && ext.extension) {\n    if (!ext.extension) {\n      throw new Error(\"Extension class must have an extension object\");\n    }\n    const metadata = typeof ext.extension !== \"object\" ? { type: ext.extension } : ext.extension;\n    ext = { ...metadata, ref: ext };\n  }\n  if (typeof ext === \"object\") {\n    ext = { ...ext };\n  } else {\n    throw new Error(\"Invalid extension type\");\n  }\n  if (typeof ext.type === \"string\") {\n    ext.type = [ext.type];\n  }\n  return ext;\n};\nconst normalizeExtensionPriority = (ext, defaultPriority) => normalizeExtension(ext).priority ?? defaultPriority;\nconst extensions = {\n  /** @ignore */\n  _addHandlers: {},\n  /** @ignore */\n  _removeHandlers: {},\n  /** @ignore */\n  _queue: {},\n  /**\n   * Remove extensions from PixiJS.\n   * @param extensions - Extensions to be removed.\n   * @returns {extensions} For chaining.\n   */\n  remove(...extensions2) {\n    extensions2.map(normalizeExtension).forEach((ext) => {\n      ext.type.forEach((type) => this._removeHandlers[type]?.(ext));\n    });\n    return this;\n  },\n  /**\n   * Register new extensions with PixiJS.\n   * @param extensions - The spread of extensions to add to PixiJS.\n   * @returns {extensions} For chaining.\n   */\n  add(...extensions2) {\n    extensions2.map(normalizeExtension).forEach((ext) => {\n      ext.type.forEach((type) => {\n        const handlers = this._addHandlers;\n        const queue = this._queue;\n        if (!handlers[type]) {\n          queue[type] = queue[type] || [];\n          queue[type]?.push(ext);\n        } else {\n          handlers[type]?.(ext);\n        }\n      });\n    });\n    return this;\n  },\n  /**\n   * Internal method to handle extensions by name.\n   * @param type - The extension type.\n   * @param onAdd  - Function handler when extensions are added/registered {@link StrictExtensionFormat}.\n   * @param onRemove  - Function handler when extensions are removed/unregistered {@link StrictExtensionFormat}.\n   * @returns {extensions} For chaining.\n   */\n  handle(type, onAdd, onRemove) {\n    const addHandlers = this._addHandlers;\n    const removeHandlers = this._removeHandlers;\n    if (addHandlers[type] || removeHandlers[type]) {\n      throw new Error(`Extension type ${type} already has a handler`);\n    }\n    addHandlers[type] = onAdd;\n    removeHandlers[type] = onRemove;\n    const queue = this._queue;\n    if (queue[type]) {\n      queue[type]?.forEach((ext) => onAdd(ext));\n      delete queue[type];\n    }\n    return this;\n  },\n  /**\n   * Handle a type, but using a map by `name` property.\n   * @param type - Type of extension to handle.\n   * @param map - The object map of named extensions.\n   * @returns {extensions} For chaining.\n   */\n  handleByMap(type, map) {\n    return this.handle(\n      type,\n      (extension) => {\n        if (extension.name) {\n          map[extension.name] = extension.ref;\n        }\n      },\n      (extension) => {\n        if (extension.name) {\n          delete map[extension.name];\n        }\n      }\n    );\n  },\n  /**\n   * Handle a type, but using a list of extensions with a `name` property.\n   * @param type - Type of extension to handle.\n   * @param map - The array of named extensions.\n   * @param defaultPriority - Fallback priority if none is defined.\n   * @returns {extensions} For chaining.\n   */\n  handleByNamedList(type, map, defaultPriority = -1) {\n    return this.handle(\n      type,\n      (extension) => {\n        const index = map.findIndex((item) => item.name === extension.name);\n        if (index >= 0)\n          return;\n        map.push({ name: extension.name, value: extension.ref });\n        map.sort((a, b) => normalizeExtensionPriority(b.value, defaultPriority) - normalizeExtensionPriority(a.value, defaultPriority));\n      },\n      (extension) => {\n        const index = map.findIndex((item) => item.name === extension.name);\n        if (index !== -1) {\n          map.splice(index, 1);\n        }\n      }\n    );\n  },\n  /**\n   * Handle a type, but using a list of extensions.\n   * @param type - Type of extension to handle.\n   * @param list - The list of extensions.\n   * @param defaultPriority - The default priority to use if none is specified.\n   * @returns {extensions} For chaining.\n   */\n  handleByList(type, list, defaultPriority = -1) {\n    return this.handle(\n      type,\n      (extension) => {\n        if (list.includes(extension.ref)) {\n          return;\n        }\n        list.push(extension.ref);\n        list.sort((a, b) => normalizeExtensionPriority(b, defaultPriority) - normalizeExtensionPriority(a, defaultPriority));\n      },\n      (extension) => {\n        const index = list.indexOf(extension.ref);\n        if (index !== -1) {\n          list.splice(index, 1);\n        }\n      }\n    );\n  }\n};\n\nexport { ExtensionType, extensions, normalizeExtensionPriority };\n//# sourceMappingURL=Extensions.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst browserExt = {\n  extension: {\n    type: ExtensionType.Environment,\n    name: \"browser\",\n    priority: -1\n  },\n  test: () => true,\n  load: async () => {\n    await import('./browserAll.mjs');\n  }\n};\n\nexport { browserExt };\n//# sourceMappingURL=browserExt.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst webworkerExt = {\n  extension: {\n    type: ExtensionType.Environment,\n    name: \"webworker\",\n    priority: 0\n  },\n  test: () => typeof self !== \"undefined\" && self.WorkerGlobalScope !== void 0,\n  load: async () => {\n    await import('./webworkerAll.mjs');\n  }\n};\n\nexport { webworkerExt };\n//# sourceMappingURL=webworkerExt.mjs.map\n","\"use strict\";\nclass ObservablePoint {\n  /**\n   * Creates a new `ObservablePoint`\n   * @param observer - Observer to pass to listen for change events.\n   * @param {number} [x=0] - position of the point on the x axis\n   * @param {number} [y=0] - position of the point on the y axis\n   */\n  constructor(observer, x, y) {\n    this._x = x || 0;\n    this._y = y || 0;\n    this._observer = observer;\n  }\n  /**\n   * Creates a clone of this point.\n   * @param observer - Optional observer to pass to the new observable point.\n   * @returns a copy of this observable point\n   */\n  clone(observer) {\n    return new ObservablePoint(observer ?? this._observer, this._x, this._y);\n  }\n  /**\n   * Sets the point to a new `x` and `y` position.\n   * If `y` is omitted, both `x` and `y` will be set to `x`.\n   * @param {number} [x=0] - position of the point on the x axis\n   * @param {number} [y=x] - position of the point on the y axis\n   * @returns The observable point instance itself\n   */\n  set(x = 0, y = x) {\n    if (this._x !== x || this._y !== y) {\n      this._x = x;\n      this._y = y;\n      this._observer._onUpdate(this);\n    }\n    return this;\n  }\n  /**\n   * Copies x and y from the given point (`p`)\n   * @param p - The point to copy from. Can be any of type that is or extends `PointData`\n   * @returns The observable point instance itself\n   */\n  copyFrom(p) {\n    if (this._x !== p.x || this._y !== p.y) {\n      this._x = p.x;\n      this._y = p.y;\n      this._observer._onUpdate(this);\n    }\n    return this;\n  }\n  /**\n   * Copies this point's x and y into that of the given point (`p`)\n   * @param p - The point to copy to. Can be any of type that is or extends `PointData`\n   * @returns The point (`p`) with values updated\n   */\n  copyTo(p) {\n    p.set(this._x, this._y);\n    return p;\n  }\n  /**\n   * Accepts another point (`p`) and returns `true` if the given point is equal to this point\n   * @param p - The point to check\n   * @returns Returns `true` if both `x` and `y` are equal\n   */\n  equals(p) {\n    return p.x === this._x && p.y === this._y;\n  }\n  toString() {\n    return `[pixi.js/math:ObservablePoint x=${0} y=${0} scope=${this._observer}]`;\n  }\n  /** Position of the observable point on the x axis. */\n  get x() {\n    return this._x;\n  }\n  set x(value) {\n    if (this._x !== value) {\n      this._x = value;\n      this._observer._onUpdate(this);\n    }\n  }\n  /** Position of the observable point on the y axis. */\n  get y() {\n    return this._y;\n  }\n  set y(value) {\n    if (this._y !== value) {\n      this._y = value;\n      this._observer._onUpdate(this);\n    }\n  }\n}\n\nexport { ObservablePoint };\n//# sourceMappingURL=ObservablePoint.mjs.map\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","\"use strict\";\nconst PI_2 = Math.PI * 2;\nconst RAD_TO_DEG = 180 / Math.PI;\nconst DEG_TO_RAD = Math.PI / 180;\n\nexport { DEG_TO_RAD, PI_2, RAD_TO_DEG };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nclass Point {\n  /**\n   * Creates a new `Point`\n   * @param {number} [x=0] - position of the point on the x axis\n   * @param {number} [y=0] - position of the point on the y axis\n   */\n  constructor(x = 0, y = 0) {\n    /** Position of the point on the x axis */\n    this.x = 0;\n    /** Position of the point on the y axis */\n    this.y = 0;\n    this.x = x;\n    this.y = y;\n  }\n  /**\n   * Creates a clone of this point\n   * @returns A clone of this point\n   */\n  clone() {\n    return new Point(this.x, this.y);\n  }\n  /**\n   * Copies `x` and `y` from the given point into this point\n   * @param p - The point to copy from\n   * @returns The point instance itself\n   */\n  copyFrom(p) {\n    this.set(p.x, p.y);\n    return this;\n  }\n  /**\n   * Copies this point's x and y into the given point (`p`).\n   * @param p - The point to copy to. Can be any of type that is or extends `PointData`\n   * @returns The point (`p`) with values updated\n   */\n  copyTo(p) {\n    p.set(this.x, this.y);\n    return p;\n  }\n  /**\n   * Accepts another point (`p`) and returns `true` if the given point is equal to this point\n   * @param p - The point to check\n   * @returns Returns `true` if both `x` and `y` are equal\n   */\n  equals(p) {\n    return p.x === this.x && p.y === this.y;\n  }\n  /**\n   * Sets the point to a new `x` and `y` position.\n   * If `y` is omitted, both `x` and `y` will be set to `x`.\n   * @param {number} [x=0] - position of the point on the `x` axis\n   * @param {number} [y=x] - position of the point on the `y` axis\n   * @returns The point instance itself\n   */\n  set(x = 0, y = x) {\n    this.x = x;\n    this.y = y;\n    return this;\n  }\n  toString() {\n    return `[pixi.js/math:Point x=${this.x} y=${this.y}]`;\n  }\n  /**\n   * A static Point object with `x` and `y` values of `0`. Can be used to avoid creating new objects multiple times.\n   * @readonly\n   */\n  static get shared() {\n    tempPoint.x = 0;\n    tempPoint.y = 0;\n    return tempPoint;\n  }\n}\nconst tempPoint = new Point();\n\nexport { Point };\n//# sourceMappingURL=Point.mjs.map\n","import { PI_2 } from '../misc/const.mjs';\nimport { Point } from '../point/Point.mjs';\n\n\"use strict\";\nclass Matrix {\n  /**\n   * @param a - x scale\n   * @param b - y skew\n   * @param c - x skew\n   * @param d - y scale\n   * @param tx - x translation\n   * @param ty - y translation\n   */\n  constructor(a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0) {\n    /** An array of the current matrix. Only populated when `toArray` is called */\n    this.array = null;\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n    this.tx = tx;\n    this.ty = ty;\n  }\n  /**\n   * Creates a Matrix object based on the given array. The Element to Matrix mapping order is as follows:\n   *\n   * a = array[0]\n   * b = array[1]\n   * c = array[3]\n   * d = array[4]\n   * tx = array[2]\n   * ty = array[5]\n   * @param array - The array that the matrix will be populated from.\n   */\n  fromArray(array) {\n    this.a = array[0];\n    this.b = array[1];\n    this.c = array[3];\n    this.d = array[4];\n    this.tx = array[2];\n    this.ty = array[5];\n  }\n  /**\n   * Sets the matrix properties.\n   * @param a - Matrix component\n   * @param b - Matrix component\n   * @param c - Matrix component\n   * @param d - Matrix component\n   * @param tx - Matrix component\n   * @param ty - Matrix component\n   * @returns This matrix. Good for chaining method calls.\n   */\n  set(a, b, c, d, tx, ty) {\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n    this.tx = tx;\n    this.ty = ty;\n    return this;\n  }\n  /**\n   * Creates an array from the current Matrix object.\n   * @param transpose - Whether we need to transpose the matrix or not\n   * @param [out=new Float32Array(9)] - If provided the array will be assigned to out\n   * @returns The newly created array which contains the matrix\n   */\n  toArray(transpose, out) {\n    if (!this.array) {\n      this.array = new Float32Array(9);\n    }\n    const array = out || this.array;\n    if (transpose) {\n      array[0] = this.a;\n      array[1] = this.b;\n      array[2] = 0;\n      array[3] = this.c;\n      array[4] = this.d;\n      array[5] = 0;\n      array[6] = this.tx;\n      array[7] = this.ty;\n      array[8] = 1;\n    } else {\n      array[0] = this.a;\n      array[1] = this.c;\n      array[2] = this.tx;\n      array[3] = this.b;\n      array[4] = this.d;\n      array[5] = this.ty;\n      array[6] = 0;\n      array[7] = 0;\n      array[8] = 1;\n    }\n    return array;\n  }\n  /**\n   * Get a new position with the current transformation applied.\n   * Can be used to go from a child's coordinate space to the world coordinate space. (e.g. rendering)\n   * @param pos - The origin\n   * @param {Point} [newPos] - The point that the new position is assigned to (allowed to be same as input)\n   * @returns {Point} The new point, transformed through this matrix\n   */\n  apply(pos, newPos) {\n    newPos = newPos || new Point();\n    const x = pos.x;\n    const y = pos.y;\n    newPos.x = this.a * x + this.c * y + this.tx;\n    newPos.y = this.b * x + this.d * y + this.ty;\n    return newPos;\n  }\n  /**\n   * Get a new position with the inverse of the current transformation applied.\n   * Can be used to go from the world coordinate space to a child's coordinate space. (e.g. input)\n   * @param pos - The origin\n   * @param {Point} [newPos] - The point that the new position is assigned to (allowed to be same as input)\n   * @returns {Point} The new point, inverse-transformed through this matrix\n   */\n  applyInverse(pos, newPos) {\n    newPos = newPos || new Point();\n    const a = this.a;\n    const b = this.b;\n    const c = this.c;\n    const d = this.d;\n    const tx = this.tx;\n    const ty = this.ty;\n    const id = 1 / (a * d + c * -b);\n    const x = pos.x;\n    const y = pos.y;\n    newPos.x = d * id * x + -c * id * y + (ty * c - tx * d) * id;\n    newPos.y = a * id * y + -b * id * x + (-ty * a + tx * b) * id;\n    return newPos;\n  }\n  /**\n   * Translates the matrix on the x and y.\n   * @param x - How much to translate x by\n   * @param y - How much to translate y by\n   * @returns This matrix. Good for chaining method calls.\n   */\n  translate(x, y) {\n    this.tx += x;\n    this.ty += y;\n    return this;\n  }\n  /**\n   * Applies a scale transformation to the matrix.\n   * @param x - The amount to scale horizontally\n   * @param y - The amount to scale vertically\n   * @returns This matrix. Good for chaining method calls.\n   */\n  scale(x, y) {\n    this.a *= x;\n    this.d *= y;\n    this.c *= x;\n    this.b *= y;\n    this.tx *= x;\n    this.ty *= y;\n    return this;\n  }\n  /**\n   * Applies a rotation transformation to the matrix.\n   * @param angle - The angle in radians.\n   * @returns This matrix. Good for chaining method calls.\n   */\n  rotate(angle) {\n    const cos = Math.cos(angle);\n    const sin = Math.sin(angle);\n    const a1 = this.a;\n    const c1 = this.c;\n    const tx1 = this.tx;\n    this.a = a1 * cos - this.b * sin;\n    this.b = a1 * sin + this.b * cos;\n    this.c = c1 * cos - this.d * sin;\n    this.d = c1 * sin + this.d * cos;\n    this.tx = tx1 * cos - this.ty * sin;\n    this.ty = tx1 * sin + this.ty * cos;\n    return this;\n  }\n  /**\n   * Appends the given Matrix to this Matrix.\n   * @param matrix - The matrix to append.\n   * @returns This matrix. Good for chaining method calls.\n   */\n  append(matrix) {\n    const a1 = this.a;\n    const b1 = this.b;\n    const c1 = this.c;\n    const d1 = this.d;\n    this.a = matrix.a * a1 + matrix.b * c1;\n    this.b = matrix.a * b1 + matrix.b * d1;\n    this.c = matrix.c * a1 + matrix.d * c1;\n    this.d = matrix.c * b1 + matrix.d * d1;\n    this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;\n    this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;\n    return this;\n  }\n  /**\n   * Appends two matrix's and sets the result to this matrix. AB = A * B\n   * @param a - The matrix to append.\n   * @param b - The matrix to append.\n   * @returns This matrix. Good for chaining method calls.\n   */\n  appendFrom(a, b) {\n    const a1 = a.a;\n    const b1 = a.b;\n    const c1 = a.c;\n    const d1 = a.d;\n    const tx = a.tx;\n    const ty = a.ty;\n    const a2 = b.a;\n    const b2 = b.b;\n    const c2 = b.c;\n    const d2 = b.d;\n    this.a = a1 * a2 + b1 * c2;\n    this.b = a1 * b2 + b1 * d2;\n    this.c = c1 * a2 + d1 * c2;\n    this.d = c1 * b2 + d1 * d2;\n    this.tx = tx * a2 + ty * c2 + b.tx;\n    this.ty = tx * b2 + ty * d2 + b.ty;\n    return this;\n  }\n  /**\n   * Sets the matrix based on all the available properties\n   * @param x - Position on the x axis\n   * @param y - Position on the y axis\n   * @param pivotX - Pivot on the x axis\n   * @param pivotY - Pivot on the y axis\n   * @param scaleX - Scale on the x axis\n   * @param scaleY - Scale on the y axis\n   * @param rotation - Rotation in radians\n   * @param skewX - Skew on the x axis\n   * @param skewY - Skew on the y axis\n   * @returns This matrix. Good for chaining method calls.\n   */\n  setTransform(x, y, pivotX, pivotY, scaleX, scaleY, rotation, skewX, skewY) {\n    this.a = Math.cos(rotation + skewY) * scaleX;\n    this.b = Math.sin(rotation + skewY) * scaleX;\n    this.c = -Math.sin(rotation - skewX) * scaleY;\n    this.d = Math.cos(rotation - skewX) * scaleY;\n    this.tx = x - (pivotX * this.a + pivotY * this.c);\n    this.ty = y - (pivotX * this.b + pivotY * this.d);\n    return this;\n  }\n  /**\n   * Prepends the given Matrix to this Matrix.\n   * @param matrix - The matrix to prepend\n   * @returns This matrix. Good for chaining method calls.\n   */\n  prepend(matrix) {\n    const tx1 = this.tx;\n    if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\n      const a1 = this.a;\n      const c1 = this.c;\n      this.a = a1 * matrix.a + this.b * matrix.c;\n      this.b = a1 * matrix.b + this.b * matrix.d;\n      this.c = c1 * matrix.a + this.d * matrix.c;\n      this.d = c1 * matrix.b + this.d * matrix.d;\n    }\n    this.tx = tx1 * matrix.a + this.ty * matrix.c + matrix.tx;\n    this.ty = tx1 * matrix.b + this.ty * matrix.d + matrix.ty;\n    return this;\n  }\n  /**\n   * Decomposes the matrix (x, y, scaleX, scaleY, and rotation) and sets the properties on to a transform.\n   * @param transform - The transform to apply the properties to.\n   * @returns The transform with the newly applied properties\n   */\n  decompose(transform) {\n    const a = this.a;\n    const b = this.b;\n    const c = this.c;\n    const d = this.d;\n    const pivot = transform.pivot;\n    const skewX = -Math.atan2(-c, d);\n    const skewY = Math.atan2(b, a);\n    const delta = Math.abs(skewX + skewY);\n    if (delta < 1e-5 || Math.abs(PI_2 - delta) < 1e-5) {\n      transform.rotation = skewY;\n      transform.skew.x = transform.skew.y = 0;\n    } else {\n      transform.rotation = 0;\n      transform.skew.x = skewX;\n      transform.skew.y = skewY;\n    }\n    transform.scale.x = Math.sqrt(a * a + b * b);\n    transform.scale.y = Math.sqrt(c * c + d * d);\n    transform.position.x = this.tx + (pivot.x * a + pivot.y * c);\n    transform.position.y = this.ty + (pivot.x * b + pivot.y * d);\n    return transform;\n  }\n  /**\n   * Inverts this matrix\n   * @returns This matrix. Good for chaining method calls.\n   */\n  invert() {\n    const a1 = this.a;\n    const b1 = this.b;\n    const c1 = this.c;\n    const d1 = this.d;\n    const tx1 = this.tx;\n    const n = a1 * d1 - b1 * c1;\n    this.a = d1 / n;\n    this.b = -b1 / n;\n    this.c = -c1 / n;\n    this.d = a1 / n;\n    this.tx = (c1 * this.ty - d1 * tx1) / n;\n    this.ty = -(a1 * this.ty - b1 * tx1) / n;\n    return this;\n  }\n  /** Checks if this matrix is an identity matrix */\n  isIdentity() {\n    return this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1 && this.tx === 0 && this.ty === 0;\n  }\n  /**\n   * Resets this Matrix to an identity (default) matrix.\n   * @returns This matrix. Good for chaining method calls.\n   */\n  identity() {\n    this.a = 1;\n    this.b = 0;\n    this.c = 0;\n    this.d = 1;\n    this.tx = 0;\n    this.ty = 0;\n    return this;\n  }\n  /**\n   * Creates a new Matrix object with the same values as this one.\n   * @returns A copy of this matrix. Good for chaining method calls.\n   */\n  clone() {\n    const matrix = new Matrix();\n    matrix.a = this.a;\n    matrix.b = this.b;\n    matrix.c = this.c;\n    matrix.d = this.d;\n    matrix.tx = this.tx;\n    matrix.ty = this.ty;\n    return matrix;\n  }\n  /**\n   * Changes the values of the given matrix to be the same as the ones in this matrix\n   * @param matrix - The matrix to copy to.\n   * @returns The matrix given in parameter with its values updated.\n   */\n  copyTo(matrix) {\n    matrix.a = this.a;\n    matrix.b = this.b;\n    matrix.c = this.c;\n    matrix.d = this.d;\n    matrix.tx = this.tx;\n    matrix.ty = this.ty;\n    return matrix;\n  }\n  /**\n   * Changes the values of the matrix to be the same as the ones in given matrix\n   * @param matrix - The matrix to copy from.\n   * @returns this\n   */\n  copyFrom(matrix) {\n    this.a = matrix.a;\n    this.b = matrix.b;\n    this.c = matrix.c;\n    this.d = matrix.d;\n    this.tx = matrix.tx;\n    this.ty = matrix.ty;\n    return this;\n  }\n  /**\n   * check to see if two matrices are the same\n   * @param matrix - The matrix to compare to.\n   */\n  equals(matrix) {\n    return matrix.a === this.a && matrix.b === this.b && matrix.c === this.c && matrix.d === this.d && matrix.tx === this.tx && matrix.ty === this.ty;\n  }\n  toString() {\n    return `[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`;\n  }\n  /**\n   * A default (identity) matrix.\n   *\n   * This is a shared object, if you want to modify it consider creating a new `Matrix`\n   * @readonly\n   */\n  static get IDENTITY() {\n    return identityMatrix.identity();\n  }\n  /**\n   * A static Matrix that can be used to avoid creating new objects.\n   * Will always ensure the matrix is reset to identity when requested.\n   * Use this object for fast but temporary calculations, as it may be mutated later on.\n   * This is a different object to the `IDENTITY` object and so can be modified without changing `IDENTITY`.\n   * @readonly\n   */\n  static get shared() {\n    return tempMatrix.identity();\n  }\n}\nconst tempMatrix = new Matrix();\nconst identityMatrix = new Matrix();\n\nexport { Matrix };\n//# sourceMappingURL=Matrix.mjs.map\n","import { Matrix } from './Matrix.mjs';\n\n\"use strict\";\nconst ux = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1];\nconst uy = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1];\nconst vx = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1];\nconst vy = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1];\nconst rotationCayley = [];\nconst rotationMatrices = [];\nconst signum = Math.sign;\nfunction init() {\n  for (let i = 0; i < 16; i++) {\n    const row = [];\n    rotationCayley.push(row);\n    for (let j = 0; j < 16; j++) {\n      const _ux = signum(ux[i] * ux[j] + vx[i] * uy[j]);\n      const _uy = signum(uy[i] * ux[j] + vy[i] * uy[j]);\n      const _vx = signum(ux[i] * vx[j] + vx[i] * vy[j]);\n      const _vy = signum(uy[i] * vx[j] + vy[i] * vy[j]);\n      for (let k = 0; k < 16; k++) {\n        if (ux[k] === _ux && uy[k] === _uy && vx[k] === _vx && vy[k] === _vy) {\n          row.push(k);\n          break;\n        }\n      }\n    }\n  }\n  for (let i = 0; i < 16; i++) {\n    const mat = new Matrix();\n    mat.set(ux[i], uy[i], vx[i], vy[i], 0, 0);\n    rotationMatrices.push(mat);\n  }\n}\ninit();\nconst groupD8 = {\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 0       | East      |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  E: 0,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 45     | Southeast |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  SE: 1,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 90     | South     |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  S: 2,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 135    | Southwest |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  SW: 3,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 180     | West      |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  W: 4,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -135/225 | Northwest    |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  NW: 5,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -90/270  | North        |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  N: 6,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -45/315  | Northeast    |\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  NE: 7,\n  /**\n   * Reflection about Y-axis.\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  MIRROR_VERTICAL: 8,\n  /**\n   * Reflection about the main diagonal.\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  MAIN_DIAGONAL: 10,\n  /**\n   * Reflection about X-axis.\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  MIRROR_HORIZONTAL: 12,\n  /**\n   * Reflection about reverse diagonal.\n   * @memberof maths.groupD8\n   * @constant {GD8Symmetry}\n   */\n  REVERSE_DIAGONAL: 14,\n  /**\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The X-component of the U-axis\n   *    after rotating the axes.\n   */\n  uX: (ind) => ux[ind],\n  /**\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The Y-component of the U-axis\n   *    after rotating the axes.\n   */\n  uY: (ind) => uy[ind],\n  /**\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The X-component of the V-axis\n   *    after rotating the axes.\n   */\n  vX: (ind) => vx[ind],\n  /**\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The Y-component of the V-axis\n   *    after rotating the axes.\n   */\n  vY: (ind) => vy[ind],\n  /**\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} rotation - symmetry whose opposite\n   *   is needed. Only rotations have opposite symmetries while\n   *   reflections don't.\n   * @returns {GD8Symmetry} The opposite symmetry of `rotation`\n   */\n  inv: (rotation) => {\n    if (rotation & 8) {\n      return rotation & 15;\n    }\n    return -rotation & 7;\n  },\n  /**\n   * Composes the two D8 operations.\n   *\n   * Taking `^` as reflection:\n   *\n   * |       | E=0 | S=2 | W=4 | N=6 | E^=8 | S^=10 | W^=12 | N^=14 |\n   * |-------|-----|-----|-----|-----|------|-------|-------|-------|\n   * | E=0   | E   | S   | W   | N   | E^   | S^    | W^    | N^    |\n   * | S=2   | S   | W   | N   | E   | S^   | W^    | N^    | E^    |\n   * | W=4   | W   | N   | E   | S   | W^   | N^    | E^    | S^    |\n   * | N=6   | N   | E   | S   | W   | N^   | E^    | S^    | W^    |\n   * | E^=8  | E^  | N^  | W^  | S^  | E    | N     | W     | S     |\n   * | S^=10 | S^  | E^  | N^  | W^  | S    | E     | N     | W     |\n   * | W^=12 | W^  | S^  | E^  | N^  | W    | S     | E     | N     |\n   * | N^=14 | N^  | W^  | S^  | E^  | N    | W     | S     | E     |\n   *\n   * [This is a Cayley table]{@link https://en.wikipedia.org/wiki/Cayley_table}\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} rotationSecond - Second operation, which\n   *   is the row in the above cayley table.\n   * @param {GD8Symmetry} rotationFirst - First operation, which\n   *   is the column in the above cayley table.\n   * @returns {GD8Symmetry} Composed operation\n   */\n  add: (rotationSecond, rotationFirst) => rotationCayley[rotationSecond][rotationFirst],\n  /**\n   * Reverse of `add`.\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} rotationSecond - Second operation\n   * @param {GD8Symmetry} rotationFirst - First operation\n   * @returns {GD8Symmetry} Result\n   */\n  sub: (rotationSecond, rotationFirst) => rotationCayley[rotationSecond][groupD8.inv(rotationFirst)],\n  /**\n   * Adds 180 degrees to rotation, which is a commutative\n   * operation.\n   * @memberof maths.groupD8\n   * @param {number} rotation - The number to rotate.\n   * @returns {number} Rotated number\n   */\n  rotate180: (rotation) => rotation ^ 4,\n  /**\n   * Checks if the rotation angle is vertical, i.e. south\n   * or north. It doesn't work for reflections.\n   * @memberof maths.groupD8\n   * @param {GD8Symmetry} rotation - The number to check.\n   * @returns {boolean} Whether or not the direction is vertical\n   */\n  isVertical: (rotation) => (rotation & 3) === 2,\n  // rotation % 4 === 2\n  /**\n   * Approximates the vector `V(dx,dy)` into one of the\n   * eight directions provided by `groupD8`.\n   * @memberof maths.groupD8\n   * @param {number} dx - X-component of the vector\n   * @param {number} dy - Y-component of the vector\n   * @returns {GD8Symmetry} Approximation of the vector into\n   *  one of the eight symmetries.\n   */\n  byDirection: (dx, dy) => {\n    if (Math.abs(dx) * 2 <= Math.abs(dy)) {\n      if (dy >= 0) {\n        return groupD8.S;\n      }\n      return groupD8.N;\n    } else if (Math.abs(dy) * 2 <= Math.abs(dx)) {\n      if (dx > 0) {\n        return groupD8.E;\n      }\n      return groupD8.W;\n    } else if (dy > 0) {\n      if (dx > 0) {\n        return groupD8.SE;\n      }\n      return groupD8.SW;\n    } else if (dx > 0) {\n      return groupD8.NE;\n    }\n    return groupD8.NW;\n  },\n  /**\n   * Helps sprite to compensate texture packer rotation.\n   * @memberof maths.groupD8\n   * @param {Matrix} matrix - sprite world matrix\n   * @param {GD8Symmetry} rotation - The rotation factor to use.\n   * @param {number} tx - sprite anchoring\n   * @param {number} ty - sprite anchoring\n   */\n  matrixAppendRotationInv: (matrix, rotation, tx = 0, ty = 0) => {\n    const mat = rotationMatrices[groupD8.inv(rotation)];\n    mat.tx = tx;\n    mat.ty = ty;\n    matrix.append(mat);\n  }\n};\n\nexport { groupD8 };\n//# sourceMappingURL=groupD8.mjs.map\n","import { Point } from '../point/Point.mjs';\n\n\"use strict\";\nconst tempPoints = [new Point(), new Point(), new Point(), new Point()];\nclass Rectangle {\n  /**\n   * @param x - The X coordinate of the upper-left corner of the rectangle\n   * @param y - The Y coordinate of the upper-left corner of the rectangle\n   * @param width - The overall width of the rectangle\n   * @param height - The overall height of the rectangle\n   */\n  constructor(x = 0, y = 0, width = 0, height = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'rectangle'\n     */\n    this.type = \"rectangle\";\n    this.x = Number(x);\n    this.y = Number(y);\n    this.width = Number(width);\n    this.height = Number(height);\n  }\n  /** Returns the left edge of the rectangle. */\n  get left() {\n    return this.x;\n  }\n  /** Returns the right edge of the rectangle. */\n  get right() {\n    return this.x + this.width;\n  }\n  /** Returns the top edge of the rectangle. */\n  get top() {\n    return this.y;\n  }\n  /** Returns the bottom edge of the rectangle. */\n  get bottom() {\n    return this.y + this.height;\n  }\n  /** Determines whether the Rectangle is empty. */\n  isEmpty() {\n    return this.left === this.right || this.top === this.bottom;\n  }\n  /** A constant empty rectangle. This is a new object every time the property is accessed */\n  static get EMPTY() {\n    return new Rectangle(0, 0, 0, 0);\n  }\n  /**\n   * Creates a clone of this Rectangle\n   * @returns a copy of the rectangle\n   */\n  clone() {\n    return new Rectangle(this.x, this.y, this.width, this.height);\n  }\n  /**\n   * Converts a Bounds object to a Rectangle object.\n   * @param bounds - The bounds to copy and convert to a rectangle.\n   * @returns Returns itself.\n   */\n  copyFromBounds(bounds) {\n    this.x = bounds.minX;\n    this.y = bounds.minY;\n    this.width = bounds.maxX - bounds.minX;\n    this.height = bounds.maxY - bounds.minY;\n    return this;\n  }\n  /**\n   * Copies another rectangle to this one.\n   * @param rectangle - The rectangle to copy from.\n   * @returns Returns itself.\n   */\n  copyFrom(rectangle) {\n    this.x = rectangle.x;\n    this.y = rectangle.y;\n    this.width = rectangle.width;\n    this.height = rectangle.height;\n    return this;\n  }\n  /**\n   * Copies this rectangle to another one.\n   * @param rectangle - The rectangle to copy to.\n   * @returns Returns given parameter.\n   */\n  copyTo(rectangle) {\n    rectangle.copyFrom(this);\n    return rectangle;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this Rectangle\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this Rectangle\n   */\n  contains(x, y) {\n    if (this.width <= 0 || this.height <= 0) {\n      return false;\n    }\n    if (x >= this.x && x < this.x + this.width) {\n      if (y >= this.y && y < this.y + this.height) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this rectangle including the stroke.\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @returns Whether the x/y coordinates are within this rectangle\n   */\n  strokeContains(x, y, strokeWidth) {\n    const { width, height } = this;\n    if (width <= 0 || height <= 0)\n      return false;\n    const _x = this.x;\n    const _y = this.y;\n    const outerLeft = _x - strokeWidth / 2;\n    const outerRight = _x + width + strokeWidth / 2;\n    const outerTop = _y - strokeWidth / 2;\n    const outerBottom = _y + height + strokeWidth / 2;\n    const innerLeft = _x + strokeWidth / 2;\n    const innerRight = _x + width - strokeWidth / 2;\n    const innerTop = _y + strokeWidth / 2;\n    const innerBottom = _y + height - strokeWidth / 2;\n    return x >= outerLeft && x <= outerRight && y >= outerTop && y <= outerBottom && !(x > innerLeft && x < innerRight && y > innerTop && y < innerBottom);\n  }\n  /**\n   * Determines whether the `other` Rectangle transformed by `transform` intersects with `this` Rectangle object.\n   * Returns true only if the area of the intersection is >0, this means that Rectangles\n   * sharing a side are not overlapping. Another side effect is that an arealess rectangle\n   * (width or height equal to zero) can't intersect any other rectangle.\n   * @param {Rectangle} other - The Rectangle to intersect with `this`.\n   * @param {Matrix} transform - The transformation matrix of `other`.\n   * @returns {boolean} A value of `true` if the transformed `other` Rectangle intersects with `this`; otherwise `false`.\n   */\n  intersects(other, transform) {\n    if (!transform) {\n      const x02 = this.x < other.x ? other.x : this.x;\n      const x12 = this.right > other.right ? other.right : this.right;\n      if (x12 <= x02) {\n        return false;\n      }\n      const y02 = this.y < other.y ? other.y : this.y;\n      const y12 = this.bottom > other.bottom ? other.bottom : this.bottom;\n      return y12 > y02;\n    }\n    const x0 = this.left;\n    const x1 = this.right;\n    const y0 = this.top;\n    const y1 = this.bottom;\n    if (x1 <= x0 || y1 <= y0) {\n      return false;\n    }\n    const lt = tempPoints[0].set(other.left, other.top);\n    const lb = tempPoints[1].set(other.left, other.bottom);\n    const rt = tempPoints[2].set(other.right, other.top);\n    const rb = tempPoints[3].set(other.right, other.bottom);\n    if (rt.x <= lt.x || lb.y <= lt.y) {\n      return false;\n    }\n    const s = Math.sign(transform.a * transform.d - transform.b * transform.c);\n    if (s === 0) {\n      return false;\n    }\n    transform.apply(lt, lt);\n    transform.apply(lb, lb);\n    transform.apply(rt, rt);\n    transform.apply(rb, rb);\n    if (Math.max(lt.x, lb.x, rt.x, rb.x) <= x0 || Math.min(lt.x, lb.x, rt.x, rb.x) >= x1 || Math.max(lt.y, lb.y, rt.y, rb.y) <= y0 || Math.min(lt.y, lb.y, rt.y, rb.y) >= y1) {\n      return false;\n    }\n    const nx = s * (lb.y - lt.y);\n    const ny = s * (lt.x - lb.x);\n    const n00 = nx * x0 + ny * y0;\n    const n10 = nx * x1 + ny * y0;\n    const n01 = nx * x0 + ny * y1;\n    const n11 = nx * x1 + ny * y1;\n    if (Math.max(n00, n10, n01, n11) <= nx * lt.x + ny * lt.y || Math.min(n00, n10, n01, n11) >= nx * rb.x + ny * rb.y) {\n      return false;\n    }\n    const mx = s * (lt.y - rt.y);\n    const my = s * (rt.x - lt.x);\n    const m00 = mx * x0 + my * y0;\n    const m10 = mx * x1 + my * y0;\n    const m01 = mx * x0 + my * y1;\n    const m11 = mx * x1 + my * y1;\n    if (Math.max(m00, m10, m01, m11) <= mx * lt.x + my * lt.y || Math.min(m00, m10, m01, m11) >= mx * rb.x + my * rb.y) {\n      return false;\n    }\n    return true;\n  }\n  /**\n   * Pads the rectangle making it grow in all directions.\n   * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n   * @param paddingX - The horizontal padding amount.\n   * @param paddingY - The vertical padding amount.\n   * @returns Returns itself.\n   */\n  pad(paddingX = 0, paddingY = paddingX) {\n    this.x -= paddingX;\n    this.y -= paddingY;\n    this.width += paddingX * 2;\n    this.height += paddingY * 2;\n    return this;\n  }\n  /**\n   * Fits this rectangle around the passed one.\n   * @param rectangle - The rectangle to fit.\n   * @returns Returns itself.\n   */\n  fit(rectangle) {\n    const x1 = Math.max(this.x, rectangle.x);\n    const x2 = Math.min(this.x + this.width, rectangle.x + rectangle.width);\n    const y1 = Math.max(this.y, rectangle.y);\n    const y2 = Math.min(this.y + this.height, rectangle.y + rectangle.height);\n    this.x = x1;\n    this.width = Math.max(x2 - x1, 0);\n    this.y = y1;\n    this.height = Math.max(y2 - y1, 0);\n    return this;\n  }\n  /**\n   * Enlarges rectangle that way its corners lie on grid\n   * @param resolution - resolution\n   * @param eps - precision\n   * @returns Returns itself.\n   */\n  ceil(resolution = 1, eps = 1e-3) {\n    const x2 = Math.ceil((this.x + this.width - eps) * resolution) / resolution;\n    const y2 = Math.ceil((this.y + this.height - eps) * resolution) / resolution;\n    this.x = Math.floor((this.x + eps) * resolution) / resolution;\n    this.y = Math.floor((this.y + eps) * resolution) / resolution;\n    this.width = x2 - this.x;\n    this.height = y2 - this.y;\n    return this;\n  }\n  /**\n   * Enlarges this rectangle to include the passed rectangle.\n   * @param rectangle - The rectangle to include.\n   * @returns Returns itself.\n   */\n  enlarge(rectangle) {\n    const x1 = Math.min(this.x, rectangle.x);\n    const x2 = Math.max(this.x + this.width, rectangle.x + rectangle.width);\n    const y1 = Math.min(this.y, rectangle.y);\n    const y2 = Math.max(this.y + this.height, rectangle.y + rectangle.height);\n    this.x = x1;\n    this.width = x2 - x1;\n    this.y = y1;\n    this.height = y2 - y1;\n    return this;\n  }\n  /**\n   * Returns the framing rectangle of the rectangle as a Rectangle object\n   * @param out - optional rectangle to store the result\n   * @returns The framing rectangle\n   */\n  getBounds(out) {\n    out = out || new Rectangle();\n    out.copyFrom(this);\n    return out;\n  }\n  toString() {\n    return `[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`;\n  }\n}\n\nexport { Rectangle };\n//# sourceMappingURL=Rectangle.mjs.map\n","\"use strict\";\nconst uidCache = {\n  default: -1\n};\nfunction uid(name = \"default\") {\n  if (uidCache[name] === void 0) {\n    uidCache[name] = -1;\n  }\n  return ++uidCache[name];\n}\nfunction resetUids() {\n  for (const key in uidCache) {\n    delete uidCache[key];\n  }\n}\n\nexport { resetUids, uid };\n//# sourceMappingURL=uid.mjs.map\n","\"use strict\";\nconst warnings = {};\nconst v8_0_0 = \"8.0.0\";\nfunction deprecation(version, message, ignoreDepth = 3) {\n  if (warnings[message]) {\n    return;\n  }\n  let stack = new Error().stack;\n  if (typeof stack === \"undefined\") {\n    console.warn(\"PixiJS Deprecation Warning: \", `${message}\nDeprecated since v${version}`);\n  } else {\n    stack = stack.split(\"\\n\").splice(ignoreDepth).join(\"\\n\");\n    if (console.groupCollapsed) {\n      console.groupCollapsed(\n        \"%cPixiJS Deprecation Warning: %c%s\",\n        \"color:#614108;background:#fffbe6\",\n        \"font-weight:normal;color:#614108;background:#fffbe6\",\n        `${message}\nDeprecated since v${version}`\n      );\n      console.warn(stack);\n      console.groupEnd();\n    } else {\n      console.warn(\"PixiJS Deprecation Warning: \", `${message}\nDeprecated since v${version}`);\n      console.warn(stack);\n    }\n  }\n  warnings[message] = true;\n}\n\nexport { deprecation, v8_0_0 };\n//# sourceMappingURL=deprecation.mjs.map\n","\"use strict\";\nconst NOOP = () => {\n};\n\nexport { NOOP };\n//# sourceMappingURL=NOOP.mjs.map\n","\"use strict\";\nfunction nextPow2(v) {\n  v += v === 0 ? 1 : 0;\n  --v;\n  v |= v >>> 1;\n  v |= v >>> 2;\n  v |= v >>> 4;\n  v |= v >>> 8;\n  v |= v >>> 16;\n  return v + 1;\n}\nfunction isPow2(v) {\n  return !(v & v - 1) && !!v;\n}\nfunction log2(v) {\n  let r = (v > 65535 ? 1 : 0) << 4;\n  v >>>= r;\n  let shift = (v > 255 ? 1 : 0) << 3;\n  v >>>= shift;\n  r |= shift;\n  shift = (v > 15 ? 1 : 0) << 2;\n  v >>>= shift;\n  r |= shift;\n  shift = (v > 3 ? 1 : 0) << 1;\n  v >>>= shift;\n  r |= shift;\n  return r | v >> 1;\n}\n\nexport { isPow2, log2, nextPow2 };\n//# sourceMappingURL=pow2.mjs.map\n","\"use strict\";\nfunction definedProps(obj) {\n  const result = {};\n  for (const key in obj) {\n    if (obj[key] !== void 0) {\n      result[key] = obj[key];\n    }\n  }\n  return result;\n}\n\nexport { definedProps };\n//# sourceMappingURL=definedProps.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst idHash = /* @__PURE__ */ Object.create(null);\nfunction createResourceIdFromString(value) {\n  const id = idHash[value];\n  if (id === void 0) {\n    idHash[value] = uid(\"resource\");\n  }\n  return id;\n}\nconst _TextureStyle = class _TextureStyle extends EventEmitter {\n  /**\n   * @param options - options for the style\n   */\n  constructor(options = {}) {\n    super();\n    this._resourceType = \"textureSampler\";\n    this._touched = 0;\n    /**\n     * Specifies the maximum anisotropy value clamp used by the sampler.\n     * Note: Most implementations support {@link GPUSamplerDescriptor#maxAnisotropy} values in range\n     * between 1 and 16, inclusive. The used value of {@link GPUSamplerDescriptor#maxAnisotropy} will\n     * be clamped to the maximum value that the platform supports.\n     * @internal\n     * @ignore\n     */\n    this._maxAnisotropy = 1;\n    /**\n     * Has the style been destroyed?\n     * @readonly\n     */\n    this.destroyed = false;\n    options = { ..._TextureStyle.defaultOptions, ...options };\n    this.addressMode = options.addressMode;\n    this.addressModeU = options.addressModeU ?? this.addressModeU;\n    this.addressModeV = options.addressModeV ?? this.addressModeV;\n    this.addressModeW = options.addressModeW ?? this.addressModeW;\n    this.scaleMode = options.scaleMode;\n    this.magFilter = options.magFilter ?? this.magFilter;\n    this.minFilter = options.minFilter ?? this.minFilter;\n    this.mipmapFilter = options.mipmapFilter ?? this.mipmapFilter;\n    this.lodMinClamp = options.lodMinClamp;\n    this.lodMaxClamp = options.lodMaxClamp;\n    this.compare = options.compare;\n    this.maxAnisotropy = options.maxAnisotropy ?? 1;\n  }\n  set addressMode(value) {\n    this.addressModeU = value;\n    this.addressModeV = value;\n    this.addressModeW = value;\n  }\n  /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n  get addressMode() {\n    return this.addressModeU;\n  }\n  set wrapMode(value) {\n    deprecation(v8_0_0, \"TextureStyle.wrapMode is now TextureStyle.addressMode\");\n    this.addressMode = value;\n  }\n  get wrapMode() {\n    return this.addressMode;\n  }\n  set scaleMode(value) {\n    this.magFilter = value;\n    this.minFilter = value;\n    this.mipmapFilter = value;\n  }\n  /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n  get scaleMode() {\n    return this.magFilter;\n  }\n  /** Specifies the maximum anisotropy value clamp used by the sampler. */\n  set maxAnisotropy(value) {\n    this._maxAnisotropy = Math.min(value, 16);\n    if (this._maxAnisotropy > 1) {\n      this.scaleMode = \"linear\";\n    }\n  }\n  get maxAnisotropy() {\n    return this._maxAnisotropy;\n  }\n  // TODO - move this to WebGL?\n  get _resourceId() {\n    return this._sharedResourceId || this._generateResourceId();\n  }\n  update() {\n    this.emit(\"change\", this);\n    this._sharedResourceId = null;\n  }\n  _generateResourceId() {\n    const bigKey = `${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;\n    this._sharedResourceId = createResourceIdFromString(bigKey);\n    return this._resourceId;\n  }\n  /** Destroys the style */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    this.removeAllListeners();\n  }\n};\n/** default options for the style */\n_TextureStyle.defaultOptions = {\n  addressMode: \"clamp-to-edge\",\n  scaleMode: \"linear\"\n};\nlet TextureStyle = _TextureStyle;\n\nexport { TextureStyle };\n//# sourceMappingURL=TextureStyle.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { isPow2 } from '../../../../../maths/misc/pow2.mjs';\nimport { definedProps } from '../../../../../scene/container/utils/definedProps.mjs';\nimport { uid } from '../../../../../utils/data/uid.mjs';\nimport { TextureStyle } from '../TextureStyle.mjs';\n\n\"use strict\";\nconst _TextureSource = class _TextureSource extends EventEmitter {\n  /**\n   * @param options - options for creating a new TextureSource\n   */\n  constructor(options = {}) {\n    super();\n    this.options = options;\n    /** unique id for this Texture source */\n    this.uid = uid(\"textureSource\");\n    /**\n     * The resource type used by this TextureSource. This is used by the bind groups to determine\n     * how to handle this resource.\n     * @ignore\n     * @internal\n     */\n    this._resourceType = \"textureSource\";\n    /**\n     * i unique resource id, used by the bind group systems.\n     * This can change if the texture is resized or its resource changes\n     */\n    this._resourceId = uid(\"resource\");\n    /**\n     * this is how the backends know how to upload this texture to the GPU\n     * It changes depending on the resource type. Classes that extend TextureSource\n     * should override this property.\n     * @ignore\n     * @internal\n     */\n    this.uploadMethodId = \"unknown\";\n    // dimensions\n    this._resolution = 1;\n    /** the pixel width of this texture source. This is the REAL pure number, not accounting resolution */\n    this.pixelWidth = 1;\n    /** the pixel height of this texture source. This is the REAL pure number, not accounting resolution */\n    this.pixelHeight = 1;\n    /**\n     * the width of this texture source, accounting for resolution\n     * eg pixelWidth 200, resolution 2, then width will be 100\n     */\n    this.width = 1;\n    /**\n     * the height of this texture source, accounting for resolution\n     * eg pixelHeight 200, resolution 2, then height will be 100\n     */\n    this.height = 1;\n    /**\n     * The number of samples of a multisample texture. This is always 1 for non-multisample textures.\n     * To enable multisample for a texture, set antialias to true\n     * @internal\n     * @ignore\n     */\n    this.sampleCount = 1;\n    /** The number of mip levels to generate for this texture. this is  overridden if autoGenerateMipmaps is true */\n    this.mipLevelCount = 1;\n    /**\n     * Should we auto generate mipmaps for this texture? This will automatically generate mipmaps\n     * for this texture when uploading to the GPU. Mipmapped textures take up more memory, but\n     * can look better when scaled down.\n     *\n     * For performance reasons, it is recommended to NOT use this with RenderTextures, as they are often updated every frame.\n     * If you do, make sure to call `updateMipmaps` after you update the texture.\n     */\n    this.autoGenerateMipmaps = false;\n    /** the format that the texture data has */\n    this.format = \"rgba8unorm\";\n    /** how many dimensions does this texture have? currently v8 only supports 2d */\n    this.dimension = \"2d\";\n    /**\n     * Only really affects RenderTextures.\n     * Should we use antialiasing for this texture. It will look better, but may impact performance as a\n     * Blit operation will be required to resolve the texture.\n     */\n    this.antialias = false;\n    /**\n     * Used by automatic texture Garbage Collection, stores last GC tick when it was bound\n     * @protected\n     */\n    this._touched = 0;\n    /**\n     * Used by the batcher to build texture batches. faster to have the variable here!\n     * @protected\n     */\n    this._batchTick = -1;\n    /**\n     * A temporary batch location for the texture batching. Here for performance reasons only!\n     * @protected\n     */\n    this._textureBindLocation = -1;\n    options = { ..._TextureSource.defaultOptions, ...options };\n    this.label = options.label ?? \"\";\n    this.resource = options.resource;\n    this.autoGarbageCollect = options.autoGarbageCollect;\n    this._resolution = options.resolution;\n    if (options.width) {\n      this.pixelWidth = options.width * this._resolution;\n    } else {\n      this.pixelWidth = this.resource ? this.resourceWidth ?? 1 : 1;\n    }\n    if (options.height) {\n      this.pixelHeight = options.height * this._resolution;\n    } else {\n      this.pixelHeight = this.resource ? this.resourceHeight ?? 1 : 1;\n    }\n    this.width = this.pixelWidth / this._resolution;\n    this.height = this.pixelHeight / this._resolution;\n    this.format = options.format;\n    this.dimension = options.dimensions;\n    this.mipLevelCount = options.mipLevelCount;\n    this.autoGenerateMipmaps = options.autoGenerateMipmaps;\n    this.sampleCount = options.sampleCount;\n    this.antialias = options.antialias;\n    this.alphaMode = options.alphaMode;\n    this.style = new TextureStyle(definedProps(options));\n    this.destroyed = false;\n    this._refreshPOT();\n  }\n  /** returns itself */\n  get source() {\n    return this;\n  }\n  /** the style of the texture */\n  get style() {\n    return this._style;\n  }\n  set style(value) {\n    if (this.style === value)\n      return;\n    this._style?.off(\"change\", this._onStyleChange, this);\n    this._style = value;\n    this._style?.on(\"change\", this._onStyleChange, this);\n    this._onStyleChange();\n  }\n  /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n  get addressMode() {\n    return this._style.addressMode;\n  }\n  set addressMode(value) {\n    this._style.addressMode = value;\n  }\n  /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n  get repeatMode() {\n    return this._style.addressMode;\n  }\n  set repeatMode(value) {\n    this._style.addressMode = value;\n  }\n  /** Specifies the sampling behavior when the sample footprint is smaller than or equal to one texel. */\n  get magFilter() {\n    return this._style.magFilter;\n  }\n  set magFilter(value) {\n    this._style.magFilter = value;\n  }\n  /** Specifies the sampling behavior when the sample footprint is larger than one texel. */\n  get minFilter() {\n    return this._style.minFilter;\n  }\n  set minFilter(value) {\n    this._style.minFilter = value;\n  }\n  /** Specifies behavior for sampling between mipmap levels. */\n  get mipmapFilter() {\n    return this._style.mipmapFilter;\n  }\n  set mipmapFilter(value) {\n    this._style.mipmapFilter = value;\n  }\n  /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n  get lodMinClamp() {\n    return this._style.lodMinClamp;\n  }\n  set lodMinClamp(value) {\n    this._style.lodMinClamp = value;\n  }\n  /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n  get lodMaxClamp() {\n    return this._style.lodMaxClamp;\n  }\n  set lodMaxClamp(value) {\n    this._style.lodMaxClamp = value;\n  }\n  _onStyleChange() {\n    this.emit(\"styleChange\", this);\n  }\n  /** call this if you have modified the texture outside of the constructor */\n  update() {\n    if (this.resource) {\n      const resolution = this._resolution;\n      const didResize = this.resize(this.resourceWidth / resolution, this.resourceHeight / resolution);\n      if (didResize)\n        return;\n    }\n    this.emit(\"update\", this);\n  }\n  /** Destroys this texture source */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    if (this._style) {\n      this._style.destroy();\n      this._style = null;\n    }\n    this.uploadMethodId = null;\n    this.resource = null;\n    this.removeAllListeners();\n  }\n  /**\n   * This will unload the Texture source from the GPU. This will free up the GPU memory\n   * As soon as it is required fore rendering, it will be re-uploaded.\n   */\n  unload() {\n    this._resourceId = uid(\"resource\");\n    this.emit(\"change\", this);\n    this.emit(\"unload\", this);\n  }\n  /** the width of the resource. This is the REAL pure number, not accounting resolution   */\n  get resourceWidth() {\n    const { resource } = this;\n    return resource.naturalWidth || resource.videoWidth || resource.displayWidth || resource.width;\n  }\n  /** the height of the resource. This is the REAL pure number, not accounting resolution */\n  get resourceHeight() {\n    const { resource } = this;\n    return resource.naturalHeight || resource.videoHeight || resource.displayHeight || resource.height;\n  }\n  /**\n   * the resolution of the texture. Changing this number, will not change the number of pixels in the actual texture\n   * but will the size of the texture when rendered.\n   *\n   * changing the resolution of this texture to 2 for example will make it appear twice as small when rendered (as pixel\n   * density will have increased)\n   */\n  get resolution() {\n    return this._resolution;\n  }\n  set resolution(resolution) {\n    if (this._resolution === resolution)\n      return;\n    this._resolution = resolution;\n    this.width = this.pixelWidth / resolution;\n    this.height = this.pixelHeight / resolution;\n  }\n  /**\n   * Resize the texture, this is handy if you want to use the texture as a render texture\n   * @param width - the new width of the texture\n   * @param height - the new height of the texture\n   * @param resolution - the new resolution of the texture\n   * @returns - if the texture was resized\n   */\n  resize(width, height, resolution) {\n    resolution = resolution || this._resolution;\n    width = width || this.width;\n    height = height || this.height;\n    const newPixelWidth = Math.round(width * resolution);\n    const newPixelHeight = Math.round(height * resolution);\n    this.width = newPixelWidth / resolution;\n    this.height = newPixelHeight / resolution;\n    this._resolution = resolution;\n    if (this.pixelWidth === newPixelWidth && this.pixelHeight === newPixelHeight) {\n      return false;\n    }\n    this._refreshPOT();\n    this.pixelWidth = newPixelWidth;\n    this.pixelHeight = newPixelHeight;\n    this.emit(\"resize\", this);\n    this._resourceId = uid(\"resource\");\n    this.emit(\"change\", this);\n    return true;\n  }\n  /**\n   * Lets the renderer know that this texture has been updated and its mipmaps should be re-generated.\n   * This is only important for RenderTexture instances, as standard Texture instances will have their\n   * mipmaps generated on upload. You should call this method after you make any change to the texture\n   *\n   * The reason for this is is can be quite expensive to update mipmaps for a texture. So by default,\n   * We want you, the developer to specify when this action should happen.\n   *\n   * Generally you don't want to have mipmaps generated on Render targets that are changed every frame,\n   */\n  updateMipmaps() {\n    if (this.autoGenerateMipmaps && this.mipLevelCount > 1) {\n      this.emit(\"updateMipmaps\", this);\n    }\n  }\n  set wrapMode(value) {\n    this._style.wrapMode = value;\n  }\n  get wrapMode() {\n    return this._style.wrapMode;\n  }\n  set scaleMode(value) {\n    this._style.scaleMode = value;\n  }\n  /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n  get scaleMode() {\n    return this._style.scaleMode;\n  }\n  /**\n   * Refresh check for isPowerOfTwo texture based on size\n   * @private\n   */\n  _refreshPOT() {\n    this.isPowerOfTwo = isPow2(this.pixelWidth) && isPow2(this.pixelHeight);\n  }\n  static test(_resource) {\n    throw new Error(\"Unimplemented\");\n  }\n};\n/** The default options used when creating a new TextureSource. override these to add your own defaults */\n_TextureSource.defaultOptions = {\n  resolution: 1,\n  format: \"bgra8unorm\",\n  alphaMode: \"premultiply-alpha-on-upload\",\n  dimensions: \"2d\",\n  mipLevelCount: 1,\n  autoGenerateMipmaps: false,\n  sampleCount: 1,\n  antialias: false,\n  autoGarbageCollect: false\n};\nlet TextureSource = _TextureSource;\n\nexport { TextureSource };\n//# sourceMappingURL=TextureSource.mjs.map\n","import { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass BufferImageSource extends TextureSource {\n  constructor(options) {\n    const buffer = options.resource || new Float32Array(options.width * options.height * 4);\n    let format = options.format;\n    if (!format) {\n      if (buffer instanceof Float32Array) {\n        format = \"rgba32float\";\n      } else if (buffer instanceof Int32Array) {\n        format = \"rgba32uint\";\n      } else if (buffer instanceof Uint32Array) {\n        format = \"rgba32uint\";\n      } else if (buffer instanceof Int16Array) {\n        format = \"rgba16uint\";\n      } else if (buffer instanceof Uint16Array) {\n        format = \"rgba16uint\";\n      } else if (buffer instanceof Int8Array) {\n        format = \"bgra8unorm\";\n      } else {\n        format = \"bgra8unorm\";\n      }\n    }\n    super({\n      ...options,\n      resource: buffer,\n      format\n    });\n    this.uploadMethodId = \"buffer\";\n  }\n  static test(resource) {\n    return resource instanceof Int8Array || resource instanceof Uint8Array || resource instanceof Uint8ClampedArray || resource instanceof Int16Array || resource instanceof Uint16Array || resource instanceof Int32Array || resource instanceof Uint32Array || resource instanceof Float32Array;\n  }\n}\nBufferImageSource.extension = ExtensionType.TextureSource;\n\nexport { BufferImageSource };\n//# sourceMappingURL=BufferSource.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\n\n\"use strict\";\nconst tempMat = new Matrix();\nclass TextureMatrix {\n  /**\n   * @param texture - observed texture\n   * @param clampMargin - Changes frame clamping, 0.5 by default. Use -0.5 for extra border.\n   */\n  constructor(texture, clampMargin) {\n    this.mapCoord = new Matrix();\n    this.uClampFrame = new Float32Array(4);\n    this.uClampOffset = new Float32Array(2);\n    this._textureID = -1;\n    this._updateID = 0;\n    this.clampOffset = 0;\n    if (typeof clampMargin === \"undefined\") {\n      this.clampMargin = texture.width < 10 ? 0 : 0.5;\n    } else {\n      this.clampMargin = clampMargin;\n    }\n    this.isSimple = false;\n    this.texture = texture;\n  }\n  /** Texture property. */\n  get texture() {\n    return this._texture;\n  }\n  set texture(value) {\n    if (this.texture === value)\n      return;\n    this._texture?.removeListener(\"update\", this.update, this);\n    this._texture = value;\n    this._texture.addListener(\"update\", this.update, this);\n    this.update();\n  }\n  /**\n   * Multiplies uvs array to transform\n   * @param uvs - mesh uvs\n   * @param [out=uvs] - output\n   * @returns - output\n   */\n  multiplyUvs(uvs, out) {\n    if (out === void 0) {\n      out = uvs;\n    }\n    const mat = this.mapCoord;\n    for (let i = 0; i < uvs.length; i += 2) {\n      const x = uvs[i];\n      const y = uvs[i + 1];\n      out[i] = x * mat.a + y * mat.c + mat.tx;\n      out[i + 1] = x * mat.b + y * mat.d + mat.ty;\n    }\n    return out;\n  }\n  /**\n   * Updates matrices if texture was changed\n   * @returns - whether or not it was updated\n   */\n  update() {\n    const tex = this._texture;\n    this._updateID++;\n    const uvs = tex.uvs;\n    this.mapCoord.set(uvs.x1 - uvs.x0, uvs.y1 - uvs.y0, uvs.x3 - uvs.x0, uvs.y3 - uvs.y0, uvs.x0, uvs.y0);\n    const orig = tex.orig;\n    const trim = tex.trim;\n    if (trim) {\n      tempMat.set(\n        orig.width / trim.width,\n        0,\n        0,\n        orig.height / trim.height,\n        -trim.x / trim.width,\n        -trim.y / trim.height\n      );\n      this.mapCoord.append(tempMat);\n    }\n    const texBase = tex.source;\n    const frame = this.uClampFrame;\n    const margin = this.clampMargin / texBase._resolution;\n    const offset = this.clampOffset;\n    frame[0] = (tex.frame.x + margin + offset) / texBase.width;\n    frame[1] = (tex.frame.y + margin + offset) / texBase.height;\n    frame[2] = (tex.frame.x + tex.frame.width - margin + offset) / texBase.width;\n    frame[3] = (tex.frame.y + tex.frame.height - margin + offset) / texBase.height;\n    this.uClampOffset[0] = offset / texBase.pixelWidth;\n    this.uClampOffset[1] = offset / texBase.pixelHeight;\n    this.isSimple = tex.frame.width === texBase.width && tex.frame.height === texBase.height && tex.rotate === 0;\n    return true;\n  }\n}\n\nexport { TextureMatrix };\n//# sourceMappingURL=TextureMatrix.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { groupD8 } from '../../../../maths/matrix/groupD8.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\nimport { NOOP } from '../../../../utils/misc/NOOP.mjs';\nimport { BufferImageSource } from './sources/BufferSource.mjs';\nimport { TextureSource } from './sources/TextureSource.mjs';\nimport { TextureMatrix } from './TextureMatrix.mjs';\n\n\"use strict\";\nclass Texture extends EventEmitter {\n  /**\n   * @param {TextureOptions} param0 - Options for the texture\n   */\n  constructor({\n    source,\n    label,\n    frame,\n    orig,\n    trim,\n    defaultAnchor,\n    defaultBorders,\n    rotate,\n    dynamic\n  } = {}) {\n    super();\n    /** unique id for this texture */\n    this.uid = uid(\"texture\");\n    /** A uvs object based on the given frame and the texture source */\n    this.uvs = { x0: 0, y0: 0, x1: 0, y1: 0, x2: 0, y2: 0, x3: 0, y3: 0 };\n    /**\n     * This is the area of the BaseTexture image to actually copy to the Canvas / WebGL when rendering,\n     * irrespective of the actual frame size or placement (which can be influenced by trimmed texture atlases)\n     */\n    this.frame = new Rectangle();\n    /**\n     * Does this Texture have any frame data assigned to it?\n     *\n     * This mode is enabled automatically if no frame was passed inside constructor.\n     *\n     * In this mode texture is subscribed to baseTexture events, and fires `update` on any change.\n     *\n     * Beware, after loading or resize of baseTexture event can fired two times!\n     * If you want more control, subscribe on baseTexture itself.\n     * @example\n     * texture.on('update', () => {});\n     */\n    this.noFrame = false;\n    /**\n     * Set to true if you plan on modifying the uvs of this texture.\n     * When this is the case, sprites and other objects using the texture will\n     * make sure to listen for changes to the uvs and update their vertices accordingly.\n     */\n    this.dynamic = false;\n    /** is it a texture? yes! used for type checking */\n    this.isTexture = true;\n    this.label = label;\n    this.source = source?.source ?? new TextureSource();\n    this.noFrame = !frame;\n    if (frame) {\n      this.frame.copyFrom(frame);\n    } else {\n      const { width, height } = this._source;\n      this.frame.width = width;\n      this.frame.height = height;\n    }\n    this.orig = orig || this.frame;\n    this.trim = trim;\n    this.rotate = rotate ?? 0;\n    this.defaultAnchor = defaultAnchor;\n    this.defaultBorders = defaultBorders;\n    this.destroyed = false;\n    this.dynamic = dynamic || false;\n    this.updateUvs();\n  }\n  set source(value) {\n    if (this._source) {\n      this._source.off(\"resize\", this.update, this);\n    }\n    this._source = value;\n    value.on(\"resize\", this.update, this);\n    this.emit(\"update\", this);\n  }\n  /** the underlying source of the texture (equivalent of baseTexture in v7) */\n  get source() {\n    return this._source;\n  }\n  /** returns a TextureMatrix instance for this texture. By default, that object is not created because its heavy. */\n  get textureMatrix() {\n    if (!this._textureMatrix) {\n      this._textureMatrix = new TextureMatrix(this);\n    }\n    return this._textureMatrix;\n  }\n  /** The width of the Texture in pixels. */\n  get width() {\n    return this.orig.width;\n  }\n  /** The height of the Texture in pixels. */\n  get height() {\n    return this.orig.height;\n  }\n  /** Call this function when you have modified the frame of this texture. */\n  updateUvs() {\n    const { uvs, frame } = this;\n    const { width, height } = this._source;\n    const nX = frame.x / width;\n    const nY = frame.y / height;\n    const nW = frame.width / width;\n    const nH = frame.height / height;\n    let rotate = this.rotate;\n    if (rotate) {\n      const w2 = nW / 2;\n      const h2 = nH / 2;\n      const cX = nX + w2;\n      const cY = nY + h2;\n      rotate = groupD8.add(rotate, groupD8.NW);\n      uvs.x0 = cX + w2 * groupD8.uX(rotate);\n      uvs.y0 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x1 = cX + w2 * groupD8.uX(rotate);\n      uvs.y1 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x2 = cX + w2 * groupD8.uX(rotate);\n      uvs.y2 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x3 = cX + w2 * groupD8.uX(rotate);\n      uvs.y3 = cY + h2 * groupD8.uY(rotate);\n    } else {\n      uvs.x0 = nX;\n      uvs.y0 = nY;\n      uvs.x1 = nX + nW;\n      uvs.y1 = nY;\n      uvs.x2 = nX + nW;\n      uvs.y2 = nY + nH;\n      uvs.x3 = nX;\n      uvs.y3 = nY + nH;\n    }\n  }\n  /**\n   * Destroys this texture\n   * @param destroySource - Destroy the source when the texture is destroyed.\n   */\n  destroy(destroySource = false) {\n    if (this._source) {\n      if (destroySource) {\n        this._source.destroy();\n        this._source = null;\n      }\n    }\n    this._textureMatrix = null;\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n  }\n  /** call this if you have modified the `texture outside` of the constructor */\n  update() {\n    if (this.noFrame) {\n      this.frame.width = this._source.width;\n      this.frame.height = this._source.height;\n    }\n    this.updateUvs();\n    this.emit(\"update\", this);\n  }\n  /** @deprecated since 8.0.0 */\n  get baseTexture() {\n    deprecation(v8_0_0, \"Texture.baseTexture is now Texture.source\");\n    return this._source;\n  }\n}\nTexture.EMPTY = new Texture({\n  label: \"EMPTY\",\n  source: new TextureSource({\n    label: \"EMPTY\"\n  })\n});\nTexture.EMPTY.destroy = NOOP;\nTexture.WHITE = new Texture({\n  source: new BufferImageSource({\n    resource: new Uint8Array([255, 255, 255, 255]),\n    width: 1,\n    height: 1,\n    alphaMode: \"premultiply-alpha-on-upload\",\n    label: \"WHITE\"\n  }),\n  label: \"WHITE\"\n});\nTexture.WHITE.destroy = NOOP;\n\nexport { Texture };\n//# sourceMappingURL=Texture.mjs.map\n","\"use strict\";\nfunction updateQuadBounds(bounds, anchor, texture, padding) {\n  const { width, height } = texture.orig;\n  const trim = texture.trim;\n  if (trim) {\n    const sourceWidth = trim.width;\n    const sourceHeight = trim.height;\n    bounds.minX = trim.x - anchor._x * width - padding;\n    bounds.maxX = bounds.minX + sourceWidth;\n    bounds.minY = trim.y - anchor._y * height - padding;\n    bounds.maxY = bounds.minY + sourceHeight;\n  } else {\n    bounds.minX = -anchor._x * width - padding;\n    bounds.maxX = bounds.minX + width;\n    bounds.minY = -anchor._y * height - padding;\n    bounds.maxY = bounds.minY + height;\n  }\n  return;\n}\n\nexport { updateQuadBounds };\n//# sourceMappingURL=updateQuadBounds.mjs.map\n","var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(r){return\"string\"==typeof r?r.length>0:\"number\"==typeof r},n=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},e=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),r>n?n:r>t?r:t},u=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},a=function(r){return{r:e(r.r,0,255),g:e(r.g,0,255),b:e(r.b,0,255),a:e(r.a)}},o=function(r){return{r:n(r.r),g:n(r.g),b:n(r.b),a:n(r.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(r){var t=r.toString(16);return t.length<2?\"0\"+t:t},h=function(r){var t=r.r,n=r.g,e=r.b,u=r.a,a=Math.max(t,n,e),o=a-Math.min(t,n,e),i=o?a===t?(n-e)/o:a===n?2+(e-t)/o:4+(t-n)/o:0;return{h:60*(i<0?i+6:i),s:a?o/a*100:0,v:a/255*100,a:u}},b=function(r){var t=r.h,n=r.s,e=r.v,u=r.a;t=t/360*6,n/=100,e/=100;var a=Math.floor(t),o=e*(1-n),i=e*(1-(t-a)*n),s=e*(1-(1-t+a)*n),h=a%6;return{r:255*[e,i,o,o,s,e][h],g:255*[s,e,e,i,o,o][h],b:255*[o,o,s,e,e,i][h],a:u}},g=function(r){return{h:u(r.h),s:e(r.s,0,100),l:e(r.l,0,100),a:e(r.a)}},d=function(r){return{h:n(r.h),s:n(r.s),l:n(r.l),a:n(r.a,3)}},f=function(r){return b((n=(t=r).s,{h:t.h,s:(n*=((e=t.l)<50?e:100-e)/100)>0?2*n/(e+n)*100:0,v:e+n,a:t.a}));var t,n,e},c=function(r){return{h:(t=h(r)).h,s:(u=(200-(n=t.s))*(e=t.v)/100)>0&&u<200?n*e/100/(u<=100?u:200-u)*100:0,l:u/2,a:t.a};var t,n,e,u},l=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,p=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s+([+-]?\\d*\\.?\\d+)%\\s+([+-]?\\d*\\.?\\d+)%\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,v=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,m=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,y={string:[[function(r){var t=i.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:4===r.length?n(parseInt(r[3]+r[3],16)/255,2):1}:6===r.length||8===r.length?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:8===r.length?n(parseInt(r.substr(6,2),16)/255,2):1}:null:null},\"hex\"],[function(r){var t=v.exec(r)||m.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},\"rgb\"],[function(t){var n=l.exec(t)||p.exec(t);if(!n)return null;var e,u,a=g({h:(e=n[1],u=n[2],void 0===u&&(u=\"deg\"),Number(e)*(r[u]||1)),s:Number(n[3]),l:Number(n[4]),a:void 0===n[5]?1:Number(n[5])/(n[6]?100:1)});return f(a)},\"hsl\"]],object:[[function(r){var n=r.r,e=r.g,u=r.b,o=r.a,i=void 0===o?1:o;return t(n)&&t(e)&&t(u)?a({r:Number(n),g:Number(e),b:Number(u),a:Number(i)}):null},\"rgb\"],[function(r){var n=r.h,e=r.s,u=r.l,a=r.a,o=void 0===a?1:a;if(!t(n)||!t(e)||!t(u))return null;var i=g({h:Number(n),s:Number(e),l:Number(u),a:Number(o)});return f(i)},\"hsl\"],[function(r){var n=r.h,a=r.s,o=r.v,i=r.a,s=void 0===i?1:i;if(!t(n)||!t(a)||!t(o))return null;var h=function(r){return{h:u(r.h),s:e(r.s,0,100),v:e(r.v,0,100),a:e(r.a)}}({h:Number(n),s:Number(a),v:Number(o),a:Number(s)});return b(h)},\"hsv\"]]},N=function(r,t){for(var n=0;n<t.length;n++){var e=t[n][0](r);if(e)return[e,t[n][1]]}return[null,void 0]},x=function(r){return\"string\"==typeof r?N(r.trim(),y.string):\"object\"==typeof r&&null!==r?N(r,y.object):[null,void 0]},I=function(r){return x(r)[1]},M=function(r,t){var n=c(r);return{h:n.h,s:e(n.s+100*t,0,100),l:n.l,a:n.a}},H=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},$=function(r,t){var n=c(r);return{h:n.h,s:n.s,l:e(n.l+100*t,0,100),a:n.a}},j=function(){function r(r){this.parsed=x(r)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return null!==this.parsed},r.prototype.brightness=function(){return n(H(this.rgba),2)},r.prototype.isDark=function(){return H(this.rgba)<.5},r.prototype.isLight=function(){return H(this.rgba)>=.5},r.prototype.toHex=function(){return r=o(this.rgba),t=r.r,e=r.g,u=r.b,i=(a=r.a)<1?s(n(255*a)):\"\",\"#\"+s(t)+s(e)+s(u)+i;var r,t,e,u,a,i},r.prototype.toRgb=function(){return o(this.rgba)},r.prototype.toRgbString=function(){return r=o(this.rgba),t=r.r,n=r.g,e=r.b,(u=r.a)<1?\"rgba(\"+t+\", \"+n+\", \"+e+\", \"+u+\")\":\"rgb(\"+t+\", \"+n+\", \"+e+\")\";var r,t,n,e,u},r.prototype.toHsl=function(){return d(c(this.rgba))},r.prototype.toHslString=function(){return r=d(c(this.rgba)),t=r.h,n=r.s,e=r.l,(u=r.a)<1?\"hsla(\"+t+\", \"+n+\"%, \"+e+\"%, \"+u+\")\":\"hsl(\"+t+\", \"+n+\"%, \"+e+\"%)\";var r,t,n,e,u},r.prototype.toHsv=function(){return r=h(this.rgba),{h:n(r.h),s:n(r.s),v:n(r.v),a:n(r.a,3)};var r},r.prototype.invert=function(){return w({r:255-(r=this.rgba).r,g:255-r.g,b:255-r.b,a:r.a});var r},r.prototype.saturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,r))},r.prototype.desaturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,-r))},r.prototype.grayscale=function(){return w(M(this.rgba,-1))},r.prototype.lighten=function(r){return void 0===r&&(r=.1),w($(this.rgba,r))},r.prototype.darken=function(r){return void 0===r&&(r=.1),w($(this.rgba,-r))},r.prototype.rotate=function(r){return void 0===r&&(r=15),this.hue(this.hue()+r)},r.prototype.alpha=function(r){return\"number\"==typeof r?w({r:(t=this.rgba).r,g:t.g,b:t.b,a:r}):n(this.rgba.a,3);var t},r.prototype.hue=function(r){var t=c(this.rgba);return\"number\"==typeof r?w({h:r,s:t.s,l:t.l,a:t.a}):n(t.h)},r.prototype.isEqual=function(r){return this.toHex()===w(r).toHex()},r}(),w=function(r){return r instanceof j?r:new j(r)},S=[],k=function(r){r.forEach(function(r){S.indexOf(r)<0&&(r(j,y),S.push(r))})},E=function(){return new j({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};export{j as Colord,w as colord,k as extend,I as getFormat,E as random};\n","export default function(e,f){var a={white:\"#ffffff\",bisque:\"#ffe4c4\",blue:\"#0000ff\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",azure:\"#f0ffff\",whitesmoke:\"#f5f5f5\",papayawhip:\"#ffefd5\",plum:\"#dda0dd\",blanchedalmond:\"#ffebcd\",black:\"#000000\",gold:\"#ffd700\",goldenrod:\"#daa520\",gainsboro:\"#dcdcdc\",cornsilk:\"#fff8dc\",cornflowerblue:\"#6495ed\",burlywood:\"#deb887\",aquamarine:\"#7fffd4\",beige:\"#f5f5dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkkhaki:\"#bdb76b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkgrey:\"#a9a9a9\",peachpuff:\"#ffdab9\",darkmagenta:\"#8b008b\",darkred:\"#8b0000\",darkorchid:\"#9932cc\",darkorange:\"#ff8c00\",darkslateblue:\"#483d8b\",gray:\"#808080\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",wheat:\"#f5deb3\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",ghostwhite:\"#f8f8ff\",darkviolet:\"#9400d3\",magenta:\"#ff00ff\",green:\"#008000\",dodgerblue:\"#1e90ff\",grey:\"#808080\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",blueviolet:\"#8a2be2\",forestgreen:\"#228b22\",lawngreen:\"#7cfc00\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",fuchsia:\"#ff00ff\",brown:\"#a52a2a\",maroon:\"#800000\",mediumblue:\"#0000cd\",lightcoral:\"#f08080\",darkturquoise:\"#00ced1\",lightcyan:\"#e0ffff\",ivory:\"#fffff0\",lightyellow:\"#ffffe0\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",linen:\"#faf0e6\",mediumaquamarine:\"#66cdaa\",lemonchiffon:\"#fffacd\",lime:\"#00ff00\",khaki:\"#f0e68c\",mediumseagreen:\"#3cb371\",limegreen:\"#32cd32\",mediumspringgreen:\"#00fa9a\",lightskyblue:\"#87cefa\",lightblue:\"#add8e6\",midnightblue:\"#191970\",lightpink:\"#ffb6c1\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",mintcream:\"#f5fffa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",navajowhite:\"#ffdead\",navy:\"#000080\",mediumvioletred:\"#c71585\",powderblue:\"#b0e0e6\",palegoldenrod:\"#eee8aa\",oldlace:\"#fdf5e6\",paleturquoise:\"#afeeee\",mediumturquoise:\"#48d1cc\",mediumorchid:\"#ba55d3\",rebeccapurple:\"#663399\",lightsteelblue:\"#b0c4de\",mediumslateblue:\"#7b68ee\",thistle:\"#d8bfd8\",tan:\"#d2b48c\",orchid:\"#da70d6\",mediumpurple:\"#9370db\",purple:\"#800080\",pink:\"#ffc0cb\",skyblue:\"#87ceeb\",springgreen:\"#00ff7f\",palegreen:\"#98fb98\",red:\"#ff0000\",yellow:\"#ffff00\",slateblue:\"#6a5acd\",lavenderblush:\"#fff0f5\",peru:\"#cd853f\",palevioletred:\"#db7093\",violet:\"#ee82ee\",teal:\"#008080\",slategray:\"#708090\",slategrey:\"#708090\",aliceblue:\"#f0f8ff\",darkseagreen:\"#8fbc8f\",darkolivegreen:\"#556b2f\",greenyellow:\"#adff2f\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",tomato:\"#ff6347\",silver:\"#c0c0c0\",sienna:\"#a0522d\",lavender:\"#e6e6fa\",lightgreen:\"#90ee90\",orange:\"#ffa500\",orangered:\"#ff4500\",steelblue:\"#4682b4\",royalblue:\"#4169e1\",turquoise:\"#40e0d0\",yellowgreen:\"#9acd32\",salmon:\"#fa8072\",saddlebrown:\"#8b4513\",sandybrown:\"#f4a460\",rosybrown:\"#bc8f8f\",darksalmon:\"#e9967a\",lightgoldenrodyellow:\"#fafad2\",snow:\"#fffafa\",lightgrey:\"#d3d3d3\",lightgray:\"#d3d3d3\",dimgray:\"#696969\",dimgrey:\"#696969\",olivedrab:\"#6b8e23\",olive:\"#808000\"},r={};for(var d in a)r[a[d]]=d;var l={};e.prototype.toName=function(f){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return\"transparent\";var d,i,n=r[this.toHex()];if(n)return n;if(null==f?void 0:f.closest){var o=this.toRgb(),t=1/0,b=\"black\";if(!l.length)for(var c in a)l[c]=new e(a[c]).toRgb();for(var g in a){var u=(d=o,i=l[g],Math.pow(d.r-i.r,2)+Math.pow(d.g-i.g,2)+Math.pow(d.b-i.b,2));u<t&&(t=u,b=g)}return b}};f.string.push([function(f){var r=f.toLowerCase(),d=\"transparent\"===r?\"#0000\":a[r];return d?new e(d).toRgb():null},\"name\"])}\n","import { extend, colord } from '@pixi/colord';\nimport namesPlugin from '@pixi/colord/plugins/names';\n\n\"use strict\";\nextend([namesPlugin]);\nconst _Color = class _Color {\n  /**\n   * @param {ColorSource} value - Optional value to use, if not provided, white is used.\n   */\n  constructor(value = 16777215) {\n    this._value = null;\n    this._components = new Float32Array(4);\n    this._components.fill(1);\n    this._int = 16777215;\n    this.value = value;\n  }\n  /** Get red component (0 - 1) */\n  get red() {\n    return this._components[0];\n  }\n  /** Get green component (0 - 1) */\n  get green() {\n    return this._components[1];\n  }\n  /** Get blue component (0 - 1) */\n  get blue() {\n    return this._components[2];\n  }\n  /** Get alpha component (0 - 1) */\n  get alpha() {\n    return this._components[3];\n  }\n  /**\n   * Set the value, suitable for chaining\n   * @param value\n   * @see Color.value\n   */\n  setValue(value) {\n    this.value = value;\n    return this;\n  }\n  /**\n   * The current color source.\n   *\n   * When setting:\n   * - Setting to an instance of `Color` will copy its color source and components.\n   * - Otherwise, `Color` will try to normalize the color source and set the components.\n   *   If the color source is invalid, an `Error` will be thrown and the `Color` will left unchanged.\n   *\n   * Note: The `null` in the setter's parameter type is added to match the TypeScript rule: return type of getter\n   * must be assignable to its setter's parameter type. Setting `value` to `null` will throw an `Error`.\n   *\n   * When getting:\n   * - A return value of `null` means the previous value was overridden (e.g., {@link Color.multiply multiply},\n   *   {@link Color.premultiply premultiply} or {@link Color.round round}).\n   * - Otherwise, the color source used when setting is returned.\n   */\n  set value(value) {\n    if (value instanceof _Color) {\n      this._value = this._cloneSource(value._value);\n      this._int = value._int;\n      this._components.set(value._components);\n    } else if (value === null) {\n      throw new Error(\"Cannot set Color#value to null\");\n    } else if (this._value === null || !this._isSourceEqual(this._value, value)) {\n      this._normalize(value);\n      this._value = this._cloneSource(value);\n    }\n  }\n  get value() {\n    return this._value;\n  }\n  /**\n   * Copy a color source internally.\n   * @param value - Color source\n   */\n  _cloneSource(value) {\n    if (typeof value === \"string\" || typeof value === \"number\" || value instanceof Number || value === null) {\n      return value;\n    } else if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n      return value.slice(0);\n    } else if (typeof value === \"object\" && value !== null) {\n      return { ...value };\n    }\n    return value;\n  }\n  /**\n   * Equality check for color sources.\n   * @param value1 - First color source\n   * @param value2 - Second color source\n   * @returns `true` if the color sources are equal, `false` otherwise.\n   */\n  _isSourceEqual(value1, value2) {\n    const type1 = typeof value1;\n    const type2 = typeof value2;\n    if (type1 !== type2) {\n      return false;\n    } else if (type1 === \"number\" || type1 === \"string\" || value1 instanceof Number) {\n      return value1 === value2;\n    } else if (Array.isArray(value1) && Array.isArray(value2) || ArrayBuffer.isView(value1) && ArrayBuffer.isView(value2)) {\n      if (value1.length !== value2.length) {\n        return false;\n      }\n      return value1.every((v, i) => v === value2[i]);\n    } else if (value1 !== null && value2 !== null) {\n      const keys1 = Object.keys(value1);\n      const keys2 = Object.keys(value2);\n      if (keys1.length !== keys2.length) {\n        return false;\n      }\n      return keys1.every((key) => value1[key] === value2[key]);\n    }\n    return value1 === value2;\n  }\n  /**\n   * Convert to a RGBA color object.\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color('white').toRgb(); // returns { r: 1, g: 1, b: 1, a: 1 }\n   */\n  toRgba() {\n    const [r, g, b, a] = this._components;\n    return { r, g, b, a };\n  }\n  /**\n   * Convert to a RGB color object.\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color('white').toRgb(); // returns { r: 1, g: 1, b: 1 }\n   */\n  toRgb() {\n    const [r, g, b] = this._components;\n    return { r, g, b };\n  }\n  /** Convert to a CSS-style rgba string: `rgba(255,255,255,1.0)`. */\n  toRgbaString() {\n    const [r, g, b] = this.toUint8RgbArray();\n    return `rgba(${r},${g},${b},${this.alpha})`;\n  }\n  toUint8RgbArray(out) {\n    const [r, g, b] = this._components;\n    if (!this._arrayRgb) {\n      this._arrayRgb = [];\n    }\n    out = out || this._arrayRgb;\n    out[0] = Math.round(r * 255);\n    out[1] = Math.round(g * 255);\n    out[2] = Math.round(b * 255);\n    return out;\n  }\n  toArray(out) {\n    if (!this._arrayRgba) {\n      this._arrayRgba = [];\n    }\n    out = out || this._arrayRgba;\n    const [r, g, b, a] = this._components;\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    out[3] = a;\n    return out;\n  }\n  toRgbArray(out) {\n    if (!this._arrayRgb) {\n      this._arrayRgb = [];\n    }\n    out = out || this._arrayRgb;\n    const [r, g, b] = this._components;\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    return out;\n  }\n  /**\n   * Convert to a hexadecimal number.\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color('white').toNumber(); // returns 16777215\n   */\n  toNumber() {\n    return this._int;\n  }\n  /**\n   * Convert to a BGR number\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color(0xffcc99).toBgrNumber(); // returns 0x99ccff\n   */\n  toBgrNumber() {\n    const [r, g, b] = this.toUint8RgbArray();\n    return (b << 16) + (g << 8) + r;\n  }\n  /**\n   * Convert to a hexadecimal number in little endian format (e.g., BBGGRR).\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color(0xffcc99).toLittleEndianNumber(); // returns 0x99ccff\n   * @returns {number} - The color as a number in little endian format.\n   */\n  toLittleEndianNumber() {\n    const value = this._int;\n    return (value >> 16) + (value & 65280) + ((value & 255) << 16);\n  }\n  /**\n   * Multiply with another color. This action is destructive, and will\n   * override the previous `value` property to be `null`.\n   * @param {ColorSource} value - The color to multiply by.\n   */\n  multiply(value) {\n    const [r, g, b, a] = _Color._temp.setValue(value)._components;\n    this._components[0] *= r;\n    this._components[1] *= g;\n    this._components[2] *= b;\n    this._components[3] *= a;\n    this._refreshInt();\n    this._value = null;\n    return this;\n  }\n  /**\n   * Converts color to a premultiplied alpha format. This action is destructive, and will\n   * override the previous `value` property to be `null`.\n   * @param alpha - The alpha to multiply by.\n   * @param {boolean} [applyToRGB=true] - Whether to premultiply RGB channels.\n   * @returns {Color} - Itself.\n   */\n  premultiply(alpha, applyToRGB = true) {\n    if (applyToRGB) {\n      this._components[0] *= alpha;\n      this._components[1] *= alpha;\n      this._components[2] *= alpha;\n    }\n    this._components[3] = alpha;\n    this._refreshInt();\n    this._value = null;\n    return this;\n  }\n  /**\n   * Premultiplies alpha with current color.\n   * @param {number} alpha - The alpha to multiply by.\n   * @param {boolean} [applyToRGB=true] - Whether to premultiply RGB channels.\n   * @returns {number} tint multiplied by alpha\n   */\n  toPremultiplied(alpha, applyToRGB = true) {\n    if (alpha === 1) {\n      return (255 << 24) + this._int;\n    }\n    if (alpha === 0) {\n      return applyToRGB ? 0 : this._int;\n    }\n    let r = this._int >> 16 & 255;\n    let g = this._int >> 8 & 255;\n    let b = this._int & 255;\n    if (applyToRGB) {\n      r = r * alpha + 0.5 | 0;\n      g = g * alpha + 0.5 | 0;\n      b = b * alpha + 0.5 | 0;\n    }\n    return (alpha * 255 << 24) + (r << 16) + (g << 8) + b;\n  }\n  /**\n   * Convert to a hexidecimal string.\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color('white').toHex(); // returns \"#ffffff\"\n   */\n  toHex() {\n    const hexString = this._int.toString(16);\n    return `#${\"000000\".substring(0, 6 - hexString.length) + hexString}`;\n  }\n  /**\n   * Convert to a hexidecimal string with alpha.\n   * @example\n   * import { Color } from 'pixi.js';\n   * new Color('white').toHexa(); // returns \"#ffffffff\"\n   */\n  toHexa() {\n    const alphaValue = Math.round(this._components[3] * 255);\n    const alphaString = alphaValue.toString(16);\n    return this.toHex() + \"00\".substring(0, 2 - alphaString.length) + alphaString;\n  }\n  /**\n   * Set alpha, suitable for chaining.\n   * @param alpha\n   */\n  setAlpha(alpha) {\n    this._components[3] = this._clamp(alpha);\n    return this;\n  }\n  /**\n   * Normalize the input value into rgba\n   * @param value - Input value\n   */\n  _normalize(value) {\n    let r;\n    let g;\n    let b;\n    let a;\n    if ((typeof value === \"number\" || value instanceof Number) && value >= 0 && value <= 16777215) {\n      const int = value;\n      r = (int >> 16 & 255) / 255;\n      g = (int >> 8 & 255) / 255;\n      b = (int & 255) / 255;\n      a = 1;\n    } else if ((Array.isArray(value) || value instanceof Float32Array) && value.length >= 3 && value.length <= 4) {\n      value = this._clamp(value);\n      [r, g, b, a = 1] = value;\n    } else if ((value instanceof Uint8Array || value instanceof Uint8ClampedArray) && value.length >= 3 && value.length <= 4) {\n      value = this._clamp(value, 0, 255);\n      [r, g, b, a = 255] = value;\n      r /= 255;\n      g /= 255;\n      b /= 255;\n      a /= 255;\n    } else if (typeof value === \"string\" || typeof value === \"object\") {\n      if (typeof value === \"string\") {\n        const match = _Color.HEX_PATTERN.exec(value);\n        if (match) {\n          value = `#${match[2]}`;\n        }\n      }\n      const color = colord(value);\n      if (color.isValid()) {\n        ({ r, g, b, a } = color.rgba);\n        r /= 255;\n        g /= 255;\n        b /= 255;\n      }\n    }\n    if (r !== void 0) {\n      this._components[0] = r;\n      this._components[1] = g;\n      this._components[2] = b;\n      this._components[3] = a;\n      this._refreshInt();\n    } else {\n      throw new Error(`Unable to convert color ${value}`);\n    }\n  }\n  /** Refresh the internal color rgb number */\n  _refreshInt() {\n    this._clamp(this._components);\n    const [r, g, b] = this._components;\n    this._int = (r * 255 << 16) + (g * 255 << 8) + (b * 255 | 0);\n  }\n  /**\n   * Clamps values to a range. Will override original values\n   * @param value - Value(s) to clamp\n   * @param min - Minimum value\n   * @param max - Maximum value\n   */\n  _clamp(value, min = 0, max = 1) {\n    if (typeof value === \"number\") {\n      return Math.min(Math.max(value, min), max);\n    }\n    value.forEach((v, i) => {\n      value[i] = Math.min(Math.max(v, min), max);\n    });\n    return value;\n  }\n  /**\n   * Check if the value is a color-like object\n   * @param value - Value to check\n   * @returns True if the value is a color-like object\n   * @static\n   * @example\n   * import { Color } from 'pixi.js';\n   * Color.isColorLike('white'); // returns true\n   * Color.isColorLike(0xffffff); // returns true\n   * Color.isColorLike([1, 1, 1]); // returns true\n   */\n  static isColorLike(value) {\n    return typeof value === \"number\" || typeof value === \"string\" || value instanceof Number || value instanceof _Color || Array.isArray(value) || value instanceof Uint8Array || value instanceof Uint8ClampedArray || value instanceof Float32Array || value.r !== void 0 && value.g !== void 0 && value.b !== void 0 || value.r !== void 0 && value.g !== void 0 && value.b !== void 0 && value.a !== void 0 || value.h !== void 0 && value.s !== void 0 && value.l !== void 0 || value.h !== void 0 && value.s !== void 0 && value.l !== void 0 && value.a !== void 0 || value.h !== void 0 && value.s !== void 0 && value.v !== void 0 || value.h !== void 0 && value.s !== void 0 && value.v !== void 0 && value.a !== void 0;\n  }\n};\n/**\n * Default Color object for static uses\n * @example\n * import { Color } from 'pixi.js';\n * Color.shared.setValue(0xffffff).toHex(); // '#ffffff'\n */\n_Color.shared = new _Color();\n/**\n * Temporary Color object for static uses internally.\n * As to not conflict with Color.shared.\n * @ignore\n */\n_Color._temp = new _Color();\n/** Pattern for hex strings */\n// eslint-disable-next-line @typescript-eslint/naming-convention\n_Color.HEX_PATTERN = /^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;\nlet Color = _Color;\n\nexport { Color };\n//# sourceMappingURL=Color.mjs.map\n","\"use strict\";\nconst cullingMixin = {\n  cullArea: null,\n  cullable: false,\n  cullableChildren: true\n};\n\nexport { cullingMixin };\n//# sourceMappingURL=cullingMixin.mjs.map\n","\"use strict\";\nfunction removeItems(arr, startIdx, removeCount) {\n  const length = arr.length;\n  let i;\n  if (startIdx >= length || removeCount === 0) {\n    return;\n  }\n  removeCount = startIdx + removeCount > length ? length - startIdx : removeCount;\n  const len = length - removeCount;\n  for (i = startIdx; i < len; ++i) {\n    arr[i] = arr[i + removeCount];\n  }\n  arr.length = len;\n}\n\nexport { removeItems };\n//# sourceMappingURL=removeItems.mjs.map\n","import { removeItems } from '../../../utils/data/removeItems.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst childrenHelperMixin = {\n  allowChildren: true,\n  /**\n   * Removes all children from this container that are within the begin and end indexes.\n   * @param beginIndex - The beginning position.\n   * @param endIndex - The ending position. Default value is size of the container.\n   * @returns - List of removed children\n   * @memberof scene.Container#\n   */\n  removeChildren(beginIndex = 0, endIndex) {\n    const end = endIndex ?? this.children.length;\n    const range = end - beginIndex;\n    const removed = [];\n    if (range > 0 && range <= end) {\n      for (let i = end - 1; i >= beginIndex; i--) {\n        const child = this.children[i];\n        if (!child)\n          continue;\n        if (this.renderGroup) {\n          this.renderGroup.removeChild(child);\n        }\n        removed.push(child);\n        child.parent = null;\n      }\n      removeItems(this.children, beginIndex, end);\n      for (let i = 0; i < removed.length; ++i) {\n        this.emit(\"childRemoved\", removed[i], this, i);\n        removed[i].emit(\"removed\", this);\n      }\n      return removed;\n    } else if (range === 0 && this.children.length === 0) {\n      return removed;\n    }\n    throw new RangeError(\"removeChildren: numeric values are outside the acceptable range.\");\n  },\n  /**\n   * Removes a child from the specified index position.\n   * @param index - The index to get the child from\n   * @returns The child that was removed.\n   * @memberof scene.Container#\n   */\n  removeChildAt(index) {\n    const child = this.getChildAt(index);\n    return this.removeChild(child);\n  },\n  /**\n   * Returns the child at the specified index\n   * @param index - The index to get the child at\n   * @returns - The child at the given index, if any.\n   * @memberof scene.Container#\n   */\n  getChildAt(index) {\n    if (index < 0 || index >= this.children.length) {\n      throw new Error(`getChildAt: Index (${index}) does not exist.`);\n    }\n    return this.children[index];\n  },\n  /**\n   * Changes the position of an existing child in the container container\n   * @param child - The child Container instance for which you want to change the index number\n   * @param index - The resulting index number for the child container\n   * @memberof scene.Container#\n   */\n  setChildIndex(child, index) {\n    if (index < 0 || index >= this.children.length) {\n      throw new Error(`The index ${index} supplied is out of bounds ${this.children.length}`);\n    }\n    this.getChildIndex(child);\n    this.addChildAt(child, index);\n  },\n  /**\n   * Returns the index position of a child Container instance\n   * @param child - The Container instance to identify\n   * @returns - The index position of the child container to identify\n   * @memberof scene.Container#\n   */\n  getChildIndex(child) {\n    const index = this.children.indexOf(child);\n    if (index === -1) {\n      throw new Error(\"The supplied Container must be a child of the caller\");\n    }\n    return index;\n  },\n  /**\n   * Adds a child to the container at a specified index. If the index is out of bounds an error will be thrown.\n   * If the child is already in this container, it will be moved to the specified index.\n   * @param {Container} child - The child to add.\n   * @param {number} index - The absolute index where the child will be positioned at the end of the operation.\n   * @returns {Container} The child that was added.\n   * @memberof scene.Container#\n   */\n  addChildAt(child, index) {\n    if (!this.allowChildren) {\n      deprecation(v8_0_0, \"addChildAt: Only Containers will be allowed to add children in v8.0.0\");\n    }\n    const { children } = this;\n    if (index < 0 || index > children.length) {\n      throw new Error(`${child}addChildAt: The index ${index} supplied is out of bounds ${children.length}`);\n    }\n    if (child.parent) {\n      const currentIndex = child.parent.children.indexOf(child);\n      if (child.parent === this && currentIndex === index) {\n        return child;\n      }\n      if (currentIndex !== -1) {\n        child.parent.children.splice(currentIndex, 1);\n      }\n    }\n    if (index === children.length) {\n      children.push(child);\n    } else {\n      children.splice(index, 0, child);\n    }\n    child.parent = this;\n    child.didChange = true;\n    child.didViewUpdate = false;\n    child._updateFlags = 15;\n    if (this.renderGroup) {\n      this.renderGroup.addChild(child);\n    }\n    if (this.sortableChildren)\n      this.sortDirty = true;\n    this.emit(\"childAdded\", child, this, index);\n    child.emit(\"added\", this);\n    return child;\n  },\n  /**\n   * Swaps the position of 2 Containers within this container.\n   * @param child - First container to swap\n   * @param child2 - Second container to swap\n   */\n  swapChildren(child, child2) {\n    if (child === child2) {\n      return;\n    }\n    const index1 = this.getChildIndex(child);\n    const index2 = this.getChildIndex(child2);\n    this.children[index1] = child2;\n    this.children[index2] = child;\n  },\n  /**\n   * Remove the Container from its parent Container. If the Container has no parent, do nothing.\n   * @memberof scene.Container#\n   */\n  removeFromParent() {\n    this.parent?.removeChild(this);\n  }\n};\n\nexport { childrenHelperMixin };\n//# sourceMappingURL=childrenHelperMixin.mjs.map\n","\"use strict\";\nclass FilterEffect {\n  constructor(options) {\n    this.pipe = \"filter\";\n    this.priority = 1;\n    this.filters = options?.filters;\n    this.filterArea = options?.filterArea;\n  }\n  destroy() {\n    for (let i = 0; i < this.filters.length; i++) {\n      this.filters[i].destroy();\n    }\n    this.filters = null;\n    this.filterArea = null;\n  }\n}\n\nexport { FilterEffect };\n//# sourceMappingURL=FilterEffect.mjs.map\n","\"use strict\";\nclass Pool {\n  /**\n   * Constructs a new Pool.\n   * @param ClassType - The constructor of the items in the pool.\n   * @param {number} [initialSize] - The initial size of the pool.\n   */\n  constructor(ClassType, initialSize) {\n    this._pool = [];\n    this._count = 0;\n    this._index = 0;\n    this._classType = ClassType;\n    if (initialSize) {\n      this.prepopulate(initialSize);\n    }\n  }\n  /**\n   * Prepopulates the pool with a given number of items.\n   * @param total - The number of items to add to the pool.\n   */\n  prepopulate(total) {\n    for (let i = 0; i < total; i++) {\n      this._pool[this._index++] = new this._classType();\n    }\n    this._count += total;\n  }\n  /**\n   * Gets an item from the pool. Calls the item's `init` method if it exists.\n   * If there are no items left in the pool, a new one will be created.\n   * @param {unknown} [data] - Optional data to pass to the item's constructor.\n   * @returns {T} The item from the pool.\n   */\n  get(data) {\n    let item;\n    if (this._index > 0) {\n      item = this._pool[--this._index];\n    } else {\n      item = new this._classType();\n    }\n    item.init?.(data);\n    return item;\n  }\n  /**\n   * Returns an item to the pool. Calls the item's `reset` method if it exists.\n   * @param {T} item - The item to return to the pool.\n   */\n  return(item) {\n    item.reset?.();\n    this._pool[this._index++] = item;\n  }\n  /**\n   * Gets the number of items in the pool.\n   * @readonly\n   * @member {number}\n   */\n  get totalSize() {\n    return this._count;\n  }\n  /**\n   * Gets the number of items in the pool that are free to use without needing to create more.\n   * @readonly\n   * @member {number}\n   */\n  get totalFree() {\n    return this._index;\n  }\n  /**\n   * Gets the number of items in the pool that are currently in use.\n   * @readonly\n   * @member {number}\n   */\n  get totalUsed() {\n    return this._count - this._index;\n  }\n}\n\nexport { Pool };\n//# sourceMappingURL=Pool.mjs.map\n","import { Pool } from './Pool.mjs';\n\n\"use strict\";\nclass PoolGroupClass {\n  constructor() {\n    /**\n     * A map to store the pools by their class type.\n     * @private\n     */\n    this._poolsByClass = /* @__PURE__ */ new Map();\n  }\n  /**\n   * Prepopulates a specific pool with a given number of items.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} Class - The constructor of the items in the pool.\n   * @param {number} total - The number of items to add to the pool.\n   */\n  prepopulate(Class, total) {\n    const classPool = this.getPool(Class);\n    classPool.prepopulate(total);\n  }\n  /**\n   * Gets an item from a specific pool.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} Class - The constructor of the items in the pool.\n   * @param {unknown} [data] - Optional data to pass to the item's constructor.\n   * @returns {T} The item from the pool.\n   */\n  get(Class, data) {\n    const pool = this.getPool(Class);\n    return pool.get(data);\n  }\n  /**\n   * Returns an item to its respective pool.\n   * @param {PoolItem} item - The item to return to the pool.\n   */\n  return(item) {\n    const pool = this.getPool(item.constructor);\n    pool.return(item);\n  }\n  /**\n   * Gets a specific pool based on the class type.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} ClassType - The constructor of the items in the pool.\n   * @returns {Pool<T>} The pool of the given class type.\n   */\n  getPool(ClassType) {\n    if (!this._poolsByClass.has(ClassType)) {\n      this._poolsByClass.set(ClassType, new Pool(ClassType));\n    }\n    return this._poolsByClass.get(ClassType);\n  }\n  /** gets the usage stats of each pool in the system */\n  stats() {\n    const stats = {};\n    this._poolsByClass.forEach((pool) => {\n      const name = stats[pool._classType.name] ? pool._classType.name + pool._classType.ID : pool._classType.name;\n      stats[name] = {\n        free: pool.totalFree,\n        used: pool.totalUsed,\n        size: pool.totalSize\n      };\n    });\n    return stats;\n  }\n}\nconst BigPool = new PoolGroupClass();\n\nexport { BigPool, PoolGroupClass };\n//# sourceMappingURL=PoolGroup.mjs.map\n","import { extensions, ExtensionType } from '../../extensions/Extensions.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\n\n\"use strict\";\nclass MaskEffectManagerClass {\n  constructor() {\n    /**\n     * @private\n     */\n    this._effectClasses = [];\n    this._tests = [];\n    this._initialized = false;\n  }\n  init() {\n    if (this._initialized)\n      return;\n    this._initialized = true;\n    this._effectClasses.forEach((test) => {\n      this.add({\n        test: test.test,\n        maskClass: test\n      });\n    });\n  }\n  add(test) {\n    this._tests.push(test);\n  }\n  getMaskEffect(item) {\n    if (!this._initialized)\n      this.init();\n    for (let i = 0; i < this._tests.length; i++) {\n      const test = this._tests[i];\n      if (test.test(item)) {\n        return BigPool.get(test.maskClass, item);\n      }\n    }\n    return item;\n  }\n  returnMaskEffect(effect) {\n    BigPool.return(effect);\n  }\n}\nconst MaskEffectManager = new MaskEffectManagerClass();\nextensions.handleByList(ExtensionType.MaskEffect, MaskEffectManager._effectClasses);\n\nexport { MaskEffectManager, MaskEffectManagerClass };\n//# sourceMappingURL=MaskEffectManager.mjs.map\n","import { FilterEffect } from '../../../filters/FilterEffect.mjs';\nimport { MaskEffectManager } from '../../../rendering/mask/MaskEffectManager.mjs';\nimport { BigPool } from '../../../utils/pool/PoolGroup.mjs';\n\n\"use strict\";\nconst effectsMixin = {\n  _mask: null,\n  _filters: null,\n  /**\n   * @todo Needs docs.\n   * @memberof scene.Container#\n   * @type {Array<Effect>}\n   */\n  effects: [],\n  /**\n   * @todo Needs docs.\n   * @param effect - The effect to add.\n   * @memberof scene.Container#\n   * @ignore\n   */\n  addEffect(effect) {\n    const index = this.effects.indexOf(effect);\n    if (index !== -1)\n      return;\n    this.effects.push(effect);\n    this.effects.sort((a, b) => a.priority - b.priority);\n    if (this.renderGroup) {\n      this.renderGroup.structureDidChange = true;\n    }\n    this._updateIsSimple();\n  },\n  /**\n   * @todo Needs docs.\n   * @param effect - The effect to remove.\n   * @memberof scene.Container#\n   * @ignore\n   */\n  removeEffect(effect) {\n    const index = this.effects.indexOf(effect);\n    if (index === -1)\n      return;\n    this.effects.splice(index, 1);\n    if (!this.isRenderGroupRoot && this.renderGroup) {\n      this.renderGroup.structureDidChange = true;\n    }\n    this._updateIsSimple();\n  },\n  set mask(value) {\n    this._mask || (this._mask = { mask: null, effect: null });\n    if (this._mask.mask === value)\n      return;\n    if (this._mask.effect) {\n      this.removeEffect(this._mask.effect);\n      MaskEffectManager.returnMaskEffect(this._mask.effect);\n      this._mask.effect = null;\n    }\n    this._mask.mask = value;\n    if (value === null || value === void 0)\n      return;\n    const effect = MaskEffectManager.getMaskEffect(value);\n    this._mask.effect = effect;\n    this.addEffect(effect);\n  },\n  /**\n   * Sets a mask for the displayObject. A mask is an object that limits the visibility of an\n   * object to the shape of the mask applied to it. In PixiJS a regular mask must be a\n   * {@link Graphics} or a {@link Sprite} object. This allows for much faster masking in canvas as it\n   * utilities shape clipping. Furthermore, a mask of an object must be in the subtree of its parent.\n   * Otherwise, `getLocalBounds` may calculate incorrect bounds, which makes the container's width and height wrong.\n   * To remove a mask, set this property to `null`.\n   *\n   * For sprite mask both alpha and red channel are used. Black mask is the same as transparent mask.\n   * @example\n   * import { Graphics, Sprite } from 'pixi.js';\n   *\n   * const graphics = new Graphics();\n   * graphics.beginFill(0xFF3300);\n   * graphics.drawRect(50, 250, 100, 100);\n   * graphics.endFill();\n   *\n   * const sprite = new Sprite(texture);\n   * sprite.mask = graphics;\n   * @memberof scene.Container#\n   */\n  get mask() {\n    return this._mask?.mask;\n  },\n  set filters(value) {\n    if (!Array.isArray(value) && value)\n      value = [value];\n    value = value;\n    this._filters || (this._filters = { filters: null, effect: null, filterArea: null });\n    const hasFilters = value?.length > 0;\n    const didChange = this._filters.effect && !hasFilters || !this._filters.effect && hasFilters;\n    value = Array.isArray(value) ? value.slice(0) : value;\n    this._filters.filters = Object.freeze(value);\n    if (didChange) {\n      if (hasFilters) {\n        const effect = BigPool.get(FilterEffect);\n        this._filters.effect = effect;\n        this.addEffect(effect);\n      } else {\n        const effect = this._filters.effect;\n        this.removeEffect(effect);\n        effect.filterArea = null;\n        effect.filters = null;\n        this._filters.effect = null;\n        BigPool.return(effect);\n      }\n    }\n    if (hasFilters) {\n      this._filters.effect.filters = value;\n      this._filters.effect.filterArea = this.filterArea;\n    }\n  },\n  /**\n   * Sets the filters for the displayObject.\n   * IMPORTANT: This is a WebGL only feature and will be ignored by the canvas renderer.\n   * To remove filters simply set this property to `'null'`.\n   * @memberof scene.Container#\n   */\n  get filters() {\n    return this._filters?.filters;\n  },\n  set filterArea(value) {\n    this._filters || (this._filters = { filters: null, effect: null, filterArea: null });\n    this._filters.filterArea = value;\n  },\n  /**\n   * The area the filter is applied to. This is used as more of an optimization\n   * rather than figuring out the dimensions of the displayObject each frame you can set this rectangle.\n   *\n   * Also works as an interaction mask.\n   * @memberof scene.Container#\n   */\n  get filterArea() {\n    return this._filters?.filterArea;\n  }\n};\n\nexport { effectsMixin };\n//# sourceMappingURL=effectsMixin.mjs.map\n","import { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst findMixin = {\n  /**\n   * The instance label of the object.\n   * @memberof scene.Container#\n   * @member {string} label\n   */\n  label: null,\n  /**\n   * The instance name of the object.\n   * @deprecated since 8.0.0\n   * @see scene.Container#label\n   * @member {string} name\n   * @memberof scene.Container#\n   */\n  get name() {\n    deprecation(v8_0_0, \"Container.name property has been removed, use Container.label instead\");\n    return this.label;\n  },\n  set name(value) {\n    deprecation(v8_0_0, \"Container.name property has been removed, use Container.label instead\");\n    this.label = value;\n  },\n  /**\n   * @method getChildByName\n   * @deprecated since 8.0.0\n   * @param {string} name - Instance name.\n   * @param {boolean}[deep=false] - Whether to search recursively\n   * @returns {Container} The child with the specified name.\n   * @see scene.Container#getChildByLabel\n   * @memberof scene.Container#\n   */\n  getChildByName(name, deep = false) {\n    return this.getChildByLabel(name, deep);\n  },\n  /**\n   * Returns the first child in the container with the specified label.\n   *\n   * Recursive searches are done in a pre-order traversal.\n   * @memberof scene.Container#\n   * @param {string|RegExp} label - Instance label.\n   * @param {boolean}[deep=false] - Whether to search recursively\n   * @returns {Container} The child with the specified label.\n   */\n  getChildByLabel(label, deep = false) {\n    const children = this.children;\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      if (child.label === label || label instanceof RegExp && label.test(child.label))\n        return child;\n    }\n    if (deep) {\n      for (let i = 0; i < children.length; i++) {\n        const child = children[i];\n        const found = child.getChildByLabel(label, true);\n        if (found) {\n          return found;\n        }\n      }\n    }\n    return null;\n  },\n  /**\n   * Returns all children in the container with the specified label.\n   * @memberof scene.Container#\n   * @param {string|RegExp} label - Instance label.\n   * @param {boolean}[deep=false] - Whether to search recursively\n   * @param {Container[]} [out=[]] - The array to store matching children in.\n   * @returns {Container[]} An array of children with the specified label.\n   */\n  getChildrenByLabel(label, deep = false, out = []) {\n    const children = this.children;\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      if (child.label === label || label instanceof RegExp && label.test(child.label)) {\n        out.push(child);\n      }\n    }\n    if (deep) {\n      for (let i = 0; i < children.length; i++) {\n        children[i].getChildrenByLabel(label, true, out);\n      }\n    }\n    return out;\n  }\n};\n\nexport { findMixin };\n//# sourceMappingURL=findMixin.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Rectangle } from '../../../maths/shapes/Rectangle.mjs';\n\n\"use strict\";\nconst defaultMatrix = new Matrix();\nclass Bounds {\n  constructor(minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity) {\n    /** @default Infinity */\n    this.minX = Infinity;\n    /** @default Infinity */\n    this.minY = Infinity;\n    /** @default -Infinity */\n    this.maxX = -Infinity;\n    /** @default -Infinity */\n    this.maxY = -Infinity;\n    this.matrix = defaultMatrix;\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Checks if bounds are empty.\n   * @returns - True if empty.\n   */\n  isEmpty() {\n    return this.minX > this.maxX || this.minY > this.maxY;\n  }\n  /** The bounding rectangle of the bounds. */\n  get rectangle() {\n    if (!this._rectangle) {\n      this._rectangle = new Rectangle();\n    }\n    const rectangle = this._rectangle;\n    if (this.minX > this.maxX || this.minY > this.maxY) {\n      rectangle.x = 0;\n      rectangle.y = 0;\n      rectangle.width = 0;\n      rectangle.height = 0;\n    } else {\n      rectangle.copyFromBounds(this);\n    }\n    return rectangle;\n  }\n  /** Clears the bounds and resets. */\n  clear() {\n    this.minX = Infinity;\n    this.minY = Infinity;\n    this.maxX = -Infinity;\n    this.maxY = -Infinity;\n    this.matrix = defaultMatrix;\n    return this;\n  }\n  /**\n   * Sets the bounds.\n   * @param x0 - left X of frame\n   * @param y0 - top Y of frame\n   * @param x1 - right X of frame\n   * @param y1 - bottom Y of frame\n   */\n  set(x0, y0, x1, y1) {\n    this.minX = x0;\n    this.minY = y0;\n    this.maxX = x1;\n    this.maxY = y1;\n  }\n  /**\n   * Adds sprite frame\n   * @param x0 - left X of frame\n   * @param y0 - top Y of frame\n   * @param x1 - right X of frame\n   * @param y1 - bottom Y of frame\n   * @param matrix\n   */\n  addFrame(x0, y0, x1, y1, matrix) {\n    matrix || (matrix = this.matrix);\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    let minX = this.minX;\n    let minY = this.minY;\n    let maxX = this.maxX;\n    let maxY = this.maxY;\n    let x = a * x0 + c * y0 + tx;\n    let y = b * x0 + d * y0 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x1 + c * y0 + tx;\n    y = b * x1 + d * y0 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x0 + c * y1 + tx;\n    y = b * x0 + d * y1 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x1 + c * y1 + tx;\n    y = b * x1 + d * y1 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Adds a rectangle to the bounds.\n   * @param rect - The rectangle to be added.\n   * @param matrix - The matrix to apply to the bounds.\n   */\n  addRect(rect, matrix) {\n    this.addFrame(rect.x, rect.y, rect.x + rect.width, rect.y + rect.height, matrix);\n  }\n  /**\n   * Adds other {@link Bounds}.\n   * @param bounds - The Bounds to be added\n   * @param matrix\n   */\n  addBounds(bounds, matrix) {\n    this.addFrame(bounds.minX, bounds.minY, bounds.maxX, bounds.maxY, matrix);\n  }\n  /**\n   * Adds other Bounds, masked with Bounds.\n   * @param mask - The Bounds to be added.\n   */\n  addBoundsMask(mask) {\n    this.minX = this.minX > mask.minX ? this.minX : mask.minX;\n    this.minY = this.minY > mask.minY ? this.minY : mask.minY;\n    this.maxX = this.maxX < mask.maxX ? this.maxX : mask.maxX;\n    this.maxY = this.maxY < mask.maxY ? this.maxY : mask.maxY;\n  }\n  /**\n   * Adds other Bounds, multiplied with matrix.\n   * @param matrix - The matrix to apply to the bounds.\n   */\n  applyMatrix(matrix) {\n    const minX = this.minX;\n    const minY = this.minY;\n    const maxX = this.maxX;\n    const maxY = this.maxY;\n    const { a, b, c, d, tx, ty } = matrix;\n    let x = a * minX + c * minY + tx;\n    let y = b * minX + d * minY + ty;\n    this.minX = x;\n    this.minY = y;\n    this.maxX = x;\n    this.maxY = y;\n    x = a * maxX + c * minY + tx;\n    y = b * maxX + d * minY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n    x = a * minX + c * maxY + tx;\n    y = b * minX + d * maxY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n    x = a * maxX + c * maxY + tx;\n    y = b * maxX + d * maxY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n  }\n  /**\n   * Resizes the bounds object to include the given rectangle.\n   * @param rect - The rectangle to be included.\n   */\n  fit(rect) {\n    if (this.minX < rect.left)\n      this.minX = rect.left;\n    if (this.maxX > rect.right)\n      this.maxX = rect.right;\n    if (this.minY < rect.top)\n      this.minY = rect.top;\n    if (this.maxY > rect.bottom)\n      this.maxY = rect.bottom;\n    return this;\n  }\n  /**\n   * Resizes the bounds object to include the given bounds.\n   * @param left - The left value of the bounds.\n   * @param right - The right value of the bounds.\n   * @param top - The top value of the bounds.\n   * @param bottom - The bottom value of the bounds.\n   */\n  fitBounds(left, right, top, bottom) {\n    if (this.minX < left)\n      this.minX = left;\n    if (this.maxX > right)\n      this.maxX = right;\n    if (this.minY < top)\n      this.minY = top;\n    if (this.maxY > bottom)\n      this.maxY = bottom;\n    return this;\n  }\n  /**\n   * Pads bounds object, making it grow in all directions.\n   * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n   * @param paddingX - The horizontal padding amount.\n   * @param paddingY - The vertical padding amount.\n   */\n  pad(paddingX, paddingY = paddingX) {\n    this.minX -= paddingX;\n    this.maxX += paddingX;\n    this.minY -= paddingY;\n    this.maxY += paddingY;\n    return this;\n  }\n  /** Ceils the bounds. */\n  ceil() {\n    this.minX = Math.floor(this.minX);\n    this.minY = Math.floor(this.minY);\n    this.maxX = Math.ceil(this.maxX);\n    this.maxY = Math.ceil(this.maxY);\n    return this;\n  }\n  /** Clones the bounds. */\n  clone() {\n    return new Bounds(this.minX, this.minY, this.maxX, this.maxY);\n  }\n  /**\n   * Scales the bounds by the given values\n   * @param x - The X value to scale by.\n   * @param y - The Y value to scale by.\n   */\n  scale(x, y = x) {\n    this.minX *= x;\n    this.minY *= y;\n    this.maxX *= x;\n    this.maxY *= y;\n    return this;\n  }\n  /** the x value of the bounds. */\n  get x() {\n    return this.minX;\n  }\n  set x(value) {\n    const width = this.maxX - this.minX;\n    this.minX = value;\n    this.maxX = value + width;\n  }\n  /** the y value of the bounds. */\n  get y() {\n    return this.minY;\n  }\n  set y(value) {\n    const height = this.maxY - this.minY;\n    this.minY = value;\n    this.maxY = value + height;\n  }\n  /** the width value of the bounds. */\n  get width() {\n    return this.maxX - this.minX;\n  }\n  set width(value) {\n    this.maxX = this.minX + value;\n  }\n  /** the height value of the bounds. */\n  get height() {\n    return this.maxY - this.minY;\n  }\n  set height(value) {\n    this.maxY = this.minY + value;\n  }\n  /** the left value of the bounds. */\n  get left() {\n    return this.minX;\n  }\n  /** the right value of the bounds. */\n  get right() {\n    return this.maxX;\n  }\n  /** the top value of the bounds. */\n  get top() {\n    return this.minY;\n  }\n  /** the bottom value of the bounds. */\n  get bottom() {\n    return this.maxY;\n  }\n  /** Is the bounds positive. */\n  get isPositive() {\n    return this.maxX - this.minX > 0 && this.maxY - this.minY > 0;\n  }\n  get isValid() {\n    return this.minX + this.minY !== Infinity;\n  }\n  /**\n   * Adds screen vertices from array\n   * @param vertexData - calculated vertices\n   * @param beginOffset - begin offset\n   * @param endOffset - end offset, excluded\n   * @param matrix\n   */\n  addVertexData(vertexData, beginOffset, endOffset, matrix) {\n    let minX = this.minX;\n    let minY = this.minY;\n    let maxX = this.maxX;\n    let maxY = this.maxY;\n    matrix || (matrix = this.matrix);\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    for (let i = beginOffset; i < endOffset; i += 2) {\n      const localX = vertexData[i];\n      const localY = vertexData[i + 1];\n      const x = a * localX + c * localY + tx;\n      const y = b * localX + d * localY + ty;\n      minX = x < minX ? x : minX;\n      minY = y < minY ? y : minY;\n      maxX = x > maxX ? x : maxX;\n      maxY = y > maxY ? y : maxY;\n    }\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Checks if the point is contained within the bounds.\n   * @param x - x coordinate\n   * @param y - y coordinate\n   */\n  containsPoint(x, y) {\n    if (this.minX <= x && this.minY <= y && this.maxX >= x && this.maxY >= y) {\n      return true;\n    }\n    return false;\n  }\n  toString() {\n    return `[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`;\n  }\n}\n\nexport { Bounds };\n//# sourceMappingURL=Bounds.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Pool } from '../../../../utils/pool/Pool.mjs';\nimport { Bounds } from '../Bounds.mjs';\n\n\"use strict\";\nconst matrixPool = new Pool(Matrix);\nconst boundsPool = new Pool(Bounds);\n\nexport { boundsPool, matrixPool };\n//# sourceMappingURL=matrixAndBoundsPool.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { matrixPool, boundsPool } from './utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nfunction getGlobalBounds(target, skipUpdateTransform, bounds) {\n  bounds.clear();\n  let parentTransform;\n  let pooledMatrix;\n  if (target.parent) {\n    if (!skipUpdateTransform) {\n      pooledMatrix = matrixPool.get().identity();\n      parentTransform = updateTransformBackwards(target, pooledMatrix);\n    } else {\n      parentTransform = target.parent.worldTransform;\n    }\n  } else {\n    parentTransform = Matrix.IDENTITY;\n  }\n  _getGlobalBounds(target, bounds, parentTransform, skipUpdateTransform);\n  if (pooledMatrix) {\n    matrixPool.return(pooledMatrix);\n  }\n  if (!bounds.isValid) {\n    bounds.set(0, 0, 0, 0);\n  }\n  return bounds;\n}\nfunction _getGlobalBounds(target, bounds, parentTransform, skipUpdateTransform) {\n  if (!target.visible || !target.measurable)\n    return;\n  let worldTransform;\n  if (!skipUpdateTransform) {\n    target.updateLocalTransform();\n    worldTransform = matrixPool.get();\n    worldTransform.appendFrom(target.localTransform, parentTransform);\n  } else {\n    worldTransform = target.worldTransform;\n  }\n  const parentBounds = bounds;\n  const preserveBounds = !!target.effects.length;\n  if (preserveBounds) {\n    bounds = boundsPool.get().clear();\n  }\n  if (target.boundsArea) {\n    bounds.addRect(target.boundsArea, worldTransform);\n  } else {\n    if (target.addBounds) {\n      bounds.matrix = worldTransform;\n      target.addBounds(bounds);\n    }\n    for (let i = 0; i < target.children.length; i++) {\n      _getGlobalBounds(target.children[i], bounds, worldTransform, skipUpdateTransform);\n    }\n  }\n  if (preserveBounds) {\n    for (let i = 0; i < target.effects.length; i++) {\n      target.effects[i].addBounds?.(bounds);\n    }\n    parentBounds.addBounds(bounds, Matrix.IDENTITY);\n    boundsPool.return(bounds);\n  }\n  if (!skipUpdateTransform) {\n    matrixPool.return(worldTransform);\n  }\n}\nfunction updateTransformBackwards(target, parentTransform) {\n  const parent = target.parent;\n  if (parent) {\n    updateTransformBackwards(parent, parentTransform);\n    parent.updateLocalTransform();\n    parentTransform.append(parent.localTransform);\n  }\n  return parentTransform;\n}\n\nexport { _getGlobalBounds, getGlobalBounds, updateTransformBackwards };\n//# sourceMappingURL=getGlobalBounds.mjs.map\n","\"use strict\";\nlet warnCount = 0;\nconst maxWarnings = 500;\nfunction warn(...args) {\n  if (warnCount === maxWarnings)\n    return;\n  warnCount++;\n  if (warnCount === maxWarnings) {\n    console.warn(\"PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS.\");\n  } else {\n    console.warn(\"PixiJS Warning: \", ...args);\n  }\n}\n\nexport { warn };\n//# sourceMappingURL=warn.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\nimport { matrixPool, boundsPool } from './utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nfunction getLocalBounds(target, bounds, relativeMatrix) {\n  bounds.clear();\n  relativeMatrix || (relativeMatrix = Matrix.IDENTITY);\n  _getLocalBounds(target, bounds, relativeMatrix, target, true);\n  if (!bounds.isValid) {\n    bounds.set(0, 0, 0, 0);\n  }\n  return bounds;\n}\nfunction _getLocalBounds(target, bounds, parentTransform, rootContainer, isRoot) {\n  let relativeTransform;\n  if (!isRoot) {\n    if (!target.visible || !target.measurable)\n      return;\n    target.updateLocalTransform();\n    const localTransform = target.localTransform;\n    relativeTransform = matrixPool.get();\n    relativeTransform.appendFrom(localTransform, parentTransform);\n  } else {\n    relativeTransform = matrixPool.get();\n    relativeTransform = parentTransform.copyTo(relativeTransform);\n  }\n  const parentBounds = bounds;\n  const preserveBounds = !!target.effects.length;\n  if (preserveBounds) {\n    bounds = boundsPool.get().clear();\n  }\n  if (target.boundsArea) {\n    bounds.addRect(target.boundsArea, relativeTransform);\n  } else {\n    if (target.renderPipeId) {\n      bounds.matrix = relativeTransform;\n      target.addBounds(bounds);\n    }\n    const children = target.children;\n    for (let i = 0; i < children.length; i++) {\n      _getLocalBounds(children[i], bounds, relativeTransform, rootContainer, false);\n    }\n  }\n  if (preserveBounds) {\n    for (let i = 0; i < target.effects.length; i++) {\n      target.effects[i].addLocalBounds?.(bounds, rootContainer);\n    }\n    parentBounds.addBounds(bounds, Matrix.IDENTITY);\n    boundsPool.return(bounds);\n  }\n  matrixPool.return(relativeTransform);\n}\nfunction getParent(target, root, matrix) {\n  const parent = target.parent;\n  if (!parent) {\n    warn(\"Item is not inside the root container\");\n    return;\n  }\n  if (parent !== root) {\n    getParent(parent, root, matrix);\n    parent.updateLocalTransform();\n    matrix.append(parent.localTransform);\n  }\n}\n\nexport { getLocalBounds, getParent };\n//# sourceMappingURL=getLocalBounds.mjs.map\n","\"use strict\";\nfunction checkChildrenDidChange(container, previousData) {\n  const children = container.children;\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i];\n    const changeId = (child.uid & 255) << 24 | child._didChangeId & 16777215;\n    if (previousData.data[previousData.index] !== changeId) {\n      previousData.data[previousData.index] = changeId;\n      previousData.didChange = true;\n    }\n    previousData.index++;\n    if (child.children.length) {\n      checkChildrenDidChange(child, previousData);\n    }\n  }\n  return previousData.didChange;\n}\n\nexport { checkChildrenDidChange };\n//# sourceMappingURL=checkChildrenDidChange.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Bounds } from '../bounds/Bounds.mjs';\nimport { getGlobalBounds } from '../bounds/getGlobalBounds.mjs';\nimport { getLocalBounds } from '../bounds/getLocalBounds.mjs';\nimport { checkChildrenDidChange } from '../utils/checkChildrenDidChange.mjs';\n\n\"use strict\";\nconst tempMatrix = new Matrix();\nconst measureMixin = {\n  _localBoundsCacheId: -1,\n  _localBoundsCacheData: null,\n  _setWidth(value, localWidth) {\n    const sign = Math.sign(this.scale.x) || 1;\n    if (localWidth !== 0) {\n      this.scale.x = value / localWidth * sign;\n    } else {\n      this.scale.x = sign;\n    }\n  },\n  _setHeight(value, localHeight) {\n    const sign = Math.sign(this.scale.y) || 1;\n    if (localHeight !== 0) {\n      this.scale.y = value / localHeight * sign;\n    } else {\n      this.scale.y = sign;\n    }\n  },\n  /**\n   * Retrieves the local bounds of the container as a Bounds object.\n   * @returns - The bounding area.\n   * @memberof scene.Container#\n   */\n  getLocalBounds() {\n    if (!this._localBoundsCacheData) {\n      this._localBoundsCacheData = {\n        data: [],\n        index: 1,\n        didChange: false,\n        localBounds: new Bounds()\n      };\n    }\n    const localBoundsCacheData = this._localBoundsCacheData;\n    localBoundsCacheData.index = 1;\n    localBoundsCacheData.didChange = false;\n    if (localBoundsCacheData.data[0] !== this._didChangeId >> 12) {\n      localBoundsCacheData.didChange = true;\n      localBoundsCacheData.data[0] = this._didChangeId >> 12;\n    }\n    checkChildrenDidChange(this, localBoundsCacheData);\n    if (localBoundsCacheData.didChange) {\n      getLocalBounds(this, localBoundsCacheData.localBounds, tempMatrix);\n    }\n    return localBoundsCacheData.localBounds;\n  },\n  /**\n   * Calculates and returns the (world) bounds of the display object as a [Rectangle]{@link Rectangle}.\n   * @param skipUpdate - Setting to `true` will stop the transforms of the scene graph from\n   *  being updated. This means the calculation returned MAY be out of date BUT will give you a\n   *  nice performance boost.\n   * @param bounds - Optional bounds to store the result of the bounds calculation.\n   * @returns - The minimum axis-aligned rectangle in world space that fits around this object.\n   * @memberof scene.Container#\n   */\n  getBounds(skipUpdate, bounds) {\n    return getGlobalBounds(this, skipUpdate, bounds || new Bounds());\n  }\n};\n\nexport { measureMixin };\n//# sourceMappingURL=measureMixin.mjs.map\n","\"use strict\";\nconst onRenderMixin = {\n  _onRender: null,\n  set onRender(func) {\n    const renderGroup = this.renderGroup;\n    if (!func) {\n      if (this._onRender) {\n        renderGroup?.removeOnRender(this);\n      }\n      this._onRender = null;\n      return;\n    }\n    if (!this._onRender) {\n      renderGroup?.addOnRender(this);\n    }\n    this._onRender = func;\n  },\n  /**\n   * This callback is used when the container is rendered. This is where you should add your custom\n   * logic that is needed to be run every frame.\n   *\n   * In v7 many users used `updateTransform` for this, however the way v8 renders objects is different\n   * and \"updateTransform\" is no longer called every frame\n   * @example\n   * const container = new Container();\n   * container.onRender = () => {\n   *    container.rotation += 0.01;\n   * };\n   * @memberof scene.Container#\n   */\n  get onRender() {\n    return this._onRender;\n  }\n};\n\nexport { onRenderMixin };\n//# sourceMappingURL=onRenderMixin.mjs.map\n","\"use strict\";\nconst sortMixin = {\n  _zIndex: 0,\n  /**\n   * Should children be sorted by zIndex at the next render call.\n   *\n   * Will get automatically set to true if a new child is added, or if a child's zIndex changes.\n   * @type {boolean}\n   * @memberof scene.Container#\n   */\n  sortDirty: false,\n  /**\n   * If set to true, the container will sort its children by `zIndex` value\n   * when the next render is called, or manually if `sortChildren()` is called.\n   *\n   * This actually changes the order of elements in the array, so should be treated\n   * as a basic solution that is not performant compared to other solutions,\n   * such as {@link https://github.com/pixijs/layers PixiJS Layers}\n   *\n   * Also be aware of that this may not work nicely with the `addChildAt()` function,\n   * as the `zIndex` sorting may cause the child to automatically sorted to another position.\n   * @type {boolean}\n   * @memberof scene.Container#\n   */\n  sortableChildren: false,\n  /**\n   * The zIndex of the container.\n   *\n   * Setting this value, will automatically set the parent to be sortable. Children will be automatically\n   * sorted by zIndex value; a higher value will mean it will be moved towards the end of the array,\n   * and thus rendered on top of other display objects within the same container.\n   * @see scene.Container#sortableChildren\n   * @memberof scene.Container#\n   */\n  get zIndex() {\n    return this._zIndex;\n  },\n  set zIndex(value) {\n    if (this._zIndex === value)\n      return;\n    this._zIndex = value;\n    this.depthOfChildModified();\n  },\n  depthOfChildModified() {\n    if (this.parent) {\n      this.parent.sortableChildren = true;\n      this.parent.sortDirty = true;\n    }\n    if (this.renderGroup && !this.isRenderGroupRoot) {\n      this.renderGroup.structureDidChange = true;\n    }\n  },\n  /**\n   * Sorts children by zIndex.\n   * @memberof scene.Container#\n   */\n  sortChildren() {\n    if (!this.sortDirty)\n      return;\n    this.sortDirty = false;\n    this.children.sort(sortChildren);\n  }\n};\nfunction sortChildren(a, b) {\n  return a._zIndex - b._zIndex;\n}\n\nexport { sortMixin };\n//# sourceMappingURL=sortMixin.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Point } from '../../../maths/point/Point.mjs';\nimport { updateTransformBackwards } from '../bounds/getGlobalBounds.mjs';\n\n\"use strict\";\nconst toLocalGlobalMixin = {\n  /**\n   * Returns the global position of the container.\n   * @param point - The optional point to write the global value to.\n   * @param skipUpdate - Should we skip the update transform.\n   * @returns - The updated point.\n   * @memberof scene.Container#\n   */\n  getGlobalPosition(point = new Point(), skipUpdate = false) {\n    if (this.parent) {\n      this.parent.toGlobal(this._position, point, skipUpdate);\n    } else {\n      point.x = this._position.x;\n      point.y = this._position.y;\n    }\n    return point;\n  },\n  /**\n   * Calculates the global position of the container.\n   * @param position - The world origin to calculate from.\n   * @param point - A Point object in which to store the value, optional\n   *  (otherwise will create a new Point).\n   * @param skipUpdate - Should we skip the update transform.\n   * @returns - A point object representing the position of this object.\n   * @memberof scene.Container#\n   */\n  toGlobal(position, point, skipUpdate = false) {\n    if (!skipUpdate) {\n      this.updateLocalTransform();\n      const globalMatrix = updateTransformBackwards(this, new Matrix());\n      globalMatrix.append(this.localTransform);\n      return globalMatrix.apply(position, point);\n    }\n    return this.worldTransform.apply(position, point);\n  },\n  /**\n   * Calculates the local position of the container relative to another point.\n   * @param position - The world origin to calculate from.\n   * @param from - The Container to calculate the global position from.\n   * @param point - A Point object in which to store the value, optional\n   *  (otherwise will create a new Point).\n   * @param skipUpdate - Should we skip the update transform\n   * @returns - A point object representing the position of this object\n   * @memberof scene.Container#\n   */\n  toLocal(position, from, point, skipUpdate) {\n    if (from) {\n      position = from.toGlobal(position, point, skipUpdate);\n    }\n    if (!skipUpdate) {\n      this.updateLocalTransform();\n      const globalMatrix = updateTransformBackwards(this, new Matrix());\n      globalMatrix.append(this.localTransform);\n      return globalMatrix.applyInverse(position, point);\n    }\n    return this.worldTransform.applyInverse(position, point);\n  }\n};\n\nexport { toLocalGlobalMixin };\n//# sourceMappingURL=toLocalGlobalMixin.mjs.map\n","import { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nclass InstructionSet {\n  constructor() {\n    /** a unique id for this instruction set used through the renderer */\n    this.uid = uid(\"instructionSet\");\n    /** the array of instructions */\n    this.instructions = [];\n    /** the actual size of the array (any instructions passed this should be ignored) */\n    this.instructionSize = 0;\n  }\n  /** reset the instruction set so it can be reused set size back to 0 */\n  reset() {\n    this.instructionSize = 0;\n  }\n  /**\n   * Add an instruction to the set\n   * @param instruction - add an instruction to the set\n   */\n  add(instruction) {\n    this.instructions[this.instructionSize++] = instruction;\n  }\n  /**\n   * Log the instructions to the console (for debugging)\n   * @internal\n   * @ignore\n   */\n  log() {\n    this.instructions.length = this.instructionSize;\n    console.table(this.instructions, [\"type\", \"action\"]);\n  }\n}\n\nexport { InstructionSet };\n//# sourceMappingURL=InstructionSet.mjs.map\n","import { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { InstructionSet } from '../../rendering/renderers/shared/instructions/InstructionSet.mjs';\n\n\"use strict\";\nclass RenderGroup {\n  constructor(root) {\n    this.renderPipeId = \"renderGroup\";\n    this.root = null;\n    this.canBundle = false;\n    this.renderGroupParent = null;\n    this.renderGroupChildren = [];\n    this._children = [];\n    this.worldTransform = new Matrix();\n    this.worldColorAlpha = 4294967295;\n    this.worldColor = 16777215;\n    this.worldAlpha = 1;\n    // these updates are transform changes..\n    this.childrenToUpdate = /* @__PURE__ */ Object.create(null);\n    this.updateTick = 0;\n    // these update are renderable changes..\n    this.childrenRenderablesToUpdate = { list: [], index: 0 };\n    // other\n    this.structureDidChange = true;\n    this.instructionSet = new InstructionSet();\n    this._onRenderContainers = [];\n    this.root = root;\n    this.addChild(root);\n  }\n  get localTransform() {\n    return this.root.localTransform;\n  }\n  addRenderGroupChild(renderGroupChild) {\n    if (renderGroupChild.renderGroupParent) {\n      renderGroupChild.renderGroupParent._removeRenderGroupChild(renderGroupChild);\n    }\n    renderGroupChild.renderGroupParent = this;\n    this.onChildUpdate(renderGroupChild.root);\n    this.renderGroupChildren.push(renderGroupChild);\n  }\n  _removeRenderGroupChild(renderGroupChild) {\n    if (renderGroupChild.root.didChange) {\n      this._removeChildFromUpdate(renderGroupChild.root);\n    }\n    const index = this.renderGroupChildren.indexOf(renderGroupChild);\n    if (index > -1) {\n      this.renderGroupChildren.splice(index, 1);\n    }\n    renderGroupChild.renderGroupParent = null;\n  }\n  addChild(child) {\n    this.structureDidChange = true;\n    if (child !== this.root) {\n      this._children.push(child);\n      child.updateTick = -1;\n      if (child.parent === this.root) {\n        child.relativeRenderGroupDepth = 1;\n      } else {\n        child.relativeRenderGroupDepth = child.parent.relativeRenderGroupDepth + 1;\n      }\n    }\n    if (child.renderGroup) {\n      if (child.renderGroup.root === child) {\n        this.addRenderGroupChild(child.renderGroup);\n        return;\n      }\n    } else {\n      child.renderGroup = this;\n      child.didChange = true;\n    }\n    if (child._onRender) {\n      if (!child.isRenderGroupRoot) {\n        this.addOnRender(child);\n      } else if (child.renderGroup.root === child) {\n        this.addOnRender(child);\n      }\n    }\n    const children = child.children;\n    if (!child.isRenderGroupRoot) {\n      this.onChildUpdate(child);\n    }\n    for (let i = 0; i < children.length; i++) {\n      this.addChild(children[i]);\n    }\n  }\n  removeChild(child) {\n    this.structureDidChange = true;\n    if (child._onRender) {\n      if (!child.isRenderGroupRoot) {\n        this.removeOnRender(child);\n      } else if (child.renderGroup.root === child) {\n        this.removeOnRender(child);\n      }\n    }\n    if (child.renderGroup.root !== child) {\n      const children = child.children;\n      for (let i = 0; i < children.length; i++) {\n        this.removeChild(children[i]);\n      }\n      if (child.didChange) {\n        child.renderGroup._removeChildFromUpdate(child);\n      }\n      child.renderGroup = null;\n    } else {\n      this._removeRenderGroupChild(child.renderGroup);\n    }\n    const index = this._children.indexOf(child);\n    if (index > -1) {\n      this._children.splice(index, 1);\n    }\n  }\n  onChildUpdate(child) {\n    let childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth];\n    if (!childrenToUpdate) {\n      childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth] = {\n        index: 0,\n        list: []\n      };\n    }\n    childrenToUpdate.list[childrenToUpdate.index++] = child;\n  }\n  // SHOULD THIS BE HERE?\n  updateRenderable(container) {\n    if (container.globalDisplayStatus < 7)\n      return;\n    container.didViewUpdate = false;\n    this.instructionSet.renderPipes[container.renderPipeId].updateRenderable(container);\n  }\n  onChildViewUpdate(child) {\n    this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++] = child;\n  }\n  _removeChildFromUpdate(child) {\n    const childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth];\n    if (!childrenToUpdate) {\n      return;\n    }\n    const index = childrenToUpdate.list.indexOf(child);\n    if (index > -1) {\n      childrenToUpdate.list.splice(index, 1);\n    }\n    childrenToUpdate.index--;\n  }\n  get isRenderable() {\n    return this.root.localDisplayStatus === 7 && this.worldAlpha > 0;\n  }\n  /**\n   * adding a container to the onRender list will make sure the user function\n   * passed in to the user defined 'onRender` callBack\n   * @param container - the container to add to the onRender list\n   */\n  addOnRender(container) {\n    this._onRenderContainers.push(container);\n  }\n  removeOnRender(container) {\n    this._onRenderContainers.splice(this._onRenderContainers.indexOf(container), 1);\n  }\n  runOnRender() {\n    for (let i = 0; i < this._onRenderContainers.length; i++) {\n      this._onRenderContainers[i]._onRender();\n    }\n  }\n}\n\nexport { RenderGroup };\n//# sourceMappingURL=RenderGroup.mjs.map\n","\"use strict\";\nfunction assignWithIgnore(target, options, ignore = {}) {\n  for (const key in options) {\n    if (!ignore[key] && options[key] !== void 0) {\n      target[key] = options[key];\n    }\n  }\n}\n\nexport { assignWithIgnore };\n//# sourceMappingURL=assignWithIgnore.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../color/Color.mjs';\nimport { cullingMixin } from '../../culling/cullingMixin.mjs';\nimport { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { RAD_TO_DEG, DEG_TO_RAD } from '../../maths/misc/const.mjs';\nimport { ObservablePoint } from '../../maths/point/ObservablePoint.mjs';\nimport { uid } from '../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { childrenHelperMixin } from './container-mixins/childrenHelperMixin.mjs';\nimport { effectsMixin } from './container-mixins/effectsMixin.mjs';\nimport { findMixin } from './container-mixins/findMixin.mjs';\nimport { measureMixin } from './container-mixins/measureMixin.mjs';\nimport { onRenderMixin } from './container-mixins/onRenderMixin.mjs';\nimport { sortMixin } from './container-mixins/sortMixin.mjs';\nimport { toLocalGlobalMixin } from './container-mixins/toLocalGlobalMixin.mjs';\nimport { RenderGroup } from './RenderGroup.mjs';\nimport { assignWithIgnore } from './utils/assignWithIgnore.mjs';\n\n\"use strict\";\nconst defaultSkew = new ObservablePoint(null);\nconst defaultPivot = new ObservablePoint(null);\nconst defaultScale = new ObservablePoint(null, 1, 1);\nconst UPDATE_COLOR = 1;\nconst UPDATE_BLEND = 2;\nconst UPDATE_VISIBLE = 4;\nconst UPDATE_TRANSFORM = 8;\nclass Container extends EventEmitter {\n  constructor(options = {}) {\n    super();\n    /** @private */\n    this.uid = uid(\"renderable\");\n    /** @private */\n    this._updateFlags = 15;\n    // is this container the root of a renderGroup?\n    // TODO implement this in a few more places\n    /** @private */\n    this.isRenderGroupRoot = false;\n    // the render group this container belongs to OR owns\n    /** @private */\n    this.renderGroup = null;\n    // set to true if the container has changed. It is reset once the changes have been applied\n    // by the transform system\n    // its here to stop ensure that when things change, only one update gets registers with the transform system\n    /** @private */\n    this.didChange = false;\n    // same as above, but for the renderable\n    /** @private */\n    this.didViewUpdate = false;\n    // how deep is the container relative to its render group..\n    // unless the element is the root render group - it will be relative to its parent\n    /** @private */\n    this.relativeRenderGroupDepth = 0;\n    /**\n     * The array of children of this container.\n     * @readonly\n     */\n    this.children = [];\n    /** The display object container that contains this display object. */\n    this.parent = null;\n    // used internally for changing up the render order.. mainly for masks and filters\n    // TODO setting this should cause a rebuild??\n    /** @private */\n    this.includeInBuild = true;\n    /** @private */\n    this.measurable = true;\n    /** @private */\n    this.isSimple = true;\n    // / /////////////Transform related props//////////////\n    // used by the transform system to check if a container needs to be updated that frame\n    // if the tick matches the current transform system tick, it is not updated again\n    /**\n     * @internal\n     * @ignore\n     */\n    this.updateTick = -1;\n    /**\n     * Current transform of the object based on local factors: position, scale, other stuff.\n     * @readonly\n     */\n    this.localTransform = new Matrix();\n    /**\n     * The relative group transform is a transform relative to the render group it belongs too. It will include all parent\n     * transforms and up to the render group (think of it as kind of like a stage - but the stage can be nested).\n     * If this container is is self a render group matrix will be relative to its parent render group\n     * @readonly\n     */\n    this.relativeGroupTransform = new Matrix();\n    /**\n     * The group transform is a transform relative to the render group it belongs too.\n     * If this container is render group then this will be an identity matrix. other wise it\n     * will be the same as the relativeGroupTransform.\n     * Use this value when actually rendering things to the screen\n     * @readonly\n     */\n    this.groupTransform = this.relativeGroupTransform;\n    /** If the object has been destroyed via destroy(). If true, it should not be used. */\n    this.destroyed = false;\n    // transform data..\n    /**\n     * The coordinate of the object relative to the local coordinates of the parent.\n     * @internal\n     * @ignore\n     */\n    this._position = new ObservablePoint(this, 0, 0);\n    /**\n     * The scale factor of the object.\n     * @internal\n     * @ignore\n     */\n    this._scale = defaultScale;\n    /**\n     * The pivot point of the container that it rotates around.\n     * @internal\n     * @ignore\n     */\n    this._pivot = defaultPivot;\n    /**\n     * The skew amount, on the x and y axis.\n     * @internal\n     * @ignore\n     */\n    this._skew = defaultSkew;\n    /**\n     * The X-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    this._cx = 1;\n    /**\n     * The Y-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    this._sx = 0;\n    /**\n     * The X-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    this._cy = 0;\n    /**\n     * The Y-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    this._sy = 1;\n    /**\n     * The rotation amount.\n     * @internal\n     * @ignore\n     */\n    this._rotation = 0;\n    // / COLOR related props //////////////\n    // color stored as ABGR\n    this.localColor = 16777215;\n    this.localAlpha = 1;\n    this.groupAlpha = 1;\n    // A\n    this.groupColor = 16777215;\n    // BGR\n    this.groupColorAlpha = 4294967295;\n    // ABGR\n    // / BLEND related props //////////////\n    /**\n     * @internal\n     * @ignore\n     */\n    this.localBlendMode = \"inherit\";\n    /**\n     * @internal\n     * @ignore\n     */\n    this.groupBlendMode = \"normal\";\n    // / VISIBILITY related props //////////////\n    // visibility\n    // 0b11\n    // first bit is visible, second bit is renderable\n    /**\n     * This property holds three bits: culled, visible, renderable\n     * the third bit represents culling (0 = culled, 1 = not culled) 0b100\n     * the second bit represents visibility (0 = not visible, 1 = visible) 0b010\n     * the first bit represents renderable (0 = renderable, 1 = not renderable) 0b001\n     * @internal\n     * @ignore\n     */\n    this.localDisplayStatus = 7;\n    // 0b11 | 0b10 | 0b01 | 0b00\n    /**\n     * @internal\n     * @ignore\n     */\n    this.globalDisplayStatus = 7;\n    /**\n     * A value that increments each time the container is modified\n     * the first 12 bits represent the container changes (eg transform, alpha, visible etc)\n     * the second 12 bits represent:\n     *      - for view changes (eg texture swap, geometry change etc)\n     *      - containers changes (eg children added, removed etc)\n     *\n     *  view          container\n     * [000000000000][00000000000]\n     * @ignore\n     */\n    this._didChangeId = 0;\n    /**\n     * property that tracks if the container transform has changed\n     * @ignore\n     */\n    this._didLocalTransformChangeId = -1;\n    assignWithIgnore(this, options, {\n      children: true,\n      parent: true,\n      effects: true\n    });\n    options.children?.forEach((child) => this.addChild(child));\n    this.effects = [];\n    options.parent?.addChild(this);\n  }\n  /**\n   * Mixes all enumerable properties and methods from a source object to Container.\n   * @param source - The source of properties and methods to mix in.\n   */\n  static mixin(source) {\n    Object.defineProperties(Container.prototype, Object.getOwnPropertyDescriptors(source));\n  }\n  /**\n   * Adds one or more children to the container.\n   *\n   * Multiple items can be added like so: `myContainer.addChild(thingOne, thingTwo, thingThree)`\n   * @param {...Container} children - The Container(s) to add to the container\n   * @returns {Container} - The first child that was added.\n   */\n  addChild(...children) {\n    if (!this.allowChildren) {\n      deprecation(v8_0_0, \"addChild: Only Containers will be allowed to add children in v8.0.0\");\n    }\n    if (children.length > 1) {\n      for (let i = 0; i < children.length; i++) {\n        this.addChild(children[i]);\n      }\n      return children[0];\n    }\n    const child = children[0];\n    if (child.parent === this) {\n      this.children.splice(this.children.indexOf(child), 1);\n      this.children.push(child);\n      if (this.renderGroup && !this.isRenderGroupRoot) {\n        this.renderGroup.structureDidChange = true;\n      }\n      return child;\n    }\n    if (child.parent) {\n      child.parent.removeChild(child);\n    }\n    this.children.push(child);\n    if (this.sortableChildren)\n      this.sortDirty = true;\n    child.parent = this;\n    child.didChange = true;\n    child.didViewUpdate = false;\n    child._updateFlags = 15;\n    if (this.renderGroup) {\n      this.renderGroup.addChild(child);\n    }\n    this.emit(\"childAdded\", child, this, this.children.length - 1);\n    child.emit(\"added\", this);\n    this._didChangeId += 1 << 12;\n    if (child._zIndex !== 0) {\n      child.depthOfChildModified();\n    }\n    return child;\n  }\n  /**\n   * Removes one or more children from the container.\n   * @param {...Container} children - The Container(s) to remove\n   * @returns {Container} The first child that was removed.\n   */\n  removeChild(...children) {\n    if (children.length > 1) {\n      for (let i = 0; i < children.length; i++) {\n        this.removeChild(children[i]);\n      }\n      return children[0];\n    }\n    const child = children[0];\n    const index = this.children.indexOf(child);\n    if (index > -1) {\n      this._didChangeId += 1 << 12;\n      this.children.splice(index, 1);\n      if (this.renderGroup) {\n        this.renderGroup.removeChild(child);\n      }\n      child.parent = null;\n      this.emit(\"childRemoved\", child, this, index);\n      child.emit(\"removed\", this);\n    }\n    return child;\n  }\n  /** @ignore */\n  _onUpdate(point) {\n    if (point) {\n      if (point === this._skew) {\n        this._updateSkew();\n      }\n    }\n    this._didChangeId++;\n    if (this.didChange)\n      return;\n    this.didChange = true;\n    if (this.isRenderGroupRoot) {\n      const renderGroupParent = this.renderGroup.renderGroupParent;\n      if (renderGroupParent) {\n        renderGroupParent.onChildUpdate(this);\n      }\n    } else if (this.renderGroup) {\n      this.renderGroup.onChildUpdate(this);\n    }\n  }\n  set isRenderGroup(value) {\n    if (this.isRenderGroupRoot && value === false) {\n      throw new Error(\"[Pixi] cannot undo a render group just yet\");\n    }\n    if (value) {\n      this.enableRenderGroup();\n    }\n  }\n  /**\n   * Returns true if this container is a render group.\n   * This means that it will be rendered as a separate pass, with its own set of instructions\n   */\n  get isRenderGroup() {\n    return this.isRenderGroupRoot;\n  }\n  /** This enables the container to be rendered as a render group. */\n  enableRenderGroup() {\n    if (this.renderGroup && this.renderGroup.root === this)\n      return;\n    this.isRenderGroupRoot = true;\n    const parentRenderGroup = this.renderGroup;\n    if (parentRenderGroup) {\n      parentRenderGroup.removeChild(this);\n    }\n    this.renderGroup = new RenderGroup(this);\n    if (parentRenderGroup) {\n      for (let i = 0; i < parentRenderGroup.renderGroupChildren.length; i++) {\n        const childRenderGroup = parentRenderGroup.renderGroupChildren[i];\n        let parent = childRenderGroup.root;\n        while (parent) {\n          if (parent === this) {\n            this.renderGroup.addRenderGroupChild(childRenderGroup);\n            break;\n          }\n          parent = parent.parent;\n        }\n      }\n      parentRenderGroup.addRenderGroupChild(this.renderGroup);\n    }\n    this._updateIsSimple();\n    this.groupTransform = Matrix.IDENTITY;\n  }\n  /** @ignore */\n  _updateIsSimple() {\n    this.isSimple = !this.isRenderGroupRoot && this.effects.length === 0;\n  }\n  /**\n   * Current transform of the object based on world (parent) factors.\n   * @readonly\n   */\n  get worldTransform() {\n    this._worldTransform || (this._worldTransform = new Matrix());\n    if (this.renderGroup) {\n      if (this.isRenderGroupRoot) {\n        this._worldTransform.copyFrom(this.renderGroup.worldTransform);\n      } else {\n        this._worldTransform.appendFrom(this.relativeGroupTransform, this.renderGroup.worldTransform);\n      }\n    }\n    return this._worldTransform;\n  }\n  // / ////// transform related stuff\n  /**\n   * The position of the container on the x axis relative to the local coordinates of the parent.\n   * An alias to position.x\n   */\n  get x() {\n    return this._position.x;\n  }\n  set x(value) {\n    this._position.x = value;\n  }\n  /**\n   * The position of the container on the y axis relative to the local coordinates of the parent.\n   * An alias to position.y\n   */\n  get y() {\n    return this._position.y;\n  }\n  set y(value) {\n    this._position.y = value;\n  }\n  /**\n   * The coordinate of the object relative to the local coordinates of the parent.\n   * @since 4.0.0\n   */\n  get position() {\n    return this._position;\n  }\n  set position(value) {\n    this._position.copyFrom(value);\n  }\n  /**\n   * The rotation of the object in radians.\n   * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.\n   */\n  get rotation() {\n    return this._rotation;\n  }\n  set rotation(value) {\n    if (this._rotation !== value) {\n      this._rotation = value;\n      this._onUpdate(this._skew);\n    }\n  }\n  /**\n   * The angle of the object in degrees.\n   * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.\n   */\n  get angle() {\n    return this.rotation * RAD_TO_DEG;\n  }\n  set angle(value) {\n    this.rotation = value * DEG_TO_RAD;\n  }\n  /**\n   * The center of rotation, scaling, and skewing for this display object in its local space. The `position`\n   * is the projection of `pivot` in the parent's local space.\n   *\n   * By default, the pivot is the origin (0, 0).\n   * @since 4.0.0\n   */\n  get pivot() {\n    if (this._pivot === defaultPivot) {\n      this._pivot = new ObservablePoint(this, 0, 0);\n    }\n    return this._pivot;\n  }\n  set pivot(value) {\n    if (this._pivot === defaultPivot) {\n      this._pivot = new ObservablePoint(this, 0, 0);\n    }\n    typeof value === \"number\" ? this._pivot.set(value) : this._pivot.copyFrom(value);\n  }\n  /**\n   * The skew factor for the object in radians.\n   * @since 4.0.0\n   */\n  get skew() {\n    if (this._skew === defaultSkew) {\n      this._skew = new ObservablePoint(this, 0, 0);\n    }\n    return this._skew;\n  }\n  set skew(value) {\n    if (this._skew === defaultSkew) {\n      this._skew = new ObservablePoint(this, 0, 0);\n    }\n    this._skew.copyFrom(value);\n  }\n  /**\n   * The scale factors of this object along the local coordinate axes.\n   *\n   * The default scale is (1, 1).\n   * @since 4.0.0\n   */\n  get scale() {\n    if (this._scale === defaultScale) {\n      this._scale = new ObservablePoint(this, 1, 1);\n    }\n    return this._scale;\n  }\n  set scale(value) {\n    if (this._scale === defaultScale) {\n      this._scale = new ObservablePoint(this, 0, 0);\n    }\n    typeof value === \"number\" ? this._scale.set(value) : this._scale.copyFrom(value);\n  }\n  /**\n   * The width of the Container, setting this will actually modify the scale to achieve the value set.\n   * @memberof scene.Container#\n   */\n  get width() {\n    return Math.abs(this.scale.x * this.getLocalBounds().width);\n  }\n  set width(value) {\n    const localWidth = this.getLocalBounds().width;\n    this._setWidth(value, localWidth);\n  }\n  /**\n   * The height of the Container, setting this will actually modify the scale to achieve the value set.\n   * @memberof scene.Container#\n   */\n  get height() {\n    return Math.abs(this.scale.y * this.getLocalBounds().height);\n  }\n  set height(value) {\n    const localHeight = this.getLocalBounds().height;\n    this._setHeight(value, localHeight);\n  }\n  /**\n   * Retrieves the size of the container as a [Size]{@link Size} object.\n   * This is faster than get the width and height separately.\n   * @param out - Optional object to store the size in.\n   * @returns - The size of the container.\n   * @memberof scene.Container#\n   */\n  getSize(out) {\n    if (!out) {\n      out = {};\n    }\n    const bounds = this.getLocalBounds();\n    out.width = Math.abs(this.scale.x * bounds.width);\n    out.height = Math.abs(this.scale.y * bounds.height);\n    return out;\n  }\n  /**\n   * Sets the size of the container to the specified width and height.\n   * This is faster than setting the width and height separately.\n   * @param value - This can be either a number or a [Size]{@link Size} object.\n   * @param height - The height to set. Defaults to the value of `width` if not provided.\n   * @memberof scene.Container#\n   */\n  setSize(value, height) {\n    const size = this.getLocalBounds();\n    let convertedWidth;\n    let convertedHeight;\n    if (typeof value !== \"object\") {\n      convertedWidth = value;\n      convertedHeight = height ?? value;\n    } else {\n      convertedWidth = value.width;\n      convertedHeight = value.height ?? value.width;\n    }\n    if (convertedWidth !== void 0) {\n      this._setWidth(convertedWidth, size.width);\n    }\n    if (convertedHeight !== void 0) {\n      this._setHeight(convertedHeight, size.height);\n    }\n  }\n  /** Called when the skew or the rotation changes. */\n  _updateSkew() {\n    const rotation = this._rotation;\n    const skew = this._skew;\n    this._cx = Math.cos(rotation + skew._y);\n    this._sx = Math.sin(rotation + skew._y);\n    this._cy = -Math.sin(rotation - skew._x);\n    this._sy = Math.cos(rotation - skew._x);\n  }\n  /**\n   * Updates the transform properties of the container (accepts partial values).\n   * @param {object} opts - The options for updating the transform.\n   * @param {number} opts.x - The x position of the container.\n   * @param {number} opts.y - The y position of the container.\n   * @param {number} opts.scaleX - The scale factor on the x-axis.\n   * @param {number} opts.scaleY - The scale factor on the y-axis.\n   * @param {number} opts.rotation - The rotation of the container, in radians.\n   * @param {number} opts.skewX - The skew factor on the x-axis.\n   * @param {number} opts.skewY - The skew factor on the y-axis.\n   * @param {number} opts.pivotX - The x coordinate of the pivot point.\n   * @param {number} opts.pivotY - The y coordinate of the pivot point.\n   */\n  updateTransform(opts) {\n    this.position.set(\n      typeof opts.x === \"number\" ? opts.x : this.position.x,\n      typeof opts.y === \"number\" ? opts.y : this.position.y\n    );\n    this.scale.set(\n      typeof opts.scaleX === \"number\" ? opts.scaleX || 1 : this.scale.x,\n      typeof opts.scaleY === \"number\" ? opts.scaleY || 1 : this.scale.y\n    );\n    this.rotation = typeof opts.rotation === \"number\" ? opts.rotation : this.rotation;\n    this.skew.set(\n      typeof opts.skewX === \"number\" ? opts.skewX : this.skew.x,\n      typeof opts.skewY === \"number\" ? opts.skewY : this.skew.y\n    );\n    this.pivot.set(\n      typeof opts.pivotX === \"number\" ? opts.pivotX : this.pivot.x,\n      typeof opts.pivotY === \"number\" ? opts.pivotY : this.pivot.y\n    );\n    return this;\n  }\n  /**\n   * Updates the local transform using the given matrix.\n   * @param matrix - The matrix to use for updating the transform.\n   */\n  setFromMatrix(matrix) {\n    matrix.decompose(this);\n  }\n  /** Updates the local transform. */\n  updateLocalTransform() {\n    if ((this._didLocalTransformChangeId & 15) === this._didChangeId)\n      return;\n    this._didLocalTransformChangeId = this._didChangeId;\n    const lt = this.localTransform;\n    const scale = this._scale;\n    const pivot = this._pivot;\n    const position = this._position;\n    const sx = scale._x;\n    const sy = scale._y;\n    const px = pivot._x;\n    const py = pivot._y;\n    lt.a = this._cx * sx;\n    lt.b = this._sx * sx;\n    lt.c = this._cy * sy;\n    lt.d = this._sy * sy;\n    lt.tx = position._x - (px * lt.a + py * lt.c);\n    lt.ty = position._y - (px * lt.b + py * lt.d);\n  }\n  // / ///// color related stuff\n  set alpha(value) {\n    if (value === this.localAlpha)\n      return;\n    this.localAlpha = value;\n    this._updateFlags |= UPDATE_COLOR;\n    this._onUpdate();\n  }\n  /** The opacity of the object. */\n  get alpha() {\n    return this.localAlpha;\n  }\n  set tint(value) {\n    const tempColor = Color.shared.setValue(value ?? 16777215);\n    const bgr = tempColor.toBgrNumber();\n    if (bgr === this.localColor)\n      return;\n    this.localColor = bgr;\n    this._updateFlags |= UPDATE_COLOR;\n    this._onUpdate();\n  }\n  /**\n   * The tint applied to the sprite. This is a hex value.\n   *\n   * A value of 0xFFFFFF will remove any tint effect.\n   * @default 0xFFFFFF\n   */\n  get tint() {\n    const bgr = this.localColor;\n    return ((bgr & 255) << 16) + (bgr & 65280) + (bgr >> 16 & 255);\n  }\n  // / //////////////// blend related stuff\n  set blendMode(value) {\n    if (this.localBlendMode === value)\n      return;\n    if (this.renderGroup && !this.isRenderGroupRoot) {\n      this.renderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_BLEND;\n    this.localBlendMode = value;\n    this._onUpdate();\n  }\n  /**\n   * The blend mode to be applied to the sprite. Apply a value of `'normal'` to reset the blend mode.\n   * @default 'normal'\n   */\n  get blendMode() {\n    return this.localBlendMode;\n  }\n  // / ///////// VISIBILITY / RENDERABLE /////////////////\n  /** The visibility of the object. If false the object will not be drawn, and the transform will not be updated. */\n  get visible() {\n    return !!(this.localDisplayStatus & 2);\n  }\n  set visible(value) {\n    const valueNumber = value ? 1 : 0;\n    if ((this.localDisplayStatus & 2) >> 1 === valueNumber)\n      return;\n    if (this.renderGroup && !this.isRenderGroupRoot) {\n      this.renderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 2;\n    this._onUpdate();\n  }\n  /** @ignore */\n  get culled() {\n    return !(this.localDisplayStatus & 4);\n  }\n  /** @ignore */\n  set culled(value) {\n    const valueNumber = value ? 1 : 0;\n    if ((this.localDisplayStatus & 4) >> 2 === valueNumber)\n      return;\n    if (this.renderGroup && !this.isRenderGroupRoot) {\n      this.renderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 4;\n    this._onUpdate();\n  }\n  /** Can this object be rendered, if false the object will not be drawn but the transform will still be updated. */\n  get renderable() {\n    return !!(this.localDisplayStatus & 1);\n  }\n  set renderable(value) {\n    const valueNumber = value ? 1 : 0;\n    if ((this.localDisplayStatus & 1) === valueNumber)\n      return;\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 1;\n    if (this.renderGroup && !this.isRenderGroupRoot) {\n      this.renderGroup.structureDidChange = true;\n    }\n    this._onUpdate();\n  }\n  /** Whether or not the object should be rendered. */\n  get isRenderable() {\n    return this.localDisplayStatus === 7 && this.groupAlpha > 0;\n  }\n  /**\n   * Removes all internal references and listeners as well as removes children from the display list.\n   * Do not use a Container after calling `destroy`.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @param {boolean} [options.children=false] - if set to true, all the children will have their destroy\n   *  method called as well. 'options' will be passed on to those calls.\n   * @param {boolean} [options.texture=false] - Only used for children with textures e.g. Sprites. If options.children\n   * is set to true it should destroy the texture of the child sprite\n   * @param {boolean} [options.textureSource=false] - Only used for children with textures e.g. Sprites.\n   * If options.children is set to true it should destroy the texture source of the child sprite\n   * @param {boolean} [options.context=false] - Only used for children with graphicsContexts e.g. Graphics.\n   * If options.children is set to true it should destroy the context of the child graphics\n   */\n  destroy(options = false) {\n    if (this.destroyed)\n      return;\n    this.destroyed = true;\n    this.removeFromParent();\n    this.parent = null;\n    this._mask = null;\n    this._filters = null;\n    this.effects = null;\n    this._position = null;\n    this._scale = null;\n    this._pivot = null;\n    this._skew = null;\n    this.emit(\"destroyed\", this);\n    this.removeAllListeners();\n    const destroyChildren = typeof options === \"boolean\" ? options : options?.children;\n    const oldChildren = this.removeChildren(0, this.children.length);\n    if (destroyChildren) {\n      for (let i = 0; i < oldChildren.length; ++i) {\n        oldChildren[i].destroy(options);\n      }\n    }\n  }\n}\nContainer.mixin(childrenHelperMixin);\nContainer.mixin(toLocalGlobalMixin);\nContainer.mixin(onRenderMixin);\nContainer.mixin(measureMixin);\nContainer.mixin(effectsMixin);\nContainer.mixin(findMixin);\nContainer.mixin(sortMixin);\nContainer.mixin(cullingMixin);\n\nexport { Container, UPDATE_BLEND, UPDATE_COLOR, UPDATE_TRANSFORM, UPDATE_VISIBLE };\n//# sourceMappingURL=Container.mjs.map\n","import { ObservablePoint } from '../../maths/point/ObservablePoint.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { updateQuadBounds } from '../../utils/data/updateQuadBounds.mjs';\nimport { Container } from '../container/Container.mjs';\n\n\"use strict\";\nclass Sprite extends Container {\n  /**\n   * @param options - The options for creating the sprite.\n   */\n  constructor(options = Texture.EMPTY) {\n    if (options instanceof Texture) {\n      options = { texture: options };\n    }\n    const { texture, anchor, roundPixels, width, height, ...rest } = options;\n    super({\n      label: \"Sprite\",\n      ...rest\n    });\n    this.renderPipeId = \"sprite\";\n    this.batched = true;\n    this._didSpriteUpdate = false;\n    this._bounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    this._sourceBounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    this._boundsDirty = true;\n    this._sourceBoundsDirty = true;\n    this._roundPixels = 0;\n    this._anchor = new ObservablePoint(\n      {\n        _onUpdate: () => {\n          this.onViewUpdate();\n        }\n      }\n    );\n    if (anchor) {\n      this.anchor = anchor;\n    } else if (texture.defaultAnchor) {\n      this.anchor = texture.defaultAnchor;\n    }\n    this.texture = texture;\n    this.allowChildren = false;\n    this.roundPixels = roundPixels ?? false;\n    if (width)\n      this.width = width;\n    if (height)\n      this.height = height;\n  }\n  /**\n   * Helper function that creates a new sprite based on the source you provide.\n   * The source can be - frame id, image, video, canvas element, video element, texture\n   * @param source - Source to create texture from\n   * @param [skipCache] - Whether to skip the cache or not\n   * @returns The newly created sprite\n   */\n  static from(source, skipCache = false) {\n    if (source instanceof Texture) {\n      return new Sprite(source);\n    }\n    return new Sprite(Texture.from(source, skipCache));\n  }\n  set texture(value) {\n    value || (value = Texture.EMPTY);\n    const currentTexture = this._texture;\n    if (currentTexture === value)\n      return;\n    if (currentTexture && currentTexture.dynamic)\n      currentTexture.off(\"update\", this.onViewUpdate, this);\n    if (value.dynamic)\n      value.on(\"update\", this.onViewUpdate, this);\n    this._texture = value;\n    this.onViewUpdate();\n  }\n  /** The texture that the sprite is using. */\n  get texture() {\n    return this._texture;\n  }\n  /**\n   * The local bounds of the sprite.\n   * @type {rendering.Bounds}\n   */\n  get bounds() {\n    if (this._boundsDirty) {\n      this._updateBounds();\n      this._boundsDirty = false;\n    }\n    return this._bounds;\n  }\n  /**\n   * The bounds of the sprite, taking the texture's trim into account.\n   * @type {rendering.Bounds}\n   */\n  get sourceBounds() {\n    if (this._sourceBoundsDirty) {\n      this._updateSourceBounds();\n      this._sourceBoundsDirty = false;\n    }\n    return this._sourceBounds;\n  }\n  /**\n   * Checks if the object contains the given point.\n   * @param point - The point to check\n   */\n  containsPoint(point) {\n    const bounds = this.sourceBounds;\n    if (point.x >= bounds.maxX && point.x <= bounds.minX) {\n      if (point.y >= bounds.maxY && point.y <= bounds.minY) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Adds the bounds of this object to the bounds object.\n   * @param bounds - The output bounds object.\n   */\n  addBounds(bounds) {\n    const _bounds = this._texture.trim ? this.sourceBounds : this.bounds;\n    bounds.addFrame(_bounds.minX, _bounds.minY, _bounds.maxX, _bounds.maxY);\n  }\n  onViewUpdate() {\n    this._didChangeId += 1 << 12;\n    this._didSpriteUpdate = true;\n    this._sourceBoundsDirty = this._boundsDirty = true;\n    if (this.didViewUpdate)\n      return;\n    this.didViewUpdate = true;\n    if (this.renderGroup) {\n      this.renderGroup.onChildViewUpdate(this);\n    }\n  }\n  _updateBounds() {\n    updateQuadBounds(this._bounds, this._anchor, this._texture, 0);\n  }\n  _updateSourceBounds() {\n    const anchor = this._anchor;\n    const texture = this._texture;\n    const sourceBounds = this._sourceBounds;\n    const { width, height } = texture.orig;\n    sourceBounds.maxX = -anchor._x * width;\n    sourceBounds.minX = sourceBounds.maxX + width;\n    sourceBounds.maxY = -anchor._y * height;\n    sourceBounds.minY = sourceBounds.maxY + height;\n  }\n  /**\n   * Destroys this sprite renderable and optionally its texture.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @param {boolean} [options.texture=false] - Should it destroy the current texture of the renderable as well\n   * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the renderable as well\n   */\n  destroy(options = false) {\n    super.destroy(options);\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      this._texture.destroy(destroyTextureSource);\n    }\n    this._texture = null;\n    this._bounds = null;\n    this._sourceBounds = null;\n    this._anchor = null;\n  }\n  /**\n   * The anchor sets the origin point of the sprite. The default value is taken from the {@link Texture}\n   * and passed to the constructor.\n   *\n   * The default is `(0,0)`, this means the sprite's origin is the top left.\n   *\n   * Setting the anchor to `(0.5,0.5)` means the sprite's origin is centered.\n   *\n   * Setting the anchor to `(1,1)` would mean the sprite's origin point will be the bottom right corner.\n   *\n   * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.\n   * @example\n   * import { Sprite } from 'pixi.js';\n   *\n   * const sprite = new Sprite({texture: Texture.WHITE});\n   * sprite.anchor.set(0.5); // This will set the origin to center. (0.5) is same as (0.5, 0.5).\n   */\n  get anchor() {\n    return this._anchor;\n  }\n  set anchor(value) {\n    typeof value === \"number\" ? this._anchor.set(value) : this._anchor.copyFrom(value);\n  }\n  /**\n   *  Whether or not to round the x/y position of the sprite.\n   * @type {boolean}\n   */\n  get roundPixels() {\n    return !!this._roundPixels;\n  }\n  set roundPixels(value) {\n    this._roundPixels = value ? 1 : 0;\n  }\n  /** The width of the sprite, setting this will actually modify the scale to achieve the value set. */\n  get width() {\n    return Math.abs(this.scale.x) * this._texture.orig.width;\n  }\n  set width(value) {\n    this._setWidth(value, this._texture.orig.width);\n  }\n  /** The height of the sprite, setting this will actually modify the scale to achieve the value set. */\n  get height() {\n    return Math.abs(this.scale.y) * this._texture.orig.height;\n  }\n  set height(value) {\n    this._setHeight(value, this._texture.orig.height);\n  }\n  /**\n   * Retrieves the size of the Sprite as a [Size]{@link Size} object.\n   * This is faster than get the width and height separately.\n   * @param out - Optional object to store the size in.\n   * @returns - The size of the Sprite.\n   */\n  getSize(out) {\n    if (!out) {\n      out = {};\n    }\n    out.width = Math.abs(this.scale.x) * this._texture.orig.width;\n    out.height = Math.abs(this.scale.y) * this._texture.orig.height;\n    return out;\n  }\n  /**\n   * Sets the size of the Sprite to the specified width and height.\n   * This is faster than setting the width and height separately.\n   * @param value - This can be either a number or a [Size]{@link Size} object.\n   * @param height - The height to set. Defaults to the value of `width` if not provided.\n   */\n  setSize(value, height) {\n    let convertedWidth;\n    let convertedHeight;\n    if (typeof value !== \"object\") {\n      convertedWidth = value;\n      convertedHeight = height ?? value;\n    } else {\n      convertedWidth = value.width;\n      convertedHeight = value.height ?? value.width;\n    }\n    if (convertedWidth !== void 0) {\n      this._setWidth(convertedWidth, this._texture.orig.width);\n    }\n    if (convertedHeight !== void 0) {\n      this._setHeight(convertedHeight, this._texture.orig.height);\n    }\n  }\n}\n\nexport { Sprite };\n//# sourceMappingURL=Sprite.mjs.map\n","import { Bounds } from '../../../scene/container/bounds/Bounds.mjs';\nimport { getGlobalBounds } from '../../../scene/container/bounds/getGlobalBounds.mjs';\n\n\"use strict\";\nconst tempBounds = new Bounds();\nfunction addMaskBounds(mask, bounds, skipUpdateTransform) {\n  const boundsToMask = tempBounds;\n  mask.measurable = true;\n  getGlobalBounds(mask, skipUpdateTransform, boundsToMask);\n  bounds.addBoundsMask(boundsToMask);\n  mask.measurable = false;\n}\n\nexport { addMaskBounds };\n//# sourceMappingURL=addMaskBounds.mjs.map\n","import { getLocalBounds } from '../../../scene/container/bounds/getLocalBounds.mjs';\nimport { boundsPool, matrixPool } from '../../../scene/container/bounds/utils/matrixAndBoundsPool.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\n\n\"use strict\";\nfunction addMaskLocalBounds(mask, bounds, localRoot) {\n  const boundsToMask = boundsPool.get();\n  mask.measurable = true;\n  const tempMatrix = matrixPool.get().identity();\n  const relativeMask = getMatrixRelativeToParent(mask, localRoot, tempMatrix);\n  getLocalBounds(mask, boundsToMask, relativeMask);\n  mask.measurable = false;\n  bounds.addBoundsMask(boundsToMask);\n  matrixPool.return(tempMatrix);\n  boundsPool.return(boundsToMask);\n}\nfunction getMatrixRelativeToParent(target, root, matrix) {\n  if (!target) {\n    warn(\"Mask bounds, renderable is not inside the root container\");\n    return matrix;\n  }\n  if (target !== root) {\n    getMatrixRelativeToParent(target.parent, root, matrix);\n    target.updateLocalTransform();\n    matrix.append(target.localTransform);\n  }\n  return matrix;\n}\n\nexport { addMaskLocalBounds, getMatrixRelativeToParent };\n//# sourceMappingURL=addMaskLocalBounds.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Sprite } from '../../../scene/sprite/Sprite.mjs';\nimport { addMaskBounds } from '../utils/addMaskBounds.mjs';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds.mjs';\n\n\"use strict\";\nclass AlphaMask {\n  constructor(options) {\n    this.priority = 0;\n    this.pipe = \"alphaMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n    this.renderMaskToTexture = !(mask instanceof Sprite);\n    this.mask.renderable = this.renderMaskToTexture;\n    this.mask.includeInBuild = !this.renderMaskToTexture;\n    this.mask.measurable = false;\n  }\n  reset() {\n    this.mask.measurable = true;\n    this.mask = null;\n  }\n  addBounds(bounds, skipUpdateTransform) {\n    addMaskBounds(this.mask, bounds, skipUpdateTransform);\n  }\n  addLocalBounds(bounds, localRoot) {\n    addMaskLocalBounds(this.mask, bounds, localRoot);\n  }\n  containsPoint(point, hitTestFn) {\n    const mask = this.mask;\n    return hitTestFn(mask, point);\n  }\n  destroy() {\n    this.reset();\n  }\n  static test(mask) {\n    return mask instanceof Sprite;\n  }\n}\nAlphaMask.extension = ExtensionType.MaskEffect;\n\nexport { AlphaMask };\n//# sourceMappingURL=AlphaMask.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass ColorMask {\n  constructor(options) {\n    this.priority = 0;\n    this.pipe = \"colorMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n  }\n  destroy() {\n  }\n  static test(mask) {\n    return typeof mask === \"number\";\n  }\n}\nColorMask.extension = ExtensionType.MaskEffect;\n\nexport { ColorMask };\n//# sourceMappingURL=ColorMask.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Container } from '../../../scene/container/Container.mjs';\nimport { addMaskBounds } from '../utils/addMaskBounds.mjs';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds.mjs';\n\n\"use strict\";\nclass StencilMask {\n  constructor(options) {\n    this.priority = 0;\n    this.pipe = \"stencilMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n    this.mask.includeInBuild = false;\n    this.mask.measurable = false;\n  }\n  reset() {\n    this.mask.measurable = true;\n    this.mask.includeInBuild = true;\n    this.mask = null;\n  }\n  addBounds(bounds, skipUpdateTransform) {\n    addMaskBounds(this.mask, bounds, skipUpdateTransform);\n  }\n  addLocalBounds(bounds, localRoot) {\n    addMaskLocalBounds(this.mask, bounds, localRoot);\n  }\n  containsPoint(point, hitTestFn) {\n    const mask = this.mask;\n    return hitTestFn(mask, point);\n  }\n  destroy() {\n    this.reset();\n  }\n  static test(mask) {\n    return mask instanceof Container;\n  }\n}\nStencilMask.extension = ExtensionType.MaskEffect;\n\nexport { StencilMask };\n//# sourceMappingURL=StencilMask.mjs.map\n","import { BrowserAdapter } from '../environment-browser/BrowserAdapter.mjs';\n\n\"use strict\";\nlet currentAdapter = BrowserAdapter;\nconst DOMAdapter = {\n  /**\n   * Returns the current adapter.\n   * @returns {environment.Adapter} The current adapter.\n   */\n  get() {\n    return currentAdapter;\n  },\n  /**\n   * Sets the current adapter.\n   * @param adapter - The new adapter.\n   */\n  set(adapter) {\n    currentAdapter = adapter;\n  }\n};\n\nexport { DOMAdapter };\n//# sourceMappingURL=adapter.mjs.map\n","\"use strict\";\nconst BrowserAdapter = {\n  createCanvas: (width, height) => {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  },\n  getCanvasRenderingContext2D: () => CanvasRenderingContext2D,\n  getWebGLRenderingContext: () => WebGLRenderingContext,\n  getNavigator: () => navigator,\n  getBaseUrl: () => document.baseURI ?? window.location.href,\n  getFontFaceSet: () => document.fonts,\n  fetch: (url, options) => fetch(url, options),\n  parseXML: (xml) => {\n    const parser = new DOMParser();\n    return parser.parseFromString(xml, \"text/xml\");\n  }\n};\n\nexport { BrowserAdapter };\n//# sourceMappingURL=BrowserAdapter.mjs.map\n","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass CanvasSource extends TextureSource {\n  constructor(options) {\n    if (!options.resource) {\n      options.resource = DOMAdapter.get().createCanvas();\n    }\n    if (!options.width) {\n      options.width = options.resource.width;\n      if (!options.autoDensity) {\n        options.width /= options.resolution;\n      }\n    }\n    if (!options.height) {\n      options.height = options.resource.height;\n      if (!options.autoDensity) {\n        options.height /= options.resolution;\n      }\n    }\n    super(options);\n    this.uploadMethodId = \"image\";\n    this.autoDensity = options.autoDensity;\n    const canvas = options.resource;\n    if (this.pixelWidth !== canvas.width || this.pixelWidth !== canvas.height) {\n      this.resizeCanvas();\n    }\n    this.transparent = !!options.transparent;\n  }\n  resizeCanvas() {\n    if (this.autoDensity) {\n      this.resource.style.width = `${this.width}px`;\n      this.resource.style.height = `${this.height}px`;\n    }\n    if (this.resource.width !== this.pixelWidth || this.resource.height !== this.pixelHeight) {\n      this.resource.width = this.pixelWidth;\n      this.resource.height = this.pixelHeight;\n    }\n  }\n  resize(width = this.width, height = this.height, resolution = this._resolution) {\n    const didResize = super.resize(width, height, resolution);\n    if (didResize) {\n      this.resizeCanvas();\n    }\n    return didResize;\n  }\n  static test(resource) {\n    return globalThis.HTMLCanvasElement && resource instanceof HTMLCanvasElement || globalThis.OffscreenCanvas && resource instanceof OffscreenCanvas;\n  }\n}\nCanvasSource.extension = ExtensionType.TextureSource;\n\nexport { CanvasSource };\n//# sourceMappingURL=CanvasSource.mjs.map\n","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { warn } from '../../../../../utils/logging/warn.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass ImageSource extends TextureSource {\n  constructor(options) {\n    if (options.resource && (globalThis.HTMLImageElement && options.resource instanceof HTMLImageElement)) {\n      const canvas = DOMAdapter.get().createCanvas(options.resource.width, options.resource.height);\n      const context = canvas.getContext(\"2d\");\n      context.drawImage(options.resource, 0, 0);\n      options.resource = canvas;\n      warn(\"ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.\");\n    }\n    super(options);\n    this.uploadMethodId = \"image\";\n    this.autoGarbageCollect = true;\n  }\n  static test(resource) {\n    return globalThis.HTMLImageElement && resource instanceof HTMLImageElement || typeof ImageBitmap !== \"undefined\" && resource instanceof ImageBitmap;\n  }\n}\nImageSource.extension = ExtensionType.TextureSource;\n\nexport { ImageSource };\n//# sourceMappingURL=ImageSource.mjs.map\n","\"use strict\";\nvar UPDATE_PRIORITY = /* @__PURE__ */ ((UPDATE_PRIORITY2) => {\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"INTERACTION\"] = 50] = \"INTERACTION\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"HIGH\"] = 25] = \"HIGH\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"NORMAL\"] = 0] = \"NORMAL\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"LOW\"] = -25] = \"LOW\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"UTILITY\"] = -50] = \"UTILITY\";\n  return UPDATE_PRIORITY2;\n})(UPDATE_PRIORITY || {});\n\nexport { UPDATE_PRIORITY };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nclass TickerListener {\n  /**\n   * Constructor\n   * @private\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @param priority - The priority for emitting\n   * @param once - If the handler should fire once\n   */\n  constructor(fn, context = null, priority = 0, once = false) {\n    /** The next item in chain. */\n    this.next = null;\n    /** The previous item in chain. */\n    this.previous = null;\n    /** `true` if this listener has been destroyed already. */\n    this._destroyed = false;\n    this._fn = fn;\n    this._context = context;\n    this.priority = priority;\n    this._once = once;\n  }\n  /**\n   * Simple compare function to figure out if a function and context match.\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @returns `true` if the listener match the arguments\n   */\n  match(fn, context = null) {\n    return this._fn === fn && this._context === context;\n  }\n  /**\n   * Emit by calling the current function.\n   * @param ticker - The ticker emitting.\n   * @returns Next ticker\n   */\n  emit(ticker) {\n    if (this._fn) {\n      if (this._context) {\n        this._fn.call(this._context, ticker);\n      } else {\n        this._fn(ticker);\n      }\n    }\n    const redirect = this.next;\n    if (this._once) {\n      this.destroy(true);\n    }\n    if (this._destroyed) {\n      this.next = null;\n    }\n    return redirect;\n  }\n  /**\n   * Connect to the list.\n   * @param previous - Input node, previous listener\n   */\n  connect(previous) {\n    this.previous = previous;\n    if (previous.next) {\n      previous.next.previous = this;\n    }\n    this.next = previous.next;\n    previous.next = this;\n  }\n  /**\n   * Destroy and don't use after this.\n   * @param hard - `true` to remove the `next` reference, this\n   *        is considered a hard destroy. Soft destroy maintains the next reference.\n   * @returns The listener to redirect while emitting or removing.\n   */\n  destroy(hard = false) {\n    this._destroyed = true;\n    this._fn = null;\n    this._context = null;\n    if (this.previous) {\n      this.previous.next = this.next;\n    }\n    if (this.next) {\n      this.next.previous = this.previous;\n    }\n    const redirect = this.next;\n    this.next = hard ? null : redirect;\n    this.previous = null;\n    return redirect;\n  }\n}\n\nexport { TickerListener };\n//# sourceMappingURL=TickerListener.mjs.map\n","import { UPDATE_PRIORITY } from './const.mjs';\nimport { TickerListener } from './TickerListener.mjs';\n\n\"use strict\";\nconst _Ticker = class _Ticker {\n  constructor() {\n    /**\n     * Whether or not this ticker should invoke the method\n     * {@link ticker.Ticker#start|start} automatically when a listener is added.\n     */\n    this.autoStart = false;\n    /**\n     * Scalar time value from last frame to this frame.\n     * This value is capped by setting {@link ticker.Ticker#minFPS|minFPS}\n     * and is scaled with {@link ticker.Ticker#speed|speed}.\n     * **Note:** The cap may be exceeded by scaling.\n     */\n    this.deltaTime = 1;\n    /**\n     * The last time {@link ticker.Ticker#update|update} was invoked.\n     * This value is also reset internally outside of invoking\n     * update, but only when a new animation frame is requested.\n     * If the platform supports DOMHighResTimeStamp,\n     * this value will have a precision of 1 s.\n     */\n    this.lastTime = -1;\n    /**\n     * Factor of current {@link ticker.Ticker#deltaTime|deltaTime}.\n     * @example\n     * // Scales ticker.deltaTime to what would be\n     * // the equivalent of approximately 120 FPS\n     * ticker.speed = 2;\n     */\n    this.speed = 1;\n    /**\n     * Whether or not this ticker has been started.\n     * `true` if {@link ticker.Ticker#start|start} has been called.\n     * `false` if {@link ticker.Ticker#stop|Stop} has been called.\n     * While `false`, this value may change to `true` in the\n     * event of {@link ticker.Ticker#autoStart|autoStart} being `true`\n     * and a listener is added.\n     */\n    this.started = false;\n    /** Internal current frame request ID */\n    this._requestId = null;\n    /**\n     * Internal value managed by minFPS property setter and getter.\n     * This is the maximum allowed milliseconds between updates.\n     */\n    this._maxElapsedMS = 100;\n    /**\n     * Internal value managed by minFPS property setter and getter.\n     * This is the minimum allowed milliseconds between updates.\n     */\n    this._minElapsedMS = 0;\n    /** If enabled, deleting is disabled.*/\n    this._protected = false;\n    /** The last time keyframe was executed. Maintains a relatively fixed interval with the previous value. */\n    this._lastFrame = -1;\n    this._head = new TickerListener(null, null, Infinity);\n    this.deltaMS = 1 / _Ticker.targetFPMS;\n    this.elapsedMS = 1 / _Ticker.targetFPMS;\n    this._tick = (time) => {\n      this._requestId = null;\n      if (this.started) {\n        this.update(time);\n        if (this.started && this._requestId === null && this._head.next) {\n          this._requestId = requestAnimationFrame(this._tick);\n        }\n      }\n    };\n  }\n  /**\n   * Conditionally requests a new animation frame.\n   * If a frame has not already been requested, and if the internal\n   * emitter has listeners, a new frame is requested.\n   * @private\n   */\n  _requestIfNeeded() {\n    if (this._requestId === null && this._head.next) {\n      this.lastTime = performance.now();\n      this._lastFrame = this.lastTime;\n      this._requestId = requestAnimationFrame(this._tick);\n    }\n  }\n  /**\n   * Conditionally cancels a pending animation frame.\n   * @private\n   */\n  _cancelIfNeeded() {\n    if (this._requestId !== null) {\n      cancelAnimationFrame(this._requestId);\n      this._requestId = null;\n    }\n  }\n  /**\n   * Conditionally requests a new animation frame.\n   * If the ticker has been started it checks if a frame has not already\n   * been requested, and if the internal emitter has listeners. If these\n   * conditions are met, a new frame is requested. If the ticker has not\n   * been started, but autoStart is `true`, then the ticker starts now,\n   * and continues with the previous conditions to request a new frame.\n   * @private\n   */\n  _startIfPossible() {\n    if (this.started) {\n      this._requestIfNeeded();\n    } else if (this.autoStart) {\n      this.start();\n    }\n  }\n  /**\n   * Register a handler for tick events. Calls continuously unless\n   * it is removed or the ticker is stopped.\n   * @param fn - The listener function to be added for updates\n   * @param context - The listener context\n   * @param {number} [priority=UPDATE_PRIORITY.NORMAL] - The priority for emitting\n   * @returns This instance of a ticker\n   */\n  add(fn, context, priority = UPDATE_PRIORITY.NORMAL) {\n    return this._addListener(new TickerListener(fn, context, priority));\n  }\n  /**\n   * Add a handler for the tick event which is only execute once.\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @param {number} [priority=UPDATE_PRIORITY.NORMAL] - The priority for emitting\n   * @returns This instance of a ticker\n   */\n  addOnce(fn, context, priority = UPDATE_PRIORITY.NORMAL) {\n    return this._addListener(new TickerListener(fn, context, priority, true));\n  }\n  /**\n   * Internally adds the event handler so that it can be sorted by priority.\n   * Priority allows certain handler (user, AnimatedSprite, Interaction) to be run\n   * before the rendering.\n   * @private\n   * @param listener - Current listener being added.\n   * @returns This instance of a ticker\n   */\n  _addListener(listener) {\n    let current = this._head.next;\n    let previous = this._head;\n    if (!current) {\n      listener.connect(previous);\n    } else {\n      while (current) {\n        if (listener.priority > current.priority) {\n          listener.connect(previous);\n          break;\n        }\n        previous = current;\n        current = current.next;\n      }\n      if (!listener.previous) {\n        listener.connect(previous);\n      }\n    }\n    this._startIfPossible();\n    return this;\n  }\n  /**\n   * Removes any handlers matching the function and context parameters.\n   * If no handlers are left after removing, then it cancels the animation frame.\n   * @param fn - The listener function to be removed\n   * @param context - The listener context to be removed\n   * @returns This instance of a ticker\n   */\n  remove(fn, context) {\n    let listener = this._head.next;\n    while (listener) {\n      if (listener.match(fn, context)) {\n        listener = listener.destroy();\n      } else {\n        listener = listener.next;\n      }\n    }\n    if (!this._head.next) {\n      this._cancelIfNeeded();\n    }\n    return this;\n  }\n  /**\n   * The number of listeners on this ticker, calculated by walking through linked list\n   * @readonly\n   * @member {number}\n   */\n  get count() {\n    if (!this._head) {\n      return 0;\n    }\n    let count = 0;\n    let current = this._head;\n    while (current = current.next) {\n      count++;\n    }\n    return count;\n  }\n  /** Starts the ticker. If the ticker has listeners a new animation frame is requested at this point. */\n  start() {\n    if (!this.started) {\n      this.started = true;\n      this._requestIfNeeded();\n    }\n  }\n  /** Stops the ticker. If the ticker has requested an animation frame it is canceled at this point. */\n  stop() {\n    if (this.started) {\n      this.started = false;\n      this._cancelIfNeeded();\n    }\n  }\n  /** Destroy the ticker and don't use after this. Calling this method removes all references to internal events. */\n  destroy() {\n    if (!this._protected) {\n      this.stop();\n      let listener = this._head.next;\n      while (listener) {\n        listener = listener.destroy(true);\n      }\n      this._head.destroy();\n      this._head = null;\n    }\n  }\n  /**\n   * Triggers an update. An update entails setting the\n   * current {@link ticker.Ticker#elapsedMS|elapsedMS},\n   * the current {@link ticker.Ticker#deltaTime|deltaTime},\n   * invoking all listeners with current deltaTime,\n   * and then finally setting {@link ticker.Ticker#lastTime|lastTime}\n   * with the value of currentTime that was provided.\n   * This method will be called automatically by animation\n   * frame callbacks if the ticker instance has been started\n   * and listeners are added.\n   * @param {number} [currentTime=performance.now()] - the current time of execution\n   */\n  update(currentTime = performance.now()) {\n    let elapsedMS;\n    if (currentTime > this.lastTime) {\n      elapsedMS = this.elapsedMS = currentTime - this.lastTime;\n      if (elapsedMS > this._maxElapsedMS) {\n        elapsedMS = this._maxElapsedMS;\n      }\n      elapsedMS *= this.speed;\n      if (this._minElapsedMS) {\n        const delta = currentTime - this._lastFrame | 0;\n        if (delta < this._minElapsedMS) {\n          return;\n        }\n        this._lastFrame = currentTime - delta % this._minElapsedMS;\n      }\n      this.deltaMS = elapsedMS;\n      this.deltaTime = this.deltaMS * _Ticker.targetFPMS;\n      const head = this._head;\n      let listener = head.next;\n      while (listener) {\n        listener = listener.emit(this);\n      }\n      if (!head.next) {\n        this._cancelIfNeeded();\n      }\n    } else {\n      this.deltaTime = this.deltaMS = this.elapsedMS = 0;\n    }\n    this.lastTime = currentTime;\n  }\n  /**\n   * The frames per second at which this ticker is running.\n   * The default is approximately 60 in most modern browsers.\n   * **Note:** This does not factor in the value of\n   * {@link ticker.Ticker#speed|speed}, which is specific\n   * to scaling {@link ticker.Ticker#deltaTime|deltaTime}.\n   * @member {number}\n   * @readonly\n   */\n  get FPS() {\n    return 1e3 / this.elapsedMS;\n  }\n  /**\n   * Manages the maximum amount of milliseconds allowed to\n   * elapse between invoking {@link ticker.Ticker#update|update}.\n   * This value is used to cap {@link ticker.Ticker#deltaTime|deltaTime},\n   * but does not effect the measured value of {@link ticker.Ticker#FPS|FPS}.\n   * When setting this property it is clamped to a value between\n   * `0` and `Ticker.targetFPMS * 1000`.\n   * @member {number}\n   * @default 10\n   */\n  get minFPS() {\n    return 1e3 / this._maxElapsedMS;\n  }\n  set minFPS(fps) {\n    const minFPS = Math.min(this.maxFPS, fps);\n    const minFPMS = Math.min(Math.max(0, minFPS) / 1e3, _Ticker.targetFPMS);\n    this._maxElapsedMS = 1 / minFPMS;\n  }\n  /**\n   * Manages the minimum amount of milliseconds required to\n   * elapse between invoking {@link ticker.Ticker#update|update}.\n   * This will effect the measured value of {@link ticker.Ticker#FPS|FPS}.\n   * If it is set to `0`, then there is no limit; PixiJS will render as many frames as it can.\n   * Otherwise it will be at least `minFPS`\n   * @member {number}\n   * @default 0\n   */\n  get maxFPS() {\n    if (this._minElapsedMS) {\n      return Math.round(1e3 / this._minElapsedMS);\n    }\n    return 0;\n  }\n  set maxFPS(fps) {\n    if (fps === 0) {\n      this._minElapsedMS = 0;\n    } else {\n      const maxFPS = Math.max(this.minFPS, fps);\n      this._minElapsedMS = 1 / (maxFPS / 1e3);\n    }\n  }\n  /**\n   * The shared ticker instance used by {@link AnimatedSprite} and by\n   * {@link VideoResource} to update animation frames / video textures.\n   *\n   * It may also be used by {@link Application} if created with the `sharedTicker` option property set to true.\n   *\n   * The property {@link ticker.Ticker#autoStart|autoStart} is set to `true` for this instance.\n   * Please follow the examples for usage, including how to opt-out of auto-starting the shared ticker.\n   * @example\n   * import { Ticker } from 'pixi.js';\n   *\n   * const ticker = Ticker.shared;\n   * // Set this to prevent starting this ticker when listeners are added.\n   * // By default this is true only for the Ticker.shared instance.\n   * ticker.autoStart = false;\n   *\n   * // FYI, call this to ensure the ticker is stopped. It should be stopped\n   * // if you have not attempted to render anything yet.\n   * ticker.stop();\n   *\n   * // Call this when you are ready for a running shared ticker.\n   * ticker.start();\n   * @example\n   * import { autoDetectRenderer, Container } from 'pixi.js';\n   *\n   * // You may use the shared ticker to render...\n   * const renderer = autoDetectRenderer();\n   * const stage = new Container();\n   * document.body.appendChild(renderer.view);\n   * ticker.add((time) => renderer.render(stage));\n   *\n   * // Or you can just update it manually.\n   * ticker.autoStart = false;\n   * ticker.stop();\n   * const animate = (time) => {\n   *     ticker.update(time);\n   *     renderer.render(stage);\n   *     requestAnimationFrame(animate);\n   * };\n   * animate(performance.now());\n   * @member {ticker.Ticker}\n   * @readonly\n   * @static\n   */\n  static get shared() {\n    if (!_Ticker._shared) {\n      const shared = _Ticker._shared = new _Ticker();\n      shared.autoStart = true;\n      shared._protected = true;\n    }\n    return _Ticker._shared;\n  }\n  /**\n   * The system ticker instance used by {@link BasePrepare} for core timing\n   * functionality that shouldn't usually need to be paused, unlike the `shared`\n   * ticker which drives visual animations and rendering which may want to be paused.\n   *\n   * The property {@link ticker.Ticker#autoStart|autoStart} is set to `true` for this instance.\n   * @member {ticker.Ticker}\n   * @readonly\n   * @static\n   */\n  static get system() {\n    if (!_Ticker._system) {\n      const system = _Ticker._system = new _Ticker();\n      system.autoStart = true;\n      system._protected = true;\n    }\n    return _Ticker._system;\n  }\n};\n/**\n * Target frames per millisecond.\n * @static\n */\n_Ticker.targetFPMS = 0.06;\nlet Ticker = _Ticker;\n\nexport { Ticker };\n//# sourceMappingURL=Ticker.mjs.map\n","\"use strict\";\nlet promise;\nasync function detectVideoAlphaMode() {\n  promise ?? (promise = (async () => {\n    const canvas = document.createElement(\"canvas\");\n    const gl = canvas.getContext(\"webgl\");\n    if (!gl) {\n      return \"premultiply-alpha-on-upload\";\n    }\n    const video = await new Promise((resolve) => {\n      const video2 = document.createElement(\"video\");\n      video2.onloadeddata = () => resolve(video2);\n      video2.onerror = () => resolve(null);\n      video2.autoplay = false;\n      video2.crossOrigin = \"anonymous\";\n      video2.preload = \"auto\";\n      video2.src = \"data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=\";\n      video2.load();\n    });\n    if (!video) {\n      return \"premultiply-alpha-on-upload\";\n    }\n    const texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    const framebuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    gl.framebufferTexture2D(\n      gl.FRAMEBUFFER,\n      gl.COLOR_ATTACHMENT0,\n      gl.TEXTURE_2D,\n      texture,\n      0\n    );\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n    gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, video);\n    const pixel = new Uint8Array(4);\n    gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel);\n    gl.deleteFramebuffer(framebuffer);\n    gl.deleteTexture(texture);\n    gl.getExtension(\"WEBGL_lose_context\")?.loseContext();\n    return pixel[0] <= pixel[3] ? \"premultiplied-alpha\" : \"premultiply-alpha-on-upload\";\n  })());\n  return promise;\n}\n\nexport { detectVideoAlphaMode };\n//# sourceMappingURL=detectVideoAlphaMode.mjs.map\n","import { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { Ticker } from '../../../../../ticker/Ticker.mjs';\nimport { detectVideoAlphaMode } from '../../../../../utils/browser/detectVideoAlphaMode.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nconst _VideoSource = class _VideoSource extends TextureSource {\n  constructor(options) {\n    super(options);\n    // Public\n    /** Whether or not the video is ready to play. */\n    this.isReady = false;\n    /** The upload method for this texture. */\n    this.uploadMethodId = \"video\";\n    options = {\n      ..._VideoSource.defaultOptions,\n      ...options\n    };\n    this._autoUpdate = true;\n    this._isConnectedToTicker = false;\n    this._updateFPS = options.updateFPS || 0;\n    this._msToNextUpdate = 0;\n    this.autoPlay = options.autoPlay !== false;\n    this.alphaMode = options.alphaMode ?? \"premultiply-alpha-on-upload\";\n    this._videoFrameRequestCallback = this._videoFrameRequestCallback.bind(this);\n    this._videoFrameRequestCallbackHandle = null;\n    this._load = null;\n    this._resolve = null;\n    this._reject = null;\n    this._onCanPlay = this._onCanPlay.bind(this);\n    this._onCanPlayThrough = this._onCanPlayThrough.bind(this);\n    this._onError = this._onError.bind(this);\n    this._onPlayStart = this._onPlayStart.bind(this);\n    this._onPlayStop = this._onPlayStop.bind(this);\n    this._onSeeked = this._onSeeked.bind(this);\n    if (options.autoLoad !== false) {\n      void this.load();\n    }\n  }\n  /** Update the video frame if the source is not destroyed and meets certain conditions. */\n  updateFrame() {\n    if (this.destroyed) {\n      return;\n    }\n    if (this._updateFPS) {\n      const elapsedMS = Ticker.shared.elapsedMS * this.resource.playbackRate;\n      this._msToNextUpdate = Math.floor(this._msToNextUpdate - elapsedMS);\n    }\n    if (!this._updateFPS || this._msToNextUpdate <= 0) {\n      this._msToNextUpdate = this._updateFPS ? Math.floor(1e3 / this._updateFPS) : 0;\n    }\n    if (this.isValid) {\n      this.update();\n    }\n  }\n  /** Callback to update the video frame and potentially request the next frame update. */\n  _videoFrameRequestCallback() {\n    this.updateFrame();\n    if (this.destroyed) {\n      this._videoFrameRequestCallbackHandle = null;\n    } else {\n      this._videoFrameRequestCallbackHandle = this.resource.requestVideoFrameCallback(\n        this._videoFrameRequestCallback\n      );\n    }\n  }\n  /**\n   * Checks if the resource has valid dimensions.\n   * @returns {boolean} True if width and height are set, otherwise false.\n   */\n  get isValid() {\n    return !!this.resource.videoWidth && !!this.resource.videoHeight;\n  }\n  /**\n   * Start preloading the video resource.\n   * @returns {Promise<this>} Handle the validate event\n   */\n  async load() {\n    if (this._load) {\n      return this._load;\n    }\n    const source = this.resource;\n    const options = this.options;\n    if ((source.readyState === source.HAVE_ENOUGH_DATA || source.readyState === source.HAVE_FUTURE_DATA) && source.width && source.height) {\n      source.complete = true;\n    }\n    source.addEventListener(\"play\", this._onPlayStart);\n    source.addEventListener(\"pause\", this._onPlayStop);\n    source.addEventListener(\"seeked\", this._onSeeked);\n    if (!this._isSourceReady()) {\n      if (!options.preload) {\n        source.addEventListener(\"canplay\", this._onCanPlay);\n      }\n      source.addEventListener(\"canplaythrough\", this._onCanPlayThrough);\n      source.addEventListener(\"error\", this._onError, true);\n    } else {\n      this._mediaReady();\n    }\n    this.alphaMode = await detectVideoAlphaMode();\n    this._load = new Promise((resolve, reject) => {\n      if (this.isValid) {\n        resolve(this);\n      } else {\n        this._resolve = resolve;\n        this._reject = reject;\n        if (options.preloadTimeoutMs !== void 0) {\n          this._preloadTimeout = setTimeout(() => {\n            this._onError(new ErrorEvent(`Preload exceeded timeout of ${options.preloadTimeoutMs}ms`));\n          });\n        }\n        source.load();\n      }\n    });\n    return this._load;\n  }\n  /**\n   * Handle video error events.\n   * @param event - The error event\n   */\n  _onError(event) {\n    this.resource.removeEventListener(\"error\", this._onError, true);\n    this.emit(\"error\", event);\n    if (this._reject) {\n      this._reject(event);\n      this._reject = null;\n      this._resolve = null;\n    }\n  }\n  /**\n   * Checks if the underlying source is playing.\n   * @returns True if playing.\n   */\n  _isSourcePlaying() {\n    const source = this.resource;\n    return !source.paused && !source.ended;\n  }\n  /**\n   * Checks if the underlying source is ready for playing.\n   * @returns True if ready.\n   */\n  _isSourceReady() {\n    const source = this.resource;\n    return source.readyState > 2;\n  }\n  /** Runs the update loop when the video is ready to play. */\n  _onPlayStart() {\n    if (!this.isValid) {\n      this._mediaReady();\n    }\n    this._configureAutoUpdate();\n  }\n  /** Stops the update loop when a pause event is triggered. */\n  _onPlayStop() {\n    this._configureAutoUpdate();\n  }\n  /** Handles behavior when the video completes seeking to the current playback position. */\n  _onSeeked() {\n    if (this._autoUpdate && !this._isSourcePlaying()) {\n      this._msToNextUpdate = 0;\n      this.updateFrame();\n      this._msToNextUpdate = 0;\n    }\n  }\n  _onCanPlay() {\n    const source = this.resource;\n    source.removeEventListener(\"canplay\", this._onCanPlay);\n    this._mediaReady();\n  }\n  _onCanPlayThrough() {\n    const source = this.resource;\n    source.removeEventListener(\"canplaythrough\", this._onCanPlay);\n    if (this._preloadTimeout) {\n      clearTimeout(this._preloadTimeout);\n      this._preloadTimeout = void 0;\n    }\n    this._mediaReady();\n  }\n  /** Fired when the video is loaded and ready to play. */\n  _mediaReady() {\n    const source = this.resource;\n    if (this.isValid) {\n      this.isReady = true;\n      this.resize(source.videoWidth, source.videoHeight);\n    }\n    this._msToNextUpdate = 0;\n    this.updateFrame();\n    this._msToNextUpdate = 0;\n    if (this._resolve) {\n      this._resolve(this);\n      this._resolve = null;\n      this._reject = null;\n    }\n    if (this._isSourcePlaying()) {\n      this._onPlayStart();\n    } else if (this.autoPlay) {\n      void this.resource.play();\n    }\n  }\n  /** Cleans up resources and event listeners associated with this texture. */\n  destroy() {\n    this._configureAutoUpdate();\n    const source = this.resource;\n    if (source) {\n      source.removeEventListener(\"play\", this._onPlayStart);\n      source.removeEventListener(\"pause\", this._onPlayStop);\n      source.removeEventListener(\"seeked\", this._onSeeked);\n      source.removeEventListener(\"canplay\", this._onCanPlay);\n      source.removeEventListener(\"canplaythrough\", this._onCanPlayThrough);\n      source.removeEventListener(\"error\", this._onError, true);\n      source.pause();\n      source.src = \"\";\n      source.load();\n    }\n    super.destroy();\n  }\n  /** Should the base texture automatically update itself, set to true by default. */\n  get autoUpdate() {\n    return this._autoUpdate;\n  }\n  set autoUpdate(value) {\n    if (value !== this._autoUpdate) {\n      this._autoUpdate = value;\n      this._configureAutoUpdate();\n    }\n  }\n  /**\n   * How many times a second to update the texture from the video.\n   * Leave at 0 to update at every render.\n   * A lower fps can help performance, as updating the texture at 60fps on a 30ps video may not be efficient.\n   */\n  get updateFPS() {\n    return this._updateFPS;\n  }\n  set updateFPS(value) {\n    if (value !== this._updateFPS) {\n      this._updateFPS = value;\n      this._configureAutoUpdate();\n    }\n  }\n  /**\n   * Configures the updating mechanism based on the current state and settings.\n   *\n   * This method decides between using the browser's native video frame callback or a custom ticker\n   * for updating the video frame. It ensures optimal performance and responsiveness\n   * based on the video's state, playback status, and the desired frames-per-second setting.\n   *\n   * - If `_autoUpdate` is enabled and the video source is playing:\n   *   - It will prefer the native video frame callback if available and no specific FPS is set.\n   *   - Otherwise, it will use a custom ticker for manual updates.\n   * - If `_autoUpdate` is disabled or the video isn't playing, any active update mechanisms are halted.\n   */\n  _configureAutoUpdate() {\n    if (this._autoUpdate && this._isSourcePlaying()) {\n      if (!this._updateFPS && this.resource.requestVideoFrameCallback) {\n        if (this._isConnectedToTicker) {\n          Ticker.shared.remove(this.updateFrame, this);\n          this._isConnectedToTicker = false;\n          this._msToNextUpdate = 0;\n        }\n        if (this._videoFrameRequestCallbackHandle === null) {\n          this._videoFrameRequestCallbackHandle = this.resource.requestVideoFrameCallback(\n            this._videoFrameRequestCallback\n          );\n        }\n      } else {\n        if (this._videoFrameRequestCallbackHandle !== null) {\n          this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle);\n          this._videoFrameRequestCallbackHandle = null;\n        }\n        if (!this._isConnectedToTicker) {\n          Ticker.shared.add(this.updateFrame, this);\n          this._isConnectedToTicker = true;\n          this._msToNextUpdate = 0;\n        }\n      }\n    } else {\n      if (this._videoFrameRequestCallbackHandle !== null) {\n        this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle);\n        this._videoFrameRequestCallbackHandle = null;\n      }\n      if (this._isConnectedToTicker) {\n        Ticker.shared.remove(this.updateFrame, this);\n        this._isConnectedToTicker = false;\n        this._msToNextUpdate = 0;\n      }\n    }\n  }\n  static test(resource) {\n    return globalThis.HTMLVideoElement && resource instanceof HTMLVideoElement || globalThis.VideoFrame && resource instanceof VideoFrame;\n  }\n};\n_VideoSource.extension = ExtensionType.TextureSource;\n/** The default options for video sources. */\n_VideoSource.defaultOptions = {\n  ...TextureSource.defaultOptions,\n  /** If true, the video will start loading immediately. */\n  autoLoad: true,\n  /** If true, the video will start playing as soon as it is loaded. */\n  autoPlay: true,\n  /** The number of times a second to update the texture from the video. Leave at 0 to update at every render. */\n  updateFPS: 0,\n  /** If true, the video will be loaded with the `crossorigin` attribute. */\n  crossorigin: true,\n  /** If true, the video will loop when it ends. */\n  loop: false,\n  /** If true, the video will be muted. */\n  muted: true,\n  /** If true, the video will play inline. */\n  playsinline: true,\n  /** If true, the video will be preloaded. */\n  preload: false\n};\n/**\n * Map of video MIME types that can't be directly derived from file extensions.\n * @readonly\n */\n_VideoSource.MIME_TYPES = {\n  ogv: \"video/ogg\",\n  mov: \"video/quicktime\",\n  m4v: \"video/mp4\"\n};\nlet VideoSource = _VideoSource;\n\nexport { VideoSource };\n//# sourceMappingURL=VideoSource.mjs.map\n","\"use strict\";\nconst convertToList = (input, transform, forceTransform = false) => {\n  if (!Array.isArray(input)) {\n    input = [input];\n  }\n  if (!transform) {\n    return input;\n  }\n  return input.map((item) => {\n    if (typeof item === \"string\" || forceTransform) {\n      return transform(item);\n    }\n    return item;\n  });\n};\n\nexport { convertToList };\n//# sourceMappingURL=convertToList.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\n\n\"use strict\";\nclass CacheClass {\n  constructor() {\n    this._parsers = [];\n    this._cache = /* @__PURE__ */ new Map();\n    this._cacheMap = /* @__PURE__ */ new Map();\n  }\n  /** Clear all entries. */\n  reset() {\n    this._cacheMap.clear();\n    this._cache.clear();\n  }\n  /**\n   * Check if the key exists\n   * @param key - The key to check\n   */\n  has(key) {\n    return this._cache.has(key);\n  }\n  /**\n   * Fetch entry by key\n   * @param key - The key of the entry to get\n   */\n  get(key) {\n    const result = this._cache.get(key);\n    if (!result) {\n      warn(`[Assets] Asset id ${key} was not found in the Cache`);\n    }\n    return result;\n  }\n  /**\n   * Set a value by key or keys name\n   * @param key - The key or keys to set\n   * @param value - The value to store in the cache or from which cacheable assets will be derived.\n   */\n  set(key, value) {\n    const keys = convertToList(key);\n    let cacheableAssets;\n    for (let i = 0; i < this.parsers.length; i++) {\n      const parser = this.parsers[i];\n      if (parser.test(value)) {\n        cacheableAssets = parser.getCacheableAssets(keys, value);\n        break;\n      }\n    }\n    const cacheableMap = new Map(Object.entries(cacheableAssets || {}));\n    if (!cacheableAssets) {\n      keys.forEach((key2) => {\n        cacheableMap.set(key2, value);\n      });\n    }\n    const cacheKeys = [...cacheableMap.keys()];\n    const cachedAssets = {\n      cacheKeys,\n      keys\n    };\n    keys.forEach((key2) => {\n      this._cacheMap.set(key2, cachedAssets);\n    });\n    cacheKeys.forEach((key2) => {\n      const val = cacheableAssets ? cacheableAssets[key2] : value;\n      if (this._cache.has(key2) && this._cache.get(key2) !== val) {\n        warn(\"[Cache] already has key:\", key2);\n      }\n      this._cache.set(key2, cacheableMap.get(key2));\n    });\n  }\n  /**\n   * Remove entry by key\n   *\n   * This function will also remove any associated alias from the cache also.\n   * @param key - The key of the entry to remove\n   */\n  remove(key) {\n    if (!this._cacheMap.has(key)) {\n      warn(`[Assets] Asset id ${key} was not found in the Cache`);\n      return;\n    }\n    const cacheMap = this._cacheMap.get(key);\n    const cacheKeys = cacheMap.cacheKeys;\n    cacheKeys.forEach((key2) => {\n      this._cache.delete(key2);\n    });\n    cacheMap.keys.forEach((key2) => {\n      this._cacheMap.delete(key2);\n    });\n  }\n  /** All loader parsers registered */\n  get parsers() {\n    return this._parsers;\n  }\n}\nconst Cache = new CacheClass();\n\nexport { Cache };\n//# sourceMappingURL=Cache.mjs.map\n","import { Cache } from '../../../../../assets/cache/Cache.mjs';\nimport { extensions, ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from '../sources/TextureSource.mjs';\nimport { Texture } from '../Texture.mjs';\n\n\"use strict\";\nconst sources = [];\nextensions.handleByList(ExtensionType.TextureSource, sources);\nfunction autoDetectSource(options = {}) {\n  const hasResource = options && options.resource;\n  const res = hasResource ? options.resource : options;\n  const opts = hasResource ? options : { resource: options };\n  for (let i = 0; i < sources.length; i++) {\n    const Source = sources[i];\n    if (Source.test(res)) {\n      return new Source(opts);\n    }\n  }\n  throw new Error(`Could not find a source type for resource: ${opts.resource}`);\n}\nfunction resourceToTexture(options = {}, skipCache = false) {\n  const hasResource = options && options.resource;\n  const resource = hasResource ? options.resource : options;\n  const opts = hasResource ? options : { resource: options };\n  if (!skipCache && Cache.has(resource)) {\n    return Cache.get(resource);\n  }\n  const texture = new Texture({ source: autoDetectSource(opts) });\n  texture.on(\"destroy\", () => {\n    if (Cache.has(resource)) {\n      Cache.remove(resource);\n    }\n  });\n  if (!skipCache) {\n    Cache.set(resource, texture);\n  }\n  return texture;\n}\nfunction textureFrom(id, skipCache = false) {\n  if (typeof id === \"string\") {\n    return Cache.get(id);\n  } else if (id instanceof TextureSource) {\n    return new Texture({ source: id });\n  }\n  return resourceToTexture(id, skipCache);\n}\nTexture.from = textureFrom;\n\nexport { autoDetectSource, resourceToTexture, textureFrom };\n//# sourceMappingURL=textureFrom.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { AlphaMask } from './mask/alpha/AlphaMask.mjs';\nimport { ColorMask } from './mask/color/ColorMask.mjs';\nimport { StencilMask } from './mask/stencil/StencilMask.mjs';\nimport { BufferImageSource } from './renderers/shared/texture/sources/BufferSource.mjs';\nimport { CanvasSource } from './renderers/shared/texture/sources/CanvasSource.mjs';\nimport { ImageSource } from './renderers/shared/texture/sources/ImageSource.mjs';\nimport { VideoSource } from './renderers/shared/texture/sources/VideoSource.mjs';\nimport './renderers/shared/texture/utils/textureFrom.mjs';\nimport './mask/MaskEffectManager.mjs';\n\n\"use strict\";\nextensions.add(AlphaMask, ColorMask, StencilMask, VideoSource, ImageSource, CanvasSource, BufferImageSource);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nvar LoaderParserPriority = /* @__PURE__ */ ((LoaderParserPriority2) => {\n  LoaderParserPriority2[LoaderParserPriority2[\"Low\"] = 0] = \"Low\";\n  LoaderParserPriority2[LoaderParserPriority2[\"Normal\"] = 1] = \"Normal\";\n  LoaderParserPriority2[LoaderParserPriority2[\"High\"] = 2] = \"High\";\n  return LoaderParserPriority2;\n})(LoaderParserPriority || {});\n\nexport { LoaderParserPriority };\n//# sourceMappingURL=LoaderParser.mjs.map\n","import { DOMAdapter } from '../environment/adapter.mjs';\n\n\"use strict\";\nfunction assertPath(path2) {\n  if (typeof path2 !== \"string\") {\n    throw new TypeError(`Path must be a string. Received ${JSON.stringify(path2)}`);\n  }\n}\nfunction removeUrlParams(url) {\n  const re = url.split(\"?\")[0];\n  return re.split(\"#\")[0];\n}\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\nfunction replaceAll(str, find, replace) {\n  return str.replace(new RegExp(escapeRegExp(find), \"g\"), replace);\n}\nfunction normalizeStringPosix(path2, allowAboveRoot) {\n  let res = \"\";\n  let lastSegmentLength = 0;\n  let lastSlash = -1;\n  let dots = 0;\n  let code = -1;\n  for (let i = 0; i <= path2.length; ++i) {\n    if (i < path2.length) {\n      code = path2.charCodeAt(i);\n    } else if (code === 47) {\n      break;\n    } else {\n      code = 47;\n    }\n    if (code === 47) {\n      if (lastSlash === i - 1 || dots === 1) {\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 || res.charCodeAt(res.length - 2) !== 46) {\n          if (res.length > 2) {\n            const lastSlashIndex = res.lastIndexOf(\"/\");\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = \"\";\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf(\"/\");\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = \"\";\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0) {\n            res += \"/..\";\n          } else {\n            res = \"..\";\n          }\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0) {\n          res += `/${path2.slice(lastSlash + 1, i)}`;\n        } else {\n          res = path2.slice(lastSlash + 1, i);\n        }\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\nconst path = {\n  /**\n   * Converts a path to posix format.\n   * @param path - The path to convert to posix\n   */\n  toPosix(path2) {\n    return replaceAll(path2, \"\\\\\", \"/\");\n  },\n  /**\n   * Checks if the path is a URL e.g. http://, https://\n   * @param path - The path to check\n   */\n  isUrl(path2) {\n    return /^https?:/.test(this.toPosix(path2));\n  },\n  /**\n   * Checks if the path is a data URL\n   * @param path - The path to check\n   */\n  isDataUrl(path2) {\n    return /^data:([a-z]+\\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s<>]*?)$/i.test(path2);\n  },\n  /**\n   * Checks if the path is a blob URL\n   * @param path - The path to check\n   */\n  isBlobUrl(path2) {\n    return path2.startsWith(\"blob:\");\n  },\n  /**\n   * Checks if the path has a protocol e.g. http://, https://, file:///, data:, blob:, C:/\n   * This will return true for windows file paths\n   * @param path - The path to check\n   */\n  hasProtocol(path2) {\n    return /^[^/:]+:/.test(this.toPosix(path2));\n  },\n  /**\n   * Returns the protocol of the path e.g. http://, https://, file:///, data:, blob:, C:/\n   * @param path - The path to get the protocol from\n   */\n  getProtocol(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    const matchFile = /^file:\\/\\/\\//.exec(path2);\n    if (matchFile) {\n      return matchFile[0];\n    }\n    const matchProtocol = /^[^/:]+:\\/{0,2}/.exec(path2);\n    if (matchProtocol) {\n      return matchProtocol[0];\n    }\n    return \"\";\n  },\n  /**\n   * Converts URL to an absolute path.\n   * When loading from a Web Worker, we must use absolute paths.\n   * If the URL is already absolute we return it as is\n   * If it's not, we convert it\n   * @param url - The URL to test\n   * @param customBaseUrl - The base URL to use\n   * @param customRootUrl - The root URL to use\n   */\n  toAbsolute(url, customBaseUrl, customRootUrl) {\n    assertPath(url);\n    if (this.isDataUrl(url) || this.isBlobUrl(url))\n      return url;\n    const baseUrl = removeUrlParams(this.toPosix(customBaseUrl ?? DOMAdapter.get().getBaseUrl()));\n    const rootUrl = removeUrlParams(this.toPosix(customRootUrl ?? this.rootname(baseUrl)));\n    url = this.toPosix(url);\n    if (url.startsWith(\"/\")) {\n      return path.join(rootUrl, url.slice(1));\n    }\n    const absolutePath = this.isAbsolute(url) ? url : this.join(baseUrl, url);\n    return absolutePath;\n  },\n  /**\n   * Normalizes the given path, resolving '..' and '.' segments\n   * @param path - The path to normalize\n   */\n  normalize(path2) {\n    assertPath(path2);\n    if (path2.length === 0)\n      return \".\";\n    if (this.isDataUrl(path2) || this.isBlobUrl(path2))\n      return path2;\n    path2 = this.toPosix(path2);\n    let protocol = \"\";\n    const isAbsolute = path2.startsWith(\"/\");\n    if (this.hasProtocol(path2)) {\n      protocol = this.rootname(path2);\n      path2 = path2.slice(protocol.length);\n    }\n    const trailingSeparator = path2.endsWith(\"/\");\n    path2 = normalizeStringPosix(path2, false);\n    if (path2.length > 0 && trailingSeparator)\n      path2 += \"/\";\n    if (isAbsolute)\n      return `/${path2}`;\n    return protocol + path2;\n  },\n  /**\n   * Determines if path is an absolute path.\n   * Absolute paths can be urls, data urls, or paths on disk\n   * @param path - The path to test\n   */\n  isAbsolute(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    if (this.hasProtocol(path2))\n      return true;\n    return path2.startsWith(\"/\");\n  },\n  /**\n   * Joins all given path segments together using the platform-specific separator as a delimiter,\n   * then normalizes the resulting path\n   * @param segments - The segments of the path to join\n   */\n  join(...segments) {\n    if (segments.length === 0) {\n      return \".\";\n    }\n    let joined;\n    for (let i = 0; i < segments.length; ++i) {\n      const arg = segments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === void 0)\n          joined = arg;\n        else {\n          const prevArg = segments[i - 1] ?? \"\";\n          if (this.joinExtensions.includes(this.extname(prevArg).toLowerCase())) {\n            joined += `/../${arg}`;\n          } else {\n            joined += `/${arg}`;\n          }\n        }\n      }\n    }\n    if (joined === void 0) {\n      return \".\";\n    }\n    return this.normalize(joined);\n  },\n  /**\n   * Returns the directory name of a path\n   * @param path - The path to parse\n   */\n  dirname(path2) {\n    assertPath(path2);\n    if (path2.length === 0)\n      return \".\";\n    path2 = this.toPosix(path2);\n    let code = path2.charCodeAt(0);\n    const hasRoot = code === 47;\n    let end = -1;\n    let matchedSlash = true;\n    const proto = this.getProtocol(path2);\n    const origpath = path2;\n    path2 = path2.slice(proto.length);\n    for (let i = path2.length - 1; i >= 1; --i) {\n      code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n        matchedSlash = false;\n      }\n    }\n    if (end === -1)\n      return hasRoot ? \"/\" : this.isUrl(origpath) ? proto + path2 : proto;\n    if (hasRoot && end === 1)\n      return \"//\";\n    return proto + path2.slice(0, end);\n  },\n  /**\n   * Returns the root of the path e.g. /, C:/, file:///, http://domain.com/\n   * @param path - The path to parse\n   */\n  rootname(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    let root = \"\";\n    if (path2.startsWith(\"/\"))\n      root = \"/\";\n    else {\n      root = this.getProtocol(path2);\n    }\n    if (this.isUrl(path2)) {\n      const index = path2.indexOf(\"/\", root.length);\n      if (index !== -1) {\n        root = path2.slice(0, index);\n      } else\n        root = path2;\n      if (!root.endsWith(\"/\"))\n        root += \"/\";\n    }\n    return root;\n  },\n  /**\n   * Returns the last portion of a path\n   * @param path - The path to test\n   * @param ext - Optional extension to remove\n   */\n  basename(path2, ext) {\n    assertPath(path2);\n    if (ext)\n      assertPath(ext);\n    path2 = removeUrlParams(this.toPosix(path2));\n    let start = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let i;\n    if (ext !== void 0 && ext.length > 0 && ext.length <= path2.length) {\n      if (ext.length === path2.length && ext === path2)\n        return \"\";\n      let extIdx = ext.length - 1;\n      let firstNonSlashEnd = -1;\n      for (i = path2.length - 1; i >= 0; --i) {\n        const code = path2.charCodeAt(i);\n        if (code === 47) {\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                end = i;\n              }\n            } else {\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n      if (start === end)\n        end = firstNonSlashEnd;\n      else if (end === -1)\n        end = path2.length;\n      return path2.slice(start, end);\n    }\n    for (i = path2.length - 1; i >= 0; --i) {\n      if (path2.charCodeAt(i) === 47) {\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n    }\n    if (end === -1)\n      return \"\";\n    return path2.slice(start, end);\n  },\n  /**\n   * Returns the extension of the path, from the last occurrence of the . (period) character to end of string in the last\n   * portion of the path. If there is no . in the last portion of the path, or if there are no . characters other than\n   * the first character of the basename of path, an empty string is returned.\n   * @param path - The path to parse\n   */\n  extname(path2) {\n    assertPath(path2);\n    path2 = removeUrlParams(this.toPosix(path2));\n    let startDot = -1;\n    let startPart = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let preDotState = 0;\n    for (let i = path2.length - 1; i >= 0; --i) {\n      const code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46) {\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        preDotState = -1;\n      }\n    }\n    if (startDot === -1 || end === -1 || preDotState === 0 || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return \"\";\n    }\n    return path2.slice(startDot, end);\n  },\n  /**\n   * Parses a path into an object containing the 'root', `dir`, `base`, `ext`, and `name` properties.\n   * @param path - The path to parse\n   */\n  parse(path2) {\n    assertPath(path2);\n    const ret = { root: \"\", dir: \"\", base: \"\", ext: \"\", name: \"\" };\n    if (path2.length === 0)\n      return ret;\n    path2 = removeUrlParams(this.toPosix(path2));\n    let code = path2.charCodeAt(0);\n    const isAbsolute = this.isAbsolute(path2);\n    let start;\n    const protocol = \"\";\n    ret.root = this.rootname(path2);\n    if (isAbsolute || this.hasProtocol(path2)) {\n      start = 1;\n    } else {\n      start = 0;\n    }\n    let startDot = -1;\n    let startPart = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let i = path2.length - 1;\n    let preDotState = 0;\n    for (; i >= start; --i) {\n      code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46) {\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        preDotState = -1;\n      }\n    }\n    if (startDot === -1 || end === -1 || preDotState === 0 || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute)\n          ret.base = ret.name = path2.slice(1, end);\n        else\n          ret.base = ret.name = path2.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path2.slice(1, startDot);\n        ret.base = path2.slice(1, end);\n      } else {\n        ret.name = path2.slice(startPart, startDot);\n        ret.base = path2.slice(startPart, end);\n      }\n      ret.ext = path2.slice(startDot, end);\n    }\n    ret.dir = this.dirname(path2);\n    if (protocol)\n      ret.dir = protocol + ret.dir;\n    return ret;\n  },\n  sep: \"/\",\n  delimiter: \":\",\n  joinExtensions: [\".html\"]\n};\n\nexport { path };\n//# sourceMappingURL=path.mjs.map\n","\"use strict\";\nfunction processX(base, ids, depth, result, tags) {\n  const id = ids[depth];\n  for (let i = 0; i < id.length; i++) {\n    const value = id[i];\n    if (depth < ids.length - 1) {\n      processX(base.replace(result[depth], value), ids, depth + 1, result, tags);\n    } else {\n      tags.push(base.replace(result[depth], value));\n    }\n  }\n}\nfunction createStringVariations(string) {\n  const regex = /\\{(.*?)\\}/g;\n  const result = string.match(regex);\n  const tags = [];\n  if (result) {\n    const ids = [];\n    result.forEach((vars) => {\n      const split = vars.substring(1, vars.length - 1).split(\",\");\n      ids.push(split);\n    });\n    processX(string, ids, 0, result, tags);\n  } else {\n    tags.push(string);\n  }\n  return tags;\n}\n\nexport { createStringVariations };\n//# sourceMappingURL=createStringVariations.mjs.map\n","\"use strict\";\nconst isSingleItem = (item) => !Array.isArray(item);\n\nexport { isSingleItem };\n//# sourceMappingURL=isSingleItem.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { path } from '../../utils/path.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\nimport { createStringVariations } from '../utils/createStringVariations.mjs';\nimport { isSingleItem } from '../utils/isSingleItem.mjs';\n\n\"use strict\";\nclass Resolver {\n  constructor() {\n    this._defaultBundleIdentifierOptions = {\n      connector: \"-\",\n      createBundleAssetId: (bundleId, assetId) => `${bundleId}${this._bundleIdConnector}${assetId}`,\n      extractAssetIdFromBundle: (bundleId, assetBundleId) => assetBundleId.replace(`${bundleId}${this._bundleIdConnector}`, \"\")\n    };\n    /** The character that is used to connect the bundleId and the assetId when generating a bundle asset id key */\n    this._bundleIdConnector = this._defaultBundleIdentifierOptions.connector;\n    /**\n     * A function that generates a bundle asset id key from a bundleId and an assetId\n     * @param bundleId - the bundleId\n     * @param assetId  - the assetId\n     * @returns the bundle asset id key\n     */\n    this._createBundleAssetId = this._defaultBundleIdentifierOptions.createBundleAssetId;\n    /**\n     * A function that generates an assetId from a bundle asset id key. This is the reverse of generateBundleAssetId\n     * @param bundleId - the bundleId\n     * @param assetBundleId - the bundle asset id key\n     * @returns the assetId\n     */\n    this._extractAssetIdFromBundle = this._defaultBundleIdentifierOptions.extractAssetIdFromBundle;\n    this._assetMap = {};\n    this._preferredOrder = [];\n    this._parsers = [];\n    this._resolverHash = {};\n    this._bundles = {};\n  }\n  /**\n   * Override how the resolver deals with generating bundle ids.\n   * must be called before any bundles are added\n   * @param bundleIdentifier - the bundle identifier options\n   */\n  setBundleIdentifier(bundleIdentifier) {\n    this._bundleIdConnector = bundleIdentifier.connector ?? this._bundleIdConnector;\n    this._createBundleAssetId = bundleIdentifier.createBundleAssetId ?? this._createBundleAssetId;\n    this._extractAssetIdFromBundle = bundleIdentifier.extractAssetIdFromBundle ?? this._extractAssetIdFromBundle;\n    if (this._extractAssetIdFromBundle(\"foo\", this._createBundleAssetId(\"foo\", \"bar\")) !== \"bar\") {\n      throw new Error(\"[Resolver] GenerateBundleAssetId are not working correctly\");\n    }\n  }\n  /**\n   * Let the resolver know which assets you prefer to use when resolving assets.\n   * Multiple prefer user defined rules can be added.\n   * @example\n   * resolver.prefer({\n   *     // first look for something with the correct format, and then then correct resolution\n   *     priority: ['format', 'resolution'],\n   *     params:{\n   *         format:'webp', // prefer webp images\n   *         resolution: 2, // prefer a resolution of 2\n   *     }\n   * })\n   * resolver.add('foo', ['bar@2x.webp', 'bar@2x.png', 'bar.webp', 'bar.png']);\n   * resolver.resolveUrl('foo') // => 'bar@2x.webp'\n   * @param preferOrders - the prefer options\n   */\n  prefer(...preferOrders) {\n    preferOrders.forEach((prefer) => {\n      this._preferredOrder.push(prefer);\n      if (!prefer.priority) {\n        prefer.priority = Object.keys(prefer.params);\n      }\n    });\n    this._resolverHash = {};\n  }\n  /**\n   * Set the base path to prepend to all urls when resolving\n   * @example\n   * resolver.basePath = 'https://home.com/';\n   * resolver.add('foo', 'bar.ong');\n   * resolver.resolveUrl('foo', 'bar.png'); // => 'https://home.com/bar.png'\n   * @param basePath - the base path to use\n   */\n  set basePath(basePath) {\n    this._basePath = basePath;\n  }\n  get basePath() {\n    return this._basePath;\n  }\n  /**\n   * Set the root path for root-relative URLs. By default the `basePath`'s root is used. If no `basePath` is set, then the\n   * default value for browsers is `window.location.origin`\n   * @example\n   * // Application hosted on https://home.com/some-path/index.html\n   * resolver.basePath = 'https://home.com/some-path/';\n   * resolver.rootPath = 'https://home.com/';\n   * resolver.add('foo', '/bar.png');\n   * resolver.resolveUrl('foo', '/bar.png'); // => 'https://home.com/bar.png'\n   * @param rootPath - the root path to use\n   */\n  set rootPath(rootPath) {\n    this._rootPath = rootPath;\n  }\n  get rootPath() {\n    return this._rootPath;\n  }\n  /**\n   * All the active URL parsers that help the parser to extract information and create\n   * an asset object-based on parsing the URL itself.\n   *\n   * Can be added using the extensions API\n   * @example\n   * resolver.add('foo', [\n   *     {\n   *         resolution: 2,\n   *         format: 'png',\n   *         src: 'image@2x.png',\n   *     },\n   *     {\n   *         resolution:1,\n   *         format:'png',\n   *         src: 'image.png',\n   *     },\n   * ]);\n   *\n   * // With a url parser the information such as resolution and file format could extracted from the url itself:\n   * extensions.add({\n   *     extension: ExtensionType.ResolveParser,\n   *     test: loadTextures.test, // test if url ends in an image\n   *     parse: (value: string) =>\n   *     ({\n   *         resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n   *         format: value.split('.').pop(),\n   *         src: value,\n   *     }),\n   * });\n   *\n   * // Now resolution and format can be extracted from the url\n   * resolver.add('foo', [\n   *     'image@2x.png',\n   *     'image.png',\n   * ]);\n   */\n  get parsers() {\n    return this._parsers;\n  }\n  /** Used for testing, this resets the resolver to its initial state */\n  reset() {\n    this.setBundleIdentifier(this._defaultBundleIdentifierOptions);\n    this._assetMap = {};\n    this._preferredOrder = [];\n    this._resolverHash = {};\n    this._rootPath = null;\n    this._basePath = null;\n    this._manifest = null;\n    this._bundles = {};\n    this._defaultSearchParams = null;\n  }\n  /**\n   * Sets the default URL search parameters for the URL resolver. The urls can be specified as a string or an object.\n   * @param searchParams - the default url parameters to append when resolving urls\n   */\n  setDefaultSearchParams(searchParams) {\n    if (typeof searchParams === \"string\") {\n      this._defaultSearchParams = searchParams;\n    } else {\n      const queryValues = searchParams;\n      this._defaultSearchParams = Object.keys(queryValues).map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(queryValues[key])}`).join(\"&\");\n    }\n  }\n  /**\n   * Returns the aliases for a given asset\n   * @param asset - the asset to get the aliases for\n   */\n  getAlias(asset) {\n    const { alias, src } = asset;\n    const aliasesToUse = convertToList(\n      alias || src,\n      (value) => {\n        if (typeof value === \"string\")\n          return value;\n        if (Array.isArray(value))\n          return value.map((v) => v?.src ?? v);\n        if (value?.src)\n          return value.src;\n        return value;\n      },\n      true\n    );\n    return aliasesToUse;\n  }\n  /**\n   * Add a manifest to the asset resolver. This is a nice way to add all the asset information in one go.\n   * generally a manifest would be built using a tool.\n   * @param manifest - the manifest to add to the resolver\n   */\n  addManifest(manifest) {\n    if (this._manifest) {\n      warn(\"[Resolver] Manifest already exists, this will be overwritten\");\n    }\n    this._manifest = manifest;\n    manifest.bundles.forEach((bundle) => {\n      this.addBundle(bundle.name, bundle.assets);\n    });\n  }\n  /**\n   * This adds a bundle of assets in one go so that you can resolve them as a group.\n   * For example you could add a bundle for each screen in you pixi app\n   * @example\n   * resolver.addBundle('animals', [\n   *  { alias: 'bunny', src: 'bunny.png' },\n   *  { alias: 'chicken', src: 'chicken.png' },\n   *  { alias: 'thumper', src: 'thumper.png' },\n   * ]);\n   * // or\n   * resolver.addBundle('animals', {\n   *     bunny: 'bunny.png',\n   *     chicken: 'chicken.png',\n   *     thumper: 'thumper.png',\n   * });\n   *\n   * const resolvedAssets = await resolver.resolveBundle('animals');\n   * @param bundleId - The id of the bundle to add\n   * @param assets - A record of the asset or assets that will be chosen from when loading via the specified key\n   */\n  addBundle(bundleId, assets) {\n    const assetNames = [];\n    let convertedAssets = assets;\n    if (!Array.isArray(assets)) {\n      convertedAssets = Object.entries(assets).map(([alias, src]) => {\n        if (typeof src === \"string\" || Array.isArray(src)) {\n          return { alias, src };\n        }\n        return { alias, ...src };\n      });\n    }\n    convertedAssets.forEach((asset) => {\n      const srcs = asset.src;\n      const aliases = asset.alias;\n      let ids;\n      if (typeof aliases === \"string\") {\n        const bundleAssetId = this._createBundleAssetId(bundleId, aliases);\n        assetNames.push(bundleAssetId);\n        ids = [aliases, bundleAssetId];\n      } else {\n        const bundleIds = aliases.map((name) => this._createBundleAssetId(bundleId, name));\n        assetNames.push(...bundleIds);\n        ids = [...aliases, ...bundleIds];\n      }\n      this.add({\n        ...asset,\n        ...{\n          alias: ids,\n          src: srcs\n        }\n      });\n    });\n    this._bundles[bundleId] = assetNames;\n  }\n  /**\n   * Tells the resolver what keys are associated with witch asset.\n   * The most important thing the resolver does\n   * @example\n   * // Single key, single asset:\n   * resolver.add({alias: 'foo', src: 'bar.png');\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   *\n   * // Multiple keys, single asset:\n   * resolver.add({alias: ['foo', 'boo'], src: 'bar.png'});\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   * resolver.resolveUrl('boo') // => 'bar.png'\n   *\n   * // Multiple keys, multiple assets:\n   * resolver.add({alias: ['foo', 'boo'], src: ['bar.png', 'bar.webp']});\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   *\n   * // Add custom data attached to the resolver\n   * Resolver.add({\n   *     alias: 'bunnyBooBooSmooth',\n   *     src: 'bunny{png,webp}',\n   *     data: { scaleMode:SCALE_MODES.NEAREST }, // Base texture options\n   * });\n   *\n   * resolver.resolve('bunnyBooBooSmooth') // => { src: 'bunny.png', data: { scaleMode: SCALE_MODES.NEAREST } }\n   * @param aliases - the UnresolvedAsset or array of UnresolvedAssets to add to the resolver\n   */\n  add(aliases) {\n    const assets = [];\n    if (Array.isArray(aliases)) {\n      assets.push(...aliases);\n    } else {\n      assets.push(aliases);\n    }\n    let keyCheck;\n    keyCheck = (key) => {\n      if (this.hasKey(key)) {\n        warn(`[Resolver] already has key: ${key} overwriting`);\n      }\n    };\n    const assetArray = convertToList(assets);\n    assetArray.forEach((asset) => {\n      const { src } = asset;\n      let { data, format, loadParser } = asset;\n      const srcsToUse = convertToList(src).map((src2) => {\n        if (typeof src2 === \"string\") {\n          return createStringVariations(src2);\n        }\n        return Array.isArray(src2) ? src2 : [src2];\n      });\n      const aliasesToUse = this.getAlias(asset);\n      Array.isArray(aliasesToUse) ? aliasesToUse.forEach(keyCheck) : keyCheck(aliasesToUse);\n      const resolvedAssets = [];\n      srcsToUse.forEach((srcs) => {\n        srcs.forEach((src2) => {\n          let formattedAsset = {};\n          if (typeof src2 !== \"object\") {\n            formattedAsset.src = src2;\n            for (let i = 0; i < this._parsers.length; i++) {\n              const parser = this._parsers[i];\n              if (parser.test(src2)) {\n                formattedAsset = parser.parse(src2);\n                break;\n              }\n            }\n          } else {\n            data = src2.data ?? data;\n            format = src2.format ?? format;\n            loadParser = src2.loadParser ?? loadParser;\n            formattedAsset = {\n              ...formattedAsset,\n              ...src2\n            };\n          }\n          if (!aliasesToUse) {\n            throw new Error(`[Resolver] alias is undefined for this asset: ${formattedAsset.src}`);\n          }\n          formattedAsset = this._buildResolvedAsset(formattedAsset, {\n            aliases: aliasesToUse,\n            data,\n            format,\n            loadParser\n          });\n          resolvedAssets.push(formattedAsset);\n        });\n      });\n      aliasesToUse.forEach((alias) => {\n        this._assetMap[alias] = resolvedAssets;\n      });\n    });\n  }\n  // TODO: this needs an overload like load did in Assets\n  /**\n   * If the resolver has had a manifest set via setManifest, this will return the assets urls for\n   * a given bundleId or bundleIds.\n   * @example\n   * // Manifest Example\n   * const manifest = {\n   *     bundles: [\n   *         {\n   *             name: 'load-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'background',\n   *                     src: 'sunset.png',\n   *                 },\n   *                 {\n   *                     alias: 'bar',\n   *                     src: 'load-bar.{png,webp}',\n   *                 },\n   *             ],\n   *         },\n   *         {\n   *             name: 'game-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'character',\n   *                     src: 'robot.png',\n   *                 },\n   *                 {\n   *                     alias: 'enemy',\n   *                     src: 'bad-guy.png',\n   *                 },\n   *             ],\n   *         },\n   *     ]\n   * };\n   *\n   * resolver.setManifest(manifest);\n   * const resolved = resolver.resolveBundle('load-screen');\n   * @param bundleIds - The bundle ids to resolve\n   * @returns All the bundles assets or a hash of assets for each bundle specified\n   */\n  resolveBundle(bundleIds) {\n    const singleAsset = isSingleItem(bundleIds);\n    bundleIds = convertToList(bundleIds);\n    const out = {};\n    bundleIds.forEach((bundleId) => {\n      const assetNames = this._bundles[bundleId];\n      if (assetNames) {\n        const results = this.resolve(assetNames);\n        const assets = {};\n        for (const key in results) {\n          const asset = results[key];\n          assets[this._extractAssetIdFromBundle(bundleId, key)] = asset;\n        }\n        out[bundleId] = assets;\n      }\n    });\n    return singleAsset ? out[bundleIds[0]] : out;\n  }\n  /**\n   * Does exactly what resolve does, but returns just the URL rather than the whole asset object\n   * @param key - The key or keys to resolve\n   * @returns - The URLs associated with the key(s)\n   */\n  resolveUrl(key) {\n    const result = this.resolve(key);\n    if (typeof key !== \"string\") {\n      const out = {};\n      for (const i in result) {\n        out[i] = result[i].src;\n      }\n      return out;\n    }\n    return result.src;\n  }\n  resolve(keys) {\n    const singleAsset = isSingleItem(keys);\n    keys = convertToList(keys);\n    const result = {};\n    keys.forEach((key) => {\n      if (!this._resolverHash[key]) {\n        if (this._assetMap[key]) {\n          let assets = this._assetMap[key];\n          const preferredOrder = this._getPreferredOrder(assets);\n          preferredOrder?.priority.forEach((priorityKey) => {\n            preferredOrder.params[priorityKey].forEach((value) => {\n              const filteredAssets = assets.filter((asset) => {\n                if (asset[priorityKey]) {\n                  return asset[priorityKey] === value;\n                }\n                return false;\n              });\n              if (filteredAssets.length) {\n                assets = filteredAssets;\n              }\n            });\n          });\n          this._resolverHash[key] = assets[0];\n        } else {\n          this._resolverHash[key] = this._buildResolvedAsset({\n            alias: [key],\n            src: key\n          }, {});\n        }\n      }\n      result[key] = this._resolverHash[key];\n    });\n    return singleAsset ? result[keys[0]] : result;\n  }\n  /**\n   * Checks if an asset with a given key exists in the resolver\n   * @param key - The key of the asset\n   */\n  hasKey(key) {\n    return !!this._assetMap[key];\n  }\n  /**\n   * Checks if a bundle with the given key exists in the resolver\n   * @param key - The key of the bundle\n   */\n  hasBundle(key) {\n    return !!this._bundles[key];\n  }\n  /**\n   * Internal function for figuring out what prefer criteria an asset should use.\n   * @param assets\n   */\n  _getPreferredOrder(assets) {\n    for (let i = 0; i < assets.length; i++) {\n      const asset = assets[0];\n      const preferred = this._preferredOrder.find((preference) => preference.params.format.includes(asset.format));\n      if (preferred) {\n        return preferred;\n      }\n    }\n    return this._preferredOrder[0];\n  }\n  /**\n   * Appends the default url parameters to the url\n   * @param url - The url to append the default parameters to\n   * @returns - The url with the default parameters appended\n   */\n  _appendDefaultSearchParams(url) {\n    if (!this._defaultSearchParams)\n      return url;\n    const paramConnector = /\\?/.test(url) ? \"&\" : \"?\";\n    return `${url}${paramConnector}${this._defaultSearchParams}`;\n  }\n  _buildResolvedAsset(formattedAsset, data) {\n    const { aliases, data: assetData, loadParser, format } = data;\n    if (this._basePath || this._rootPath) {\n      formattedAsset.src = path.toAbsolute(formattedAsset.src, this._basePath, this._rootPath);\n    }\n    formattedAsset.alias = aliases ?? formattedAsset.alias ?? [formattedAsset.src];\n    formattedAsset.src = this._appendDefaultSearchParams(formattedAsset.src);\n    formattedAsset.data = { ...assetData || {}, ...formattedAsset.data };\n    formattedAsset.loadParser = loadParser ?? formattedAsset.loadParser;\n    formattedAsset.format = format ?? formattedAsset.format ?? getUrlExtension(formattedAsset.src);\n    return formattedAsset;\n  }\n}\n/**\n * The prefix that denotes a URL is for a retina asset.\n * @static\n * @name RETINA_PREFIX\n * @type {RegExp}\n * @default /@([0-9\\.]+)x/\n * @example `@2x`\n */\nResolver.RETINA_PREFIX = /@([0-9\\.]+)x/;\nfunction getUrlExtension(url) {\n  return url.split(\".\").pop().split(\"?\").shift().split(\"#\").shift();\n}\n\nexport { Resolver, getUrlExtension };\n//# sourceMappingURL=Resolver.mjs.map\n","\"use strict\";\nconst copySearchParams = (targetUrl, sourceUrl) => {\n  const searchParams = sourceUrl.split(\"?\")[1];\n  if (searchParams) {\n    targetUrl += `?${searchParams}`;\n  }\n  return targetUrl;\n};\n\nexport { copySearchParams };\n//# sourceMappingURL=copySearchParams.mjs.map\n","import { Rectangle } from '../maths/shapes/Rectangle.mjs';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture.mjs';\n\n\"use strict\";\nconst _Spritesheet = class _Spritesheet {\n  /**\n   * @param texture - Reference to the source BaseTexture object.\n   * @param {object} data - Spritesheet image data.\n   */\n  constructor(texture, data) {\n    /** For multi-packed spritesheets, this contains a reference to all the other spritesheets it depends on. */\n    this.linkedSheets = [];\n    this._texture = texture instanceof Texture ? texture : null;\n    this.textureSource = texture.source;\n    this.textures = {};\n    this.animations = {};\n    this.data = data;\n    const metaResolution = parseFloat(data.meta.scale);\n    if (metaResolution) {\n      this.resolution = metaResolution;\n      texture.source.resolution = this.resolution;\n    } else {\n      this.resolution = texture.source._resolution;\n    }\n    this._frames = this.data.frames;\n    this._frameKeys = Object.keys(this._frames);\n    this._batchIndex = 0;\n    this._callback = null;\n  }\n  /**\n   * Parser spritesheet from loaded data. This is done asynchronously\n   * to prevent creating too many Texture within a single process.\n   */\n  parse() {\n    return new Promise((resolve) => {\n      this._callback = resolve;\n      this._batchIndex = 0;\n      if (this._frameKeys.length <= _Spritesheet.BATCH_SIZE) {\n        this._processFrames(0);\n        this._processAnimations();\n        this._parseComplete();\n      } else {\n        this._nextBatch();\n      }\n    });\n  }\n  /**\n   * Process a batch of frames\n   * @param initialFrameIndex - The index of frame to start.\n   */\n  _processFrames(initialFrameIndex) {\n    let frameIndex = initialFrameIndex;\n    const maxFrames = _Spritesheet.BATCH_SIZE;\n    while (frameIndex - initialFrameIndex < maxFrames && frameIndex < this._frameKeys.length) {\n      const i = this._frameKeys[frameIndex];\n      const data = this._frames[i];\n      const rect = data.frame;\n      if (rect) {\n        let frame = null;\n        let trim = null;\n        const sourceSize = data.trimmed !== false && data.sourceSize ? data.sourceSize : data.frame;\n        const orig = new Rectangle(\n          0,\n          0,\n          Math.floor(sourceSize.w) / this.resolution,\n          Math.floor(sourceSize.h) / this.resolution\n        );\n        if (data.rotated) {\n          frame = new Rectangle(\n            Math.floor(rect.x) / this.resolution,\n            Math.floor(rect.y) / this.resolution,\n            Math.floor(rect.h) / this.resolution,\n            Math.floor(rect.w) / this.resolution\n          );\n        } else {\n          frame = new Rectangle(\n            Math.floor(rect.x) / this.resolution,\n            Math.floor(rect.y) / this.resolution,\n            Math.floor(rect.w) / this.resolution,\n            Math.floor(rect.h) / this.resolution\n          );\n        }\n        if (data.trimmed !== false && data.spriteSourceSize) {\n          trim = new Rectangle(\n            Math.floor(data.spriteSourceSize.x) / this.resolution,\n            Math.floor(data.spriteSourceSize.y) / this.resolution,\n            Math.floor(rect.w) / this.resolution,\n            Math.floor(rect.h) / this.resolution\n          );\n        }\n        this.textures[i] = new Texture({\n          source: this.textureSource,\n          frame,\n          orig,\n          trim,\n          rotate: data.rotated ? 2 : 0,\n          defaultAnchor: data.anchor,\n          defaultBorders: data.borders,\n          label: i.toString()\n        });\n      }\n      frameIndex++;\n    }\n  }\n  /** Parse animations config. */\n  _processAnimations() {\n    const animations = this.data.animations || {};\n    for (const animName in animations) {\n      this.animations[animName] = [];\n      for (let i = 0; i < animations[animName].length; i++) {\n        const frameName = animations[animName][i];\n        this.animations[animName].push(this.textures[frameName]);\n      }\n    }\n  }\n  /** The parse has completed. */\n  _parseComplete() {\n    const callback = this._callback;\n    this._callback = null;\n    this._batchIndex = 0;\n    callback.call(this, this.textures);\n  }\n  /** Begin the next batch of textures. */\n  _nextBatch() {\n    this._processFrames(this._batchIndex * _Spritesheet.BATCH_SIZE);\n    this._batchIndex++;\n    setTimeout(() => {\n      if (this._batchIndex * _Spritesheet.BATCH_SIZE < this._frameKeys.length) {\n        this._nextBatch();\n      } else {\n        this._processAnimations();\n        this._parseComplete();\n      }\n    }, 0);\n  }\n  /**\n   * Destroy Spritesheet and don't use after this.\n   * @param {boolean} [destroyBase=false] - Whether to destroy the base texture as well\n   */\n  destroy(destroyBase = false) {\n    for (const i in this.textures) {\n      this.textures[i].destroy();\n    }\n    this._frames = null;\n    this._frameKeys = null;\n    this.data = null;\n    this.textures = null;\n    if (destroyBase) {\n      this._texture?.destroy();\n      this.textureSource.destroy();\n    }\n    this._texture = null;\n    this.textureSource = null;\n    this.linkedSheets = [];\n  }\n};\n/** The maximum number of Textures to build per process. */\n_Spritesheet.BATCH_SIZE = 1e3;\nlet Spritesheet = _Spritesheet;\n\nexport { Spritesheet };\n//# sourceMappingURL=Spritesheet.mjs.map\n","import { LoaderParserPriority } from '../assets/loader/parsers/LoaderParser.mjs';\nimport { Resolver } from '../assets/resolver/Resolver.mjs';\nimport { copySearchParams } from '../assets/utils/copySearchParams.mjs';\nimport { ExtensionType } from '../extensions/Extensions.mjs';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture.mjs';\nimport { path } from '../utils/path.mjs';\nimport { Spritesheet } from './Spritesheet.mjs';\n\n\"use strict\";\nconst validImages = [\n  \"jpg\",\n  \"png\",\n  \"jpeg\",\n  \"avif\",\n  \"webp\",\n  \"basis\",\n  \"etc2\",\n  \"bc7\",\n  \"bc6h\",\n  \"bc5\",\n  \"bc4\",\n  \"bc3\",\n  \"bc2\",\n  \"bc1\",\n  \"eac\",\n  \"astc\"\n];\nfunction getCacheableAssets(keys, asset, ignoreMultiPack) {\n  const out = {};\n  keys.forEach((key) => {\n    out[key] = asset;\n  });\n  Object.keys(asset.textures).forEach((key) => {\n    out[key] = asset.textures[key];\n  });\n  if (!ignoreMultiPack) {\n    const basePath = path.dirname(keys[0]);\n    asset.linkedSheets.forEach((item, i) => {\n      const out2 = getCacheableAssets([`${basePath}/${asset.data.meta.related_multi_packs[i]}`], item, true);\n      Object.assign(out, out2);\n    });\n  }\n  return out;\n}\nconst spritesheetAsset = {\n  extension: ExtensionType.Asset,\n  /** Handle the caching of the related Spritesheet Textures */\n  cache: {\n    test: (asset) => asset instanceof Spritesheet,\n    getCacheableAssets: (keys, asset) => getCacheableAssets(keys, asset, false)\n  },\n  /** Resolve the resolution of the asset. */\n  resolver: {\n    test: (value) => {\n      const tempURL = value.split(\"?\")[0];\n      const split = tempURL.split(\".\");\n      const extension = split.pop();\n      const format = split.pop();\n      return extension === \"json\" && validImages.includes(format);\n    },\n    parse: (value) => {\n      const split = value.split(\".\");\n      return {\n        resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? \"1\"),\n        format: split[split.length - 2],\n        src: value\n      };\n    }\n  },\n  /**\n   * Loader plugin that parses sprite sheets!\n   * once the JSON has been loaded this checks to see if the JSON is spritesheet data.\n   * If it is, we load the spritesheets image and parse the data into Spritesheet\n   * All textures in the sprite sheet are then added to the cache\n   */\n  loader: {\n    name: \"spritesheetLoader\",\n    extension: {\n      type: ExtensionType.LoadParser,\n      priority: LoaderParserPriority.Normal\n    },\n    async testParse(asset, options) {\n      return path.extname(options.src).toLowerCase() === \".json\" && !!asset.frames;\n    },\n    async parse(asset, options, loader) {\n      const {\n        texture: imageTexture,\n        // if user need to use preloaded texture\n        imageFilename\n        // if user need to use custom filename (not from jsonFile.meta.image)\n      } = options?.data ?? {};\n      let basePath = path.dirname(options.src);\n      if (basePath && basePath.lastIndexOf(\"/\") !== basePath.length - 1) {\n        basePath += \"/\";\n      }\n      let texture;\n      if (imageTexture instanceof Texture) {\n        texture = imageTexture;\n      } else {\n        const imagePath = copySearchParams(basePath + (imageFilename ?? asset.meta.image), options.src);\n        const assets = await loader.load([imagePath]);\n        texture = assets[imagePath];\n      }\n      const spritesheet = new Spritesheet(\n        texture.source,\n        asset\n      );\n      await spritesheet.parse();\n      const multiPacks = asset?.meta?.related_multi_packs;\n      if (Array.isArray(multiPacks)) {\n        const promises = [];\n        for (const item of multiPacks) {\n          if (typeof item !== \"string\") {\n            continue;\n          }\n          let itemUrl = basePath + item;\n          if (options.data?.ignoreMultiPack) {\n            continue;\n          }\n          itemUrl = copySearchParams(itemUrl, options.src);\n          promises.push(loader.load({\n            src: itemUrl,\n            data: {\n              ignoreMultiPack: true\n            }\n          }));\n        }\n        const res = await Promise.all(promises);\n        spritesheet.linkedSheets = res;\n        res.forEach((item) => {\n          item.linkedSheets = [spritesheet].concat(spritesheet.linkedSheets.filter((sp) => sp !== item));\n        });\n      }\n      return spritesheet;\n    },\n    async unload(spritesheet, _resolvedAsset, loader) {\n      await loader.unload(spritesheet.textureSource._sourceOrigin);\n      spritesheet.destroy(false);\n    }\n  }\n};\n\nexport { spritesheetAsset };\n//# sourceMappingURL=spritesheetAsset.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { spritesheetAsset } from './spritesheetAsset.mjs';\n\n\"use strict\";\nextensions.add(spritesheetAsset);\n//# sourceMappingURL=init.mjs.map\n","import { Point } from '../maths/point/Point.mjs';\n\n\"use strict\";\nclass FederatedEvent {\n  /**\n   * @param manager - The event boundary which manages this event. Propagation can only occur\n   *  within the boundary's jurisdiction.\n   */\n  constructor(manager) {\n    /** Flags whether this event bubbles. This will take effect only if it is set before propagation. */\n    this.bubbles = true;\n    /** @deprecated since 7.0.0 */\n    this.cancelBubble = true;\n    /**\n     * Flags whether this event can be canceled using {@link FederatedEvent.preventDefault}. This is always\n     * false (for now).\n     */\n    this.cancelable = false;\n    /**\n     * Flag added for compatibility with DOM {@code Event}. It is not used in the Federated Events\n     * API.\n     * @see https://dom.spec.whatwg.org/#dom-event-composed\n     */\n    this.composed = false;\n    /** Flags whether the default response of the user agent was prevent through this event. */\n    this.defaultPrevented = false;\n    /**\n     * The propagation phase.\n     * @default {@link FederatedEvent.NONE}\n     */\n    this.eventPhase = FederatedEvent.prototype.NONE;\n    /** Flags whether propagation was stopped. */\n    this.propagationStopped = false;\n    /** Flags whether propagation was immediately stopped. */\n    this.propagationImmediatelyStopped = false;\n    /** The coordinates of the event relative to the nearest DOM layer. This is a non-standard property. */\n    this.layer = new Point();\n    /** The coordinates of the event relative to the DOM document. This is a non-standard property. */\n    this.page = new Point();\n    this.NONE = 0;\n    this.CAPTURING_PHASE = 1;\n    this.AT_TARGET = 2;\n    this.BUBBLING_PHASE = 3;\n    this.manager = manager;\n  }\n  /** @readonly */\n  get layerX() {\n    return this.layer.x;\n  }\n  /** @readonly */\n  get layerY() {\n    return this.layer.y;\n  }\n  /** @readonly */\n  get pageX() {\n    return this.page.x;\n  }\n  /** @readonly */\n  get pageY() {\n    return this.page.y;\n  }\n  /**\n   * Fallback for the deprecated @code{InteractionEvent.data}.\n   * @deprecated since 7.0.0\n   */\n  get data() {\n    return this;\n  }\n  /** The propagation path for this event. Alias for {@link EventBoundary.propagationPath}. */\n  composedPath() {\n    if (this.manager && (!this.path || this.path[this.path.length - 1] !== this.target)) {\n      this.path = this.target ? this.manager.propagationPath(this.target) : [];\n    }\n    return this.path;\n  }\n  /**\n   * Unimplemented method included for implementing the DOM interface {@code Event}. It will throw an {@code Error}.\n   * @deprecated\n   * @param _type\n   * @param _bubbles\n   * @param _cancelable\n   */\n  initEvent(_type, _bubbles, _cancelable) {\n    throw new Error(\"initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.\");\n  }\n  /**\n   * Unimplemented method included for implementing the DOM interface {@code UIEvent}. It will throw an {@code Error}.\n   * @deprecated\n   * @param _typeArg\n   * @param _bubblesArg\n   * @param _cancelableArg\n   * @param _viewArg\n   * @param _detailArg\n   */\n  initUIEvent(_typeArg, _bubblesArg, _cancelableArg, _viewArg, _detailArg) {\n    throw new Error(\"initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.\");\n  }\n  /** Prevent default behavior of PixiJS and the user agent. */\n  preventDefault() {\n    if (this.nativeEvent instanceof Event && this.nativeEvent.cancelable) {\n      this.nativeEvent.preventDefault();\n    }\n    this.defaultPrevented = true;\n  }\n  /**\n   * Stop this event from propagating to any addition listeners, including on the\n   * {@link FederatedEventTarget.currentTarget currentTarget} and also the following\n   * event targets on the propagation path.\n   */\n  stopImmediatePropagation() {\n    this.propagationImmediatelyStopped = true;\n  }\n  /**\n   * Stop this event from propagating to the next {@link FederatedEventTarget}. The rest of the listeners\n   * on the {@link FederatedEventTarget.currentTarget currentTarget} will still be notified.\n   */\n  stopPropagation() {\n    this.propagationStopped = true;\n  }\n}\n\nexport { FederatedEvent };\n//# sourceMappingURL=FederatedEvent.mjs.map\n","var appleIphone = /iPhone/i;\nvar appleIpod = /iPod/i;\nvar appleTablet = /iPad/i;\nvar appleUniversal = /\\biOS-universal(?:.+)Mac\\b/i;\nvar androidPhone = /\\bAndroid(?:.+)Mobile\\b/i;\nvar androidTablet = /Android/i;\nvar amazonPhone = /(?:SD4930UR|\\bSilk(?:.+)Mobile\\b)/i;\nvar amazonTablet = /Silk/i;\nvar windowsPhone = /Windows Phone/i;\nvar windowsTablet = /\\bWindows(?:.+)ARM\\b/i;\nvar otherBlackBerry = /BlackBerry/i;\nvar otherBlackBerry10 = /BB10/i;\nvar otherOpera = /Opera Mini/i;\nvar otherChrome = /\\b(CriOS|Chrome)(?:.+)Mobile/i;\nvar otherFirefox = /Mobile(?:.+)Firefox\\b/i;\nvar isAppleTabletOnIos13 = function (navigator) {\n    return (typeof navigator !== 'undefined' &&\n        navigator.platform === 'MacIntel' &&\n        typeof navigator.maxTouchPoints === 'number' &&\n        navigator.maxTouchPoints > 1 &&\n        typeof MSStream === 'undefined');\n};\nfunction createMatch(userAgent) {\n    return function (regex) { return regex.test(userAgent); };\n}\nexport default function isMobile(param) {\n    var nav = {\n        userAgent: '',\n        platform: '',\n        maxTouchPoints: 0\n    };\n    if (!param && typeof navigator !== 'undefined') {\n        nav = {\n            userAgent: navigator.userAgent,\n            platform: navigator.platform,\n            maxTouchPoints: navigator.maxTouchPoints || 0\n        };\n    }\n    else if (typeof param === 'string') {\n        nav.userAgent = param;\n    }\n    else if (param && param.userAgent) {\n        nav = {\n            userAgent: param.userAgent,\n            platform: param.platform,\n            maxTouchPoints: param.maxTouchPoints || 0\n        };\n    }\n    var userAgent = nav.userAgent;\n    var tmp = userAgent.split('[FBAN');\n    if (typeof tmp[1] !== 'undefined') {\n        userAgent = tmp[0];\n    }\n    tmp = userAgent.split('Twitter');\n    if (typeof tmp[1] !== 'undefined') {\n        userAgent = tmp[0];\n    }\n    var match = createMatch(userAgent);\n    var result = {\n        apple: {\n            phone: match(appleIphone) && !match(windowsPhone),\n            ipod: match(appleIpod),\n            tablet: !match(appleIphone) &&\n                (match(appleTablet) || isAppleTabletOnIos13(nav)) &&\n                !match(windowsPhone),\n            universal: match(appleUniversal),\n            device: (match(appleIphone) ||\n                match(appleIpod) ||\n                match(appleTablet) ||\n                match(appleUniversal) ||\n                isAppleTabletOnIos13(nav)) &&\n                !match(windowsPhone)\n        },\n        amazon: {\n            phone: match(amazonPhone),\n            tablet: !match(amazonPhone) && match(amazonTablet),\n            device: match(amazonPhone) || match(amazonTablet)\n        },\n        android: {\n            phone: (!match(windowsPhone) && match(amazonPhone)) ||\n                (!match(windowsPhone) && match(androidPhone)),\n            tablet: !match(windowsPhone) &&\n                !match(amazonPhone) &&\n                !match(androidPhone) &&\n                (match(amazonTablet) || match(androidTablet)),\n            device: (!match(windowsPhone) &&\n                (match(amazonPhone) ||\n                    match(amazonTablet) ||\n                    match(androidPhone) ||\n                    match(androidTablet))) ||\n                match(/\\bokhttp\\b/i)\n        },\n        windows: {\n            phone: match(windowsPhone),\n            tablet: match(windowsTablet),\n            device: match(windowsPhone) || match(windowsTablet)\n        },\n        other: {\n            blackberry: match(otherBlackBerry),\n            blackberry10: match(otherBlackBerry10),\n            opera: match(otherOpera),\n            firefox: match(otherFirefox),\n            chrome: match(otherChrome),\n            device: match(otherBlackBerry) ||\n                match(otherBlackBerry10) ||\n                match(otherOpera) ||\n                match(otherFirefox) ||\n                match(otherChrome)\n        },\n        any: false,\n        phone: false,\n        tablet: false\n    };\n    result.any =\n        result.apple.device ||\n            result.android.device ||\n            result.windows.device ||\n            result.other.device;\n    result.phone =\n        result.apple.phone || result.android.phone || result.windows.phone;\n    result.tablet =\n        result.apple.tablet || result.android.tablet || result.windows.tablet;\n    return result;\n}\n//# sourceMappingURL=isMobile.js.map","import isMobileJs from 'ismobilejs';\n\n\"use strict\";\nconst isMobileCall = isMobileJs.default ?? isMobileJs;\nconst isMobile = isMobileCall(globalThis.navigator);\n\nexport { isMobile };\n//# sourceMappingURL=isMobile.mjs.map\n","import { FederatedEvent } from '../events/FederatedEvent.mjs';\nimport { ExtensionType } from '../extensions/Extensions.mjs';\nimport { isMobile } from '../utils/browser/isMobile.mjs';\nimport { removeItems } from '../utils/data/removeItems.mjs';\n\n\"use strict\";\nconst KEY_CODE_TAB = 9;\nconst DIV_TOUCH_SIZE = 100;\nconst DIV_TOUCH_POS_X = 0;\nconst DIV_TOUCH_POS_Y = 0;\nconst DIV_TOUCH_ZINDEX = 2;\nconst DIV_HOOK_SIZE = 1;\nconst DIV_HOOK_POS_X = -1e3;\nconst DIV_HOOK_POS_Y = -1e3;\nconst DIV_HOOK_ZINDEX = 2;\nclass AccessibilitySystem {\n  // 2fps\n  // eslint-disable-next-line jsdoc/require-param\n  /**\n   * @param {WebGLRenderer|WebGPURenderer} renderer - A reference to the current renderer\n   */\n  constructor(renderer, _mobileInfo = isMobile) {\n    this._mobileInfo = _mobileInfo;\n    /** Setting this to true will visually show the divs. */\n    this.debug = false;\n    /** Internal variable, see isActive getter. */\n    this._isActive = false;\n    /** Internal variable, see isMobileAccessibility getter. */\n    this._isMobileAccessibility = false;\n    /** A simple pool for storing divs. */\n    this._pool = [];\n    /** This is a tick used to check if an object is no longer being rendered. */\n    this._renderId = 0;\n    /** The array of currently active accessible items. */\n    this._children = [];\n    /** Count to throttle div updates on android devices. */\n    this._androidUpdateCount = 0;\n    /**  The frequency to update the div elements. */\n    this._androidUpdateFrequency = 500;\n    this._hookDiv = null;\n    if (_mobileInfo.tablet || _mobileInfo.phone) {\n      this._createTouchHook();\n    }\n    const div = document.createElement(\"div\");\n    div.style.width = `${DIV_TOUCH_SIZE}px`;\n    div.style.height = `${DIV_TOUCH_SIZE}px`;\n    div.style.position = \"absolute\";\n    div.style.top = `${DIV_TOUCH_POS_X}px`;\n    div.style.left = `${DIV_TOUCH_POS_Y}px`;\n    div.style.zIndex = DIV_TOUCH_ZINDEX.toString();\n    this._div = div;\n    this._renderer = renderer;\n    this._onKeyDown = this._onKeyDown.bind(this);\n    this._onMouseMove = this._onMouseMove.bind(this);\n    globalThis.addEventListener(\"keydown\", this._onKeyDown, false);\n  }\n  /**\n   * Value of `true` if accessibility is currently active and accessibility layers are showing.\n   * @member {boolean}\n   * @readonly\n   */\n  get isActive() {\n    return this._isActive;\n  }\n  /**\n   * Value of `true` if accessibility is enabled for touch devices.\n   * @member {boolean}\n   * @readonly\n   */\n  get isMobileAccessibility() {\n    return this._isMobileAccessibility;\n  }\n  get hookDiv() {\n    return this._hookDiv;\n  }\n  /**\n   * Creates the touch hooks.\n   * @private\n   */\n  _createTouchHook() {\n    const hookDiv = document.createElement(\"button\");\n    hookDiv.style.width = `${DIV_HOOK_SIZE}px`;\n    hookDiv.style.height = `${DIV_HOOK_SIZE}px`;\n    hookDiv.style.position = \"absolute\";\n    hookDiv.style.top = `${DIV_HOOK_POS_X}px`;\n    hookDiv.style.left = `${DIV_HOOK_POS_Y}px`;\n    hookDiv.style.zIndex = DIV_HOOK_ZINDEX.toString();\n    hookDiv.style.backgroundColor = \"#FF0000\";\n    hookDiv.title = \"select to enable accessibility for this content\";\n    hookDiv.addEventListener(\"focus\", () => {\n      this._isMobileAccessibility = true;\n      this._activate();\n      this._destroyTouchHook();\n    });\n    document.body.appendChild(hookDiv);\n    this._hookDiv = hookDiv;\n  }\n  /**\n   * Destroys the touch hooks.\n   * @private\n   */\n  _destroyTouchHook() {\n    if (!this._hookDiv) {\n      return;\n    }\n    document.body.removeChild(this._hookDiv);\n    this._hookDiv = null;\n  }\n  /**\n   * Activating will cause the Accessibility layer to be shown.\n   * This is called when a user presses the tab key.\n   * @private\n   */\n  _activate() {\n    if (this._isActive) {\n      return;\n    }\n    this._isActive = true;\n    globalThis.document.addEventListener(\"mousemove\", this._onMouseMove, true);\n    globalThis.removeEventListener(\"keydown\", this._onKeyDown, false);\n    this._renderer.runners.postrender.add(this);\n    this._renderer.view.canvas.parentNode?.appendChild(this._div);\n  }\n  /**\n   * Deactivating will cause the Accessibility layer to be hidden.\n   * This is called when a user moves the mouse.\n   * @private\n   */\n  _deactivate() {\n    if (!this._isActive || this._isMobileAccessibility) {\n      return;\n    }\n    this._isActive = false;\n    globalThis.document.removeEventListener(\"mousemove\", this._onMouseMove, true);\n    globalThis.addEventListener(\"keydown\", this._onKeyDown, false);\n    this._renderer.runners.postrender.remove(this);\n    this._div.parentNode?.removeChild(this._div);\n  }\n  /**\n   * This recursive function will run through the scene graph and add any new accessible objects to the DOM layer.\n   * @private\n   * @param {Container} container - The Container to check.\n   */\n  _updateAccessibleObjects(container) {\n    if (!container.visible || !container.accessibleChildren) {\n      return;\n    }\n    if (container.accessible && container.isInteractive()) {\n      if (!container._accessibleActive) {\n        this._addChild(container);\n      }\n      container._renderId = this._renderId;\n    }\n    const children = container.children;\n    if (children) {\n      for (let i = 0; i < children.length; i++) {\n        this._updateAccessibleObjects(children[i]);\n      }\n    }\n  }\n  /**\n   * Runner init called, view is available at this point.\n   * @ignore\n   */\n  init(options) {\n    this.debug = options?.debug ?? this.debug;\n    this._renderer.runners.postrender.remove(this);\n  }\n  /**\n   * Runner postrender was called, ensure that all divs are mapped correctly to their Containers.\n   * Only fires while active.\n   * @ignore\n   */\n  postrender() {\n    const now = performance.now();\n    if (this._mobileInfo.android.device && now < this._androidUpdateCount) {\n      return;\n    }\n    this._androidUpdateCount = now + this._androidUpdateFrequency;\n    if (!this._renderer.renderingToScreen || !this._renderer.view.canvas) {\n      return;\n    }\n    if (this._renderer.lastObjectRendered) {\n      this._updateAccessibleObjects(this._renderer.lastObjectRendered);\n    }\n    const { x, y, width, height } = this._renderer.view.canvas.getBoundingClientRect();\n    const { width: viewWidth, height: viewHeight, resolution } = this._renderer;\n    const sx = width / viewWidth * resolution;\n    const sy = height / viewHeight * resolution;\n    let div = this._div;\n    div.style.left = `${x}px`;\n    div.style.top = `${y}px`;\n    div.style.width = `${viewWidth}px`;\n    div.style.height = `${viewHeight}px`;\n    for (let i = 0; i < this._children.length; i++) {\n      const child = this._children[i];\n      if (child._renderId !== this._renderId) {\n        child._accessibleActive = false;\n        removeItems(this._children, i, 1);\n        this._div.removeChild(child._accessibleDiv);\n        this._pool.push(child._accessibleDiv);\n        child._accessibleDiv = null;\n        i--;\n      } else {\n        div = child._accessibleDiv;\n        let hitArea = child.hitArea;\n        const wt = child.worldTransform;\n        if (child.hitArea) {\n          div.style.left = `${(wt.tx + hitArea.x * wt.a) * sx}px`;\n          div.style.top = `${(wt.ty + hitArea.y * wt.d) * sy}px`;\n          div.style.width = `${hitArea.width * wt.a * sx}px`;\n          div.style.height = `${hitArea.height * wt.d * sy}px`;\n        } else {\n          hitArea = child.getBounds().rectangle;\n          this._capHitArea(hitArea);\n          div.style.left = `${hitArea.x * sx}px`;\n          div.style.top = `${hitArea.y * sy}px`;\n          div.style.width = `${hitArea.width * sx}px`;\n          div.style.height = `${hitArea.height * sy}px`;\n          if (div.title !== child.accessibleTitle && child.accessibleTitle !== null) {\n            div.title = child.accessibleTitle || \"\";\n          }\n          if (div.getAttribute(\"aria-label\") !== child.accessibleHint && child.accessibleHint !== null) {\n            div.setAttribute(\"aria-label\", child.accessibleHint || \"\");\n          }\n        }\n        if (child.accessibleTitle !== div.title || child.tabIndex !== div.tabIndex) {\n          div.title = child.accessibleTitle || \"\";\n          div.tabIndex = child.tabIndex;\n          if (this.debug) {\n            this._updateDebugHTML(div);\n          }\n        }\n      }\n    }\n    this._renderId++;\n  }\n  /**\n   * private function that will visually add the information to the\n   * accessibility div\n   * @param {HTMLElement} div -\n   */\n  _updateDebugHTML(div) {\n    div.innerHTML = `type: ${div.type}</br> title : ${div.title}</br> tabIndex: ${div.tabIndex}`;\n  }\n  /**\n   * Adjust the hit area based on the bounds of a display object\n   * @param {Rectangle} hitArea - Bounds of the child\n   */\n  _capHitArea(hitArea) {\n    if (hitArea.x < 0) {\n      hitArea.width += hitArea.x;\n      hitArea.x = 0;\n    }\n    if (hitArea.y < 0) {\n      hitArea.height += hitArea.y;\n      hitArea.y = 0;\n    }\n    const { width: viewWidth, height: viewHeight } = this._renderer;\n    if (hitArea.x + hitArea.width > viewWidth) {\n      hitArea.width = viewWidth - hitArea.x;\n    }\n    if (hitArea.y + hitArea.height > viewHeight) {\n      hitArea.height = viewHeight - hitArea.y;\n    }\n  }\n  /**\n   * Adds a Container to the accessibility manager\n   * @private\n   * @param {Container} container - The child to make accessible.\n   */\n  _addChild(container) {\n    let div = this._pool.pop();\n    if (!div) {\n      div = document.createElement(\"button\");\n      div.style.width = `${DIV_TOUCH_SIZE}px`;\n      div.style.height = `${DIV_TOUCH_SIZE}px`;\n      div.style.backgroundColor = this.debug ? \"rgba(255,255,255,0.5)\" : \"transparent\";\n      div.style.position = \"absolute\";\n      div.style.zIndex = DIV_TOUCH_ZINDEX.toString();\n      div.style.borderStyle = \"none\";\n      if (navigator.userAgent.toLowerCase().includes(\"chrome\")) {\n        div.setAttribute(\"aria-live\", \"off\");\n      } else {\n        div.setAttribute(\"aria-live\", \"polite\");\n      }\n      if (navigator.userAgent.match(/rv:.*Gecko\\//)) {\n        div.setAttribute(\"aria-relevant\", \"additions\");\n      } else {\n        div.setAttribute(\"aria-relevant\", \"text\");\n      }\n      div.addEventListener(\"click\", this._onClick.bind(this));\n      div.addEventListener(\"focus\", this._onFocus.bind(this));\n      div.addEventListener(\"focusout\", this._onFocusOut.bind(this));\n    }\n    div.style.pointerEvents = container.accessiblePointerEvents;\n    div.type = container.accessibleType;\n    if (container.accessibleTitle && container.accessibleTitle !== null) {\n      div.title = container.accessibleTitle;\n    } else if (!container.accessibleHint || container.accessibleHint === null) {\n      div.title = `container ${container.tabIndex}`;\n    }\n    if (container.accessibleHint && container.accessibleHint !== null) {\n      div.setAttribute(\"aria-label\", container.accessibleHint);\n    }\n    if (this.debug) {\n      this._updateDebugHTML(div);\n    }\n    container._accessibleActive = true;\n    container._accessibleDiv = div;\n    div.container = container;\n    this._children.push(container);\n    this._div.appendChild(container._accessibleDiv);\n    container._accessibleDiv.tabIndex = container.tabIndex;\n  }\n  /**\n   * Dispatch events with the EventSystem.\n   * @param e\n   * @param type\n   * @private\n   */\n  _dispatchEvent(e, type) {\n    const { container: target } = e.target;\n    const boundary = this._renderer.events.rootBoundary;\n    const event = Object.assign(new FederatedEvent(boundary), { target });\n    boundary.rootTarget = this._renderer.lastObjectRendered;\n    type.forEach((type2) => boundary.dispatchEvent(event, type2));\n  }\n  /**\n   * Maps the div button press to pixi's EventSystem (click)\n   * @private\n   * @param {MouseEvent} e - The click event.\n   */\n  _onClick(e) {\n    this._dispatchEvent(e, [\"click\", \"pointertap\", \"tap\"]);\n  }\n  /**\n   * Maps the div focus events to pixi's EventSystem (mouseover)\n   * @private\n   * @param {FocusEvent} e - The focus event.\n   */\n  _onFocus(e) {\n    if (!e.target.getAttribute(\"aria-live\")) {\n      e.target.setAttribute(\"aria-live\", \"assertive\");\n    }\n    this._dispatchEvent(e, [\"mouseover\"]);\n  }\n  /**\n   * Maps the div focus events to pixi's EventSystem (mouseout)\n   * @private\n   * @param {FocusEvent} e - The focusout event.\n   */\n  _onFocusOut(e) {\n    if (!e.target.getAttribute(\"aria-live\")) {\n      e.target.setAttribute(\"aria-live\", \"polite\");\n    }\n    this._dispatchEvent(e, [\"mouseout\"]);\n  }\n  /**\n   * Is called when a key is pressed\n   * @private\n   * @param {KeyboardEvent} e - The keydown event.\n   */\n  _onKeyDown(e) {\n    if (e.keyCode !== KEY_CODE_TAB) {\n      return;\n    }\n    this._activate();\n  }\n  /**\n   * Is called when the mouse moves across the renderer element\n   * @private\n   * @param {MouseEvent} e - The mouse event.\n   */\n  _onMouseMove(e) {\n    if (e.movementX === 0 && e.movementY === 0) {\n      return;\n    }\n    this._deactivate();\n  }\n  /** Destroys the accessibility manager */\n  destroy() {\n    this._destroyTouchHook();\n    this._div = null;\n    globalThis.document.removeEventListener(\"mousemove\", this._onMouseMove, true);\n    globalThis.removeEventListener(\"keydown\", this._onKeyDown);\n    this._pool = null;\n    this._children = null;\n    this._renderer = null;\n  }\n}\n/** @ignore */\nAccessibilitySystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"accessibility\"\n};\n\nexport { AccessibilitySystem };\n//# sourceMappingURL=AccessibilitySystem.mjs.map\n","\"use strict\";\nconst accessibilityTarget = {\n  /**\n   * Flag for if the object is accessible. If true AccessibilityManager will overlay a\n   * shadow div with attributes set\n   * @member {boolean}\n   * @memberof scene.Container#\n   */\n  accessible: false,\n  /**\n   * Sets the title attribute of the shadow div\n   * If accessibleTitle AND accessibleHint has not been this will default to 'container [tabIndex]'\n   * @member {string}\n   * @memberof scene.Container#\n   */\n  accessibleTitle: null,\n  /**\n   * Sets the aria-label attribute of the shadow div\n   * @member {string}\n   * @memberof scene.Container#\n   */\n  accessibleHint: null,\n  /**\n   * @member {number}\n   * @memberof scene.Container#\n   * @todo Needs docs.\n   */\n  tabIndex: 0,\n  /**\n   * @member {boolean}\n   * @memberof scene.Container#\n   * @private\n   */\n  _accessibleActive: false,\n  /**\n   * @memberof scene.Container#\n   * @private\n   */\n  _accessibleDiv: null,\n  /**\n   * Specify the type of div the accessible layer is. Screen readers treat the element differently\n   * depending on this type. Defaults to button.\n   * @member {string}\n   * @memberof scene.Container#\n   * @default 'button'\n   */\n  accessibleType: \"button\",\n  /**\n   * Specify the pointer-events the accessible div will use\n   * Defaults to auto.\n   * @type {PointerEvents}\n   * @memberof scene.Container#\n   * @default 'auto'\n   */\n  accessiblePointerEvents: \"auto\",\n  /**\n   * Setting to false will prevent any children inside this container to\n   * be accessible. Defaults to true.\n   * @member {boolean}\n   * @memberof scene.Container#\n   * @default true\n   */\n  accessibleChildren: true,\n  /**\n   * @member {number}\n   * @memberof scene.Container#\n   * @private\n   */\n  _renderId: -1\n};\n\nexport { accessibilityTarget };\n//# sourceMappingURL=accessibilityTarget.mjs.map\n","\"use strict\";\nconst idCounts = /* @__PURE__ */ Object.create(null);\nconst idHash = /* @__PURE__ */ Object.create(null);\nfunction createIdFromString(value, groupId) {\n  let id = idHash[value];\n  if (id === void 0) {\n    if (idCounts[groupId] === void 0) {\n      idCounts[groupId] = 1;\n    }\n    idHash[value] = id = idCounts[groupId]++;\n  }\n  return id;\n}\n\nexport { createIdFromString };\n//# sourceMappingURL=createIdFromString.mjs.map\n","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\n\n\"use strict\";\nlet context;\nfunction getTestContext() {\n  if (!context || context?.isContextLost()) {\n    const canvas = DOMAdapter.get().createCanvas();\n    context = canvas.getContext(\"webgl\", {});\n  }\n  return context;\n}\n\nexport { getTestContext };\n//# sourceMappingURL=getTestContext.mjs.map\n","import { getTestContext } from './getTestContext.mjs';\n\n\"use strict\";\nlet maxFragmentPrecision;\nfunction getMaxFragmentPrecision() {\n  if (!maxFragmentPrecision) {\n    maxFragmentPrecision = \"mediump\";\n    const gl = getTestContext();\n    if (gl) {\n      if (gl.getShaderPrecisionFormat) {\n        const shaderFragment = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT);\n        maxFragmentPrecision = shaderFragment.precision ? \"highp\" : \"mediump\";\n      }\n    }\n  }\n  return maxFragmentPrecision;\n}\n\nexport { getMaxFragmentPrecision };\n//# sourceMappingURL=getMaxFragmentPrecision.mjs.map\n","\"use strict\";\nfunction addProgramDefines(src, isES300, isFragment) {\n  if (isES300)\n    return src;\n  if (isFragment) {\n    src = src.replace(\"out vec4 finalColor;\", \"\");\n    return `\n        \n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in varying\n        #define finalColor gl_FragColor\n        #define texture texture2D\n        #endif\n        ${src}\n        `;\n  }\n  return `\n        \n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in attribute\n        #define out varying\n        #endif\n        ${src}\n        `;\n}\n\nexport { addProgramDefines };\n//# sourceMappingURL=addProgramDefines.mjs.map\n","\"use strict\";\nfunction ensurePrecision(src, options, isFragment) {\n  const maxSupportedPrecision = isFragment ? options.maxSupportedFragmentPrecision : options.maxSupportedVertexPrecision;\n  if (src.substring(0, 9) !== \"precision\") {\n    let precision = isFragment ? options.requestedFragmentPrecision : options.requestedVertexPrecision;\n    if (precision === \"highp\" && maxSupportedPrecision !== \"highp\") {\n      precision = \"mediump\";\n    }\n    return `precision ${precision} float;\n${src}`;\n  } else if (maxSupportedPrecision !== \"highp\" && src.substring(0, 15) === \"precision highp\") {\n    return src.replace(\"precision highp\", \"precision mediump\");\n  }\n  return src;\n}\n\nexport { ensurePrecision };\n//# sourceMappingURL=ensurePrecision.mjs.map\n","\"use strict\";\nfunction insertVersion(src, isES300) {\n  if (!isES300)\n    return src;\n  return `#version 300 es\n${src}`;\n}\n\nexport { insertVersion };\n//# sourceMappingURL=insertVersion.mjs.map\n","\"use strict\";\nconst fragmentNameCache = {};\nconst VertexNameCache = {};\nfunction setProgramName(src, { name = `pixi-program` }, isFragment = true) {\n  name = name.replace(/\\s+/g, \"-\");\n  name += isFragment ? \"-fragment\" : \"-vertex\";\n  const nameCache = isFragment ? fragmentNameCache : VertexNameCache;\n  if (nameCache[name]) {\n    nameCache[name]++;\n    name += `-${nameCache[name]}`;\n  } else {\n    nameCache[name] = 1;\n  }\n  if (src.indexOf(\"#define SHADER_NAME\") !== -1)\n    return src;\n  const shaderName = `#define SHADER_NAME ${name}`;\n  return `${shaderName}\n${src}`;\n}\n\nexport { setProgramName };\n//# sourceMappingURL=setProgramName.mjs.map\n","\"use strict\";\nfunction stripVersion(src, isES300) {\n  if (!isES300)\n    return src;\n  return src.replace(\"#version 300 es\", \"\");\n}\n\nexport { stripVersion };\n//# sourceMappingURL=stripVersion.mjs.map\n","import { createIdFromString } from '../../shared/utils/createIdFromString.mjs';\nimport { getMaxFragmentPrecision } from './program/getMaxFragmentPrecision.mjs';\nimport { addProgramDefines } from './program/preprocessors/addProgramDefines.mjs';\nimport { ensurePrecision } from './program/preprocessors/ensurePrecision.mjs';\nimport { insertVersion } from './program/preprocessors/insertVersion.mjs';\nimport { setProgramName } from './program/preprocessors/setProgramName.mjs';\nimport { stripVersion } from './program/preprocessors/stripVersion.mjs';\n\n\"use strict\";\nconst processes = {\n  // strips any version headers..\n  stripVersion,\n  // adds precision string if not already present\n  ensurePrecision,\n  // add some defines if WebGL1 to make it more compatible with WebGL2 shaders\n  addProgramDefines,\n  // add the program name to the shader\n  setProgramName,\n  // add the version string to the shader header\n  insertVersion\n};\nconst programCache = /* @__PURE__ */ Object.create(null);\nconst _GlProgram = class _GlProgram {\n  /**\n   * Creates a shiny new GlProgram. Used by WebGL renderer.\n   * @param options - The options for the program.\n   */\n  constructor(options) {\n    options = { ..._GlProgram.defaultOptions, ...options };\n    const isES300 = options.fragment.indexOf(\"#version 300 es\") !== -1;\n    const preprocessorOptions = {\n      stripVersion: isES300,\n      ensurePrecision: {\n        requestedFragmentPrecision: options.preferredFragmentPrecision,\n        requestedVertexPrecision: options.preferredVertexPrecision,\n        maxSupportedVertexPrecision: \"highp\",\n        maxSupportedFragmentPrecision: getMaxFragmentPrecision()\n      },\n      setProgramName: {\n        name: options.name\n      },\n      addProgramDefines: isES300,\n      insertVersion: isES300\n    };\n    let fragment = options.fragment;\n    let vertex = options.vertex;\n    Object.keys(processes).forEach((processKey) => {\n      const processOptions = preprocessorOptions[processKey];\n      fragment = processes[processKey](fragment, processOptions, true);\n      vertex = processes[processKey](vertex, processOptions, false);\n    });\n    this.fragment = fragment;\n    this.vertex = vertex;\n    this._key = createIdFromString(`${this.vertex}:${this.fragment}`, \"gl-program\");\n  }\n  /** destroys the program */\n  destroy() {\n    this.fragment = null;\n    this.vertex = null;\n    this._attributeData = null;\n    this._uniformData = null;\n    this._uniformBlockData = null;\n    this.transformFeedbackVaryings = null;\n  }\n  /**\n   * Helper function that creates a program for a given source.\n   * It will check the program cache if the program has already been created.\n   * If it has that one will be returned, if not a new one will be created and cached.\n   * @param options - The options for the program.\n   * @returns A program using the same source\n   */\n  static from(options) {\n    const key = `${options.vertex}:${options.fragment}`;\n    if (!programCache[key]) {\n      programCache[key] = new _GlProgram(options);\n    }\n    return programCache[key];\n  }\n};\n/** The default options used by the program. */\n_GlProgram.defaultOptions = {\n  preferredVertexPrecision: \"highp\",\n  preferredFragmentPrecision: \"mediump\"\n};\nlet GlProgram = _GlProgram;\n\nexport { GlProgram };\n//# sourceMappingURL=GlProgram.mjs.map\n","\"use strict\";\nconst attributeFormatData = {\n  uint8x2: { size: 2, stride: 2, normalised: false },\n  uint8x4: { size: 4, stride: 4, normalised: false },\n  sint8x2: { size: 2, stride: 2, normalised: false },\n  sint8x4: { size: 4, stride: 4, normalised: false },\n  unorm8x2: { size: 2, stride: 2, normalised: true },\n  unorm8x4: { size: 4, stride: 4, normalised: true },\n  snorm8x2: { size: 2, stride: 2, normalised: true },\n  snorm8x4: { size: 4, stride: 4, normalised: true },\n  uint16x2: { size: 2, stride: 4, normalised: false },\n  uint16x4: { size: 4, stride: 8, normalised: false },\n  sint16x2: { size: 2, stride: 4, normalised: false },\n  sint16x4: { size: 4, stride: 8, normalised: false },\n  unorm16x2: { size: 2, stride: 4, normalised: true },\n  unorm16x4: { size: 4, stride: 8, normalised: true },\n  snorm16x2: { size: 2, stride: 4, normalised: true },\n  snorm16x4: { size: 4, stride: 8, normalised: true },\n  float16x2: { size: 2, stride: 4, normalised: false },\n  float16x4: { size: 4, stride: 8, normalised: false },\n  float32: { size: 1, stride: 4, normalised: false },\n  float32x2: { size: 2, stride: 8, normalised: false },\n  float32x3: { size: 3, stride: 12, normalised: false },\n  float32x4: { size: 4, stride: 16, normalised: false },\n  uint32: { size: 1, stride: 4, normalised: false },\n  uint32x2: { size: 2, stride: 8, normalised: false },\n  uint32x3: { size: 3, stride: 12, normalised: false },\n  uint32x4: { size: 4, stride: 16, normalised: false },\n  sint32: { size: 1, stride: 4, normalised: false },\n  sint32x2: { size: 2, stride: 8, normalised: false },\n  sint32x3: { size: 3, stride: 12, normalised: false },\n  sint32x4: { size: 4, stride: 16, normalised: false }\n};\nfunction getAttributeInfoFromFormat(format) {\n  return attributeFormatData[format] ?? attributeFormatData.float32;\n}\n\nexport { getAttributeInfoFromFormat };\n//# sourceMappingURL=getAttributeInfoFromFormat.mjs.map\n","import { getAttributeInfoFromFormat } from '../../../shared/geometry/utils/getAttributeInfoFromFormat.mjs';\n\n\"use strict\";\nconst WGSL_TO_VERTEX_TYPES = {\n  f32: \"float32\",\n  \"vec2<f32>\": \"float32x2\",\n  \"vec3<f32>\": \"float32x3\",\n  \"vec4<f32>\": \"float32x4\",\n  vec2f: \"float32x2\",\n  vec3f: \"float32x3\",\n  vec4f: \"float32x4\",\n  i32: \"sint32\",\n  \"vec2<i32>\": \"sint32x2\",\n  \"vec3<i32>\": \"sint32x3\",\n  \"vec4<i32>\": \"sint32x4\",\n  u32: \"uint32\",\n  \"vec2<u32>\": \"uint32x2\",\n  \"vec3<u32>\": \"uint32x3\",\n  \"vec4<u32>\": \"uint32x4\",\n  bool: \"uint32\",\n  \"vec2<bool>\": \"uint32x2\",\n  \"vec3<bool>\": \"uint32x3\",\n  \"vec4<bool>\": \"uint32x4\"\n};\nfunction extractAttributesFromGpuProgram({ source, entryPoint }) {\n  const results = {};\n  const mainVertStart = source.indexOf(`fn ${entryPoint}`);\n  if (mainVertStart !== -1) {\n    const arrowFunctionStart = source.indexOf(\"->\", mainVertStart);\n    if (arrowFunctionStart !== -1) {\n      const functionArgsSubstring = source.substring(mainVertStart, arrowFunctionStart);\n      const inputsRegex = /@location\\((\\d+)\\)\\s+([a-zA-Z0-9_]+)\\s*:\\s*([a-zA-Z0-9_<>]+)(?:,|\\s|$)/g;\n      let match;\n      while ((match = inputsRegex.exec(functionArgsSubstring)) !== null) {\n        const format = WGSL_TO_VERTEX_TYPES[match[3]] ?? \"float32\";\n        results[match[2]] = {\n          location: parseInt(match[1], 10),\n          format,\n          stride: getAttributeInfoFromFormat(format).stride,\n          offset: 0,\n          instance: false,\n          start: 0\n        };\n      }\n    }\n  }\n  return results;\n}\n\nexport { extractAttributesFromGpuProgram };\n//# sourceMappingURL=extractAttributesFromGpuProgram.mjs.map\n","\"use strict\";\nfunction extractStructAndGroups(wgsl) {\n  const linePattern = /(^|[^/])@(group|binding)\\(\\d+\\)[^;]+;/g;\n  const groupPattern = /@group\\((\\d+)\\)/;\n  const bindingPattern = /@binding\\((\\d+)\\)/;\n  const namePattern = /var(<[^>]+>)? (\\w+)/;\n  const typePattern = /:\\s*(\\w+)/;\n  const structPattern = /struct\\s+(\\w+)\\s*{([^}]+)}/g;\n  const structMemberPattern = /(\\w+)\\s*:\\s*([\\w\\<\\>]+)/g;\n  const structName = /struct\\s+(\\w+)/;\n  const groups = wgsl.match(linePattern)?.map((item) => ({\n    group: parseInt(item.match(groupPattern)[1], 10),\n    binding: parseInt(item.match(bindingPattern)[1], 10),\n    name: item.match(namePattern)[2],\n    isUniform: item.match(namePattern)[1] === \"<uniform>\",\n    type: item.match(typePattern)[1]\n  }));\n  if (!groups) {\n    return {\n      groups: [],\n      structs: []\n    };\n  }\n  const structs = wgsl.match(structPattern)?.map((struct) => {\n    const name = struct.match(structName)[1];\n    const members = struct.match(structMemberPattern).reduce((acc, member) => {\n      const [name2, type] = member.split(\":\");\n      acc[name2.trim()] = type.trim();\n      return acc;\n    }, {});\n    if (!members) {\n      return null;\n    }\n    return { name, members };\n  }).filter(({ name }) => groups.some((group) => group.type === name)) ?? [];\n  return {\n    groups,\n    structs\n  };\n}\n\nexport { extractStructAndGroups };\n//# sourceMappingURL=extractStructAndGroups.mjs.map\n","\"use strict\";\nvar ShaderStage = /* @__PURE__ */ ((ShaderStage2) => {\n  ShaderStage2[ShaderStage2[\"VERTEX\"] = 1] = \"VERTEX\";\n  ShaderStage2[ShaderStage2[\"FRAGMENT\"] = 2] = \"FRAGMENT\";\n  ShaderStage2[ShaderStage2[\"COMPUTE\"] = 4] = \"COMPUTE\";\n  return ShaderStage2;\n})(ShaderStage || {});\n\nexport { ShaderStage };\n//# sourceMappingURL=const.mjs.map\n","import { ShaderStage } from '../../../shared/shader/const.mjs';\n\n\"use strict\";\nfunction generateGpuLayoutGroups({ groups }) {\n  const layout = [];\n  for (let i = 0; i < groups.length; i++) {\n    const group = groups[i];\n    if (!layout[group.group]) {\n      layout[group.group] = [];\n    }\n    if (group.isUniform) {\n      layout[group.group].push({\n        binding: group.binding,\n        visibility: ShaderStage.VERTEX | ShaderStage.FRAGMENT,\n        buffer: {\n          type: \"uniform\"\n        }\n      });\n    } else if (group.type === \"sampler\") {\n      layout[group.group].push({\n        binding: group.binding,\n        visibility: ShaderStage.FRAGMENT,\n        sampler: {\n          type: \"filtering\"\n        }\n      });\n    } else if (group.type === \"texture_2d\") {\n      layout[group.group].push({\n        binding: group.binding,\n        visibility: ShaderStage.FRAGMENT,\n        texture: {\n          sampleType: \"float\",\n          viewDimension: \"2d\",\n          multisampled: false\n        }\n      });\n    }\n  }\n  return layout;\n}\n\nexport { generateGpuLayoutGroups };\n//# sourceMappingURL=generateGpuLayoutGroups.mjs.map\n","\"use strict\";\nfunction generateLayoutHash({ groups }) {\n  const layout = [];\n  for (let i = 0; i < groups.length; i++) {\n    const group = groups[i];\n    if (!layout[group.group]) {\n      layout[group.group] = {};\n    }\n    layout[group.group][group.name] = group.binding;\n  }\n  return layout;\n}\n\nexport { generateLayoutHash };\n//# sourceMappingURL=generateLayoutHash.mjs.map\n","\"use strict\";\nfunction removeStructAndGroupDuplicates(vertexStructsAndGroups, fragmentStructsAndGroups) {\n  const structNameSet = /* @__PURE__ */ new Set();\n  const dupeGroupKeySet = /* @__PURE__ */ new Set();\n  const structs = [...vertexStructsAndGroups.structs, ...fragmentStructsAndGroups.structs].filter((struct) => {\n    if (structNameSet.has(struct.name)) {\n      return false;\n    }\n    structNameSet.add(struct.name);\n    return true;\n  });\n  const groups = [...vertexStructsAndGroups.groups, ...fragmentStructsAndGroups.groups].filter((group) => {\n    const key = `${group.name}-${group.binding}`;\n    if (dupeGroupKeySet.has(key)) {\n      return false;\n    }\n    dupeGroupKeySet.add(key);\n    return true;\n  });\n  return { structs, groups };\n}\n\nexport { removeStructAndGroupDuplicates };\n//# sourceMappingURL=removeStructAndGroupDuplicates.mjs.map\n","import { createIdFromString } from '../../shared/utils/createIdFromString.mjs';\nimport { extractAttributesFromGpuProgram } from './utils/extractAttributesFromGpuProgram.mjs';\nimport { extractStructAndGroups } from './utils/extractStructAndGroups.mjs';\nimport { generateGpuLayoutGroups } from './utils/generateGpuLayoutGroups.mjs';\nimport { generateLayoutHash } from './utils/generateLayoutHash.mjs';\nimport { removeStructAndGroupDuplicates } from './utils/removeStructAndGroupDuplicates.mjs';\n\n\"use strict\";\nconst programCache = /* @__PURE__ */ Object.create(null);\nclass GpuProgram {\n  /**\n   * Create a new GpuProgram\n   * @param options - The options for the gpu program\n   */\n  constructor(options) {\n    /**\n     * @internal\n     * @ignore\n     */\n    this._layoutKey = 0;\n    const { fragment, vertex, layout, gpuLayout, name } = options;\n    this.name = name;\n    this.fragment = fragment;\n    this.vertex = vertex;\n    if (fragment.source === vertex.source) {\n      const structsAndGroups = extractStructAndGroups(fragment.source);\n      this.structsAndGroups = structsAndGroups;\n    } else {\n      const vertexStructsAndGroups = extractStructAndGroups(vertex.source);\n      const fragmentStructsAndGroups = extractStructAndGroups(fragment.source);\n      this.structsAndGroups = removeStructAndGroupDuplicates(vertexStructsAndGroups, fragmentStructsAndGroups);\n    }\n    this.layout = layout ?? generateLayoutHash(this.structsAndGroups);\n    this.gpuLayout = gpuLayout ?? generateGpuLayoutGroups(this.structsAndGroups);\n    this.autoAssignGlobalUniforms = !!(this.layout[0]?.globalUniforms !== void 0);\n    this.autoAssignLocalUniforms = !!(this.layout[1]?.localUniforms !== void 0);\n    this._generateProgramKey();\n  }\n  // TODO maker this pure\n  _generateProgramKey() {\n    const { vertex, fragment } = this;\n    const bigKey = vertex.source + fragment.source + vertex.entryPoint + fragment.entryPoint;\n    this._layoutKey = createIdFromString(bigKey, \"program\");\n  }\n  get attributeData() {\n    this._attributeData ?? (this._attributeData = extractAttributesFromGpuProgram(this.vertex));\n    return this._attributeData;\n  }\n  /** destroys the program */\n  destroy() {\n    this.gpuLayout = null;\n    this.layout = null;\n    this.structsAndGroups = null;\n    this.fragment = null;\n    this.vertex = null;\n  }\n  /**\n   * Helper function that creates a program for a given source.\n   * It will check the program cache if the program has already been created.\n   * If it has that one will be returned, if not a new one will be created and cached.\n   * @param options - The options for the program.\n   * @returns A program using the same source\n   */\n  static from(options) {\n    const key = `${options.vertex.source}:${options.fragment.source}:${options.fragment.entryPoint}:${options.vertex.entryPoint}`;\n    if (!programCache[key]) {\n      programCache[key] = new GpuProgram(options);\n    }\n    return programCache[key];\n  }\n}\n\nexport { GpuProgram };\n//# sourceMappingURL=GpuProgram.mjs.map\n","\"use strict\";\nfunction getDefaultUniformValue(type, size) {\n  switch (type) {\n    case \"f32\":\n      return 0;\n    case \"vec2<f32>\":\n      return new Float32Array(2 * size);\n    case \"vec3<f32>\":\n      return new Float32Array(3 * size);\n    case \"vec4<f32>\":\n      return new Float32Array(4 * size);\n    case \"mat2x2<f32>\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        1\n      ]);\n    case \"mat3x3<f32>\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        1\n      ]);\n    case \"mat4x4<f32>\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n  }\n  return null;\n}\n\nexport { getDefaultUniformValue };\n//# sourceMappingURL=getDefaultUniformValue.mjs.map\n","import { uid } from '../../../../utils/data/uid.mjs';\nimport { createIdFromString } from '../utils/createIdFromString.mjs';\nimport { getDefaultUniformValue } from './utils/getDefaultUniformValue.mjs';\n\n\"use strict\";\nconst _UniformGroup = class _UniformGroup {\n  /**\n   * Create a new Uniform group\n   * @param uniformStructures - The structures of the uniform group\n   * @param options - The optional parameters of this uniform group\n   */\n  constructor(uniformStructures, options) {\n    /** used internally to know if a uniform group was used in the last render pass */\n    this._touched = 0;\n    /** a unique id for this uniform group used through the renderer */\n    this.uid = uid(\"uniform\");\n    /** a resource type, used to identify how to handle it when its in a bind group / shader resource */\n    this._resourceType = \"uniformGroup\";\n    /** the resource id used internally by the renderer to build bind group keys */\n    this._resourceId = uid(\"resource\");\n    /** used ito identify if this is a uniform group */\n    this.isUniformGroup = true;\n    /**\n     * used to flag if this Uniform groups data is different from what it has stored in its buffer / on the GPU\n     * @internal\n     * @ignore\n     */\n    this._dirtyId = 0;\n    // implementing the interface - UniformGroup are not destroyed\n    this.destroyed = false;\n    options = { ..._UniformGroup.defaultOptions, ...options };\n    this.uniformStructures = uniformStructures;\n    const uniforms = {};\n    for (const i in uniformStructures) {\n      const uniformData = uniformStructures[i];\n      uniformData.name = i;\n      uniformData.size = uniformData.size ?? 1;\n      uniformData.value ?? (uniformData.value = getDefaultUniformValue(uniformData.type, uniformData.size));\n      uniforms[i] = uniformData.value;\n    }\n    this.uniforms = uniforms;\n    this._dirtyId = 1;\n    this.ubo = options.ubo;\n    this.isStatic = options.isStatic;\n    this._signature = createIdFromString(Object.keys(uniforms).map(\n      (i) => `${i}-${uniformStructures[i].type}`\n    ).join(\"-\"), \"uniform-group\");\n  }\n  /** Call this if you want the uniform groups data to be uploaded to the GPU only useful if `isStatic` is true. */\n  update() {\n    this._dirtyId++;\n  }\n};\n/** The default options used by the uniform group. */\n_UniformGroup.defaultOptions = {\n  /** if true the UniformGroup is handled as an Uniform buffer object. */\n  ubo: false,\n  /** if true, then you are responsible for when the data is uploaded to the GPU by calling `update()` */\n  isStatic: false\n};\nlet UniformGroup = _UniformGroup;\n\nexport { UniformGroup };\n//# sourceMappingURL=UniformGroup.mjs.map\n","\"use strict\";\nclass BindGroup {\n  /**\n   * Create a new instance eof the Bind Group.\n   * @param resources - The resources that are bound together for use by a shader.\n   */\n  constructor(resources) {\n    /** The resources that are bound together for use by a shader. */\n    this.resources = /* @__PURE__ */ Object.create(null);\n    this._dirty = true;\n    let index = 0;\n    for (const i in resources) {\n      const resource = resources[i];\n      this.setResource(resource, index++);\n    }\n    this._updateKey();\n  }\n  /**\n   * Updates the key if its flagged as dirty. This is used internally to\n   * match this bind group to a WebGPU BindGroup.\n   * @internal\n   * @ignore\n   */\n  _updateKey() {\n    if (!this._dirty)\n      return;\n    this._dirty = false;\n    const keyParts = [];\n    let index = 0;\n    for (const i in this.resources) {\n      keyParts[index++] = this.resources[i]._resourceId;\n    }\n    this._key = keyParts.join(\"|\");\n  }\n  /**\n   * Set a resource at a given index. this function will\n   * ensure that listeners will be removed from the current resource\n   * and added to the new resource.\n   * @param resource - The resource to set.\n   * @param index - The index to set the resource at.\n   */\n  setResource(resource, index) {\n    const currentResource = this.resources[index];\n    if (resource === currentResource)\n      return;\n    if (currentResource) {\n      resource.off?.(\"change\", this.onResourceChange, this);\n    }\n    resource.on?.(\"change\", this.onResourceChange, this);\n    this.resources[index] = resource;\n    this._dirty = true;\n  }\n  /**\n   * Returns the resource at the current specified index.\n   * @param index - The index of the resource to get.\n   * @returns - The resource at the specified index.\n   */\n  getResource(index) {\n    return this.resources[index];\n  }\n  /**\n   * Used internally to 'touch' each resource, to ensure that the GC\n   * knows that all resources in this bind group are still being used.\n   * @param tick - The current tick.\n   * @internal\n   * @ignore\n   */\n  _touch(tick) {\n    const resources = this.resources;\n    for (const i in resources) {\n      resources[i]._touched = tick;\n    }\n  }\n  /** Destroys this bind group and removes all listeners. */\n  destroy() {\n    const resources = this.resources;\n    for (const i in resources) {\n      const resource = resources[i];\n      resource.off?.(\"change\", this.onResourceChange, this);\n    }\n    this.resources = null;\n  }\n  onResourceChange(resource) {\n    this._dirty = true;\n    if (resource.destroyed) {\n      const resources = this.resources;\n      for (const i in resources) {\n        if (resources[i] === resource) {\n          resources[i] = null;\n        }\n      }\n    } else {\n      this._updateKey();\n    }\n  }\n}\n\nexport { BindGroup };\n//# sourceMappingURL=BindGroup.mjs.map\n","\"use strict\";\nvar RendererType = /* @__PURE__ */ ((RendererType2) => {\n  RendererType2[RendererType2[\"WEBGL\"] = 1] = \"WEBGL\";\n  RendererType2[RendererType2[\"WEBGPU\"] = 2] = \"WEBGPU\";\n  RendererType2[RendererType2[\"BOTH\"] = 3] = \"BOTH\";\n  return RendererType2;\n})(RendererType || {});\n\nexport { RendererType };\n//# sourceMappingURL=types.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { GlProgram } from '../../gl/shader/GlProgram.mjs';\nimport { BindGroup } from '../../gpu/shader/BindGroup.mjs';\nimport { GpuProgram } from '../../gpu/shader/GpuProgram.mjs';\nimport { RendererType } from '../../types.mjs';\nimport { UniformGroup } from './UniformGroup.mjs';\n\n\"use strict\";\nclass Shader extends EventEmitter {\n  constructor(options) {\n    super();\n    /**\n     * A record of the uniform groups and resources used by the shader.\n     * This is used by WebGL renderer to sync uniform data.\n     * @internal\n     * @ignore\n     */\n    this._uniformBindMap = /* @__PURE__ */ Object.create(null);\n    this._ownedBindGroups = [];\n    let {\n      gpuProgram,\n      glProgram,\n      groups,\n      resources,\n      compatibleRenderers,\n      groupMap\n    } = options;\n    this.gpuProgram = gpuProgram;\n    this.glProgram = glProgram;\n    if (compatibleRenderers === void 0) {\n      compatibleRenderers = 0;\n      if (gpuProgram)\n        compatibleRenderers |= RendererType.WEBGPU;\n      if (glProgram)\n        compatibleRenderers |= RendererType.WEBGL;\n    }\n    this.compatibleRenderers = compatibleRenderers;\n    const nameHash = {};\n    if (!resources && !groups) {\n      resources = {};\n    }\n    if (resources && groups) {\n      throw new Error(\"[Shader] Cannot have both resources and groups\");\n    } else if (!gpuProgram && groups && !groupMap) {\n      throw new Error(\"[Shader] No group map or WebGPU shader provided - consider using resources instead.\");\n    } else if (!gpuProgram && groups && groupMap) {\n      for (const i in groupMap) {\n        for (const j in groupMap[i]) {\n          const uniformName = groupMap[i][j];\n          nameHash[uniformName] = {\n            group: i,\n            binding: j,\n            name: uniformName\n          };\n        }\n      }\n    } else if (gpuProgram && groups && !groupMap) {\n      const groupData = gpuProgram.structsAndGroups.groups;\n      groupMap = {};\n      groupData.forEach((data) => {\n        groupMap[data.group] = groupMap[data.group] || {};\n        groupMap[data.group][data.binding] = data.name;\n        nameHash[data.name] = data;\n      });\n    } else if (resources) {\n      if (!gpuProgram) {\n        groupMap = {};\n        groups = {\n          99: new BindGroup()\n        };\n        this._ownedBindGroups.push(groups[99]);\n        let bindTick = 0;\n        for (const i in resources) {\n          nameHash[i] = { group: 99, binding: bindTick, name: i };\n          groupMap[99] = groupMap[99] || {};\n          groupMap[99][bindTick] = i;\n          bindTick++;\n        }\n      } else {\n        const groupData = gpuProgram.structsAndGroups.groups;\n        groupMap = {};\n        groupData.forEach((data) => {\n          groupMap[data.group] = groupMap[data.group] || {};\n          groupMap[data.group][data.binding] = data.name;\n          nameHash[data.name] = data;\n        });\n      }\n      groups = {};\n      for (const i in resources) {\n        const name = i;\n        let value = resources[i];\n        if (!value.source && !value._resourceType) {\n          value = new UniformGroup(value);\n        }\n        const data = nameHash[name];\n        if (data) {\n          if (!groups[data.group]) {\n            groups[data.group] = new BindGroup();\n            this._ownedBindGroups.push(groups[data.group]);\n          }\n          groups[data.group].setResource(value, data.binding);\n        }\n      }\n    }\n    this.groups = groups;\n    this._uniformBindMap = groupMap;\n    this.resources = this._buildResourceAccessor(groups, nameHash);\n  }\n  /**\n   * Sometimes a resource group will be provided later (for example global uniforms)\n   * In such cases, this method can be used to let the shader know about the group.\n   * @param name - the name of the resource group\n   * @param groupIndex - the index of the group (should match the webGPU shader group location)\n   * @param bindIndex - the index of the bind point (should match the webGPU shader bind point)\n   */\n  addResource(name, groupIndex, bindIndex) {\n    var _a, _b;\n    (_a = this._uniformBindMap)[groupIndex] || (_a[groupIndex] = {});\n    (_b = this._uniformBindMap[groupIndex])[bindIndex] || (_b[bindIndex] = name);\n    if (!this.groups[groupIndex]) {\n      this.groups[groupIndex] = new BindGroup();\n      this._ownedBindGroups.push(this.groups[groupIndex]);\n    }\n  }\n  _buildResourceAccessor(groups, nameHash) {\n    const uniformsOut = {};\n    for (const i in nameHash) {\n      const data = nameHash[i];\n      Object.defineProperty(uniformsOut, data.name, {\n        get() {\n          return groups[data.group].getResource(data.binding);\n        },\n        set(value) {\n          groups[data.group].setResource(value, data.binding);\n        }\n      });\n    }\n    return uniformsOut;\n  }\n  /**\n   * Use to destroy the shader when its not longer needed.\n   * It will destroy the resources and remove listeners.\n   * @param destroyPrograms - if the programs should be destroyed as well.\n   * Make sure its not being used by other shaders!\n   */\n  destroy(destroyPrograms = false) {\n    this.emit(\"destroy\", this);\n    if (destroyPrograms) {\n      this.gpuProgram?.destroy();\n      this.glProgram?.destroy();\n    }\n    this.gpuProgram = null;\n    this.glProgram = null;\n    this.removeAllListeners();\n    this._uniformBindMap = null;\n    this._ownedBindGroups.forEach((bindGroup) => {\n      bindGroup.destroy();\n    });\n    this._ownedBindGroups = null;\n    this.resources = null;\n    this.groups = null;\n  }\n  static from(options) {\n    const { gpu, gl, ...rest } = options;\n    let gpuProgram;\n    let glProgram;\n    if (gpu) {\n      gpuProgram = GpuProgram.from(gpu);\n    }\n    if (gl) {\n      glProgram = GlProgram.from(gl);\n    }\n    return new Shader({\n      gpuProgram,\n      glProgram,\n      ...rest\n    });\n  }\n}\n\nexport { Shader };\n//# sourceMappingURL=Shader.mjs.map\n","\"use strict\";\nconst blendModeIds = {\n  normal: 0,\n  add: 1,\n  multiply: 2,\n  screen: 3,\n  overlay: 4,\n  erase: 5,\n  \"normal-npm\": 6,\n  \"add-npm\": 7,\n  \"screen-npm\": 8\n};\nconst BLEND = 0;\nconst OFFSET = 1;\nconst CULLING = 2;\nconst DEPTH_TEST = 3;\nconst WINDING = 4;\nconst DEPTH_MASK = 5;\nconst _State = class _State {\n  constructor() {\n    this.data = 0;\n    this.blendMode = \"normal\";\n    this.polygonOffset = 0;\n    this.blend = true;\n    this.depthMask = true;\n  }\n  /**\n   * Activates blending of the computed fragment color values.\n   * @default true\n   */\n  get blend() {\n    return !!(this.data & 1 << BLEND);\n  }\n  set blend(value) {\n    if (!!(this.data & 1 << BLEND) !== value) {\n      this.data ^= 1 << BLEND;\n    }\n  }\n  /**\n   * Activates adding an offset to depth values of polygon's fragments\n   * @default false\n   */\n  get offsets() {\n    return !!(this.data & 1 << OFFSET);\n  }\n  set offsets(value) {\n    if (!!(this.data & 1 << OFFSET) !== value) {\n      this.data ^= 1 << OFFSET;\n    }\n  }\n  /** The culling settings for this state none - No culling back - Back face culling front - Front face culling */\n  set cullMode(value) {\n    if (value === \"none\") {\n      this.culling = false;\n      return;\n    }\n    this.culling = true;\n    this.clockwiseFrontFace = value === \"front\";\n  }\n  get cullMode() {\n    if (!this.culling) {\n      return \"none\";\n    }\n    return this.clockwiseFrontFace ? \"front\" : \"back\";\n  }\n  /**\n   * Activates culling of polygons.\n   * @default false\n   */\n  get culling() {\n    return !!(this.data & 1 << CULLING);\n  }\n  set culling(value) {\n    if (!!(this.data & 1 << CULLING) !== value) {\n      this.data ^= 1 << CULLING;\n    }\n  }\n  /**\n   * Activates depth comparisons and updates to the depth buffer.\n   * @default false\n   */\n  get depthTest() {\n    return !!(this.data & 1 << DEPTH_TEST);\n  }\n  set depthTest(value) {\n    if (!!(this.data & 1 << DEPTH_TEST) !== value) {\n      this.data ^= 1 << DEPTH_TEST;\n    }\n  }\n  /**\n   * Enables or disables writing to the depth buffer.\n   * @default true\n   */\n  get depthMask() {\n    return !!(this.data & 1 << DEPTH_MASK);\n  }\n  set depthMask(value) {\n    if (!!(this.data & 1 << DEPTH_MASK) !== value) {\n      this.data ^= 1 << DEPTH_MASK;\n    }\n  }\n  /**\n   * Specifies whether or not front or back-facing polygons can be culled.\n   * @default false\n   */\n  get clockwiseFrontFace() {\n    return !!(this.data & 1 << WINDING);\n  }\n  set clockwiseFrontFace(value) {\n    if (!!(this.data & 1 << WINDING) !== value) {\n      this.data ^= 1 << WINDING;\n    }\n  }\n  /**\n   * The blend mode to be applied when this state is set. Apply a value of `normal` to reset the blend mode.\n   * Setting this mode to anything other than NO_BLEND will automatically switch blending on.\n   * @default 'normal'\n   */\n  get blendMode() {\n    return this._blendMode;\n  }\n  set blendMode(value) {\n    this.blend = value !== \"none\";\n    this._blendMode = value;\n    this._blendModeId = blendModeIds[value] || 0;\n  }\n  /**\n   * The polygon offset. Setting this property to anything other than 0 will automatically enable polygon offset fill.\n   * @default 0\n   */\n  get polygonOffset() {\n    return this._polygonOffset;\n  }\n  set polygonOffset(value) {\n    this.offsets = !!value;\n    this._polygonOffset = value;\n  }\n  toString() {\n    return `[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`;\n  }\n  /**\n   * A quickly getting an instance of a State that is configured for 2d rendering.\n   * @returns a new State with values set for 2d rendering\n   */\n  static for2d() {\n    const state = new _State();\n    state.depthTest = false;\n    state.blend = true;\n    return state;\n  }\n};\n_State.default2d = _State.for2d();\nlet State = _State;\n\nexport { State };\n//# sourceMappingURL=State.mjs.map\n","import { GlProgram } from '../rendering/renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../rendering/renderers/gpu/shader/GpuProgram.mjs';\nimport { Shader } from '../rendering/renderers/shared/shader/Shader.mjs';\nimport { State } from '../rendering/renderers/shared/state/State.mjs';\n\n\"use strict\";\nconst _Filter = class _Filter extends Shader {\n  /**\n   * @param options - The optional parameters of this filter.\n   */\n  constructor(options) {\n    options = { ..._Filter.defaultOptions, ...options };\n    super(options);\n    /** If enabled is true the filter is applied, if false it will not. */\n    this.enabled = true;\n    /**\n     * The gpu state the filter requires to render.\n     * @internal\n     * @ignore\n     */\n    this._state = State.for2d();\n    this.padding = options.padding;\n    if (typeof options.antialias === \"boolean\") {\n      this.antialias = options.antialias ? \"on\" : \"off\";\n    } else {\n      this.antialias = options.antialias;\n    }\n    this.resolution = options.resolution;\n    this.blendRequired = options.blendRequired;\n    this.addResource(\"uTexture\", 0, 1);\n  }\n  /**\n   * Applies the filter\n   * @param filterManager - The renderer to retrieve the filter from\n   * @param input - The input render target.\n   * @param output - The target to output to.\n   * @param clearMode - Should the output be cleared before rendering to it\n   */\n  apply(filterManager, input, output, clearMode) {\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n  /**\n   * Get the blend mode of the filter.\n   * @default \"normal\"\n   */\n  get blendMode() {\n    return this._state.blendMode;\n  }\n  /** Sets the blend mode of the filter. */\n  set blendMode(value) {\n    this._state.blendMode = value;\n  }\n  /**\n   * A short hand function to create a filter based of a vertex and fragment shader src.\n   * @param options\n   * @returns A shiny new PixiJS filter!\n   */\n  static from(options) {\n    const { gpu, gl, ...rest } = options;\n    let gpuProgram;\n    let glProgram;\n    if (gpu) {\n      gpuProgram = GpuProgram.from(gpu);\n    }\n    if (gl) {\n      glProgram = GlProgram.from(gl);\n    }\n    return new _Filter({\n      gpuProgram,\n      glProgram,\n      ...rest\n    });\n  }\n};\n/**\n * The default filter settings\n * @static\n */\n_Filter.defaultOptions = {\n  blendMode: \"normal\",\n  resolution: 1,\n  padding: 0,\n  antialias: \"off\",\n  blendRequired: false\n};\nlet Filter = _Filter;\n\nexport { Filter };\n//# sourceMappingURL=Filter.mjs.map\n","import { extensions, ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst environments = [];\nextensions.handleByNamedList(ExtensionType.Environment, environments);\nasync function autoDetectEnvironment(manageImports) {\n  if (!manageImports)\n    return;\n  for (let i = 0; i < environments.length; i++) {\n    const env = environments[i];\n    if (env.value.test()) {\n      await env.value.load();\n      return;\n    }\n  }\n}\n\nexport { autoDetectEnvironment };\n//# sourceMappingURL=autoDetectEnvironment.mjs.map\n","\"use strict\";\nlet unsafeEval;\nfunction unsafeEvalSupported() {\n  if (typeof unsafeEval === \"boolean\") {\n    return unsafeEval;\n  }\n  try {\n    const func = new Function(\"param1\", \"param2\", \"param3\", \"return param1[param2] === param3;\");\n    unsafeEval = func({ a: \"b\" }, \"a\", \"b\") === true;\n  } catch (e) {\n    unsafeEval = false;\n  }\n  return unsafeEval;\n}\n\nexport { unsafeEvalSupported };\n//# sourceMappingURL=unsafeEvalSupported.mjs.map\n","'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 32767 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim | 0);\n            triangles.push(ear.i / dim | 0);\n            triangles.push(next.i / dim | 0);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    var p = c.next;\n    while (p !== a) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(x0, y0, minX, minY, invSize),\n        maxZ = zOrder(x1, y1, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim | 0);\n            triangles.push(p.i / dim | 0);\n            triangles.push(b.i / dim | 0);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize, 0);\n                earcutLinked(c, triangles, dim, minX, minY, invSize, 0);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    var bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    var bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    filterPoints(bridgeReverse, bridgeReverse.next);\n    return filterPoints(bridge, bridge.next);\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                m = p.x < p.next.x ? p : p.next;\n                if (x === hx) return m; // hole touches outer segment; pick leftmost endpoint\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === 0) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = (x - minX) * invSize | 0;\n    y = (y - minY) * invSize | 0;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) >= (ax - px) * (cy - py) &&\n           (ax - px) * (by - py) >= (bx - px) * (ay - py) &&\n           (bx - px) * (cy - py) >= (cx - px) * (by - py);\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = 0;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n","\"use strict\";\nvar CLEAR = /* @__PURE__ */ ((CLEAR2) => {\n  CLEAR2[CLEAR2[\"NONE\"] = 0] = \"NONE\";\n  CLEAR2[CLEAR2[\"COLOR\"] = 16384] = \"COLOR\";\n  CLEAR2[CLEAR2[\"STENCIL\"] = 1024] = \"STENCIL\";\n  CLEAR2[CLEAR2[\"DEPTH\"] = 256] = \"DEPTH\";\n  CLEAR2[CLEAR2[\"COLOR_DEPTH\"] = 16640] = \"COLOR_DEPTH\";\n  CLEAR2[CLEAR2[\"COLOR_STENCIL\"] = 17408] = \"COLOR_STENCIL\";\n  CLEAR2[CLEAR2[\"DEPTH_STENCIL\"] = 1280] = \"DEPTH_STENCIL\";\n  CLEAR2[CLEAR2[\"ALL\"] = 17664] = \"ALL\";\n  return CLEAR2;\n})(CLEAR || {});\n\nexport { CLEAR };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nclass SystemRunner {\n  /**\n   * @param name - The function name that will be executed on the listeners added to this Runner.\n   */\n  constructor(name) {\n    this.items = [];\n    this._name = name;\n  }\n  /* eslint-disable jsdoc/require-param, jsdoc/check-param-names */\n  /**\n   * Dispatch/Broadcast Runner to all listeners added to the queue.\n   * @param {...any} params - (optional) parameters to pass to each listener\n   */\n  /*  eslint-enable jsdoc/require-param, jsdoc/check-param-names */\n  emit(a0, a1, a2, a3, a4, a5, a6, a7) {\n    const { name, items } = this;\n    for (let i = 0, len = items.length; i < len; i++) {\n      items[i][name](a0, a1, a2, a3, a4, a5, a6, a7);\n    }\n    return this;\n  }\n  /**\n   * Add a listener to the Runner\n   *\n   * Runners do not need to have scope or functions passed to them.\n   * All that is required is to pass the listening object and ensure that it has contains a function that has the same name\n   * as the name provided to the Runner when it was created.\n   *\n   * Eg A listener passed to this Runner will require a 'complete' function.\n   *\n   * ```\n   * import { Runner } from 'pixi.js';\n   *\n   * const complete = new Runner('complete');\n   * ```\n   *\n   * The scope used will be the object itself.\n   * @param {any} item - The object that will be listening.\n   */\n  add(item) {\n    if (item[this._name]) {\n      this.remove(item);\n      this.items.push(item);\n    }\n    return this;\n  }\n  /**\n   * Remove a single listener from the dispatch queue.\n   * @param {any} item - The listener that you would like to remove.\n   */\n  remove(item) {\n    const index = this.items.indexOf(item);\n    if (index !== -1) {\n      this.items.splice(index, 1);\n    }\n    return this;\n  }\n  /**\n   * Check to see if the listener is already in the Runner\n   * @param {any} item - The listener that you would like to check.\n   */\n  contains(item) {\n    return this.items.indexOf(item) !== -1;\n  }\n  /** Remove all listeners from the Runner */\n  removeAll() {\n    this.items.length = 0;\n    return this;\n  }\n  /** Remove all references, don't use after this. */\n  destroy() {\n    this.removeAll();\n    this.items = null;\n    this._name = null;\n  }\n  /**\n   * `true` if there are no this Runner contains no listeners\n   * @readonly\n   */\n  get empty() {\n    return this.items.length === 0;\n  }\n  /**\n   * The name of the runner.\n   * @readonly\n   */\n  get name() {\n    return this._name;\n  }\n}\n\nexport { SystemRunner };\n//# sourceMappingURL=SystemRunner.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { Container } from '../../../../scene/container/Container.mjs';\nimport { unsafeEvalSupported } from '../../../../utils/browser/unsafeEvalSupported.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\nimport '../../../../utils/utils.mjs';\nimport { CLEAR } from '../../gl/const.mjs';\nimport { SystemRunner } from './SystemRunner.mjs';\nimport EventEmitter from 'eventemitter3';\n\n\"use strict\";\nconst defaultRunners = [\n  \"init\",\n  \"destroy\",\n  \"contextChange\",\n  \"resolutionChange\",\n  \"reset\",\n  \"renderEnd\",\n  \"renderStart\",\n  \"render\",\n  \"update\",\n  \"postrender\",\n  \"prerender\"\n];\nconst _AbstractRenderer = class _AbstractRenderer extends EventEmitter {\n  /**\n   * Set up a system with a collection of SystemClasses and runners.\n   * Systems are attached dynamically to this class when added.\n   * @param config - the config for the system manager\n   */\n  constructor(config) {\n    super();\n    this.runners = /* @__PURE__ */ Object.create(null);\n    this.renderPipes = /* @__PURE__ */ Object.create(null);\n    this._initOptions = {};\n    this._systemsHash = /* @__PURE__ */ Object.create(null);\n    this.type = config.type;\n    this.name = config.name;\n    const combinedRunners = [...defaultRunners, ...config.runners ?? []];\n    this._addRunners(...combinedRunners);\n    this._addSystems(config.systems);\n    this._addPipes(config.renderPipes, config.renderPipeAdaptors);\n    this._unsafeEvalCheck();\n  }\n  /**\n   * Initialize the renderer.\n   * @param options - The options to use to create the renderer.\n   */\n  async init(options = {}) {\n    for (const systemName in this._systemsHash) {\n      const system = this._systemsHash[systemName];\n      const defaultSystemOptions = system.constructor.defaultOptions;\n      options = { ...defaultSystemOptions, ...options };\n    }\n    options = { ..._AbstractRenderer.defaultOptions, ...options };\n    this._roundPixels = options.roundPixels ? 1 : 0;\n    for (let i = 0; i < this.runners.init.items.length; i++) {\n      await this.runners.init.items[i].init(options);\n    }\n    this._initOptions = options;\n  }\n  render(args, deprecated) {\n    let options = args;\n    if (options instanceof Container) {\n      options = { container: options };\n      if (deprecated) {\n        deprecation(v8_0_0, \"passing a second argument is deprecated, please use render options instead\");\n        options.target = deprecated.renderTexture;\n      }\n    }\n    options.target || (options.target = this.view.renderTarget);\n    if (options.target === this.view.renderTarget) {\n      this._lastObjectRendered = options.container;\n      options.clearColor = this.background.colorRgba;\n    }\n    if (options.clearColor) {\n      const isRGBAArray = Array.isArray(options.clearColor) && options.clearColor.length === 4;\n      options.clearColor = isRGBAArray ? options.clearColor : Color.shared.setValue(options.clearColor).toArray();\n    }\n    if (!options.transform) {\n      options.container.updateLocalTransform();\n      options.transform = options.container.localTransform;\n    }\n    this.runners.prerender.emit(options);\n    this.runners.renderStart.emit(options);\n    this.runners.render.emit(options);\n    this.runners.renderEnd.emit(options);\n    this.runners.postrender.emit(options);\n  }\n  /**\n   * Resizes the WebGL view to the specified width and height.\n   * @param desiredScreenWidth - The desired width of the screen.\n   * @param desiredScreenHeight - The desired height of the screen.\n   * @param resolution - The resolution / device pixel ratio of the renderer.\n   */\n  resize(desiredScreenWidth, desiredScreenHeight, resolution) {\n    this.view.resize(desiredScreenWidth, desiredScreenHeight, resolution);\n    this.emit(\"resize\", this.view.screen.width, this.view.screen.height);\n  }\n  clear(options = {}) {\n    const renderer = this;\n    options.target || (options.target = renderer.renderTarget.renderTarget);\n    options.clearColor || (options.clearColor = this.background.colorRgba);\n    options.clear ?? (options.clear = CLEAR.ALL);\n    const { clear, clearColor, target } = options;\n    Color.shared.setValue(clearColor ?? this.background.colorRgba);\n    renderer.renderTarget.clear(target, clear, Color.shared.toArray());\n  }\n  /** The resolution / device pixel ratio of the renderer. */\n  get resolution() {\n    return this.view.resolution;\n  }\n  set resolution(value) {\n    this.view.resolution = value;\n    this.runners.resolutionChange.emit(value);\n  }\n  /**\n   * Same as view.width, actual number of pixels in the canvas by horizontal.\n   * @member {number}\n   * @readonly\n   * @default 800\n   */\n  get width() {\n    return this.view.texture.frame.width;\n  }\n  /**\n   * Same as view.height, actual number of pixels in the canvas by vertical.\n   * @default 600\n   */\n  get height() {\n    return this.view.texture.frame.height;\n  }\n  // NOTE: this was `view` in v7\n  /**\n   * The canvas element that everything is drawn to.\n   * @type {environment.ICanvas}\n   */\n  get canvas() {\n    return this.view.canvas;\n  }\n  /**\n   * the last object rendered by the renderer. Useful for other plugins like interaction managers\n   * @readonly\n   */\n  get lastObjectRendered() {\n    return this._lastObjectRendered;\n  }\n  /**\n   * Flag if we are rendering to the screen vs renderTexture\n   * @readonly\n   * @default true\n   */\n  get renderingToScreen() {\n    const renderer = this;\n    return renderer.renderTarget.renderingToScreen;\n  }\n  /**\n   * Measurements of the screen. (0, 0, screenWidth, screenHeight).\n   *\n   * Its safe to use as filterArea or hitArea for the whole stage.\n   */\n  get screen() {\n    return this.view.screen;\n  }\n  /**\n   * Create a bunch of runners based of a collection of ids\n   * @param runnerIds - the runner ids to add\n   */\n  _addRunners(...runnerIds) {\n    runnerIds.forEach((runnerId) => {\n      this.runners[runnerId] = new SystemRunner(runnerId);\n    });\n  }\n  _addSystems(systems) {\n    let i;\n    for (i in systems) {\n      const val = systems[i];\n      this._addSystem(val.value, val.name);\n    }\n  }\n  /**\n   * Add a new system to the renderer.\n   * @param ClassRef - Class reference\n   * @param name - Property name for system, if not specified\n   *        will use a static `name` property on the class itself. This\n   *        name will be assigned as s property on the Renderer so make\n   *        sure it doesn't collide with properties on Renderer.\n   * @returns Return instance of renderer\n   */\n  _addSystem(ClassRef, name) {\n    const system = new ClassRef(this);\n    if (this[name]) {\n      throw new Error(`Whoops! The name \"${name}\" is already in use`);\n    }\n    this[name] = system;\n    this._systemsHash[name] = system;\n    for (const i in this.runners) {\n      this.runners[i].add(system);\n    }\n    return this;\n  }\n  _addPipes(pipes, pipeAdaptors) {\n    const adaptors = pipeAdaptors.reduce((acc, adaptor) => {\n      acc[adaptor.name] = adaptor.value;\n      return acc;\n    }, {});\n    pipes.forEach((pipe) => {\n      const PipeClass = pipe.value;\n      const name = pipe.name;\n      const Adaptor = adaptors[name];\n      this.renderPipes[name] = new PipeClass(\n        this,\n        Adaptor ? new Adaptor() : null\n      );\n    });\n  }\n  destroy(options = false) {\n    this.runners.destroy.items.reverse();\n    this.runners.destroy.emit(options);\n    Object.values(this.runners).forEach((runner) => {\n      runner.destroy();\n    });\n    this._systemsHash = null;\n    this.renderPipes = null;\n  }\n  /**\n   * Generate a texture from a container.\n   * @param options - options or container target to use when generating the texture\n   * @returns a texture\n   */\n  generateTexture(options) {\n    return this.textureGenerator.generateTexture(options);\n  }\n  /**\n   * Whether the renderer will round coordinates to whole pixels when rendering.\n   * Can be overridden on a per scene item basis.\n   */\n  get roundPixels() {\n    return !!this._roundPixels;\n  }\n  /**\n   * Overrideable function by `pixi.js/unsafe-eval` to silence\n   * throwing an error if platform doesn't support unsafe-evals.\n   * @private\n   * @ignore\n   */\n  _unsafeEvalCheck() {\n    if (!unsafeEvalSupported()) {\n      throw new Error(\"Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.\");\n    }\n  }\n};\n/** The default options for the renderer. */\n_AbstractRenderer.defaultOptions = {\n  /**\n   * Default resolution / device pixel ratio of the renderer.\n   * @default 1\n   */\n  resolution: 1,\n  /**\n   * Should the `failIfMajorPerformanceCaveat` flag be enabled as a context option used in the `isWebGLSupported`\n   * function. If set to true, a WebGL renderer can fail to be created if the browser thinks there could be\n   * performance issues when using WebGL.\n   *\n   * In PixiJS v6 this has changed from true to false by default, to allow WebGL to work in as many\n   * scenarios as possible. However, some users may have a poor experience, for example, if a user has a gpu or\n   * driver version blacklisted by the\n   * browser.\n   *\n   * If your application requires high performance rendering, you may wish to set this to false.\n   * We recommend one of two options if you decide to set this flag to false:\n   *\n   * 1: Use the Canvas renderer as a fallback in case high performance WebGL is\n   *    not supported.\n   *\n   * 2: Call `isWebGLSupported` (which if found in the utils package) in your code before attempting to create a\n   *    PixiJS renderer, and show an error message to the user if the function returns false, explaining that their\n   *    device & browser combination does not support high performance WebGL.\n   *    This is a much better strategy than trying to create a PixiJS renderer and finding it then fails.\n   * @default false\n   */\n  failIfMajorPerformanceCaveat: false,\n  /**\n   * Should round pixels be forced when rendering?\n   * @default false\n   */\n  roundPixels: false\n};\nlet AbstractRenderer = _AbstractRenderer;\n\nexport { AbstractRenderer };\n//# sourceMappingURL=AbstractRenderer.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\nimport { AbstractRenderer } from '../../rendering/renderers/shared/system/AbstractRenderer.mjs';\n\n\"use strict\";\nlet _isWebGLSupported;\nfunction isWebGLSupported(failIfMajorPerformanceCaveat) {\n  if (_isWebGLSupported !== void 0)\n    return _isWebGLSupported;\n  _isWebGLSupported = (() => {\n    const contextOptions = {\n      stencil: true,\n      failIfMajorPerformanceCaveat: failIfMajorPerformanceCaveat ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat\n    };\n    try {\n      if (!DOMAdapter.get().getWebGLRenderingContext()) {\n        return false;\n      }\n      const canvas = DOMAdapter.get().createCanvas();\n      let gl = canvas.getContext(\"webgl\", contextOptions);\n      const success = !!gl?.getContextAttributes()?.stencil;\n      if (gl) {\n        const loseContext = gl.getExtension(\"WEBGL_lose_context\");\n        if (loseContext) {\n          loseContext.loseContext();\n        }\n      }\n      gl = null;\n      return success;\n    } catch (e) {\n      return false;\n    }\n  })();\n  return _isWebGLSupported;\n}\n\nexport { isWebGLSupported };\n//# sourceMappingURL=isWebGLSupported.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\n\n\"use strict\";\nlet _isWebGPUSupported;\nasync function isWebGPUSupported(options = {}) {\n  if (_isWebGPUSupported !== void 0)\n    return _isWebGPUSupported;\n  _isWebGPUSupported = await (async () => {\n    const gpu = DOMAdapter.get().getNavigator().gpu;\n    if (!gpu) {\n      return false;\n    }\n    try {\n      const adapter = await navigator.gpu.requestAdapter(options);\n      await adapter.requestDevice();\n      return true;\n    } catch (e) {\n      return false;\n    }\n  })();\n  return _isWebGPUSupported;\n}\n\nexport { isWebGPUSupported };\n//# sourceMappingURL=isWebGPUSupported.mjs.map\n","import { autoDetectEnvironment } from '../../environment/autoDetectEnvironment.mjs';\nimport { isWebGLSupported } from '../../utils/browser/isWebGLSupported.mjs';\nimport { isWebGPUSupported } from '../../utils/browser/isWebGPUSupported.mjs';\nimport { AbstractRenderer } from './shared/system/AbstractRenderer.mjs';\n\n\"use strict\";\nconst renderPriority = [\"webgl\", \"webgpu\", \"canvas\"];\nasync function autoDetectRenderer(options) {\n  let preferredOrder = [];\n  if (options.preference) {\n    preferredOrder.push(options.preference);\n    renderPriority.forEach((item) => {\n      if (item !== options.preference) {\n        preferredOrder.push(item);\n      }\n    });\n  } else {\n    preferredOrder = renderPriority.slice();\n  }\n  let RendererClass;\n  await autoDetectEnvironment(\n    options.manageImports ?? true\n  );\n  let finalOptions = {};\n  for (let i = 0; i < preferredOrder.length; i++) {\n    const rendererType = preferredOrder[i];\n    if (rendererType === \"webgpu\" && await isWebGPUSupported()) {\n      const { WebGPURenderer } = await import('./gpu/WebGPURenderer.mjs');\n      RendererClass = WebGPURenderer;\n      finalOptions = { ...options, ...options.webgpu };\n      break;\n    } else if (rendererType === \"webgl\" && isWebGLSupported(\n      options.failIfMajorPerformanceCaveat ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat\n    )) {\n      const { WebGLRenderer } = await import('./gl/WebGLRenderer.mjs');\n      RendererClass = WebGLRenderer;\n      finalOptions = { ...options, ...options.webgl };\n      break;\n    } else if (rendererType === \"canvas\") {\n      finalOptions = { ...options };\n      throw new Error(\"CanvasRenderer is not yet implemented\");\n    }\n  }\n  delete finalOptions.webgpu;\n  delete finalOptions.webgl;\n  if (!RendererClass) {\n    throw new Error(\"No available renderer for the current environment\");\n  }\n  const renderer = new RendererClass();\n  await renderer.init(finalOptions);\n  return renderer;\n}\n\nexport { autoDetectRenderer };\n//# sourceMappingURL=autoDetectRenderer.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nclass ResizePlugin {\n  /**\n   * Initialize the plugin with scope of application instance\n   * @static\n   * @private\n   * @param {object} [options] - See application options\n   */\n  static init(options) {\n    Object.defineProperty(\n      this,\n      \"resizeTo\",\n      /**\n       * The HTML element or window to automatically resize the\n       * renderer's view element to match width and height.\n       * @member {Window|HTMLElement}\n       * @name resizeTo\n       * @memberof app.Application#\n       */\n      {\n        set(dom) {\n          globalThis.removeEventListener(\"resize\", this.queueResize);\n          this._resizeTo = dom;\n          if (dom) {\n            globalThis.addEventListener(\"resize\", this.queueResize);\n            this.resize();\n          }\n        },\n        get() {\n          return this._resizeTo;\n        }\n      }\n    );\n    this.queueResize = () => {\n      if (!this._resizeTo) {\n        return;\n      }\n      this._cancelResize();\n      this._resizeId = requestAnimationFrame(() => this.resize());\n    };\n    this._cancelResize = () => {\n      if (this._resizeId) {\n        cancelAnimationFrame(this._resizeId);\n        this._resizeId = null;\n      }\n    };\n    this.resize = () => {\n      if (!this._resizeTo) {\n        return;\n      }\n      this._cancelResize();\n      let width;\n      let height;\n      if (this._resizeTo === globalThis.window) {\n        width = globalThis.innerWidth;\n        height = globalThis.innerHeight;\n      } else {\n        const { clientWidth, clientHeight } = this._resizeTo;\n        width = clientWidth;\n        height = clientHeight;\n      }\n      this.renderer.resize(width, height);\n      this.render();\n    };\n    this._resizeId = null;\n    this._resizeTo = null;\n    this.resizeTo = options.resizeTo || null;\n  }\n  /**\n   * Clean up the ticker, scoped to application\n   * @static\n   * @private\n   */\n  static destroy() {\n    globalThis.removeEventListener(\"resize\", this.queueResize);\n    this._cancelResize();\n    this._cancelResize = null;\n    this.queueResize = null;\n    this.resizeTo = null;\n    this.resize = null;\n  }\n}\n/** @ignore */\nResizePlugin.extension = ExtensionType.Application;\n\nexport { ResizePlugin };\n//# sourceMappingURL=ResizePlugin.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\nimport { UPDATE_PRIORITY } from '../ticker/const.mjs';\nimport { Ticker } from '../ticker/Ticker.mjs';\n\n\"use strict\";\nclass TickerPlugin {\n  /**\n   * Initialize the plugin with scope of application instance\n   * @static\n   * @private\n   * @param {object} [options] - See application options\n   */\n  static init(options) {\n    options = Object.assign({\n      autoStart: true,\n      sharedTicker: false\n    }, options);\n    Object.defineProperty(\n      this,\n      \"ticker\",\n      {\n        set(ticker) {\n          if (this._ticker) {\n            this._ticker.remove(this.render, this);\n          }\n          this._ticker = ticker;\n          if (ticker) {\n            ticker.add(this.render, this, UPDATE_PRIORITY.LOW);\n          }\n        },\n        get() {\n          return this._ticker;\n        }\n      }\n    );\n    this.stop = () => {\n      this._ticker.stop();\n    };\n    this.start = () => {\n      this._ticker.start();\n    };\n    this._ticker = null;\n    this.ticker = options.sharedTicker ? Ticker.shared : new Ticker();\n    if (options.autoStart) {\n      this.start();\n    }\n  }\n  /**\n   * Clean up the ticker, scoped to application.\n   * @static\n   * @private\n   */\n  static destroy() {\n    if (this._ticker) {\n      const oldTicker = this._ticker;\n      this.ticker = null;\n      oldTicker.destroy();\n    }\n  }\n}\n/** @ignore */\nTickerPlugin.extension = ExtensionType.Application;\n\nexport { TickerPlugin };\n//# sourceMappingURL=TickerPlugin.mjs.map\n","\nmodule.exports = parse\n\n/**\n * expected argument lengths\n * @type {Object}\n */\n\nvar length = {a: 7, c: 6, h: 1, l: 2, m: 2, q: 4, s: 4, t: 2, v: 1, z: 0}\n\n/**\n * segment pattern\n * @type {RegExp}\n */\n\nvar segment = /([astvzqmhlc])([^astvzqmhlc]*)/ig\n\n/**\n * parse an svg path data string. Generates an Array\n * of commands where each command is an Array of the\n * form `[command, arg1, arg2, ...]`\n *\n * @param {String} path\n * @return {Array}\n */\n\nfunction parse(path) {\n\tvar data = []\n\tpath.replace(segment, function(_, command, args){\n\t\tvar type = command.toLowerCase()\n\t\targs = parseValues(args)\n\n\t\t// overloaded moveTo\n\t\tif (type == 'm' && args.length > 2) {\n\t\t\tdata.push([command].concat(args.splice(0, 2)))\n\t\t\ttype = 'l'\n\t\t\tcommand = command == 'm' ? 'l' : 'L'\n\t\t}\n\n\t\twhile (true) {\n\t\t\tif (args.length == length[type]) {\n\t\t\t\targs.unshift(command)\n\t\t\t\treturn data.push(args)\n\t\t\t}\n\t\t\tif (args.length < length[type]) throw new Error('malformed path data')\n\t\t\tdata.push([command].concat(args.splice(0, length[type])))\n\t\t}\n\t})\n\treturn data\n}\n\nvar number = /-?[0-9]*\\.?[0-9]+(?:e[-+]?\\d+)?/ig\n\nfunction parseValues(args) {\n\tvar numbers = args.match(number)\n\treturn numbers ? numbers.map(Number) : []\n}\n","import parse from 'parse-svg-path';\nimport { warn } from '../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nfunction SVGToGraphicsPath(svgPath, path) {\n  const commands = parse(svgPath);\n  const subpaths = [];\n  let currentSubPath = null;\n  let lastX = 0;\n  let lastY = 0;\n  for (let i = 0; i < commands.length; i++) {\n    const command = commands[i];\n    const type = command[0];\n    const data = command;\n    switch (type) {\n      case \"M\":\n        lastX = data[1];\n        lastY = data[2];\n        path.moveTo(lastX, lastY);\n        break;\n      case \"m\":\n        lastX += data[1];\n        lastY += data[2];\n        path.moveTo(lastX, lastY);\n        break;\n      case \"H\":\n        lastX = data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"h\":\n        lastX += data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"V\":\n        lastY = data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"v\":\n        lastY += data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"L\":\n        lastX = data[1];\n        lastY = data[2];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"l\":\n        lastX += data[1];\n        lastY += data[2];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"C\":\n        lastX = data[5];\n        lastY = data[6];\n        path.bezierCurveTo(\n          data[1],\n          data[2],\n          data[3],\n          data[4],\n          lastX,\n          lastY\n        );\n        break;\n      case \"c\":\n        path.bezierCurveTo(\n          lastX + data[1],\n          lastY + data[2],\n          lastX + data[3],\n          lastY + data[4],\n          lastX + data[5],\n          lastY + data[6]\n        );\n        lastX += data[5];\n        lastY += data[6];\n        break;\n      case \"S\":\n        lastX = data[3];\n        lastY = data[4];\n        path.bezierCurveToShort(\n          data[1],\n          data[2],\n          lastX,\n          lastY\n        );\n        break;\n      case \"s\":\n        path.bezierCurveToShort(\n          lastX + data[1],\n          lastY + data[2],\n          lastX + data[3],\n          lastY + data[4]\n        );\n        lastX += data[3];\n        lastY += data[4];\n        break;\n      case \"Q\":\n        lastX = data[3];\n        lastY = data[4];\n        path.quadraticCurveTo(\n          data[1],\n          data[2],\n          lastX,\n          lastY\n        );\n        break;\n      case \"q\":\n        path.quadraticCurveTo(\n          lastX + data[1],\n          lastY + data[2],\n          lastX + data[3],\n          lastY + data[4]\n        );\n        lastX += data[3];\n        lastY += data[4];\n        break;\n      case \"T\":\n        lastX = data[1];\n        lastY = data[2];\n        path.quadraticCurveToShort(\n          lastX,\n          lastY\n        );\n        break;\n      case \"t\":\n        lastX += data[1];\n        lastY += data[2];\n        path.quadraticCurveToShort(\n          lastX,\n          lastY\n        );\n        break;\n      case \"A\":\n        lastX = data[6];\n        lastY = data[7];\n        path.arcToSvg(\n          data[1],\n          data[2],\n          data[3],\n          data[4],\n          data[5],\n          lastX,\n          lastY\n        );\n        break;\n      case \"a\":\n        lastX += data[6];\n        lastY += data[7];\n        path.arcToSvg(\n          data[1],\n          data[2],\n          data[3],\n          data[4],\n          data[5],\n          lastX,\n          lastY\n        );\n        break;\n      case \"Z\":\n      case \"z\":\n        path.closePath();\n        if (subpaths.length > 0) {\n          currentSubPath = subpaths.pop();\n          if (currentSubPath) {\n            lastX = currentSubPath.startX;\n            lastY = currentSubPath.startY;\n          } else {\n            lastX = 0;\n            lastY = 0;\n          }\n        }\n        currentSubPath = null;\n        break;\n      default:\n        warn(`Unknown SVG path command: ${type}`);\n    }\n    if (type !== \"Z\" && type !== \"z\") {\n      if (currentSubPath === null) {\n        currentSubPath = { startX: lastX, startY: lastY };\n        subpaths.push(currentSubPath);\n      }\n    }\n  }\n  return path;\n}\n\nexport { SVGToGraphicsPath };\n//# sourceMappingURL=SVGToGraphicsPath.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nclass Circle {\n  /**\n   * @param x - The X coordinate of the center of this circle\n   * @param y - The Y coordinate of the center of this circle\n   * @param radius - The radius of the circle\n   */\n  constructor(x = 0, y = 0, radius = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'circle'\n     */\n    this.type = \"circle\";\n    this.x = x;\n    this.y = y;\n    this.radius = radius;\n  }\n  /**\n   * Creates a clone of this Circle instance\n   * @returns A copy of the Circle\n   */\n  clone() {\n    return new Circle(this.x, this.y, this.radius);\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this circle\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this Circle\n   */\n  contains(x, y) {\n    if (this.radius <= 0)\n      return false;\n    const r2 = this.radius * this.radius;\n    let dx = this.x - x;\n    let dy = this.y - y;\n    dx *= dx;\n    dy *= dy;\n    return dx + dy <= r2;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this circle including the stroke.\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param width - The width of the line to check\n   * @returns Whether the x/y coordinates are within this Circle\n   */\n  strokeContains(x, y, width) {\n    if (this.radius === 0)\n      return false;\n    const dx = this.x - x;\n    const dy = this.y - y;\n    const r = this.radius;\n    const w2 = width / 2;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    return distance < r + w2 && distance > r - w2;\n  }\n  /**\n   * Returns the framing rectangle of the circle as a Rectangle object\n   * @param out\n   * @returns The framing rectangle\n   */\n  getBounds(out) {\n    out = out || new Rectangle();\n    out.x = this.x - this.radius;\n    out.y = this.y - this.radius;\n    out.width = this.radius * 2;\n    out.height = this.radius * 2;\n    return out;\n  }\n  /**\n   * Copies another circle to this one.\n   * @param circle - The circle to copy from.\n   * @returns Returns itself.\n   */\n  copyFrom(circle) {\n    this.x = circle.x;\n    this.y = circle.y;\n    this.radius = circle.radius;\n    return this;\n  }\n  /**\n   * Copies this circle to another one.\n   * @param circle - The circle to copy to.\n   * @returns Returns given parameter.\n   */\n  copyTo(circle) {\n    circle.copyFrom(this);\n    return circle;\n  }\n  toString() {\n    return `[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`;\n  }\n}\n\nexport { Circle };\n//# sourceMappingURL=Circle.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nclass Ellipse {\n  /**\n   * @param x - The X coordinate of the center of this ellipse\n   * @param y - The Y coordinate of the center of this ellipse\n   * @param halfWidth - The half width of this ellipse\n   * @param halfHeight - The half height of this ellipse\n   */\n  constructor(x = 0, y = 0, halfWidth = 0, halfHeight = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'ellipse'\n     */\n    this.type = \"ellipse\";\n    this.x = x;\n    this.y = y;\n    this.halfWidth = halfWidth;\n    this.halfHeight = halfHeight;\n  }\n  /**\n   * Creates a clone of this Ellipse instance\n   * @returns {Ellipse} A copy of the ellipse\n   */\n  clone() {\n    return new Ellipse(this.x, this.y, this.halfWidth, this.halfHeight);\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this ellipse\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coords are within this ellipse\n   */\n  contains(x, y) {\n    if (this.halfWidth <= 0 || this.halfHeight <= 0) {\n      return false;\n    }\n    let normx = (x - this.x) / this.halfWidth;\n    let normy = (y - this.y) / this.halfHeight;\n    normx *= normx;\n    normy *= normy;\n    return normx + normy <= 1;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this ellipse including stroke\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param width\n   * @returns Whether the x/y coords are within this ellipse\n   */\n  strokeContains(x, y, width) {\n    const { halfWidth, halfHeight } = this;\n    if (halfWidth <= 0 || halfHeight <= 0) {\n      return false;\n    }\n    const halfStrokeWidth = width / 2;\n    const innerA = halfWidth - halfStrokeWidth;\n    const innerB = halfHeight - halfStrokeWidth;\n    const outerA = halfWidth + halfStrokeWidth;\n    const outerB = halfHeight + halfStrokeWidth;\n    const normalizedX = x - this.x;\n    const normalizedY = y - this.y;\n    const innerEllipse = normalizedX * normalizedX / (innerA * innerA) + normalizedY * normalizedY / (innerB * innerB);\n    const outerEllipse = normalizedX * normalizedX / (outerA * outerA) + normalizedY * normalizedY / (outerB * outerB);\n    return innerEllipse > 1 && outerEllipse <= 1;\n  }\n  /**\n   * Returns the framing rectangle of the ellipse as a Rectangle object\n   * @returns The framing rectangle\n   */\n  getBounds() {\n    return new Rectangle(this.x - this.halfWidth, this.y - this.halfHeight, this.halfWidth * 2, this.halfHeight * 2);\n  }\n  /**\n   * Copies another ellipse to this one.\n   * @param ellipse - The ellipse to copy from.\n   * @returns Returns itself.\n   */\n  copyFrom(ellipse) {\n    this.x = ellipse.x;\n    this.y = ellipse.y;\n    this.halfWidth = ellipse.halfWidth;\n    this.halfHeight = ellipse.halfHeight;\n    return this;\n  }\n  /**\n   * Copies this ellipse to another one.\n   * @param ellipse - The ellipse to copy to.\n   * @returns Returns given parameter.\n   */\n  copyTo(ellipse) {\n    ellipse.copyFrom(this);\n    return ellipse;\n  }\n  toString() {\n    return `[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`;\n  }\n}\n\nexport { Ellipse };\n//# sourceMappingURL=Ellipse.mjs.map\n","\"use strict\";\nfunction squaredDistanceToLineSegment(x, y, x1, y1, x2, y2) {\n  const a = x - x1;\n  const b = y - y1;\n  const c = x2 - x1;\n  const d = y2 - y1;\n  const dot = a * c + b * d;\n  const lenSq = c * c + d * d;\n  let param = -1;\n  if (lenSq !== 0) {\n    param = dot / lenSq;\n  }\n  let xx;\n  let yy;\n  if (param < 0) {\n    xx = x1;\n    yy = y1;\n  } else if (param > 1) {\n    xx = x2;\n    yy = y2;\n  } else {\n    xx = x1 + param * c;\n    yy = y1 + param * d;\n  }\n  const dx = x - xx;\n  const dy = y - yy;\n  return dx * dx + dy * dy;\n}\n\nexport { squaredDistanceToLineSegment };\n//# sourceMappingURL=squaredDistanceToLineSegment.mjs.map\n","import { squaredDistanceToLineSegment } from '../misc/squaredDistanceToLineSegment.mjs';\nimport { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nclass Polygon {\n  /**\n   * @param points - This can be an array of Points\n   *  that form the polygon, a flat array of numbers that will be interpreted as [x,y, x,y, ...], or\n   *  the arguments passed can be all the points of the polygon e.g.\n   *  `new Polygon(new Point(), new Point(), ...)`, or the arguments passed can be flat\n   *  x,y values e.g. `new Polygon(x,y, x,y, x,y, ...)` where `x` and `y` are Numbers.\n   */\n  constructor(...points) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'polygon'\n     */\n    this.type = \"polygon\";\n    let flat = Array.isArray(points[0]) ? points[0] : points;\n    if (typeof flat[0] !== \"number\") {\n      const p = [];\n      for (let i = 0, il = flat.length; i < il; i++) {\n        p.push(flat[i].x, flat[i].y);\n      }\n      flat = p;\n    }\n    this.points = flat;\n    this.closePath = true;\n  }\n  /**\n   * Creates a clone of this polygon.\n   * @returns - A copy of the polygon.\n   */\n  clone() {\n    const points = this.points.slice();\n    const polygon = new Polygon(points);\n    polygon.closePath = this.closePath;\n    return polygon;\n  }\n  /**\n   * Checks whether the x and y coordinates passed to this function are contained within this polygon.\n   * @param x - The X coordinate of the point to test.\n   * @param y - The Y coordinate of the point to test.\n   * @returns - Whether the x/y coordinates are within this polygon.\n   */\n  contains(x, y) {\n    let inside = false;\n    const length = this.points.length / 2;\n    for (let i = 0, j = length - 1; i < length; j = i++) {\n      const xi = this.points[i * 2];\n      const yi = this.points[i * 2 + 1];\n      const xj = this.points[j * 2];\n      const yj = this.points[j * 2 + 1];\n      const intersect = yi > y !== yj > y && x < (xj - xi) * ((y - yi) / (yj - yi)) + xi;\n      if (intersect) {\n        inside = !inside;\n      }\n    }\n    return inside;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this polygon including the stroke.\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @returns Whether the x/y coordinates are within this polygon\n   */\n  strokeContains(x, y, strokeWidth) {\n    const halfStrokeWidth = strokeWidth / 2;\n    const halfStrokeWidthSqrd = halfStrokeWidth * halfStrokeWidth;\n    const { points } = this;\n    const iterationLength = points.length - (this.closePath ? 0 : 2);\n    for (let i = 0; i < iterationLength; i += 2) {\n      const x1 = points[i];\n      const y1 = points[i + 1];\n      const x2 = points[(i + 2) % points.length];\n      const y2 = points[(i + 3) % points.length];\n      const distanceSqrd = squaredDistanceToLineSegment(x, y, x1, y1, x2, y2);\n      if (distanceSqrd <= halfStrokeWidthSqrd) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Returns the framing rectangle of the polygon as a Rectangle object\n   * @param out - optional rectangle to store the result\n   * @returns The framing rectangle\n   */\n  getBounds(out) {\n    out = out || new Rectangle();\n    const points = this.points;\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n    for (let i = 0, n = points.length; i < n; i += 2) {\n      const x = points[i];\n      const y = points[i + 1];\n      minX = x < minX ? x : minX;\n      maxX = x > maxX ? x : maxX;\n      minY = y < minY ? y : minY;\n      maxY = y > maxY ? y : maxY;\n    }\n    out.x = minX;\n    out.width = maxX - minX;\n    out.y = minY;\n    out.height = maxY - minY;\n    return out;\n  }\n  /**\n   * Copies another polygon to this one.\n   * @param polygon - The polygon to copy from.\n   * @returns Returns itself.\n   */\n  copyFrom(polygon) {\n    this.points = polygon.points.slice();\n    this.closePath = polygon.closePath;\n    return this;\n  }\n  /**\n   * Copies this polygon to another one.\n   * @param polygon - The polygon to copy to.\n   * @returns Returns given parameter.\n   */\n  copyTo(polygon) {\n    polygon.copyFrom(this);\n    return polygon;\n  }\n  toString() {\n    return `[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((pointsDesc, currentPoint) => `${pointsDesc}, ${currentPoint}`, \"\")}]`;\n  }\n  /**\n   * Get the last X coordinate of the polygon\n   * @readonly\n   */\n  get lastX() {\n    return this.points[this.points.length - 2];\n  }\n  /**\n   * Get the last Y coordinate of the polygon\n   * @readonly\n   */\n  get lastY() {\n    return this.points[this.points.length - 1];\n  }\n  /**\n   * Get the first X coordinate of the polygon\n   * @readonly\n   */\n  get x() {\n    return this.points[this.points.length - 2];\n  }\n  /**\n   * Get the first Y coordinate of the polygon\n   * @readonly\n   */\n  get y() {\n    return this.points[this.points.length - 1];\n  }\n}\n\nexport { Polygon };\n//# sourceMappingURL=Polygon.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nconst isCornerWithinStroke = (pX, pY, cornerX, cornerY, radius, halfStrokeWidth) => {\n  const dx = pX - cornerX;\n  const dy = pY - cornerY;\n  const distance = Math.sqrt(dx * dx + dy * dy);\n  return distance >= radius - halfStrokeWidth && distance <= radius + halfStrokeWidth;\n};\nclass RoundedRectangle {\n  /**\n   * @param x - The X coordinate of the upper-left corner of the rounded rectangle\n   * @param y - The Y coordinate of the upper-left corner of the rounded rectangle\n   * @param width - The overall width of this rounded rectangle\n   * @param height - The overall height of this rounded rectangle\n   * @param radius - Controls the radius of the rounded corners\n   */\n  constructor(x = 0, y = 0, width = 0, height = 0, radius = 20) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'roundedRectangle'\n     */\n    this.type = \"roundedRectangle\";\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.radius = radius;\n  }\n  /**\n   * Returns the framing rectangle of the rounded rectangle as a Rectangle object\n   * @param out - optional rectangle to store the result\n   * @returns The framing rectangle\n   */\n  getBounds(out) {\n    out = out || new Rectangle();\n    out.x = this.x;\n    out.y = this.y;\n    out.width = this.width;\n    out.height = this.height;\n    return out;\n  }\n  /**\n   * Creates a clone of this Rounded Rectangle.\n   * @returns - A copy of the rounded rectangle.\n   */\n  clone() {\n    return new RoundedRectangle(this.x, this.y, this.width, this.height, this.radius);\n  }\n  /**\n   * Copies another rectangle to this one.\n   * @param rectangle - The rectangle to copy from.\n   * @returns Returns itself.\n   */\n  copyFrom(rectangle) {\n    this.x = rectangle.x;\n    this.y = rectangle.y;\n    this.width = rectangle.width;\n    this.height = rectangle.height;\n    return this;\n  }\n  /**\n   * Copies this rectangle to another one.\n   * @param rectangle - The rectangle to copy to.\n   * @returns Returns given parameter.\n   */\n  copyTo(rectangle) {\n    rectangle.copyFrom(this);\n    return rectangle;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this Rounded Rectangle\n   * @param x - The X coordinate of the point to test.\n   * @param y - The Y coordinate of the point to test.\n   * @returns - Whether the x/y coordinates are within this Rounded Rectangle.\n   */\n  contains(x, y) {\n    if (this.width <= 0 || this.height <= 0) {\n      return false;\n    }\n    if (x >= this.x && x <= this.x + this.width) {\n      if (y >= this.y && y <= this.y + this.height) {\n        const radius = Math.max(0, Math.min(this.radius, Math.min(this.width, this.height) / 2));\n        if (y >= this.y + radius && y <= this.y + this.height - radius || x >= this.x + radius && x <= this.x + this.width - radius) {\n          return true;\n        }\n        let dx = x - (this.x + radius);\n        let dy = y - (this.y + radius);\n        const radius2 = radius * radius;\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dx = x - (this.x + this.width - radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dy = y - (this.y + this.height - radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dx = x - (this.x + radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this rectangle including the stroke.\n   * @param pX - The X coordinate of the point to test\n   * @param pY - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @returns Whether the x/y coordinates are within this rectangle\n   */\n  strokeContains(pX, pY, strokeWidth) {\n    const { x, y, width, height, radius } = this;\n    const halfStrokeWidth = strokeWidth / 2;\n    const innerX = x + radius;\n    const innerY = y + radius;\n    const innerWidth = width - radius * 2;\n    const innerHeight = height - radius * 2;\n    const rightBound = x + width;\n    const bottomBound = y + height;\n    if ((pX >= x - halfStrokeWidth && pX <= x + halfStrokeWidth || pX >= rightBound - halfStrokeWidth && pX <= rightBound + halfStrokeWidth) && pY >= innerY && pY <= innerY + innerHeight) {\n      return true;\n    }\n    if ((pY >= y - halfStrokeWidth && pY <= y + halfStrokeWidth || pY >= bottomBound - halfStrokeWidth && pY <= bottomBound + halfStrokeWidth) && pX >= innerX && pX <= innerX + innerWidth) {\n      return true;\n    }\n    return (\n      // Top-left\n      pX < innerX && pY < innerY && isCornerWithinStroke(pX, pY, innerX, innerY, radius, halfStrokeWidth) || pX > rightBound - radius && pY < innerY && isCornerWithinStroke(pX, pY, rightBound - radius, innerY, radius, halfStrokeWidth) || pX > rightBound - radius && pY > bottomBound - radius && isCornerWithinStroke(pX, pY, rightBound - radius, bottomBound - radius, radius, halfStrokeWidth) || pX < innerX && pY > bottomBound - radius && isCornerWithinStroke(pX, pY, innerX, bottomBound - radius, radius, halfStrokeWidth)\n    );\n  }\n  toString() {\n    return `[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`;\n  }\n}\n\nexport { RoundedRectangle };\n//# sourceMappingURL=RoundedRectangle.mjs.map\n","\"use strict\";\nvar BufferUsage = /* @__PURE__ */ ((BufferUsage2) => {\n  BufferUsage2[BufferUsage2[\"MAP_READ\"] = 1] = \"MAP_READ\";\n  BufferUsage2[BufferUsage2[\"MAP_WRITE\"] = 2] = \"MAP_WRITE\";\n  BufferUsage2[BufferUsage2[\"COPY_SRC\"] = 4] = \"COPY_SRC\";\n  BufferUsage2[BufferUsage2[\"COPY_DST\"] = 8] = \"COPY_DST\";\n  BufferUsage2[BufferUsage2[\"INDEX\"] = 16] = \"INDEX\";\n  BufferUsage2[BufferUsage2[\"VERTEX\"] = 32] = \"VERTEX\";\n  BufferUsage2[BufferUsage2[\"UNIFORM\"] = 64] = \"UNIFORM\";\n  BufferUsage2[BufferUsage2[\"STORAGE\"] = 128] = \"STORAGE\";\n  BufferUsage2[BufferUsage2[\"INDIRECT\"] = 256] = \"INDIRECT\";\n  BufferUsage2[BufferUsage2[\"QUERY_RESOLVE\"] = 512] = \"QUERY_RESOLVE\";\n  BufferUsage2[BufferUsage2[\"STATIC\"] = 1024] = \"STATIC\";\n  return BufferUsage2;\n})(BufferUsage || {});\n\nexport { BufferUsage };\n//# sourceMappingURL=const.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { BufferUsage } from './const.mjs';\n\n\"use strict\";\nclass Buffer extends EventEmitter {\n  /**\n   * Creates a new Buffer with the given options\n   * @param options - the options for the buffer\n   */\n  constructor(options) {\n    let { data, size } = options;\n    const { usage, label, shrinkToFit } = options;\n    super();\n    /**\n     * emits when the underlying buffer has changed shape (i.e. resized)\n     * letting the renderer know that it needs to discard the old buffer on the GPU and create a new one\n     * @event change\n     */\n    /**\n     * emits when the underlying buffer data has been updated. letting the renderer know\n     * that it needs to update the buffer on the GPU\n     * @event update\n     */\n    /**\n     * emits when the buffer is destroyed. letting the renderer know that it needs to destroy the buffer on the GPU\n     * @event destroy\n     */\n    /**\n     * a unique id for this uniform group used through the renderer\n     * @internal\n     * @ignore\n     */\n    this.uid = uid(\"buffer\");\n    /**\n     * a resource type, used to identify how to handle it when its in a bind group / shader resource\n     * @internal\n     * @ignore\n     */\n    this._resourceType = \"buffer\";\n    /**\n     * the resource id used internally by the renderer to build bind group keys\n     * @internal\n     * @ignore\n     */\n    this._resourceId = uid(\"resource\");\n    /**\n     * used internally to know if a uniform group was used in the last render pass\n     * @internal\n     * @ignore\n     */\n    this._touched = 0;\n    /**\n     * @internal\n     * @ignore\n     */\n    this._updateID = 1;\n    /**\n     * should the GPU buffer be shrunk when the data becomes smaller?\n     * changing this will cause the buffer to be destroyed and a new one created on the GPU\n     * this can be expensive, especially if the buffer is already big enough!\n     * setting this to false will prevent the buffer from being shrunk. This will yield better performance\n     * if you are constantly setting data that is changing size often.\n     * @default true\n     */\n    this.shrinkToFit = true;\n    /**\n     * Has the buffer been destroyed?\n     * @readonly\n     */\n    this.destroyed = false;\n    if (data instanceof Array) {\n      data = new Float32Array(data);\n    }\n    this._data = data;\n    size = size ?? data?.byteLength;\n    const mappedAtCreation = !!data;\n    this.descriptor = {\n      size,\n      usage,\n      mappedAtCreation,\n      label\n    };\n    this.shrinkToFit = shrinkToFit ?? true;\n  }\n  /** the data in the buffer */\n  get data() {\n    return this._data;\n  }\n  set data(value) {\n    this.setDataWithSize(value, value.length, true);\n  }\n  /** whether the buffer is static or not */\n  get static() {\n    return !!(this.descriptor.usage & BufferUsage.STATIC);\n  }\n  set static(value) {\n    if (value) {\n      this.descriptor.usage |= BufferUsage.STATIC;\n    } else {\n      this.descriptor.usage &= ~BufferUsage.STATIC;\n    }\n  }\n  /**\n   * Sets the data in the buffer to the given value. This will immediately update the buffer on the GPU.\n   * If you only want to update a subset of the buffer, you can pass in the size of the data.\n   * @param value - the data to set\n   * @param size - the size of the data in bytes\n   * @param syncGPU - should the buffer be updated on the GPU immediately?\n   */\n  setDataWithSize(value, size, syncGPU) {\n    this._updateID++;\n    this._updateSize = size * value.BYTES_PER_ELEMENT;\n    if (this._data === value) {\n      if (syncGPU)\n        this.emit(\"update\", this);\n      return;\n    }\n    const oldData = this._data;\n    this._data = value;\n    if (oldData.length !== value.length) {\n      if (!this.shrinkToFit && value.byteLength < oldData.byteLength) {\n        if (syncGPU)\n          this.emit(\"update\", this);\n      } else {\n        this.descriptor.size = value.byteLength;\n        this._resourceId = uid(\"resource\");\n        this.emit(\"change\", this);\n      }\n      return;\n    }\n    if (syncGPU)\n      this.emit(\"update\", this);\n  }\n  /**\n   * updates the buffer on the GPU to reflect the data in the buffer.\n   * By default it will update the entire buffer. If you only want to update a subset of the buffer,\n   * you can pass in the size of the buffer to update.\n   * @param sizeInBytes - the new size of the buffer in bytes\n   */\n  update(sizeInBytes) {\n    this._updateSize = sizeInBytes ?? this._updateSize;\n    this._updateID++;\n    this.emit(\"update\", this);\n  }\n  /** Destroys the buffer */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    this._data = null;\n    this.descriptor = null;\n    this.removeAllListeners();\n  }\n}\n\nexport { Buffer };\n//# sourceMappingURL=Buffer.mjs.map\n","import { Buffer } from '../../buffer/Buffer.mjs';\nimport { BufferUsage } from '../../buffer/const.mjs';\n\n\"use strict\";\nfunction ensureIsBuffer(buffer, index) {\n  if (!(buffer instanceof Buffer)) {\n    let usage = index ? BufferUsage.INDEX : BufferUsage.VERTEX;\n    if (buffer instanceof Array) {\n      if (index) {\n        buffer = new Uint32Array(buffer);\n        usage = BufferUsage.INDEX | BufferUsage.COPY_DST;\n      } else {\n        buffer = new Float32Array(buffer);\n        usage = BufferUsage.VERTEX | BufferUsage.COPY_DST;\n      }\n    }\n    buffer = new Buffer({\n      data: buffer,\n      label: index ? \"index-mesh-buffer\" : \"vertex-mesh-buffer\",\n      usage\n    });\n  }\n  return buffer;\n}\n\nexport { ensureIsBuffer };\n//# sourceMappingURL=ensureIsBuffer.mjs.map\n","\"use strict\";\nfunction getGeometryBounds(geometry, attributeId, bounds) {\n  const attribute = geometry.getAttribute(attributeId);\n  if (!attribute) {\n    bounds.minX = 0;\n    bounds.minY = 0;\n    bounds.maxX = 0;\n    bounds.maxY = 0;\n    return bounds;\n  }\n  const data = attribute.buffer.data;\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n  const byteSize = data.BYTES_PER_ELEMENT;\n  const offset = (attribute.offset || 0) / byteSize;\n  const stride = (attribute.stride || 2 * 4) / byteSize;\n  for (let i = offset; i < data.length; i += stride) {\n    const x = data[i];\n    const y = data[i + 1];\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n  }\n  bounds.minX = minX;\n  bounds.minY = minY;\n  bounds.maxX = maxX;\n  bounds.maxY = maxY;\n  return bounds;\n}\n\nexport { getGeometryBounds };\n//# sourceMappingURL=getGeometryBounds.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Bounds } from '../../../../scene/container/bounds/Bounds.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { Buffer } from '../buffer/Buffer.mjs';\nimport { ensureIsBuffer } from './utils/ensureIsBuffer.mjs';\nimport { getGeometryBounds } from './utils/getGeometryBounds.mjs';\n\n\"use strict\";\nfunction ensureIsAttribute(attribute) {\n  if (attribute instanceof Buffer || Array.isArray(attribute) || attribute.BYTES_PER_ELEMENT) {\n    attribute = {\n      buffer: attribute\n    };\n  }\n  attribute.buffer = ensureIsBuffer(attribute.buffer, false);\n  return attribute;\n}\nclass Geometry extends EventEmitter {\n  /**\n   * Create a new instance of a geometry\n   * @param options - The options for the geometry.\n   */\n  constructor(options) {\n    const { attributes, indexBuffer, topology } = options;\n    super();\n    /** The unique id of the geometry. */\n    this.uid = uid(\"geometry\");\n    /**\n     * the layout key will be generated by WebGPU all geometries that have the same structure\n     * will have the same layout key. This is used to cache the pipeline layout\n     * @internal\n     * @ignore\n     */\n    this._layoutKey = 0;\n    /** the instance count of the geometry to draw */\n    this.instanceCount = 1;\n    this._bounds = new Bounds();\n    this._boundsDirty = true;\n    this.attributes = attributes;\n    this.buffers = [];\n    this.instanceCount = options.instanceCount || 1;\n    for (const i in attributes) {\n      const attribute = attributes[i] = ensureIsAttribute(attributes[i]);\n      const bufferIndex = this.buffers.indexOf(attribute.buffer);\n      if (bufferIndex === -1) {\n        this.buffers.push(attribute.buffer);\n        attribute.buffer.on(\"update\", this.onBufferUpdate, this);\n        attribute.buffer.on(\"change\", this.onBufferUpdate, this);\n      }\n    }\n    if (indexBuffer) {\n      this.indexBuffer = ensureIsBuffer(indexBuffer, true);\n      this.buffers.push(this.indexBuffer);\n    }\n    this.topology = topology || \"triangle-list\";\n  }\n  onBufferUpdate() {\n    this._boundsDirty = true;\n    this.emit(\"update\", this);\n  }\n  /**\n   * Returns the requested attribute.\n   * @param id - The name of the attribute required\n   * @returns - The attribute requested.\n   */\n  getAttribute(id) {\n    return this.attributes[id];\n  }\n  /**\n   * Returns the index buffer\n   * @returns - The index buffer.\n   */\n  getIndex() {\n    return this.indexBuffer;\n  }\n  /**\n   * Returns the requested buffer.\n   * @param id - The name of the buffer required.\n   * @returns - The buffer requested.\n   */\n  getBuffer(id) {\n    return this.getAttribute(id).buffer;\n  }\n  /**\n   * Used to figure out how many vertices there are in this geometry\n   * @returns the number of vertices in the geometry\n   */\n  getSize() {\n    for (const i in this.attributes) {\n      const attribute = this.attributes[i];\n      const buffer = attribute.buffer;\n      return buffer.data.length / (attribute.stride / 4 || attribute.size);\n    }\n    return 0;\n  }\n  /** Returns the bounds of the geometry. */\n  get bounds() {\n    if (!this._boundsDirty)\n      return this._bounds;\n    this._boundsDirty = false;\n    return getGeometryBounds(this, \"aPosition\", this._bounds);\n  }\n  /**\n   * destroys the geometry.\n   * @param destroyBuffers - destroy the buffers associated with this geometry\n   */\n  destroy(destroyBuffers = false) {\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    if (destroyBuffers) {\n      this.buffers.forEach((buffer) => buffer.destroy());\n    }\n    this.attributes = null;\n    this.buffers = null;\n    this.indexBuffer = null;\n    this._bounds = null;\n  }\n}\n\nexport { Geometry };\n//# sourceMappingURL=Geometry.mjs.map\n","import { Buffer } from '../../renderers/shared/buffer/Buffer.mjs';\nimport { BufferUsage } from '../../renderers/shared/buffer/const.mjs';\nimport { Geometry } from '../../renderers/shared/geometry/Geometry.mjs';\n\n\"use strict\";\nconst placeHolderBufferData = new Float32Array(1);\nconst placeHolderIndexData = new Uint32Array(1);\nclass BatchGeometry extends Geometry {\n  constructor() {\n    const vertexSize = 6;\n    const attributeBuffer = new Buffer({\n      data: placeHolderBufferData,\n      label: \"attribute-batch-buffer\",\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST,\n      shrinkToFit: false\n    });\n    const indexBuffer = new Buffer({\n      data: placeHolderIndexData,\n      label: \"index-batch-buffer\",\n      usage: BufferUsage.INDEX | BufferUsage.COPY_DST,\n      // | BufferUsage.STATIC,\n      shrinkToFit: false\n    });\n    const stride = vertexSize * 4;\n    super({\n      attributes: {\n        aPosition: {\n          buffer: attributeBuffer,\n          format: \"float32x2\",\n          stride,\n          offset: 0,\n          location: 1\n        },\n        aUV: {\n          buffer: attributeBuffer,\n          format: \"float32x2\",\n          stride,\n          offset: 2 * 4,\n          location: 3\n        },\n        aColor: {\n          buffer: attributeBuffer,\n          format: \"unorm8x4\",\n          stride,\n          offset: 4 * 4,\n          location: 0\n        },\n        aTextureIdAndRound: {\n          buffer: attributeBuffer,\n          format: \"uint16x2\",\n          stride,\n          offset: 5 * 4,\n          location: 2\n        }\n      },\n      indexBuffer\n    });\n  }\n}\n\nexport { BatchGeometry };\n//# sourceMappingURL=BatchGeometry.mjs.map\n","\"use strict\";\nconst MAX_TEXTURES = 16;\n\nexport { MAX_TEXTURES };\n//# sourceMappingURL=const.mjs.map\n","import { BindGroup } from '../../renderers/gpu/shader/BindGroup.mjs';\nimport { Texture } from '../../renderers/shared/texture/Texture.mjs';\nimport { MAX_TEXTURES } from '../shared/const.mjs';\n\n\"use strict\";\nconst cachedGroups = {};\nfunction getTextureBatchBindGroup(textures, size) {\n  let uid = 0;\n  for (let i = 0; i < size; i++) {\n    uid = uid * 31 + textures[i].uid >>> 0;\n  }\n  return cachedGroups[uid] || generateTextureBatchBindGroup(textures, uid);\n}\nfunction generateTextureBatchBindGroup(textures, key) {\n  const bindGroupResources = {};\n  let bindIndex = 0;\n  for (let i = 0; i < MAX_TEXTURES; i++) {\n    const texture = i < textures.length ? textures[i] : Texture.EMPTY.source;\n    bindGroupResources[bindIndex++] = texture.source;\n    bindGroupResources[bindIndex++] = texture.style;\n  }\n  const bindGroup = new BindGroup(bindGroupResources);\n  cachedGroups[key] = bindGroup;\n  return bindGroup;\n}\n\nexport { getTextureBatchBindGroup };\n//# sourceMappingURL=getTextureBatchBindGroup.mjs.map\n","\"use strict\";\nclass ViewableBuffer {\n  constructor(sizeOrBuffer) {\n    if (typeof sizeOrBuffer === \"number\") {\n      this.rawBinaryData = new ArrayBuffer(sizeOrBuffer);\n    } else if (sizeOrBuffer instanceof Uint8Array) {\n      this.rawBinaryData = sizeOrBuffer.buffer;\n    } else {\n      this.rawBinaryData = sizeOrBuffer;\n    }\n    this.uint32View = new Uint32Array(this.rawBinaryData);\n    this.float32View = new Float32Array(this.rawBinaryData);\n    this.size = this.rawBinaryData.byteLength;\n  }\n  /** View on the raw binary data as a `Int8Array`. */\n  get int8View() {\n    if (!this._int8View) {\n      this._int8View = new Int8Array(this.rawBinaryData);\n    }\n    return this._int8View;\n  }\n  /** View on the raw binary data as a `Uint8Array`. */\n  get uint8View() {\n    if (!this._uint8View) {\n      this._uint8View = new Uint8Array(this.rawBinaryData);\n    }\n    return this._uint8View;\n  }\n  /**  View on the raw binary data as a `Int16Array`. */\n  get int16View() {\n    if (!this._int16View) {\n      this._int16View = new Int16Array(this.rawBinaryData);\n    }\n    return this._int16View;\n  }\n  /** View on the raw binary data as a `Int32Array`. */\n  get int32View() {\n    if (!this._int32View) {\n      this._int32View = new Int32Array(this.rawBinaryData);\n    }\n    return this._int32View;\n  }\n  /** View on the raw binary data as a `Float64Array`. */\n  get float64View() {\n    if (!this._float64Array) {\n      this._float64Array = new Float64Array(this.rawBinaryData);\n    }\n    return this._float64Array;\n  }\n  /** View on the raw binary data as a `BigUint64Array`. */\n  get bigUint64View() {\n    if (!this._bigUint64Array) {\n      this._bigUint64Array = new BigUint64Array(this.rawBinaryData);\n    }\n    return this._bigUint64Array;\n  }\n  /**\n   * Returns the view of the given type.\n   * @param type - One of `int8`, `uint8`, `int16`,\n   *    `uint16`, `int32`, `uint32`, and `float32`.\n   * @returns - typed array of given type\n   */\n  view(type) {\n    return this[`${type}View`];\n  }\n  /** Destroys all buffer references. Do not use after calling this. */\n  destroy() {\n    this.rawBinaryData = null;\n    this._int8View = null;\n    this._uint8View = null;\n    this._int16View = null;\n    this.uint16View = null;\n    this._int32View = null;\n    this.uint32View = null;\n    this.float32View = null;\n  }\n  /**\n   * Returns the size of the given type in bytes.\n   * @param type - One of `int8`, `uint8`, `int16`,\n   *   `uint16`, `int32`, `uint32`, and `float32`.\n   * @returns - size of the type in bytes\n   */\n  static sizeOf(type) {\n    switch (type) {\n      case \"int8\":\n      case \"uint8\":\n        return 1;\n      case \"int16\":\n      case \"uint16\":\n        return 2;\n      case \"int32\":\n      case \"uint32\":\n      case \"float32\":\n        return 4;\n      default:\n        throw new Error(`${type} isn't a valid view type`);\n    }\n  }\n}\n\nexport { ViewableBuffer };\n//# sourceMappingURL=ViewableBuffer.mjs.map\n","\"use strict\";\nfunction fastCopy(sourceBuffer, destinationBuffer) {\n  const lengthDouble = sourceBuffer.byteLength / 8 | 0;\n  const sourceFloat64View = new Float64Array(sourceBuffer, 0, lengthDouble);\n  const destinationFloat64View = new Float64Array(destinationBuffer, 0, lengthDouble);\n  destinationFloat64View.set(sourceFloat64View);\n  const remainingBytes = sourceBuffer.byteLength - lengthDouble * 8;\n  if (remainingBytes > 0) {\n    const sourceUint8View = new Uint8Array(sourceBuffer, lengthDouble * 8, remainingBytes);\n    const destinationUint8View = new Uint8Array(destinationBuffer, lengthDouble * 8, remainingBytes);\n    destinationUint8View.set(sourceUint8View);\n  }\n}\n\nexport { fastCopy };\n//# sourceMappingURL=fastCopy.mjs.map\n","\"use strict\";\nconst BLEND_TO_NPM = {\n  normal: \"normal-npm\",\n  add: \"add-npm\",\n  screen: \"screen-npm\"\n};\nvar STENCIL_MODES = /* @__PURE__ */ ((STENCIL_MODES2) => {\n  STENCIL_MODES2[STENCIL_MODES2[\"DISABLED\"] = 0] = \"DISABLED\";\n  STENCIL_MODES2[STENCIL_MODES2[\"RENDERING_MASK_ADD\"] = 1] = \"RENDERING_MASK_ADD\";\n  STENCIL_MODES2[STENCIL_MODES2[\"MASK_ACTIVE\"] = 2] = \"MASK_ACTIVE\";\n  STENCIL_MODES2[STENCIL_MODES2[\"RENDERING_MASK_REMOVE\"] = 3] = \"RENDERING_MASK_REMOVE\";\n  STENCIL_MODES2[STENCIL_MODES2[\"NONE\"] = 4] = \"NONE\";\n  return STENCIL_MODES2;\n})(STENCIL_MODES || {});\n\nexport { BLEND_TO_NPM, STENCIL_MODES };\n//# sourceMappingURL=const.mjs.map\n","import { BLEND_TO_NPM } from './const.mjs';\n\n\"use strict\";\nfunction getAdjustedBlendModeBlend(blendMode, textureSource) {\n  if (textureSource.alphaMode === \"no-premultiply-alpha\") {\n    return BLEND_TO_NPM[blendMode] || blendMode;\n  }\n  return blendMode;\n}\n\nexport { getAdjustedBlendModeBlend };\n//# sourceMappingURL=getAdjustedBlendModeBlend.mjs.map\n","\"use strict\";\nclass BatchTextureArray {\n  constructor() {\n    /** Respective locations for textures. */\n    this.ids = /* @__PURE__ */ Object.create(null);\n    this.textures = [];\n    this.count = 0;\n  }\n  /** Clear the textures and their locations. */\n  clear() {\n    for (let i = 0; i < this.count; i++) {\n      const t = this.textures[i];\n      this.textures[i] = null;\n      this.ids[t.uid] = null;\n    }\n    this.count = 0;\n  }\n}\n\nexport { BatchTextureArray };\n//# sourceMappingURL=BatchTextureArray.mjs.map\n","import { uid } from '../../../utils/data/uid.mjs';\nimport { ViewableBuffer } from '../../../utils/data/ViewableBuffer.mjs';\nimport { fastCopy } from '../../renderers/shared/buffer/utils/fastCopy.mjs';\nimport { getAdjustedBlendModeBlend } from '../../renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nimport { BatchTextureArray } from './BatchTextureArray.mjs';\nimport { MAX_TEXTURES } from './const.mjs';\n\n\"use strict\";\nclass Batch {\n  constructor() {\n    this.renderPipeId = \"batch\";\n    this.action = \"startBatch\";\n    // TODO - eventually this could be useful for flagging batches as dirty and then only rebuilding those ones\n    // public elementStart = 0;\n    // public elementSize = 0;\n    // for drawing..\n    this.start = 0;\n    this.size = 0;\n    this.blendMode = \"normal\";\n    this.canBundle = true;\n  }\n  destroy() {\n    this.textures = null;\n    this.gpuBindGroup = null;\n    this.bindGroup = null;\n    this.batcher = null;\n  }\n}\nlet BATCH_TICK = 0;\nconst _Batcher = class _Batcher {\n  constructor(options = {}) {\n    this.uid = uid(\"batcher\");\n    this.dirty = true;\n    this.batchIndex = 0;\n    this.batches = [];\n    // specifics.\n    this._vertexSize = 6;\n    this._elements = [];\n    this._batchPool = [];\n    this._batchPoolIndex = 0;\n    this._textureBatchPool = [];\n    this._textureBatchPoolIndex = 0;\n    options = { ..._Batcher.defaultOptions, ...options };\n    const { vertexSize, indexSize } = options;\n    this.attributeBuffer = new ViewableBuffer(vertexSize * this._vertexSize * 4);\n    this.indexBuffer = new Uint16Array(indexSize);\n  }\n  begin() {\n    this.batchIndex = 0;\n    this.elementSize = 0;\n    this.elementStart = 0;\n    this.indexSize = 0;\n    this.attributeSize = 0;\n    this._batchPoolIndex = 0;\n    this._textureBatchPoolIndex = 0;\n    this._batchIndexStart = 0;\n    this._batchIndexSize = 0;\n    this.dirty = true;\n  }\n  add(batchableObject) {\n    this._elements[this.elementSize++] = batchableObject;\n    batchableObject.indexStart = this.indexSize;\n    batchableObject.location = this.attributeSize;\n    batchableObject.batcher = this;\n    this.indexSize += batchableObject.indexSize;\n    this.attributeSize += batchableObject.vertexSize * this._vertexSize;\n  }\n  checkAndUpdateTexture(batchableObject, texture) {\n    const textureId = batchableObject.batch.textures.ids[texture._source.uid];\n    if (!textureId && textureId !== 0)\n      return false;\n    batchableObject.textureId = textureId;\n    batchableObject.texture = texture;\n    return true;\n  }\n  updateElement(batchableObject) {\n    this.dirty = true;\n    batchableObject.packAttributes(\n      this.attributeBuffer.float32View,\n      this.attributeBuffer.uint32View,\n      batchableObject.location,\n      batchableObject.textureId\n    );\n  }\n  /**\n   * breaks the batcher. This happens when a batch gets too big,\n   * or we need to switch to a different type of rendering (a filter for example)\n   * @param instructionSet\n   */\n  break(instructionSet) {\n    const elements = this._elements;\n    let textureBatch = this._textureBatchPool[this._textureBatchPoolIndex++] || new BatchTextureArray();\n    textureBatch.clear();\n    if (!elements[this.elementStart])\n      return;\n    const firstElement = elements[this.elementStart];\n    let blendMode = getAdjustedBlendModeBlend(firstElement.blendMode, firstElement.texture._source);\n    if (this.attributeSize * 4 > this.attributeBuffer.size) {\n      this._resizeAttributeBuffer(this.attributeSize * 4);\n    }\n    if (this.indexSize > this.indexBuffer.length) {\n      this._resizeIndexBuffer(this.indexSize);\n    }\n    const f32 = this.attributeBuffer.float32View;\n    const u32 = this.attributeBuffer.uint32View;\n    const iBuffer = this.indexBuffer;\n    let size = this._batchIndexSize;\n    let start = this._batchIndexStart;\n    let action = \"startBatch\";\n    let batch = this._batchPool[this._batchPoolIndex++] || new Batch();\n    for (let i = this.elementStart; i < this.elementSize; ++i) {\n      const element = elements[i];\n      elements[i] = null;\n      const texture = element.texture;\n      const source = texture._source;\n      const adjustedBlendMode = getAdjustedBlendModeBlend(element.blendMode, source);\n      const blendModeChange = blendMode !== adjustedBlendMode;\n      if (source._batchTick === BATCH_TICK && !blendModeChange) {\n        element.textureId = source._textureBindLocation;\n        size += element.indexSize;\n        element.packAttributes(f32, u32, element.location, element.textureId);\n        element.packIndex(iBuffer, element.indexStart, element.location / this._vertexSize);\n        element.batch = batch;\n        continue;\n      }\n      source._batchTick = BATCH_TICK;\n      if (textureBatch.count >= MAX_TEXTURES || blendModeChange) {\n        this._finishBatch(\n          batch,\n          start,\n          size - start,\n          textureBatch,\n          blendMode,\n          instructionSet,\n          action\n        );\n        action = \"renderBatch\";\n        start = size;\n        blendMode = adjustedBlendMode;\n        textureBatch = this._textureBatchPool[this._textureBatchPoolIndex++] || new BatchTextureArray();\n        textureBatch.clear();\n        batch = this._batchPool[this._batchPoolIndex++] || new Batch();\n        ++BATCH_TICK;\n      }\n      element.textureId = source._textureBindLocation = textureBatch.count;\n      textureBatch.ids[source.uid] = textureBatch.count;\n      textureBatch.textures[textureBatch.count++] = source;\n      element.batch = batch;\n      size += element.indexSize;\n      element.packAttributes(f32, u32, element.location, element.textureId);\n      element.packIndex(iBuffer, element.indexStart, element.location / this._vertexSize);\n    }\n    if (textureBatch.count > 0) {\n      this._finishBatch(\n        batch,\n        start,\n        size - start,\n        textureBatch,\n        blendMode,\n        instructionSet,\n        action\n      );\n      start = size;\n      ++BATCH_TICK;\n    }\n    this.elementStart = this.elementSize;\n    this._batchIndexStart = start;\n    this._batchIndexSize = size;\n  }\n  _finishBatch(batch, indexStart, indexSize, textureBatch, blendMode, instructionSet, action) {\n    batch.gpuBindGroup = null;\n    batch.action = action;\n    batch.batcher = this;\n    batch.textures = textureBatch;\n    batch.blendMode = blendMode;\n    batch.start = indexStart;\n    batch.size = indexSize;\n    ++BATCH_TICK;\n    instructionSet.add(batch);\n  }\n  finish(instructionSet) {\n    this.break(instructionSet);\n  }\n  /**\n   * Resizes the attribute buffer to the given size (1 = 1 float32)\n   * @param size - the size in vertices to ensure (not bytes!)\n   */\n  ensureAttributeBuffer(size) {\n    if (size * 4 <= this.attributeBuffer.size)\n      return;\n    this._resizeAttributeBuffer(size * 4);\n  }\n  /**\n   * Resizes the index buffer to the given size (1 = 1 float32)\n   * @param size - the size in vertices to ensure (not bytes!)\n   */\n  ensureIndexBuffer(size) {\n    if (size <= this.indexBuffer.length)\n      return;\n    this._resizeIndexBuffer(size);\n  }\n  _resizeAttributeBuffer(size) {\n    const newSize = Math.max(size, this.attributeBuffer.size * 2);\n    const newArrayBuffer = new ViewableBuffer(newSize);\n    fastCopy(this.attributeBuffer.rawBinaryData, newArrayBuffer.rawBinaryData);\n    this.attributeBuffer = newArrayBuffer;\n  }\n  _resizeIndexBuffer(size) {\n    const indexBuffer = this.indexBuffer;\n    let newSize = Math.max(size, indexBuffer.length * 1.5);\n    newSize += newSize % 2;\n    const newIndexBuffer = newSize > 65535 ? new Uint32Array(newSize) : new Uint16Array(newSize);\n    if (newIndexBuffer.BYTES_PER_ELEMENT !== indexBuffer.BYTES_PER_ELEMENT) {\n      for (let i = 0; i < indexBuffer.length; i++) {\n        newIndexBuffer[i] = indexBuffer[i];\n      }\n    } else {\n      fastCopy(indexBuffer.buffer, newIndexBuffer.buffer);\n    }\n    this.indexBuffer = newIndexBuffer;\n  }\n  destroy() {\n    for (let i = 0; i < this.batches.length; i++) {\n      this.batches[i].destroy();\n    }\n    this.batches = null;\n    for (let i = 0; i < this._elements.length; i++) {\n      this._elements[i].batch = null;\n    }\n    this._elements = null;\n    this.indexBuffer = null;\n    this.attributeBuffer.destroy();\n    this.attributeBuffer = null;\n  }\n};\n_Batcher.defaultOptions = {\n  vertexSize: 4,\n  indexSize: 6\n};\nlet Batcher = _Batcher;\n\nexport { Batch, Batcher };\n//# sourceMappingURL=Batcher.mjs.map\n","\"use strict\";\nfunction buildUvs(vertices, verticesStride, verticesOffset, uvs, uvsOffset, uvsStride, size, matrix = null) {\n  let index = 0;\n  verticesOffset *= verticesStride;\n  uvsOffset *= uvsStride;\n  const a = matrix.a;\n  const b = matrix.b;\n  const c = matrix.c;\n  const d = matrix.d;\n  const tx = matrix.tx;\n  const ty = matrix.ty;\n  while (index < size) {\n    const x = vertices[verticesOffset];\n    const y = vertices[verticesOffset + 1];\n    uvs[uvsOffset] = a * x + c * y + tx;\n    uvs[uvsOffset + 1] = b * x + d * y + ty;\n    uvsOffset += uvsStride;\n    verticesOffset += verticesStride;\n    index++;\n  }\n}\nfunction buildSimpleUvs(uvs, uvsOffset, uvsStride, size) {\n  let index = 0;\n  uvsOffset *= uvsStride;\n  while (index < size) {\n    uvs[uvsOffset] = 0;\n    uvs[uvsOffset + 1] = 0;\n    uvsOffset += uvsStride;\n    index++;\n  }\n}\n\nexport { buildSimpleUvs, buildUvs };\n//# sourceMappingURL=buildUvs.mjs.map\n","\"use strict\";\nfunction transformVertices(vertices, m, offset, stride, size) {\n  const a = m.a;\n  const b = m.b;\n  const c = m.c;\n  const d = m.d;\n  const tx = m.tx;\n  const ty = m.ty;\n  offset = offset || 0;\n  stride = stride || 2;\n  size = size || vertices.length / stride - offset;\n  let index = offset * stride;\n  for (let i = 0; i < size; i++) {\n    const x = vertices[index];\n    const y = vertices[index + 1];\n    vertices[index] = a * x + c * y + tx;\n    vertices[index + 1] = b * x + d * y + ty;\n    index += stride;\n  }\n}\n\nexport { transformVertices };\n//# sourceMappingURL=transformVertices.mjs.map\n","\"use strict\";\nfunction multiplyHexColors(color1, color2) {\n  if (color1 === 16777215 || !color2)\n    return color2;\n  if (color2 === 16777215 || !color1)\n    return color1;\n  const r1 = color1 >> 16 & 255;\n  const g1 = color1 >> 8 & 255;\n  const b1 = color1 & 255;\n  const r2 = color2 >> 16 & 255;\n  const g2 = color2 >> 8 & 255;\n  const b2 = color2 & 255;\n  const r = r1 * r2 / 255;\n  const g = g1 * g2 / 255;\n  const b = b1 * b2 / 255;\n  return (r << 16) + (g << 8) + b;\n}\n\nexport { multiplyHexColors };\n//# sourceMappingURL=multiplyHexColors.mjs.map\n","import { multiplyHexColors } from '../../container/utils/multiplyHexColors.mjs';\n\n\"use strict\";\nclass BatchableGraphics {\n  constructor() {\n    this.batcher = null;\n    this.batch = null;\n    this.applyTransform = true;\n    this.roundPixels = 0;\n  }\n  get blendMode() {\n    if (this.applyTransform) {\n      return this.renderable.groupBlendMode;\n    }\n    return \"normal\";\n  }\n  packIndex(indexBuffer, index, indicesOffset) {\n    const indices = this.geometryData.indices;\n    for (let i = 0; i < this.indexSize; i++) {\n      indexBuffer[index++] = indices[i + this.indexOffset] + indicesOffset - this.vertexOffset;\n    }\n  }\n  packAttributes(float32View, uint32View, index, textureId) {\n    const geometry = this.geometryData;\n    const graphics = this.renderable;\n    const positions = geometry.vertices;\n    const uvs = geometry.uvs;\n    const offset = this.vertexOffset * 2;\n    const vertSize = (this.vertexOffset + this.vertexSize) * 2;\n    const rgb = this.color;\n    const bgr = rgb >> 16 | rgb & 65280 | (rgb & 255) << 16;\n    if (this.applyTransform) {\n      const argb = multiplyHexColors(bgr, graphics.groupColor) + (this.alpha * graphics.groupAlpha * 255 << 24);\n      const wt = graphics.groupTransform;\n      const textureIdAndRound = textureId << 16 | this.roundPixels & 65535;\n      const a = wt.a;\n      const b = wt.b;\n      const c = wt.c;\n      const d = wt.d;\n      const tx = wt.tx;\n      const ty = wt.ty;\n      for (let i = offset; i < vertSize; i += 2) {\n        const x = positions[i];\n        const y = positions[i + 1];\n        float32View[index] = a * x + c * y + tx;\n        float32View[index + 1] = b * x + d * y + ty;\n        float32View[index + 2] = uvs[i];\n        float32View[index + 3] = uvs[i + 1];\n        uint32View[index + 4] = argb;\n        uint32View[index + 5] = textureIdAndRound;\n        index += 6;\n      }\n    } else {\n      const argb = bgr + (this.alpha * 255 << 24);\n      for (let i = offset; i < vertSize; i += 2) {\n        float32View[index] = positions[i];\n        float32View[index + 1] = positions[i + 1];\n        float32View[index + 2] = uvs[i];\n        float32View[index + 3] = uvs[i + 1];\n        uint32View[index + 4] = argb;\n        uint32View[index + 5] = textureId << 16;\n        index += 6;\n      }\n    }\n  }\n  // TODO rename to vertexSize\n  get vertSize() {\n    return this.vertexSize;\n  }\n  copyTo(gpuBuffer) {\n    gpuBuffer.indexOffset = this.indexOffset;\n    gpuBuffer.indexSize = this.indexSize;\n    gpuBuffer.vertexOffset = this.vertexOffset;\n    gpuBuffer.vertexSize = this.vertexSize;\n    gpuBuffer.color = this.color;\n    gpuBuffer.alpha = this.alpha;\n    gpuBuffer.texture = this.texture;\n    gpuBuffer.geometryData = this.geometryData;\n  }\n  reset() {\n    this.applyTransform = true;\n  }\n}\n\nexport { BatchableGraphics };\n//# sourceMappingURL=BatchableGraphics.mjs.map\n","\"use strict\";\nconst buildCircle = {\n  build(shape, points) {\n    let x;\n    let y;\n    let dx;\n    let dy;\n    let rx;\n    let ry;\n    if (shape.type === \"circle\") {\n      const circle = shape;\n      x = circle.x;\n      y = circle.y;\n      rx = ry = circle.radius;\n      dx = dy = 0;\n    } else if (shape.type === \"ellipse\") {\n      const ellipse = shape;\n      x = ellipse.x;\n      y = ellipse.y;\n      rx = ellipse.halfWidth;\n      ry = ellipse.halfHeight;\n      dx = dy = 0;\n    } else {\n      const roundedRect = shape;\n      const halfWidth = roundedRect.width / 2;\n      const halfHeight = roundedRect.height / 2;\n      x = roundedRect.x + halfWidth;\n      y = roundedRect.y + halfHeight;\n      rx = ry = Math.max(0, Math.min(roundedRect.radius, Math.min(halfWidth, halfHeight)));\n      dx = halfWidth - rx;\n      dy = halfHeight - ry;\n    }\n    if (!(rx >= 0 && ry >= 0 && dx >= 0 && dy >= 0)) {\n      return points;\n    }\n    const n = Math.ceil(2.3 * Math.sqrt(rx + ry));\n    const m = n * 8 + (dx ? 4 : 0) + (dy ? 4 : 0);\n    if (m === 0) {\n      return points;\n    }\n    if (n === 0) {\n      points[0] = points[6] = x + dx;\n      points[1] = points[3] = y + dy;\n      points[2] = points[4] = x - dx;\n      points[5] = points[7] = y - dy;\n      return points;\n    }\n    let j1 = 0;\n    let j2 = n * 4 + (dx ? 2 : 0) + 2;\n    let j3 = j2;\n    let j4 = m;\n    let x0 = dx + rx;\n    let y0 = dy;\n    let x1 = x + x0;\n    let x2 = x - x0;\n    let y1 = y + y0;\n    points[j1++] = x1;\n    points[j1++] = y1;\n    points[--j2] = y1;\n    points[--j2] = x2;\n    if (dy) {\n      const y22 = y - y0;\n      points[j3++] = x2;\n      points[j3++] = y22;\n      points[--j4] = y22;\n      points[--j4] = x1;\n    }\n    for (let i = 1; i < n; i++) {\n      const a = Math.PI / 2 * (i / n);\n      const x02 = dx + Math.cos(a) * rx;\n      const y02 = dy + Math.sin(a) * ry;\n      const x12 = x + x02;\n      const x22 = x - x02;\n      const y12 = y + y02;\n      const y22 = y - y02;\n      points[j1++] = x12;\n      points[j1++] = y12;\n      points[--j2] = y12;\n      points[--j2] = x22;\n      points[j3++] = x22;\n      points[j3++] = y22;\n      points[--j4] = y22;\n      points[--j4] = x12;\n    }\n    x0 = dx;\n    y0 = dy + ry;\n    x1 = x + x0;\n    x2 = x - x0;\n    y1 = y + y0;\n    const y2 = y - y0;\n    points[j1++] = x1;\n    points[j1++] = y1;\n    points[--j4] = y2;\n    points[--j4] = x1;\n    if (dx) {\n      points[j1++] = x2;\n      points[j1++] = y1;\n      points[--j4] = y2;\n      points[--j4] = x2;\n    }\n    return points;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    if (points.length === 0) {\n      return;\n    }\n    let centerX = 0;\n    let centerY = 0;\n    for (let i = 0; i < points.length; i += 2) {\n      centerX += points[i];\n      centerY += points[i + 1];\n    }\n    centerX /= points.length / 2;\n    centerY /= points.length / 2;\n    let count = verticesOffset;\n    vertices[count * verticesStride] = centerX;\n    vertices[count * verticesStride + 1] = centerY;\n    const centerIndex = count++;\n    for (let i = 0; i < points.length; i += 2) {\n      vertices[count * verticesStride] = points[i];\n      vertices[count * verticesStride + 1] = points[i + 1];\n      if (i > 0) {\n        indices[indicesOffset++] = count;\n        indices[indicesOffset++] = centerIndex;\n        indices[indicesOffset++] = count - 1;\n      }\n      count++;\n    }\n    indices[indicesOffset++] = centerIndex + 1;\n    indices[indicesOffset++] = centerIndex;\n    indices[indicesOffset++] = count - 1;\n  }\n};\n\nexport { buildCircle };\n//# sourceMappingURL=buildCircle.mjs.map\n","\"use strict\";\nconst closePointEps = 1e-4;\nconst curveEps = 1e-4;\n\nexport { closePointEps, curveEps };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nfunction getOrientationOfPoints(points) {\n  const m = points.length;\n  if (m < 6) {\n    return 1;\n  }\n  let area = 0;\n  for (let i = 0, x1 = points[m - 2], y1 = points[m - 1]; i < m; i += 2) {\n    const x2 = points[i];\n    const y2 = points[i + 1];\n    area += (x2 - x1) * (y2 + y1);\n    x1 = x2;\n    y1 = y2;\n  }\n  if (area < 0) {\n    return -1;\n  }\n  return 1;\n}\n\nexport { getOrientationOfPoints };\n//# sourceMappingURL=getOrientationOfPoints.mjs.map\n","import { Point } from '../../../../maths/point/Point.mjs';\nimport { closePointEps, curveEps } from '../const.mjs';\nimport { getOrientationOfPoints } from '../utils/getOrientationOfPoints.mjs';\n\n\"use strict\";\nfunction square(x, y, nx, ny, innerWeight, outerWeight, clockwise, verts) {\n  const ix = x - nx * innerWeight;\n  const iy = y - ny * innerWeight;\n  const ox = x + nx * outerWeight;\n  const oy = y + ny * outerWeight;\n  let exx;\n  let eyy;\n  if (clockwise) {\n    exx = ny;\n    eyy = -nx;\n  } else {\n    exx = -ny;\n    eyy = nx;\n  }\n  const eix = ix + exx;\n  const eiy = iy + eyy;\n  const eox = ox + exx;\n  const eoy = oy + eyy;\n  verts.push(eix, eiy);\n  verts.push(eox, eoy);\n  return 2;\n}\nfunction round(cx, cy, sx, sy, ex, ey, verts, clockwise) {\n  const cx2p0x = sx - cx;\n  const cy2p0y = sy - cy;\n  let angle0 = Math.atan2(cx2p0x, cy2p0y);\n  let angle1 = Math.atan2(ex - cx, ey - cy);\n  if (clockwise && angle0 < angle1) {\n    angle0 += Math.PI * 2;\n  } else if (!clockwise && angle0 > angle1) {\n    angle1 += Math.PI * 2;\n  }\n  let startAngle = angle0;\n  const angleDiff = angle1 - angle0;\n  const absAngleDiff = Math.abs(angleDiff);\n  const radius = Math.sqrt(cx2p0x * cx2p0x + cy2p0y * cy2p0y);\n  const segCount = (15 * absAngleDiff * Math.sqrt(radius) / Math.PI >> 0) + 1;\n  const angleInc = angleDiff / segCount;\n  startAngle += angleInc;\n  if (clockwise) {\n    verts.push(cx, cy);\n    verts.push(sx, sy);\n    for (let i = 1, angle = startAngle; i < segCount; i++, angle += angleInc) {\n      verts.push(cx, cy);\n      verts.push(\n        cx + Math.sin(angle) * radius,\n        cy + Math.cos(angle) * radius\n      );\n    }\n    verts.push(cx, cy);\n    verts.push(ex, ey);\n  } else {\n    verts.push(sx, sy);\n    verts.push(cx, cy);\n    for (let i = 1, angle = startAngle; i < segCount; i++, angle += angleInc) {\n      verts.push(\n        cx + Math.sin(angle) * radius,\n        cy + Math.cos(angle) * radius\n      );\n      verts.push(cx, cy);\n    }\n    verts.push(ex, ey);\n    verts.push(cx, cy);\n  }\n  return segCount * 2;\n}\nfunction buildLine(points, lineStyle, flipAlignment, closed, vertices, _verticesStride, _verticesOffset, indices, _indicesOffset) {\n  const eps = closePointEps;\n  if (points.length === 0) {\n    return;\n  }\n  const style = lineStyle;\n  let alignment = style.alignment;\n  if (lineStyle.alignment !== 0.5) {\n    let orientation = getOrientationOfPoints(points);\n    if (flipAlignment)\n      orientation *= -1;\n    alignment = (alignment - 0.5) * orientation + 0.5;\n  }\n  const firstPoint = new Point(points[0], points[1]);\n  const lastPoint = new Point(points[points.length - 2], points[points.length - 1]);\n  const closedShape = closed;\n  const closedPath = Math.abs(firstPoint.x - lastPoint.x) < eps && Math.abs(firstPoint.y - lastPoint.y) < eps;\n  if (closedShape) {\n    points = points.slice();\n    if (closedPath) {\n      points.pop();\n      points.pop();\n      lastPoint.set(points[points.length - 2], points[points.length - 1]);\n    }\n    const midPointX = (firstPoint.x + lastPoint.x) * 0.5;\n    const midPointY = (lastPoint.y + firstPoint.y) * 0.5;\n    points.unshift(midPointX, midPointY);\n    points.push(midPointX, midPointY);\n  }\n  const verts = vertices;\n  const length = points.length / 2;\n  let indexCount = points.length;\n  const indexStart = verts.length / 2;\n  const width = style.width / 2;\n  const widthSquared = width * width;\n  const miterLimitSquared = style.miterLimit * style.miterLimit;\n  let x0 = points[0];\n  let y0 = points[1];\n  let x1 = points[2];\n  let y1 = points[3];\n  let x2 = 0;\n  let y2 = 0;\n  let perpX = -(y0 - y1);\n  let perpY = x0 - x1;\n  let perp1x = 0;\n  let perp1y = 0;\n  let dist = Math.sqrt(perpX * perpX + perpY * perpY);\n  perpX /= dist;\n  perpY /= dist;\n  perpX *= width;\n  perpY *= width;\n  const ratio = alignment;\n  const innerWeight = (1 - ratio) * 2;\n  const outerWeight = ratio * 2;\n  if (!closedShape) {\n    if (style.cap === \"round\") {\n      indexCount += round(\n        x0 - perpX * (innerWeight - outerWeight) * 0.5,\n        y0 - perpY * (innerWeight - outerWeight) * 0.5,\n        x0 - perpX * innerWeight,\n        y0 - perpY * innerWeight,\n        x0 + perpX * outerWeight,\n        y0 + perpY * outerWeight,\n        verts,\n        true\n      ) + 2;\n    } else if (style.cap === \"square\") {\n      indexCount += square(x0, y0, perpX, perpY, innerWeight, outerWeight, true, verts);\n    }\n  }\n  verts.push(\n    x0 - perpX * innerWeight,\n    y0 - perpY * innerWeight\n  );\n  verts.push(\n    x0 + perpX * outerWeight,\n    y0 + perpY * outerWeight\n  );\n  for (let i = 1; i < length - 1; ++i) {\n    x0 = points[(i - 1) * 2];\n    y0 = points[(i - 1) * 2 + 1];\n    x1 = points[i * 2];\n    y1 = points[i * 2 + 1];\n    x2 = points[(i + 1) * 2];\n    y2 = points[(i + 1) * 2 + 1];\n    perpX = -(y0 - y1);\n    perpY = x0 - x1;\n    dist = Math.sqrt(perpX * perpX + perpY * perpY);\n    perpX /= dist;\n    perpY /= dist;\n    perpX *= width;\n    perpY *= width;\n    perp1x = -(y1 - y2);\n    perp1y = x1 - x2;\n    dist = Math.sqrt(perp1x * perp1x + perp1y * perp1y);\n    perp1x /= dist;\n    perp1y /= dist;\n    perp1x *= width;\n    perp1y *= width;\n    const dx0 = x1 - x0;\n    const dy0 = y0 - y1;\n    const dx1 = x1 - x2;\n    const dy1 = y2 - y1;\n    const dot = dx0 * dx1 + dy0 * dy1;\n    const cross = dy0 * dx1 - dy1 * dx0;\n    const clockwise = cross < 0;\n    if (Math.abs(cross) < 1e-3 * Math.abs(dot)) {\n      verts.push(\n        x1 - perpX * innerWeight,\n        y1 - perpY * innerWeight\n      );\n      verts.push(\n        x1 + perpX * outerWeight,\n        y1 + perpY * outerWeight\n      );\n      if (dot >= 0) {\n        if (style.join === \"round\") {\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 4;\n        } else {\n          indexCount += 2;\n        }\n        verts.push(\n          x1 - perp1x * outerWeight,\n          y1 - perp1y * outerWeight\n        );\n        verts.push(\n          x1 + perp1x * innerWeight,\n          y1 + perp1y * innerWeight\n        );\n      }\n      continue;\n    }\n    const c1 = (-perpX + x0) * (-perpY + y1) - (-perpX + x1) * (-perpY + y0);\n    const c2 = (-perp1x + x2) * (-perp1y + y1) - (-perp1x + x1) * (-perp1y + y2);\n    const px = (dx0 * c2 - dx1 * c1) / cross;\n    const py = (dy1 * c1 - dy0 * c2) / cross;\n    const pDist = (px - x1) * (px - x1) + (py - y1) * (py - y1);\n    const imx = x1 + (px - x1) * innerWeight;\n    const imy = y1 + (py - y1) * innerWeight;\n    const omx = x1 - (px - x1) * outerWeight;\n    const omy = y1 - (py - y1) * outerWeight;\n    const smallerInsideSegmentSq = Math.min(dx0 * dx0 + dy0 * dy0, dx1 * dx1 + dy1 * dy1);\n    const insideWeight = clockwise ? innerWeight : outerWeight;\n    const smallerInsideDiagonalSq = smallerInsideSegmentSq + insideWeight * insideWeight * widthSquared;\n    const insideMiterOk = pDist <= smallerInsideDiagonalSq;\n    if (insideMiterOk) {\n      if (style.join === \"bevel\" || pDist / widthSquared > miterLimitSquared) {\n        if (clockwise) {\n          verts.push(imx, imy);\n          verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n          verts.push(imx, imy);\n          verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n        } else {\n          verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n          verts.push(omx, omy);\n          verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n          verts.push(omx, omy);\n        }\n        indexCount += 2;\n      } else if (style.join === \"round\") {\n        if (clockwise) {\n          verts.push(imx, imy);\n          verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n          indexCount += round(\n            x1,\n            y1,\n            x1 + perpX * outerWeight,\n            y1 + perpY * outerWeight,\n            x1 + perp1x * outerWeight,\n            y1 + perp1y * outerWeight,\n            verts,\n            true\n          ) + 4;\n          verts.push(imx, imy);\n          verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n        } else {\n          verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n          verts.push(omx, omy);\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 4;\n          verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n          verts.push(omx, omy);\n        }\n      } else {\n        verts.push(imx, imy);\n        verts.push(omx, omy);\n      }\n    } else {\n      verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n      verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n      if (style.join === \"round\") {\n        if (clockwise) {\n          indexCount += round(\n            x1,\n            y1,\n            x1 + perpX * outerWeight,\n            y1 + perpY * outerWeight,\n            x1 + perp1x * outerWeight,\n            y1 + perp1y * outerWeight,\n            verts,\n            true\n          ) + 2;\n        } else {\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 2;\n        }\n      } else if (style.join === \"miter\" && pDist / widthSquared <= miterLimitSquared) {\n        if (clockwise) {\n          verts.push(omx, omy);\n          verts.push(omx, omy);\n        } else {\n          verts.push(imx, imy);\n          verts.push(imx, imy);\n        }\n        indexCount += 2;\n      }\n      verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n      verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n      indexCount += 2;\n    }\n  }\n  x0 = points[(length - 2) * 2];\n  y0 = points[(length - 2) * 2 + 1];\n  x1 = points[(length - 1) * 2];\n  y1 = points[(length - 1) * 2 + 1];\n  perpX = -(y0 - y1);\n  perpY = x0 - x1;\n  dist = Math.sqrt(perpX * perpX + perpY * perpY);\n  perpX /= dist;\n  perpY /= dist;\n  perpX *= width;\n  perpY *= width;\n  verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n  verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n  if (!closedShape) {\n    if (style.cap === \"round\") {\n      indexCount += round(\n        x1 - perpX * (innerWeight - outerWeight) * 0.5,\n        y1 - perpY * (innerWeight - outerWeight) * 0.5,\n        x1 - perpX * innerWeight,\n        y1 - perpY * innerWeight,\n        x1 + perpX * outerWeight,\n        y1 + perpY * outerWeight,\n        verts,\n        false\n      ) + 2;\n    } else if (style.cap === \"square\") {\n      indexCount += square(x1, y1, perpX, perpY, innerWeight, outerWeight, false, verts);\n    }\n  }\n  const eps2 = curveEps * curveEps;\n  for (let i = indexStart; i < indexCount + indexStart - 2; ++i) {\n    x0 = verts[i * 2];\n    y0 = verts[i * 2 + 1];\n    x1 = verts[(i + 1) * 2];\n    y1 = verts[(i + 1) * 2 + 1];\n    x2 = verts[(i + 2) * 2];\n    y2 = verts[(i + 2) * 2 + 1];\n    if (Math.abs(x0 * (y1 - y2) + x1 * (y2 - y0) + x2 * (y0 - y1)) < eps2) {\n      continue;\n    }\n    indices.push(i, i + 1, i + 2);\n  }\n}\n\nexport { buildLine };\n//# sourceMappingURL=buildLine.mjs.map\n","import earcut from 'earcut';\n\n\"use strict\";\nfunction triangulateWithHoles(points, holes, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n  const triangles = earcut(points, holes, 2);\n  if (!triangles) {\n    return;\n  }\n  for (let i = 0; i < triangles.length; i += 3) {\n    indices[indicesOffset++] = triangles[i] + verticesOffset;\n    indices[indicesOffset++] = triangles[i + 1] + verticesOffset;\n    indices[indicesOffset++] = triangles[i + 2] + verticesOffset;\n  }\n  let index = verticesOffset * verticesStride;\n  for (let i = 0; i < points.length; i += 2) {\n    vertices[index] = points[i];\n    vertices[index + 1] = points[i + 1];\n    index += verticesStride;\n  }\n}\n\nexport { triangulateWithHoles };\n//# sourceMappingURL=triangulateWithHoles.mjs.map\n","import { triangulateWithHoles } from '../utils/triangulateWithHoles.mjs';\n\n\"use strict\";\nconst emptyArray = [];\nconst buildPolygon = {\n  build(shape, points) {\n    for (let i = 0; i < shape.points.length; i++) {\n      points[i] = shape.points[i];\n    }\n    return points;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    triangulateWithHoles(points, emptyArray, vertices, verticesStride, verticesOffset, indices, indicesOffset);\n  }\n};\n\nexport { buildPolygon };\n//# sourceMappingURL=buildPolygon.mjs.map\n","import { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { buildUvs, buildSimpleUvs } from '../../../../rendering/renderers/shared/geometry/utils/buildUvs.mjs';\nimport { transformVertices } from '../../../../rendering/renderers/shared/geometry/utils/transformVertices.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { BigPool } from '../../../../utils/pool/PoolGroup.mjs';\nimport { BatchableGraphics } from '../BatchableGraphics.mjs';\nimport { buildCircle } from '../buildCommands/buildCircle.mjs';\nimport { buildLine } from '../buildCommands/buildLine.mjs';\nimport { buildPolygon } from '../buildCommands/buildPolygon.mjs';\nimport { buildRectangle } from '../buildCommands/buildRectangle.mjs';\nimport { buildTriangle } from '../buildCommands/buildTriangle.mjs';\nimport { triangulateWithHoles } from './triangulateWithHoles.mjs';\n\n\"use strict\";\nconst buildMap = {\n  rectangle: buildRectangle,\n  polygon: buildPolygon,\n  triangle: buildTriangle,\n  circle: buildCircle,\n  ellipse: buildCircle,\n  roundedRectangle: buildCircle\n};\nconst tempRect = new Rectangle();\nfunction buildContextBatches(context, gpuContext) {\n  const { geometryData, batches } = gpuContext;\n  batches.length = 0;\n  geometryData.indices.length = 0;\n  geometryData.vertices.length = 0;\n  geometryData.uvs.length = 0;\n  for (let i = 0; i < context.instructions.length; i++) {\n    const instruction = context.instructions[i];\n    if (instruction.action === \"texture\") {\n      addTextureToGeometryData(instruction.data, batches, geometryData);\n    } else if (instruction.action === \"fill\" || instruction.action === \"stroke\") {\n      const isStroke = instruction.action === \"stroke\";\n      const shapePath = instruction.data.path.shapePath;\n      const style = instruction.data.style;\n      const hole = instruction.data.hole;\n      if (isStroke && hole) {\n        addShapePathToGeometryData(hole.shapePath, style, null, true, batches, geometryData);\n      }\n      addShapePathToGeometryData(shapePath, style, hole, isStroke, batches, geometryData);\n    }\n  }\n}\nfunction addTextureToGeometryData(data, batches, geometryData) {\n  const { vertices, uvs, indices } = geometryData;\n  const indexOffset = indices.length;\n  const vertOffset = vertices.length / 2;\n  const points = [];\n  const build = buildMap.rectangle;\n  const rect = tempRect;\n  const texture = data.image;\n  rect.x = data.dx;\n  rect.y = data.dy;\n  rect.width = data.dw;\n  rect.height = data.dh;\n  const matrix = data.transform;\n  build.build(rect, points);\n  if (matrix) {\n    transformVertices(points, matrix);\n  }\n  build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n  const textureUvs = texture.uvs;\n  uvs.push(\n    textureUvs.x0,\n    textureUvs.y0,\n    textureUvs.x1,\n    textureUvs.y1,\n    textureUvs.x3,\n    textureUvs.y3,\n    textureUvs.x2,\n    textureUvs.y2\n  );\n  const graphicsBatch = BigPool.get(BatchableGraphics);\n  graphicsBatch.indexOffset = indexOffset;\n  graphicsBatch.indexSize = indices.length - indexOffset;\n  graphicsBatch.vertexOffset = vertOffset;\n  graphicsBatch.vertexSize = vertices.length / 2 - vertOffset;\n  graphicsBatch.color = data.style;\n  graphicsBatch.alpha = data.alpha;\n  graphicsBatch.texture = texture;\n  graphicsBatch.geometryData = geometryData;\n  batches.push(graphicsBatch);\n}\nfunction addShapePathToGeometryData(shapePath, style, hole, isStroke, batches, geometryData) {\n  const { vertices, uvs, indices } = geometryData;\n  const lastIndex = shapePath.shapePrimitives.length - 1;\n  shapePath.shapePrimitives.forEach(({ shape, transform: matrix }, i) => {\n    const indexOffset = indices.length;\n    const vertOffset = vertices.length / 2;\n    const points = [];\n    const build = buildMap[shape.type];\n    build.build(shape, points);\n    if (matrix) {\n      transformVertices(points, matrix);\n    }\n    if (!isStroke) {\n      if (hole && lastIndex === i) {\n        if (lastIndex !== 0) {\n          console.warn(\"[Pixi Graphics] only the last shape have be cut out\");\n        }\n        const holeIndices = [];\n        const otherPoints = points.slice();\n        const holeArrays = getHoleArrays(hole.shapePath);\n        holeArrays.forEach((holePoints) => {\n          holeIndices.push(otherPoints.length / 2);\n          otherPoints.push(...holePoints);\n        });\n        triangulateWithHoles(otherPoints, holeIndices, vertices, 2, vertOffset, indices, indexOffset);\n      } else {\n        build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n      }\n    } else {\n      const close = shape.closePath ?? true;\n      const lineStyle = style;\n      buildLine(points, lineStyle, false, close, vertices, 2, vertOffset, indices, indexOffset);\n    }\n    const uvsOffset = uvs.length / 2;\n    const texture = style.texture;\n    if (texture !== Texture.WHITE) {\n      const textureMatrix = style.matrix;\n      if (matrix) {\n        textureMatrix.append(matrix.clone().invert());\n      }\n      buildUvs(vertices, 2, vertOffset, uvs, uvsOffset, 2, vertices.length / 2 - vertOffset, textureMatrix);\n    } else {\n      buildSimpleUvs(uvs, uvsOffset, 2, vertices.length / 2 - vertOffset);\n    }\n    const graphicsBatch = BigPool.get(BatchableGraphics);\n    graphicsBatch.indexOffset = indexOffset;\n    graphicsBatch.indexSize = indices.length - indexOffset;\n    graphicsBatch.vertexOffset = vertOffset;\n    graphicsBatch.vertexSize = vertices.length / 2 - vertOffset;\n    graphicsBatch.color = style.color;\n    graphicsBatch.alpha = style.alpha;\n    graphicsBatch.texture = texture;\n    graphicsBatch.geometryData = geometryData;\n    batches.push(graphicsBatch);\n  });\n}\nfunction getHoleArrays(shape) {\n  if (!shape)\n    return [];\n  const holePrimitives = shape.shapePrimitives;\n  const holeArrays = [];\n  for (let k = 0; k < holePrimitives.length; k++) {\n    const holePrimitive = holePrimitives[k].shape;\n    const holePoints = [];\n    const holeBuilder = buildMap[holePrimitive.type];\n    holeBuilder.build(holePrimitive, holePoints);\n    holeArrays.push(holePoints);\n  }\n  return holeArrays;\n}\n\nexport { buildContextBatches };\n//# sourceMappingURL=buildContextBatches.mjs.map\n","\"use strict\";\nconst buildRectangle = {\n  build(shape, points) {\n    const rectData = shape;\n    const x = rectData.x;\n    const y = rectData.y;\n    const width = rectData.width;\n    const height = rectData.height;\n    if (!(width >= 0 && height >= 0)) {\n      return points;\n    }\n    points[0] = x;\n    points[1] = y;\n    points[2] = x + width;\n    points[3] = y;\n    points[4] = x + width;\n    points[5] = y + height;\n    points[6] = x;\n    points[7] = y + height;\n    return points;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    let count = 0;\n    verticesOffset *= verticesStride;\n    vertices[verticesOffset + count] = points[0];\n    vertices[verticesOffset + count + 1] = points[1];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[2];\n    vertices[verticesOffset + count + 1] = points[3];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[6];\n    vertices[verticesOffset + count + 1] = points[7];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[4];\n    vertices[verticesOffset + count + 1] = points[5];\n    count += verticesStride;\n    const verticesIndex = verticesOffset / verticesStride;\n    indices[indicesOffset++] = verticesIndex;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 2;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 3;\n    indices[indicesOffset++] = verticesIndex + 2;\n  }\n};\n\nexport { buildRectangle };\n//# sourceMappingURL=buildRectangle.mjs.map\n","\"use strict\";\nconst buildTriangle = {\n  build(shape, points) {\n    points[0] = shape.x;\n    points[1] = shape.y;\n    points[2] = shape.x2;\n    points[3] = shape.y2;\n    points[4] = shape.x3;\n    points[5] = shape.y3;\n    return points;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    let count = 0;\n    verticesOffset *= verticesStride;\n    vertices[verticesOffset + count] = points[0];\n    vertices[verticesOffset + count + 1] = points[1];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[2];\n    vertices[verticesOffset + count + 1] = points[3];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[4];\n    vertices[verticesOffset + count + 1] = points[5];\n    const verticesIndex = verticesOffset / verticesStride;\n    indices[indicesOffset++] = verticesIndex;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 2;\n  }\n};\n\nexport { buildTriangle };\n//# sourceMappingURL=buildTriangle.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { BatchGeometry } from '../../../rendering/batcher/gpu/BatchGeometry.mjs';\nimport { getTextureBatchBindGroup } from '../../../rendering/batcher/gpu/getTextureBatchBindGroup.mjs';\nimport { Batcher } from '../../../rendering/batcher/shared/Batcher.mjs';\nimport { InstructionSet } from '../../../rendering/renderers/shared/instructions/InstructionSet.mjs';\nimport { BigPool } from '../../../utils/pool/PoolGroup.mjs';\nimport { buildContextBatches } from './utils/buildContextBatches.mjs';\n\n\"use strict\";\nclass GpuGraphicsContext {\n  constructor() {\n    this.batches = [];\n    this.geometryData = {\n      vertices: [],\n      uvs: [],\n      indices: []\n    };\n  }\n}\nclass GraphicsContextRenderData {\n  constructor() {\n    this.geometry = new BatchGeometry();\n    this.instructions = new InstructionSet();\n  }\n  init() {\n    this.instructions.reset();\n  }\n}\nconst _GraphicsContextSystem = class _GraphicsContextSystem {\n  constructor() {\n    // the root context batches, used to either make a batch or geometry\n    // all graphics use this as a base\n    this._activeBatchers = [];\n    this._gpuContextHash = {};\n    // used for non-batchable graphics\n    this._graphicsDataContextHash = /* @__PURE__ */ Object.create(null);\n    this._needsContextNeedsRebuild = [];\n  }\n  /**\n   * Runner init called, update the default options\n   * @ignore\n   */\n  init(options) {\n    _GraphicsContextSystem.defaultOptions.bezierSmoothness = options?.bezierSmoothness ?? _GraphicsContextSystem.defaultOptions.bezierSmoothness;\n  }\n  prerender() {\n    this._returnActiveBatchers();\n  }\n  getContextRenderData(context) {\n    return this._graphicsDataContextHash[context.uid] || this._initContextRenderData(context);\n  }\n  // Context management functions\n  updateGpuContext(context) {\n    let gpuContext = this._gpuContextHash[context.uid] || this._initContext(context);\n    if (context.dirty) {\n      if (gpuContext) {\n        this._cleanGraphicsContextData(context);\n      } else {\n        gpuContext = this._initContext(context);\n      }\n      buildContextBatches(context, gpuContext);\n      const batchMode = context.batchMode;\n      if (context.customShader || batchMode === \"no-batch\") {\n        gpuContext.isBatchable = false;\n      } else if (batchMode === \"auto\") {\n        gpuContext.isBatchable = gpuContext.geometryData.vertices.length < 400;\n      }\n      context.dirty = false;\n    }\n    return gpuContext;\n  }\n  getGpuContext(context) {\n    return this._gpuContextHash[context.uid] || this._initContext(context);\n  }\n  _returnActiveBatchers() {\n    for (let i = 0; i < this._activeBatchers.length; i++) {\n      BigPool.return(this._activeBatchers[i]);\n    }\n    this._activeBatchers.length = 0;\n  }\n  _initContextRenderData(context) {\n    const graphicsData = BigPool.get(GraphicsContextRenderData);\n    const { batches, geometryData } = this._gpuContextHash[context.uid];\n    const vertexSize = geometryData.vertices.length;\n    const indexSize = geometryData.indices.length;\n    for (let i = 0; i < batches.length; i++) {\n      batches[i].applyTransform = false;\n    }\n    const batcher = BigPool.get(Batcher);\n    this._activeBatchers.push(batcher);\n    batcher.ensureAttributeBuffer(vertexSize);\n    batcher.ensureIndexBuffer(indexSize);\n    batcher.begin();\n    for (let i = 0; i < batches.length; i++) {\n      const batch = batches[i];\n      batcher.add(batch);\n    }\n    batcher.finish(graphicsData.instructions);\n    const geometry = graphicsData.geometry;\n    geometry.indexBuffer.setDataWithSize(batcher.indexBuffer, batcher.indexSize, true);\n    geometry.buffers[0].setDataWithSize(batcher.attributeBuffer.float32View, batcher.attributeSize, true);\n    const drawBatches = batcher.batches;\n    for (let i = 0; i < drawBatches.length; i++) {\n      const batch = drawBatches[i];\n      batch.bindGroup = getTextureBatchBindGroup(batch.textures.textures, batch.textures.count);\n    }\n    this._graphicsDataContextHash[context.uid] = graphicsData;\n    return graphicsData;\n  }\n  _initContext(context) {\n    const gpuContext = new GpuGraphicsContext();\n    this._gpuContextHash[context.uid] = gpuContext;\n    context.on(\"update\", this.onGraphicsContextUpdate, this);\n    context.on(\"destroy\", this.onGraphicsContextDestroy, this);\n    return this._gpuContextHash[context.uid];\n  }\n  onGraphicsContextUpdate(context) {\n    this._needsContextNeedsRebuild.push(context);\n  }\n  onGraphicsContextDestroy(context) {\n    this._cleanGraphicsContextData(context);\n    context.off(\"update\", this.onGraphicsContextUpdate, this);\n    context.off(\"destroy\", this.onGraphicsContextDestroy, this);\n    this._gpuContextHash[context.uid] = null;\n  }\n  _cleanGraphicsContextData(context) {\n    const gpuContext = this._gpuContextHash[context.uid];\n    if (!gpuContext.isBatchable) {\n      if (this._graphicsDataContextHash[context.uid]) {\n        BigPool.return(this.getContextRenderData(context));\n        this._graphicsDataContextHash[context.uid] = null;\n      }\n    }\n    if (gpuContext.batches) {\n      gpuContext.batches.forEach((batch) => {\n        BigPool.return(batch);\n      });\n    }\n  }\n  destroy() {\n    for (const context of this._needsContextNeedsRebuild) {\n      if (this._gpuContextHash[context.uid]) {\n        this.onGraphicsContextDestroy(context);\n      }\n    }\n    this._needsContextNeedsRebuild.length = 0;\n  }\n};\n/** @ignore */\n_GraphicsContextSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"graphicsContext\"\n};\n/** The default options for the GraphicsContextSystem. */\n_GraphicsContextSystem.defaultOptions = {\n  /**\n   * A value from 0 to 1 that controls the smoothness of bezier curves (the higher the smoother)\n   * @default 0.5\n   */\n  bezierSmoothness: 0.5\n};\nlet GraphicsContextSystem = _GraphicsContextSystem;\n\nexport { GpuGraphicsContext, GraphicsContextRenderData, GraphicsContextSystem };\n//# sourceMappingURL=GraphicsContextSystem.mjs.map\n","import { GraphicsContextSystem } from '../GraphicsContextSystem.mjs';\n\n\"use strict\";\nconst RECURSION_LIMIT = 8;\nconst FLT_EPSILON = 11920929e-14;\nconst PATH_DISTANCE_EPSILON = 1;\nconst curveAngleToleranceEpsilon = 0.01;\nconst mAngleTolerance = 0;\nconst mCuspLimit = 0;\nfunction buildAdaptiveBezier(points, sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, smoothness) {\n  const scale = 1;\n  const smoothing = Math.min(\n    0.99,\n    // a value of 1.0 actually inverts smoothing, so we cap it at 0.99\n    Math.max(0, smoothness ?? GraphicsContextSystem.defaultOptions.bezierSmoothness)\n  );\n  let distanceTolerance = (PATH_DISTANCE_EPSILON - smoothing) / scale;\n  distanceTolerance *= distanceTolerance;\n  begin(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance);\n  return points;\n}\nfunction begin(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance) {\n  recursive(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance, 0);\n  points.push(eX, eY);\n}\nfunction recursive(x1, y1, x2, y2, x3, y3, x4, y4, points, distanceTolerance, level) {\n  if (level > RECURSION_LIMIT) {\n    return;\n  }\n  const pi = Math.PI;\n  const x12 = (x1 + x2) / 2;\n  const y12 = (y1 + y2) / 2;\n  const x23 = (x2 + x3) / 2;\n  const y23 = (y2 + y3) / 2;\n  const x34 = (x3 + x4) / 2;\n  const y34 = (y3 + y4) / 2;\n  const x123 = (x12 + x23) / 2;\n  const y123 = (y12 + y23) / 2;\n  const x234 = (x23 + x34) / 2;\n  const y234 = (y23 + y34) / 2;\n  const x1234 = (x123 + x234) / 2;\n  const y1234 = (y123 + y234) / 2;\n  if (level > 0) {\n    let dx = x4 - x1;\n    let dy = y4 - y1;\n    const d2 = Math.abs((x2 - x4) * dy - (y2 - y4) * dx);\n    const d3 = Math.abs((x3 - x4) * dy - (y3 - y4) * dx);\n    let da1;\n    let da2;\n    if (d2 > FLT_EPSILON && d3 > FLT_EPSILON) {\n      if ((d2 + d3) * (d2 + d3) <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        const a23 = Math.atan2(y3 - y2, x3 - x2);\n        da1 = Math.abs(a23 - Math.atan2(y2 - y1, x2 - x1));\n        da2 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - a23);\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da2 >= pi)\n          da2 = 2 * pi - da2;\n        if (da1 + da2 < mAngleTolerance) {\n          points.push(x1234, y1234);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x2, y2);\n            return;\n          }\n          if (da2 > mCuspLimit) {\n            points.push(x3, y3);\n            return;\n          }\n        }\n      }\n    } else if (d2 > FLT_EPSILON) {\n      if (d2 * d2 <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        da1 = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da1 < mAngleTolerance) {\n          points.push(x2, y2);\n          points.push(x3, y3);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x2, y2);\n            return;\n          }\n        }\n      }\n    } else if (d3 > FLT_EPSILON) {\n      if (d3 * d3 <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        da1 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - Math.atan2(y3 - y2, x3 - x2));\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da1 < mAngleTolerance) {\n          points.push(x2, y2);\n          points.push(x3, y3);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x3, y3);\n            return;\n          }\n        }\n      }\n    } else {\n      dx = x1234 - (x1 + x4) / 2;\n      dy = y1234 - (y1 + y4) / 2;\n      if (dx * dx + dy * dy <= distanceTolerance) {\n        points.push(x1234, y1234);\n        return;\n      }\n    }\n  }\n  recursive(x1, y1, x12, y12, x123, y123, x1234, y1234, points, distanceTolerance, level + 1);\n  recursive(x1234, y1234, x234, y234, x34, y34, x4, y4, points, distanceTolerance, level + 1);\n}\n\nexport { buildAdaptiveBezier };\n//# sourceMappingURL=buildAdaptiveBezier.mjs.map\n","import { GraphicsContextSystem } from '../GraphicsContextSystem.mjs';\n\n\"use strict\";\nconst RECURSION_LIMIT = 8;\nconst FLT_EPSILON = 11920929e-14;\nconst PATH_DISTANCE_EPSILON = 1;\nconst curveAngleToleranceEpsilon = 0.01;\nconst mAngleTolerance = 0;\nfunction buildAdaptiveQuadratic(points, sX, sY, cp1x, cp1y, eX, eY, smoothness) {\n  const scale = 1;\n  const smoothing = Math.min(\n    0.99,\n    // a value of 1.0 actually inverts smoothing, so we cap it at 0.99\n    Math.max(0, smoothness ?? GraphicsContextSystem.defaultOptions.bezierSmoothness)\n  );\n  let distanceTolerance = (PATH_DISTANCE_EPSILON - smoothing) / scale;\n  distanceTolerance *= distanceTolerance;\n  begin(sX, sY, cp1x, cp1y, eX, eY, points, distanceTolerance);\n  return points;\n}\nfunction begin(sX, sY, cp1x, cp1y, eX, eY, points, distanceTolerance) {\n  recursive(points, sX, sY, cp1x, cp1y, eX, eY, distanceTolerance, 0);\n  points.push(eX, eY);\n}\nfunction recursive(points, x1, y1, x2, y2, x3, y3, distanceTolerance, level) {\n  if (level > RECURSION_LIMIT) {\n    return;\n  }\n  const pi = Math.PI;\n  const x12 = (x1 + x2) / 2;\n  const y12 = (y1 + y2) / 2;\n  const x23 = (x2 + x3) / 2;\n  const y23 = (y2 + y3) / 2;\n  const x123 = (x12 + x23) / 2;\n  const y123 = (y12 + y23) / 2;\n  let dx = x3 - x1;\n  let dy = y3 - y1;\n  const d = Math.abs((x2 - x3) * dy - (y2 - y3) * dx);\n  if (d > FLT_EPSILON) {\n    if (d * d <= distanceTolerance * (dx * dx + dy * dy)) {\n      if (mAngleTolerance < curveAngleToleranceEpsilon) {\n        points.push(x123, y123);\n        return;\n      }\n      let da = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));\n      if (da >= pi)\n        da = 2 * pi - da;\n      if (da < mAngleTolerance) {\n        points.push(x123, y123);\n        return;\n      }\n    }\n  } else {\n    dx = x123 - (x1 + x3) / 2;\n    dy = y123 - (y1 + y3) / 2;\n    if (dx * dx + dy * dy <= distanceTolerance) {\n      points.push(x123, y123);\n      return;\n    }\n  }\n  recursive(points, x1, y1, x12, y12, x123, y123, distanceTolerance, level + 1);\n  recursive(points, x123, y123, x23, y23, x3, y3, distanceTolerance, level + 1);\n}\n\nexport { buildAdaptiveQuadratic };\n//# sourceMappingURL=buildAdaptiveQuadratic.mjs.map\n","\"use strict\";\nfunction buildArc(points, x, y, radius, start, end, clockwise, steps) {\n  let dist = Math.abs(start - end);\n  if (!clockwise && start > end) {\n    dist = 2 * Math.PI - dist;\n  } else if (clockwise && end > start) {\n    dist = 2 * Math.PI - dist;\n  }\n  steps = steps || Math.max(6, Math.floor(6 * Math.pow(radius, 1 / 3) * (dist / Math.PI)));\n  steps = Math.max(steps, 3);\n  let f = dist / steps;\n  let t = start;\n  f *= clockwise ? -1 : 1;\n  for (let i = 0; i < steps + 1; i++) {\n    const cs = Math.cos(t);\n    const sn = Math.sin(t);\n    const nx = x + cs * radius;\n    const ny = y + sn * radius;\n    points.push(nx, ny);\n    t += f;\n  }\n}\n\nexport { buildArc };\n//# sourceMappingURL=buildArc.mjs.map\n","import { buildArc } from './buildArc.mjs';\n\n\"use strict\";\nfunction buildArcTo(points, x1, y1, x2, y2, radius) {\n  const fromX = points[points.length - 2];\n  const fromY = points[points.length - 1];\n  const a1 = fromY - y1;\n  const b1 = fromX - x1;\n  const a2 = y2 - y1;\n  const b2 = x2 - x1;\n  const mm = Math.abs(a1 * b2 - b1 * a2);\n  if (mm < 1e-8 || radius === 0) {\n    if (points[points.length - 2] !== x1 || points[points.length - 1] !== y1) {\n      points.push(x1, y1);\n    }\n    return;\n  }\n  const dd = a1 * a1 + b1 * b1;\n  const cc = a2 * a2 + b2 * b2;\n  const tt = a1 * a2 + b1 * b2;\n  const k1 = radius * Math.sqrt(dd) / mm;\n  const k2 = radius * Math.sqrt(cc) / mm;\n  const j1 = k1 * tt / dd;\n  const j2 = k2 * tt / cc;\n  const cx = k1 * b2 + k2 * b1;\n  const cy = k1 * a2 + k2 * a1;\n  const px = b1 * (k2 + j1);\n  const py = a1 * (k2 + j1);\n  const qx = b2 * (k1 + j2);\n  const qy = a2 * (k1 + j2);\n  const startAngle = Math.atan2(py - cy, px - cx);\n  const endAngle = Math.atan2(qy - cy, qx - cx);\n  buildArc(\n    points,\n    cx + x1,\n    cy + y1,\n    radius,\n    startAngle,\n    endAngle,\n    b1 * a2 > b2 * a1\n  );\n}\n\nexport { buildArcTo };\n//# sourceMappingURL=buildArcTo.mjs.map\n","import { buildAdaptiveBezier } from './buildAdaptiveBezier.mjs';\n\n\"use strict\";\nconst TAU = Math.PI * 2;\nconst out = {\n  centerX: 0,\n  centerY: 0,\n  ang1: 0,\n  ang2: 0\n};\nconst mapToEllipse = ({ x, y }, rx, ry, cosPhi, sinPhi, centerX, centerY, out2) => {\n  x *= rx;\n  y *= ry;\n  const xp = cosPhi * x - sinPhi * y;\n  const yp = sinPhi * x + cosPhi * y;\n  out2.x = xp + centerX;\n  out2.y = yp + centerY;\n  return out2;\n};\nfunction approxUnitArc(ang1, ang2) {\n  const a1 = ang2 === -1.5707963267948966 ? -0.551915024494 : 4 / 3 * Math.tan(ang2 / 4);\n  const a = ang2 === 1.5707963267948966 ? 0.551915024494 : a1;\n  const x1 = Math.cos(ang1);\n  const y1 = Math.sin(ang1);\n  const x2 = Math.cos(ang1 + ang2);\n  const y2 = Math.sin(ang1 + ang2);\n  return [\n    {\n      x: x1 - y1 * a,\n      y: y1 + x1 * a\n    },\n    {\n      x: x2 + y2 * a,\n      y: y2 - x2 * a\n    },\n    {\n      x: x2,\n      y: y2\n    }\n  ];\n}\nconst vectorAngle = (ux, uy, vx, vy) => {\n  const sign = ux * vy - uy * vx < 0 ? -1 : 1;\n  let dot = ux * vx + uy * vy;\n  if (dot > 1) {\n    dot = 1;\n  }\n  if (dot < -1) {\n    dot = -1;\n  }\n  return sign * Math.acos(dot);\n};\nconst getArcCenter = (px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinPhi, cosPhi, pxp, pyp, out2) => {\n  const rxSq = Math.pow(rx, 2);\n  const rySq = Math.pow(ry, 2);\n  const pxpSq = Math.pow(pxp, 2);\n  const pypSq = Math.pow(pyp, 2);\n  let radicant = rxSq * rySq - rxSq * pypSq - rySq * pxpSq;\n  if (radicant < 0) {\n    radicant = 0;\n  }\n  radicant /= rxSq * pypSq + rySq * pxpSq;\n  radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n  const centerXp = radicant * rx / ry * pyp;\n  const centerYp = radicant * -ry / rx * pxp;\n  const centerX = cosPhi * centerXp - sinPhi * centerYp + (px + cx) / 2;\n  const centerY = sinPhi * centerXp + cosPhi * centerYp + (py + cy) / 2;\n  const vx1 = (pxp - centerXp) / rx;\n  const vy1 = (pyp - centerYp) / ry;\n  const vx2 = (-pxp - centerXp) / rx;\n  const vy2 = (-pyp - centerYp) / ry;\n  const ang1 = vectorAngle(1, 0, vx1, vy1);\n  let ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n  if (sweepFlag === 0 && ang2 > 0) {\n    ang2 -= TAU;\n  }\n  if (sweepFlag === 1 && ang2 < 0) {\n    ang2 += TAU;\n  }\n  out2.centerX = centerX;\n  out2.centerY = centerY;\n  out2.ang1 = ang1;\n  out2.ang2 = ang2;\n};\nfunction buildArcToSvg(points, px, py, cx, cy, rx, ry, xAxisRotation = 0, largeArcFlag = 0, sweepFlag = 0) {\n  if (rx === 0 || ry === 0) {\n    return;\n  }\n  const sinPhi = Math.sin(xAxisRotation * TAU / 360);\n  const cosPhi = Math.cos(xAxisRotation * TAU / 360);\n  const pxp = cosPhi * (px - cx) / 2 + sinPhi * (py - cy) / 2;\n  const pyp = -sinPhi * (px - cx) / 2 + cosPhi * (py - cy) / 2;\n  if (pxp === 0 && pyp === 0) {\n    return;\n  }\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  const lambda = Math.pow(pxp, 2) / Math.pow(rx, 2) + Math.pow(pyp, 2) / Math.pow(ry, 2);\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n  getArcCenter(\n    px,\n    py,\n    cx,\n    cy,\n    rx,\n    ry,\n    largeArcFlag,\n    sweepFlag,\n    sinPhi,\n    cosPhi,\n    pxp,\n    pyp,\n    out\n  );\n  let { ang1, ang2 } = out;\n  const { centerX, centerY } = out;\n  let ratio = Math.abs(ang2) / (TAU / 4);\n  if (Math.abs(1 - ratio) < 1e-7) {\n    ratio = 1;\n  }\n  const segments = Math.max(Math.ceil(ratio), 1);\n  ang2 /= segments;\n  let lastX = points[points.length - 2];\n  let lastY = points[points.length - 1];\n  const outCurvePoint = { x: 0, y: 0 };\n  for (let i = 0; i < segments; i++) {\n    const curve = approxUnitArc(ang1, ang2);\n    const { x: x1, y: y1 } = mapToEllipse(curve[0], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    const { x: x2, y: y2 } = mapToEllipse(curve[1], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    const { x, y } = mapToEllipse(curve[2], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    buildAdaptiveBezier(\n      points,\n      lastX,\n      lastY,\n      x1,\n      y1,\n      x2,\n      y2,\n      x,\n      y\n    );\n    lastX = x;\n    lastY = y;\n    ang1 += ang2;\n  }\n}\n\nexport { buildArcToSvg };\n//# sourceMappingURL=buildArcToSvg.mjs.map\n","\"use strict\";\nfunction roundedShapeArc(g, points, radius) {\n  const vecFrom = (p, pp) => {\n    const x = pp.x - p.x;\n    const y = pp.y - p.y;\n    const len = Math.sqrt(x * x + y * y);\n    const nx = x / len;\n    const ny = y / len;\n    return { len, nx, ny };\n  };\n  const sharpCorner = (i, p) => {\n    if (i === 0) {\n      g.moveTo(p.x, p.y);\n    } else {\n      g.lineTo(p.x, p.y);\n    }\n  };\n  let p1 = points[points.length - 1];\n  for (let i = 0; i < points.length; i++) {\n    const p2 = points[i % points.length];\n    const pRadius = p2.radius ?? radius;\n    if (pRadius <= 0) {\n      sharpCorner(i, p2);\n      p1 = p2;\n      continue;\n    }\n    const p3 = points[(i + 1) % points.length];\n    const v1 = vecFrom(p2, p1);\n    const v2 = vecFrom(p2, p3);\n    if (v1.len < 1e-4 || v2.len < 1e-4) {\n      sharpCorner(i, p2);\n      p1 = p2;\n      continue;\n    }\n    let angle = Math.asin(v1.nx * v2.ny - v1.ny * v2.nx);\n    let radDirection = 1;\n    let drawDirection = false;\n    if (v1.nx * v2.nx - v1.ny * -v2.ny < 0) {\n      if (angle < 0) {\n        angle = Math.PI + angle;\n      } else {\n        angle = Math.PI - angle;\n        radDirection = -1;\n        drawDirection = true;\n      }\n    } else if (angle > 0) {\n      radDirection = -1;\n      drawDirection = true;\n    }\n    const halfAngle = angle / 2;\n    let cRadius;\n    let lenOut = Math.abs(\n      Math.cos(halfAngle) * pRadius / Math.sin(halfAngle)\n    );\n    if (lenOut > Math.min(v1.len / 2, v2.len / 2)) {\n      lenOut = Math.min(v1.len / 2, v2.len / 2);\n      cRadius = Math.abs(lenOut * Math.sin(halfAngle) / Math.cos(halfAngle));\n    } else {\n      cRadius = pRadius;\n    }\n    const cX = p2.x + v2.nx * lenOut + -v2.ny * cRadius * radDirection;\n    const cY = p2.y + v2.ny * lenOut + v2.nx * cRadius * radDirection;\n    const startAngle = Math.atan2(v1.ny, v1.nx) + Math.PI / 2 * radDirection;\n    const endAngle = Math.atan2(v2.ny, v2.nx) - Math.PI / 2 * radDirection;\n    if (i === 0) {\n      g.moveTo(\n        cX + Math.cos(startAngle) * cRadius,\n        cY + Math.sin(startAngle) * cRadius\n      );\n    }\n    g.arc(cX, cY, cRadius, startAngle, endAngle, drawDirection);\n    p1 = p2;\n  }\n}\nfunction roundedShapeQuadraticCurve(g, points, radius, smoothness) {\n  const distance = (p1, p2) => Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);\n  const pointLerp = (p1, p2, t) => ({\n    x: p1.x + (p2.x - p1.x) * t,\n    y: p1.y + (p2.y - p1.y) * t\n  });\n  const numPoints = points.length;\n  for (let i = 0; i < numPoints; i++) {\n    const thisPoint = points[(i + 1) % numPoints];\n    const pRadius = thisPoint.radius ?? radius;\n    if (pRadius <= 0) {\n      if (i === 0) {\n        g.moveTo(thisPoint.x, thisPoint.y);\n      } else {\n        g.lineTo(thisPoint.x, thisPoint.y);\n      }\n      continue;\n    }\n    const lastPoint = points[i];\n    const nextPoint = points[(i + 2) % numPoints];\n    const lastEdgeLength = distance(lastPoint, thisPoint);\n    let start;\n    if (lastEdgeLength < 1e-4) {\n      start = thisPoint;\n    } else {\n      const lastOffsetDistance = Math.min(lastEdgeLength / 2, pRadius);\n      start = pointLerp(\n        thisPoint,\n        lastPoint,\n        lastOffsetDistance / lastEdgeLength\n      );\n    }\n    const nextEdgeLength = distance(nextPoint, thisPoint);\n    let end;\n    if (nextEdgeLength < 1e-4) {\n      end = thisPoint;\n    } else {\n      const nextOffsetDistance = Math.min(nextEdgeLength / 2, pRadius);\n      end = pointLerp(\n        thisPoint,\n        nextPoint,\n        nextOffsetDistance / nextEdgeLength\n      );\n    }\n    if (i === 0) {\n      g.moveTo(start.x, start.y);\n    } else {\n      g.lineTo(start.x, start.y);\n    }\n    g.quadraticCurveTo(thisPoint.x, thisPoint.y, end.x, end.y, smoothness);\n  }\n}\n\nexport { roundedShapeArc, roundedShapeQuadraticCurve };\n//# sourceMappingURL=roundShape.mjs.map\n","import { Circle } from '../../../../maths/shapes/Circle.mjs';\nimport { Ellipse } from '../../../../maths/shapes/Ellipse.mjs';\nimport { Polygon } from '../../../../maths/shapes/Polygon.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { RoundedRectangle } from '../../../../maths/shapes/RoundedRectangle.mjs';\nimport { Bounds } from '../../../container/bounds/Bounds.mjs';\nimport { buildAdaptiveBezier } from '../buildCommands/buildAdaptiveBezier.mjs';\nimport { buildAdaptiveQuadratic } from '../buildCommands/buildAdaptiveQuadratic.mjs';\nimport { buildArc } from '../buildCommands/buildArc.mjs';\nimport { buildArcTo } from '../buildCommands/buildArcTo.mjs';\nimport { buildArcToSvg } from '../buildCommands/buildArcToSvg.mjs';\nimport { roundedShapeQuadraticCurve, roundedShapeArc } from './roundShape.mjs';\n\n\"use strict\";\nconst tempRectangle = new Rectangle();\nclass ShapePath {\n  constructor(graphicsPath2D) {\n    /** The list of shape primitives that make up the path. */\n    this.shapePrimitives = [];\n    this._currentPoly = null;\n    this._bounds = new Bounds();\n    this._graphicsPath2D = graphicsPath2D;\n  }\n  /**\n   * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n   * @param x - The x-coordinate for the starting point.\n   * @param y - The y-coordinate for the starting point.\n   * @returns The instance of the current object for chaining.\n   */\n  moveTo(x, y) {\n    this.startPoly(x, y);\n    return this;\n  }\n  /**\n   * Connects the current point to a new point with a straight line. This method updates the current path.\n   * @param x - The x-coordinate of the new point to connect to.\n   * @param y - The y-coordinate of the new point to connect to.\n   * @returns The instance of the current object for chaining.\n   */\n  lineTo(x, y) {\n    this._ensurePoly();\n    const points = this._currentPoly.points;\n    const fromX = points[points.length - 2];\n    const fromY = points[points.length - 1];\n    if (fromX !== x || fromY !== y) {\n      points.push(x, y);\n    }\n    return this;\n  }\n  /**\n   * Adds an arc to the path. The arc is centered at (x, y)\n   *  position with radius `radius` starting at `startAngle` and ending at `endAngle`.\n   * @param x - The x-coordinate of the arc's center.\n   * @param y - The y-coordinate of the arc's center.\n   * @param radius - The radius of the arc.\n   * @param startAngle - The starting angle of the arc, in radians.\n   * @param endAngle - The ending angle of the arc, in radians.\n   * @param counterclockwise - Specifies whether the arc should be drawn in the anticlockwise direction. False by default.\n   * @returns The instance of the current object for chaining.\n   */\n  arc(x, y, radius, startAngle, endAngle, counterclockwise) {\n    this._ensurePoly(false);\n    const points = this._currentPoly.points;\n    buildArc(points, x, y, radius, startAngle, endAngle, counterclockwise);\n    return this;\n  }\n  /**\n   * Adds an arc to the path with the arc tangent to the line joining two specified points.\n   * The arc radius is specified by `radius`.\n   * @param x1 - The x-coordinate of the first point.\n   * @param y1 - The y-coordinate of the first point.\n   * @param x2 - The x-coordinate of the second point.\n   * @param y2 - The y-coordinate of the second point.\n   * @param radius - The radius of the arc.\n   * @returns The instance of the current object for chaining.\n   */\n  arcTo(x1, y1, x2, y2, radius) {\n    this._ensurePoly();\n    const points = this._currentPoly.points;\n    buildArcTo(points, x1, y1, x2, y2, radius);\n    return this;\n  }\n  /**\n   * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n   * @param rx - The x-radius of the ellipse.\n   * @param ry - The y-radius of the ellipse.\n   * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n   * to the x-axis of the coordinate system, in degrees.\n   * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n   * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n   * @param x - The x-coordinate of the arc's end point.\n   * @param y - The y-coordinate of the arc's end point.\n   * @returns The instance of the current object for chaining.\n   */\n  arcToSvg(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\n    const points = this._currentPoly.points;\n    buildArcToSvg(\n      points,\n      this._currentPoly.lastX,\n      this._currentPoly.lastY,\n      x,\n      y,\n      rx,\n      ry,\n      xAxisRotation,\n      largeArcFlag,\n      sweepFlag\n    );\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires three points: the first two are control points and the third one is the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the first control point.\n   * @param cp1y - The y-coordinate of the first control point.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y, smoothness) {\n    this._ensurePoly();\n    const currentPoly = this._currentPoly;\n    buildAdaptiveBezier(\n      this._currentPoly.points,\n      currentPoly.lastX,\n      currentPoly.lastY,\n      cp1x,\n      cp1y,\n      cp2x,\n      cp2y,\n      x,\n      y,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the control point.\n   * @param cp1y - The y-coordinate of the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothing - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveTo(cp1x, cp1y, x, y, smoothing) {\n    this._ensurePoly();\n    const currentPoly = this._currentPoly;\n    buildAdaptiveQuadratic(\n      this._currentPoly.points,\n      currentPoly.lastX,\n      currentPoly.lastY,\n      cp1x,\n      cp1y,\n      x,\n      y,\n      smoothing\n    );\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this.endPoly(true);\n    return this;\n  }\n  /**\n   * Adds another path to the current path. This method allows for the combination of multiple paths into one.\n   * @param path - The `GraphicsPath` object representing the path to add.\n   * @param transform - An optional `Matrix` object to apply a transformation to the path before adding it.\n   * @returns The instance of the current object for chaining.\n   */\n  addPath(path, transform) {\n    this.endPoly();\n    if (transform && !transform.isIdentity()) {\n      path = path.clone(true);\n      path.transform(transform);\n    }\n    for (let i = 0; i < path.instructions.length; i++) {\n      const instruction = path.instructions[i];\n      this[instruction.action](...instruction.data);\n    }\n    return this;\n  }\n  /**\n   * Finalizes the drawing of the current path. Optionally, it can close the path.\n   * @param closePath - A boolean indicating whether to close the path after finishing. False by default.\n   */\n  finish(closePath = false) {\n    this.endPoly(closePath);\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h, transform) {\n    this.drawShape(new Rectangle(x, y, w, h), transform);\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius, transform) {\n    this.drawShape(new Circle(x, y, radius), transform);\n    return this;\n  }\n  /**\n   * Draws a polygon shape. This method allows for the creation of complex polygons by specifying a sequence of points.\n   * @param points - An array of numbers, or or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n   * representing the x and y coordinates of the polygon's vertices, in sequence.\n   * @param close - A boolean indicating whether to close the polygon path. True by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  poly(points, close, transform) {\n    const polygon = new Polygon(points);\n    polygon.closePath = close;\n    this.drawShape(polygon, transform);\n    return this;\n  }\n  /**\n   * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  regularPoly(x, y, radius, sides, rotation = 0, transform) {\n    sides = Math.max(sides | 0, 3);\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const delta = Math.PI * 2 / sides;\n    const polygon = [];\n    for (let i = 0; i < sides; i++) {\n      const angle = i * delta + startAngle;\n      polygon.push(\n        x + radius * Math.cos(angle),\n        y + radius * Math.sin(angle)\n      );\n    }\n    this.poly(polygon, true, transform);\n    return this;\n  }\n  /**\n   * Draws a polygon with rounded corners.\n   * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param corner - The radius of the rounding of the corners.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param smoothness - Optional parameter to adjust the smoothness of the rounding.\n   * @returns The instance of the current object for chaining.\n   */\n  roundPoly(x, y, radius, sides, corner, rotation = 0, smoothness) {\n    sides = Math.max(sides | 0, 3);\n    if (corner <= 0) {\n      return this.regularPoly(x, y, radius, sides, rotation);\n    }\n    const sideLength = radius * Math.sin(Math.PI / sides) - 1e-3;\n    corner = Math.min(corner, sideLength);\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const delta = Math.PI * 2 / sides;\n    const internalAngle = (sides - 2) * Math.PI / sides / 2;\n    for (let i = 0; i < sides; i++) {\n      const angle = i * delta + startAngle;\n      const x0 = x + radius * Math.cos(angle);\n      const y0 = y + radius * Math.sin(angle);\n      const a1 = angle + Math.PI + internalAngle;\n      const a2 = angle - Math.PI - internalAngle;\n      const x1 = x0 + corner * Math.cos(a1);\n      const y1 = y0 + corner * Math.sin(a1);\n      const x3 = x0 + corner * Math.cos(a2);\n      const y3 = y0 + corner * Math.sin(a2);\n      if (i === 0) {\n        this.moveTo(x1, y1);\n      } else {\n        this.lineTo(x1, y1);\n      }\n      this.quadraticCurveTo(x0, y0, x3, y3, smoothness);\n    }\n    return this.closePath();\n  }\n  /**\n   * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n   * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n   * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n   * A minimum of 3 points is required.\n   * @param radius - The default radius for the corners.\n   * This radius is applied to all corners unless overridden in `points`.\n   * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n   *  method instead of an arc method. Defaults to false.\n   * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n   * Higher values make the curve smoother.\n   * @returns The instance of the current object for chaining.\n   */\n  roundShape(points, radius, useQuadratic = false, smoothness) {\n    if (points.length < 3) {\n      return this;\n    }\n    if (useQuadratic) {\n      roundedShapeQuadraticCurve(this, points, radius, smoothness);\n    } else {\n      roundedShapeArc(this, points, radius);\n    }\n    return this.closePath();\n  }\n  /**\n   * Draw Rectangle with fillet corners. This is much like rounded rectangle\n   * however it support negative numbers as well for the corner radius.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param fillet - accept negative or positive values\n   */\n  filletRect(x, y, width, height, fillet) {\n    if (fillet === 0) {\n      return this.rect(x, y, width, height);\n    }\n    const maxFillet = Math.min(width, height) / 2;\n    const inset = Math.min(maxFillet, Math.max(-maxFillet, fillet));\n    const right = x + width;\n    const bottom = y + height;\n    const dir = inset < 0 ? -inset : 0;\n    const size = Math.abs(inset);\n    return this.moveTo(x, y + size).arcTo(x + dir, y + dir, x + size, y, size).lineTo(right - size, y).arcTo(right - dir, y + dir, right, y + size, size).lineTo(right, bottom - size).arcTo(right - dir, bottom - dir, x + width - size, bottom, size).lineTo(x + size, bottom).arcTo(x + dir, bottom - dir, x, bottom - size, size).closePath();\n  }\n  /**\n   * Draw Rectangle with chamfer corners. These are angled corners.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param chamfer - non-zero real number, size of corner cutout\n   * @param transform\n   */\n  chamferRect(x, y, width, height, chamfer, transform) {\n    if (chamfer <= 0) {\n      return this.rect(x, y, width, height);\n    }\n    const inset = Math.min(chamfer, Math.min(width, height) / 2);\n    const right = x + width;\n    const bottom = y + height;\n    const points = [\n      x + inset,\n      y,\n      right - inset,\n      y,\n      right,\n      y + inset,\n      right,\n      bottom - inset,\n      right - inset,\n      bottom,\n      x + inset,\n      bottom,\n      x,\n      bottom - inset,\n      x,\n      y + inset\n    ];\n    for (let i = points.length - 1; i >= 2; i -= 2) {\n      if (points[i] === points[i - 2] && points[i - 1] === points[i - 3]) {\n        points.splice(i - 1, 2);\n      }\n    }\n    return this.poly(points, true, transform);\n  }\n  /**\n   * Draws an ellipse at the specified location and with the given x and y radii.\n   * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n   * @param x - The x-coordinate of the center of the ellipse.\n   * @param y - The y-coordinate of the center of the ellipse.\n   * @param radiusX - The horizontal radius of the ellipse.\n   * @param radiusY - The vertical radius of the ellipse.\n   * @param transform - An optional `Matrix` object to apply a transformation to the ellipse. This can include rotations.\n   * @returns The instance of the current object for chaining.\n   */\n  ellipse(x, y, radiusX, radiusY, transform) {\n    this.drawShape(new Ellipse(x, y, radiusX, radiusY), transform);\n    return this;\n  }\n  /**\n   * Draws a rectangle with rounded corners.\n   * The corner radius can be specified to determine how rounded the corners should be.\n   * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  roundRect(x, y, w, h, radius, transform) {\n    this.drawShape(new RoundedRectangle(x, y, w, h, radius), transform);\n    return this;\n  }\n  /**\n   * Draws a given shape on the canvas.\n   * This is a generic method that can draw any type of shape specified by the `ShapePrimitive` parameter.\n   * An optional transformation matrix can be applied to the shape, allowing for complex transformations.\n   * @param shape - The shape to draw, defined as a `ShapePrimitive` object.\n   * @param matrix - An optional `Matrix` for transforming the shape. This can include rotations,\n   * scaling, and translations.\n   * @returns The instance of the current object for chaining.\n   */\n  drawShape(shape, matrix) {\n    this.endPoly();\n    this.shapePrimitives.push({ shape, transform: matrix });\n    return this;\n  }\n  /**\n   * Starts a new polygon path from the specified starting point.\n   * This method initializes a new polygon or ends the current one if it exists.\n   * @param x - The x-coordinate of the starting point of the new polygon.\n   * @param y - The y-coordinate of the starting point of the new polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  startPoly(x, y) {\n    let currentPoly = this._currentPoly;\n    if (currentPoly) {\n      this.endPoly();\n    }\n    currentPoly = new Polygon();\n    currentPoly.points.push(x, y);\n    this._currentPoly = currentPoly;\n    return this;\n  }\n  /**\n   * Ends the current polygon path. If `closePath` is set to true,\n   * the path is closed by connecting the last point to the first one.\n   * This method finalizes the current polygon and prepares it for drawing or adding to the shape primitives.\n   * @param closePath - A boolean indicating whether to close the polygon by connecting the last point\n   *  back to the starting point. False by default.\n   * @returns The instance of the current object for chaining.\n   */\n  endPoly(closePath = false) {\n    const shape = this._currentPoly;\n    if (shape && shape.points.length > 2) {\n      shape.closePath = closePath;\n      this.shapePrimitives.push({ shape });\n    }\n    this._currentPoly = null;\n    return this;\n  }\n  _ensurePoly(start = true) {\n    if (this._currentPoly)\n      return;\n    this._currentPoly = new Polygon();\n    if (start) {\n      const lastShape = this.shapePrimitives[this.shapePrimitives.length - 1];\n      if (lastShape) {\n        let lx = lastShape.shape.x;\n        let ly = lastShape.shape.y;\n        if (!lastShape.transform.isIdentity()) {\n          const t = lastShape.transform;\n          const tempX = lx;\n          lx = t.a * lx + t.c * ly + t.tx;\n          ly = t.b * tempX + t.d * ly + t.ty;\n        }\n        this._currentPoly.points.push(lx, ly);\n      } else {\n        this._currentPoly.points.push(0, 0);\n      }\n    }\n  }\n  /** Builds the path. */\n  buildPath() {\n    const path = this._graphicsPath2D;\n    this.shapePrimitives.length = 0;\n    this._currentPoly = null;\n    for (let i = 0; i < path.instructions.length; i++) {\n      const instruction = path.instructions[i];\n      this[instruction.action](...instruction.data);\n    }\n    this.finish();\n  }\n  /** Gets the bounds of the path. */\n  get bounds() {\n    const bounds = this._bounds;\n    bounds.clear();\n    const shapePrimitives = this.shapePrimitives;\n    for (let i = 0; i < shapePrimitives.length; i++) {\n      const shapePrimitive = shapePrimitives[i];\n      const boundsRect = shapePrimitive.shape.getBounds(tempRectangle);\n      if (shapePrimitive.transform) {\n        bounds.addRect(boundsRect, shapePrimitive.transform);\n      } else {\n        bounds.addRect(boundsRect);\n      }\n    }\n    return bounds;\n  }\n}\n\nexport { ShapePath };\n//# sourceMappingURL=ShapePath.mjs.map\n","import { Point } from '../../../../maths/point/Point.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { SVGToGraphicsPath } from '../svg/SVGToGraphicsPath.mjs';\nimport { ShapePath } from './ShapePath.mjs';\n\n\"use strict\";\nclass GraphicsPath {\n  /**\n   * Creates a `GraphicsPath` instance optionally from an SVG path string or an array of `PathInstruction`.\n   * @param instructions - An SVG path string or an array of `PathInstruction` objects.\n   */\n  constructor(instructions) {\n    this.instructions = [];\n    this.uid = uid(\"graphicsPath\");\n    this._dirty = true;\n    if (typeof instructions === \"string\") {\n      SVGToGraphicsPath(instructions, this);\n    } else {\n      this.instructions = instructions?.slice() ?? [];\n    }\n  }\n  /**\n   * Provides access to the internal shape path, ensuring it is up-to-date with the current instructions.\n   * @returns The `ShapePath` instance associated with this `GraphicsPath`.\n   */\n  get shapePath() {\n    if (!this._shapePath) {\n      this._shapePath = new ShapePath(this);\n    }\n    if (this._dirty) {\n      this._dirty = false;\n      this._shapePath.buildPath();\n    }\n    return this._shapePath;\n  }\n  /**\n   * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n   * @param path - The `GraphicsPath` to add.\n   * @param transform - An optional transformation to apply to the added path.\n   * @returns The instance of the current object for chaining.\n   */\n  addPath(path, transform) {\n    path = path.clone();\n    this.instructions.push({ action: \"addPath\", data: [path, transform] });\n    this._dirty = true;\n    return this;\n  }\n  arc(...args) {\n    this.instructions.push({ action: \"arc\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  arcTo(...args) {\n    this.instructions.push({ action: \"arcTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  arcToSvg(...args) {\n    this.instructions.push({ action: \"arcToSvg\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  bezierCurveTo(...args) {\n    this.instructions.push({ action: \"bezierCurveTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires two points: the second control point and the end point. The first control point is assumed to be\n   * The starting point is the last point in the current path.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveToShort(cp2x, cp2y, x, y, smoothness) {\n    const last = this.instructions[this.instructions.length - 1];\n    const lastPoint = this.getLastPoint(Point.shared);\n    let cp1x = 0;\n    let cp1y = 0;\n    if (!last || last.action !== \"bezierCurveTo\") {\n      cp1x = lastPoint.x;\n      cp1y = lastPoint.y;\n    } else {\n      cp1x = last.data[2];\n      cp1y = last.data[3];\n      const currentX = lastPoint.x;\n      const currentY = lastPoint.y;\n      cp1x = currentX + (currentX - cp1x);\n      cp1y = currentY + (currentY - cp1y);\n    }\n    this.instructions.push({ action: \"bezierCurveTo\", data: [cp1x, cp1y, cp2x, cp2y, x, y, smoothness] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this.instructions.push({ action: \"closePath\", data: [] });\n    this._dirty = true;\n    return this;\n  }\n  ellipse(...args) {\n    this.instructions.push({ action: \"ellipse\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  lineTo(...args) {\n    this.instructions.push({ action: \"lineTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  moveTo(...args) {\n    this.instructions.push({ action: \"moveTo\", data: args });\n    return this;\n  }\n  quadraticCurveTo(...args) {\n    this.instructions.push({ action: \"quadraticCurveTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It uses the previous point as the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveToShort(x, y, smoothness) {\n    const last = this.instructions[this.instructions.length - 1];\n    const lastPoint = this.getLastPoint(Point.shared);\n    let cpx1 = 0;\n    let cpy1 = 0;\n    if (!last || last.action !== \"quadraticCurveTo\") {\n      cpx1 = lastPoint.x;\n      cpy1 = lastPoint.y;\n    } else {\n      cpx1 = last.data[0];\n      cpy1 = last.data[1];\n      const currentX = lastPoint.x;\n      const currentY = lastPoint.y;\n      cpx1 = currentX + (currentX - cpx1);\n      cpy1 = currentY + (currentY - cpy1);\n    }\n    this.instructions.push({ action: \"quadraticCurveTo\", data: [cpx1, cpy1, x, y, smoothness] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h, transform) {\n    this.instructions.push({ action: \"rect\", data: [x, y, w, h, transform] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius, transform) {\n    this.instructions.push({ action: \"circle\", data: [x, y, radius, transform] });\n    this._dirty = true;\n    return this;\n  }\n  roundRect(...args) {\n    this.instructions.push({ action: \"roundRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  poly(...args) {\n    this.instructions.push({ action: \"poly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  regularPoly(...args) {\n    this.instructions.push({ action: \"regularPoly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  roundPoly(...args) {\n    this.instructions.push({ action: \"roundPoly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  roundShape(...args) {\n    this.instructions.push({ action: \"roundShape\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  filletRect(...args) {\n    this.instructions.push({ action: \"filletRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  chamferRect(...args) {\n    this.instructions.push({ action: \"chamferRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a star shape centered at a specified location. This method allows for the creation\n   *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n   * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n   * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n   * @param x - The x-coordinate of the center of the star.\n   * @param y - The y-coordinate of the center of the star.\n   * @param points - The number of points of the star.\n   * @param radius - The outer radius of the star (distance from the center to the outer points).\n   * @param innerRadius - Optional. The inner radius of the star\n   * (distance from the center to the inner points between the outer points).\n   * If not provided, defaults to half of the `radius`.\n   * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n   * Defaults to 0, meaning one point is directly upward.\n   * @param transform - An optional `Matrix` object to apply a transformation to the star.\n   * This can include rotations, scaling, and translations.\n   * @returns The instance of the current object for chaining further drawing commands.\n   */\n  // eslint-disable-next-line max-len\n  star(x, y, points, radius, innerRadius, rotation, transform) {\n    innerRadius = innerRadius || radius / 2;\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const len = points * 2;\n    const delta = Math.PI * 2 / len;\n    const polygon = [];\n    for (let i = 0; i < len; i++) {\n      const r = i % 2 ? innerRadius : radius;\n      const angle = i * delta + startAngle;\n      polygon.push(\n        x + r * Math.cos(angle),\n        y + r * Math.sin(angle)\n      );\n    }\n    this.poly(polygon, true, transform);\n    return this;\n  }\n  /**\n   * Creates a copy of the current `GraphicsPath` instance. This method supports both shallow and deep cloning.\n   * A shallow clone copies the reference of the instructions array, while a deep clone creates a new array and\n   * copies each instruction individually, ensuring that modifications to the instructions of the cloned `GraphicsPath`\n   * do not affect the original `GraphicsPath` and vice versa.\n   * @param deep - A boolean flag indicating whether the clone should be deep.\n   * @returns A new `GraphicsPath` instance that is a clone of the current instance.\n   */\n  clone(deep = false) {\n    const newGraphicsPath2D = new GraphicsPath();\n    if (!deep) {\n      newGraphicsPath2D.instructions = this.instructions.slice();\n    } else {\n      for (let i = 0; i < this.instructions.length; i++) {\n        const instruction = this.instructions[i];\n        newGraphicsPath2D.instructions.push({ action: instruction.action, data: instruction.data.slice() });\n      }\n    }\n    return newGraphicsPath2D;\n  }\n  clear() {\n    this.instructions.length = 0;\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Applies a transformation matrix to all drawing instructions within the `GraphicsPath`.\n   * This method enables the modification of the path's geometry according to the provided\n   * transformation matrix, which can include translations, rotations, scaling, and skewing.\n   *\n   * Each drawing instruction in the path is updated to reflect the transformation,\n   * ensuring the visual representation of the path is consistent with the applied matrix.\n   *\n   * Note: The transformation is applied directly to the coordinates and control points of the drawing instructions,\n   * not to the path as a whole. This means the transformation's effects are baked into the individual instructions,\n   * allowing for fine-grained control over the path's appearance.\n   * @param matrix - A `Matrix` object representing the transformation to apply.\n   * @returns The instance of the current object for chaining further operations.\n   */\n  transform(matrix) {\n    if (matrix.isIdentity())\n      return this;\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    let x = 0;\n    let y = 0;\n    let cpx1 = 0;\n    let cpy1 = 0;\n    let cpx2 = 0;\n    let cpy2 = 0;\n    let rx = 0;\n    let ry = 0;\n    for (let i = 0; i < this.instructions.length; i++) {\n      const instruction = this.instructions[i];\n      const data = instruction.data;\n      switch (instruction.action) {\n        case \"moveTo\":\n        case \"lineTo\":\n          x = data[0];\n          y = data[1];\n          data[0] = a * x + c * y + tx;\n          data[1] = b * x + d * y + ty;\n          break;\n        case \"bezierCurveTo\":\n          cpx1 = data[0];\n          cpy1 = data[1];\n          cpx2 = data[2];\n          cpy2 = data[3];\n          x = data[4];\n          y = data[5];\n          data[0] = a * cpx1 + c * cpy1 + tx;\n          data[1] = b * cpx1 + d * cpy1 + ty;\n          data[2] = a * cpx2 + c * cpy2 + tx;\n          data[3] = b * cpx2 + d * cpy2 + ty;\n          data[4] = a * x + c * y + tx;\n          data[5] = b * x + d * y + ty;\n          break;\n        case \"quadraticCurveTo\":\n          cpx1 = data[0];\n          cpy1 = data[1];\n          x = data[2];\n          y = data[3];\n          data[0] = a * cpx1 + c * cpy1 + tx;\n          data[1] = b * cpx1 + d * cpy1 + ty;\n          data[2] = a * x + c * y + tx;\n          data[3] = b * x + d * y + ty;\n          break;\n        case \"arcToSvg\":\n          x = data[5];\n          y = data[6];\n          rx = data[0];\n          ry = data[1];\n          data[0] = a * rx + c * ry;\n          data[1] = b * rx + d * ry;\n          data[5] = a * x + c * y + tx;\n          data[6] = b * x + d * y + ty;\n          break;\n        case \"circle\":\n          data[4] = adjustTransform(data[3], matrix);\n          break;\n        case \"rect\":\n          data[4] = adjustTransform(data[4], matrix);\n          break;\n        case \"ellipse\":\n          data[8] = adjustTransform(data[8], matrix);\n          break;\n        case \"roundRect\":\n          data[5] = adjustTransform(data[5], matrix);\n          break;\n        case \"addPath\":\n          data[0].transform(matrix);\n          break;\n        case \"poly\":\n          data[2] = adjustTransform(data[2], matrix);\n          break;\n        default:\n          warn(\"unknown transform action\", instruction.action);\n          break;\n      }\n    }\n    this._dirty = true;\n    return this;\n  }\n  get bounds() {\n    return this.shapePath.bounds;\n  }\n  /**\n   * Retrieves the last point from the current drawing instructions in the `GraphicsPath`.\n   * This method is useful for operations that depend on the path's current endpoint,\n   * such as connecting subsequent shapes or paths. It supports various drawing instructions,\n   * ensuring the last point's position is accurately determined regardless of the path's complexity.\n   *\n   * If the last instruction is a `closePath`, the method iterates backward through the instructions\n   *  until it finds an actionable instruction that defines a point (e.g., `moveTo`, `lineTo`,\n   * `quadraticCurveTo`, etc.). For compound paths added via `addPath`, it recursively retrieves\n   * the last point from the nested path.\n   * @param out - A `Point` object where the last point's coordinates will be stored.\n   * This object is modified directly to contain the result.\n   * @returns The `Point` object containing the last point's coordinates.\n   */\n  getLastPoint(out) {\n    let index = this.instructions.length - 1;\n    let lastInstruction = this.instructions[index];\n    if (!lastInstruction) {\n      out.x = 0;\n      out.y = 0;\n      return out;\n    }\n    while (lastInstruction.action === \"closePath\") {\n      index--;\n      if (index < 0) {\n        out.x = 0;\n        out.y = 0;\n        return out;\n      }\n      lastInstruction = this.instructions[index];\n    }\n    switch (lastInstruction.action) {\n      case \"moveTo\":\n      case \"lineTo\":\n        out.x = lastInstruction.data[0];\n        out.y = lastInstruction.data[1];\n        break;\n      case \"quadraticCurveTo\":\n        out.x = lastInstruction.data[2];\n        out.y = lastInstruction.data[3];\n        break;\n      case \"bezierCurveTo\":\n        out.x = lastInstruction.data[4];\n        out.y = lastInstruction.data[5];\n        break;\n      case \"arc\":\n      case \"arcToSvg\":\n        out.x = lastInstruction.data[5];\n        out.y = lastInstruction.data[6];\n        break;\n      case \"addPath\":\n        lastInstruction.data[0].getLastPoint(out);\n        break;\n    }\n    return out;\n  }\n}\nfunction adjustTransform(currentMatrix, transform) {\n  if (currentMatrix) {\n    return currentMatrix.prepend(transform);\n  }\n  return transform.clone();\n}\n\nexport { GraphicsPath };\n//# sourceMappingURL=GraphicsPath.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { GraphicsPath } from '../path/GraphicsPath.mjs';\n\n\"use strict\";\nfunction SVGParser(svg, graphicsContext) {\n  if (typeof svg === \"string\") {\n    const div = document.createElement(\"div\");\n    div.innerHTML = svg.trim();\n    svg = div.querySelector(\"svg\");\n  }\n  const session = {\n    context: graphicsContext,\n    path: new GraphicsPath()\n  };\n  renderChildren(svg, session, null, null);\n  return graphicsContext;\n}\nfunction renderChildren(svg, session, fillStyle, strokeStyle) {\n  const children = svg.children;\n  const { fillStyle: f1, strokeStyle: s1 } = parseStyle(svg);\n  if (f1 && fillStyle) {\n    fillStyle = { ...fillStyle, ...f1 };\n  } else if (f1) {\n    fillStyle = f1;\n  }\n  if (s1 && strokeStyle) {\n    strokeStyle = { ...strokeStyle, ...s1 };\n  } else if (s1) {\n    strokeStyle = s1;\n  }\n  session.context.fillStyle = fillStyle;\n  session.context.strokeStyle = strokeStyle;\n  let x;\n  let y;\n  let x1;\n  let y1;\n  let x2;\n  let y2;\n  let cx;\n  let cy;\n  let r;\n  let rx;\n  let ry;\n  let points;\n  let pointsString;\n  let d;\n  let graphicsPath;\n  let width;\n  let height;\n  switch (svg.nodeName.toLowerCase()) {\n    case \"path\":\n      d = svg.getAttribute(\"d\");\n      graphicsPath = new GraphicsPath(d);\n      session.context.path(graphicsPath);\n      if (fillStyle)\n        session.context.fill();\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"circle\":\n      cx = parseFloatAttribute(svg, \"cx\", 0);\n      cy = parseFloatAttribute(svg, \"cy\", 0);\n      r = parseFloatAttribute(svg, \"r\", 0);\n      session.context.ellipse(cx, cy, r, r);\n      if (fillStyle)\n        session.context.fill();\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"rect\":\n      x = parseFloatAttribute(svg, \"x\", 0);\n      y = parseFloatAttribute(svg, \"y\", 0);\n      width = parseFloatAttribute(svg, \"width\", 0);\n      height = parseFloatAttribute(svg, \"height\", 0);\n      rx = parseFloatAttribute(svg, \"rx\", 0);\n      ry = parseFloatAttribute(svg, \"ry\", 0);\n      if (rx || ry) {\n        session.context.roundRect(x, y, width, height, rx || ry);\n      } else {\n        session.context.rect(x, y, width, height);\n      }\n      if (fillStyle)\n        session.context.fill();\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"ellipse\":\n      cx = parseFloatAttribute(svg, \"cx\", 0);\n      cy = parseFloatAttribute(svg, \"cy\", 0);\n      rx = parseFloatAttribute(svg, \"rx\", 0);\n      ry = parseFloatAttribute(svg, \"ry\", 0);\n      session.context.beginPath();\n      session.context.ellipse(cx, cy, rx, ry);\n      if (fillStyle)\n        session.context.fill();\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"line\":\n      x1 = parseFloatAttribute(svg, \"x1\", 0);\n      y1 = parseFloatAttribute(svg, \"y1\", 0);\n      x2 = parseFloatAttribute(svg, \"x2\", 0);\n      y2 = parseFloatAttribute(svg, \"y2\", 0);\n      session.context.beginPath();\n      session.context.moveTo(x1, y1);\n      session.context.lineTo(x2, y2);\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"polygon\":\n      pointsString = svg.getAttribute(\"points\");\n      points = pointsString.match(/\\d+/g).map((n) => parseInt(n, 10));\n      session.context.poly(points, true);\n      if (fillStyle)\n        session.context.fill();\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"polyline\":\n      pointsString = svg.getAttribute(\"points\");\n      points = pointsString.match(/\\d+/g).map((n) => parseInt(n, 10));\n      session.context.poly(points, false);\n      if (strokeStyle)\n        session.context.stroke();\n      break;\n    case \"g\":\n    case \"svg\":\n      break;\n    default: {\n      console.info(`[SVG parser] <${svg.nodeName}> elements unsupported`);\n      break;\n    }\n  }\n  for (let i = 0; i < children.length; i++) {\n    renderChildren(children[i], session, fillStyle, strokeStyle);\n  }\n}\nfunction parseFloatAttribute(svg, id, defaultValue) {\n  const value = svg.getAttribute(id);\n  return value ? Number(value) : defaultValue;\n}\nfunction parseStyle(svg) {\n  const style = svg.getAttribute(\"style\");\n  const strokeStyle = {};\n  const fillStyle = {};\n  let useFill = false;\n  let useStroke = false;\n  if (style) {\n    const styleParts = style.split(\";\");\n    for (let i = 0; i < styleParts.length; i++) {\n      const stylePart = styleParts[i];\n      const [key, value] = stylePart.split(\":\");\n      switch (key) {\n        case \"stroke\":\n          if (value !== \"none\") {\n            strokeStyle.color = Color.shared.setValue(value).toNumber();\n            useStroke = true;\n          }\n          break;\n        case \"stroke-width\":\n          strokeStyle.width = Number(value);\n          break;\n        case \"fill\":\n          if (value !== \"none\") {\n            useFill = true;\n            fillStyle.color = Color.shared.setValue(value).toNumber();\n          }\n          break;\n        case \"fill-opacity\":\n          fillStyle.alpha = Number(value);\n          break;\n        case \"stroke-opacity\":\n          strokeStyle.alpha = Number(value);\n          break;\n        case \"opacity\":\n          fillStyle.alpha = Number(value);\n          strokeStyle.alpha = Number(value);\n          break;\n      }\n    }\n  } else {\n    const stroke = svg.getAttribute(\"stroke\");\n    if (stroke && stroke !== \"none\") {\n      useStroke = true;\n      strokeStyle.color = Color.shared.setValue(stroke).toNumber();\n      strokeStyle.width = parseFloatAttribute(svg, \"stroke-width\", 1);\n    }\n    const fill = svg.getAttribute(\"fill\");\n    if (fill && fill !== \"none\") {\n      useFill = true;\n      fillStyle.color = Color.shared.setValue(fill).toNumber();\n    }\n  }\n  return {\n    strokeStyle: useStroke ? strokeStyle : null,\n    fillStyle: useFill ? fillStyle : null\n  };\n}\n\nexport { SVGParser };\n//# sourceMappingURL=SVGParser.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nconst _FillGradient = class _FillGradient {\n  constructor(x0, y0, x1, y1) {\n    this.uid = uid(\"fillGradient\");\n    this.type = \"linear\";\n    this.gradientStops = [];\n    this.x0 = x0;\n    this.y0 = y0;\n    this.x1 = x1;\n    this.y1 = y1;\n  }\n  addColorStop(offset, color) {\n    this.gradientStops.push({ offset, color: Color.shared.setValue(color).toHex() });\n    return this;\n  }\n  // TODO move to the system!\n  buildLinearGradient() {\n    const defaultSize = _FillGradient.defaultTextureSize;\n    const { gradientStops } = this;\n    const canvas = DOMAdapter.get().createCanvas();\n    canvas.width = defaultSize;\n    canvas.height = defaultSize;\n    const ctx = canvas.getContext(\"2d\");\n    const gradient = ctx.createLinearGradient(0, 0, _FillGradient.defaultTextureSize, 1);\n    for (let i = 0; i < gradientStops.length; i++) {\n      const stop = gradientStops[i];\n      gradient.addColorStop(stop.offset, stop.color);\n    }\n    ctx.fillStyle = gradient;\n    ctx.fillRect(0, 0, defaultSize, defaultSize);\n    this.texture = new Texture({\n      source: new ImageSource({\n        resource: canvas,\n        addressModeU: \"clamp-to-edge\",\n        addressModeV: \"repeat\"\n      })\n    });\n    const { x0, y0, x1, y1 } = this;\n    const m = new Matrix();\n    const dx = x1 - x0;\n    const dy = y1 - y0;\n    const dist = Math.sqrt(dx * dx + dy * dy);\n    const angle = Math.atan2(dy, dx);\n    m.translate(-x0, -y0);\n    m.scale(1 / defaultSize, 1 / defaultSize);\n    m.rotate(-angle);\n    m.scale(256 / dist, 1);\n    this.transform = m;\n  }\n};\n_FillGradient.defaultTextureSize = 256;\nlet FillGradient = _FillGradient;\n\nexport { FillGradient };\n//# sourceMappingURL=FillGradient.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nconst repetitionMap = {\n  repeat: {\n    addressModeU: \"repeat\",\n    addressModeV: \"repeat\"\n  },\n  \"repeat-x\": {\n    addressModeU: \"repeat\",\n    addressModeV: \"clamp-to-edge\"\n  },\n  \"repeat-y\": {\n    addressModeU: \"clamp-to-edge\",\n    addressModeV: \"repeat\"\n  },\n  \"no-repeat\": {\n    addressModeU: \"clamp-to-edge\",\n    addressModeV: \"clamp-to-edge\"\n  }\n};\nclass FillPattern {\n  constructor(texture, repetition) {\n    this.uid = uid(\"fillPattern\");\n    this.transform = new Matrix();\n    this.texture = texture;\n    this.transform.scale(\n      1 / texture.frame.width,\n      1 / texture.frame.height\n    );\n    if (repetition) {\n      texture.source.style.addressModeU = repetitionMap[repetition].addressModeU;\n      texture.source.style.addressModeV = repetitionMap[repetition].addressModeV;\n    }\n  }\n  setTransform(transform) {\n    const texture = this.texture;\n    this.transform.copyFrom(transform);\n    this.transform.invert();\n    this.transform.scale(\n      1 / texture.frame.width,\n      1 / texture.frame.height\n    );\n  }\n}\n\nexport { FillPattern };\n//# sourceMappingURL=FillPattern.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { FillGradient } from '../fill/FillGradient.mjs';\nimport { FillPattern } from '../fill/FillPattern.mjs';\n\n\"use strict\";\nfunction convertFillInputToFillStyle(value, defaultStyle) {\n  if (value === void 0 || value === null) {\n    return null;\n  }\n  let fillStyleToParse;\n  let styleToMerge;\n  if (value?.fill) {\n    styleToMerge = value.fill;\n    fillStyleToParse = { ...defaultStyle, ...value };\n  } else {\n    styleToMerge = value;\n    fillStyleToParse = defaultStyle;\n  }\n  if (Color.isColorLike(styleToMerge)) {\n    const temp = Color.shared.setValue(styleToMerge ?? 0);\n    const opts = {\n      ...fillStyleToParse,\n      color: temp.toNumber(),\n      alpha: temp.alpha === 1 ? fillStyleToParse.alpha : temp.alpha,\n      texture: Texture.WHITE\n    };\n    return opts;\n  } else if (styleToMerge instanceof FillPattern) {\n    const pattern = styleToMerge;\n    return {\n      ...fillStyleToParse,\n      color: 16777215,\n      texture: pattern.texture,\n      matrix: pattern.transform,\n      fill: fillStyleToParse.fill ?? null\n    };\n  } else if (styleToMerge instanceof FillGradient) {\n    const gradient = styleToMerge;\n    gradient.buildLinearGradient();\n    return {\n      ...fillStyleToParse,\n      color: 16777215,\n      texture: gradient.texture,\n      matrix: gradient.transform\n    };\n  }\n  const style = { ...defaultStyle, ...value };\n  if (style.texture) {\n    if (style.texture !== Texture.WHITE) {\n      const m = style.matrix?.invert() || new Matrix();\n      m.scale(\n        1 / style.texture.frame.width,\n        1 / style.texture.frame.height\n      );\n      style.matrix = m;\n    }\n    const sourceStyle = style.texture.source.style;\n    if (sourceStyle.addressMode === \"clamp-to-edge\") {\n      sourceStyle.addressMode = \"repeat\";\n    }\n  }\n  const color = Color.shared.setValue(style.color);\n  style.alpha *= color.alpha;\n  style.color = color.toNumber();\n  style.matrix = style.matrix ? style.matrix.clone() : null;\n  return style;\n}\n\nexport { convertFillInputToFillStyle };\n//# sourceMappingURL=convertFillInputToFillStyle.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../../color/Color.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Point } from '../../../maths/point/Point.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { uid } from '../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\nimport { Bounds } from '../../container/bounds/Bounds.mjs';\nimport { GraphicsPath } from './path/GraphicsPath.mjs';\nimport { SVGParser } from './svg/SVGParser.mjs';\nimport { convertFillInputToFillStyle } from './utils/convertFillInputToFillStyle.mjs';\n\n\"use strict\";\nconst tmpPoint = new Point();\nconst tempMatrix = new Matrix();\nconst _GraphicsContext = class _GraphicsContext extends EventEmitter {\n  constructor() {\n    super(...arguments);\n    this.uid = uid(\"graphicsContext\");\n    this.dirty = true;\n    this.batchMode = \"auto\";\n    this.instructions = [];\n    this._activePath = new GraphicsPath();\n    this._transform = new Matrix();\n    this._fillStyle = { ..._GraphicsContext.defaultFillStyle };\n    this._strokeStyle = { ..._GraphicsContext.defaultStrokeStyle };\n    this._stateStack = [];\n    this._tick = 0;\n    this._bounds = new Bounds();\n    this._boundsDirty = true;\n  }\n  /**\n   * Creates a new GraphicsContext object that is a clone of this instance, copying all properties,\n   * including the current drawing state, transformations, styles, and instructions.\n   * @returns A new GraphicsContext instance with the same properties and state as this one.\n   */\n  clone() {\n    const clone = new _GraphicsContext();\n    clone.batchMode = this.batchMode;\n    clone.instructions = this.instructions.slice();\n    clone._activePath = this._activePath.clone();\n    clone._transform = this._transform.clone();\n    clone._fillStyle = { ...this._fillStyle };\n    clone._strokeStyle = { ...this._strokeStyle };\n    clone._stateStack = this._stateStack.slice();\n    clone._bounds = this._bounds.clone();\n    clone._boundsDirty = true;\n    return clone;\n  }\n  /**\n   * The current fill style of the graphics context. This can be a color, gradient, pattern, or a more complex style defined by a FillStyle object.\n   */\n  get fillStyle() {\n    return this._fillStyle;\n  }\n  set fillStyle(value) {\n    this._fillStyle = convertFillInputToFillStyle(value, _GraphicsContext.defaultFillStyle);\n  }\n  /**\n   * The current stroke style of the graphics context. Similar to fill styles, stroke styles can encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n   */\n  get strokeStyle() {\n    return this._strokeStyle;\n  }\n  set strokeStyle(value) {\n    this._strokeStyle = convertFillInputToFillStyle(value, _GraphicsContext.defaultStrokeStyle);\n  }\n  /**\n   * Sets the current fill style of the graphics context. The fill style can be a color, gradient,\n   * pattern, or a more complex style defined by a FillStyle object.\n   * @param style - The fill style to apply. This can be a simple color, a gradient or pattern object,\n   *                or a FillStyle or ConvertedFillStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setFillStyle(style) {\n    this._fillStyle = convertFillInputToFillStyle(style, _GraphicsContext.defaultFillStyle);\n    return this;\n  }\n  /**\n   * Sets the current stroke style of the graphics context. Similar to fill styles, stroke styles can\n   * encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n   * @param style - The stroke style to apply. Can be defined as a color, a gradient or pattern,\n   *                or a StrokeStyle or ConvertedStrokeStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setStrokeStyle(style) {\n    this._strokeStyle = convertFillInputToFillStyle(style, _GraphicsContext.defaultStrokeStyle);\n    return this;\n  }\n  texture(texture, tint, dx, dy, dw, dh) {\n    this.instructions.push({\n      action: \"texture\",\n      data: {\n        image: texture,\n        dx: dx || 0,\n        dy: dy || 0,\n        dw: dw || texture.frame.width,\n        dh: dh || texture.frame.height,\n        transform: this._transform.clone(),\n        alpha: this._fillStyle.alpha,\n        style: tint ? Color.shared.setValue(tint).toNumber() : 16777215\n      }\n    });\n    this.onUpdate();\n    return this;\n  }\n  /**\n   * Resets the current path. Any previous path and its commands are discarded and a new path is\n   * started. This is typically called before beginning a new shape or series of drawing commands.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  beginPath() {\n    this._activePath = new GraphicsPath();\n    return this;\n  }\n  fill(style, alpha) {\n    let path;\n    const lastInstruction = this.instructions[this.instructions.length - 1];\n    if (this._tick === 0 && lastInstruction && lastInstruction.action === \"stroke\") {\n      path = lastInstruction.data.path;\n    } else {\n      path = this._activePath.clone();\n    }\n    if (!path)\n      return this;\n    if (style != null) {\n      if (alpha !== void 0 && typeof style === \"number\") {\n        deprecation(v8_0_0, \"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead\");\n        style = { color: style, alpha };\n      }\n      this._fillStyle = convertFillInputToFillStyle(style, _GraphicsContext.defaultFillStyle);\n    }\n    this.instructions.push({\n      action: \"fill\",\n      // TODO copy fill style!\n      data: { style: this.fillStyle, path }\n    });\n    this.onUpdate();\n    this._initNextPathLocation();\n    this._tick = 0;\n    return this;\n  }\n  _initNextPathLocation() {\n    const { x, y } = this._activePath.getLastPoint(Point.shared);\n    this._activePath.clear();\n    this._activePath.moveTo(x, y);\n  }\n  /**\n   * Strokes the current path with the current stroke style. This method can take an optional\n   * FillStyleInputs parameter to define the stroke's appearance, including its color, width, and other properties.\n   * @param style - (Optional) The stroke style to apply. Can be defined as a simple color or a more complex style object. If omitted, uses the current stroke style.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  stroke(style) {\n    let path;\n    const lastInstruction = this.instructions[this.instructions.length - 1];\n    if (this._tick === 0 && lastInstruction && lastInstruction.action === \"fill\") {\n      path = lastInstruction.data.path;\n    } else {\n      path = this._activePath.clone();\n    }\n    if (!path)\n      return this;\n    if (style != null) {\n      this._strokeStyle = convertFillInputToFillStyle(style, _GraphicsContext.defaultStrokeStyle);\n    }\n    this.instructions.push({\n      action: \"stroke\",\n      // TODO copy fill style!\n      data: { style: this.strokeStyle, path }\n    });\n    this.onUpdate();\n    this._initNextPathLocation();\n    this._tick = 0;\n    return this;\n  }\n  /**\n   * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n   * subtracting a path from the previously drawn path. If a hole is not completely in a shape, it will\n   * fail to cut correctly!\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  cut() {\n    for (let i = 0; i < 2; i++) {\n      const lastInstruction = this.instructions[this.instructions.length - 1 - i];\n      const holePath = this._activePath.clone();\n      if (lastInstruction) {\n        if (lastInstruction.action === \"stroke\" || lastInstruction.action === \"fill\") {\n          if (lastInstruction.data.hole) {\n            lastInstruction.data.hole.addPath(holePath);\n          } else {\n            lastInstruction.data.hole = holePath;\n            break;\n          }\n        }\n      }\n    }\n    this._initNextPathLocation();\n    return this;\n  }\n  /**\n   * Adds an arc to the current path, which is centered at (x, y) with the specified radius,\n   * starting and ending angles, and direction.\n   * @param x - The x-coordinate of the arc's center.\n   * @param y - The y-coordinate of the arc's center.\n   * @param radius - The arc's radius.\n   * @param startAngle - The starting angle, in radians.\n   * @param endAngle - The ending angle, in radians.\n   * @param counterclockwise - (Optional) Specifies whether the arc is drawn counterclockwise (true) or clockwise (false). Defaults to false.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  arc(x, y, radius, startAngle, endAngle, counterclockwise) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arc(\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      radius,\n      startAngle,\n      endAngle,\n      counterclockwise\n    );\n    return this;\n  }\n  /**\n   * Adds an arc to the current path with the given control points and radius, connected to the previous point\n   * by a straight line if necessary.\n   * @param x1 - The x-coordinate of the first control point.\n   * @param y1 - The y-coordinate of the first control point.\n   * @param x2 - The x-coordinate of the second control point.\n   * @param y2 - The y-coordinate of the second control point.\n   * @param radius - The arc's radius.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  arcTo(x1, y1, x2, y2, radius) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arcTo(\n      t.a * x1 + t.c * y1 + t.tx,\n      t.b * x1 + t.d * y1 + t.ty,\n      t.a * x2 + t.c * y2 + t.tx,\n      t.b * x2 + t.d * y2 + t.ty,\n      radius\n    );\n    return this;\n  }\n  /**\n   * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n   * @param rx - The x-radius of the ellipse.\n   * @param ry - The y-radius of the ellipse.\n   * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n   * to the x-axis of the coordinate system, in degrees.\n   * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n   * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n   * @param x - The x-coordinate of the arc's end point.\n   * @param y - The y-coordinate of the arc's end point.\n   * @returns The instance of the current object for chaining.\n   */\n  arcToSvg(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arcToSvg(\n      rx,\n      ry,\n      xAxisRotation,\n      // should we rotate this with transform??\n      largeArcFlag,\n      sweepFlag,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty\n    );\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires three points: the first two are control points and the third one is the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the first control point.\n   * @param cp1y - The y-coordinate of the first control point.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y, smoothness) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.bezierCurveTo(\n      t.a * cp1x + t.c * cp1y + t.tx,\n      t.b * cp1x + t.d * cp1y + t.ty,\n      t.a * cp2x + t.c * cp2y + t.tx,\n      t.b * cp2x + t.d * cp2y + t.ty,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this._tick++;\n    this._activePath?.closePath();\n    return this;\n  }\n  /**\n   * Draws an ellipse at the specified location and with the given x and y radii.\n   * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n   * @param x - The x-coordinate of the center of the ellipse.\n   * @param y - The y-coordinate of the center of the ellipse.\n   * @param radiusX - The horizontal radius of the ellipse.\n   * @param radiusY - The vertical radius of the ellipse.\n   * @returns The instance of the current object for chaining.\n   */\n  ellipse(x, y, radiusX, radiusY) {\n    this._tick++;\n    this._activePath.ellipse(x, y, radiusX, radiusY, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius) {\n    this._tick++;\n    this._activePath.circle(x, y, radius, this._transform.clone());\n    return this;\n  }\n  /**\n   * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n   * @param path - The `GraphicsPath` to add.\n   * @returns The instance of the current object for chaining.\n   */\n  path(path) {\n    this._tick++;\n    this._activePath.addPath(path, this._transform.clone());\n    return this;\n  }\n  /**\n   * Connects the current point to a new point with a straight line. This method updates the current path.\n   * @param x - The x-coordinate of the new point to connect to.\n   * @param y - The y-coordinate of the new point to connect to.\n   * @returns The instance of the current object for chaining.\n   */\n  lineTo(x, y) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.lineTo(\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty\n    );\n    return this;\n  }\n  /**\n   * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n   * @param x - The x-coordinate for the starting point.\n   * @param y - The y-coordinate for the starting point.\n   * @returns The instance of the current object for chaining.\n   */\n  moveTo(x, y) {\n    this._tick++;\n    const t = this._transform;\n    const instructions = this._activePath.instructions;\n    const transformedX = t.a * x + t.c * y + t.tx;\n    const transformedY = t.b * x + t.d * y + t.ty;\n    if (instructions.length === 1 && instructions[0].action === \"moveTo\") {\n      instructions[0].data[0] = transformedX;\n      instructions[0].data[1] = transformedY;\n      return this;\n    }\n    this._activePath.moveTo(\n      transformedX,\n      transformedY\n    );\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n   * The starting point is the last point in the current path.\n   * @param cpx - The x-coordinate of the control point.\n   * @param cpy - The y-coordinate of the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveTo(cpx, cpy, x, y, smoothness) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.quadraticCurveTo(\n      t.a * cpx + t.c * cpy + t.tx,\n      t.b * cpx + t.d * cpy + t.ty,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h) {\n    this._tick++;\n    this._activePath.rect(x, y, w, h, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a rectangle with rounded corners.\n   * The corner radius can be specified to determine how rounded the corners should be.\n   * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n   * @returns The instance of the current object for chaining.\n   */\n  roundRect(x, y, w, h, radius) {\n    this._tick++;\n    this._activePath.roundRect(x, y, w, h, radius, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a polygon shape by specifying a sequence of points. This method allows for the creation of complex polygons,\n   * which can be both open and closed. An optional transformation can be applied, enabling the polygon to be scaled,\n   * rotated, or translated as needed.\n   * @param points - An array of numbers, or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n   * representing the x and y coordinates, of the polygon's vertices, in sequence.\n   * @param close - A boolean indicating whether to close the polygon path. True by default.\n   */\n  poly(points, close) {\n    this._tick++;\n    this._activePath.poly(points, close, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  regularPoly(x, y, radius, sides, rotation = 0, transform) {\n    this._tick++;\n    this._activePath.regularPoly(x, y, radius, sides, rotation, transform);\n    return this;\n  }\n  /**\n   * Draws a polygon with rounded corners.\n   * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param corner - The radius of the rounding of the corners.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @returns The instance of the current object for chaining.\n   */\n  roundPoly(x, y, radius, sides, corner, rotation) {\n    this._tick++;\n    this._activePath.roundPoly(x, y, radius, sides, corner, rotation);\n    return this;\n  }\n  /**\n   * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n   * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n   * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n   * A minimum of 3 points is required.\n   * @param radius - The default radius for the corners.\n   * This radius is applied to all corners unless overridden in `points`.\n   * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n   *  method instead of an arc method. Defaults to false.\n   * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n   * Higher values make the curve smoother.\n   * @returns The instance of the current object for chaining.\n   */\n  roundShape(points, radius, useQuadratic, smoothness) {\n    this._tick++;\n    this._activePath.roundShape(points, radius, useQuadratic, smoothness);\n    return this;\n  }\n  /**\n   * Draw Rectangle with fillet corners. This is much like rounded rectangle\n   * however it support negative numbers as well for the corner radius.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param fillet - accept negative or positive values\n   */\n  filletRect(x, y, width, height, fillet) {\n    this._tick++;\n    this._activePath.filletRect(x, y, width, height, fillet);\n    return this;\n  }\n  /**\n   * Draw Rectangle with chamfer corners. These are angled corners.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param chamfer - non-zero real number, size of corner cutout\n   * @param transform\n   */\n  chamferRect(x, y, width, height, chamfer, transform) {\n    this._tick++;\n    this._activePath.chamferRect(x, y, width, height, chamfer, transform);\n    return this;\n  }\n  /**\n   * Draws a star shape centered at a specified location. This method allows for the creation\n   *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n   * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n   * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n   * @param x - The x-coordinate of the center of the star.\n   * @param y - The y-coordinate of the center of the star.\n   * @param points - The number of points of the star.\n   * @param radius - The outer radius of the star (distance from the center to the outer points).\n   * @param innerRadius - Optional. The inner radius of the star\n   * (distance from the center to the inner points between the outer points).\n   * If not provided, defaults to half of the `radius`.\n   * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n   * Defaults to 0, meaning one point is directly upward.\n   * @returns The instance of the current object for chaining further drawing commands.\n   */\n  star(x, y, points, radius, innerRadius = 0, rotation = 0) {\n    this._tick++;\n    this._activePath.star(x, y, points, radius, innerRadius, rotation, this._transform.clone());\n    return this;\n  }\n  /**\n   * Parses and renders an SVG string into the graphics context. This allows for complex shapes and paths\n   * defined in SVG format to be drawn within the graphics context.\n   * @param svg - The SVG string to be parsed and rendered.\n   */\n  svg(svg) {\n    this._tick++;\n    SVGParser(svg, this);\n    return this;\n  }\n  /**\n   * Restores the most recently saved graphics state by popping the top of the graphics state stack.\n   * This includes transformations, fill styles, and stroke styles.\n   */\n  restore() {\n    const state = this._stateStack.pop();\n    if (state) {\n      this._transform = state.transform;\n      this._fillStyle = state.fillStyle;\n      this._strokeStyle = state.strokeStyle;\n    }\n    return this;\n  }\n  /** Saves the current graphics state, including transformations, fill styles, and stroke styles, onto a stack. */\n  save() {\n    this._stateStack.push({\n      transform: this._transform.clone(),\n      fillStyle: { ...this._fillStyle },\n      strokeStyle: { ...this._strokeStyle }\n    });\n    return this;\n  }\n  /**\n   * Returns the current transformation matrix of the graphics context.\n   * @returns The current transformation matrix.\n   */\n  getTransform() {\n    return this._transform;\n  }\n  /**\n   * Resets the current transformation matrix to the identity matrix, effectively removing any transformations (rotation, scaling, translation) previously applied.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  resetTransform() {\n    this._transform.identity();\n    return this;\n  }\n  /**\n   * Applies a rotation transformation to the graphics context around the current origin.\n   * @param angle - The angle of rotation in radians.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  rotate(angle) {\n    this._transform.rotate(angle);\n    return this;\n  }\n  /**\n   * Applies a scaling transformation to the graphics context, scaling drawings by x horizontally and by y vertically.\n   * @param x - The scale factor in the horizontal direction.\n   * @param y - (Optional) The scale factor in the vertical direction. If not specified, the x value is used for both directions.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  scale(x, y = x) {\n    this._transform.scale(x, y);\n    return this;\n  }\n  setTransform(a, b, c, d, dx, dy) {\n    if (a instanceof Matrix) {\n      this._transform.set(a.a, a.b, a.c, a.d, a.tx, a.ty);\n      return this;\n    }\n    this._transform.set(a, b, c, d, dx, dy);\n    return this;\n  }\n  transform(a, b, c, d, dx, dy) {\n    if (a instanceof Matrix) {\n      this._transform.append(a);\n      return this;\n    }\n    tempMatrix.set(a, b, c, d, dx, dy);\n    this._transform.append(tempMatrix);\n    return this;\n  }\n  /**\n   * Applies a translation transformation to the graphics context, moving the origin by the specified amounts.\n   * @param x - The amount to translate in the horizontal direction.\n   * @param y - (Optional) The amount to translate in the vertical direction. If not specified, the x value is used for both directions.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  translate(x, y = x) {\n    this._transform.translate(x, y);\n    return this;\n  }\n  /**\n   * Clears all drawing commands from the graphics context, effectively resetting it. This includes clearing the path,\n   * and optionally resetting transformations to the identity matrix.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  clear() {\n    this.instructions.length = 0;\n    this.resetTransform();\n    this.onUpdate();\n    return this;\n  }\n  onUpdate() {\n    if (this.dirty)\n      return;\n    this.emit(\"update\", this, 16);\n    this.dirty = true;\n    this._boundsDirty = true;\n  }\n  /** The bounds of the graphic shape. */\n  get bounds() {\n    if (!this._boundsDirty)\n      return this._bounds;\n    const bounds = this._bounds;\n    bounds.clear();\n    for (let i = 0; i < this.instructions.length; i++) {\n      const instruction = this.instructions[i];\n      const action = instruction.action;\n      if (action === \"fill\") {\n        const data = instruction.data;\n        bounds.addBounds(data.path.bounds);\n      } else if (action === \"texture\") {\n        const data = instruction.data;\n        bounds.addFrame(data.dx, data.dy, data.dx + data.dw, data.dy + data.dh, data.transform);\n      }\n      if (action === \"stroke\") {\n        const data = instruction.data;\n        const padding = data.style.width / 2;\n        const _bounds = data.path.bounds;\n        bounds.addFrame(\n          _bounds.minX - padding,\n          _bounds.minY - padding,\n          _bounds.maxX + padding,\n          _bounds.maxY + padding\n        );\n      }\n    }\n    return bounds;\n  }\n  /**\n   * Check to see if a point is contained within this geometry.\n   * @param point - Point to check if it's contained.\n   * @returns {boolean} `true` if the point is contained within geometry.\n   */\n  containsPoint(point) {\n    if (!this.bounds.containsPoint(point.x, point.y))\n      return false;\n    const instructions = this.instructions;\n    let hasHit = false;\n    for (let k = 0; k < instructions.length; k++) {\n      const instruction = instructions[k];\n      const data = instruction.data;\n      const path = data.path;\n      if (!instruction.action || !path)\n        continue;\n      const style = data.style;\n      const shapes = path.shapePath.shapePrimitives;\n      for (let i = 0; i < shapes.length; i++) {\n        const shape = shapes[i].shape;\n        if (!style || !shape)\n          continue;\n        const transform = shapes[i].transform;\n        const transformedPoint = transform ? transform.applyInverse(point, tmpPoint) : point;\n        if (instruction.action === \"fill\") {\n          hasHit = shape.contains(transformedPoint.x, transformedPoint.y);\n        } else {\n          hasHit = shape.strokeContains(transformedPoint.x, transformedPoint.y, style.width);\n        }\n        const holes = data.hole;\n        if (holes) {\n          const holeShapes = holes.shapePath?.shapePrimitives;\n          if (holeShapes) {\n            for (let j = 0; j < holeShapes.length; j++) {\n              if (holeShapes[j].shape.contains(transformedPoint.x, transformedPoint.y)) {\n                hasHit = false;\n              }\n            }\n          }\n        }\n        if (hasHit) {\n          return true;\n        }\n      }\n    }\n    return hasHit;\n  }\n  /**\n   * Destroys the GraphicsData object.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @param {boolean} [options.texture=false] - Should it destroy the current texture of the fill/stroke style?\n   * @param {boolean} [options.textureSource=false] - Should it destroy the texture source of the fill/stroke style?\n   */\n  destroy(options = false) {\n    this._stateStack.length = 0;\n    this._transform = null;\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      if (this._fillStyle.texture) {\n        this._fillStyle.texture.destroy(destroyTextureSource);\n      }\n      if (this._strokeStyle.texture) {\n        this._strokeStyle.texture.destroy(destroyTextureSource);\n      }\n    }\n    this._fillStyle = null;\n    this._strokeStyle = null;\n    this.instructions = null;\n    this._activePath = null;\n    this._bounds = null;\n    this._stateStack = null;\n    this.customShader = null;\n    this._transform = null;\n  }\n};\n/** The default fill style to use when none is provided. */\n_GraphicsContext.defaultFillStyle = {\n  /** The color to use for the fill. */\n  color: 16777215,\n  /** The alpha value to use for the fill. */\n  alpha: 1,\n  /** The texture to use for the fill. */\n  texture: Texture.WHITE,\n  /** The matrix to apply. */\n  matrix: null,\n  /** The fill pattern to use. */\n  fill: null\n};\n/** The default stroke style to use when none is provided. */\n_GraphicsContext.defaultStrokeStyle = {\n  /** The width of the stroke. */\n  width: 1,\n  /** The color to use for the stroke. */\n  color: 16777215,\n  /** The alpha value to use for the stroke. */\n  alpha: 1,\n  /** The alignment of the stroke. */\n  alignment: 0.5,\n  /** The miter limit to use. */\n  miterLimit: 10,\n  /** The line cap style to use. */\n  cap: \"butt\",\n  /** The line join style to use. */\n  join: \"miter\",\n  /** The texture to use for the fill. */\n  texture: Texture.WHITE,\n  /** The matrix to apply. */\n  matrix: null,\n  /** The fill pattern to use. */\n  fill: null\n};\nlet GraphicsContext = _GraphicsContext;\n\nexport { GraphicsContext };\n//# sourceMappingURL=GraphicsContext.mjs.map\n","import { UPDATE_PRIORITY } from '../ticker/const.mjs';\nimport { Ticker } from '../ticker/Ticker.mjs';\n\n\"use strict\";\nclass EventsTickerClass {\n  constructor() {\n    /** The frequency that fake events will be fired. */\n    this.interactionFrequency = 10;\n    this._deltaTime = 0;\n    this._didMove = false;\n    this._tickerAdded = false;\n    this._pauseUpdate = true;\n  }\n  /**\n   * Initializes the event ticker.\n   * @param events - The event system.\n   */\n  init(events) {\n    this.removeTickerListener();\n    this.events = events;\n    this.interactionFrequency = 10;\n    this._deltaTime = 0;\n    this._didMove = false;\n    this._tickerAdded = false;\n    this._pauseUpdate = true;\n  }\n  /** Whether to pause the update checks or not. */\n  get pauseUpdate() {\n    return this._pauseUpdate;\n  }\n  set pauseUpdate(paused) {\n    this._pauseUpdate = paused;\n  }\n  /** Adds the ticker listener. */\n  addTickerListener() {\n    if (this._tickerAdded || !this.domElement) {\n      return;\n    }\n    Ticker.system.add(this._tickerUpdate, this, UPDATE_PRIORITY.INTERACTION);\n    this._tickerAdded = true;\n  }\n  /** Removes the ticker listener. */\n  removeTickerListener() {\n    if (!this._tickerAdded) {\n      return;\n    }\n    Ticker.system.remove(this._tickerUpdate, this);\n    this._tickerAdded = false;\n  }\n  /** Sets flag to not fire extra events when the user has already moved there mouse */\n  pointerMoved() {\n    this._didMove = true;\n  }\n  /** Updates the state of interactive objects. */\n  _update() {\n    if (!this.domElement || this._pauseUpdate) {\n      return;\n    }\n    if (this._didMove) {\n      this._didMove = false;\n      return;\n    }\n    const rootPointerEvent = this.events[\"_rootPointerEvent\"];\n    if (this.events.supportsTouchEvents && rootPointerEvent.pointerType === \"touch\") {\n      return;\n    }\n    globalThis.document.dispatchEvent(new PointerEvent(\"pointermove\", {\n      clientX: rootPointerEvent.clientX,\n      clientY: rootPointerEvent.clientY\n    }));\n  }\n  /**\n   * Updates the state of interactive objects if at least {@link interactionFrequency}\n   * milliseconds have passed since the last invocation.\n   *\n   * Invoked by a throttled ticker update from {@link Ticker.system}.\n   * @param ticker - The throttled ticker.\n   */\n  _tickerUpdate(ticker) {\n    this._deltaTime += ticker.deltaTime;\n    if (this._deltaTime < this.interactionFrequency) {\n      return;\n    }\n    this._deltaTime = 0;\n    this._update();\n  }\n}\nconst EventsTicker = new EventsTickerClass();\n\nexport { EventsTicker };\n//# sourceMappingURL=EventTicker.mjs.map\n","import { Point } from '../maths/point/Point.mjs';\nimport { FederatedEvent } from './FederatedEvent.mjs';\n\n\"use strict\";\nclass FederatedMouseEvent extends FederatedEvent {\n  constructor() {\n    super(...arguments);\n    /** The coordinates of the mouse event relative to the canvas. */\n    this.client = new Point();\n    /** The movement in this pointer relative to the last `mousemove` event. */\n    this.movement = new Point();\n    /** The offset of the pointer coordinates w.r.t. target Container in world space. This is not supported at the moment. */\n    this.offset = new Point();\n    /** The pointer coordinates in world space. */\n    this.global = new Point();\n    /**\n     * The pointer coordinates in the renderer's {@link Renderer.screen screen}. This has slightly\n     * different semantics than native PointerEvent screenX/screenY.\n     */\n    this.screen = new Point();\n  }\n  /** @readonly */\n  get clientX() {\n    return this.client.x;\n  }\n  /** @readonly */\n  get clientY() {\n    return this.client.y;\n  }\n  /**\n   * Alias for {@link FederatedMouseEvent.clientX this.clientX}.\n   * @readonly\n   */\n  get x() {\n    return this.clientX;\n  }\n  /**\n   * Alias for {@link FederatedMouseEvent.clientY this.clientY}.\n   * @readonly\n   */\n  get y() {\n    return this.clientY;\n  }\n  /** @readonly */\n  get movementX() {\n    return this.movement.x;\n  }\n  /** @readonly */\n  get movementY() {\n    return this.movement.y;\n  }\n  /** @readonly */\n  get offsetX() {\n    return this.offset.x;\n  }\n  /** @readonly */\n  get offsetY() {\n    return this.offset.y;\n  }\n  /** @readonly */\n  get globalX() {\n    return this.global.x;\n  }\n  /** @readonly */\n  get globalY() {\n    return this.global.y;\n  }\n  /**\n   * The pointer coordinates in the renderer's screen. Alias for {@code screen.x}.\n   * @readonly\n   */\n  get screenX() {\n    return this.screen.x;\n  }\n  /**\n   * The pointer coordinates in the renderer's screen. Alias for {@code screen.y}.\n   * @readonly\n   */\n  get screenY() {\n    return this.screen.y;\n  }\n  /**\n   * This will return the local coordinates of the specified container for this InteractionData\n   * @param {Container} container - The Container that you would like the local\n   *  coords off\n   * @param {PointData} point - A Point object in which to store the value, optional (otherwise\n   *  will create a new point)\n   * @param {PointData} globalPos - A Point object containing your custom global coords, optional\n   *  (otherwise will use the current global coords)\n   * @returns - A point containing the coordinates of the InteractionData position relative\n   *  to the Container\n   */\n  getLocalPosition(container, point, globalPos) {\n    return container.worldTransform.applyInverse(globalPos || this.global, point);\n  }\n  /**\n   * Whether the modifier key was pressed when this event natively occurred.\n   * @param key - The modifier key.\n   */\n  getModifierState(key) {\n    return \"getModifierState\" in this.nativeEvent && this.nativeEvent.getModifierState(key);\n  }\n  /**\n   * Not supported.\n   * @param _typeArg\n   * @param _canBubbleArg\n   * @param _cancelableArg\n   * @param _viewArg\n   * @param _detailArg\n   * @param _screenXArg\n   * @param _screenYArg\n   * @param _clientXArg\n   * @param _clientYArg\n   * @param _ctrlKeyArg\n   * @param _altKeyArg\n   * @param _shiftKeyArg\n   * @param _metaKeyArg\n   * @param _buttonArg\n   * @param _relatedTargetArg\n   * @deprecated since 7.0.0\n   */\n  // eslint-disable-next-line max-params\n  initMouseEvent(_typeArg, _canBubbleArg, _cancelableArg, _viewArg, _detailArg, _screenXArg, _screenYArg, _clientXArg, _clientYArg, _ctrlKeyArg, _altKeyArg, _shiftKeyArg, _metaKeyArg, _buttonArg, _relatedTargetArg) {\n    throw new Error(\"Method not implemented.\");\n  }\n}\n\nexport { FederatedMouseEvent };\n//# sourceMappingURL=FederatedMouseEvent.mjs.map\n","import { FederatedMouseEvent } from './FederatedMouseEvent.mjs';\n\n\"use strict\";\nclass FederatedPointerEvent extends FederatedMouseEvent {\n  constructor() {\n    super(...arguments);\n    /**\n     * The width of the pointer's contact along the x-axis, measured in CSS pixels.\n     * radiusX of TouchEvents will be represented by this value.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/width\n     */\n    this.width = 0;\n    /**\n     * The height of the pointer's contact along the y-axis, measured in CSS pixels.\n     * radiusY of TouchEvents will be represented by this value.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/height\n     */\n    this.height = 0;\n    /**\n     * Indicates whether or not the pointer device that created the event is the primary pointer.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/isPrimary\n     */\n    this.isPrimary = false;\n  }\n  // Only included for completeness for now\n  getCoalescedEvents() {\n    if (this.type === \"pointermove\" || this.type === \"mousemove\" || this.type === \"touchmove\") {\n      return [this];\n    }\n    return [];\n  }\n  // Only included for completeness for now\n  getPredictedEvents() {\n    throw new Error(\"getPredictedEvents is not supported!\");\n  }\n}\n\nexport { FederatedPointerEvent };\n//# sourceMappingURL=FederatedPointerEvent.mjs.map\n","import { FederatedMouseEvent } from './FederatedMouseEvent.mjs';\n\n\"use strict\";\nclass FederatedWheelEvent extends FederatedMouseEvent {\n  constructor() {\n    super(...arguments);\n    /** Units specified in pixels. */\n    this.DOM_DELTA_PIXEL = 0;\n    /** Units specified in lines. */\n    this.DOM_DELTA_LINE = 1;\n    /** Units specified in pages. */\n    this.DOM_DELTA_PAGE = 2;\n  }\n}\n/** Units specified in pixels. */\nFederatedWheelEvent.DOM_DELTA_PIXEL = 0;\n/** Units specified in lines. */\nFederatedWheelEvent.DOM_DELTA_LINE = 1;\n/** Units specified in pages. */\nFederatedWheelEvent.DOM_DELTA_PAGE = 2;\n\nexport { FederatedWheelEvent };\n//# sourceMappingURL=FederatedWheelEvent.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Point } from '../maths/point/Point.mjs';\nimport { warn } from '../utils/logging/warn.mjs';\nimport { EventsTicker } from './EventTicker.mjs';\nimport { FederatedMouseEvent } from './FederatedMouseEvent.mjs';\nimport { FederatedPointerEvent } from './FederatedPointerEvent.mjs';\nimport { FederatedWheelEvent } from './FederatedWheelEvent.mjs';\n\n\"use strict\";\nconst PROPAGATION_LIMIT = 2048;\nconst tempHitLocation = new Point();\nconst tempLocalMapping = new Point();\nclass EventBoundary {\n  /**\n   * @param rootTarget - The holder of the event boundary.\n   */\n  constructor(rootTarget) {\n    /**\n     * Emits events after they were dispatched into the scene graph.\n     *\n     * This can be used for global events listening, regardless of the scene graph being used. It should\n     * not be used by interactive libraries for normal use.\n     *\n     * Special events that do not bubble all the way to the root target are not emitted from here,\n     * e.g. pointerenter, pointerleave, click.\n     */\n    this.dispatch = new EventEmitter();\n    /**\n     * This flag would emit `pointermove`, `touchmove`, and `mousemove` events on all Containers.\n     *\n     * The `moveOnAll` semantics mirror those of earlier versions of PixiJS. This was disabled in favor of\n     * the Pointer Event API's approach.\n     */\n    this.moveOnAll = false;\n    /** Enables the global move events. `globalpointermove`, `globaltouchmove`, and `globalmousemove` */\n    this.enableGlobalMoveEvents = true;\n    /**\n     * State object for mapping methods.\n     * @see EventBoundary#trackingData\n     */\n    this.mappingState = {\n      trackingData: {}\n    };\n    /**\n     * The event pool maps event constructors to an free pool of instances of those specific events.\n     * @see EventBoundary#allocateEvent\n     * @see EventBoundary#freeEvent\n     */\n    this.eventPool = /* @__PURE__ */ new Map();\n    /** Every interactive element gathered from the scene. Only used in `pointermove` */\n    this._allInteractiveElements = [];\n    /** Every element that passed the hit test. Only used in `pointermove` */\n    this._hitElements = [];\n    /** Whether or not to collect all the interactive elements from the scene. Enabled in `pointermove` */\n    this._isPointerMoveEvent = false;\n    this.rootTarget = rootTarget;\n    this.hitPruneFn = this.hitPruneFn.bind(this);\n    this.hitTestFn = this.hitTestFn.bind(this);\n    this.mapPointerDown = this.mapPointerDown.bind(this);\n    this.mapPointerMove = this.mapPointerMove.bind(this);\n    this.mapPointerOut = this.mapPointerOut.bind(this);\n    this.mapPointerOver = this.mapPointerOver.bind(this);\n    this.mapPointerUp = this.mapPointerUp.bind(this);\n    this.mapPointerUpOutside = this.mapPointerUpOutside.bind(this);\n    this.mapWheel = this.mapWheel.bind(this);\n    this.mappingTable = {};\n    this.addEventMapping(\"pointerdown\", this.mapPointerDown);\n    this.addEventMapping(\"pointermove\", this.mapPointerMove);\n    this.addEventMapping(\"pointerout\", this.mapPointerOut);\n    this.addEventMapping(\"pointerleave\", this.mapPointerOut);\n    this.addEventMapping(\"pointerover\", this.mapPointerOver);\n    this.addEventMapping(\"pointerup\", this.mapPointerUp);\n    this.addEventMapping(\"pointerupoutside\", this.mapPointerUpOutside);\n    this.addEventMapping(\"wheel\", this.mapWheel);\n  }\n  /**\n   * Adds an event mapping for the event `type` handled by `fn`.\n   *\n   * Event mappings can be used to implement additional or custom events. They take an event\n   * coming from the upstream scene (or directly from the {@link EventSystem}) and dispatch new downstream events\n   * generally trickling down and bubbling up to {@link EventBoundary.rootTarget this.rootTarget}.\n   *\n   * To modify the semantics of existing events, the built-in mapping methods of EventBoundary should be overridden\n   * instead.\n   * @param type - The type of upstream event to map.\n   * @param fn - The mapping method. The context of this function must be bound manually, if desired.\n   */\n  addEventMapping(type, fn) {\n    if (!this.mappingTable[type]) {\n      this.mappingTable[type] = [];\n    }\n    this.mappingTable[type].push({\n      fn,\n      priority: 0\n    });\n    this.mappingTable[type].sort((a, b) => a.priority - b.priority);\n  }\n  /**\n   * Dispatches the given event\n   * @param e - The event to dispatch.\n   * @param type - The type of event to dispatch. Defaults to `e.type`.\n   */\n  dispatchEvent(e, type) {\n    e.propagationStopped = false;\n    e.propagationImmediatelyStopped = false;\n    this.propagate(e, type);\n    this.dispatch.emit(type || e.type, e);\n  }\n  /**\n   * Maps the given upstream event through the event boundary and propagates it downstream.\n   * @param e - The event to map.\n   */\n  mapEvent(e) {\n    if (!this.rootTarget) {\n      return;\n    }\n    const mappers = this.mappingTable[e.type];\n    if (mappers) {\n      for (let i = 0, j = mappers.length; i < j; i++) {\n        mappers[i].fn(e);\n      }\n    } else {\n      warn(`[EventBoundary]: Event mapping not defined for ${e.type}`);\n    }\n  }\n  /**\n   * Finds the Container that is the target of a event at the given coordinates.\n   *\n   * The passed (x,y) coordinates are in the world space above this event boundary.\n   * @param x - The x coordinate of the event.\n   * @param y - The y coordinate of the event.\n   */\n  hitTest(x, y) {\n    EventsTicker.pauseUpdate = true;\n    const useMove = this._isPointerMoveEvent && this.enableGlobalMoveEvents;\n    const fn = useMove ? \"hitTestMoveRecursive\" : \"hitTestRecursive\";\n    const invertedPath = this[fn](\n      this.rootTarget,\n      this.rootTarget.eventMode,\n      tempHitLocation.set(x, y),\n      this.hitTestFn,\n      this.hitPruneFn\n    );\n    return invertedPath && invertedPath[0];\n  }\n  /**\n   * Propagate the passed event from from {@link EventBoundary.rootTarget this.rootTarget} to its\n   * target {@code e.target}.\n   * @param e - The event to propagate.\n   * @param type - The type of event to propagate. Defaults to `e.type`.\n   */\n  propagate(e, type) {\n    if (!e.target) {\n      return;\n    }\n    const composedPath = e.composedPath();\n    e.eventPhase = e.CAPTURING_PHASE;\n    for (let i = 0, j = composedPath.length - 1; i < j; i++) {\n      e.currentTarget = composedPath[i];\n      this.notifyTarget(e, type);\n      if (e.propagationStopped || e.propagationImmediatelyStopped)\n        return;\n    }\n    e.eventPhase = e.AT_TARGET;\n    e.currentTarget = e.target;\n    this.notifyTarget(e, type);\n    if (e.propagationStopped || e.propagationImmediatelyStopped)\n      return;\n    e.eventPhase = e.BUBBLING_PHASE;\n    for (let i = composedPath.length - 2; i >= 0; i--) {\n      e.currentTarget = composedPath[i];\n      this.notifyTarget(e, type);\n      if (e.propagationStopped || e.propagationImmediatelyStopped)\n        return;\n    }\n  }\n  /**\n   * Emits the event {@code e} to all interactive containers. The event is propagated in the bubbling phase always.\n   *\n   * This is used in the `globalpointermove` event.\n   * @param e - The emitted event.\n   * @param type - The listeners to notify.\n   * @param targets - The targets to notify.\n   */\n  all(e, type, targets = this._allInteractiveElements) {\n    if (targets.length === 0)\n      return;\n    e.eventPhase = e.BUBBLING_PHASE;\n    const events = Array.isArray(type) ? type : [type];\n    for (let i = targets.length - 1; i >= 0; i--) {\n      events.forEach((event) => {\n        e.currentTarget = targets[i];\n        this.notifyTarget(e, event);\n      });\n    }\n  }\n  /**\n   * Finds the propagation path from {@link EventBoundary.rootTarget rootTarget} to the passed\n   * {@code target}. The last element in the path is {@code target}.\n   * @param target - The target to find the propagation path to.\n   */\n  propagationPath(target) {\n    const propagationPath = [target];\n    for (let i = 0; i < PROPAGATION_LIMIT && (target !== this.rootTarget && target.parent); i++) {\n      if (!target.parent) {\n        throw new Error(\"Cannot find propagation path to disconnected target\");\n      }\n      propagationPath.push(target.parent);\n      target = target.parent;\n    }\n    propagationPath.reverse();\n    return propagationPath;\n  }\n  hitTestMoveRecursive(currentTarget, eventMode, location, testFn, pruneFn, ignore = false) {\n    let shouldReturn = false;\n    if (this._interactivePrune(currentTarget))\n      return null;\n    if (currentTarget.eventMode === \"dynamic\" || eventMode === \"dynamic\") {\n      EventsTicker.pauseUpdate = false;\n    }\n    if (currentTarget.interactiveChildren && currentTarget.children) {\n      const children = currentTarget.children;\n      for (let i = children.length - 1; i >= 0; i--) {\n        const child = children[i];\n        const nestedHit = this.hitTestMoveRecursive(\n          child,\n          this._isInteractive(eventMode) ? eventMode : child.eventMode,\n          location,\n          testFn,\n          pruneFn,\n          ignore || pruneFn(currentTarget, location)\n        );\n        if (nestedHit) {\n          if (nestedHit.length > 0 && !nestedHit[nestedHit.length - 1].parent) {\n            continue;\n          }\n          const isInteractive = currentTarget.isInteractive();\n          if (nestedHit.length > 0 || isInteractive) {\n            if (isInteractive)\n              this._allInteractiveElements.push(currentTarget);\n            nestedHit.push(currentTarget);\n          }\n          if (this._hitElements.length === 0)\n            this._hitElements = nestedHit;\n          shouldReturn = true;\n        }\n      }\n    }\n    const isInteractiveMode = this._isInteractive(eventMode);\n    const isInteractiveTarget = currentTarget.isInteractive();\n    if (isInteractiveTarget && isInteractiveTarget)\n      this._allInteractiveElements.push(currentTarget);\n    if (ignore || this._hitElements.length > 0)\n      return null;\n    if (shouldReturn)\n      return this._hitElements;\n    if (isInteractiveMode && (!pruneFn(currentTarget, location) && testFn(currentTarget, location))) {\n      return isInteractiveTarget ? [currentTarget] : [];\n    }\n    return null;\n  }\n  /**\n   * Recursive implementation for {@link EventBoundary.hitTest hitTest}.\n   * @param currentTarget - The Container that is to be hit tested.\n   * @param eventMode - The event mode for the `currentTarget` or one of its parents.\n   * @param location - The location that is being tested for overlap.\n   * @param testFn - Callback that determines whether the target passes hit testing. This callback\n   *  can assume that `pruneFn` failed to prune the container.\n   * @param pruneFn - Callback that determiness whether the target and all of its children\n   *  cannot pass the hit test. It is used as a preliminary optimization to prune entire subtrees\n   *  of the scene graph.\n   * @returns An array holding the hit testing target and all its ancestors in order. The first element\n   *  is the target itself and the last is {@link EventBoundary.rootTarget rootTarget}. This is the opposite\n   *  order w.r.t. the propagation path. If no hit testing target is found, null is returned.\n   */\n  hitTestRecursive(currentTarget, eventMode, location, testFn, pruneFn) {\n    if (this._interactivePrune(currentTarget) || pruneFn(currentTarget, location)) {\n      return null;\n    }\n    if (currentTarget.eventMode === \"dynamic\" || eventMode === \"dynamic\") {\n      EventsTicker.pauseUpdate = false;\n    }\n    if (currentTarget.interactiveChildren && currentTarget.children) {\n      const children = currentTarget.children;\n      const relativeLocation = location;\n      for (let i = children.length - 1; i >= 0; i--) {\n        const child = children[i];\n        const nestedHit = this.hitTestRecursive(\n          child,\n          this._isInteractive(eventMode) ? eventMode : child.eventMode,\n          relativeLocation,\n          testFn,\n          pruneFn\n        );\n        if (nestedHit) {\n          if (nestedHit.length > 0 && !nestedHit[nestedHit.length - 1].parent) {\n            continue;\n          }\n          const isInteractive = currentTarget.isInteractive();\n          if (nestedHit.length > 0 || isInteractive)\n            nestedHit.push(currentTarget);\n          return nestedHit;\n        }\n      }\n    }\n    const isInteractiveMode = this._isInteractive(eventMode);\n    const isInteractiveTarget = currentTarget.isInteractive();\n    if (isInteractiveMode && testFn(currentTarget, location)) {\n      return isInteractiveTarget ? [currentTarget] : [];\n    }\n    return null;\n  }\n  _isInteractive(int) {\n    return int === \"static\" || int === \"dynamic\";\n  }\n  _interactivePrune(container) {\n    if (!container || !container.visible || !container.renderable) {\n      return true;\n    }\n    if (container.eventMode === \"none\") {\n      return true;\n    }\n    if (container.eventMode === \"passive\" && !container.interactiveChildren) {\n      return true;\n    }\n    return false;\n  }\n  /**\n   * Checks whether the container or any of its children cannot pass the hit test at all.\n   *\n   * {@link EventBoundary}'s implementation uses the {@link Container.hitArea hitArea}\n   * and {@link Container._mask} for pruning.\n   * @param container - The container to prune.\n   * @param location - The location to test for overlap.\n   */\n  hitPruneFn(container, location) {\n    if (container.hitArea) {\n      container.worldTransform.applyInverse(location, tempLocalMapping);\n      if (!container.hitArea.contains(tempLocalMapping.x, tempLocalMapping.y)) {\n        return true;\n      }\n    }\n    if (container.effects && container.effects.length) {\n      for (let i = 0; i < container.effects.length; i++) {\n        const effect = container.effects[i];\n        if (effect.containsPoint) {\n          const effectContainsPoint = effect.containsPoint(location, this.hitTestFn);\n          if (!effectContainsPoint) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n  /**\n   * Checks whether the container passes hit testing for the given location.\n   * @param container - The container to test.\n   * @param location - The location to test for overlap.\n   * @returns - Whether `container` passes hit testing for `location`.\n   */\n  hitTestFn(container, location) {\n    if (container.hitArea) {\n      return true;\n    }\n    if (container?.containsPoint) {\n      container.worldTransform.applyInverse(location, tempLocalMapping);\n      return container.containsPoint(tempLocalMapping);\n    }\n    return false;\n  }\n  /**\n   * Notify all the listeners to the event's `currentTarget`.\n   *\n   * If the `currentTarget` contains the property `on<type>`, then it is called here,\n   * simulating the behavior from version 6.x and prior.\n   * @param e - The event passed to the target.\n   * @param type - The type of event to notify. Defaults to `e.type`.\n   */\n  notifyTarget(e, type) {\n    type = type ?? e.type;\n    const handlerKey = `on${type}`;\n    e.currentTarget[handlerKey]?.(e);\n    const key = e.eventPhase === e.CAPTURING_PHASE || e.eventPhase === e.AT_TARGET ? `${type}capture` : type;\n    this._notifyListeners(e, key);\n    if (e.eventPhase === e.AT_TARGET) {\n      this._notifyListeners(e, type);\n    }\n  }\n  /**\n   * Maps the upstream `pointerdown` events to a downstream `pointerdown` event.\n   *\n   * `touchstart`, `rightdown`, `mousedown` events are also dispatched for specific pointer types.\n   * @param from - The upstream `pointerdown` event.\n   */\n  mapPointerDown(from) {\n    if (!(from instanceof FederatedPointerEvent)) {\n      warn(\"EventBoundary cannot map a non-pointer event as a pointer event\");\n      return;\n    }\n    const e = this.createPointerEvent(from);\n    this.dispatchEvent(e, \"pointerdown\");\n    if (e.pointerType === \"touch\") {\n      this.dispatchEvent(e, \"touchstart\");\n    } else if (e.pointerType === \"mouse\" || e.pointerType === \"pen\") {\n      const isRightButton = e.button === 2;\n      this.dispatchEvent(e, isRightButton ? \"rightdown\" : \"mousedown\");\n    }\n    const trackingData = this.trackingData(from.pointerId);\n    trackingData.pressTargetsByButton[from.button] = e.composedPath();\n    this.freeEvent(e);\n  }\n  /**\n   * Maps the upstream `pointermove` to downstream `pointerout`, `pointerover`, and `pointermove` events, in that order.\n   *\n   * The tracking data for the specific pointer has an updated `overTarget`. `mouseout`, `mouseover`,\n   * `mousemove`, and `touchmove` events are fired as well for specific pointer types.\n   * @param from - The upstream `pointermove` event.\n   */\n  mapPointerMove(from) {\n    if (!(from instanceof FederatedPointerEvent)) {\n      warn(\"EventBoundary cannot map a non-pointer event as a pointer event\");\n      return;\n    }\n    this._allInteractiveElements.length = 0;\n    this._hitElements.length = 0;\n    this._isPointerMoveEvent = true;\n    const e = this.createPointerEvent(from);\n    this._isPointerMoveEvent = false;\n    const isMouse = e.pointerType === \"mouse\" || e.pointerType === \"pen\";\n    const trackingData = this.trackingData(from.pointerId);\n    const outTarget = this.findMountedTarget(trackingData.overTargets);\n    if (trackingData.overTargets?.length > 0 && outTarget !== e.target) {\n      const outType = from.type === \"mousemove\" ? \"mouseout\" : \"pointerout\";\n      const outEvent = this.createPointerEvent(from, outType, outTarget);\n      this.dispatchEvent(outEvent, \"pointerout\");\n      if (isMouse)\n        this.dispatchEvent(outEvent, \"mouseout\");\n      if (!e.composedPath().includes(outTarget)) {\n        const leaveEvent = this.createPointerEvent(from, \"pointerleave\", outTarget);\n        leaveEvent.eventPhase = leaveEvent.AT_TARGET;\n        while (leaveEvent.target && !e.composedPath().includes(leaveEvent.target)) {\n          leaveEvent.currentTarget = leaveEvent.target;\n          this.notifyTarget(leaveEvent);\n          if (isMouse)\n            this.notifyTarget(leaveEvent, \"mouseleave\");\n          leaveEvent.target = leaveEvent.target.parent;\n        }\n        this.freeEvent(leaveEvent);\n      }\n      this.freeEvent(outEvent);\n    }\n    if (outTarget !== e.target) {\n      const overType = from.type === \"mousemove\" ? \"mouseover\" : \"pointerover\";\n      const overEvent = this.clonePointerEvent(e, overType);\n      this.dispatchEvent(overEvent, \"pointerover\");\n      if (isMouse)\n        this.dispatchEvent(overEvent, \"mouseover\");\n      let overTargetAncestor = outTarget?.parent;\n      while (overTargetAncestor && overTargetAncestor !== this.rootTarget.parent) {\n        if (overTargetAncestor === e.target)\n          break;\n        overTargetAncestor = overTargetAncestor.parent;\n      }\n      const didPointerEnter = !overTargetAncestor || overTargetAncestor === this.rootTarget.parent;\n      if (didPointerEnter) {\n        const enterEvent = this.clonePointerEvent(e, \"pointerenter\");\n        enterEvent.eventPhase = enterEvent.AT_TARGET;\n        while (enterEvent.target && enterEvent.target !== outTarget && enterEvent.target !== this.rootTarget.parent) {\n          enterEvent.currentTarget = enterEvent.target;\n          this.notifyTarget(enterEvent);\n          if (isMouse)\n            this.notifyTarget(enterEvent, \"mouseenter\");\n          enterEvent.target = enterEvent.target.parent;\n        }\n        this.freeEvent(enterEvent);\n      }\n      this.freeEvent(overEvent);\n    }\n    const allMethods = [];\n    const allowGlobalPointerEvents = this.enableGlobalMoveEvents ?? true;\n    this.moveOnAll ? allMethods.push(\"pointermove\") : this.dispatchEvent(e, \"pointermove\");\n    allowGlobalPointerEvents && allMethods.push(\"globalpointermove\");\n    if (e.pointerType === \"touch\") {\n      this.moveOnAll ? allMethods.splice(1, 0, \"touchmove\") : this.dispatchEvent(e, \"touchmove\");\n      allowGlobalPointerEvents && allMethods.push(\"globaltouchmove\");\n    }\n    if (isMouse) {\n      this.moveOnAll ? allMethods.splice(1, 0, \"mousemove\") : this.dispatchEvent(e, \"mousemove\");\n      allowGlobalPointerEvents && allMethods.push(\"globalmousemove\");\n      this.cursor = e.target?.cursor;\n    }\n    if (allMethods.length > 0) {\n      this.all(e, allMethods);\n    }\n    this._allInteractiveElements.length = 0;\n    this._hitElements.length = 0;\n    trackingData.overTargets = e.composedPath();\n    this.freeEvent(e);\n  }\n  /**\n   * Maps the upstream `pointerover` to downstream `pointerover` and `pointerenter` events, in that order.\n   *\n   * The tracking data for the specific pointer gets a new `overTarget`.\n   * @param from - The upstream `pointerover` event.\n   */\n  mapPointerOver(from) {\n    if (!(from instanceof FederatedPointerEvent)) {\n      warn(\"EventBoundary cannot map a non-pointer event as a pointer event\");\n      return;\n    }\n    const trackingData = this.trackingData(from.pointerId);\n    const e = this.createPointerEvent(from);\n    const isMouse = e.pointerType === \"mouse\" || e.pointerType === \"pen\";\n    this.dispatchEvent(e, \"pointerover\");\n    if (isMouse)\n      this.dispatchEvent(e, \"mouseover\");\n    if (e.pointerType === \"mouse\")\n      this.cursor = e.target?.cursor;\n    const enterEvent = this.clonePointerEvent(e, \"pointerenter\");\n    enterEvent.eventPhase = enterEvent.AT_TARGET;\n    while (enterEvent.target && enterEvent.target !== this.rootTarget.parent) {\n      enterEvent.currentTarget = enterEvent.target;\n      this.notifyTarget(enterEvent);\n      if (isMouse)\n        this.notifyTarget(enterEvent, \"mouseenter\");\n      enterEvent.target = enterEvent.target.parent;\n    }\n    trackingData.overTargets = e.composedPath();\n    this.freeEvent(e);\n    this.freeEvent(enterEvent);\n  }\n  /**\n   * Maps the upstream `pointerout` to downstream `pointerout`, `pointerleave` events, in that order.\n   *\n   * The tracking data for the specific pointer is cleared of a `overTarget`.\n   * @param from - The upstream `pointerout` event.\n   */\n  mapPointerOut(from) {\n    if (!(from instanceof FederatedPointerEvent)) {\n      warn(\"EventBoundary cannot map a non-pointer event as a pointer event\");\n      return;\n    }\n    const trackingData = this.trackingData(from.pointerId);\n    if (trackingData.overTargets) {\n      const isMouse = from.pointerType === \"mouse\" || from.pointerType === \"pen\";\n      const outTarget = this.findMountedTarget(trackingData.overTargets);\n      const outEvent = this.createPointerEvent(from, \"pointerout\", outTarget);\n      this.dispatchEvent(outEvent);\n      if (isMouse)\n        this.dispatchEvent(outEvent, \"mouseout\");\n      const leaveEvent = this.createPointerEvent(from, \"pointerleave\", outTarget);\n      leaveEvent.eventPhase = leaveEvent.AT_TARGET;\n      while (leaveEvent.target && leaveEvent.target !== this.rootTarget.parent) {\n        leaveEvent.currentTarget = leaveEvent.target;\n        this.notifyTarget(leaveEvent);\n        if (isMouse)\n          this.notifyTarget(leaveEvent, \"mouseleave\");\n        leaveEvent.target = leaveEvent.target.parent;\n      }\n      trackingData.overTargets = null;\n      this.freeEvent(outEvent);\n      this.freeEvent(leaveEvent);\n    }\n    this.cursor = null;\n  }\n  /**\n   * Maps the upstream `pointerup` event to downstream `pointerup`, `pointerupoutside`,\n   * and `click`/`rightclick`/`pointertap` events, in that order.\n   *\n   * The `pointerupoutside` event bubbles from the original `pointerdown` target to the most specific\n   * ancestor of the `pointerdown` and `pointerup` targets, which is also the `click` event's target. `touchend`,\n   * `rightup`, `mouseup`, `touchendoutside`, `rightupoutside`, `mouseupoutside`, and `tap` are fired as well for\n   * specific pointer types.\n   * @param from - The upstream `pointerup` event.\n   */\n  mapPointerUp(from) {\n    if (!(from instanceof FederatedPointerEvent)) {\n      warn(\"EventBoundary cannot map a non-pointer event as a pointer event\");\n      return;\n    }\n    const now = performance.now();\n    const e = this.createPointerEvent(from);\n    this.dispatchEvent(e, \"pointerup\");\n    if (e.pointerType === \"touch\") {\n      this.dispatchEvent(e, \"touchend\");\n    } else if (e.pointerType === \"mouse\" || e.pointerType === \"pen\") {\n      const isRightButton = e.button === 2;\n      this.dispatchEvent(e, isRightButton ? \"rightup\" : \"mouseup\");\n    }\n    const trackingData = this.trackingData(from.pointerId);\n    const pressTarget = this.findMountedTarget(trackingData.pressTargetsByButton[from.button]);\n    let clickTarget = pressTarget;\n    if (pressTarget && !e.composedPath().includes(pressTarget)) {\n      let currentTarget = pressTarget;\n      while (currentTarget && !e.composedPath().includes(currentTarget)) {\n        e.currentTarget = currentTarget;\n        this.notifyTarget(e, \"pointerupoutside\");\n        if (e.pointerType === \"touch\") {\n          this.notifyTarget(e, \"touchendoutside\");\n        } else if (e.pointerType === \"mouse\" || e.pointerType === \"pen\") {\n          const isRightButton = e.button === 2;\n          this.notifyTarget(e, isRightButton ? \"rightupoutside\" : \"mouseupoutside\");\n        }\n        currentTarget = currentTarget.parent;\n      }\n      delete trackingData.pressTargetsByButton[from.button];\n      clickTarget = currentTarget;\n    }\n    if (clickTarget) {\n      const clickEvent = this.clonePointerEvent(e, \"click\");\n      clickEvent.target = clickTarget;\n      clickEvent.path = null;\n      if (!trackingData.clicksByButton[from.button]) {\n        trackingData.clicksByButton[from.button] = {\n          clickCount: 0,\n          target: clickEvent.target,\n          timeStamp: now\n        };\n      }\n      const clickHistory = trackingData.clicksByButton[from.button];\n      if (clickHistory.target === clickEvent.target && now - clickHistory.timeStamp < 200) {\n        ++clickHistory.clickCount;\n      } else {\n        clickHistory.clickCount = 1;\n      }\n      clickHistory.target = clickEvent.target;\n      clickHistory.timeStamp = now;\n      clickEvent.detail = clickHistory.clickCount;\n      if (clickEvent.pointerType === \"mouse\") {\n        const isRightButton = clickEvent.button === 2;\n        this.dispatchEvent(clickEvent, isRightButton ? \"rightclick\" : \"click\");\n      } else if (clickEvent.pointerType === \"touch\") {\n        this.dispatchEvent(clickEvent, \"tap\");\n      }\n      this.dispatchEvent(clickEvent, \"pointertap\");\n      this.freeEvent(clickEvent);\n    }\n    this.freeEvent(e);\n  }\n  /**\n   * Maps the upstream `pointerupoutside` event to a downstream `pointerupoutside` event, bubbling from the original\n   * `pointerdown` target to `rootTarget`.\n   *\n   * (The most specific ancestor of the `pointerdown` event and the `pointerup` event must the\n   * `{@link EventBoundary}'s root because the `pointerup` event occurred outside of the boundary.)\n   *\n   * `touchendoutside`, `mouseupoutside`, and `rightupoutside` events are fired as well for specific pointer\n   * types. The tracking data for the specific pointer is cleared of a `pressTarget`.\n   * @param from - The upstream `pointerupoutside` event.\n   */\n  mapPointerUpOutside(from) {\n    if (!(from instanceof FederatedPointerEvent)) {\n      warn(\"EventBoundary cannot map a non-pointer event as a pointer event\");\n      return;\n    }\n    const trackingData = this.trackingData(from.pointerId);\n    const pressTarget = this.findMountedTarget(trackingData.pressTargetsByButton[from.button]);\n    const e = this.createPointerEvent(from);\n    if (pressTarget) {\n      let currentTarget = pressTarget;\n      while (currentTarget) {\n        e.currentTarget = currentTarget;\n        this.notifyTarget(e, \"pointerupoutside\");\n        if (e.pointerType === \"touch\") {\n          this.notifyTarget(e, \"touchendoutside\");\n        } else if (e.pointerType === \"mouse\" || e.pointerType === \"pen\") {\n          this.notifyTarget(e, e.button === 2 ? \"rightupoutside\" : \"mouseupoutside\");\n        }\n        currentTarget = currentTarget.parent;\n      }\n      delete trackingData.pressTargetsByButton[from.button];\n    }\n    this.freeEvent(e);\n  }\n  /**\n   * Maps the upstream `wheel` event to a downstream `wheel` event.\n   * @param from - The upstream `wheel` event.\n   */\n  mapWheel(from) {\n    if (!(from instanceof FederatedWheelEvent)) {\n      warn(\"EventBoundary cannot map a non-wheel event as a wheel event\");\n      return;\n    }\n    const wheelEvent = this.createWheelEvent(from);\n    this.dispatchEvent(wheelEvent);\n    this.freeEvent(wheelEvent);\n  }\n  /**\n   * Finds the most specific event-target in the given propagation path that is still mounted in the scene graph.\n   *\n   * This is used to find the correct `pointerup` and `pointerout` target in the case that the original `pointerdown`\n   * or `pointerover` target was unmounted from the scene graph.\n   * @param propagationPath - The propagation path was valid in the past.\n   * @returns - The most specific event-target still mounted at the same location in the scene graph.\n   */\n  findMountedTarget(propagationPath) {\n    if (!propagationPath) {\n      return null;\n    }\n    let currentTarget = propagationPath[0];\n    for (let i = 1; i < propagationPath.length; i++) {\n      if (propagationPath[i].parent === currentTarget) {\n        currentTarget = propagationPath[i];\n      } else {\n        break;\n      }\n    }\n    return currentTarget;\n  }\n  /**\n   * Creates an event whose {@code originalEvent} is {@code from}, with an optional `type` and `target` override.\n   *\n   * The event is allocated using {@link EventBoundary#allocateEvent this.allocateEvent}.\n   * @param from - The {@code originalEvent} for the returned event.\n   * @param [type=from.type] - The type of the returned event.\n   * @param target - The target of the returned event.\n   */\n  createPointerEvent(from, type, target) {\n    const event = this.allocateEvent(FederatedPointerEvent);\n    this.copyPointerData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from;\n    event.target = target ?? this.hitTest(event.global.x, event.global.y) ?? this._hitElements[0];\n    if (typeof type === \"string\") {\n      event.type = type;\n    }\n    return event;\n  }\n  /**\n   * Creates a wheel event whose {@code originalEvent} is {@code from}.\n   *\n   * The event is allocated using {@link EventBoundary#allocateEvent this.allocateEvent}.\n   * @param from - The upstream wheel event.\n   */\n  createWheelEvent(from) {\n    const event = this.allocateEvent(FederatedWheelEvent);\n    this.copyWheelData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from;\n    event.target = this.hitTest(event.global.x, event.global.y);\n    return event;\n  }\n  /**\n   * Clones the event {@code from}, with an optional {@code type} override.\n   *\n   * The event is allocated using {@link EventBoundary#allocateEvent this.allocateEvent}.\n   * @param from - The event to clone.\n   * @param [type=from.type] - The type of the returned event.\n   */\n  clonePointerEvent(from, type) {\n    const event = this.allocateEvent(FederatedPointerEvent);\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from.originalEvent;\n    this.copyPointerData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n    event.target = from.target;\n    event.path = from.composedPath().slice();\n    event.type = type ?? event.type;\n    return event;\n  }\n  /**\n   * Copies wheel {@link FederatedWheelEvent} data from {@code from} into {@code to}.\n   *\n   * The following properties are copied:\n   * + deltaMode\n   * + deltaX\n   * + deltaY\n   * + deltaZ\n   * @param from - The event to copy data from.\n   * @param to - The event to copy data into.\n   */\n  copyWheelData(from, to) {\n    to.deltaMode = from.deltaMode;\n    to.deltaX = from.deltaX;\n    to.deltaY = from.deltaY;\n    to.deltaZ = from.deltaZ;\n  }\n  /**\n   * Copies pointer {@link FederatedPointerEvent} data from {@code from} into {@code to}.\n   *\n   * The following properties are copied:\n   * + pointerId\n   * + width\n   * + height\n   * + isPrimary\n   * + pointerType\n   * + pressure\n   * + tangentialPressure\n   * + tiltX\n   * + tiltY\n   * @param from - The event to copy data from.\n   * @param to - The event to copy data into.\n   */\n  copyPointerData(from, to) {\n    if (!(from instanceof FederatedPointerEvent && to instanceof FederatedPointerEvent))\n      return;\n    to.pointerId = from.pointerId;\n    to.width = from.width;\n    to.height = from.height;\n    to.isPrimary = from.isPrimary;\n    to.pointerType = from.pointerType;\n    to.pressure = from.pressure;\n    to.tangentialPressure = from.tangentialPressure;\n    to.tiltX = from.tiltX;\n    to.tiltY = from.tiltY;\n    to.twist = from.twist;\n  }\n  /**\n   * Copies mouse {@link FederatedMouseEvent} data from {@code from} to {@code to}.\n   *\n   * The following properties are copied:\n   * + altKey\n   * + button\n   * + buttons\n   * + clientX\n   * + clientY\n   * + metaKey\n   * + movementX\n   * + movementY\n   * + pageX\n   * + pageY\n   * + x\n   * + y\n   * + screen\n   * + shiftKey\n   * + global\n   * @param from - The event to copy data from.\n   * @param to - The event to copy data into.\n   */\n  copyMouseData(from, to) {\n    if (!(from instanceof FederatedMouseEvent && to instanceof FederatedMouseEvent))\n      return;\n    to.altKey = from.altKey;\n    to.button = from.button;\n    to.buttons = from.buttons;\n    to.client.copyFrom(from.client);\n    to.ctrlKey = from.ctrlKey;\n    to.metaKey = from.metaKey;\n    to.movement.copyFrom(from.movement);\n    to.screen.copyFrom(from.screen);\n    to.shiftKey = from.shiftKey;\n    to.global.copyFrom(from.global);\n  }\n  /**\n   * Copies base {@link FederatedEvent} data from {@code from} into {@code to}.\n   *\n   * The following properties are copied:\n   * + isTrusted\n   * + srcElement\n   * + timeStamp\n   * + type\n   * @param from - The event to copy data from.\n   * @param to - The event to copy data into.\n   */\n  copyData(from, to) {\n    to.isTrusted = from.isTrusted;\n    to.srcElement = from.srcElement;\n    to.timeStamp = performance.now();\n    to.type = from.type;\n    to.detail = from.detail;\n    to.view = from.view;\n    to.which = from.which;\n    to.layer.copyFrom(from.layer);\n    to.page.copyFrom(from.page);\n  }\n  /**\n   * @param id - The pointer ID.\n   * @returns The tracking data stored for the given pointer. If no data exists, a blank\n   *  state will be created.\n   */\n  trackingData(id) {\n    if (!this.mappingState.trackingData[id]) {\n      this.mappingState.trackingData[id] = {\n        pressTargetsByButton: {},\n        clicksByButton: {},\n        overTarget: null\n      };\n    }\n    return this.mappingState.trackingData[id];\n  }\n  /**\n   * Allocate a specific type of event from {@link EventBoundary#eventPool this.eventPool}.\n   *\n   * This allocation is constructor-agnostic, as long as it only takes one argument - this event\n   * boundary.\n   * @param constructor - The event's constructor.\n   */\n  allocateEvent(constructor) {\n    if (!this.eventPool.has(constructor)) {\n      this.eventPool.set(constructor, []);\n    }\n    const event = this.eventPool.get(constructor).pop() || new constructor(this);\n    event.eventPhase = event.NONE;\n    event.currentTarget = null;\n    event.path = null;\n    event.target = null;\n    return event;\n  }\n  /**\n   * Frees the event and puts it back into the event pool.\n   *\n   * It is illegal to reuse the event until it is allocated again, using `this.allocateEvent`.\n   *\n   * It is also advised that events not allocated from {@link EventBoundary#allocateEvent this.allocateEvent}\n   * not be freed. This is because of the possibility that the same event is freed twice, which can cause\n   * it to be allocated twice & result in overwriting.\n   * @param event - The event to be freed.\n   * @throws Error if the event is managed by another event boundary.\n   */\n  freeEvent(event) {\n    if (event.manager !== this)\n      throw new Error(\"It is illegal to free an event not managed by this EventBoundary!\");\n    const constructor = event.constructor;\n    if (!this.eventPool.has(constructor)) {\n      this.eventPool.set(constructor, []);\n    }\n    this.eventPool.get(constructor).push(event);\n  }\n  /**\n   * Similar to {@link EventEmitter.emit}, except it stops if the `propagationImmediatelyStopped` flag\n   * is set on the event.\n   * @param e - The event to call each listener with.\n   * @param type - The event key.\n   */\n  _notifyListeners(e, type) {\n    const listeners = e.currentTarget._events[type];\n    if (!listeners)\n      return;\n    if (!e.currentTarget.isInteractive())\n      return;\n    if (\"fn\" in listeners) {\n      if (listeners.once)\n        e.currentTarget.removeListener(type, listeners.fn, void 0, true);\n      listeners.fn.call(listeners.context, e);\n    } else {\n      for (let i = 0, j = listeners.length; i < j && !e.propagationImmediatelyStopped; i++) {\n        if (listeners[i].once)\n          e.currentTarget.removeListener(type, listeners[i].fn, void 0, true);\n        listeners[i].fn.call(listeners[i].context, e);\n      }\n    }\n  }\n}\n\nexport { EventBoundary };\n//# sourceMappingURL=EventBoundary.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\nimport { EventBoundary } from './EventBoundary.mjs';\nimport { EventsTicker } from './EventTicker.mjs';\nimport { FederatedPointerEvent } from './FederatedPointerEvent.mjs';\nimport { FederatedWheelEvent } from './FederatedWheelEvent.mjs';\n\n\"use strict\";\nconst MOUSE_POINTER_ID = 1;\nconst TOUCH_TO_POINTER = {\n  touchstart: \"pointerdown\",\n  touchend: \"pointerup\",\n  touchendoutside: \"pointerupoutside\",\n  touchmove: \"pointermove\",\n  touchcancel: \"pointercancel\"\n};\nconst _EventSystem = class _EventSystem {\n  /**\n   * @param {Renderer} renderer\n   */\n  constructor(renderer) {\n    /** Does the device support touch events https://www.w3.org/TR/touch-events/ */\n    this.supportsTouchEvents = \"ontouchstart\" in globalThis;\n    /** Does the device support pointer events https://www.w3.org/Submission/pointer-events/ */\n    this.supportsPointerEvents = !!globalThis.PointerEvent;\n    /**\n     * The DOM element to which the root event listeners are bound. This is automatically set to\n     * the renderer's {@link Renderer#view view}.\n     */\n    this.domElement = null;\n    /** The resolution used to convert between the DOM client space into world space. */\n    this.resolution = 1;\n    this.renderer = renderer;\n    this.rootBoundary = new EventBoundary(null);\n    EventsTicker.init(this);\n    this.autoPreventDefault = true;\n    this._eventsAdded = false;\n    this._rootPointerEvent = new FederatedPointerEvent(null);\n    this._rootWheelEvent = new FederatedWheelEvent(null);\n    this.cursorStyles = {\n      default: \"inherit\",\n      pointer: \"pointer\"\n    };\n    this.features = new Proxy({ ..._EventSystem.defaultEventFeatures }, {\n      set: (target, key, value) => {\n        if (key === \"globalMove\") {\n          this.rootBoundary.enableGlobalMoveEvents = value;\n        }\n        target[key] = value;\n        return true;\n      }\n    });\n    this._onPointerDown = this._onPointerDown.bind(this);\n    this._onPointerMove = this._onPointerMove.bind(this);\n    this._onPointerUp = this._onPointerUp.bind(this);\n    this._onPointerOverOut = this._onPointerOverOut.bind(this);\n    this.onWheel = this.onWheel.bind(this);\n  }\n  /**\n   * The default interaction mode for all display objects.\n   * @see Container.eventMode\n   * @type {EventMode}\n   * @readonly\n   * @since 7.2.0\n   */\n  static get defaultEventMode() {\n    return this._defaultEventMode;\n  }\n  /**\n   * Runner init called, view is available at this point.\n   * @ignore\n   */\n  init(options) {\n    const { canvas, resolution } = this.renderer;\n    this.setTargetElement(canvas);\n    this.resolution = resolution;\n    _EventSystem._defaultEventMode = options.eventMode ?? \"passive\";\n    Object.assign(this.features, options.eventFeatures ?? {});\n    this.rootBoundary.enableGlobalMoveEvents = this.features.globalMove;\n  }\n  /**\n   * Handle changing resolution.\n   * @ignore\n   */\n  resolutionChange(resolution) {\n    this.resolution = resolution;\n  }\n  /** Destroys all event listeners and detaches the renderer. */\n  destroy() {\n    this.setTargetElement(null);\n    this.renderer = null;\n    this._currentCursor = null;\n  }\n  /**\n   * Sets the current cursor mode, handling any callbacks or CSS style changes.\n   * @param mode - cursor mode, a key from the cursorStyles dictionary\n   */\n  setCursor(mode) {\n    mode = mode || \"default\";\n    let applyStyles = true;\n    if (globalThis.OffscreenCanvas && this.domElement instanceof OffscreenCanvas) {\n      applyStyles = false;\n    }\n    if (this._currentCursor === mode) {\n      return;\n    }\n    this._currentCursor = mode;\n    const style = this.cursorStyles[mode];\n    if (style) {\n      switch (typeof style) {\n        case \"string\":\n          if (applyStyles) {\n            this.domElement.style.cursor = style;\n          }\n          break;\n        case \"function\":\n          style(mode);\n          break;\n        case \"object\":\n          if (applyStyles) {\n            Object.assign(this.domElement.style, style);\n          }\n          break;\n      }\n    } else if (applyStyles && typeof mode === \"string\" && !Object.prototype.hasOwnProperty.call(this.cursorStyles, mode)) {\n      this.domElement.style.cursor = mode;\n    }\n  }\n  /**\n   * The global pointer event.\n   * Useful for getting the pointer position without listening to events.\n   * @since 7.2.0\n   */\n  get pointer() {\n    return this._rootPointerEvent;\n  }\n  /**\n   * Event handler for pointer down events on {@link EventSystem#domElement this.domElement}.\n   * @param nativeEvent - The native mouse/pointer/touch event.\n   */\n  _onPointerDown(nativeEvent) {\n    if (!this.features.click)\n      return;\n    this.rootBoundary.rootTarget = this.renderer.lastObjectRendered;\n    const events = this._normalizeToPointerData(nativeEvent);\n    if (this.autoPreventDefault && events[0].isNormalized) {\n      const cancelable = nativeEvent.cancelable || !(\"cancelable\" in nativeEvent);\n      if (cancelable) {\n        nativeEvent.preventDefault();\n      }\n    }\n    for (let i = 0, j = events.length; i < j; i++) {\n      const nativeEvent2 = events[i];\n      const federatedEvent = this._bootstrapEvent(this._rootPointerEvent, nativeEvent2);\n      this.rootBoundary.mapEvent(federatedEvent);\n    }\n    this.setCursor(this.rootBoundary.cursor);\n  }\n  /**\n   * Event handler for pointer move events on on {@link EventSystem#domElement this.domElement}.\n   * @param nativeEvent - The native mouse/pointer/touch events.\n   */\n  _onPointerMove(nativeEvent) {\n    if (!this.features.move)\n      return;\n    this.rootBoundary.rootTarget = this.renderer.lastObjectRendered;\n    EventsTicker.pointerMoved();\n    const normalizedEvents = this._normalizeToPointerData(nativeEvent);\n    for (let i = 0, j = normalizedEvents.length; i < j; i++) {\n      const event = this._bootstrapEvent(this._rootPointerEvent, normalizedEvents[i]);\n      this.rootBoundary.mapEvent(event);\n    }\n    this.setCursor(this.rootBoundary.cursor);\n  }\n  /**\n   * Event handler for pointer up events on {@link EventSystem#domElement this.domElement}.\n   * @param nativeEvent - The native mouse/pointer/touch event.\n   */\n  _onPointerUp(nativeEvent) {\n    if (!this.features.click)\n      return;\n    this.rootBoundary.rootTarget = this.renderer.lastObjectRendered;\n    let target = nativeEvent.target;\n    if (nativeEvent.composedPath && nativeEvent.composedPath().length > 0) {\n      target = nativeEvent.composedPath()[0];\n    }\n    const outside = target !== this.domElement ? \"outside\" : \"\";\n    const normalizedEvents = this._normalizeToPointerData(nativeEvent);\n    for (let i = 0, j = normalizedEvents.length; i < j; i++) {\n      const event = this._bootstrapEvent(this._rootPointerEvent, normalizedEvents[i]);\n      event.type += outside;\n      this.rootBoundary.mapEvent(event);\n    }\n    this.setCursor(this.rootBoundary.cursor);\n  }\n  /**\n   * Event handler for pointer over & out events on {@link EventSystem#domElement this.domElement}.\n   * @param nativeEvent - The native mouse/pointer/touch event.\n   */\n  _onPointerOverOut(nativeEvent) {\n    if (!this.features.click)\n      return;\n    this.rootBoundary.rootTarget = this.renderer.lastObjectRendered;\n    const normalizedEvents = this._normalizeToPointerData(nativeEvent);\n    for (let i = 0, j = normalizedEvents.length; i < j; i++) {\n      const event = this._bootstrapEvent(this._rootPointerEvent, normalizedEvents[i]);\n      this.rootBoundary.mapEvent(event);\n    }\n    this.setCursor(this.rootBoundary.cursor);\n  }\n  /**\n   * Passive handler for `wheel` events on {@link EventSystem.domElement this.domElement}.\n   * @param nativeEvent - The native wheel event.\n   */\n  onWheel(nativeEvent) {\n    if (!this.features.wheel)\n      return;\n    const wheelEvent = this.normalizeWheelEvent(nativeEvent);\n    this.rootBoundary.rootTarget = this.renderer.lastObjectRendered;\n    this.rootBoundary.mapEvent(wheelEvent);\n  }\n  /**\n   * Sets the {@link EventSystem#domElement domElement} and binds event listeners.\n   *\n   * To deregister the current DOM element without setting a new one, pass {@code null}.\n   * @param element - The new DOM element.\n   */\n  setTargetElement(element) {\n    this._removeEvents();\n    this.domElement = element;\n    EventsTicker.domElement = element;\n    this._addEvents();\n  }\n  /** Register event listeners on {@link Renderer#domElement this.domElement}. */\n  _addEvents() {\n    if (this._eventsAdded || !this.domElement) {\n      return;\n    }\n    EventsTicker.addTickerListener();\n    const style = this.domElement.style;\n    if (style) {\n      if (globalThis.navigator.msPointerEnabled) {\n        style.msContentZooming = \"none\";\n        style.msTouchAction = \"none\";\n      } else if (this.supportsPointerEvents) {\n        style.touchAction = \"none\";\n      }\n    }\n    if (this.supportsPointerEvents) {\n      globalThis.document.addEventListener(\"pointermove\", this._onPointerMove, true);\n      this.domElement.addEventListener(\"pointerdown\", this._onPointerDown, true);\n      this.domElement.addEventListener(\"pointerleave\", this._onPointerOverOut, true);\n      this.domElement.addEventListener(\"pointerover\", this._onPointerOverOut, true);\n      globalThis.addEventListener(\"pointerup\", this._onPointerUp, true);\n    } else {\n      globalThis.document.addEventListener(\"mousemove\", this._onPointerMove, true);\n      this.domElement.addEventListener(\"mousedown\", this._onPointerDown, true);\n      this.domElement.addEventListener(\"mouseout\", this._onPointerOverOut, true);\n      this.domElement.addEventListener(\"mouseover\", this._onPointerOverOut, true);\n      globalThis.addEventListener(\"mouseup\", this._onPointerUp, true);\n      if (this.supportsTouchEvents) {\n        this.domElement.addEventListener(\"touchstart\", this._onPointerDown, true);\n        this.domElement.addEventListener(\"touchend\", this._onPointerUp, true);\n        this.domElement.addEventListener(\"touchmove\", this._onPointerMove, true);\n      }\n    }\n    this.domElement.addEventListener(\"wheel\", this.onWheel, {\n      passive: true,\n      capture: true\n    });\n    this._eventsAdded = true;\n  }\n  /** Unregister event listeners on {@link EventSystem#domElement this.domElement}. */\n  _removeEvents() {\n    if (!this._eventsAdded || !this.domElement) {\n      return;\n    }\n    EventsTicker.removeTickerListener();\n    const style = this.domElement.style;\n    if (style) {\n      if (globalThis.navigator.msPointerEnabled) {\n        style.msContentZooming = \"\";\n        style.msTouchAction = \"\";\n      } else if (this.supportsPointerEvents) {\n        style.touchAction = \"\";\n      }\n    }\n    if (this.supportsPointerEvents) {\n      globalThis.document.removeEventListener(\"pointermove\", this._onPointerMove, true);\n      this.domElement.removeEventListener(\"pointerdown\", this._onPointerDown, true);\n      this.domElement.removeEventListener(\"pointerleave\", this._onPointerOverOut, true);\n      this.domElement.removeEventListener(\"pointerover\", this._onPointerOverOut, true);\n      globalThis.removeEventListener(\"pointerup\", this._onPointerUp, true);\n    } else {\n      globalThis.document.removeEventListener(\"mousemove\", this._onPointerMove, true);\n      this.domElement.removeEventListener(\"mousedown\", this._onPointerDown, true);\n      this.domElement.removeEventListener(\"mouseout\", this._onPointerOverOut, true);\n      this.domElement.removeEventListener(\"mouseover\", this._onPointerOverOut, true);\n      globalThis.removeEventListener(\"mouseup\", this._onPointerUp, true);\n      if (this.supportsTouchEvents) {\n        this.domElement.removeEventListener(\"touchstart\", this._onPointerDown, true);\n        this.domElement.removeEventListener(\"touchend\", this._onPointerUp, true);\n        this.domElement.removeEventListener(\"touchmove\", this._onPointerMove, true);\n      }\n    }\n    this.domElement.removeEventListener(\"wheel\", this.onWheel, true);\n    this.domElement = null;\n    this._eventsAdded = false;\n  }\n  /**\n   * Maps x and y coords from a DOM object and maps them correctly to the PixiJS view. The\n   * resulting value is stored in the point. This takes into account the fact that the DOM\n   * element could be scaled and positioned anywhere on the screen.\n   * @param  {PointData} point - the point that the result will be stored in\n   * @param  {number} x - the x coord of the position to map\n   * @param  {number} y - the y coord of the position to map\n   */\n  mapPositionToPoint(point, x, y) {\n    const rect = this.domElement.isConnected ? this.domElement.getBoundingClientRect() : {\n      x: 0,\n      y: 0,\n      width: this.domElement.width,\n      height: this.domElement.height,\n      left: 0,\n      top: 0\n    };\n    const resolutionMultiplier = 1 / this.resolution;\n    point.x = (x - rect.left) * (this.domElement.width / rect.width) * resolutionMultiplier;\n    point.y = (y - rect.top) * (this.domElement.height / rect.height) * resolutionMultiplier;\n  }\n  /**\n   * Ensures that the original event object contains all data that a regular pointer event would have\n   * @param event - The original event data from a touch or mouse event\n   * @returns An array containing a single normalized pointer event, in the case of a pointer\n   *  or mouse event, or a multiple normalized pointer events if there are multiple changed touches\n   */\n  _normalizeToPointerData(event) {\n    const normalizedEvents = [];\n    if (this.supportsTouchEvents && event instanceof TouchEvent) {\n      for (let i = 0, li = event.changedTouches.length; i < li; i++) {\n        const touch = event.changedTouches[i];\n        if (typeof touch.button === \"undefined\")\n          touch.button = 0;\n        if (typeof touch.buttons === \"undefined\")\n          touch.buttons = 1;\n        if (typeof touch.isPrimary === \"undefined\") {\n          touch.isPrimary = event.touches.length === 1 && event.type === \"touchstart\";\n        }\n        if (typeof touch.width === \"undefined\")\n          touch.width = touch.radiusX || 1;\n        if (typeof touch.height === \"undefined\")\n          touch.height = touch.radiusY || 1;\n        if (typeof touch.tiltX === \"undefined\")\n          touch.tiltX = 0;\n        if (typeof touch.tiltY === \"undefined\")\n          touch.tiltY = 0;\n        if (typeof touch.pointerType === \"undefined\")\n          touch.pointerType = \"touch\";\n        if (typeof touch.pointerId === \"undefined\")\n          touch.pointerId = touch.identifier || 0;\n        if (typeof touch.pressure === \"undefined\")\n          touch.pressure = touch.force || 0.5;\n        if (typeof touch.twist === \"undefined\")\n          touch.twist = 0;\n        if (typeof touch.tangentialPressure === \"undefined\")\n          touch.tangentialPressure = 0;\n        if (typeof touch.layerX === \"undefined\")\n          touch.layerX = touch.offsetX = touch.clientX;\n        if (typeof touch.layerY === \"undefined\")\n          touch.layerY = touch.offsetY = touch.clientY;\n        touch.isNormalized = true;\n        touch.type = event.type;\n        normalizedEvents.push(touch);\n      }\n    } else if (!globalThis.MouseEvent || event instanceof MouseEvent && (!this.supportsPointerEvents || !(event instanceof globalThis.PointerEvent))) {\n      const tempEvent = event;\n      if (typeof tempEvent.isPrimary === \"undefined\")\n        tempEvent.isPrimary = true;\n      if (typeof tempEvent.width === \"undefined\")\n        tempEvent.width = 1;\n      if (typeof tempEvent.height === \"undefined\")\n        tempEvent.height = 1;\n      if (typeof tempEvent.tiltX === \"undefined\")\n        tempEvent.tiltX = 0;\n      if (typeof tempEvent.tiltY === \"undefined\")\n        tempEvent.tiltY = 0;\n      if (typeof tempEvent.pointerType === \"undefined\")\n        tempEvent.pointerType = \"mouse\";\n      if (typeof tempEvent.pointerId === \"undefined\")\n        tempEvent.pointerId = MOUSE_POINTER_ID;\n      if (typeof tempEvent.pressure === \"undefined\")\n        tempEvent.pressure = 0.5;\n      if (typeof tempEvent.twist === \"undefined\")\n        tempEvent.twist = 0;\n      if (typeof tempEvent.tangentialPressure === \"undefined\")\n        tempEvent.tangentialPressure = 0;\n      tempEvent.isNormalized = true;\n      normalizedEvents.push(tempEvent);\n    } else {\n      normalizedEvents.push(event);\n    }\n    return normalizedEvents;\n  }\n  /**\n   * Normalizes the native {@link https://w3c.github.io/uievents/#interface-wheelevent WheelEvent}.\n   *\n   * The returned {@link FederatedWheelEvent} is a shared instance. It will not persist across\n   * multiple native wheel events.\n   * @param nativeEvent - The native wheel event that occurred on the canvas.\n   * @returns A federated wheel event.\n   */\n  normalizeWheelEvent(nativeEvent) {\n    const event = this._rootWheelEvent;\n    this._transferMouseData(event, nativeEvent);\n    event.deltaX = nativeEvent.deltaX;\n    event.deltaY = nativeEvent.deltaY;\n    event.deltaZ = nativeEvent.deltaZ;\n    event.deltaMode = nativeEvent.deltaMode;\n    this.mapPositionToPoint(event.screen, nativeEvent.clientX, nativeEvent.clientY);\n    event.global.copyFrom(event.screen);\n    event.offset.copyFrom(event.screen);\n    event.nativeEvent = nativeEvent;\n    event.type = nativeEvent.type;\n    return event;\n  }\n  /**\n   * Normalizes the `nativeEvent` into a federateed {@link FederatedPointerEvent}.\n   * @param event\n   * @param nativeEvent\n   */\n  _bootstrapEvent(event, nativeEvent) {\n    event.originalEvent = null;\n    event.nativeEvent = nativeEvent;\n    event.pointerId = nativeEvent.pointerId;\n    event.width = nativeEvent.width;\n    event.height = nativeEvent.height;\n    event.isPrimary = nativeEvent.isPrimary;\n    event.pointerType = nativeEvent.pointerType;\n    event.pressure = nativeEvent.pressure;\n    event.tangentialPressure = nativeEvent.tangentialPressure;\n    event.tiltX = nativeEvent.tiltX;\n    event.tiltY = nativeEvent.tiltY;\n    event.twist = nativeEvent.twist;\n    this._transferMouseData(event, nativeEvent);\n    this.mapPositionToPoint(event.screen, nativeEvent.clientX, nativeEvent.clientY);\n    event.global.copyFrom(event.screen);\n    event.offset.copyFrom(event.screen);\n    event.isTrusted = nativeEvent.isTrusted;\n    if (event.type === \"pointerleave\") {\n      event.type = \"pointerout\";\n    }\n    if (event.type.startsWith(\"mouse\")) {\n      event.type = event.type.replace(\"mouse\", \"pointer\");\n    }\n    if (event.type.startsWith(\"touch\")) {\n      event.type = TOUCH_TO_POINTER[event.type] || event.type;\n    }\n    return event;\n  }\n  /**\n   * Transfers base & mouse event data from the {@code nativeEvent} to the federated event.\n   * @param event\n   * @param nativeEvent\n   */\n  _transferMouseData(event, nativeEvent) {\n    event.isTrusted = nativeEvent.isTrusted;\n    event.srcElement = nativeEvent.srcElement;\n    event.timeStamp = performance.now();\n    event.type = nativeEvent.type;\n    event.altKey = nativeEvent.altKey;\n    event.button = nativeEvent.button;\n    event.buttons = nativeEvent.buttons;\n    event.client.x = nativeEvent.clientX;\n    event.client.y = nativeEvent.clientY;\n    event.ctrlKey = nativeEvent.ctrlKey;\n    event.metaKey = nativeEvent.metaKey;\n    event.movement.x = nativeEvent.movementX;\n    event.movement.y = nativeEvent.movementY;\n    event.page.x = nativeEvent.pageX;\n    event.page.y = nativeEvent.pageY;\n    event.relatedTarget = null;\n    event.shiftKey = nativeEvent.shiftKey;\n  }\n};\n/** @ignore */\n_EventSystem.extension = {\n  name: \"events\",\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.CanvasSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  priority: -1\n};\n/**\n * The event features that are enabled by the EventSystem\n * (included in the **pixi.js** and **pixi.js-legacy** bundle), otherwise it will be ignored.\n * @since 7.2.0\n */\n_EventSystem.defaultEventFeatures = {\n  /** Enables pointer events associated with pointer movement. */\n  move: true,\n  /** Enables global pointer move events. */\n  globalMove: true,\n  /** Enables pointer events associated with clicking. */\n  click: true,\n  /** Enables wheel events. */\n  wheel: true\n};\nlet EventSystem = _EventSystem;\n\nexport { EventSystem };\n//# sourceMappingURL=EventSystem.mjs.map\n","import { EventSystem } from './EventSystem.mjs';\nimport { FederatedEvent } from './FederatedEvent.mjs';\n\n\"use strict\";\nconst FederatedContainer = {\n  /**\n   * Property-based event handler for the `click` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onclick = (event) => {\n   *  //some function here that happens on click\n   * }\n   */\n  onclick: null,\n  /**\n   * Property-based event handler for the `mousedown` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onmousedown = (event) => {\n   *  //some function here that happens on mousedown\n   * }\n   */\n  onmousedown: null,\n  /**\n   * Property-based event handler for the `mouseenter` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onmouseenter = (event) => {\n   *  //some function here that happens on mouseenter\n   * }\n   */\n  onmouseenter: null,\n  /**\n   * Property-based event handler for the `mouseleave` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onmouseleave = (event) => {\n   *  //some function here that happens on mouseleave\n   * }\n   */\n  onmouseleave: null,\n  /**\n   * Property-based event handler for the `mousemove` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onmousemove = (event) => {\n   *  //some function here that happens on mousemove\n   * }\n   */\n  onmousemove: null,\n  /**\n   * Property-based event handler for the `globalmousemove` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onglobalmousemove = (event) => {\n   *  //some function here that happens on globalmousemove\n   * }\n   */\n  onglobalmousemove: null,\n  /**\n   * Property-based event handler for the `mouseout` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onmouseout = (event) => {\n   *  //some function here that happens on mouseout\n   * }\n   */\n  onmouseout: null,\n  /**\n   * Property-based event handler for the `mouseover` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onmouseover = (event) => {\n   *  //some function here that happens on mouseover\n   * }\n   */\n  onmouseover: null,\n  /**\n   * Property-based event handler for the `mouseup` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onmouseup = (event) => {\n   *  //some function here that happens on mouseup\n   * }\n   */\n  onmouseup: null,\n  /**\n   * Property-based event handler for the `mouseupoutside` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onmouseupoutside = (event) => {\n   *  //some function here that happens on mouseupoutside\n   * }\n   */\n  onmouseupoutside: null,\n  /**\n   * Property-based event handler for the `pointercancel` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onpointercancel = (event) => {\n   *  //some function here that happens on pointercancel\n   * }\n   */\n  onpointercancel: null,\n  /**\n   * Property-based event handler for the `pointerdown` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onpointerdown = (event) => {\n   *  //some function here that happens on pointerdown\n   * }\n   */\n  onpointerdown: null,\n  /**\n   * Property-based event handler for the `pointerenter` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onpointerenter = (event) => {\n   *  //some function here that happens on pointerenter\n   * }\n   */\n  onpointerenter: null,\n  /**\n   * Property-based event handler for the `pointerleave` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onpointerleave = (event) => {\n   *  //some function here that happens on pointerleave\n   * }\n   */\n  onpointerleave: null,\n  /**\n   * Property-based event handler for the `pointermove` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onpointermove = (event) => {\n   *  //some function here that happens on pointermove\n   * }\n   */\n  onpointermove: null,\n  /**\n   * Property-based event handler for the `globalpointermove` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onglobalpointermove = (event) => {\n   *  //some function here that happens on globalpointermove\n   * }\n   */\n  onglobalpointermove: null,\n  /**\n   * Property-based event handler for the `pointerout` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onpointerout = (event) => {\n   *  //some function here that happens on pointerout\n   * }\n   */\n  onpointerout: null,\n  /**\n   * Property-based event handler for the `pointerover` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onpointerover = (event) => {\n   *  //some function here that happens on pointerover\n   * }\n   */\n  onpointerover: null,\n  /**\n   * Property-based event handler for the `pointertap` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onpointertap = (event) => {\n   *  //some function here that happens on pointertap\n   * }\n   */\n  onpointertap: null,\n  /**\n   * Property-based event handler for the `pointerup` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onpointerup = (event) => {\n   *  //some function here that happens on pointerup\n   * }\n   */\n  onpointerup: null,\n  /**\n   * Property-based event handler for the `pointerupoutside` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onpointerupoutside = (event) => {\n   *  //some function here that happens on pointerupoutside\n   * }\n   */\n  onpointerupoutside: null,\n  /**\n   * Property-based event handler for the `rightclick` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onrightclick = (event) => {\n   *  //some function here that happens on rightclick\n   * }\n   */\n  onrightclick: null,\n  /**\n   * Property-based event handler for the `rightdown` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onrightdown = (event) => {\n   *  //some function here that happens on rightdown\n   * }\n   */\n  onrightdown: null,\n  /**\n   * Property-based event handler for the `rightup` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onrightup = (event) => {\n   *  //some function here that happens on rightup\n   * }\n   */\n  onrightup: null,\n  /**\n   * Property-based event handler for the `rightupoutside` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onrightupoutside = (event) => {\n   *  //some function here that happens on rightupoutside\n   * }\n   */\n  onrightupoutside: null,\n  /**\n   * Property-based event handler for the `tap` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.ontap = (event) => {\n   *  //some function here that happens on tap\n   * }\n   */\n  ontap: null,\n  /**\n   * Property-based event handler for the `touchcancel` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.ontouchcancel = (event) => {\n   *  //some function here that happens on touchcancel\n   * }\n   */\n  ontouchcancel: null,\n  /**\n   * Property-based event handler for the `touchend` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.ontouchend = (event) => {\n   *  //some function here that happens on touchend\n   * }\n   */\n  ontouchend: null,\n  /**\n   * Property-based event handler for the `touchendoutside` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.ontouchendoutside = (event) => {\n   *  //some function here that happens on touchendoutside\n   * }\n   */\n  ontouchendoutside: null,\n  /**\n   * Property-based event handler for the `touchmove` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.ontouchmove = (event) => {\n   *  //some function here that happens on touchmove\n   * }\n   */\n  ontouchmove: null,\n  /**\n   * Property-based event handler for the `globaltouchmove` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onglobaltouchmove = (event) => {\n   *  //some function here that happens on globaltouchmove\n   * }\n   */\n  onglobaltouchmove: null,\n  /**\n   * Property-based event handler for the `touchstart` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.ontouchstart = (event) => {\n   *  //some function here that happens on touchstart\n   * }\n   */\n  ontouchstart: null,\n  /**\n   * Property-based event handler for the `wheel` event.\n   * @memberof scene.Container#\n   * @default null\n   * @example\n   * this.onwheel = (event) => {\n   *  //some function here that happens on wheel\n   * }\n   */\n  onwheel: null,\n  /**\n   * Enable interaction events for the Container. Touch, pointer and mouse\n   * @memberof scene.Container#\n   */\n  get interactive() {\n    return this.eventMode === \"dynamic\" || this.eventMode === \"static\";\n  },\n  set interactive(value) {\n    this.eventMode = value ? \"static\" : \"passive\";\n  },\n  /**\n   * @ignore\n   */\n  _internalEventMode: void 0,\n  /**\n   * Enable interaction events for the Container. Touch, pointer and mouse.\n   * There are 5 types of interaction settings:\n   * - `'none'`: Ignores all interaction events, even on its children.\n   * - `'passive'`: **(default)** Does not emit events and ignores all hit testing on itself and non-interactive children.\n   * Interactive children will still emit events.\n   * - `'auto'`: Does not emit events but is hit tested if parent is interactive. Same as `interactive = false` in v7\n   * - `'static'`: Emit events and is hit tested. Same as `interaction = true` in v7\n   * - `'dynamic'`: Emits events and is hit tested but will also receive mock interaction events fired from a ticker to\n   * allow for interaction when the mouse isn't moving\n   * @example\n   * import { Sprite } from 'pixi.js';\n   *\n   * const sprite = new Sprite(texture);\n   * sprite.eventMode = 'static';\n   * sprite.on('tap', (event) => {\n   *     // Handle event\n   * });\n   * @memberof scene.Container#\n   * @since 7.2.0\n   */\n  get eventMode() {\n    return this._internalEventMode ?? EventSystem.defaultEventMode;\n  },\n  set eventMode(value) {\n    this._internalEventMode = value;\n  },\n  /**\n   * Determines if the container is interactive or not\n   * @returns {boolean} Whether the container is interactive or not\n   * @memberof scene.Container#\n   * @since 7.2.0\n   * @example\n   * import { Sprite } from 'pixi.js';\n   *\n   * const sprite = new Sprite(texture);\n   * sprite.eventMode = 'static';\n   * sprite.isInteractive(); // true\n   *\n   * sprite.eventMode = 'dynamic';\n   * sprite.isInteractive(); // true\n   *\n   * sprite.eventMode = 'none';\n   * sprite.isInteractive(); // false\n   *\n   * sprite.eventMode = 'passive';\n   * sprite.isInteractive(); // false\n   *\n   * sprite.eventMode = 'auto';\n   * sprite.isInteractive(); // false\n   */\n  isInteractive() {\n    return this.eventMode === \"static\" || this.eventMode === \"dynamic\";\n  },\n  /**\n   * Determines if the children to the container can be clicked/touched\n   * Setting this to false allows PixiJS to bypass a recursive `hitTest` function\n   * @memberof scene.Container#\n   */\n  interactiveChildren: true,\n  /**\n   * Interaction shape. Children will be hit first, then this shape will be checked.\n   * Setting this will cause this shape to be checked in hit tests rather than the container's bounds.\n   * @example\n   * import { Rectangle, Sprite } from 'pixi.js';\n   *\n   * const sprite = new Sprite(texture);\n   * sprite.interactive = true;\n   * sprite.hitArea = new Rectangle(0, 0, 100, 100);\n   * @member {IHitArea}\n   * @memberof scene.Container#\n   */\n  hitArea: null,\n  /**\n   * Unlike `on` or `addListener` which are methods from EventEmitter, `addEventListener`\n   * seeks to be compatible with the DOM's `addEventListener` with support for options.\n   * @memberof scene.Container\n   * @param type - The type of event to listen to.\n   * @param listener - The listener callback or object.\n   * @param options - Listener options, used for capture phase.\n   * @example\n   * // Tell the user whether they did a single, double, triple, or nth click.\n   * button.addEventListener('click', {\n   *     handleEvent(e): {\n   *         let prefix;\n   *\n   *         switch (e.detail) {\n   *             case 1: prefix = 'single'; break;\n   *             case 2: prefix = 'double'; break;\n   *             case 3: prefix = 'triple'; break;\n   *             default: prefix = e.detail + 'th'; break;\n   *         }\n   *\n   *         console.log('That was a ' + prefix + 'click');\n   *     }\n   * });\n   *\n   * // But skip the first click!\n   * button.parent.addEventListener('click', function blockClickOnce(e) {\n   *     e.stopImmediatePropagation();\n   *     button.parent.removeEventListener('click', blockClickOnce, true);\n   * }, {\n   *     capture: true,\n   * });\n   */\n  addEventListener(type, listener, options) {\n    const capture = typeof options === \"boolean\" && options || typeof options === \"object\" && options.capture;\n    const signal = typeof options === \"object\" ? options.signal : void 0;\n    const once = typeof options === \"object\" ? options.once === true : false;\n    const context = typeof listener === \"function\" ? void 0 : listener;\n    type = capture ? `${type}capture` : type;\n    const listenerFn = typeof listener === \"function\" ? listener : listener.handleEvent;\n    const emitter = this;\n    if (signal) {\n      signal.addEventListener(\"abort\", () => {\n        emitter.off(type, listenerFn, context);\n      });\n    }\n    if (once) {\n      emitter.once(type, listenerFn, context);\n    } else {\n      emitter.on(type, listenerFn, context);\n    }\n  },\n  /**\n   * Unlike `off` or `removeListener` which are methods from EventEmitter, `removeEventListener`\n   * seeks to be compatible with the DOM's `removeEventListener` with support for options.\n   * @memberof scene.Container\n   * @param type - The type of event the listener is bound to.\n   * @param listener - The listener callback or object.\n   * @param options - The original listener options. This is required to deregister a capture phase listener.\n   */\n  removeEventListener(type, listener, options) {\n    const capture = typeof options === \"boolean\" && options || typeof options === \"object\" && options.capture;\n    const context = typeof listener === \"function\" ? void 0 : listener;\n    type = capture ? `${type}capture` : type;\n    listener = typeof listener === \"function\" ? listener : listener.handleEvent;\n    this.off(type, listener, context);\n  },\n  /**\n   * Dispatch the event on this {@link Container} using the event's {@link EventBoundary}.\n   *\n   * The target of the event is set to `this` and the `defaultPrevented` flag is cleared before dispatch.\n   * @memberof scene.Container\n   * @param e - The event to dispatch.\n   * @returns Whether the {@link FederatedEvent.preventDefault preventDefault}() method was not invoked.\n   * @example\n   * // Reuse a click event!\n   * button.dispatchEvent(clickEvent);\n   */\n  dispatchEvent(e) {\n    if (!(e instanceof FederatedEvent)) {\n      throw new Error(\"Container cannot propagate events outside of the Federated Events API\");\n    }\n    e.defaultPrevented = false;\n    e.path = null;\n    e.target = this;\n    e.manager.dispatchEvent(e);\n    return !e.defaultPrevented;\n  }\n};\n\nexport { FederatedContainer };\n//# sourceMappingURL=FederatedEventTarget.mjs.map\n","import { nextPow2 } from '../../../../maths/misc/pow2.mjs';\nimport { TextureSource } from './sources/TextureSource.mjs';\nimport { Texture } from './Texture.mjs';\n\n\"use strict\";\nlet count = 0;\nclass TexturePoolClass {\n  /**\n   * @param textureOptions - options that will be passed to BaseRenderTexture constructor\n   * @param {SCALE_MODE} [textureOptions.scaleMode] - See {@link SCALE_MODE} for possible values.\n   */\n  constructor(textureOptions) {\n    this._poolKeyHash = /* @__PURE__ */ Object.create(null);\n    this._texturePool = {};\n    this.textureOptions = textureOptions || {};\n    this.enableFullScreen = false;\n  }\n  /**\n   * Creates texture with params that were specified in pool constructor.\n   * @param pixelWidth - Width of texture in pixels.\n   * @param pixelHeight - Height of texture in pixels.\n   * @param antialias\n   */\n  createTexture(pixelWidth, pixelHeight, antialias) {\n    const textureSource = new TextureSource({\n      ...this.textureOptions,\n      width: pixelWidth,\n      height: pixelHeight,\n      resolution: 1,\n      antialias,\n      autoGarbageCollect: true\n    });\n    return new Texture({\n      source: textureSource,\n      label: `texturePool_${count++}`\n    });\n  }\n  /**\n   * Gets a Power-of-Two render texture or fullScreen texture\n   * @param frameWidth - The minimum width of the render texture.\n   * @param frameHeight - The minimum height of the render texture.\n   * @param resolution - The resolution of the render texture.\n   * @param antialias\n   * @returns The new render texture.\n   */\n  getOptimalTexture(frameWidth, frameHeight, resolution = 1, antialias) {\n    let po2Width = Math.ceil(frameWidth * resolution - 1e-6);\n    let po2Height = Math.ceil(frameHeight * resolution - 1e-6);\n    po2Width = nextPow2(po2Width);\n    po2Height = nextPow2(po2Height);\n    const key = (po2Width << 17) + (po2Height << 1) + (antialias ? 1 : 0);\n    if (!this._texturePool[key]) {\n      this._texturePool[key] = [];\n    }\n    let texture = this._texturePool[key].pop();\n    if (!texture) {\n      texture = this.createTexture(po2Width, po2Height, antialias);\n    }\n    texture.source._resolution = resolution;\n    texture.source.width = po2Width / resolution;\n    texture.source.height = po2Height / resolution;\n    texture.source.pixelWidth = po2Width;\n    texture.source.pixelHeight = po2Height;\n    texture.frame.x = 0;\n    texture.frame.y = 0;\n    texture.frame.width = frameWidth;\n    texture.frame.height = frameHeight;\n    texture.updateUvs();\n    this._poolKeyHash[texture.uid] = key;\n    return texture;\n  }\n  /**\n   * Gets extra texture of the same size as input renderTexture\n   * @param texture - The texture to check what size it is.\n   * @param antialias - Whether to use antialias.\n   * @returns A texture that is a power of two\n   */\n  getSameSizeTexture(texture, antialias = false) {\n    const source = texture.source;\n    return this.getOptimalTexture(texture.width, texture.height, source._resolution, antialias);\n  }\n  /**\n   * Place a render texture back into the pool.\n   * @param renderTexture - The renderTexture to free\n   */\n  returnTexture(renderTexture) {\n    const key = this._poolKeyHash[renderTexture.uid];\n    this._texturePool[key].push(renderTexture);\n  }\n  /**\n   * Clears the pool.\n   * @param destroyTextures - Destroy all stored textures.\n   */\n  clear(destroyTextures) {\n    destroyTextures = destroyTextures !== false;\n    if (destroyTextures) {\n      for (const i in this._texturePool) {\n        const textures = this._texturePool[i];\n        if (textures) {\n          for (let j = 0; j < textures.length; j++) {\n            textures[j].destroy(true);\n          }\n        }\n      }\n    }\n    this._texturePool = {};\n  }\n}\nconst TexturePool = new TexturePoolClass();\n\nexport { TexturePool, TexturePoolClass };\n//# sourceMappingURL=TexturePool.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nclass FilterPipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  push(filterEffect, container, instructionSet) {\n    const renderPipes = this._renderer.renderPipes;\n    renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: \"filter\",\n      canBundle: false,\n      action: \"pushFilter\",\n      container,\n      filterEffect\n    });\n  }\n  pop(_filterEffect, _container, instructionSet) {\n    this._renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: \"filter\",\n      action: \"popFilter\",\n      canBundle: false\n    });\n  }\n  execute(instruction) {\n    if (instruction.action === \"pushFilter\") {\n      this._renderer.filter.push(instruction);\n    } else if (instruction.action === \"popFilter\") {\n      this._renderer.filter.pop();\n    }\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\nFilterPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"filter\"\n};\n\nexport { FilterPipe };\n//# sourceMappingURL=FilterPipe.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { boundsPool } from './utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nconst tempMatrix = new Matrix();\nfunction getFastGlobalBounds(target, bounds) {\n  bounds.clear();\n  _getGlobalBoundsRecursive(target, bounds);\n  if (!bounds.isValid) {\n    bounds.set(0, 0, 0, 0);\n  }\n  if (!target.isRenderGroupRoot) {\n    bounds.applyMatrix(target.renderGroup.worldTransform);\n  } else {\n    bounds.applyMatrix(target.renderGroup.localTransform);\n  }\n  return bounds;\n}\nfunction _getGlobalBoundsRecursive(target, bounds) {\n  if (target.localDisplayStatus !== 7 || !target.measurable) {\n    return;\n  }\n  const manageEffects = !!target.effects.length;\n  let localBounds = bounds;\n  if (target.isRenderGroupRoot || manageEffects) {\n    localBounds = boundsPool.get().clear();\n  }\n  if (target.boundsArea) {\n    bounds.addRect(target.boundsArea, target.worldTransform);\n  } else {\n    if (target.renderPipeId) {\n      const viewBounds = target.bounds;\n      localBounds.addFrame(\n        viewBounds.minX,\n        viewBounds.minY,\n        viewBounds.maxX,\n        viewBounds.maxY,\n        target.groupTransform\n      );\n    }\n    const children = target.children;\n    for (let i = 0; i < children.length; i++) {\n      _getGlobalBoundsRecursive(children[i], localBounds);\n    }\n  }\n  if (manageEffects) {\n    let advanced = false;\n    for (let i = 0; i < target.effects.length; i++) {\n      if (target.effects[i].addBounds) {\n        if (!advanced) {\n          advanced = true;\n          localBounds.applyMatrix(target.renderGroup.worldTransform);\n        }\n        target.effects[i].addBounds(localBounds, true);\n      }\n    }\n    if (advanced) {\n      localBounds.applyMatrix(target.renderGroup.worldTransform.copyTo(tempMatrix).invert());\n      bounds.addBounds(localBounds, target.relativeGroupTransform);\n    }\n    bounds.addBounds(localBounds);\n    boundsPool.return(localBounds);\n  } else if (target.isRenderGroupRoot) {\n    bounds.addBounds(localBounds, target.relativeGroupTransform);\n    boundsPool.return(localBounds);\n  }\n}\n\nexport { _getGlobalBoundsRecursive, getFastGlobalBounds };\n//# sourceMappingURL=getFastGlobalBounds.mjs.map\n","\"use strict\";\nfunction getGlobalRenderableBounds(renderables, bounds) {\n  bounds.clear();\n  const tempMatrix = bounds.matrix;\n  for (let i = 0; i < renderables.length; i++) {\n    const renderable = renderables[i];\n    if (renderable.globalDisplayStatus < 7) {\n      continue;\n    }\n    bounds.matrix = renderable.worldTransform;\n    renderable.addBounds(bounds);\n  }\n  bounds.matrix = tempMatrix;\n  return bounds;\n}\n\nexport { getGlobalRenderableBounds };\n//# sourceMappingURL=getRenderableBounds.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\nimport { Matrix } from '../maths/matrix/Matrix.mjs';\nimport { Point } from '../maths/point/Point.mjs';\nimport { BindGroup } from '../rendering/renderers/gpu/shader/BindGroup.mjs';\nimport { Geometry } from '../rendering/renderers/shared/geometry/Geometry.mjs';\nimport { UniformGroup } from '../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture.mjs';\nimport { TexturePool } from '../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { RendererType } from '../rendering/renderers/types.mjs';\nimport { Bounds } from '../scene/container/bounds/Bounds.mjs';\nimport { getFastGlobalBounds } from '../scene/container/bounds/getFastGlobalBounds.mjs';\nimport { getGlobalRenderableBounds } from '../scene/container/bounds/getRenderableBounds.mjs';\nimport { warn } from '../utils/logging/warn.mjs';\n\n\"use strict\";\nconst quadGeometry = new Geometry({\n  attributes: {\n    aPosition: {\n      buffer: new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),\n      location: 0,\n      format: \"float32x2\",\n      stride: 2 * 4,\n      offset: 0\n    }\n  },\n  indexBuffer: new Uint32Array([0, 1, 2, 0, 2, 3])\n});\nclass FilterSystem {\n  constructor(renderer) {\n    this._filterStackIndex = 0;\n    this._filterStack = [];\n    this._filterGlobalUniforms = new UniformGroup({\n      uInputSize: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uInputPixel: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uInputClamp: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uOutputFrame: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uGlobalFrame: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uOutputTexture: { value: new Float32Array(4), type: \"vec4<f32>\" }\n    });\n    this._globalFilterBindGroup = new BindGroup({});\n    this.renderer = renderer;\n  }\n  /**\n   * The back texture of the currently active filter. Requires the filter to have `blendRequired` set to true.\n   * @readonly\n   */\n  get activeBackTexture() {\n    return this._activeFilterData?.backTexture;\n  }\n  push(instruction) {\n    const renderer = this.renderer;\n    const filters = instruction.filterEffect.filters;\n    if (!this._filterStack[this._filterStackIndex]) {\n      this._filterStack[this._filterStackIndex] = this._getFilterData();\n    }\n    const filterData = this._filterStack[this._filterStackIndex];\n    this._filterStackIndex++;\n    if (filters.length === 0) {\n      filterData.skip = true;\n      return;\n    }\n    const bounds = filterData.bounds;\n    if (instruction.renderables) {\n      getGlobalRenderableBounds(instruction.renderables, bounds);\n    } else if (instruction.filterEffect.filterArea) {\n      bounds.clear();\n      bounds.addRect(instruction.filterEffect.filterArea);\n      bounds.applyMatrix(instruction.container.worldTransform);\n    } else {\n      getFastGlobalBounds(instruction.container, bounds);\n    }\n    const colorTextureSource = renderer.renderTarget.rootRenderTarget.colorTexture.source;\n    let resolution = colorTextureSource._resolution;\n    let padding = 0;\n    let antialias = colorTextureSource.antialias;\n    let blendRequired = false;\n    let enabled = false;\n    for (let i = 0; i < filters.length; i++) {\n      const filter = filters[i];\n      resolution = Math.min(resolution, filter.resolution);\n      padding += filter.padding;\n      if (filter.antialias !== \"inherit\") {\n        if (filter.antialias === \"on\") {\n          antialias = true;\n        } else {\n          antialias = false;\n        }\n      }\n      const isCompatible = !!(filter.compatibleRenderers & renderer.type);\n      if (!isCompatible) {\n        enabled = false;\n        break;\n      }\n      if (filter.blendRequired && !(renderer.backBuffer?.useBackBuffer ?? true)) {\n        warn(\"Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options.\");\n        enabled = false;\n        break;\n      }\n      enabled = filter.enabled || enabled;\n      blendRequired = blendRequired || filter.blendRequired;\n    }\n    if (!enabled) {\n      filterData.skip = true;\n      return;\n    }\n    const viewPort = renderer.renderTarget.rootViewPort;\n    bounds.scale(resolution).fitBounds(0, viewPort.width, 0, viewPort.height).scale(1 / resolution).pad(padding).ceil();\n    if (!bounds.isPositive) {\n      filterData.skip = true;\n      return;\n    }\n    filterData.skip = false;\n    filterData.bounds = bounds;\n    filterData.blendRequired = blendRequired;\n    filterData.container = instruction.container;\n    filterData.filterEffect = instruction.filterEffect;\n    filterData.previousRenderSurface = renderer.renderTarget.renderSurface;\n    filterData.inputTexture = TexturePool.getOptimalTexture(\n      bounds.width,\n      bounds.height,\n      resolution,\n      antialias\n    );\n    renderer.renderTarget.bind(filterData.inputTexture, true);\n    renderer.globalUniforms.push({\n      offset: bounds\n    });\n  }\n  pop() {\n    const renderer = this.renderer;\n    this._filterStackIndex--;\n    const filterData = this._filterStack[this._filterStackIndex];\n    if (filterData.skip) {\n      return;\n    }\n    this._activeFilterData = filterData;\n    const inputTexture = filterData.inputTexture;\n    const bounds = filterData.bounds;\n    let backTexture = Texture.EMPTY;\n    renderer.renderTarget.finishRenderPass();\n    if (filterData.blendRequired) {\n      const previousBounds = this._filterStackIndex > 0 ? this._filterStack[this._filterStackIndex - 1].bounds : null;\n      const renderTarget = renderer.renderTarget.getRenderTarget(filterData.previousRenderSurface);\n      backTexture = this.getBackTexture(renderTarget, bounds, previousBounds);\n    }\n    filterData.backTexture = backTexture;\n    const filters = filterData.filterEffect.filters;\n    this._globalFilterBindGroup.setResource(inputTexture.source.style, 2);\n    this._globalFilterBindGroup.setResource(backTexture.source, 3);\n    renderer.globalUniforms.pop();\n    if (filters.length === 1) {\n      filters[0].apply(this, inputTexture, filterData.previousRenderSurface, false);\n      TexturePool.returnTexture(inputTexture);\n    } else {\n      let flip = filterData.inputTexture;\n      let flop = TexturePool.getOptimalTexture(\n        bounds.width,\n        bounds.height,\n        flip.source._resolution,\n        false\n      );\n      let i = 0;\n      for (i = 0; i < filters.length - 1; ++i) {\n        const filter = filters[i];\n        filter.apply(this, flip, flop, true);\n        const t = flip;\n        flip = flop;\n        flop = t;\n      }\n      filters[i].apply(this, flip, filterData.previousRenderSurface, false);\n      TexturePool.returnTexture(flip);\n      TexturePool.returnTexture(flop);\n    }\n    if (filterData.blendRequired) {\n      TexturePool.returnTexture(backTexture);\n    }\n  }\n  getBackTexture(lastRenderSurface, bounds, previousBounds) {\n    const backgroundResolution = lastRenderSurface.colorTexture.source._resolution;\n    const backTexture = TexturePool.getOptimalTexture(\n      bounds.width,\n      bounds.height,\n      backgroundResolution,\n      false\n    );\n    let x = bounds.minX;\n    let y = bounds.minY;\n    if (previousBounds) {\n      x -= previousBounds.minX;\n      y -= previousBounds.minY;\n    }\n    x = Math.floor(x * backgroundResolution);\n    y = Math.floor(y * backgroundResolution);\n    const width = Math.ceil(bounds.width * backgroundResolution);\n    const height = Math.ceil(bounds.height * backgroundResolution);\n    this.renderer.renderTarget.copyToTexture(\n      lastRenderSurface,\n      backTexture,\n      { x, y },\n      { width, height },\n      { x: 0, y: 0 }\n    );\n    return backTexture;\n  }\n  applyFilter(filter, input, output, clear) {\n    const renderer = this.renderer;\n    const filterData = this._filterStack[this._filterStackIndex];\n    const bounds = filterData.bounds;\n    const offset = Point.shared;\n    const previousRenderSurface = filterData.previousRenderSurface;\n    const isFinalTarget = previousRenderSurface === output;\n    let resolution = this.renderer.renderTarget.rootRenderTarget.colorTexture.source._resolution;\n    let currentIndex = this._filterStackIndex - 1;\n    while (currentIndex > 0 && this._filterStack[currentIndex].skip) {\n      --currentIndex;\n    }\n    if (currentIndex > 0) {\n      resolution = this._filterStack[currentIndex].inputTexture.source._resolution;\n    }\n    const filterUniforms = this._filterGlobalUniforms;\n    const uniforms = filterUniforms.uniforms;\n    const outputFrame = uniforms.uOutputFrame;\n    const inputSize = uniforms.uInputSize;\n    const inputPixel = uniforms.uInputPixel;\n    const inputClamp = uniforms.uInputClamp;\n    const globalFrame = uniforms.uGlobalFrame;\n    const outputTexture = uniforms.uOutputTexture;\n    if (isFinalTarget) {\n      let lastIndex = this._filterStackIndex;\n      while (lastIndex > 0) {\n        lastIndex--;\n        const filterData2 = this._filterStack[this._filterStackIndex - 1];\n        if (!filterData2.skip) {\n          offset.x = filterData2.bounds.minX;\n          offset.y = filterData2.bounds.minY;\n          break;\n        }\n      }\n      outputFrame[0] = bounds.minX - offset.x;\n      outputFrame[1] = bounds.minY - offset.y;\n    } else {\n      outputFrame[0] = 0;\n      outputFrame[1] = 0;\n    }\n    outputFrame[2] = input.frame.width;\n    outputFrame[3] = input.frame.height;\n    inputSize[0] = input.source.width;\n    inputSize[1] = input.source.height;\n    inputSize[2] = 1 / inputSize[0];\n    inputSize[3] = 1 / inputSize[1];\n    inputPixel[0] = input.source.pixelWidth;\n    inputPixel[1] = input.source.pixelHeight;\n    inputPixel[2] = 1 / inputPixel[0];\n    inputPixel[3] = 1 / inputPixel[1];\n    inputClamp[0] = 0.5 * inputPixel[2];\n    inputClamp[1] = 0.5 * inputPixel[3];\n    inputClamp[2] = input.frame.width * inputSize[2] - 0.5 * inputPixel[2];\n    inputClamp[3] = input.frame.height * inputSize[3] - 0.5 * inputPixel[3];\n    const rootTexture = this.renderer.renderTarget.rootRenderTarget.colorTexture;\n    globalFrame[0] = offset.x * resolution;\n    globalFrame[1] = offset.y * resolution;\n    globalFrame[2] = rootTexture.source.width * resolution;\n    globalFrame[3] = rootTexture.source.height * resolution;\n    const renderTarget = this.renderer.renderTarget.getRenderTarget(output);\n    renderer.renderTarget.bind(output, !!clear);\n    if (output instanceof Texture) {\n      outputTexture[0] = output.frame.width;\n      outputTexture[1] = output.frame.height;\n    } else {\n      outputTexture[0] = renderTarget.width;\n      outputTexture[1] = renderTarget.height;\n    }\n    outputTexture[2] = renderTarget.isRoot ? -1 : 1;\n    filterUniforms.update();\n    if (renderer.renderPipes.uniformBatch) {\n      const batchUniforms = renderer.renderPipes.uniformBatch.getUboResource(filterUniforms);\n      this._globalFilterBindGroup.setResource(batchUniforms, 0);\n    } else {\n      this._globalFilterBindGroup.setResource(filterUniforms, 0);\n    }\n    this._globalFilterBindGroup.setResource(input.source, 1);\n    this._globalFilterBindGroup.setResource(input.source.style, 2);\n    filter.groups[0] = this._globalFilterBindGroup;\n    renderer.encoder.draw({\n      geometry: quadGeometry,\n      shader: filter,\n      state: filter._state,\n      topology: \"triangle-list\"\n    });\n    if (renderer.type === RendererType.WEBGL) {\n      renderer.renderTarget.finishRenderPass();\n    }\n  }\n  _getFilterData() {\n    return {\n      skip: false,\n      inputTexture: null,\n      bounds: new Bounds(),\n      container: null,\n      filterEffect: null,\n      blendRequired: false,\n      previousRenderSurface: null\n    };\n  }\n  /**\n   * Multiply _input normalized coordinates_ to this matrix to get _sprite texture normalized coordinates_.\n   *\n   * Use `outputMatrix * vTextureCoord` in the shader.\n   * @param outputMatrix - The matrix to output to.\n   * @param {Sprite} sprite - The sprite to map to.\n   * @returns The mapped matrix.\n   */\n  calculateSpriteMatrix(outputMatrix, sprite) {\n    const data = this._activeFilterData;\n    const mappedMatrix = outputMatrix.set(\n      data.inputTexture._source.width,\n      0,\n      0,\n      data.inputTexture._source.height,\n      data.bounds.minX,\n      data.bounds.minY\n    );\n    const worldTransform = sprite.worldTransform.copyTo(Matrix.shared);\n    worldTransform.invert();\n    mappedMatrix.prepend(worldTransform);\n    mappedMatrix.scale(\n      1 / sprite.texture.frame.width,\n      1 / sprite.texture.frame.height\n    );\n    mappedMatrix.translate(sprite.anchor.x, sprite.anchor.y);\n    return mappedMatrix;\n  }\n}\n/** @ignore */\nFilterSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"filter\"\n};\n\nexport { FilterSystem };\n//# sourceMappingURL=FilterSystem.mjs.map\n","var fragment = \"in vec2 vMaskCoord;\\nin vec2 vTextureCoord;\\n\\nuniform sampler2D uTexture;\\nuniform sampler2D uMaskTexture;\\n\\nuniform float uAlpha;\\nuniform vec4 uMaskClamp;\\n\\nout vec4 finalColor;\\n\\nvoid main(void)\\n{\\n    float clip = step(3.5,\\n        step(uMaskClamp.x, vMaskCoord.x) +\\n        step(uMaskClamp.y, vMaskCoord.y) +\\n        step(vMaskCoord.x, uMaskClamp.z) +\\n        step(vMaskCoord.y, uMaskClamp.w));\\n\\n    // TODO look into why this is needed\\n    float npmAlpha = uAlpha; \\n    vec4 original = texture(uTexture, vTextureCoord);\\n    vec4 masky = texture(uMaskTexture, vMaskCoord);\\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\\n\\n    original *= (alphaMul * masky.r * uAlpha * clip);\\n\\n    finalColor = original;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=mask.frag.mjs.map\n","var vertex = \"in vec2 aPosition;\\n\\nout vec2 vTextureCoord;\\nout vec2 vMaskCoord;\\n\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uOutputFrame;\\nuniform vec4 uOutputTexture;\\nuniform mat3 uFilterMatrix;\\n\\nvec4 filterVertexPosition(  vec2 aPosition )\\n{\\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\\n       \\n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nvec2 filterTextureCoord(  vec2 aPosition )\\n{\\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\\n}\\n\\nvec2 getFilterCoord( vec2 aPosition )\\n{\\n    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;\\n}   \\n\\nvoid main(void)\\n{\\n    gl_Position = filterVertexPosition(aPosition);\\n    vTextureCoord = filterTextureCoord(aPosition);\\n    vMaskCoord = getFilterCoord(aPosition);\\n}\\n\";\n\nexport { vertex as default };\n//# sourceMappingURL=mask.vert.mjs.map\n","var source = \"struct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,  \\n};\\n\\nstruct MaskUniforms {\\n  uFilterMatrix:mat3x3<f32>,\\n  uMaskClamp:vec4<f32>,\\n  uAlpha:f32,\\n};\\n\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler : sampler;\\n\\n@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;\\n@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>,\\n    @location(1) filterUv : vec2<f32>,\\n  };\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n\\nfn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;\\n}\\n\\nfn getSize() -> vec2<f32>\\n{\\n\\n  \\n  return gfu.uGlobalFrame.zw;\\n}\\n  \\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   filterTextureCoord(aPosition),\\n   getFilterCoord(aPosition)\\n  );\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n  @location(1) filterUv: vec2<f32>,\\n  @builtin(position) position: vec4<f32>\\n) -> @location(0) vec4<f32> {\\n\\n    var maskClamp = filterUniforms.uMaskClamp;\\n\\n     var clip = step(3.5,\\n        step(maskClamp.x, filterUv.x) +\\n        step(maskClamp.y, filterUv.y) +\\n        step(filterUv.x, maskClamp.z) +\\n        step(filterUv.y, maskClamp.w));\\n\\n    var mask = textureSample(uMaskTexture, uSampler, filterUv);\\n    var source = textureSample(uTexture, uSampler, uv);\\n    \\n    var npmAlpha = 0.0;\\n\\n    var alphaMul = 1.0 - npmAlpha * (1.0 - mask.a);\\n\\n    var a = (alphaMul * mask.r) * clip;\\n\\n    return vec4(source.rgb, source.a) * a;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=mask.wgsl.mjs.map\n","import { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { GlProgram } from '../../rendering/renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../../rendering/renderers/gpu/shader/GpuProgram.mjs';\nimport { UniformGroup } from '../../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { TextureMatrix } from '../../rendering/renderers/shared/texture/TextureMatrix.mjs';\nimport { Filter } from '../Filter.mjs';\nimport fragment from './mask.frag.mjs';\nimport vertex from './mask.vert.mjs';\nimport source from './mask.wgsl.mjs';\n\n\"use strict\";\nclass MaskFilter extends Filter {\n  constructor(options) {\n    const { sprite, ...rest } = options;\n    const textureMatrix = new TextureMatrix(sprite.texture);\n    const filterUniforms = new UniformGroup({\n      uFilterMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uMaskClamp: { value: textureMatrix.uClampFrame, type: \"vec4<f32>\" },\n      uAlpha: { value: 1, type: \"f32\" }\n    });\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"mask-filter\"\n    });\n    super({\n      ...rest,\n      gpuProgram,\n      glProgram,\n      resources: {\n        filterUniforms,\n        uMaskTexture: sprite.texture.source\n      }\n    });\n    this.sprite = sprite;\n    this._textureMatrix = textureMatrix;\n  }\n  apply(filterManager, input, output, clearMode) {\n    this._textureMatrix.texture = this.sprite.texture;\n    filterManager.calculateSpriteMatrix(\n      this.resources.filterUniforms.uniforms.uFilterMatrix,\n      this.sprite\n    ).prepend(this._textureMatrix.mapCoord);\n    this.resources.uMaskTexture = this.sprite.texture.source;\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n}\n\nexport { MaskFilter };\n//# sourceMappingURL=MaskFilter.mjs.map\n","import { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\nimport { Container } from '../../container/Container.mjs';\nimport { GraphicsContext } from './GraphicsContext.mjs';\n\n\"use strict\";\nclass Graphics extends Container {\n  /**\n   * @param options - Options for the Graphics.\n   */\n  constructor(options) {\n    if (options instanceof GraphicsContext) {\n      options = { context: options };\n    }\n    const { context, roundPixels, ...rest } = options || {};\n    super({\n      label: \"Graphics\",\n      ...rest\n    });\n    this.canBundle = true;\n    this.renderPipeId = \"graphics\";\n    this._roundPixels = 0;\n    if (!context) {\n      this._context = this._ownedContext = new GraphicsContext();\n    } else {\n      this._context = context;\n    }\n    this._context.on(\"update\", this.onViewUpdate, this);\n    this.allowChildren = false;\n    this.roundPixels = roundPixels ?? false;\n  }\n  set context(context) {\n    if (context === this._context)\n      return;\n    this._context.off(\"update\", this.onViewUpdate, this);\n    this._context = context;\n    this._context.on(\"update\", this.onViewUpdate, this);\n    this.onViewUpdate();\n  }\n  get context() {\n    return this._context;\n  }\n  /**\n   * The local bounds of the graphic.\n   * @type {rendering.Bounds}\n   */\n  get bounds() {\n    return this._context.bounds;\n  }\n  /**\n   * Adds the bounds of this object to the bounds object.\n   * @param bounds - The output bounds object.\n   */\n  addBounds(bounds) {\n    bounds.addBounds(this._context.bounds);\n  }\n  /**\n   * Checks if the object contains the given point.\n   * @param point - The point to check\n   */\n  containsPoint(point) {\n    return this._context.containsPoint(point);\n  }\n  /**\n   *  Whether or not to round the x/y position of the graphic.\n   * @type {boolean}\n   */\n  get roundPixels() {\n    return !!this._roundPixels;\n  }\n  set roundPixels(value) {\n    this._roundPixels = value ? 1 : 0;\n  }\n  onViewUpdate() {\n    this._didChangeId += 1 << 12;\n    this._didGraphicsUpdate = true;\n    if (this.didViewUpdate)\n      return;\n    this.didViewUpdate = true;\n    if (this.renderGroup) {\n      this.renderGroup.onChildViewUpdate(this);\n    }\n  }\n  /**\n   * Destroys this graphics renderable and optionally its context.\n   * @param options - Options parameter. A boolean will act as if all options\n   *\n   * If the context was created by this graphics and `destroy(false)` or `destroy()` is called\n   * then the context will still be destroyed.\n   *\n   * If you want to explicitly not destroy this context that this graphics created,\n   * then you should pass destroy({ context: false })\n   *\n   * If the context was passed in as an argument to the constructor then it will not be destroyed\n   * @param {boolean} [options.texture=false] - Should destroy the texture of the graphics context\n   * @param {boolean} [options.textureSource=false] - Should destroy the texture source of the graphics context\n   * @param {boolean} [options.context=false] - Should destroy the context\n   */\n  destroy(options) {\n    if (this._ownedContext && !options) {\n      this._ownedContext.destroy(options);\n    } else if (options === true || options?.context === true) {\n      this._context.destroy(options);\n    }\n    this._ownedContext = null;\n    this._context = null;\n    super.destroy(options);\n  }\n  _callContextMethod(method, args) {\n    this.context[method](...args);\n    return this;\n  }\n  // --------------------------------------- GraphicsContext methods ---------------------------------------\n  /**\n   * Sets the current fill style of the graphics context. The fill style can be a color, gradient,\n   * pattern, or a more complex style defined by a FillStyle object.\n   * @param {FillStyleInputs} args - The fill style to apply. This can be a simple color, a gradient or\n   * pattern object, or a FillStyle or ConvertedFillStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setFillStyle(...args) {\n    return this._callContextMethod(\"setFillStyle\", args);\n  }\n  /**\n   * Sets the current stroke style of the graphics context. Similar to fill styles, stroke styles can\n   * encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n   * @param {FillStyleInputs} args - The stroke style to apply. Can be defined as a color, a gradient or pattern,\n   * or a StrokeStyle or ConvertedStrokeStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setStrokeStyle(...args) {\n    return this._callContextMethod(\"setStrokeStyle\", args);\n  }\n  fill(...args) {\n    return this._callContextMethod(\"fill\", args);\n  }\n  /**\n   * Strokes the current path with the current stroke style. This method can take an optional\n   * FillStyleInputs parameter to define the stroke's appearance, including its color, width, and other properties.\n   * @param {FillStyleInputs} args - (Optional) The stroke style to apply. Can be defined as a simple color or a more\n   * complex style object. If omitted, uses the current stroke style.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  stroke(...args) {\n    return this._callContextMethod(\"stroke\", args);\n  }\n  texture(...args) {\n    return this._callContextMethod(\"texture\", args);\n  }\n  /**\n   * Resets the current path. Any previous path and its commands are discarded and a new path is\n   * started. This is typically called before beginning a new shape or series of drawing commands.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  beginPath() {\n    return this._callContextMethod(\"beginPath\", []);\n  }\n  /**\n   * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n   * subtracting a path from the previously drawn path. If a hole is not completely in a shape, it will\n   * fail to cut correctly!\n   */\n  cut() {\n    return this._callContextMethod(\"cut\", []);\n  }\n  arc(...args) {\n    return this._callContextMethod(\"arc\", args);\n  }\n  arcTo(...args) {\n    return this._callContextMethod(\"arcTo\", args);\n  }\n  arcToSvg(...args) {\n    return this._callContextMethod(\"arcToSvg\", args);\n  }\n  bezierCurveTo(...args) {\n    return this._callContextMethod(\"bezierCurveTo\", args);\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    return this._callContextMethod(\"closePath\", []);\n  }\n  ellipse(...args) {\n    return this._callContextMethod(\"ellipse\", args);\n  }\n  circle(...args) {\n    return this._callContextMethod(\"circle\", args);\n  }\n  path(...args) {\n    return this._callContextMethod(\"path\", args);\n  }\n  lineTo(...args) {\n    return this._callContextMethod(\"lineTo\", args);\n  }\n  moveTo(...args) {\n    return this._callContextMethod(\"moveTo\", args);\n  }\n  quadraticCurveTo(...args) {\n    return this._callContextMethod(\"quadraticCurveTo\", args);\n  }\n  rect(...args) {\n    return this._callContextMethod(\"rect\", args);\n  }\n  roundRect(...args) {\n    return this._callContextMethod(\"roundRect\", args);\n  }\n  poly(...args) {\n    return this._callContextMethod(\"poly\", args);\n  }\n  regularPoly(...args) {\n    return this._callContextMethod(\"regularPoly\", args);\n  }\n  roundPoly(...args) {\n    return this._callContextMethod(\"roundPoly\", args);\n  }\n  roundShape(...args) {\n    return this._callContextMethod(\"roundShape\", args);\n  }\n  filletRect(...args) {\n    return this._callContextMethod(\"filletRect\", args);\n  }\n  chamferRect(...args) {\n    return this._callContextMethod(\"chamferRect\", args);\n  }\n  star(...args) {\n    return this._callContextMethod(\"star\", args);\n  }\n  svg(...args) {\n    return this._callContextMethod(\"svg\", args);\n  }\n  restore(...args) {\n    return this._callContextMethod(\"restore\", args);\n  }\n  /** Saves the current graphics state, including transformations, fill styles, and stroke styles, onto a stack. */\n  save() {\n    return this._callContextMethod(\"save\", []);\n  }\n  /**\n   * Returns the current transformation matrix of the graphics context.\n   * @returns The current transformation matrix.\n   */\n  getTransform() {\n    return this.context.getTransform();\n  }\n  /**\n   * Resets the current transformation matrix to the identity matrix, effectively removing\n   * any transformations (rotation, scaling, translation) previously applied.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  resetTransform() {\n    return this._callContextMethod(\"resetTransform\", []);\n  }\n  rotateTransform(...args) {\n    return this._callContextMethod(\"rotate\", args);\n  }\n  scaleTransform(...args) {\n    return this._callContextMethod(\"scale\", args);\n  }\n  setTransform(...args) {\n    return this._callContextMethod(\"setTransform\", args);\n  }\n  transform(...args) {\n    return this._callContextMethod(\"transform\", args);\n  }\n  translateTransform(...args) {\n    return this._callContextMethod(\"translate\", args);\n  }\n  /**\n   * Clears all drawing commands from the graphics context, effectively resetting it. This includes clearing the path,\n   * and optionally resetting transformations to the identity matrix.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  clear() {\n    return this._callContextMethod(\"clear\", []);\n  }\n  /**\n   * The fill style to use.\n   * @type {ConvertedFillStyle}\n   */\n  get fillStyle() {\n    return this._context.fillStyle;\n  }\n  set fillStyle(value) {\n    this._context.fillStyle = value;\n  }\n  /**\n   * The stroke style to use.\n   * @type {ConvertedStrokeStyle}\n   */\n  get strokeStyle() {\n    return this._context.strokeStyle;\n  }\n  set strokeStyle(value) {\n    this._context.strokeStyle = value;\n  }\n  /**\n   * Creates a new Graphics object.\n   * Note that only the context of the object is cloned, not its transform (position,scale,etc)\n   * @param deep - Whether to create a deep clone of the graphics object. If false, the context\n   * will be shared between the two objects (default false). If true, the context will be\n   * cloned (recommended if you need to modify the context in any way).\n   * @returns - A clone of the graphics object\n   */\n  clone(deep = false) {\n    if (deep) {\n      return new Graphics(this._context.clone());\n    }\n    this._ownedContext = null;\n    const clone = new Graphics(this._context);\n    return clone;\n  }\n  // -------- v7 deprecations ---------\n  /**\n   * @param width\n   * @param color\n   * @param alpha\n   * @deprecated since 8.0.0 Use {@link Graphics#setStrokeStyle} instead\n   */\n  lineStyle(width, color, alpha) {\n    deprecation(v8_0_0, \"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.\");\n    const strokeStyle = {};\n    width && (strokeStyle.width = width);\n    color && (strokeStyle.color = color);\n    alpha && (strokeStyle.alpha = alpha);\n    this.context.strokeStyle = strokeStyle;\n    return this;\n  }\n  /**\n   * @param color\n   * @param alpha\n   * @deprecated since 8.0.0 Use {@link Graphics#fill} instead\n   */\n  beginFill(color, alpha) {\n    deprecation(v8_0_0, \"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.\");\n    const fillStyle = {};\n    color && (fillStyle.color = color);\n    alpha && (fillStyle.alpha = alpha);\n    this.context.fillStyle = fillStyle;\n    return this;\n  }\n  /**\n   * @deprecated since 8.0.0 Use {@link Graphics#fill} instead\n   */\n  endFill() {\n    deprecation(v8_0_0, \"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.\");\n    this.context.fill();\n    const strokeStyle = this.context.strokeStyle;\n    if (strokeStyle.width !== GraphicsContext.defaultStrokeStyle.width || strokeStyle.color !== GraphicsContext.defaultStrokeStyle.color || strokeStyle.alpha !== GraphicsContext.defaultStrokeStyle.alpha) {\n      this.context.stroke();\n    }\n    return this;\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#circle} instead\n   */\n  drawCircle(...args) {\n    deprecation(v8_0_0, \"Graphics#drawCircle has been renamed to Graphics#circle\");\n    return this._callContextMethod(\"circle\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#ellipse} instead\n   */\n  drawEllipse(...args) {\n    deprecation(v8_0_0, \"Graphics#drawEllipse has been renamed to Graphics#ellipse\");\n    return this._callContextMethod(\"ellipse\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#poly} instead\n   */\n  drawPolygon(...args) {\n    deprecation(v8_0_0, \"Graphics#drawPolygon has been renamed to Graphics#poly\");\n    return this._callContextMethod(\"poly\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#rect} instead\n   */\n  drawRect(...args) {\n    deprecation(v8_0_0, \"Graphics#drawRect has been renamed to Graphics#rect\");\n    return this._callContextMethod(\"rect\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#roundRect} instead\n   */\n  drawRoundedRect(...args) {\n    deprecation(v8_0_0, \"Graphics#drawRoundedRect has been renamed to Graphics#roundRect\");\n    return this._callContextMethod(\"roundRect\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#star} instead\n   */\n  drawStar(...args) {\n    deprecation(v8_0_0, \"Graphics#drawStar has been renamed to Graphics#star\");\n    return this._callContextMethod(\"star\", args);\n  }\n}\n\nexport { Graphics };\n//# sourceMappingURL=Graphics.mjs.map\n","import { Buffer } from '../../../rendering/renderers/shared/buffer/Buffer.mjs';\nimport { BufferUsage } from '../../../rendering/renderers/shared/buffer/const.mjs';\nimport { Geometry } from '../../../rendering/renderers/shared/geometry/Geometry.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst _MeshGeometry = class _MeshGeometry extends Geometry {\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (options instanceof Float32Array) {\n      deprecation(v8_0_0, \"use new MeshGeometry({ positions, uvs, indices }) instead\");\n      options = {\n        positions: options,\n        uvs: args[1],\n        indices: args[2]\n      };\n    }\n    options = { ..._MeshGeometry.defaultOptions, ...options };\n    const positions = options.positions || new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]);\n    const uvs = options.uvs || new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]);\n    const indices = options.indices || new Uint32Array([0, 1, 2, 0, 2, 3]);\n    const shrinkToFit = options.shrinkBuffersToFit;\n    const positionBuffer = new Buffer({\n      data: positions,\n      label: \"attribute-mesh-positions\",\n      shrinkToFit,\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST\n    });\n    const uvBuffer = new Buffer({\n      data: uvs,\n      label: \"attribute-mesh-uvs\",\n      shrinkToFit,\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST\n    });\n    const indexBuffer = new Buffer({\n      data: indices,\n      label: \"index-mesh-buffer\",\n      shrinkToFit,\n      usage: BufferUsage.INDEX | BufferUsage.COPY_DST\n    });\n    super({\n      attributes: {\n        aPosition: {\n          buffer: positionBuffer,\n          format: \"float32x2\",\n          stride: 2 * 4,\n          offset: 0\n        },\n        aUV: {\n          buffer: uvBuffer,\n          format: \"float32x2\",\n          stride: 2 * 4,\n          offset: 0\n        }\n      },\n      indexBuffer,\n      topology: options.topology\n    });\n    this.batchMode = \"auto\";\n  }\n  /** The positions of the mesh. */\n  get positions() {\n    return this.attributes.aPosition.buffer.data;\n  }\n  set positions(value) {\n    this.attributes.aPosition.buffer.data = value;\n  }\n  /** The UVs of the mesh. */\n  get uvs() {\n    return this.attributes.aUV.buffer.data;\n  }\n  set uvs(value) {\n    this.attributes.aUV.buffer.data = value;\n  }\n  /** The indices of the mesh. */\n  get indices() {\n    return this.indexBuffer.data;\n  }\n  set indices(value) {\n    this.indexBuffer.data = value;\n  }\n};\n_MeshGeometry.defaultOptions = {\n  topology: \"triangle-list\",\n  shrinkBuffersToFit: false\n};\nlet MeshGeometry = _MeshGeometry;\n\nexport { MeshGeometry };\n//# sourceMappingURL=MeshGeometry.mjs.map\n","\"use strict\";\nconst genericFontFamilies = [\n  \"serif\",\n  \"sans-serif\",\n  \"monospace\",\n  \"cursive\",\n  \"fantasy\",\n  \"system-ui\"\n];\nfunction fontStringFromTextStyle(style) {\n  const fontSizeString = typeof style.fontSize === \"number\" ? `${style.fontSize}px` : style.fontSize;\n  let fontFamilies = style.fontFamily;\n  if (!Array.isArray(style.fontFamily)) {\n    fontFamilies = style.fontFamily.split(\",\");\n  }\n  for (let i = fontFamilies.length - 1; i >= 0; i--) {\n    let fontFamily = fontFamilies[i].trim();\n    if (!/([\\\"\\'])[^\\'\\\"]+\\1/.test(fontFamily) && !genericFontFamilies.includes(fontFamily)) {\n      fontFamily = `\"${fontFamily}\"`;\n    }\n    fontFamilies[i] = fontFamily;\n  }\n  return `${style.fontStyle} ${style.fontVariant} ${style.fontWeight} ${fontSizeString} ${fontFamilies.join(\",\")}`;\n}\n\nexport { fontStringFromTextStyle };\n//# sourceMappingURL=fontStringFromTextStyle.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { fontStringFromTextStyle } from './utils/fontStringFromTextStyle.mjs';\n\n\"use strict\";\nconst contextSettings = {\n  // TextMetrics requires getImageData readback for measuring fonts.\n  willReadFrequently: true\n};\nconst _CanvasTextMetrics = class _CanvasTextMetrics {\n  /**\n   * Checking that we can use modern canvas 2D API.\n   *\n   * Note: This is an unstable API, Chrome < 94 use `textLetterSpacing`, later versions use `letterSpacing`.\n   * @see TextMetrics.experimentalLetterSpacing\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/ICanvasRenderingContext2D/letterSpacing\n   * @see https://developer.chrome.com/origintrials/#/view_trial/3585991203293757441\n   */\n  static get experimentalLetterSpacingSupported() {\n    let result = _CanvasTextMetrics._experimentalLetterSpacingSupported;\n    if (result !== void 0) {\n      const proto = DOMAdapter.get().getCanvasRenderingContext2D().prototype;\n      result = _CanvasTextMetrics._experimentalLetterSpacingSupported = \"letterSpacing\" in proto || \"textLetterSpacing\" in proto;\n    }\n    return result;\n  }\n  /**\n   * @param text - the text that was measured\n   * @param style - the style that was measured\n   * @param width - the measured width of the text\n   * @param height - the measured height of the text\n   * @param lines - an array of the lines of text broken by new lines and wrapping if specified in style\n   * @param lineWidths - an array of the line widths for each line matched to `lines`\n   * @param lineHeight - the measured line height for this style\n   * @param maxLineWidth - the maximum line width for all measured lines\n   * @param {FontMetrics} fontProperties - the font properties object from TextMetrics.measureFont\n   */\n  constructor(text, style, width, height, lines, lineWidths, lineHeight, maxLineWidth, fontProperties) {\n    this.text = text;\n    this.style = style;\n    this.width = width;\n    this.height = height;\n    this.lines = lines;\n    this.lineWidths = lineWidths;\n    this.lineHeight = lineHeight;\n    this.maxLineWidth = maxLineWidth;\n    this.fontProperties = fontProperties;\n  }\n  /**\n   * Measures the supplied string of text and returns a Rectangle.\n   * @param text - The text to measure.\n   * @param style - The text style to use for measuring\n   * @param canvas - optional specification of the canvas to use for measuring.\n   * @param wordWrap\n   * @returns Measured width and height of the text.\n   */\n  static measureText(text = \" \", style, canvas = _CanvasTextMetrics._canvas, wordWrap = style.wordWrap) {\n    const textKey = `${text}:${style.styleKey}`;\n    if (_CanvasTextMetrics._measurementCache[textKey])\n      return _CanvasTextMetrics._measurementCache[textKey];\n    const font = fontStringFromTextStyle(style);\n    const fontProperties = _CanvasTextMetrics.measureFont(font);\n    if (fontProperties.fontSize === 0) {\n      fontProperties.fontSize = style.fontSize;\n      fontProperties.ascent = style.fontSize;\n    }\n    const context = _CanvasTextMetrics.__context;\n    context.font = font;\n    const outputText = wordWrap ? _CanvasTextMetrics._wordWrap(text, style, canvas) : text;\n    const lines = outputText.split(/(?:\\r\\n|\\r|\\n)/);\n    const lineWidths = new Array(lines.length);\n    let maxLineWidth = 0;\n    for (let i = 0; i < lines.length; i++) {\n      const lineWidth = _CanvasTextMetrics._measureText(lines[i], style.letterSpacing, context);\n      lineWidths[i] = lineWidth;\n      maxLineWidth = Math.max(maxLineWidth, lineWidth);\n    }\n    const strokeWidth = style._stroke?.width || 0;\n    let width = maxLineWidth + strokeWidth;\n    if (style.dropShadow) {\n      width += style.dropShadow.distance;\n    }\n    const lineHeight = style.lineHeight || fontProperties.fontSize + strokeWidth;\n    let height = Math.max(lineHeight, fontProperties.fontSize + strokeWidth * 2) + (lines.length - 1) * (lineHeight + style.leading);\n    if (style.dropShadow) {\n      height += style.dropShadow.distance;\n    }\n    const measurements = new _CanvasTextMetrics(\n      text,\n      style,\n      width,\n      height,\n      lines,\n      lineWidths,\n      lineHeight + style.leading,\n      maxLineWidth,\n      fontProperties\n    );\n    return measurements;\n  }\n  static _measureText(text, letterSpacing, context) {\n    let useExperimentalLetterSpacing = false;\n    if (_CanvasTextMetrics.experimentalLetterSpacingSupported) {\n      if (_CanvasTextMetrics.experimentalLetterSpacing) {\n        context.letterSpacing = `${letterSpacing}px`;\n        context.textLetterSpacing = `${letterSpacing}px`;\n        useExperimentalLetterSpacing = true;\n      } else {\n        context.letterSpacing = \"0px\";\n        context.textLetterSpacing = \"0px\";\n      }\n    }\n    let width = context.measureText(text).width;\n    if (width > 0) {\n      if (useExperimentalLetterSpacing) {\n        width -= letterSpacing;\n      } else {\n        width += (_CanvasTextMetrics.graphemeSegmenter(text).length - 1) * letterSpacing;\n      }\n    }\n    return width;\n  }\n  /**\n   * Applies newlines to a string to have it optimally fit into the horizontal\n   * bounds set by the Text object's wordWrapWidth property.\n   * @param text - String to apply word wrapping to\n   * @param style - the style to use when wrapping\n   * @param canvas - optional specification of the canvas to use for measuring.\n   * @returns New string with new lines applied where required\n   */\n  static _wordWrap(text, style, canvas = _CanvasTextMetrics._canvas) {\n    const context = canvas.getContext(\"2d\", contextSettings);\n    let width = 0;\n    let line = \"\";\n    let lines = \"\";\n    const cache = /* @__PURE__ */ Object.create(null);\n    const { letterSpacing, whiteSpace } = style;\n    const collapseSpaces = _CanvasTextMetrics._collapseSpaces(whiteSpace);\n    const collapseNewlines = _CanvasTextMetrics._collapseNewlines(whiteSpace);\n    let canPrependSpaces = !collapseSpaces;\n    const wordWrapWidth = style.wordWrapWidth + letterSpacing;\n    const tokens = _CanvasTextMetrics._tokenize(text);\n    for (let i = 0; i < tokens.length; i++) {\n      let token = tokens[i];\n      if (_CanvasTextMetrics._isNewline(token)) {\n        if (!collapseNewlines) {\n          lines += _CanvasTextMetrics._addLine(line);\n          canPrependSpaces = !collapseSpaces;\n          line = \"\";\n          width = 0;\n          continue;\n        }\n        token = \" \";\n      }\n      if (collapseSpaces) {\n        const currIsBreakingSpace = _CanvasTextMetrics.isBreakingSpace(token);\n        const lastIsBreakingSpace = _CanvasTextMetrics.isBreakingSpace(line[line.length - 1]);\n        if (currIsBreakingSpace && lastIsBreakingSpace) {\n          continue;\n        }\n      }\n      const tokenWidth = _CanvasTextMetrics._getFromCache(token, letterSpacing, cache, context);\n      if (tokenWidth > wordWrapWidth) {\n        if (line !== \"\") {\n          lines += _CanvasTextMetrics._addLine(line);\n          line = \"\";\n          width = 0;\n        }\n        if (_CanvasTextMetrics.canBreakWords(token, style.breakWords)) {\n          const characters = _CanvasTextMetrics.wordWrapSplit(token);\n          for (let j = 0; j < characters.length; j++) {\n            let char = characters[j];\n            let lastChar = char;\n            let k = 1;\n            while (characters[j + k]) {\n              const nextChar = characters[j + k];\n              if (!_CanvasTextMetrics.canBreakChars(lastChar, nextChar, token, j, style.breakWords)) {\n                char += nextChar;\n              } else {\n                break;\n              }\n              lastChar = nextChar;\n              k++;\n            }\n            j += k - 1;\n            const characterWidth = _CanvasTextMetrics._getFromCache(char, letterSpacing, cache, context);\n            if (characterWidth + width > wordWrapWidth) {\n              lines += _CanvasTextMetrics._addLine(line);\n              canPrependSpaces = false;\n              line = \"\";\n              width = 0;\n            }\n            line += char;\n            width += characterWidth;\n          }\n        } else {\n          if (line.length > 0) {\n            lines += _CanvasTextMetrics._addLine(line);\n            line = \"\";\n            width = 0;\n          }\n          const isLastToken = i === tokens.length - 1;\n          lines += _CanvasTextMetrics._addLine(token, !isLastToken);\n          canPrependSpaces = false;\n          line = \"\";\n          width = 0;\n        }\n      } else {\n        if (tokenWidth + width > wordWrapWidth) {\n          canPrependSpaces = false;\n          lines += _CanvasTextMetrics._addLine(line);\n          line = \"\";\n          width = 0;\n        }\n        if (line.length > 0 || !_CanvasTextMetrics.isBreakingSpace(token) || canPrependSpaces) {\n          line += token;\n          width += tokenWidth;\n        }\n      }\n    }\n    lines += _CanvasTextMetrics._addLine(line, false);\n    return lines;\n  }\n  /**\n   * Convienience function for logging each line added during the wordWrap method.\n   * @param line    - The line of text to add\n   * @param newLine - Add new line character to end\n   * @returns A formatted line\n   */\n  static _addLine(line, newLine = true) {\n    line = _CanvasTextMetrics._trimRight(line);\n    line = newLine ? `${line}\n` : line;\n    return line;\n  }\n  /**\n   * Gets & sets the widths of calculated characters in a cache object\n   * @param key            - The key\n   * @param letterSpacing  - The letter spacing\n   * @param cache          - The cache\n   * @param context        - The canvas context\n   * @returns The from cache.\n   */\n  static _getFromCache(key, letterSpacing, cache, context) {\n    let width = cache[key];\n    if (typeof width !== \"number\") {\n      width = _CanvasTextMetrics._measureText(key, letterSpacing, context) + letterSpacing;\n      cache[key] = width;\n    }\n    return width;\n  }\n  /**\n   * Determines whether we should collapse breaking spaces.\n   * @param whiteSpace - The TextStyle property whiteSpace\n   * @returns Should collapse\n   */\n  static _collapseSpaces(whiteSpace) {\n    return whiteSpace === \"normal\" || whiteSpace === \"pre-line\";\n  }\n  /**\n   * Determines whether we should collapse newLine chars.\n   * @param whiteSpace - The white space\n   * @returns should collapse\n   */\n  static _collapseNewlines(whiteSpace) {\n    return whiteSpace === \"normal\";\n  }\n  /**\n   * Trims breaking whitespaces from string.\n   * @param text - The text\n   * @returns Trimmed string\n   */\n  static _trimRight(text) {\n    if (typeof text !== \"string\") {\n      return \"\";\n    }\n    for (let i = text.length - 1; i >= 0; i--) {\n      const char = text[i];\n      if (!_CanvasTextMetrics.isBreakingSpace(char)) {\n        break;\n      }\n      text = text.slice(0, -1);\n    }\n    return text;\n  }\n  /**\n   * Determines if char is a newline.\n   * @param char - The character\n   * @returns True if newline, False otherwise.\n   */\n  static _isNewline(char) {\n    if (typeof char !== \"string\") {\n      return false;\n    }\n    return _CanvasTextMetrics._newlines.includes(char.charCodeAt(0));\n  }\n  /**\n   * Determines if char is a breaking whitespace.\n   *\n   * It allows one to determine whether char should be a breaking whitespace\n   * For example certain characters in CJK langs or numbers.\n   * It must return a boolean.\n   * @param char - The character\n   * @param [_nextChar] - The next character\n   * @returns True if whitespace, False otherwise.\n   */\n  static isBreakingSpace(char, _nextChar) {\n    if (typeof char !== \"string\") {\n      return false;\n    }\n    return _CanvasTextMetrics._breakingSpaces.includes(char.charCodeAt(0));\n  }\n  /**\n   * Splits a string into words, breaking-spaces and newLine characters\n   * @param text - The text\n   * @returns A tokenized array\n   */\n  static _tokenize(text) {\n    const tokens = [];\n    let token = \"\";\n    if (typeof text !== \"string\") {\n      return tokens;\n    }\n    for (let i = 0; i < text.length; i++) {\n      const char = text[i];\n      const nextChar = text[i + 1];\n      if (_CanvasTextMetrics.isBreakingSpace(char, nextChar) || _CanvasTextMetrics._isNewline(char)) {\n        if (token !== \"\") {\n          tokens.push(token);\n          token = \"\";\n        }\n        tokens.push(char);\n        continue;\n      }\n      token += char;\n    }\n    if (token !== \"\") {\n      tokens.push(token);\n    }\n    return tokens;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It allows one to customise which words should break\n   * Examples are if the token is CJK or numbers.\n   * It must return a boolean.\n   * @param _token - The token\n   * @param breakWords - The style attr break words\n   * @returns Whether to break word or not\n   */\n  static canBreakWords(_token, breakWords) {\n    return breakWords;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It allows one to determine whether a pair of characters\n   * should be broken by newlines\n   * For example certain characters in CJK langs or numbers.\n   * It must return a boolean.\n   * @param _char - The character\n   * @param _nextChar - The next character\n   * @param _token - The token/word the characters are from\n   * @param _index - The index in the token of the char\n   * @param _breakWords - The style attr break words\n   * @returns whether to break word or not\n   */\n  static canBreakChars(_char, _nextChar, _token, _index, _breakWords) {\n    return true;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It is called when a token (usually a word) has to be split into separate pieces\n   * in order to determine the point to break a word.\n   * It must return an array of characters.\n   * @param token - The token to split\n   * @returns The characters of the token\n   * @see CanvasTextMetrics.graphemeSegmenter\n   */\n  static wordWrapSplit(token) {\n    return _CanvasTextMetrics.graphemeSegmenter(token);\n  }\n  /**\n   * Calculates the ascent, descent and fontSize of a given font-style\n   * @param font - String representing the style of the font\n   * @returns Font properties object\n   */\n  static measureFont(font) {\n    if (_CanvasTextMetrics._fonts[font]) {\n      return _CanvasTextMetrics._fonts[font];\n    }\n    const context = _CanvasTextMetrics._context;\n    context.font = font;\n    const metrics = context.measureText(_CanvasTextMetrics.METRICS_STRING + _CanvasTextMetrics.BASELINE_SYMBOL);\n    const properties = {\n      ascent: metrics.actualBoundingBoxAscent,\n      descent: metrics.actualBoundingBoxDescent,\n      fontSize: metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent\n    };\n    _CanvasTextMetrics._fonts[font] = properties;\n    return properties;\n  }\n  /**\n   * Clear font metrics in metrics cache.\n   * @param {string} [font] - font name. If font name not set then clear cache for all fonts.\n   */\n  static clearMetrics(font = \"\") {\n    if (font) {\n      delete _CanvasTextMetrics._fonts[font];\n    } else {\n      _CanvasTextMetrics._fonts = {};\n    }\n  }\n  /**\n   * Cached canvas element for measuring text\n   * TODO: this should be private, but isn't because of backward compat, will fix later.\n   * @ignore\n   */\n  static get _canvas() {\n    if (!_CanvasTextMetrics.__canvas) {\n      let canvas;\n      try {\n        const c = new OffscreenCanvas(0, 0);\n        const context = c.getContext(\"2d\", contextSettings);\n        if (context?.measureText) {\n          _CanvasTextMetrics.__canvas = c;\n          return c;\n        }\n        canvas = DOMAdapter.get().createCanvas();\n      } catch (ex) {\n        canvas = DOMAdapter.get().createCanvas();\n      }\n      canvas.width = canvas.height = 10;\n      _CanvasTextMetrics.__canvas = canvas;\n    }\n    return _CanvasTextMetrics.__canvas;\n  }\n  /**\n   * TODO: this should be private, but isn't because of backward compat, will fix later.\n   * @ignore\n   */\n  static get _context() {\n    if (!_CanvasTextMetrics.__context) {\n      _CanvasTextMetrics.__context = _CanvasTextMetrics._canvas.getContext(\"2d\", contextSettings);\n    }\n    return _CanvasTextMetrics.__context;\n  }\n};\n/**\n * String used for calculate font metrics.\n * These characters are all tall to help calculate the height required for text.\n */\n_CanvasTextMetrics.METRICS_STRING = \"|\\xC9q\\xC5\";\n/** Baseline symbol for calculate font metrics. */\n_CanvasTextMetrics.BASELINE_SYMBOL = \"M\";\n/** Baseline multiplier for calculate font metrics. */\n_CanvasTextMetrics.BASELINE_MULTIPLIER = 1.4;\n/** Height multiplier for setting height of canvas to calculate font metrics. */\n_CanvasTextMetrics.HEIGHT_MULTIPLIER = 2;\n/**\n * A Unicode \"character\", or \"grapheme cluster\", can be composed of multiple Unicode code points,\n * such as letters with diacritical marks (e.g. `'\\u0065\\u0301'`, letter e with acute)\n * or emojis with modifiers (e.g. `'\\uD83E\\uDDD1\\u200D\\uD83D\\uDCBB'`, technologist).\n * The new `Intl.Segmenter` API in ES2022 can split the string into grapheme clusters correctly. If it is not available,\n * PixiJS will fallback to use the iterator of String, which can only spilt the string into code points.\n * If you want to get full functionality in environments that don't support `Intl.Segmenter` (such as Firefox),\n * you can use other libraries such as [grapheme-splitter]{@link https://www.npmjs.com/package/grapheme-splitter}\n * or [graphemer]{@link https://www.npmjs.com/package/graphemer} to create a polyfill. Since these libraries can be\n * relatively large in size to handle various Unicode grapheme clusters properly, PixiJS won't use them directly.\n */\n_CanvasTextMetrics.graphemeSegmenter = (() => {\n  if (typeof Intl?.Segmenter === \"function\") {\n    const segmenter = new Intl.Segmenter();\n    return (s) => [...segmenter.segment(s)].map((x) => x.segment);\n  }\n  return (s) => [...s];\n})();\n/**\n * New rendering behavior for letter-spacing which uses Chrome's new native API. This will\n * lead to more accurate letter-spacing results because it does not try to manually draw\n * each character. However, this Chrome API is experimental and may not serve all cases yet.\n * @see TextMetrics.experimentalLetterSpacingSupported\n */\n_CanvasTextMetrics.experimentalLetterSpacing = false;\n/** Cache of {@see TextMetrics.FontMetrics} objects. */\n_CanvasTextMetrics._fonts = {};\n/** Cache of new line chars. */\n_CanvasTextMetrics._newlines = [\n  10,\n  // line feed\n  13\n  // carriage return\n];\n/** Cache of breaking spaces. */\n_CanvasTextMetrics._breakingSpaces = [\n  9,\n  // character tabulation\n  32,\n  // space\n  8192,\n  // en quad\n  8193,\n  // em quad\n  8194,\n  // en space\n  8195,\n  // em space\n  8196,\n  // three-per-em space\n  8197,\n  // four-per-em space\n  8198,\n  // six-per-em space\n  8200,\n  // punctuation space\n  8201,\n  // thin space\n  8202,\n  // hair space\n  8287,\n  // medium mathematical space\n  12288\n  // ideographic space\n];\n_CanvasTextMetrics._measurementCache = {};\nlet CanvasTextMetrics = _CanvasTextMetrics;\n\nexport { CanvasTextMetrics };\n//# sourceMappingURL=CanvasTextMetrics.mjs.map\n","\"use strict\";\nconst valuesToIterateForKeys = [\n  \"_fontFamily\",\n  \"_fontStyle\",\n  \"_fontSize\",\n  \"_fontVariant\",\n  \"_fontWeight\",\n  \"_breakWords\",\n  \"_align\",\n  \"_leading\",\n  \"_letterSpacing\",\n  \"_lineHeight\",\n  \"_textBaseline\",\n  \"_whiteSpace\",\n  \"_wordWrap\",\n  \"_wordWrapWidth\",\n  \"_padding\",\n  \"_cssOverrides\",\n  \"_trim\"\n];\nfunction generateTextStyleKey(style) {\n  const key = [];\n  let index = 0;\n  for (let i = 0; i < valuesToIterateForKeys.length; i++) {\n    const prop = valuesToIterateForKeys[i];\n    key[index++] = style[prop];\n  }\n  index = addFillStyleKey(style._fill, key, index);\n  index = addStokeStyleKey(style._stroke, key, index);\n  return key.join(\"-\");\n}\nfunction addFillStyleKey(fillStyle, key, index) {\n  if (!fillStyle)\n    return index;\n  key[index++] = fillStyle.color;\n  key[index++] = fillStyle.alpha;\n  key[index++] = fillStyle.fill?.uid;\n  return index;\n}\nfunction addStokeStyleKey(strokeStyle, key, index) {\n  if (!strokeStyle)\n    return index;\n  index = addFillStyleKey(strokeStyle, key, index);\n  key[index++] = strokeStyle.width;\n  key[index++] = strokeStyle.alignment;\n  key[index++] = strokeStyle.cap;\n  key[index++] = strokeStyle.join;\n  key[index++] = strokeStyle.miterLimit;\n  return index;\n}\n\nexport { generateTextStyleKey };\n//# sourceMappingURL=generateTextStyleKey.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../color/Color.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { FillGradient } from '../graphics/shared/fill/FillGradient.mjs';\nimport { GraphicsContext } from '../graphics/shared/GraphicsContext.mjs';\nimport { convertFillInputToFillStyle } from '../graphics/shared/utils/convertFillInputToFillStyle.mjs';\nimport { generateTextStyleKey } from './utils/generateTextStyleKey.mjs';\n\n\"use strict\";\nconst _TextStyle = class _TextStyle extends EventEmitter {\n  constructor(style = {}) {\n    super();\n    convertV7Tov8Style(style);\n    const fullStyle = { ..._TextStyle.defaultTextStyle, ...style };\n    for (const key in fullStyle) {\n      const thisKey = key;\n      this[thisKey] = fullStyle[key];\n    }\n    this.update();\n  }\n  /**\n   * Alignment for multiline text, does not affect single line text.\n   * @member {'left'|'center'|'right'|'justify'}\n   */\n  get align() {\n    return this._align;\n  }\n  set align(value) {\n    this._align = value;\n    this.update();\n  }\n  /** Indicates if lines can be wrapped within words, it needs wordWrap to be set to true. */\n  get breakWords() {\n    return this._breakWords;\n  }\n  set breakWords(value) {\n    this._breakWords = value;\n    this.update();\n  }\n  /** Set a drop shadow for the text. */\n  get dropShadow() {\n    return this._dropShadow;\n  }\n  set dropShadow(value) {\n    if (value !== null && typeof value === \"object\") {\n      this._dropShadow = {\n        ..._TextStyle.defaultDropShadow,\n        ...value\n      };\n    } else {\n      this._dropShadow = value ? {\n        ..._TextStyle.defaultDropShadow\n      } : null;\n    }\n    this.update();\n  }\n  /** The font family, can be a single font name, or a list of names where the first is the preferred font. */\n  get fontFamily() {\n    return this._fontFamily;\n  }\n  set fontFamily(value) {\n    this._fontFamily = value;\n    this.update();\n  }\n  /** The font size (as a number it converts to px, but as a string, equivalents are '26px','20pt','160%' or '1.6em') */\n  get fontSize() {\n    return this._fontSize;\n  }\n  set fontSize(value) {\n    if (typeof value === \"string\") {\n      this._fontSize = parseInt(value, 10);\n    } else {\n      this._fontSize = value;\n    }\n    this.update();\n  }\n  /**\n   * The font style.\n   * @member {'normal'|'italic'|'oblique'}\n   */\n  get fontStyle() {\n    return this._fontStyle;\n  }\n  set fontStyle(value) {\n    this._fontStyle = value;\n    this.update();\n  }\n  /**\n   * The font variant.\n   * @member {'normal'|'small-caps'}\n   */\n  get fontVariant() {\n    return this._fontVariant;\n  }\n  set fontVariant(value) {\n    this._fontVariant = value;\n    this.update();\n  }\n  /**\n   * The font weight.\n   * @member {'normal'|'bold'|'bolder'|'lighter'|'100'|'200'|'300'|'400'|'500'|'600'|'700'|'800'|'900'}\n   */\n  get fontWeight() {\n    return this._fontWeight;\n  }\n  set fontWeight(value) {\n    this._fontWeight = value;\n    this.update();\n  }\n  /** The space between lines. */\n  get leading() {\n    return this._leading;\n  }\n  set leading(value) {\n    this._leading = value;\n    this.update();\n  }\n  /** The amount of spacing between letters, default is 0. */\n  get letterSpacing() {\n    return this._letterSpacing;\n  }\n  set letterSpacing(value) {\n    this._letterSpacing = value;\n    this.update();\n  }\n  /** The line height, a number that represents the vertical space that a letter uses. */\n  get lineHeight() {\n    return this._lineHeight;\n  }\n  set lineHeight(value) {\n    this._lineHeight = value;\n    this.update();\n  }\n  /**\n   * Occasionally some fonts are cropped. Adding some padding will prevent this from happening\n   * by adding padding to all sides of the text.\n   */\n  get padding() {\n    return this._padding;\n  }\n  set padding(value) {\n    this._padding = value;\n    this.update();\n  }\n  /** Trim transparent borders. This is an expensive operation so only use this if you have to! */\n  get trim() {\n    return this._trim;\n  }\n  set trim(value) {\n    this._trim = value;\n    this.update();\n  }\n  /**\n   * The baseline of the text that is rendered.\n   * @member {'alphabetic'|'top'|'hanging'|'middle'|'ideographic'|'bottom'}\n   */\n  get textBaseline() {\n    return this._textBaseline;\n  }\n  set textBaseline(value) {\n    this._textBaseline = value;\n    this.update();\n  }\n  /**\n   * How newlines and spaces should be handled.\n   * Default is 'pre' (preserve, preserve).\n   *\n   *  value       | New lines     |   Spaces\n   *  ---         | ---           |   ---\n   * 'normal'     | Collapse      |   Collapse\n   * 'pre'        | Preserve      |   Preserve\n   * 'pre-line'   | Preserve      |   Collapse\n   * @member {'normal'|'pre'|'pre-line'}\n   */\n  get whiteSpace() {\n    return this._whiteSpace;\n  }\n  set whiteSpace(value) {\n    this._whiteSpace = value;\n    this.update();\n  }\n  /** Indicates if word wrap should be used. */\n  get wordWrap() {\n    return this._wordWrap;\n  }\n  set wordWrap(value) {\n    this._wordWrap = value;\n    this.update();\n  }\n  /** The width at which text will wrap, it needs wordWrap to be set to true. */\n  get wordWrapWidth() {\n    return this._wordWrapWidth;\n  }\n  set wordWrapWidth(value) {\n    this._wordWrapWidth = value;\n    this.update();\n  }\n  /** A fillstyle that will be used on the text e.g., 'red', '#00FF00'. */\n  get fill() {\n    return this._originalFill;\n  }\n  set fill(value) {\n    if (value === this._originalFill)\n      return;\n    this._originalFill = value;\n    this._fill = convertFillInputToFillStyle(\n      value === 0 ? \"black\" : value,\n      GraphicsContext.defaultFillStyle\n    );\n    this.update();\n  }\n  /** A fillstyle that will be used on the text stroke, e.g., 'blue', '#FCFF00'. */\n  get stroke() {\n    return this._originalStroke;\n  }\n  set stroke(value) {\n    if (value === this._originalStroke)\n      return;\n    this._originalStroke = value;\n    this._stroke = convertFillInputToFillStyle(value, GraphicsContext.defaultStrokeStyle);\n    this.update();\n  }\n  _generateKey() {\n    this._styleKey = generateTextStyleKey(this);\n    return this._styleKey;\n  }\n  update() {\n    this._styleKey = null;\n    this.emit(\"update\", this);\n  }\n  /** Resets all properties to the default values */\n  reset() {\n    const defaultStyle = _TextStyle.defaultTextStyle;\n    for (const key in defaultStyle) {\n      this[key] = defaultStyle[key];\n    }\n  }\n  get styleKey() {\n    return this._styleKey || this._generateKey();\n  }\n  /**\n   * Creates a new TextStyle object with the same values as this one.\n   * @returns New cloned TextStyle object\n   */\n  clone() {\n    return new _TextStyle({\n      align: this.align,\n      breakWords: this.breakWords,\n      dropShadow: this.dropShadow,\n      fill: this._fill,\n      fontFamily: this.fontFamily,\n      fontSize: this.fontSize,\n      fontStyle: this.fontStyle,\n      fontVariant: this.fontVariant,\n      fontWeight: this.fontWeight,\n      leading: this.leading,\n      letterSpacing: this.letterSpacing,\n      lineHeight: this.lineHeight,\n      padding: this.padding,\n      stroke: this._stroke,\n      textBaseline: this.textBaseline,\n      whiteSpace: this.whiteSpace,\n      wordWrap: this.wordWrap,\n      wordWrapWidth: this.wordWrapWidth\n    });\n  }\n  /**\n   * Destroys this text style.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @param {boolean} [options.texture=false] - Should it destroy the texture of the this style\n   * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the this style\n   */\n  destroy(options = false) {\n    this.removeAllListeners();\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      if (this._fill?.texture) {\n        this._fill.texture.destroy(destroyTextureSource);\n      }\n      if (this._originalFill?.texture) {\n        this._originalFill.texture.destroy(destroyTextureSource);\n      }\n      if (this._stroke?.texture) {\n        this._stroke.texture.destroy(destroyTextureSource);\n      }\n      if (this._originalStroke?.texture) {\n        this._originalStroke.texture.destroy(destroyTextureSource);\n      }\n    }\n    this._fill = null;\n    this._stroke = null;\n    this.dropShadow = null;\n    this._originalStroke = null;\n    this._originalFill = null;\n  }\n};\n/** The default drop shadow settings */\n_TextStyle.defaultDropShadow = {\n  /** Set alpha for the drop shadow */\n  alpha: 1,\n  /** Set a angle of the drop shadow */\n  angle: Math.PI / 6,\n  /** Set a shadow blur radius */\n  blur: 0,\n  /** A fill style to be used on the  e.g., 'red', '#00FF00' */\n  color: \"black\",\n  /** Set a distance of the drop shadow */\n  distance: 5\n};\n/** The default text style settings */\n_TextStyle.defaultTextStyle = {\n  /**\n   * See {@link TextStyle.align}\n   * @type {'left'|'center'|'right'|'justify'}\n   */\n  align: \"left\",\n  /** See {@link TextStyle.breakWords} */\n  breakWords: false,\n  /** See {@link TextStyle.dropShadow} */\n  dropShadow: null,\n  /**\n   * See {@link TextStyle.fill}\n   * @type {string|string[]|number|number[]|CanvasGradient|CanvasPattern}\n   */\n  fill: \"black\",\n  /**\n   * See {@link TextStyle.fontFamily}\n   * @type {string|string[]}\n   */\n  fontFamily: \"Arial\",\n  /**\n   * See {@link TextStyle.fontSize}\n   * @type {number|string}\n   */\n  fontSize: 26,\n  /**\n   * See {@link TextStyle.fontStyle}\n   * @type {'normal'|'italic'|'oblique'}\n   */\n  fontStyle: \"normal\",\n  /**\n   * See {@link TextStyle.fontVariant}\n   * @type {'normal'|'small-caps'}\n   */\n  fontVariant: \"normal\",\n  /**\n   * See {@link TextStyle.fontWeight}\n   * @type {'normal'|'bold'|'bolder'|'lighter'|'100'|'200'|'300'|'400'|'500'|'600'|'700'|'800'|'900'}\n   */\n  fontWeight: \"normal\",\n  /** See {@link TextStyle.leading} */\n  leading: 0,\n  /** See {@link TextStyle.letterSpacing} */\n  letterSpacing: 0,\n  /** See {@link TextStyle.lineHeight} */\n  lineHeight: 0,\n  /** See {@link TextStyle.padding} */\n  padding: 0,\n  /**\n   * See {@link TextStyle.stroke}\n   * @type {string|number}\n   */\n  stroke: null,\n  /**\n   * See {@link TextStyle.textBaseline}\n   * @type {'alphabetic'|'top'|'hanging'|'middle'|'ideographic'|'bottom'}\n   */\n  textBaseline: \"alphabetic\",\n  /** See {@link TextStyle.trim} */\n  trim: false,\n  /**\n   * See {@link TextStyle.whiteSpace}\n   * @type {'normal'|'pre'|'pre-line'}\n   */\n  whiteSpace: \"pre\",\n  /** See {@link TextStyle.wordWrap} */\n  wordWrap: false,\n  /** See {@link TextStyle.wordWrapWidth} */\n  wordWrapWidth: 100\n};\nlet TextStyle = _TextStyle;\nfunction convertV7Tov8Style(style) {\n  const oldStyle = style;\n  if (typeof oldStyle.dropShadow === \"boolean\" && oldStyle.dropShadow) {\n    const defaults = TextStyle.defaultDropShadow;\n    style.dropShadow = {\n      alpha: oldStyle.dropShadowAlpha ?? defaults.alpha,\n      angle: oldStyle.dropShadowAngle ?? defaults.angle,\n      blur: oldStyle.dropShadowBlur ?? defaults.blur,\n      color: oldStyle.dropShadowColor ?? defaults.color,\n      distance: oldStyle.dropShadowDistance ?? defaults.distance\n    };\n  }\n  if (oldStyle.strokeThickness !== void 0) {\n    deprecation(v8_0_0, \"strokeThickness is now a part of stroke\");\n    const color = oldStyle.stroke;\n    style.stroke = {\n      color,\n      width: oldStyle.strokeThickness\n    };\n  }\n  if (Array.isArray(oldStyle.fill)) {\n    deprecation(v8_0_0, \"gradient fill is now a fill pattern: `new FillGradient(...)`\");\n    const gradientFill = new FillGradient(0, 0, 0, style.fontSize * 1.7);\n    const fills = oldStyle.fill.map((color) => Color.shared.setValue(color).toNumber());\n    fills.forEach((number, index) => {\n      const ratio = oldStyle.fillGradientStops[index] ?? index / fills.length;\n      gradientFill.addColorStop(ratio, number);\n    });\n    style.fill = {\n      fill: gradientFill\n    };\n  }\n}\n\nexport { TextStyle };\n//# sourceMappingURL=TextStyle.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { nextPow2 } from '../../../../maths/misc/pow2.mjs';\n\n\"use strict\";\nclass CanvasPoolClass {\n  constructor(canvasOptions) {\n    this._canvasPool = /* @__PURE__ */ Object.create(null);\n    this.canvasOptions = canvasOptions || {};\n    this.enableFullScreen = false;\n  }\n  /**\n   * Creates texture with params that were specified in pool constructor.\n   * @param pixelWidth - Width of texture in pixels.\n   * @param pixelHeight - Height of texture in pixels.\n   */\n  _createCanvasAndContext(pixelWidth, pixelHeight) {\n    const canvas = DOMAdapter.get().createCanvas();\n    canvas.width = pixelWidth;\n    canvas.height = pixelHeight;\n    const context = canvas.getContext(\"2d\");\n    return { canvas, context };\n  }\n  /**\n   * Gets a Power-of-Two render texture or fullScreen texture\n   * @param minWidth - The minimum width of the render texture.\n   * @param minHeight - The minimum height of the render texture.\n   * @param resolution - The resolution of the render texture.\n   * @returns The new render texture.\n   */\n  getOptimalCanvasAndContext(minWidth, minHeight, resolution = 1) {\n    minWidth = Math.ceil(minWidth * resolution - 1e-6);\n    minHeight = Math.ceil(minHeight * resolution - 1e-6);\n    minWidth = nextPow2(minWidth);\n    minHeight = nextPow2(minHeight);\n    const key = (minWidth << 17) + (minHeight << 1);\n    if (!this._canvasPool[key]) {\n      this._canvasPool[key] = [];\n    }\n    let canvasAndContext = this._canvasPool[key].pop();\n    if (!canvasAndContext) {\n      canvasAndContext = this._createCanvasAndContext(minWidth, minHeight);\n    }\n    return canvasAndContext;\n  }\n  /**\n   * Place a render texture back into the pool.\n   * @param canvasAndContext\n   */\n  returnCanvasAndContext(canvasAndContext) {\n    const { width, height } = canvasAndContext.canvas;\n    const key = (width << 17) + (height << 1);\n    this._canvasPool[key].push(canvasAndContext);\n  }\n  clear() {\n    this._canvasPool = {};\n  }\n}\nconst CanvasPool = new CanvasPoolClass();\n\nexport { CanvasPool, CanvasPoolClass };\n//# sourceMappingURL=CanvasPool.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { FillGradient } from '../../../graphics/shared/fill/FillGradient.mjs';\nimport { FillPattern } from '../../../graphics/shared/fill/FillPattern.mjs';\n\n\"use strict\";\nfunction getCanvasFillStyle(fillStyle, context) {\n  if (fillStyle.texture === Texture.WHITE && !fillStyle.fill) {\n    return Color.shared.setValue(fillStyle.color).toHex();\n  } else if (!fillStyle.fill) {\n    const pattern = context.createPattern(fillStyle.texture.source.resource, \"repeat\");\n    const tempMatrix = fillStyle.matrix.copyTo(Matrix.shared);\n    tempMatrix.scale(fillStyle.texture.frame.width, fillStyle.texture.frame.height);\n    pattern.setTransform(tempMatrix);\n    return pattern;\n  } else if (fillStyle.fill instanceof FillPattern) {\n    const fillPattern = fillStyle.fill;\n    const pattern = context.createPattern(fillPattern.texture.source.resource, \"repeat\");\n    const tempMatrix = fillPattern.transform.copyTo(Matrix.shared);\n    tempMatrix.scale(\n      fillPattern.texture.frame.width,\n      fillPattern.texture.frame.height\n    );\n    pattern.setTransform(tempMatrix);\n    return pattern;\n  } else if (fillStyle.fill instanceof FillGradient) {\n    const fillGradient = fillStyle.fill;\n    if (fillGradient.type === \"linear\") {\n      const gradient = context.createLinearGradient(\n        fillGradient.x0,\n        fillGradient.y0,\n        fillGradient.x1,\n        fillGradient.y1\n      );\n      fillGradient.gradientStops.forEach((stop) => {\n        gradient.addColorStop(stop.offset, Color.shared.setValue(stop.color).toHex());\n      });\n      return gradient;\n    }\n  }\n  warn(\"FillStyle not recognised\", fillStyle);\n  return \"red\";\n}\n\nexport { getCanvasFillStyle };\n//# sourceMappingURL=getCanvasFillStyle.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nclass AbstractBitmapFont extends EventEmitter {\n  constructor() {\n    super(...arguments);\n    /** The map of characters by character code. */\n    this.chars = /* @__PURE__ */ Object.create(null);\n    /**\n     * The line-height of the font face in pixels.\n     * @type {number}\n     */\n    this.lineHeight = 0;\n    /**\n     * The name of the font face\n     * @type {string}\n     */\n    this.fontFamily = \"\";\n    /** The metrics of the font face. */\n    this.fontMetrics = { fontSize: 0, ascent: 0, descent: 0 };\n    /**\n     * The offset of the font face from the baseline.\n     * @type {number}\n     */\n    this.baseLineOffset = 0;\n    /** The range and type of the distance field for this font. */\n    this.distanceField = { type: \"none\", range: 0 };\n    /** The map of base page textures (i.e., sheets of glyphs). */\n    this.pages = [];\n    /** The size of the font face in pixels. */\n    this.baseMeasurementFontSize = 100;\n    this.baseRenderedFontSize = 100;\n  }\n  /**\n   * The name of the font face.\n   * @deprecated since 8.0.0 Use `fontFamily` instead.\n   */\n  get font() {\n    deprecation(v8_0_0, \"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead.\");\n    return this.fontFamily;\n  }\n  /**\n   * The map of base page textures (i.e., sheets of glyphs).\n   * @deprecated since 8.0.0 Use `pages` instead.\n   */\n  get pageTextures() {\n    deprecation(v8_0_0, \"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.\");\n    return this.pages;\n  }\n  /**\n   * The size of the font face in pixels.\n   * @deprecated since 8.0.0 Use `fontMetrics.fontSize` instead.\n   */\n  get size() {\n    deprecation(v8_0_0, \"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead.\");\n    return this.fontMetrics.fontSize;\n  }\n  /**\n   * The kind of distance field for this font or \"none\".\n   * @deprecated since 8.0.0 Use `distanceField.type` instead.\n   */\n  get distanceFieldRange() {\n    deprecation(v8_0_0, \"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead.\");\n    return this.distanceField.range;\n  }\n  /**\n   * The range of the distance field in pixels.\n   * @deprecated since 8.0.0 Use `distanceField.range` instead.\n   */\n  get distanceFieldType() {\n    deprecation(v8_0_0, \"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead.\");\n    return this.distanceField.type;\n  }\n  destroy(destroyTextures = false) {\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    for (const i in this.chars) {\n      this.chars[i].texture.destroy();\n    }\n    this.chars = null;\n    if (destroyTextures) {\n      this.pages.forEach((page) => page.texture.destroy(true));\n      this.pages = null;\n    }\n  }\n}\n\nexport { AbstractBitmapFont };\n//# sourceMappingURL=AbstractBitmapFont.mjs.map\n","\"use strict\";\nfunction resolveCharacters(chars) {\n  if (chars === \"\") {\n    return [];\n  }\n  if (typeof chars === \"string\") {\n    chars = [chars];\n  }\n  const result = [];\n  for (let i = 0, j = chars.length; i < j; i++) {\n    const item = chars[i];\n    if (Array.isArray(item)) {\n      if (item.length !== 2) {\n        throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${item.length}.`);\n      }\n      if (item[0].length === 0 || item[1].length === 0) {\n        throw new Error(\"[BitmapFont]: Invalid character delimiter.\");\n      }\n      const startCode = item[0].charCodeAt(0);\n      const endCode = item[1].charCodeAt(0);\n      if (endCode < startCode) {\n        throw new Error(\"[BitmapFont]: Invalid character range.\");\n      }\n      for (let i2 = startCode, j2 = endCode; i2 <= j2; i2++) {\n        result.push(String.fromCharCode(i2));\n      }\n    } else {\n      result.push(...Array.from(item));\n    }\n  }\n  if (result.length === 0) {\n    throw new Error(\"[BitmapFont]: Empty set when resolving characters.\");\n  }\n  return result;\n}\n\nexport { resolveCharacters };\n//# sourceMappingURL=resolveCharacters.mjs.map\n","import { Color } from '../../color/Color.mjs';\nimport { Rectangle } from '../../maths/shapes/Rectangle.mjs';\nimport { CanvasPool } from '../../rendering/renderers/shared/texture/CanvasPool.mjs';\nimport { ImageSource } from '../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { CanvasTextMetrics } from '../text/canvas/CanvasTextMetrics.mjs';\nimport { fontStringFromTextStyle } from '../text/canvas/utils/fontStringFromTextStyle.mjs';\nimport { getCanvasFillStyle } from '../text/canvas/utils/getCanvasFillStyle.mjs';\nimport { AbstractBitmapFont } from './AbstractBitmapFont.mjs';\nimport { resolveCharacters } from './utils/resolveCharacters.mjs';\n\n\"use strict\";\nclass DynamicBitmapFont extends AbstractBitmapFont {\n  /**\n   * @param options - The options for the dynamic bitmap font.\n   */\n  constructor(options) {\n    super();\n    /**\n     * this is a resolution modifier for the font size..\n     * texture resolution will also be used to scale texture according to its font size also\n     */\n    this.resolution = 1;\n    /** The pages of the font. */\n    this.pages = [];\n    this._padding = 4;\n    this._measureCache = /* @__PURE__ */ Object.create(null);\n    this._currentChars = [];\n    this._currentX = 0;\n    this._currentY = 0;\n    this._currentPageIndex = -1;\n    this._skipKerning = false;\n    const dynamicOptions = options;\n    const style = dynamicOptions.style.clone();\n    if (dynamicOptions.overrideFill) {\n      style._fill.color = 16777215;\n      style._fill.alpha = 1;\n      style._fill.texture = Texture.WHITE;\n      style._fill.fill = null;\n    }\n    const requestedFontSize = style.fontSize;\n    style.fontSize = this.baseMeasurementFontSize;\n    const font = fontStringFromTextStyle(style);\n    if (dynamicOptions.overrideSize) {\n      if (style._stroke) {\n        style._stroke.width *= this.baseRenderedFontSize / requestedFontSize;\n      }\n    } else {\n      style.fontSize = this.baseRenderedFontSize = requestedFontSize;\n    }\n    this._style = style;\n    this._skipKerning = dynamicOptions.skipKerning ?? false;\n    this.resolution = dynamicOptions.resolution ?? 1;\n    this._padding = dynamicOptions.padding ?? 4;\n    this.fontMetrics = CanvasTextMetrics.measureFont(font);\n    this.lineHeight = style.lineHeight || this.fontMetrics.fontSize || style.fontSize;\n  }\n  ensureCharacters(chars) {\n    const charList = resolveCharacters(chars).filter((char) => !this._currentChars.includes(char)).filter((char, index, self) => self.indexOf(char) === index);\n    if (!charList.length)\n      return;\n    this._currentChars = [...this._currentChars, ...charList];\n    let pageData;\n    if (this._currentPageIndex === -1) {\n      pageData = this._nextPage();\n    } else {\n      pageData = this.pages[this._currentPageIndex];\n    }\n    let { canvas, context } = pageData.canvasAndContext;\n    let textureSource = pageData.texture.source;\n    const style = this._style;\n    let currentX = this._currentX;\n    let currentY = this._currentY;\n    const fontScale = this.baseRenderedFontSize / this.baseMeasurementFontSize;\n    const padding = this._padding * fontScale;\n    const widthScale = style.fontStyle === \"italic\" ? 2 : 1;\n    let maxCharHeight = 0;\n    let skipTexture = false;\n    for (let i = 0; i < charList.length; i++) {\n      const char = charList[i];\n      const metrics = CanvasTextMetrics.measureText(char, style, canvas, false);\n      metrics.lineHeight = metrics.height;\n      const width = widthScale * metrics.width * fontScale;\n      const height = metrics.height * fontScale;\n      const paddedWidth = width + padding * 2;\n      const paddedHeight = height + padding * 2;\n      skipTexture = false;\n      if (char !== \"\\n\" && char !== \"\\r\" && char !== \"\t\" && char !== \" \") {\n        skipTexture = true;\n        maxCharHeight = Math.ceil(Math.max(paddedHeight, maxCharHeight));\n      }\n      if (currentX + paddedWidth > 512) {\n        currentY += maxCharHeight;\n        maxCharHeight = paddedHeight;\n        currentX = 0;\n        if (currentY + maxCharHeight > 512) {\n          textureSource.update();\n          const pageData2 = this._nextPage();\n          canvas = pageData2.canvasAndContext.canvas;\n          context = pageData2.canvasAndContext.context;\n          textureSource = pageData2.texture.source;\n          currentY = 0;\n        }\n      }\n      const xAdvance = width / fontScale - (style.dropShadow?.distance ?? 0) - (style._stroke?.width ?? 0);\n      this.chars[char] = {\n        id: char.codePointAt(0),\n        xOffset: -this._padding,\n        yOffset: -this._padding,\n        xAdvance,\n        kerning: {}\n      };\n      if (skipTexture) {\n        this._drawGlyph(\n          context,\n          metrics,\n          currentX + padding,\n          currentY + padding,\n          fontScale,\n          style\n        );\n        const px = textureSource.width * fontScale;\n        const py = textureSource.height * fontScale;\n        const frame = new Rectangle(\n          currentX / px * textureSource.width,\n          currentY / py * textureSource.height,\n          paddedWidth / px * textureSource.width,\n          paddedHeight / py * textureSource.height\n        );\n        this.chars[char].texture = new Texture({\n          source: textureSource,\n          frame\n        });\n        currentX += Math.ceil(paddedWidth);\n      }\n    }\n    textureSource.update();\n    this._currentX = currentX;\n    this._currentY = currentY;\n    this._skipKerning && this._applyKerning(charList, context);\n  }\n  /**\n   * @deprecated since 8.0.0\n   * The map of base page textures (i.e., sheets of glyphs).\n   */\n  get pageTextures() {\n    deprecation(v8_0_0, \"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.\");\n    return this.pages;\n  }\n  _applyKerning(newChars, context) {\n    const measureCache = this._measureCache;\n    for (let i = 0; i < newChars.length; i++) {\n      const first = newChars[i];\n      for (let j = 0; j < this._currentChars.length; j++) {\n        const second = this._currentChars[j];\n        let c1 = measureCache[first];\n        if (!c1)\n          c1 = measureCache[first] = context.measureText(first).width;\n        let c2 = measureCache[second];\n        if (!c2)\n          c2 = measureCache[second] = context.measureText(second).width;\n        let total = context.measureText(first + second).width;\n        let amount = total - (c1 + c2);\n        if (amount) {\n          this.chars[first].kerning[second] = amount;\n        }\n        total = context.measureText(first + second).width;\n        amount = total - (c1 + c2);\n        if (amount) {\n          this.chars[second].kerning[first] = amount;\n        }\n      }\n    }\n  }\n  _nextPage() {\n    this._currentPageIndex++;\n    const textureResolution = this.resolution;\n    const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(512, 512, textureResolution);\n    this._setupContext(canvasAndContext.context, this._style, textureResolution);\n    const resolution = textureResolution * (this.baseRenderedFontSize / this.baseMeasurementFontSize);\n    const texture = new Texture({\n      source: new ImageSource({\n        resource: canvasAndContext.canvas,\n        resolution,\n        alphaMode: \"premultiply-alpha-on-upload\"\n      })\n    });\n    const pageData = {\n      canvasAndContext,\n      texture\n    };\n    this.pages[this._currentPageIndex] = pageData;\n    return pageData;\n  }\n  // canvas style!\n  _setupContext(context, style, resolution) {\n    style.fontSize = this.baseRenderedFontSize;\n    context.scale(resolution, resolution);\n    context.font = fontStringFromTextStyle(style);\n    style.fontSize = this.baseMeasurementFontSize;\n    context.textBaseline = style.textBaseline;\n    const stroke = style._stroke;\n    const strokeThickness = stroke?.width ?? 0;\n    if (stroke) {\n      context.lineWidth = strokeThickness;\n      context.lineJoin = stroke.join;\n      context.miterLimit = stroke.miterLimit;\n      context.strokeStyle = getCanvasFillStyle(stroke, context);\n    }\n    if (style._fill) {\n      context.fillStyle = getCanvasFillStyle(style._fill, context);\n    }\n    if (style.dropShadow) {\n      const shadowOptions = style.dropShadow;\n      const rgb = Color.shared.setValue(shadowOptions.color).toArray();\n      const dropShadowBlur = shadowOptions.blur * resolution;\n      const dropShadowDistance = shadowOptions.distance * resolution;\n      context.shadowColor = `rgba(${rgb[0] * 255},${rgb[1] * 255},${rgb[2] * 255},${shadowOptions.alpha})`;\n      context.shadowBlur = dropShadowBlur;\n      context.shadowOffsetX = Math.cos(shadowOptions.angle) * dropShadowDistance;\n      context.shadowOffsetY = Math.sin(shadowOptions.angle) * dropShadowDistance;\n    } else {\n      context.shadowColor = \"black\";\n      context.shadowBlur = 0;\n      context.shadowOffsetX = 0;\n      context.shadowOffsetY = 0;\n    }\n  }\n  _drawGlyph(context, metrics, x, y, fontScale, style) {\n    const char = metrics.text;\n    const fontProperties = metrics.fontProperties;\n    const stroke = style._stroke;\n    const strokeThickness = (stroke?.width ?? 0) * fontScale;\n    const tx = x + strokeThickness / 2;\n    const ty = y - strokeThickness / 2;\n    const descent = fontProperties.descent * fontScale;\n    const lineHeight = metrics.lineHeight * fontScale;\n    if (style.stroke && strokeThickness) {\n      context.strokeText(char, tx, ty + lineHeight - descent);\n    }\n    if (style._fill) {\n      context.fillText(char, tx, ty + lineHeight - descent);\n    }\n  }\n  destroy() {\n    super.destroy();\n    for (let i = 0; i < this.pages.length; i++) {\n      const { canvasAndContext, texture } = this.pages[i];\n      CanvasPool.returnCanvasAndContext(canvasAndContext);\n      texture.destroy(true);\n    }\n    this.pages = null;\n  }\n}\n\nexport { DynamicBitmapFont };\n//# sourceMappingURL=DynamicBitmapFont.mjs.map\n","\"use strict\";\nfunction getBitmapTextLayout(chars, style, font) {\n  const layoutData = {\n    width: 0,\n    height: 0,\n    offsetY: 0,\n    scale: style.fontSize / font.baseMeasurementFontSize,\n    lines: [{\n      width: 0,\n      charPositions: [],\n      spaceWidth: 0,\n      spacesIndex: [],\n      chars: []\n    }]\n  };\n  layoutData.offsetY = font.baseLineOffset;\n  let currentLine = layoutData.lines[0];\n  let previousChar = null;\n  let firstWord = true;\n  const currentWord = {\n    spaceWord: false,\n    width: 0,\n    start: 0,\n    index: 0,\n    // use index to not modify the array as we use it a lot!\n    positions: [],\n    chars: []\n  };\n  const nextWord = (word) => {\n    const start = currentLine.width;\n    for (let j = 0; j < currentWord.index; j++) {\n      const position = word.positions[j];\n      currentLine.chars.push(word.chars[j]);\n      currentLine.charPositions.push(position + start);\n    }\n    currentLine.width += word.width;\n    firstWord = false;\n    currentWord.width = 0;\n    currentWord.index = 0;\n    currentWord.chars.length = 0;\n  };\n  const nextLine = () => {\n    let index = currentLine.chars.length - 1;\n    let lastChar = currentLine.chars[index];\n    while (lastChar === \" \") {\n      currentLine.width -= font.chars[lastChar].xAdvance;\n      lastChar = currentLine.chars[--index];\n    }\n    layoutData.width = Math.max(layoutData.width, currentLine.width);\n    currentLine = {\n      width: 0,\n      charPositions: [],\n      chars: [],\n      spaceWidth: 0,\n      spacesIndex: []\n    };\n    firstWord = true;\n    layoutData.lines.push(currentLine);\n    layoutData.height += font.lineHeight;\n  };\n  const scale = font.baseMeasurementFontSize / style.fontSize;\n  const adjustedLetterSpacing = style.letterSpacing * scale;\n  const adjustedWordWrapWidth = style.wordWrapWidth * scale;\n  for (let i = 0; i < chars.length + 1; i++) {\n    let char;\n    const isEnd = i === chars.length;\n    if (!isEnd) {\n      char = chars[i];\n    }\n    const charData = font.chars[char] || font.chars[\" \"];\n    const isSpace = /(?:\\s)/.test(char);\n    const isWordBreak = isSpace || char === \"\\r\" || char === \"\\n\" || isEnd;\n    if (isWordBreak) {\n      const addWordToNextLine = !firstWord && style.wordWrap && currentLine.width + currentWord.width - adjustedLetterSpacing > adjustedWordWrapWidth;\n      if (addWordToNextLine) {\n        nextLine();\n        nextWord(currentWord);\n        if (!isEnd) {\n          currentLine.charPositions.push(0);\n        }\n      } else {\n        currentWord.start = currentLine.width;\n        nextWord(currentWord);\n        if (!isEnd) {\n          currentLine.charPositions.push(0);\n        }\n      }\n      if (char === \"\\r\" || char === \"\\n\") {\n        if (currentLine.width !== 0) {\n          nextLine();\n        }\n      } else if (!isEnd) {\n        const spaceWidth = charData.xAdvance + (charData.kerning[previousChar] || 0) + adjustedLetterSpacing;\n        currentLine.width += spaceWidth;\n        currentLine.spaceWidth = spaceWidth;\n        currentLine.spacesIndex.push(currentLine.charPositions.length);\n        currentLine.chars.push(char);\n      }\n    } else {\n      const kerning = charData.kerning[previousChar] || 0;\n      const nextCharWidth = charData.xAdvance + kerning + adjustedLetterSpacing;\n      currentWord.positions[currentWord.index++] = currentWord.width + kerning;\n      currentWord.chars.push(char);\n      currentWord.width += nextCharWidth;\n    }\n    previousChar = char;\n  }\n  nextLine();\n  if (style.align === \"center\") {\n    alignCenter(layoutData);\n  } else if (style.align === \"right\") {\n    alignRight(layoutData);\n  } else if (style.align === \"justify\") {\n    alignJustify(layoutData);\n  }\n  return layoutData;\n}\nfunction alignCenter(measurementData) {\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    const offset = measurementData.width / 2 - line.width / 2;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      line.charPositions[j] += offset;\n    }\n  }\n}\nfunction alignRight(measurementData) {\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    const offset = measurementData.width - line.width;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      line.charPositions[j] += offset;\n    }\n  }\n}\nfunction alignJustify(measurementData) {\n  const width = measurementData.width;\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    let indy = 0;\n    let spaceIndex = line.spacesIndex[indy++];\n    let offset = 0;\n    const totalSpaces = line.spacesIndex.length;\n    const newSpaceWidth = (width - line.width) / totalSpaces;\n    const spaceWidth = newSpaceWidth;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      if (j === spaceIndex) {\n        spaceIndex = line.spacesIndex[indy++];\n        offset += spaceWidth;\n      }\n      line.charPositions[j] += offset;\n    }\n  }\n}\n\nexport { getBitmapTextLayout };\n//# sourceMappingURL=getBitmapTextLayout.mjs.map\n","import { Cache } from '../../assets/cache/Cache.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { TextStyle } from '../text/TextStyle.mjs';\nimport { DynamicBitmapFont } from './DynamicBitmapFont.mjs';\nimport { getBitmapTextLayout } from './utils/getBitmapTextLayout.mjs';\nimport { resolveCharacters } from './utils/resolveCharacters.mjs';\n\n\"use strict\";\nclass BitmapFontManagerClass {\n  constructor() {\n    /**\n     * This character set includes all the letters in the alphabet (both lower- and upper- case).\n     * @type {string[][]}\n     * @example\n     * BitmapFont.from('ExampleFont', style, { chars: BitmapFont.ALPHA })\n     */\n    this.ALPHA = [[\"a\", \"z\"], [\"A\", \"Z\"], \" \"];\n    /**\n     * This character set includes all decimal digits (from 0 to 9).\n     * @type {string[][]}\n     * @example\n     * BitmapFont.from('ExampleFont', style, { chars: BitmapFont.NUMERIC })\n     */\n    this.NUMERIC = [[\"0\", \"9\"]];\n    /**\n     * This character set is the union of `BitmapFont.ALPHA` and `BitmapFont.NUMERIC`.\n     * @type {string[][]}\n     */\n    this.ALPHANUMERIC = [[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \" \"];\n    /**\n     * This character set consists of all the ASCII table.\n     * @member {string[][]}\n     * @see http://www.asciitable.com/\n     */\n    this.ASCII = [[\" \", \"~\"]];\n    /** Default options for installing a new BitmapFont. */\n    this.defaultOptions = {\n      chars: this.ALPHANUMERIC,\n      resolution: 1,\n      padding: 4,\n      skipKerning: false\n    };\n  }\n  /**\n   * Get a font for the specified text and style.\n   * @param text - The text to get the font for\n   * @param style - The style to use\n   */\n  getFont(text, style) {\n    let fontFamilyKey = `${style.fontFamily}-bitmap`;\n    let overrideFill = true;\n    if (style._fill.fill) {\n      fontFamilyKey += style._fill.fill.uid;\n      overrideFill = false;\n    }\n    if (!Cache.has(fontFamilyKey)) {\n      const fnt = new DynamicBitmapFont({\n        style,\n        overrideFill,\n        overrideSize: true,\n        ...this.defaultOptions\n      });\n      fnt.once(\"destroy\", () => Cache.remove(fontFamilyKey));\n      Cache.set(\n        fontFamilyKey,\n        fnt\n      );\n    }\n    const dynamicFont = Cache.get(fontFamilyKey);\n    dynamicFont.ensureCharacters?.(text);\n    return dynamicFont;\n  }\n  /**\n   * Get the layout of a text for the specified style.\n   * @param text - The text to get the layout for\n   * @param style - The style to use\n   */\n  getLayout(text, style) {\n    const bitmapFont = this.getFont(text, style);\n    return getBitmapTextLayout(text.split(\"\"), style, bitmapFont);\n  }\n  /**\n   * Measure the text using the specified style.\n   * @param text - The text to measure\n   * @param style - The style to use\n   */\n  measureText(text, style) {\n    return this.getLayout(text, style);\n  }\n  // eslint-disable-next-line max-len\n  install(...args) {\n    let options = args[0];\n    if (typeof options === \"string\") {\n      options = {\n        name: options,\n        style: args[1],\n        chars: args[2]?.chars,\n        resolution: args[2]?.resolution,\n        padding: args[2]?.padding,\n        skipKerning: args[2]?.skipKerning\n      };\n      deprecation(v8_0_0, \"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})\");\n    }\n    const name = options?.name;\n    if (!name) {\n      throw new Error(\"[BitmapFontManager] Property `name` is required.\");\n    }\n    options = { ...this.defaultOptions, ...options };\n    const textStyle = options.style;\n    const style = textStyle instanceof TextStyle ? textStyle : new TextStyle(textStyle);\n    const overrideFill = style._fill.fill !== null && style._fill.fill !== void 0;\n    const font = new DynamicBitmapFont({\n      style,\n      overrideFill,\n      skipKerning: options.skipKerning,\n      padding: options.padding,\n      resolution: options.resolution,\n      overrideSize: false\n    });\n    const flatChars = resolveCharacters(options.chars);\n    font.ensureCharacters(flatChars.join(\"\"));\n    Cache.set(`${name}-bitmap`, font);\n    font.once(\"destroy\", () => Cache.remove(`${name}-bitmap`));\n    return font;\n  }\n  /**\n   * Uninstalls a bitmap font from the cache.\n   * @param {string} name - The name of the bitmap font to uninstall.\n   */\n  uninstall(name) {\n    const cacheKey = `${name}-bitmap`;\n    const font = Cache.get(cacheKey);\n    if (font) {\n      Cache.remove(cacheKey);\n      font.destroy();\n    }\n  }\n}\nconst BitmapFontManager = new BitmapFontManagerClass();\n\nexport { BitmapFontManager };\n//# sourceMappingURL=BitmapFontManager.mjs.map\n","import { Color } from '../../../color/Color.mjs';\n\n\"use strict\";\nfunction textStyleToCSS(style) {\n  const stroke = style._stroke;\n  const fill = style._fill;\n  const cssStyleString = [\n    `color: ${Color.shared.setValue(fill.color).toHex()}`,\n    `font-size: ${style.fontSize}px`,\n    `font-family: ${style.fontFamily}`,\n    `font-weight: ${style.fontWeight}`,\n    `font-style: ${style.fontStyle}`,\n    `font-variant: ${style.fontVariant}`,\n    `letter-spacing: ${style.letterSpacing}px`,\n    `text-align: ${style.align}`,\n    `padding: ${style.padding}px`,\n    `white-space: ${style.whiteSpace === \"pre\" && style.wordWrap ? \"pre-wrap\" : style.whiteSpace}`,\n    ...style.lineHeight ? [`line-height: ${style.lineHeight}px`] : [],\n    ...style.wordWrap ? [\n      `word-wrap: ${style.breakWords ? \"break-all\" : \"break-word\"}`,\n      `max-width: ${style.wordWrapWidth}px`\n    ] : [],\n    ...stroke ? [strokeToCSS(stroke)] : [],\n    ...style.dropShadow ? [dropShadowToCSS(style.dropShadow)] : [],\n    ...style.cssOverrides\n  ].join(\";\");\n  const cssStyles = [`div { ${cssStyleString} }`];\n  tagStyleToCSS(style.tagStyles, cssStyles);\n  return cssStyles.join(\" \");\n}\nfunction dropShadowToCSS(dropShadowStyle) {\n  const color = Color.shared.setValue(dropShadowStyle.color).setAlpha(dropShadowStyle.alpha).toHexa();\n  const x = Math.round(Math.cos(dropShadowStyle.angle) * dropShadowStyle.distance);\n  const y = Math.round(Math.sin(dropShadowStyle.angle) * dropShadowStyle.distance);\n  const position = `${x}px ${y}px`;\n  if (dropShadowStyle.blur > 0) {\n    return `text-shadow: ${position} ${dropShadowStyle.blur}px ${color}`;\n  }\n  return `text-shadow: ${position} ${color}`;\n}\nfunction strokeToCSS(stroke) {\n  return [\n    `-webkit-text-stroke-width: ${stroke.width}px`,\n    `-webkit-text-stroke-color: ${Color.shared.setValue(stroke.color).toHex()}`,\n    `text-stroke-width: ${stroke.width}px`,\n    `text-stroke-color: ${Color.shared.setValue(stroke.color).toHex()}`,\n    \"paint-order: stroke\"\n  ].join(\";\");\n}\nconst templates = {\n  fontSize: `font-size: {{VALUE}}px`,\n  fontFamily: `font-family: {{VALUE}}`,\n  fontWeight: `font-weight: {{VALUE}}`,\n  fontStyle: `font-style: {{VALUE}}`,\n  fontVariant: `font-variant: {{VALUE}}`,\n  letterSpacing: `letter-spacing: {{VALUE}}px`,\n  align: `text-align: {{VALUE}}`,\n  padding: `padding: {{VALUE}}px`,\n  whiteSpace: `white-space: {{VALUE}}`,\n  lineHeight: `line-height: {{VALUE}}px`,\n  wordWrapWidth: `max-width: {{VALUE}}px`\n};\nconst transform = {\n  fill: (value) => `color: ${Color.shared.setValue(value).toHex()}`,\n  breakWords: (value) => `word-wrap: ${value ? \"break-all\" : \"break-word\"}`,\n  stroke: strokeToCSS,\n  dropShadow: dropShadowToCSS\n};\nfunction tagStyleToCSS(tagStyles, out) {\n  for (const i in tagStyles) {\n    const tagStyle = tagStyles[i];\n    const cssTagStyle = [];\n    for (const j in tagStyle) {\n      if (transform[j]) {\n        cssTagStyle.push(transform[j](tagStyle[j]));\n      } else if (templates[j]) {\n        cssTagStyle.push(templates[j].replace(\"{{VALUE}}\", tagStyle[j]));\n      }\n    }\n    out.push(`${i} { ${cssTagStyle.join(\";\")} }`);\n  }\n}\n\nexport { textStyleToCSS };\n//# sourceMappingURL=textStyleToCSS.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { TextStyle } from '../text/TextStyle.mjs';\nimport { generateTextStyleKey } from '../text/utils/generateTextStyleKey.mjs';\nimport { textStyleToCSS } from './utils/textStyleToCSS.mjs';\n\n\"use strict\";\nclass HTMLTextStyle extends TextStyle {\n  constructor(options = {}) {\n    super(options);\n    this._cssOverrides = [];\n    this.cssOverrides ?? (this.cssOverrides = options.cssOverrides);\n    this.tagStyles = options.tagStyles ?? {};\n  }\n  /** List of style overrides that will be applied to the HTML text. */\n  set cssOverrides(value) {\n    this._cssOverrides = value instanceof Array ? value : [value];\n    this.update();\n  }\n  get cssOverrides() {\n    return this._cssOverrides;\n  }\n  _generateKey() {\n    this._styleKey = generateTextStyleKey(this) + this._cssOverrides.join(\"-\");\n    return this._styleKey;\n  }\n  update() {\n    this._cssStyle = null;\n    super.update();\n  }\n  /**\n   * Creates a new HTMLTextStyle object with the same values as this one.\n   * @returns New cloned HTMLTextStyle object\n   */\n  clone() {\n    return new HTMLTextStyle({\n      align: this.align,\n      breakWords: this.breakWords,\n      dropShadow: this.dropShadow,\n      fill: this._fill,\n      fontFamily: this.fontFamily,\n      fontSize: this.fontSize,\n      fontStyle: this.fontStyle,\n      fontVariant: this.fontVariant,\n      fontWeight: this.fontWeight,\n      letterSpacing: this.letterSpacing,\n      lineHeight: this.lineHeight,\n      padding: this.padding,\n      stroke: this._stroke,\n      whiteSpace: this.whiteSpace,\n      wordWrap: this.wordWrap,\n      wordWrapWidth: this.wordWrapWidth,\n      cssOverrides: this.cssOverrides\n    });\n  }\n  get cssStyle() {\n    if (!this._cssStyle) {\n      this._cssStyle = textStyleToCSS(this);\n    }\n    return this._cssStyle;\n  }\n  /**\n   * Add a style override, this can be any CSS property\n   * it will override any built-in style. This is the\n   * property and the value as a string (e.g., `color: red`).\n   * This will override any other internal style.\n   * @param {string} value - CSS style(s) to add.\n   * @example\n   * style.addOverride('background-color: red');\n   */\n  addOverride(...value) {\n    const toAdd = value.filter((v) => !this.cssOverrides.includes(v));\n    if (toAdd.length > 0) {\n      this.cssOverrides.push(...toAdd);\n      this.update();\n    }\n  }\n  /**\n   * Remove any overrides that match the value.\n   * @param {string} value - CSS style to remove.\n   * @example\n   * style.removeOverride('background-color: red');\n   */\n  removeOverride(...value) {\n    const toRemove = value.filter((v) => this.cssOverrides.includes(v));\n    if (toRemove.length > 0) {\n      this.cssOverrides = this.cssOverrides.filter((v) => !toRemove.includes(v));\n      this.update();\n    }\n  }\n  set fill(value) {\n    if (typeof value !== \"string\" && typeof value !== \"number\") {\n      warn(\"[HTMLTextStyle] only color fill is not supported by HTMLText\");\n    }\n    super.fill = value;\n  }\n  set stroke(value) {\n    if (value && typeof value !== \"string\" && typeof value !== \"number\") {\n      warn(\"[HTMLTextStyle] only color stroke is not supported by HTMLText\");\n    }\n    super.stroke = value;\n  }\n}\n\nexport { HTMLTextStyle };\n//# sourceMappingURL=HtmlTextStyle.mjs.map\n","\"use strict\";\nconst nssvg = \"http://www.w3.org/2000/svg\";\nconst nsxhtml = \"http://www.w3.org/1999/xhtml\";\nclass HTMLTextRenderData {\n  constructor() {\n    this.svgRoot = document.createElementNS(nssvg, \"svg\");\n    this.foreignObject = document.createElementNS(nssvg, \"foreignObject\");\n    this.domElement = document.createElementNS(nsxhtml, \"div\");\n    this.styleElement = document.createElementNS(nsxhtml, \"style\");\n    this.image = new Image();\n    const { foreignObject, svgRoot, styleElement, domElement } = this;\n    foreignObject.setAttribute(\"width\", \"10000\");\n    foreignObject.setAttribute(\"height\", \"10000\");\n    foreignObject.style.overflow = \"hidden\";\n    svgRoot.appendChild(foreignObject);\n    foreignObject.appendChild(styleElement);\n    foreignObject.appendChild(domElement);\n  }\n}\n\nexport { HTMLTextRenderData, nssvg, nsxhtml };\n//# sourceMappingURL=HTMLTextRenderData.mjs.map\n","import { CanvasTextMetrics } from '../../text/canvas/CanvasTextMetrics.mjs';\nimport { HTMLTextRenderData } from '../HTMLTextRenderData.mjs';\n\n\"use strict\";\nlet tempHTMLTextRenderData;\nfunction measureHtmlText(text, style, fontStyleCSS, htmlTextRenderData) {\n  htmlTextRenderData = htmlTextRenderData || tempHTMLTextRenderData || (tempHTMLTextRenderData = new HTMLTextRenderData());\n  const { domElement, styleElement, svgRoot } = htmlTextRenderData;\n  domElement.innerHTML = `<style>${style.cssStyle}</style><div>${text}</div>`;\n  domElement.setAttribute(\"style\", \"transform-origin: top left; display: inline-block\");\n  if (fontStyleCSS) {\n    styleElement.textContent = fontStyleCSS;\n  }\n  document.body.appendChild(svgRoot);\n  const contentBounds = domElement.getBoundingClientRect();\n  svgRoot.remove();\n  const descenderPadding = CanvasTextMetrics.measureFont(style.fontStyle).descent;\n  return {\n    width: contentBounds.width,\n    height: contentBounds.height + descenderPadding\n  };\n}\n\nexport { measureHtmlText };\n//# sourceMappingURL=measureHtmlText.mjs.map\n","import { warn } from '../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nfunction addBits(srcParts, parts, name) {\n  if (srcParts) {\n    for (const i in srcParts) {\n      const id = i.toLocaleLowerCase();\n      const part = parts[id];\n      if (part) {\n        let sanitisedPart = srcParts[i];\n        if (i === \"header\") {\n          sanitisedPart = sanitisedPart.replace(/@in\\s+[^;]+;\\s*/g, \"\").replace(/@out\\s+[^;]+;\\s*/g, \"\");\n        }\n        if (name) {\n          part.push(`//----${name}----//`);\n        }\n        part.push(sanitisedPart);\n      } else {\n        warn(`${i} placement hook does not exist in shader`);\n      }\n    }\n  }\n}\n\nexport { addBits };\n//# sourceMappingURL=addBits.mjs.map\n","\"use strict\";\nconst findHooksRx = /\\{\\{(.*?)\\}\\}/g;\nfunction compileHooks(programSrc) {\n  const parts = {};\n  const partMatches = programSrc.match(findHooksRx)?.map((hook) => hook.replace(/[{()}]/g, \"\")) ?? [];\n  partMatches.forEach((hook) => {\n    parts[hook] = [];\n  });\n  return parts;\n}\n\nexport { compileHooks, findHooksRx };\n//# sourceMappingURL=compileHooks.mjs.map\n","\"use strict\";\nfunction extractInputs(fragmentSource, out) {\n  let match;\n  const regex = /@in\\s+([^;]+);/g;\n  while ((match = regex.exec(fragmentSource)) !== null) {\n    out.push(match[1]);\n  }\n}\nfunction compileInputs(fragments, template, sort = false) {\n  const results = [];\n  extractInputs(template, results);\n  fragments.forEach((fragment) => {\n    if (fragment.header) {\n      extractInputs(fragment.header, results);\n    }\n  });\n  const mainInput = results;\n  if (sort) {\n    mainInput.sort();\n  }\n  const finalString = mainInput.map((inValue, i) => `       @location(${i}) ${inValue},`).join(\"\\n\");\n  let cleanedString = template.replace(/@in\\s+[^;]+;\\s*/g, \"\");\n  cleanedString = cleanedString.replace(\"{{in}}\", `\n${finalString}\n`);\n  return cleanedString;\n}\n\nexport { compileInputs };\n//# sourceMappingURL=compileInputs.mjs.map\n","\"use strict\";\nfunction extractOutputs(fragmentSource, out) {\n  let match;\n  const regex = /@out\\s+([^;]+);/g;\n  while ((match = regex.exec(fragmentSource)) !== null) {\n    out.push(match[1]);\n  }\n}\nfunction extractVariableName(value) {\n  const regex = /\\b(\\w+)\\s*:/g;\n  const match = regex.exec(value);\n  return match ? match[1] : \"\";\n}\nfunction stripVariable(value) {\n  const regex = /@.*?\\s+/g;\n  return value.replace(regex, \"\");\n}\nfunction compileOutputs(fragments, template) {\n  const results = [];\n  extractOutputs(template, results);\n  fragments.forEach((fragment) => {\n    if (fragment.header) {\n      extractOutputs(fragment.header, results);\n    }\n  });\n  let index = 0;\n  const mainStruct = results.sort().map((inValue) => {\n    if (inValue.indexOf(\"builtin\") > -1) {\n      return inValue;\n    }\n    return `@location(${index++}) ${inValue}`;\n  }).join(\",\\n\");\n  const mainStart = results.sort().map((inValue) => `       var ${stripVariable(inValue)};`).join(\"\\n\");\n  const mainEnd = `return VSOutput(\n                ${results.sort().map((inValue) => ` ${extractVariableName(inValue)}`).join(\",\\n\")});`;\n  let compiledCode = template.replace(/@out\\s+[^;]+;\\s*/g, \"\");\n  compiledCode = compiledCode.replace(\"{{struct}}\", `\n${mainStruct}\n`);\n  compiledCode = compiledCode.replace(\"{{start}}\", `\n${mainStart}\n`);\n  compiledCode = compiledCode.replace(\"{{return}}\", `\n${mainEnd}\n`);\n  return compiledCode;\n}\n\nexport { compileOutputs };\n//# sourceMappingURL=compileOutputs.mjs.map\n","\"use strict\";\nfunction injectBits(templateSrc, fragmentParts) {\n  let out = templateSrc;\n  for (const i in fragmentParts) {\n    const parts = fragmentParts[i];\n    const toInject = parts.join(\"\\n\");\n    if (toInject.length) {\n      out = out.replace(`{{${i}}}`, `//-----${i} START-----//\n${parts.join(\"\\n\")}\n//----${i} FINISH----//`);\n    } else {\n      out = out.replace(`{{${i}}}`, \"\");\n    }\n  }\n  return out;\n}\n\nexport { injectBits };\n//# sourceMappingURL=injectBits.mjs.map\n","import { addBits } from './utils/addBits.mjs';\nimport { compileHooks } from './utils/compileHooks.mjs';\nimport { compileInputs } from './utils/compileInputs.mjs';\nimport { compileOutputs } from './utils/compileOutputs.mjs';\nimport { injectBits } from './utils/injectBits.mjs';\n\n\"use strict\";\nconst cacheMap = /* @__PURE__ */ Object.create(null);\nconst bitCacheMap = /* @__PURE__ */ new Map();\nlet CACHE_UID = 0;\nfunction compileHighShader({\n  template,\n  bits\n}) {\n  const cacheId = generateCacheId(template, bits);\n  if (cacheMap[cacheId])\n    return cacheMap[cacheId];\n  const { vertex, fragment } = compileInputsAndOutputs(template, bits);\n  cacheMap[cacheId] = compileBits(vertex, fragment, bits);\n  return cacheMap[cacheId];\n}\nfunction compileHighShaderGl({\n  template,\n  bits\n}) {\n  const cacheId = generateCacheId(template, bits);\n  if (cacheMap[cacheId])\n    return cacheMap[cacheId];\n  cacheMap[cacheId] = compileBits(template.vertex, template.fragment, bits);\n  return cacheMap[cacheId];\n}\nfunction compileInputsAndOutputs(template, bits) {\n  const vertexFragments = bits.map((shaderBit) => shaderBit.vertex).filter((v) => !!v);\n  const fragmentFragments = bits.map((shaderBit) => shaderBit.fragment).filter((v) => !!v);\n  let compiledVertex = compileInputs(vertexFragments, template.vertex, true);\n  compiledVertex = compileOutputs(vertexFragments, compiledVertex);\n  const compiledFragment = compileInputs(fragmentFragments, template.fragment, true);\n  return {\n    vertex: compiledVertex,\n    fragment: compiledFragment\n  };\n}\nfunction generateCacheId(template, bits) {\n  return bits.map((highFragment) => {\n    if (!bitCacheMap.has(highFragment)) {\n      bitCacheMap.set(highFragment, CACHE_UID++);\n    }\n    return bitCacheMap.get(highFragment);\n  }).sort((a, b) => a - b).join(\"-\") + template.vertex + template.fragment;\n}\nfunction compileBits(vertex, fragment, bits) {\n  const vertexParts = compileHooks(vertex);\n  const fragmentParts = compileHooks(fragment);\n  bits.forEach((shaderBit) => {\n    addBits(shaderBit.vertex, vertexParts, shaderBit.name);\n    addBits(shaderBit.fragment, fragmentParts, shaderBit.name);\n  });\n  return {\n    vertex: injectBits(vertex, vertexParts),\n    fragment: injectBits(fragment, fragmentParts)\n  };\n}\n\nexport { compileHighShader, compileHighShaderGl };\n//# sourceMappingURL=compileHighShader.mjs.map\n","\"use strict\";\nconst vertexGPUTemplate = (\n  /* wgsl */\n  `\n    @in aPosition: vec2<f32>;\n    @in aUV: vec2<f32>;\n\n    @out @builtin(position) vPosition: vec4<f32>;\n    @out vUV : vec2<f32>;\n    @out vColor : vec4<f32>;\n\n    {{header}}\n\n    struct VSOutput {\n        {{struct}}\n    };\n\n    @vertex\n    fn main( {{in}} ) -> VSOutput {\n\n        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;\n        var modelMatrix = mat3x3<f32>(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        var position = aPosition;\n        var uv = aUV;\n\n        {{start}}\n        \n        vColor = vec4<f32>(1., 1., 1., 1.);\n\n        {{main}}\n\n        vUV = uv;\n\n        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);\n       \n        vColor *= globalUniforms.uWorldColorAlpha;\n\n        {{end}}\n\n        {{return}}\n    };\n`\n);\nconst fragmentGPUTemplate = (\n  /* wgsl */\n  `\n    @in vUV : vec2<f32>;\n    @in vColor : vec4<f32>;\n   \n    {{header}}\n\n    @fragment\n    fn main(\n        {{in}}\n      ) -> @location(0) vec4<f32> {\n        \n        {{start}}\n\n        var outColor:vec4<f32>;\n      \n        {{main}}\n        \n        return outColor * vColor;\n      };\n`\n);\nconst vertexGlTemplate = (\n  /* glsl */\n  `\n    in vec2 aPosition;\n    in vec2 aUV;\n\n    out vec4 vColor;\n    out vec2 vUV;\n\n    {{header}}\n\n    void main(void){\n\n        mat3 worldTransformMatrix = uWorldTransformMatrix;\n        mat3 modelMatrix = mat3(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        vec2 position = aPosition;\n        vec2 uv = aUV;\n        \n        {{start}}\n        \n        vColor = vec4(1.);\n        \n        {{main}}\n        \n        vUV = uv;\n        \n        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n\n        vColor *= uWorldColorAlpha;\n\n        {{end}}\n    }\n`\n);\nconst fragmentGlTemplate = (\n  /* glsl */\n  `\n   \n    in vec4 vColor;\n    in vec2 vUV;\n\n    out vec4 finalColor;\n\n    {{header}}\n\n    void main(void) {\n        \n        {{start}}\n\n        vec4 outColor;\n      \n        {{main}}\n        \n        finalColor = outColor * vColor;\n    }\n`\n);\n\nexport { fragmentGPUTemplate, fragmentGlTemplate, vertexGPUTemplate, vertexGlTemplate };\n//# sourceMappingURL=defaultProgramTemplate.mjs.map\n","\"use strict\";\nconst globalUniformsBit = {\n  name: \"global-uniforms-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n        struct GlobalUniforms {\n            uProjectionMatrix:mat3x3<f32>,\n            uWorldTransformMatrix:mat3x3<f32>,\n            uWorldColorAlpha: vec4<f32>,\n            uResolution: vec2<f32>,\n        }\n\n        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;\n        `\n    )\n  }\n};\nconst globalUniformsUBOBitGl = {\n  name: \"global-uniforms-ubo-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n          uniform globalUniforms {\n            mat3 uProjectionMatrix;\n            mat3 uWorldTransformMatrix;\n            vec4 uWorldColorAlpha;\n            vec2 uResolution;\n          };\n        `\n    )\n  }\n};\nconst globalUniformsBitGl = {\n  name: \"global-uniforms-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n          uniform mat3 uProjectionMatrix;\n          uniform mat3 uWorldTransformMatrix;\n          uniform vec4 uWorldColorAlpha;\n          uniform vec2 uResolution;\n        `\n    )\n  }\n};\n\nexport { globalUniformsBit, globalUniformsBitGl, globalUniformsUBOBitGl };\n//# sourceMappingURL=globalUniformsBit.mjs.map\n","import { GlProgram } from '../renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../renderers/gpu/shader/GpuProgram.mjs';\nimport { compileHighShader, compileHighShaderGl } from './compiler/compileHighShader.mjs';\nimport { fragmentGPUTemplate, vertexGPUTemplate, vertexGlTemplate, fragmentGlTemplate } from './defaultProgramTemplate.mjs';\nimport { globalUniformsBit, globalUniformsBitGl } from './shader-bits/globalUniformsBit.mjs';\n\n\"use strict\";\nfunction compileHighShaderGpuProgram({ bits, name }) {\n  const source = compileHighShader({\n    template: {\n      fragment: fragmentGPUTemplate,\n      vertex: vertexGPUTemplate\n    },\n    bits: [\n      globalUniformsBit,\n      ...bits\n    ]\n  });\n  return GpuProgram.from({\n    name,\n    vertex: {\n      source: source.vertex,\n      entryPoint: \"main\"\n    },\n    fragment: {\n      source: source.fragment,\n      entryPoint: \"main\"\n    }\n  });\n}\nfunction compileHighShaderGlProgram({ bits, name }) {\n  return new GlProgram({\n    name,\n    ...compileHighShaderGl({\n      template: {\n        vertex: vertexGlTemplate,\n        fragment: fragmentGlTemplate\n      },\n      bits: [\n        globalUniformsBitGl,\n        ...bits\n      ]\n    })\n  });\n}\n\nexport { compileHighShaderGlProgram, compileHighShaderGpuProgram };\n//# sourceMappingURL=compileHighShaderToProgram.mjs.map\n","\"use strict\";\nconst colorBit = {\n  name: \"color-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n            @in aColor: vec4<f32>;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);\n        `\n    )\n  }\n};\nconst colorBitGl = {\n  name: \"color-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n            in vec4 aColor;\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);\n        `\n    )\n  }\n};\n\nexport { colorBit, colorBitGl };\n//# sourceMappingURL=colorBit.mjs.map\n","\"use strict\";\nconst textureBatchBitGpuCache = {};\nfunction generateBindingSrc(maxTextures) {\n  const src = [];\n  if (maxTextures === 1) {\n    src.push(\"@group(1) @binding(0) var textureSource1: texture_2d<f32>;\");\n    src.push(\"@group(1) @binding(1) var textureSampler1: sampler;\");\n  } else {\n    let bindingIndex = 0;\n    for (let i = 0; i < maxTextures; i++) {\n      src.push(`@group(1) @binding(${bindingIndex++}) var textureSource${i + 1}: texture_2d<f32>;`);\n      src.push(`@group(1) @binding(${bindingIndex++}) var textureSampler${i + 1}: sampler;`);\n    }\n  }\n  return src.join(\"\\n\");\n}\nfunction generateSampleSrc(maxTextures) {\n  const src = [];\n  if (maxTextures === 1) {\n    src.push(\"outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);\");\n  } else {\n    src.push(\"switch vTextureId {\");\n    for (let i = 0; i < maxTextures; i++) {\n      if (i === maxTextures - 1) {\n        src.push(`  default:{`);\n      } else {\n        src.push(`  case ${i}:{`);\n      }\n      src.push(`      outColor = textureSampleGrad(textureSource${i + 1}, textureSampler${i + 1}, vUV, uvDx, uvDy);`);\n      src.push(`      break;}`);\n    }\n    src.push(`}`);\n  }\n  return src.join(\"\\n\");\n}\nfunction generateTextureBatchBit(maxTextures) {\n  if (!textureBatchBitGpuCache[maxTextures]) {\n    textureBatchBitGpuCache[maxTextures] = {\n      name: \"texture-batch-bit\",\n      vertex: {\n        header: `\n                @in aTextureIdAndRound: vec2<u32>;\n                @out @interpolate(flat) vTextureId : u32;\n            `,\n        main: `\n                vTextureId = aTextureIdAndRound.y;\n            `,\n        end: `\n                if(aTextureIdAndRound.x == 1)\n                {\n                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n                }\n            `\n      },\n      fragment: {\n        header: `\n                @in @interpolate(flat) vTextureId: u32;\n    \n                ${generateBindingSrc(16)}\n            `,\n        main: `\n                var uvDx = dpdx(vUV);\n                var uvDy = dpdy(vUV);\n    \n                ${generateSampleSrc(16)}\n            `\n      }\n    };\n  }\n  return textureBatchBitGpuCache[maxTextures];\n}\nconst textureBatchBitGlCache = {};\nfunction generateSampleGlSrc(maxTextures) {\n  const src = [];\n  for (let i = 0; i < maxTextures; i++) {\n    if (i > 0) {\n      src.push(\"else\");\n    }\n    if (i < maxTextures - 1) {\n      src.push(`if(vTextureId < ${i}.5)`);\n    }\n    src.push(\"{\");\n    src.push(`\toutColor = texture(uTextures[${i}], vUV);`);\n    src.push(\"}\");\n  }\n  return src.join(\"\\n\");\n}\nfunction generateTextureBatchBitGl(maxTextures) {\n  if (!textureBatchBitGlCache[maxTextures]) {\n    textureBatchBitGlCache[maxTextures] = {\n      name: \"texture-batch-bit\",\n      vertex: {\n        header: `\n                in vec2 aTextureIdAndRound;\n                out float vTextureId;\n              \n            `,\n        main: `\n                vTextureId = aTextureIdAndRound.y;\n            `,\n        end: `\n                if(aTextureIdAndRound.x == 1.)\n                {\n                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n                }\n            `\n      },\n      fragment: {\n        header: `\n                in float vTextureId;\n    \n                uniform sampler2D uTextures[${maxTextures}];\n              \n            `,\n        main: `\n    \n                ${generateSampleGlSrc(16)}\n            `\n      }\n    };\n  }\n  return textureBatchBitGlCache[maxTextures];\n}\n\nexport { generateTextureBatchBit, generateTextureBatchBitGl };\n//# sourceMappingURL=generateTextureBatchBit.mjs.map\n","\"use strict\";\nconst roundPixelsBit = {\n  name: \"round-pixels-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> \n            {\n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        `\n    )\n  }\n};\nconst roundPixelsBitGl = {\n  name: \"round-pixels-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `   \n            vec2 roundPixels(vec2 position, vec2 targetSize)\n            {       \n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        `\n    )\n  }\n};\n\nexport { roundPixelsBit, roundPixelsBitGl };\n//# sourceMappingURL=roundPixelsBit.mjs.map\n","import { MAX_TEXTURES } from '../../../batcher/shared/const.mjs';\nimport { UniformGroup } from '../../shared/shader/UniformGroup.mjs';\n\n\"use strict\";\nconst sampleValues = new Int32Array(MAX_TEXTURES);\nfor (let i = 0; i < MAX_TEXTURES; i++) {\n  sampleValues[i] = i;\n}\nconst batchSamplersUniformGroup = new UniformGroup({\n  uTextures: { value: sampleValues, type: `i32`, size: MAX_TEXTURES }\n}, { isStatic: true });\n\nexport { batchSamplersUniformGroup };\n//# sourceMappingURL=batchSamplersUniformGroup.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { compileHighShaderGlProgram } from '../../high-shader/compileHighShaderToProgram.mjs';\nimport { colorBitGl } from '../../high-shader/shader-bits/colorBit.mjs';\nimport { generateTextureBatchBitGl } from '../../high-shader/shader-bits/generateTextureBatchBit.mjs';\nimport { roundPixelsBitGl } from '../../high-shader/shader-bits/roundPixelsBit.mjs';\nimport { batchSamplersUniformGroup } from '../../renderers/gl/shader/batchSamplersUniformGroup.mjs';\nimport { Shader } from '../../renderers/shared/shader/Shader.mjs';\nimport { State } from '../../renderers/shared/state/State.mjs';\nimport { MAX_TEXTURES } from '../shared/const.mjs';\n\n\"use strict\";\nclass GlBatchAdaptor {\n  constructor() {\n    this._didUpload = false;\n    this._tempState = State.for2d();\n  }\n  init(batcherPipe) {\n    const glProgram = compileHighShaderGlProgram({\n      name: \"batch\",\n      bits: [\n        colorBitGl,\n        generateTextureBatchBitGl(MAX_TEXTURES),\n        roundPixelsBitGl\n      ]\n    });\n    this._shader = new Shader({\n      glProgram,\n      resources: {\n        batchSamplers: batchSamplersUniformGroup\n      }\n    });\n    batcherPipe.renderer.runners.contextChange.add(this);\n  }\n  contextChange() {\n    this._didUpload = false;\n  }\n  start(batchPipe, geometry) {\n    const renderer = batchPipe.renderer;\n    renderer.shader.bind(this._shader, this._didUpload);\n    renderer.shader.updateUniformGroup(renderer.globalUniforms.uniformGroup);\n    renderer.geometry.bind(geometry, this._shader.glProgram);\n  }\n  execute(batchPipe, batch) {\n    const renderer = batchPipe.renderer;\n    this._didUpload = true;\n    this._tempState.blendMode = batch.blendMode;\n    renderer.state.set(this._tempState);\n    const textures = batch.textures.textures;\n    for (let i = 0; i < textures.length; i++) {\n      renderer.texture.bind(textures[i], i);\n    }\n    renderer.geometry.draw(\"triangle-list\", batch.size, batch.start);\n  }\n  destroy() {\n    this._shader.destroy(true);\n    this._shader = null;\n  }\n}\n/** @ignore */\nGlBatchAdaptor.extension = {\n  type: [\n    ExtensionType.WebGLPipesAdaptor\n  ],\n  name: \"batch\"\n};\n\nexport { GlBatchAdaptor };\n//# sourceMappingURL=GlBatchAdaptor.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { compileHighShaderGpuProgram } from '../../high-shader/compileHighShaderToProgram.mjs';\nimport { colorBit } from '../../high-shader/shader-bits/colorBit.mjs';\nimport { generateTextureBatchBit } from '../../high-shader/shader-bits/generateTextureBatchBit.mjs';\nimport { roundPixelsBit } from '../../high-shader/shader-bits/roundPixelsBit.mjs';\nimport { Shader } from '../../renderers/shared/shader/Shader.mjs';\nimport { State } from '../../renderers/shared/state/State.mjs';\nimport { MAX_TEXTURES } from '../shared/const.mjs';\nimport { getTextureBatchBindGroup } from './getTextureBatchBindGroup.mjs';\n\n\"use strict\";\nconst tempState = State.for2d();\nclass GpuBatchAdaptor {\n  init() {\n    const gpuProgram = compileHighShaderGpuProgram({\n      name: \"batch\",\n      bits: [\n        colorBit,\n        generateTextureBatchBit(MAX_TEXTURES),\n        roundPixelsBit\n      ]\n    });\n    this._shader = new Shader({\n      gpuProgram,\n      groups: {\n        // these will be dynamically allocated\n      }\n    });\n  }\n  start(batchPipe, geometry) {\n    const renderer = batchPipe.renderer;\n    const encoder = renderer.encoder;\n    const program = this._shader.gpuProgram;\n    this._geometry = geometry;\n    encoder.setGeometry(geometry);\n    tempState.blendMode = \"normal\";\n    renderer.pipeline.getPipeline(\n      geometry,\n      program,\n      tempState\n    );\n    const globalUniformsBindGroup = renderer.globalUniforms.bindGroup;\n    encoder.resetBindGroup(1);\n    encoder.setBindGroup(0, globalUniformsBindGroup, program);\n  }\n  execute(batchPipe, batch) {\n    const program = this._shader.gpuProgram;\n    const renderer = batchPipe.renderer;\n    const encoder = renderer.encoder;\n    if (!batch.bindGroup) {\n      const textureBatch = batch.textures;\n      batch.bindGroup = getTextureBatchBindGroup(textureBatch.textures, textureBatch.count);\n    }\n    tempState.blendMode = batch.blendMode;\n    const gpuBindGroup = renderer.bindGroup.getBindGroup(\n      batch.bindGroup,\n      program,\n      1\n    );\n    const pipeline = renderer.pipeline.getPipeline(\n      this._geometry,\n      program,\n      tempState\n    );\n    batch.bindGroup._touch(renderer.textureGC.count);\n    encoder.setPipeline(pipeline);\n    encoder.renderPassEncoder.setBindGroup(1, gpuBindGroup);\n    encoder.renderPassEncoder.drawIndexed(batch.size, 1, batch.start);\n  }\n  destroy() {\n    this._shader.destroy(true);\n    this._shader = null;\n  }\n}\n/** @ignore */\nGpuBatchAdaptor.extension = {\n  type: [\n    ExtensionType.WebGPUPipesAdaptor\n  ],\n  name: \"batch\"\n};\n\nexport { GpuBatchAdaptor };\n//# sourceMappingURL=GpuBatchAdaptor.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { State } from '../../renderers/shared/state/State.mjs';\nimport { BatchGeometry } from '../gpu/BatchGeometry.mjs';\nimport { Batcher } from './Batcher.mjs';\n\n\"use strict\";\nclass BatcherPipe {\n  constructor(renderer, adaptor) {\n    this.state = State.for2d();\n    this._batches = /* @__PURE__ */ Object.create(null);\n    this._geometries = /* @__PURE__ */ Object.create(null);\n    this.renderer = renderer;\n    this._adaptor = adaptor;\n    this._adaptor.init(this);\n  }\n  buildStart(instructionSet) {\n    if (!this._batches[instructionSet.uid]) {\n      const batcher = new Batcher();\n      this._batches[instructionSet.uid] = batcher;\n      this._geometries[batcher.uid] = new BatchGeometry();\n    }\n    this._activeBatch = this._batches[instructionSet.uid];\n    this._activeGeometry = this._geometries[this._activeBatch.uid];\n    this._activeBatch.begin();\n  }\n  addToBatch(batchableObject) {\n    this._activeBatch.add(batchableObject);\n  }\n  break(instructionSet) {\n    this._activeBatch.break(instructionSet);\n  }\n  buildEnd(instructionSet) {\n    const activeBatch = this._activeBatch;\n    const geometry = this._activeGeometry;\n    activeBatch.finish(instructionSet);\n    geometry.indexBuffer.setDataWithSize(activeBatch.indexBuffer, activeBatch.indexSize, true);\n    geometry.buffers[0].setDataWithSize(activeBatch.attributeBuffer.float32View, activeBatch.attributeSize, false);\n  }\n  upload(instructionSet) {\n    const batcher = this._batches[instructionSet.uid];\n    const geometry = this._geometries[batcher.uid];\n    if (batcher.dirty) {\n      batcher.dirty = false;\n      geometry.buffers[0].update(batcher.attributeSize * 4);\n    }\n  }\n  execute(batch) {\n    if (batch.action === \"startBatch\") {\n      const batcher = batch.batcher;\n      const geometry = this._geometries[batcher.uid];\n      this._adaptor.start(this, geometry);\n    }\n    this._adaptor.execute(this, batch);\n  }\n  destroy() {\n    this.state = null;\n    this.renderer = null;\n    this._adaptor.destroy();\n    this._adaptor = null;\n    for (const i in this._batches) {\n      this._batches[i].destroy();\n    }\n    this._batches = null;\n    for (const i in this._geometries) {\n      this._geometries[i].destroy();\n    }\n    this._geometries = null;\n  }\n}\n/** @ignore */\nBatcherPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"batch\"\n};\n\nexport { BatcherPipe };\n//# sourceMappingURL=BatcherPipe.mjs.map\n","\"use strict\";\nconst localUniformBit = {\n  name: \"local-uniform-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n\n            struct LocalUniforms {\n                uTransformMatrix:mat3x3<f32>,\n                uColor:vec4<f32>,\n                uRound:f32,\n            }\n\n            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            vColor *= localUniforms.uColor;\n            modelMatrix *= localUniforms.uTransformMatrix;\n        `\n    ),\n    end: (\n      /* wgsl */\n      `\n            if(localUniforms.uRound == 1)\n            {\n                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n            }\n        `\n    )\n  }\n};\nconst localUniformBitGroup2 = {\n  ...localUniformBit,\n  vertex: {\n    ...localUniformBit.vertex,\n    // replace the group!\n    header: localUniformBit.vertex.header.replace(\"group(1)\", \"group(2)\")\n  }\n};\nconst localUniformBitGl = {\n  name: \"local-uniform-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n\n            uniform mat3 uTransformMatrix;\n            uniform vec4 uColor;\n            uniform float uRound;\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            vColor *= uColor;\n            modelMatrix = uTransformMatrix;\n        `\n    ),\n    end: (\n      /* glsl */\n      `\n            if(uRound == 1.)\n            {\n                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n            }\n        `\n    )\n  }\n};\n\nexport { localUniformBit, localUniformBitGl, localUniformBitGroup2 };\n//# sourceMappingURL=localUniformBit.mjs.map\n","\"use strict\";\nconst textureBit = {\n  name: \"texture-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n\n        struct TextureUniforms {\n            uTextureMatrix:mat3x3<f32>,\n        }\n\n        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* wgsl */\n      `\n            @group(2) @binding(0) var uTexture: texture_2d<f32>;\n            @group(2) @binding(1) var uSampler: sampler;\n\n         \n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            outColor = textureSample(uTexture, uSampler, vUV);\n        `\n    )\n  }\n};\nconst textureBitGl = {\n  name: \"texture-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n            uniform mat3 uTextureMatrix;\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* glsl */\n      `\n        uniform sampler2D uTexture;\n\n         \n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            outColor = texture(uTexture, vUV);\n        `\n    )\n  }\n};\n\nexport { textureBit, textureBitGl };\n//# sourceMappingURL=textureBit.mjs.map\n","\"use strict\";\nfunction buildInstructions(renderGroup, renderPipes) {\n  const root = renderGroup.root;\n  const instructionSet = renderGroup.instructionSet;\n  instructionSet.reset();\n  renderPipes.batch.buildStart(instructionSet);\n  renderPipes.blendMode.buildStart();\n  renderPipes.colorMask.buildStart();\n  if (root.sortableChildren) {\n    root.sortChildren();\n  }\n  collectAllRenderablesAdvanced(root, instructionSet, renderPipes, true);\n  renderPipes.batch.buildEnd(instructionSet);\n  renderPipes.blendMode.buildEnd(instructionSet);\n}\nfunction collectAllRenderables(container, instructionSet, rendererPipes) {\n  if (container.globalDisplayStatus < 7 || !container.includeInBuild)\n    return;\n  if (container.sortableChildren) {\n    container.sortChildren();\n  }\n  if (container.isSimple) {\n    collectAllRenderablesSimple(container, instructionSet, rendererPipes);\n  } else {\n    collectAllRenderablesAdvanced(container, instructionSet, rendererPipes, false);\n  }\n}\nfunction collectAllRenderablesSimple(container, instructionSet, renderPipes) {\n  if (container.renderPipeId) {\n    renderPipes.blendMode.setBlendMode(container, container.groupBlendMode, instructionSet);\n    container.didViewUpdate = false;\n    const rp = renderPipes;\n    rp[container.renderPipeId].addRenderable(container, instructionSet);\n  }\n  if (!container.isRenderGroupRoot) {\n    const children = container.children;\n    const length = children.length;\n    for (let i = 0; i < length; i++) {\n      collectAllRenderables(children[i], instructionSet, renderPipes);\n    }\n  }\n}\nfunction collectAllRenderablesAdvanced(container, instructionSet, renderPipes, isRoot) {\n  if (!isRoot && container.isRenderGroupRoot) {\n    renderPipes.renderGroup.addRenderGroup(container.renderGroup, instructionSet);\n  } else {\n    for (let i = 0; i < container.effects.length; i++) {\n      const effect = container.effects[i];\n      const pipe = renderPipes[effect.pipe];\n      pipe.push(effect, container, instructionSet);\n    }\n    const renderPipeId = container.renderPipeId;\n    if (renderPipeId) {\n      renderPipes.blendMode.setBlendMode(container, container.groupBlendMode, instructionSet);\n      container.didViewUpdate = false;\n      const pipe = renderPipes[renderPipeId];\n      pipe.addRenderable(container, instructionSet);\n    }\n    const children = container.children;\n    if (children.length) {\n      for (let i = 0; i < children.length; i++) {\n        collectAllRenderables(children[i], instructionSet, renderPipes);\n      }\n    }\n    for (let i = container.effects.length - 1; i >= 0; i--) {\n      const effect = container.effects[i];\n      const pipe = renderPipes[effect.pipe];\n      pipe.pop(effect, container, instructionSet);\n    }\n  }\n}\n\nexport { buildInstructions, collectAllRenderables };\n//# sourceMappingURL=buildInstructions.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { FilterEffect } from '../../../filters/FilterEffect.mjs';\nimport { MaskFilter } from '../../../filters/mask/MaskFilter.mjs';\nimport { Bounds } from '../../../scene/container/bounds/Bounds.mjs';\nimport { getGlobalBounds } from '../../../scene/container/bounds/getGlobalBounds.mjs';\nimport { collectAllRenderables } from '../../../scene/container/utils/buildInstructions.mjs';\nimport { Sprite } from '../../../scene/sprite/Sprite.mjs';\nimport { BigPool } from '../../../utils/pool/PoolGroup.mjs';\nimport { Texture } from '../../renderers/shared/texture/Texture.mjs';\nimport { TexturePool } from '../../renderers/shared/texture/TexturePool.mjs';\n\n\"use strict\";\nconst tempBounds = new Bounds();\nclass AlphaMaskEffect extends FilterEffect {\n  constructor() {\n    super({\n      filters: [new MaskFilter({\n        sprite: new Sprite(Texture.EMPTY)\n      })]\n    });\n  }\n  get sprite() {\n    return this.filters[0].sprite;\n  }\n  set sprite(value) {\n    this.filters[0].sprite = value;\n  }\n}\nclass AlphaMaskPipe {\n  constructor(renderer) {\n    this._activeMaskStage = [];\n    this._renderer = renderer;\n  }\n  push(mask, maskedContainer, instructionSet) {\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: \"alphaMask\",\n      action: \"pushMaskBegin\",\n      mask,\n      canBundle: false,\n      maskedContainer\n    });\n    if (mask.renderMaskToTexture) {\n      const maskContainer = mask.mask;\n      maskContainer.includeInBuild = true;\n      collectAllRenderables(\n        maskContainer,\n        instructionSet,\n        renderer.renderPipes\n      );\n      maskContainer.includeInBuild = false;\n    }\n    renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: \"alphaMask\",\n      action: \"pushMaskEnd\",\n      mask,\n      maskedContainer,\n      canBundle: false\n    });\n  }\n  pop(mask, _maskedContainer, instructionSet) {\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: \"alphaMask\",\n      action: \"popMaskEnd\",\n      mask,\n      canBundle: false\n    });\n  }\n  execute(instruction) {\n    const renderer = this._renderer;\n    const renderMask = instruction.mask.renderMaskToTexture;\n    if (instruction.action === \"pushMaskBegin\") {\n      const filterEffect = BigPool.get(AlphaMaskEffect);\n      if (renderMask) {\n        instruction.mask.mask.measurable = true;\n        const bounds = getGlobalBounds(instruction.mask.mask, true, tempBounds);\n        instruction.mask.mask.measurable = false;\n        bounds.ceil();\n        const filterTexture = TexturePool.getOptimalTexture(\n          bounds.width,\n          bounds.height,\n          1,\n          false\n        );\n        renderer.renderTarget.push(filterTexture, true);\n        renderer.globalUniforms.push({\n          offset: bounds,\n          worldColor: 4294967295\n        });\n        const sprite = filterEffect.sprite;\n        sprite.texture = filterTexture;\n        sprite.worldTransform.tx = bounds.minX;\n        sprite.worldTransform.ty = bounds.minY;\n        this._activeMaskStage.push({\n          filterEffect,\n          maskedContainer: instruction.maskedContainer,\n          filterTexture\n        });\n      } else {\n        filterEffect.sprite = instruction.mask.mask;\n        this._activeMaskStage.push({\n          filterEffect,\n          maskedContainer: instruction.maskedContainer\n        });\n      }\n    } else if (instruction.action === \"pushMaskEnd\") {\n      const maskData = this._activeMaskStage[this._activeMaskStage.length - 1];\n      if (renderMask) {\n        renderer.renderTarget.pop();\n        renderer.globalUniforms.pop();\n      }\n      renderer.filter.push({\n        renderPipeId: \"filter\",\n        action: \"pushFilter\",\n        container: maskData.maskedContainer,\n        filterEffect: maskData.filterEffect,\n        canBundle: false\n      });\n    } else if (instruction.action === \"popMaskEnd\") {\n      renderer.filter.pop();\n      const maskData = this._activeMaskStage.pop();\n      if (renderMask) {\n        TexturePool.returnTexture(maskData.filterTexture);\n      }\n      BigPool.return(maskData.filterEffect);\n    }\n  }\n  destroy() {\n    this._renderer = null;\n    this._activeMaskStage = null;\n  }\n}\n/** @ignore */\nAlphaMaskPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"alphaMask\"\n};\n\nexport { AlphaMaskPipe };\n//# sourceMappingURL=AlphaMaskPipe.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass ColorMaskPipe {\n  constructor(renderer) {\n    this._colorStack = [];\n    this._colorStackIndex = 0;\n    this._currentColor = 0;\n    this._renderer = renderer;\n  }\n  buildStart() {\n    this._colorStack[0] = 15;\n    this._colorStackIndex = 1;\n    this._currentColor = 15;\n  }\n  push(mask, _container, instructionSet) {\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    const colorStack = this._colorStack;\n    colorStack[this._colorStackIndex] = colorStack[this._colorStackIndex - 1] & mask.mask;\n    const currentColor = this._colorStack[this._colorStackIndex];\n    if (currentColor !== this._currentColor) {\n      this._currentColor = currentColor;\n      instructionSet.add({\n        renderPipeId: \"colorMask\",\n        colorMask: currentColor,\n        canBundle: false\n      });\n    }\n    this._colorStackIndex++;\n  }\n  pop(_mask, _container, instructionSet) {\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    const colorStack = this._colorStack;\n    this._colorStackIndex--;\n    const currentColor = colorStack[this._colorStackIndex - 1];\n    if (currentColor !== this._currentColor) {\n      this._currentColor = currentColor;\n      instructionSet.add({\n        renderPipeId: \"colorMask\",\n        colorMask: currentColor,\n        canBundle: false\n      });\n    }\n  }\n  execute(instruction) {\n    const renderer = this._renderer;\n    renderer.colorMask.setMask(instruction.colorMask);\n  }\n  destroy() {\n    this._colorStack = null;\n  }\n}\n/** @ignore */\nColorMaskPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"colorMask\"\n};\n\nexport { ColorMaskPipe };\n//# sourceMappingURL=ColorMaskPipe.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { collectAllRenderables } from '../../../scene/container/utils/buildInstructions.mjs';\nimport { CLEAR } from '../../renderers/gl/const.mjs';\nimport { STENCIL_MODES } from '../../renderers/shared/state/const.mjs';\n\n\"use strict\";\nclass StencilMaskPipe {\n  constructor(renderer) {\n    // used when building and also when executing..\n    this._maskStackHash = {};\n    this._maskHash = /* @__PURE__ */ new WeakMap();\n    this._renderer = renderer;\n  }\n  push(mask, _container, instructionSet) {\n    var _a;\n    const effect = mask;\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    renderer.renderPipes.blendMode.setBlendMode(effect.mask, \"none\", instructionSet);\n    instructionSet.add({\n      renderPipeId: \"stencilMask\",\n      action: \"pushMaskBegin\",\n      mask,\n      canBundle: false\n    });\n    const maskContainer = effect.mask;\n    maskContainer.includeInBuild = true;\n    if (!this._maskHash.has(effect)) {\n      this._maskHash.set(effect, {\n        instructionsStart: 0,\n        instructionsLength: 0\n      });\n    }\n    const maskData = this._maskHash.get(effect);\n    maskData.instructionsStart = instructionSet.instructionSize;\n    collectAllRenderables(\n      maskContainer,\n      instructionSet,\n      renderer.renderPipes\n    );\n    maskContainer.includeInBuild = false;\n    renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: \"stencilMask\",\n      action: \"pushMaskEnd\",\n      mask,\n      canBundle: false\n    });\n    const instructionsLength = instructionSet.instructionSize - maskData.instructionsStart - 1;\n    maskData.instructionsLength = instructionsLength;\n    const renderTargetUid = renderer.renderTarget.renderTarget.uid;\n    (_a = this._maskStackHash)[renderTargetUid] ?? (_a[renderTargetUid] = 0);\n  }\n  pop(mask, _container, instructionSet) {\n    const effect = mask;\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    renderer.renderPipes.blendMode.setBlendMode(effect.mask, \"none\", instructionSet);\n    instructionSet.add({\n      renderPipeId: \"stencilMask\",\n      action: \"popMaskBegin\",\n      canBundle: false\n    });\n    const maskData = this._maskHash.get(mask);\n    for (let i = 0; i < maskData.instructionsLength; i++) {\n      instructionSet.instructions[instructionSet.instructionSize++] = instructionSet.instructions[maskData.instructionsStart++];\n    }\n    instructionSet.add({\n      renderPipeId: \"stencilMask\",\n      action: \"popMaskEnd\",\n      canBundle: false\n    });\n  }\n  execute(instruction) {\n    var _a;\n    const renderer = this._renderer;\n    const renderTargetUid = renderer.renderTarget.renderTarget.uid;\n    let maskStackIndex = (_a = this._maskStackHash)[renderTargetUid] ?? (_a[renderTargetUid] = 0);\n    if (instruction.action === \"pushMaskBegin\") {\n      renderer.renderTarget.ensureDepthStencil();\n      renderer.stencil.setStencilMode(STENCIL_MODES.RENDERING_MASK_ADD, maskStackIndex);\n      maskStackIndex++;\n      renderer.colorMask.setMask(0);\n    } else if (instruction.action === \"pushMaskEnd\") {\n      renderer.stencil.setStencilMode(STENCIL_MODES.MASK_ACTIVE, maskStackIndex);\n      renderer.colorMask.setMask(15);\n    } else if (instruction.action === \"popMaskBegin\") {\n      renderer.colorMask.setMask(0);\n      if (maskStackIndex !== 0) {\n        renderer.stencil.setStencilMode(STENCIL_MODES.RENDERING_MASK_REMOVE, maskStackIndex);\n      } else {\n        renderer.renderTarget.clear(null, CLEAR.STENCIL);\n        renderer.stencil.setStencilMode(STENCIL_MODES.DISABLED, maskStackIndex);\n      }\n      maskStackIndex--;\n    } else if (instruction.action === \"popMaskEnd\") {\n      renderer.stencil.setStencilMode(STENCIL_MODES.MASK_ACTIVE, maskStackIndex);\n      renderer.colorMask.setMask(15);\n    }\n    this._maskStackHash[renderTargetUid] = maskStackIndex;\n  }\n  destroy() {\n    this._renderer = null;\n    this._maskStackHash = null;\n    this._maskHash = null;\n  }\n}\nStencilMaskPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"stencilMask\"\n};\n\nexport { StencilMaskPipe };\n//# sourceMappingURL=StencilMaskPipe.mjs.map\n","\"use strict\";\nvar BUFFER_TYPE = /* @__PURE__ */ ((BUFFER_TYPE2) => {\n  BUFFER_TYPE2[BUFFER_TYPE2[\"ELEMENT_ARRAY_BUFFER\"] = 34963] = \"ELEMENT_ARRAY_BUFFER\";\n  BUFFER_TYPE2[BUFFER_TYPE2[\"ARRAY_BUFFER\"] = 34962] = \"ARRAY_BUFFER\";\n  BUFFER_TYPE2[BUFFER_TYPE2[\"UNIFORM_BUFFER\"] = 35345] = \"UNIFORM_BUFFER\";\n  return BUFFER_TYPE2;\n})(BUFFER_TYPE || {});\n\nexport { BUFFER_TYPE };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nclass GlBuffer {\n  constructor(buffer, type) {\n    this.buffer = buffer || null;\n    this.updateID = -1;\n    this.byteLength = -1;\n    this.type = type;\n  }\n}\n\nexport { GlBuffer };\n//# sourceMappingURL=GlBuffer.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { BufferUsage } from '../../shared/buffer/const.mjs';\nimport { BUFFER_TYPE } from './const.mjs';\nimport { GlBuffer } from './GlBuffer.mjs';\n\n\"use strict\";\nclass GlBufferSystem {\n  /**\n   * @param {Renderer} renderer - The renderer this System works for.\n   */\n  constructor(renderer) {\n    this._gpuBuffers = /* @__PURE__ */ Object.create(null);\n    /** Cache keeping track of the base bound buffer bases */\n    this._boundBufferBases = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n  }\n  /**\n   * @ignore\n   */\n  destroy() {\n    this._renderer = null;\n    this._gl = null;\n    this._gpuBuffers = null;\n    this._boundBufferBases = null;\n  }\n  /** Sets up the renderer context and necessary buffers. */\n  contextChange() {\n    this._gpuBuffers = /* @__PURE__ */ Object.create(null);\n    this._gl = this._renderer.gl;\n  }\n  getGlBuffer(buffer) {\n    return this._gpuBuffers[buffer.uid] || this.createGLBuffer(buffer);\n  }\n  /**\n   * This binds specified buffer. On first run, it will create the webGL buffers for the context too\n   * @param buffer - the buffer to bind to the renderer\n   */\n  bind(buffer) {\n    const { _gl: gl } = this;\n    const glBuffer = this.getGlBuffer(buffer);\n    gl.bindBuffer(glBuffer.type, glBuffer.buffer);\n  }\n  /**\n   * Binds an uniform buffer to at the given index.\n   *\n   * A cache is used so a buffer will not be bound again if already bound.\n   * @param buffer - the buffer to bind\n   * @param index - the base index to bind it to.\n   */\n  bindBufferBase(buffer, index) {\n    const { _gl: gl } = this;\n    if (this._boundBufferBases[index] !== buffer) {\n      const glBuffer = this.getGlBuffer(buffer);\n      this._boundBufferBases[index] = buffer;\n      gl.bindBufferBase(gl.UNIFORM_BUFFER, index, glBuffer.buffer);\n    }\n  }\n  /**\n   * Binds a buffer whilst also binding its range.\n   * This will make the buffer start from the offset supplied rather than 0 when it is read.\n   * @param buffer - the buffer to bind\n   * @param index - the base index to bind at, defaults to 0\n   * @param offset - the offset to bind at (this is blocks of 256). 0 = 0, 1 = 256, 2 = 512 etc\n   */\n  bindBufferRange(buffer, index, offset) {\n    const { _gl: gl } = this;\n    offset = offset || 0;\n    const glBuffer = this.getGlBuffer(buffer);\n    gl.bindBufferRange(gl.UNIFORM_BUFFER, index || 0, glBuffer.buffer, offset * 256, 256);\n  }\n  /**\n   * Will ensure the data in the buffer is uploaded to the GPU.\n   * @param {Buffer} buffer - the buffer to update\n   */\n  updateBuffer(buffer) {\n    const { _gl: gl } = this;\n    const glBuffer = this.getGlBuffer(buffer);\n    if (buffer._updateID === glBuffer.updateID) {\n      return glBuffer;\n    }\n    glBuffer.updateID = buffer._updateID;\n    gl.bindBuffer(glBuffer.type, glBuffer.buffer);\n    const data = buffer.data;\n    if (glBuffer.byteLength >= buffer.data.byteLength) {\n      gl.bufferSubData(glBuffer.type, 0, data, 0, buffer._updateSize / data.BYTES_PER_ELEMENT);\n    } else {\n      const drawType = buffer.descriptor.usage & BufferUsage.STATIC ? gl.STATIC_DRAW : gl.DYNAMIC_DRAW;\n      glBuffer.byteLength = data.byteLength;\n      gl.bufferData(glBuffer.type, data, drawType);\n    }\n    return glBuffer;\n  }\n  /** dispose all WebGL resources of all managed buffers */\n  destroyAll() {\n    const gl = this._gl;\n    for (const id in this._gpuBuffers) {\n      gl.deleteBuffer(this._gpuBuffers[id].buffer);\n    }\n    this._gpuBuffers = /* @__PURE__ */ Object.create(null);\n  }\n  /**\n   * Disposes buffer\n   * @param {Buffer} buffer - buffer with data\n   * @param {boolean} [contextLost=false] - If context was lost, we suppress deleteVertexArray\n   */\n  onBufferDestroy(buffer, contextLost) {\n    const glBuffer = this._gpuBuffers[buffer.uid];\n    const gl = this._gl;\n    if (!contextLost) {\n      gl.deleteBuffer(glBuffer.buffer);\n    }\n    this._gpuBuffers[buffer.uid] = null;\n  }\n  /**\n   * creates and attaches a GLBuffer object tied to the current context.\n   * @param buffer\n   * @protected\n   */\n  createGLBuffer(buffer) {\n    const { _gl: gl } = this;\n    let type = BUFFER_TYPE.ARRAY_BUFFER;\n    if (buffer.descriptor.usage & BufferUsage.INDEX) {\n      type = BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;\n    } else if (buffer.descriptor.usage & BufferUsage.UNIFORM) {\n      type = BUFFER_TYPE.UNIFORM_BUFFER;\n    }\n    const glBuffer = new GlBuffer(gl.createBuffer(), type);\n    this._gpuBuffers[buffer.uid] = glBuffer;\n    buffer.on(\"destroy\", this.onBufferDestroy, this);\n    return glBuffer;\n  }\n}\n/** @ignore */\nGlBufferSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"buffer\"\n};\n\nexport { GlBufferSystem };\n//# sourceMappingURL=GlBufferSystem.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nconst _GlContextSystem = class _GlContextSystem {\n  /** @param renderer - The renderer this System works for. */\n  constructor(renderer) {\n    /**\n     * Features supported by current renderer.\n     * @type {object}\n     * @readonly\n     */\n    this.supports = {\n      /** Support for 32-bit indices buffer. */\n      uint32Indices: true,\n      /** Support for UniformBufferObjects */\n      uniformBufferObject: true,\n      /** Support for VertexArrayObjects */\n      vertexArrayObject: true,\n      /** Support for SRGB texture format */\n      srgbTextures: true,\n      /** Support for wrapping modes if a texture is non-power of two */\n      nonPowOf2wrapping: true,\n      /** Support for MSAA (antialiasing of dynamic textures) */\n      msaa: true,\n      /** Support for mipmaps if a texture is non-power of two */\n      nonPowOf2mipmaps: true\n    };\n    this._renderer = renderer;\n    this.extensions = /* @__PURE__ */ Object.create(null);\n    this.handleContextLost = this.handleContextLost.bind(this);\n    this.handleContextRestored = this.handleContextRestored.bind(this);\n  }\n  /**\n   * `true` if the context is lost\n   * @readonly\n   */\n  get isLost() {\n    return !this.gl || this.gl.isContextLost();\n  }\n  /**\n   * Handles the context change event.\n   * @param {WebGLRenderingContext} gl - New WebGL context.\n   */\n  contextChange(gl) {\n    this.gl = gl;\n    this._renderer.gl = gl;\n  }\n  init(options) {\n    options = { ..._GlContextSystem.defaultOptions, ...options };\n    if (options.context) {\n      this.initFromContext(options.context);\n    } else {\n      const alpha = this._renderer.background.alpha < 1;\n      const premultipliedAlpha = options.premultipliedAlpha ?? true;\n      const antialias = options.antialias && !this._renderer.backBuffer.useBackBuffer;\n      this.createContext(options.preferWebGLVersion, {\n        alpha,\n        premultipliedAlpha,\n        antialias,\n        stencil: true,\n        preserveDrawingBuffer: options.preserveDrawingBuffer,\n        powerPreference: options.powerPreference ?? \"default\"\n      });\n    }\n  }\n  /**\n   * Initializes the context.\n   * @protected\n   * @param {WebGLRenderingContext} gl - WebGL context\n   */\n  initFromContext(gl) {\n    this.gl = gl;\n    this.webGLVersion = gl instanceof DOMAdapter.get().getWebGLRenderingContext() ? 1 : 2;\n    this.getExtensions();\n    this.validateContext(gl);\n    this._renderer.runners.contextChange.emit(gl);\n    const element = this._renderer.view.canvas;\n    element.addEventListener(\"webglcontextlost\", this.handleContextLost, false);\n    element.addEventListener(\"webglcontextrestored\", this.handleContextRestored, false);\n  }\n  /**\n   * Initialize from context options\n   * @protected\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/getContext\n   * @param preferWebGLVersion\n   * @param {object} options - context attributes\n   */\n  createContext(preferWebGLVersion, options) {\n    let gl;\n    const canvas = this._renderer.view.canvas;\n    if (preferWebGLVersion === 2) {\n      gl = canvas.getContext(\"webgl2\", options);\n    }\n    if (!gl) {\n      gl = canvas.getContext(\"webgl\", options);\n      if (!gl) {\n        throw new Error(\"This browser does not support WebGL. Try using the canvas renderer\");\n      }\n    }\n    this.gl = gl;\n    this.initFromContext(this.gl);\n  }\n  /** Auto-populate the {@link GlContextSystem.extensions extensions}. */\n  getExtensions() {\n    const { gl } = this;\n    const common = {\n      anisotropicFiltering: gl.getExtension(\"EXT_texture_filter_anisotropic\"),\n      floatTextureLinear: gl.getExtension(\"OES_texture_float_linear\"),\n      s3tc: gl.getExtension(\"WEBGL_compressed_texture_s3tc\"),\n      s3tc_sRGB: gl.getExtension(\"WEBGL_compressed_texture_s3tc_srgb\"),\n      // eslint-disable-line camelcase\n      etc: gl.getExtension(\"WEBGL_compressed_texture_etc\"),\n      etc1: gl.getExtension(\"WEBGL_compressed_texture_etc1\"),\n      pvrtc: gl.getExtension(\"WEBGL_compressed_texture_pvrtc\") || gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\"),\n      atc: gl.getExtension(\"WEBGL_compressed_texture_atc\"),\n      astc: gl.getExtension(\"WEBGL_compressed_texture_astc\"),\n      bptc: gl.getExtension(\"EXT_texture_compression_bptc\"),\n      rgtc: gl.getExtension(\"EXT_texture_compression_rgtc\"),\n      loseContext: gl.getExtension(\"WEBGL_lose_context\")\n    };\n    if (this.webGLVersion === 1) {\n      this.extensions = {\n        ...common,\n        drawBuffers: gl.getExtension(\"WEBGL_draw_buffers\"),\n        depthTexture: gl.getExtension(\"WEBGL_depth_texture\"),\n        vertexArrayObject: gl.getExtension(\"OES_vertex_array_object\") || gl.getExtension(\"MOZ_OES_vertex_array_object\") || gl.getExtension(\"WEBKIT_OES_vertex_array_object\"),\n        uint32ElementIndex: gl.getExtension(\"OES_element_index_uint\"),\n        // Floats and half-floats\n        floatTexture: gl.getExtension(\"OES_texture_float\"),\n        floatTextureLinear: gl.getExtension(\"OES_texture_float_linear\"),\n        textureHalfFloat: gl.getExtension(\"OES_texture_half_float\"),\n        textureHalfFloatLinear: gl.getExtension(\"OES_texture_half_float_linear\"),\n        vertexAttribDivisorANGLE: gl.getExtension(\"ANGLE_instanced_arrays\"),\n        srgb: gl.getExtension(\"EXT_sRGB\")\n      };\n    } else {\n      this.extensions = {\n        ...common,\n        colorBufferFloat: gl.getExtension(\"EXT_color_buffer_float\")\n      };\n      const provokeExt = gl.getExtension(\"WEBGL_provoking_vertex\");\n      if (provokeExt) {\n        provokeExt.provokingVertexWEBGL(provokeExt.FIRST_VERTEX_CONVENTION_WEBGL);\n      }\n    }\n  }\n  /**\n   * Handles a lost webgl context\n   * @param {WebGLContextEvent} event - The context lost event.\n   */\n  handleContextLost(event) {\n    event.preventDefault();\n    if (this._contextLossForced) {\n      this._contextLossForced = false;\n      setTimeout(() => {\n        if (this.gl.isContextLost()) {\n          this.extensions.loseContext?.restoreContext();\n        }\n      }, 0);\n    }\n  }\n  /** Handles a restored webgl context. */\n  handleContextRestored() {\n    this._renderer.runners.contextChange.emit(this.gl);\n  }\n  destroy() {\n    const element = this._renderer.view.canvas;\n    this._renderer = null;\n    element.removeEventListener(\"webglcontextlost\", this.handleContextLost);\n    element.removeEventListener(\"webglcontextrestored\", this.handleContextRestored);\n    this.gl.useProgram(null);\n    this.extensions.loseContext?.loseContext();\n  }\n  /**\n   * this function can be called to force a webGL context loss\n   * this will release all resources on the GPU.\n   * Useful if you need to put Pixi to sleep, and save some GPU memory\n   *\n   * As soon as render is called - all resources will be created again.\n   */\n  forceContextLoss() {\n    this.extensions.loseContext?.loseContext();\n    this._contextLossForced = true;\n  }\n  /**\n   * Validate context.\n   * @param {WebGLRenderingContext} gl - Render context.\n   */\n  validateContext(gl) {\n    const attributes = gl.getContextAttributes();\n    if (attributes && !attributes.stencil) {\n      warn(\"Provided WebGL context does not have a stencil buffer, masks may not render correctly\");\n    }\n    const supports = this.supports;\n    const isWebGl2 = this.webGLVersion === 2;\n    const extensions = this.extensions;\n    supports.uint32Indices = isWebGl2 || !!extensions.uint32ElementIndex;\n    supports.uniformBufferObject = isWebGl2;\n    supports.vertexArrayObject = isWebGl2 || !!extensions.vertexArrayObject;\n    supports.srgbTextures = isWebGl2 || !!extensions.srgb;\n    supports.nonPowOf2wrapping = isWebGl2;\n    supports.nonPowOf2mipmaps = isWebGl2;\n    supports.msaa = isWebGl2;\n    if (!supports.uint32Indices) {\n      warn(\"Provided WebGL context does not support 32 index buffer, large scenes may not render correctly\");\n    }\n  }\n};\n/** @ignore */\n_GlContextSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"context\"\n};\n/** The default options for the system. */\n_GlContextSystem.defaultOptions = {\n  /**\n   * {@link WebGLOptions.context}\n   * @default null\n   */\n  context: null,\n  /**\n   * {@link WebGLOptions.premultipliedAlpha}\n   * @default true\n   */\n  premultipliedAlpha: true,\n  /**\n   * {@link WebGLOptions.preserveDrawingBuffer}\n   * @default false\n   */\n  preserveDrawingBuffer: false,\n  /**\n   * {@link WebGLOptions.powerPreference}\n   * @default default\n   */\n  powerPreference: void 0,\n  /**\n   * {@link WebGLOptions.webGLVersion}\n   * @default 2\n   */\n  preferWebGLVersion: 2\n};\nlet GlContextSystem = _GlContextSystem;\n\nexport { GlContextSystem };\n//# sourceMappingURL=GlContextSystem.mjs.map\n","import { warn } from '../../../../../utils/logging/warn.mjs';\nimport { getAttributeInfoFromFormat } from '../../../shared/geometry/utils/getAttributeInfoFromFormat.mjs';\n\n\"use strict\";\nfunction ensureAttributes(geometry, extractedData) {\n  for (const i in geometry.attributes) {\n    const attribute = geometry.attributes[i];\n    const attributeData = extractedData[i];\n    if (attributeData) {\n      attribute.location ?? (attribute.location = attributeData.location);\n      attribute.format ?? (attribute.format = attributeData.format);\n      attribute.offset ?? (attribute.offset = attributeData.offset);\n      attribute.instance ?? (attribute.instance = attributeData.instance);\n    } else {\n      warn(`Attribute ${i} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`);\n    }\n  }\n  ensureStartAndStride(geometry);\n}\nfunction ensureStartAndStride(geometry) {\n  const { buffers, attributes } = geometry;\n  const tempStride = {};\n  const tempStart = {};\n  for (const j in buffers) {\n    const buffer = buffers[j];\n    tempStride[buffer.uid] = 0;\n    tempStart[buffer.uid] = 0;\n  }\n  for (const j in attributes) {\n    const attribute = attributes[j];\n    tempStride[attribute.buffer.uid] += getAttributeInfoFromFormat(attribute.format).stride;\n  }\n  for (const j in attributes) {\n    const attribute = attributes[j];\n    attribute.stride ?? (attribute.stride = tempStride[attribute.buffer.uid]);\n    attribute.start ?? (attribute.start = tempStart[attribute.buffer.uid]);\n    tempStart[attribute.buffer.uid] += getAttributeInfoFromFormat(attribute.format).stride;\n  }\n}\n\nexport { ensureAttributes };\n//# sourceMappingURL=ensureAttributes.mjs.map\n","\"use strict\";\nvar GL_FORMATS = /* @__PURE__ */ ((GL_FORMATS2) => {\n  GL_FORMATS2[GL_FORMATS2[\"RGBA\"] = 6408] = \"RGBA\";\n  GL_FORMATS2[GL_FORMATS2[\"RGB\"] = 6407] = \"RGB\";\n  GL_FORMATS2[GL_FORMATS2[\"RG\"] = 33319] = \"RG\";\n  GL_FORMATS2[GL_FORMATS2[\"RED\"] = 6403] = \"RED\";\n  GL_FORMATS2[GL_FORMATS2[\"RGBA_INTEGER\"] = 36249] = \"RGBA_INTEGER\";\n  GL_FORMATS2[GL_FORMATS2[\"RGB_INTEGER\"] = 36248] = \"RGB_INTEGER\";\n  GL_FORMATS2[GL_FORMATS2[\"RG_INTEGER\"] = 33320] = \"RG_INTEGER\";\n  GL_FORMATS2[GL_FORMATS2[\"RED_INTEGER\"] = 36244] = \"RED_INTEGER\";\n  GL_FORMATS2[GL_FORMATS2[\"ALPHA\"] = 6406] = \"ALPHA\";\n  GL_FORMATS2[GL_FORMATS2[\"LUMINANCE\"] = 6409] = \"LUMINANCE\";\n  GL_FORMATS2[GL_FORMATS2[\"LUMINANCE_ALPHA\"] = 6410] = \"LUMINANCE_ALPHA\";\n  GL_FORMATS2[GL_FORMATS2[\"DEPTH_COMPONENT\"] = 6402] = \"DEPTH_COMPONENT\";\n  GL_FORMATS2[GL_FORMATS2[\"DEPTH_STENCIL\"] = 34041] = \"DEPTH_STENCIL\";\n  return GL_FORMATS2;\n})(GL_FORMATS || {});\nvar GL_TARGETS = /* @__PURE__ */ ((GL_TARGETS2) => {\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_2D\"] = 3553] = \"TEXTURE_2D\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP\"] = 34067] = \"TEXTURE_CUBE_MAP\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_2D_ARRAY\"] = 35866] = \"TEXTURE_2D_ARRAY\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_POSITIVE_X\"] = 34069] = \"TEXTURE_CUBE_MAP_POSITIVE_X\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_NEGATIVE_X\"] = 34070] = \"TEXTURE_CUBE_MAP_NEGATIVE_X\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_POSITIVE_Y\"] = 34071] = \"TEXTURE_CUBE_MAP_POSITIVE_Y\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_NEGATIVE_Y\"] = 34072] = \"TEXTURE_CUBE_MAP_NEGATIVE_Y\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_POSITIVE_Z\"] = 34073] = \"TEXTURE_CUBE_MAP_POSITIVE_Z\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_NEGATIVE_Z\"] = 34074] = \"TEXTURE_CUBE_MAP_NEGATIVE_Z\";\n  return GL_TARGETS2;\n})(GL_TARGETS || {});\nvar GL_WRAP_MODES = /* @__PURE__ */ ((GL_WRAP_MODES2) => {\n  GL_WRAP_MODES2[GL_WRAP_MODES2[\"CLAMP\"] = 33071] = \"CLAMP\";\n  GL_WRAP_MODES2[GL_WRAP_MODES2[\"REPEAT\"] = 10497] = \"REPEAT\";\n  GL_WRAP_MODES2[GL_WRAP_MODES2[\"MIRRORED_REPEAT\"] = 33648] = \"MIRRORED_REPEAT\";\n  return GL_WRAP_MODES2;\n})(GL_WRAP_MODES || {});\nvar GL_TYPES = /* @__PURE__ */ ((GL_TYPES2) => {\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_BYTE\"] = 5121] = \"UNSIGNED_BYTE\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_SHORT\"] = 5123] = \"UNSIGNED_SHORT\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_SHORT_5_6_5\"] = 33635] = \"UNSIGNED_SHORT_5_6_5\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_SHORT_4_4_4_4\"] = 32819] = \"UNSIGNED_SHORT_4_4_4_4\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_SHORT_5_5_5_1\"] = 32820] = \"UNSIGNED_SHORT_5_5_5_1\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_INT\"] = 5125] = \"UNSIGNED_INT\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_INT_10F_11F_11F_REV\"] = 35899] = \"UNSIGNED_INT_10F_11F_11F_REV\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_INT_2_10_10_10_REV\"] = 33640] = \"UNSIGNED_INT_2_10_10_10_REV\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_INT_24_8\"] = 34042] = \"UNSIGNED_INT_24_8\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_INT_5_9_9_9_REV\"] = 35902] = \"UNSIGNED_INT_5_9_9_9_REV\";\n  GL_TYPES2[GL_TYPES2[\"BYTE\"] = 5120] = \"BYTE\";\n  GL_TYPES2[GL_TYPES2[\"SHORT\"] = 5122] = \"SHORT\";\n  GL_TYPES2[GL_TYPES2[\"INT\"] = 5124] = \"INT\";\n  GL_TYPES2[GL_TYPES2[\"FLOAT\"] = 5126] = \"FLOAT\";\n  GL_TYPES2[GL_TYPES2[\"FLOAT_32_UNSIGNED_INT_24_8_REV\"] = 36269] = \"FLOAT_32_UNSIGNED_INT_24_8_REV\";\n  GL_TYPES2[GL_TYPES2[\"HALF_FLOAT\"] = 36193] = \"HALF_FLOAT\";\n  return GL_TYPES2;\n})(GL_TYPES || {});\n\nexport { GL_FORMATS, GL_TARGETS, GL_TYPES, GL_WRAP_MODES };\n//# sourceMappingURL=const.mjs.map\n","import { GL_TYPES } from '../../texture/const.mjs';\n\n\"use strict\";\nconst infoMap = {\n  uint8x2: GL_TYPES.UNSIGNED_BYTE,\n  uint8x4: GL_TYPES.UNSIGNED_BYTE,\n  sint8x2: GL_TYPES.BYTE,\n  sint8x4: GL_TYPES.BYTE,\n  unorm8x2: GL_TYPES.UNSIGNED_BYTE,\n  unorm8x4: GL_TYPES.UNSIGNED_BYTE,\n  snorm8x2: GL_TYPES.BYTE,\n  snorm8x4: GL_TYPES.BYTE,\n  uint16x2: GL_TYPES.UNSIGNED_SHORT,\n  uint16x4: GL_TYPES.UNSIGNED_SHORT,\n  sint16x2: GL_TYPES.SHORT,\n  sint16x4: GL_TYPES.SHORT,\n  unorm16x2: GL_TYPES.UNSIGNED_SHORT,\n  unorm16x4: GL_TYPES.UNSIGNED_SHORT,\n  snorm16x2: GL_TYPES.SHORT,\n  snorm16x4: GL_TYPES.SHORT,\n  float16x2: GL_TYPES.HALF_FLOAT,\n  float16x4: GL_TYPES.HALF_FLOAT,\n  float32: GL_TYPES.FLOAT,\n  float32x2: GL_TYPES.FLOAT,\n  float32x3: GL_TYPES.FLOAT,\n  float32x4: GL_TYPES.FLOAT,\n  uint32: GL_TYPES.UNSIGNED_INT,\n  uint32x2: GL_TYPES.UNSIGNED_INT,\n  uint32x3: GL_TYPES.UNSIGNED_INT,\n  uint32x4: GL_TYPES.UNSIGNED_INT,\n  sint32: GL_TYPES.INT,\n  sint32x2: GL_TYPES.INT,\n  sint32x3: GL_TYPES.INT,\n  sint32x4: GL_TYPES.INT\n};\nfunction getGlTypeFromFormat(format) {\n  return infoMap[format] ?? infoMap.float32;\n}\n\nexport { getGlTypeFromFormat };\n//# sourceMappingURL=getGlTypeFromFormat.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { getAttributeInfoFromFormat } from '../../shared/geometry/utils/getAttributeInfoFromFormat.mjs';\nimport { ensureAttributes } from '../shader/program/ensureAttributes.mjs';\nimport { getGlTypeFromFormat } from './utils/getGlTypeFromFormat.mjs';\n\n\"use strict\";\nconst topologyToGlMap = {\n  \"point-list\": 0,\n  \"line-list\": 1,\n  \"line-strip\": 3,\n  \"triangle-list\": 4,\n  \"triangle-strip\": 5\n};\nclass GlGeometrySystem {\n  /** @param renderer - The renderer this System works for. */\n  constructor(renderer) {\n    this._geometryVaoHash = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n    this._activeGeometry = null;\n    this._activeVao = null;\n    this.hasVao = true;\n    this.hasInstance = true;\n  }\n  /** Sets up the renderer context and necessary buffers. */\n  contextChange() {\n    const gl = this.gl = this._renderer.gl;\n    if (!this._renderer.context.supports.vertexArrayObject) {\n      throw new Error(\"[PixiJS] Vertex Array Objects are not supported on this device\");\n    }\n    const nativeVaoExtension = this._renderer.context.extensions.vertexArrayObject;\n    if (nativeVaoExtension) {\n      gl.createVertexArray = () => nativeVaoExtension.createVertexArrayOES();\n      gl.bindVertexArray = (vao) => nativeVaoExtension.bindVertexArrayOES(vao);\n      gl.deleteVertexArray = (vao) => nativeVaoExtension.deleteVertexArrayOES(vao);\n    }\n    const nativeInstancedExtension = this._renderer.context.extensions.vertexAttribDivisorANGLE;\n    if (nativeInstancedExtension) {\n      gl.drawArraysInstanced = (a, b, c, d) => {\n        nativeInstancedExtension.drawArraysInstancedANGLE(a, b, c, d);\n      };\n      gl.drawElementsInstanced = (a, b, c, d, e) => {\n        nativeInstancedExtension.drawElementsInstancedANGLE(a, b, c, d, e);\n      };\n      gl.vertexAttribDivisor = (a, b) => nativeInstancedExtension.vertexAttribDivisorANGLE(a, b);\n    }\n    this._activeGeometry = null;\n    this._activeVao = null;\n    this._geometryVaoHash = /* @__PURE__ */ Object.create(null);\n  }\n  /**\n   * Binds geometry so that is can be drawn. Creating a Vao if required\n   * @param geometry - Instance of geometry to bind.\n   * @param program - Instance of program to use vao for.\n   */\n  bind(geometry, program) {\n    const gl = this.gl;\n    this._activeGeometry = geometry;\n    const vao = this.getVao(geometry, program);\n    if (this._activeVao !== vao) {\n      this._activeVao = vao;\n      gl.bindVertexArray(vao);\n    }\n    this.updateBuffers();\n  }\n  /** Reset and unbind any active VAO and geometry. */\n  reset() {\n    this.unbind();\n  }\n  /** Update buffers of the currently bound geometry. */\n  updateBuffers() {\n    const geometry = this._activeGeometry;\n    const bufferSystem = this._renderer.buffer;\n    for (let i = 0; i < geometry.buffers.length; i++) {\n      const buffer = geometry.buffers[i];\n      bufferSystem.updateBuffer(buffer);\n    }\n  }\n  /**\n   * Check compatibility between a geometry and a program\n   * @param geometry - Geometry instance.\n   * @param program - Program instance.\n   */\n  checkCompatibility(geometry, program) {\n    const geometryAttributes = geometry.attributes;\n    const shaderAttributes = program._attributeData;\n    for (const j in shaderAttributes) {\n      if (!geometryAttributes[j]) {\n        throw new Error(`shader and geometry incompatible, geometry missing the \"${j}\" attribute`);\n      }\n    }\n  }\n  /**\n   * Takes a geometry and program and generates a unique signature for them.\n   * @param geometry - To get signature from.\n   * @param program - To test geometry against.\n   * @returns - Unique signature of the geometry and program\n   */\n  getSignature(geometry, program) {\n    const attribs = geometry.attributes;\n    const shaderAttributes = program._attributeData;\n    const strings = [\"g\", geometry.uid];\n    for (const i in attribs) {\n      if (shaderAttributes[i]) {\n        strings.push(i, shaderAttributes[i].location);\n      }\n    }\n    return strings.join(\"-\");\n  }\n  getVao(geometry, program) {\n    return this._geometryVaoHash[geometry.uid]?.[program._key] || this.initGeometryVao(geometry, program);\n  }\n  /**\n   * Creates or gets Vao with the same structure as the geometry and stores it on the geometry.\n   * If vao is created, it is bound automatically. We use a shader to infer what and how to set up the\n   * attribute locations.\n   * @param geometry - Instance of geometry to to generate Vao for.\n   * @param program\n   * @param _incRefCount - Increment refCount of all geometry buffers.\n   */\n  initGeometryVao(geometry, program, _incRefCount = true) {\n    const gl = this._renderer.gl;\n    const bufferSystem = this._renderer.buffer;\n    this._renderer.shader._getProgramData(program);\n    this.checkCompatibility(geometry, program);\n    const signature = this.getSignature(geometry, program);\n    if (!this._geometryVaoHash[geometry.uid]) {\n      this._geometryVaoHash[geometry.uid] = /* @__PURE__ */ Object.create(null);\n      geometry.on(\"destroy\", this.onGeometryDestroy, this);\n    }\n    const vaoObjectHash = this._geometryVaoHash[geometry.uid];\n    let vao = vaoObjectHash[signature];\n    if (vao) {\n      vaoObjectHash[program._key] = vao;\n      return vao;\n    }\n    ensureAttributes(geometry, program._attributeData);\n    const buffers = geometry.buffers;\n    vao = gl.createVertexArray();\n    gl.bindVertexArray(vao);\n    for (let i = 0; i < buffers.length; i++) {\n      const buffer = buffers[i];\n      bufferSystem.bind(buffer);\n    }\n    this.activateVao(geometry, program);\n    vaoObjectHash[program._key] = vao;\n    vaoObjectHash[signature] = vao;\n    gl.bindVertexArray(null);\n    return vao;\n  }\n  /**\n   * Disposes geometry.\n   * @param geometry - Geometry with buffers. Only VAO will be disposed\n   * @param [contextLost=false] - If context was lost, we suppress deleteVertexArray\n   */\n  onGeometryDestroy(geometry, contextLost) {\n    const vaoObjectHash = this._geometryVaoHash[geometry.uid];\n    const gl = this.gl;\n    if (vaoObjectHash) {\n      if (contextLost) {\n        for (const i in vaoObjectHash) {\n          if (this._activeVao !== vaoObjectHash[i]) {\n            this.unbind();\n          }\n          gl.deleteVertexArray(vaoObjectHash[i]);\n        }\n      }\n      this._geometryVaoHash[geometry.uid] = null;\n    }\n  }\n  /**\n   * Dispose all WebGL resources of all managed geometries.\n   * @param [contextLost=false] - If context was lost, we suppress `gl.delete` calls\n   */\n  destroyAll(contextLost = false) {\n    const gl = this.gl;\n    for (const i in this._geometryVaoHash) {\n      if (contextLost) {\n        for (const j in this._geometryVaoHash[i]) {\n          const vaoObjectHash = this._geometryVaoHash[i];\n          if (this._activeVao !== vaoObjectHash) {\n            this.unbind();\n          }\n          gl.deleteVertexArray(vaoObjectHash[j]);\n        }\n      }\n      this._geometryVaoHash[i] = null;\n    }\n  }\n  /**\n   * Activate vertex array object.\n   * @param geometry - Geometry instance.\n   * @param program - Shader program instance.\n   */\n  activateVao(geometry, program) {\n    const gl = this._renderer.gl;\n    const bufferSystem = this._renderer.buffer;\n    const attributes = geometry.attributes;\n    if (geometry.indexBuffer) {\n      bufferSystem.bind(geometry.indexBuffer);\n    }\n    let lastBuffer = null;\n    for (const j in attributes) {\n      const attribute = attributes[j];\n      const buffer = attribute.buffer;\n      const glBuffer = bufferSystem.getGlBuffer(buffer);\n      const programAttrib = program._attributeData[j];\n      if (programAttrib) {\n        if (lastBuffer !== glBuffer) {\n          bufferSystem.bind(buffer);\n          lastBuffer = glBuffer;\n        }\n        const location = attribute.location;\n        gl.enableVertexAttribArray(location);\n        const attributeInfo = getAttributeInfoFromFormat(attribute.format);\n        const type = getGlTypeFromFormat(attribute.format);\n        if (programAttrib.format?.substring(1, 4) === \"int\") {\n          gl.vertexAttribIPointer(\n            location,\n            attributeInfo.size,\n            type,\n            attribute.stride,\n            attribute.offset\n          );\n        } else {\n          gl.vertexAttribPointer(\n            location,\n            attributeInfo.size,\n            type,\n            attributeInfo.normalised,\n            attribute.stride,\n            attribute.offset\n          );\n        }\n        if (attribute.instance) {\n          if (this.hasInstance) {\n            gl.vertexAttribDivisor(location, 1);\n          } else {\n            throw new Error(\"geometry error, GPU Instancing is not supported on this device\");\n          }\n        }\n      }\n    }\n  }\n  /**\n   * Draws the currently bound geometry.\n   * @param topology - The type primitive to render.\n   * @param size - The number of elements to be rendered. If not specified, all vertices after the\n   *  starting vertex will be drawn.\n   * @param start - The starting vertex in the geometry to start drawing from. If not specified,\n   *  drawing will start from the first vertex.\n   * @param instanceCount - The number of instances of the set of elements to execute. If not specified,\n   *  all instances will be drawn.\n   */\n  draw(topology, size, start, instanceCount) {\n    const { gl } = this._renderer;\n    const geometry = this._activeGeometry;\n    const glTopology = topologyToGlMap[geometry.topology || topology];\n    instanceCount || (instanceCount = geometry.instanceCount);\n    if (geometry.indexBuffer) {\n      const byteSize = geometry.indexBuffer.data.BYTES_PER_ELEMENT;\n      const glType = byteSize === 2 ? gl.UNSIGNED_SHORT : gl.UNSIGNED_INT;\n      if (instanceCount > 1) {\n        gl.drawElementsInstanced(glTopology, size || geometry.indexBuffer.data.length, glType, (start || 0) * byteSize, instanceCount);\n      } else {\n        gl.drawElements(glTopology, size || geometry.indexBuffer.data.length, glType, (start || 0) * byteSize);\n      }\n    } else if (instanceCount > 1) {\n      gl.drawArraysInstanced(glTopology, start || 0, size || geometry.getSize(), instanceCount);\n    } else {\n      gl.drawArrays(glTopology, start || 0, size || geometry.getSize());\n    }\n    return this;\n  }\n  /** Unbind/reset everything. */\n  unbind() {\n    this.gl.bindVertexArray(null);\n    this._activeVao = null;\n    this._activeGeometry = null;\n  }\n  destroy() {\n    this._renderer = null;\n    this.gl = null;\n    this._activeVao = null;\n    this._activeGeometry = null;\n  }\n}\n/** @ignore */\nGlGeometrySystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"geometry\"\n};\n\nexport { GlGeometrySystem };\n//# sourceMappingURL=GlGeometrySystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\nimport { Geometry } from '../shared/geometry/Geometry.mjs';\nimport { Shader } from '../shared/shader/Shader.mjs';\nimport { State } from '../shared/state/State.mjs';\nimport { TextureSource } from '../shared/texture/sources/TextureSource.mjs';\nimport { Texture } from '../shared/texture/Texture.mjs';\nimport { GlProgram } from './shader/GlProgram.mjs';\n\n\"use strict\";\nconst bigTriangleGeometry = new Geometry({\n  attributes: {\n    aPosition: [\n      -1,\n      -1,\n      // Bottom left corner\n      3,\n      -1,\n      // Bottom right corner, extending beyond right edge\n      -1,\n      3\n      // Top left corner, extending beyond top edge\n    ]\n  }\n});\nconst _GlBackBufferSystem = class _GlBackBufferSystem {\n  constructor(renderer) {\n    /** if true, the back buffer is used */\n    this.useBackBuffer = false;\n    this._useBackBufferThisRender = false;\n    this._renderer = renderer;\n  }\n  init(options = {}) {\n    const { useBackBuffer, antialias } = { ..._GlBackBufferSystem.defaultOptions, ...options };\n    this.useBackBuffer = useBackBuffer;\n    this._antialias = antialias;\n    if (!this._renderer.context.supports.msaa) {\n      warn(\"antialiasing, is not supported on when using the back buffer\");\n      this._antialias = false;\n    }\n    this._state = State.for2d();\n    const bigTriangleProgram = new GlProgram({\n      vertex: `\n                attribute vec2 aPosition;\n                out vec2 vUv;\n\n                void main() {\n                    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n                    vUv = (aPosition + 1.0) / 2.0;\n\n                    // flip dem UVs\n                    vUv.y = 1.0 - vUv.y;\n                }`,\n      fragment: `\n                in vec2 vUv;\n                out vec4 finalColor;\n\n                uniform sampler2D uTexture;\n\n                void main() {\n                    finalColor = texture(uTexture, vUv);\n                }`,\n      name: \"big-triangle\"\n    });\n    this._bigTriangleShader = new Shader({\n      glProgram: bigTriangleProgram,\n      resources: {\n        uTexture: Texture.WHITE.source\n      }\n    });\n  }\n  /**\n   * This is called before the RenderTargetSystem is started. This is where\n   * we replace the target with the back buffer if required.\n   * @param options - The options for this render.\n   */\n  renderStart(options) {\n    const renderTarget = this._renderer.renderTarget.getRenderTarget(options.target);\n    this._useBackBufferThisRender = this.useBackBuffer && !!renderTarget.isRoot;\n    if (this._useBackBufferThisRender) {\n      const renderTarget2 = this._renderer.renderTarget.getRenderTarget(options.target);\n      this._targetTexture = renderTarget2.colorTexture;\n      options.target = this._getBackBufferTexture(renderTarget2.colorTexture);\n    }\n  }\n  renderEnd() {\n    this._presentBackBuffer();\n  }\n  _presentBackBuffer() {\n    const renderer = this._renderer;\n    renderer.renderTarget.finishRenderPass();\n    if (!this._useBackBufferThisRender)\n      return;\n    renderer.renderTarget.bind(this._targetTexture, false);\n    this._bigTriangleShader.resources.uTexture = this._backBufferTexture.source;\n    renderer.encoder.draw({\n      geometry: bigTriangleGeometry,\n      shader: this._bigTriangleShader,\n      state: this._state\n    });\n  }\n  _getBackBufferTexture(targetSourceTexture) {\n    this._backBufferTexture = this._backBufferTexture || new Texture({\n      source: new TextureSource({\n        width: targetSourceTexture.width,\n        height: targetSourceTexture.height,\n        resolution: targetSourceTexture._resolution,\n        antialias: this._antialias\n      })\n    });\n    this._backBufferTexture.source.resize(\n      targetSourceTexture.width,\n      targetSourceTexture.height,\n      targetSourceTexture._resolution\n    );\n    return this._backBufferTexture;\n  }\n  /** destroys the back buffer */\n  destroy() {\n    if (this._backBufferTexture) {\n      this._backBufferTexture.destroy();\n      this._backBufferTexture = null;\n    }\n  }\n};\n/** @ignore */\n_GlBackBufferSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"backBuffer\",\n  priority: 1\n};\n/** default options for the back buffer system */\n_GlBackBufferSystem.defaultOptions = {\n  /** if true will use the back buffer where required */\n  useBackBuffer: false\n};\nlet GlBackBufferSystem = _GlBackBufferSystem;\n\nexport { GlBackBufferSystem };\n//# sourceMappingURL=GlBackBufferSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass GlColorMaskSystem {\n  constructor(renderer) {\n    this._colorMaskCache = 15;\n    this._renderer = renderer;\n  }\n  setMask(colorMask) {\n    if (this._colorMaskCache === colorMask)\n      return;\n    this._colorMaskCache = colorMask;\n    this._renderer.gl.colorMask(\n      !!(colorMask & 8),\n      !!(colorMask & 4),\n      !!(colorMask & 2),\n      !!(colorMask & 1)\n    );\n  }\n}\n/** @ignore */\nGlColorMaskSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"colorMask\"\n};\n\nexport { GlColorMaskSystem };\n//# sourceMappingURL=GlColorMaskSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass GlEncoderSystem {\n  constructor(renderer) {\n    this.commandFinished = Promise.resolve();\n    this._renderer = renderer;\n  }\n  setGeometry(geometry, shader) {\n    this._renderer.geometry.bind(geometry, shader.glProgram);\n  }\n  finishRenderPass() {\n  }\n  draw(options) {\n    const renderer = this._renderer;\n    const { geometry, shader, state, skipSync, topology: type, size, start, instanceCount } = options;\n    renderer.shader.bind(shader, skipSync);\n    renderer.geometry.bind(geometry, renderer.shader._activeProgram);\n    if (state) {\n      renderer.state.set(state);\n    }\n    renderer.geometry.draw(type, size, start, instanceCount ?? geometry.instanceCount);\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nGlEncoderSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"encoder\"\n};\n\nexport { GlEncoderSystem };\n//# sourceMappingURL=GlEncoderSystem.mjs.map\n","\"use strict\";\nclass GlRenderTarget {\n  constructor() {\n    this.width = -1;\n    this.height = -1;\n    this.msaa = false;\n    this.msaaRenderBuffer = [];\n  }\n}\n\nexport { GlRenderTarget };\n//# sourceMappingURL=GlRenderTarget.mjs.map\n","import { STENCIL_MODES } from '../../shared/state/const.mjs';\n\n\"use strict\";\nconst GpuStencilModesToPixi = [];\nGpuStencilModesToPixi[STENCIL_MODES.NONE] = void 0;\nGpuStencilModesToPixi[STENCIL_MODES.DISABLED] = {\n  stencilWriteMask: 0,\n  stencilReadMask: 0\n};\nGpuStencilModesToPixi[STENCIL_MODES.RENDERING_MASK_ADD] = {\n  stencilFront: {\n    compare: \"equal\",\n    passOp: \"increment-clamp\"\n  },\n  stencilBack: {\n    compare: \"equal\",\n    passOp: \"increment-clamp\"\n  }\n};\nGpuStencilModesToPixi[STENCIL_MODES.RENDERING_MASK_REMOVE] = {\n  stencilFront: {\n    compare: \"equal\",\n    passOp: \"decrement-clamp\"\n  },\n  stencilBack: {\n    compare: \"equal\",\n    passOp: \"decrement-clamp\"\n  }\n};\nGpuStencilModesToPixi[STENCIL_MODES.MASK_ACTIVE] = {\n  stencilWriteMask: 0,\n  stencilFront: {\n    compare: \"equal\",\n    passOp: \"keep\"\n  },\n  stencilBack: {\n    compare: \"equal\",\n    passOp: \"keep\"\n  }\n};\n\nexport { GpuStencilModesToPixi };\n//# sourceMappingURL=GpuStencilModesToPixi.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { GpuStencilModesToPixi } from '../gpu/state/GpuStencilModesToPixi.mjs';\nimport { STENCIL_MODES } from '../shared/state/const.mjs';\n\n\"use strict\";\nclass GlStencilSystem {\n  constructor(renderer) {\n    this._stencilCache = {\n      enabled: false,\n      stencilReference: 0,\n      stencilMode: STENCIL_MODES.NONE\n    };\n    this._renderTargetStencilState = /* @__PURE__ */ Object.create(null);\n    renderer.renderTarget.onRenderTargetChange.add(this);\n  }\n  contextChange(gl) {\n    this._gl = gl;\n    this._comparisonFuncMapping = {\n      always: gl.ALWAYS,\n      never: gl.NEVER,\n      equal: gl.EQUAL,\n      \"not-equal\": gl.NOTEQUAL,\n      less: gl.LESS,\n      \"less-equal\": gl.LEQUAL,\n      greater: gl.GREATER,\n      \"greater-equal\": gl.GEQUAL\n    };\n    this._stencilOpsMapping = {\n      keep: gl.KEEP,\n      zero: gl.ZERO,\n      replace: gl.REPLACE,\n      invert: gl.INVERT,\n      \"increment-clamp\": gl.INCR,\n      \"decrement-clamp\": gl.DECR,\n      \"increment-wrap\": gl.INCR_WRAP,\n      \"decrement-wrap\": gl.DECR_WRAP\n    };\n    this._stencilCache.enabled = false;\n    this._stencilCache.stencilMode = STENCIL_MODES.NONE;\n    this._stencilCache.stencilReference = 0;\n  }\n  onRenderTargetChange(renderTarget) {\n    if (this._activeRenderTarget === renderTarget)\n      return;\n    this._activeRenderTarget = renderTarget;\n    let stencilState = this._renderTargetStencilState[renderTarget.uid];\n    if (!stencilState) {\n      stencilState = this._renderTargetStencilState[renderTarget.uid] = {\n        stencilMode: STENCIL_MODES.DISABLED,\n        stencilReference: 0\n      };\n    }\n    this.setStencilMode(stencilState.stencilMode, stencilState.stencilReference);\n  }\n  setStencilMode(stencilMode, stencilReference) {\n    const stencilState = this._renderTargetStencilState[this._activeRenderTarget.uid];\n    const gl = this._gl;\n    const mode = GpuStencilModesToPixi[stencilMode];\n    const _stencilCache = this._stencilCache;\n    stencilState.stencilMode = stencilMode;\n    stencilState.stencilReference = stencilReference;\n    if (stencilMode === STENCIL_MODES.DISABLED) {\n      if (this._stencilCache.enabled) {\n        this._stencilCache.enabled = false;\n        gl.disable(gl.STENCIL_TEST);\n      }\n      return;\n    }\n    if (!this._stencilCache.enabled) {\n      this._stencilCache.enabled = true;\n      gl.enable(gl.STENCIL_TEST);\n    }\n    if (stencilMode !== _stencilCache.stencilMode || _stencilCache.stencilReference !== stencilReference) {\n      _stencilCache.stencilMode = stencilMode;\n      _stencilCache.stencilReference = stencilReference;\n      gl.stencilFunc(this._comparisonFuncMapping[mode.stencilBack.compare], stencilReference, 255);\n      gl.stencilOp(gl.KEEP, gl.KEEP, this._stencilOpsMapping[mode.stencilBack.passOp]);\n    }\n  }\n}\n/** @ignore */\nGlStencilSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"stencil\"\n};\n\nexport { GlStencilSystem };\n//# sourceMappingURL=GlStencilSystem.mjs.map\n","import { unsafeEvalSupported } from '../../../../utils/browser/unsafeEvalSupported.mjs';\nimport { Buffer } from '../buffer/Buffer.mjs';\nimport { BufferUsage } from '../buffer/const.mjs';\n\n\"use strict\";\nclass UboSystem {\n  constructor(adaptor) {\n    /** Cache of uniform buffer layouts and sync functions, so we don't have to re-create them */\n    this._syncFunctionHash = /* @__PURE__ */ Object.create(null);\n    this._adaptor = adaptor;\n    this._systemCheck();\n  }\n  /**\n   * Overrideable function by `pixi.js/unsafe-eval` to silence\n   * throwing an error if platform doesn't support unsafe-evals.\n   * @private\n   */\n  _systemCheck() {\n    if (!unsafeEvalSupported()) {\n      throw new Error(\"Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.\");\n    }\n  }\n  ensureUniformGroup(uniformGroup) {\n    const uniformData = this.getUniformGroupData(uniformGroup);\n    uniformGroup.buffer || (uniformGroup.buffer = new Buffer({\n      data: new Float32Array(uniformData.layout.size / 4),\n      usage: BufferUsage.UNIFORM | BufferUsage.COPY_DST\n    }));\n  }\n  getUniformGroupData(uniformGroup) {\n    return this._syncFunctionHash[uniformGroup._signature] || this._initUniformGroup(uniformGroup);\n  }\n  _initUniformGroup(uniformGroup) {\n    const uniformGroupSignature = uniformGroup._signature;\n    let uniformData = this._syncFunctionHash[uniformGroupSignature];\n    if (!uniformData) {\n      const elements = Object.keys(uniformGroup.uniformStructures).map((i) => uniformGroup.uniformStructures[i]);\n      const layout = this._adaptor.createUboElements(elements);\n      const syncFunction = this._generateUboSync(layout.uboElements);\n      uniformData = this._syncFunctionHash[uniformGroupSignature] = {\n        layout,\n        syncFunction\n      };\n    }\n    return this._syncFunctionHash[uniformGroupSignature];\n  }\n  _generateUboSync(uboElements) {\n    return this._adaptor.generateUboSync(uboElements);\n  }\n  syncUniformGroup(uniformGroup, data, offset) {\n    const uniformGroupData = this.getUniformGroupData(uniformGroup);\n    uniformGroup.buffer || (uniformGroup.buffer = new Buffer({\n      data: new Float32Array(uniformGroupData.layout.size / 4),\n      usage: BufferUsage.UNIFORM | BufferUsage.COPY_DST\n    }));\n    data || (data = uniformGroup.buffer.data);\n    offset || (offset = 0);\n    uniformGroupData.syncFunction(uniformGroup.uniforms, data, offset);\n    return true;\n  }\n  updateUniformGroup(uniformGroup) {\n    if (uniformGroup.isStatic && !uniformGroup._dirtyId)\n      return false;\n    uniformGroup._dirtyId = 0;\n    const synced = this.syncUniformGroup(uniformGroup);\n    uniformGroup.buffer.update();\n    return synced;\n  }\n  destroy() {\n    this._syncFunctionHash = null;\n  }\n}\n\nexport { UboSystem };\n//# sourceMappingURL=UboSystem.mjs.map\n","\"use strict\";\nconst WGSL_TO_STD40_SIZE = {\n  f32: 4,\n  \"vec2<f32>\": 8,\n  \"vec3<f32>\": 12,\n  \"vec4<f32>\": 16,\n  \"mat2x2<f32>\": 16 * 2,\n  \"mat3x3<f32>\": 16 * 3,\n  \"mat4x4<f32>\": 16 * 4\n  // TODO - not essential for now but support these in the future\n  // int:      4,\n  // ivec2:    8,\n  // ivec3:    12,\n  // ivec4:    16,\n  // uint:     4,\n  // uvec2:    8,\n  // uvec3:    12,\n  // uvec4:    16,\n  // bool:     4,\n  // bvec2:    8,\n  // bvec3:    12,\n  // bvec4:    16,\n  // mat2:     16 * 2,\n  // mat3:     16 * 3,\n  // mat4:     16 * 4,\n};\nfunction createUboElementsSTD40(uniformData) {\n  const uboElements = uniformData.map((data) => ({\n    data,\n    offset: 0,\n    size: 0\n  }));\n  let size = 0;\n  let chunkSize = 0;\n  let offset = 0;\n  for (let i = 0; i < uboElements.length; i++) {\n    const uboElement = uboElements[i];\n    size = WGSL_TO_STD40_SIZE[uboElement.data.type];\n    if (!size) {\n      throw new Error(`Unknown type ${uboElement.data.type}`);\n    }\n    if (uboElement.data.size > 1) {\n      size = Math.max(size, 16) * uboElement.data.size;\n    }\n    uboElement.size = size;\n    if (chunkSize % size !== 0 && chunkSize < 16) {\n      const lineUpValue = chunkSize % size % 16;\n      chunkSize += lineUpValue;\n      offset += lineUpValue;\n    }\n    if (chunkSize + size > 16) {\n      offset = Math.ceil(offset / 16) * 16;\n      uboElement.offset = offset;\n      offset += size;\n      chunkSize = size;\n    } else {\n      uboElement.offset = offset;\n      chunkSize += size;\n      offset += size;\n    }\n  }\n  offset = Math.ceil(offset / 16) * 16;\n  return { uboElements, size: offset };\n}\n\nexport { WGSL_TO_STD40_SIZE, createUboElementsSTD40 };\n//# sourceMappingURL=createUboElementsSTD40.mjs.map\n","\"use strict\";\nconst uniformParsers = [\n  // uploading pixi matrix object to mat3\n  {\n    type: \"mat3x3<f32>\",\n    test: (data) => {\n      const value = data.value;\n      return value.a !== void 0;\n    },\n    ubo: `\n            var matrix = uv[name].toArray(true);\n            data[offset] = matrix[0];\n            data[offset + 1] = matrix[1];\n            data[offset + 2] = matrix[2];\n            data[offset + 4] = matrix[3];\n            data[offset + 5] = matrix[4];\n            data[offset + 6] = matrix[5];\n            data[offset + 8] = matrix[6];\n            data[offset + 9] = matrix[7];\n            data[offset + 10] = matrix[8];\n        `,\n    uniform: ` \n            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));\n        `\n  },\n  // uploading a pixi rectangle as a vec4\n  {\n    type: \"vec4<f32>\",\n    test: (data) => data.type === \"vec4<f32>\" && data.size === 1 && data.value.width !== void 0,\n    ubo: `\n            v = uv[name];\n            data[offset] = v.x;\n            data[offset + 1] = v.y;\n            data[offset + 2] = v.width;\n            data[offset + 3] = v.height;\n        `,\n    uniform: `\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {\n                cv[0] = v.x;\n                cv[1] = v.y;\n                cv[2] = v.width;\n                cv[3] = v.height;\n                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);\n            }\n        `\n  },\n  // uploading a pixi point as a vec2\n  {\n    type: \"vec2<f32>\",\n    test: (data) => data.type === \"vec2<f32>\" && data.size === 1 && data.value.x !== void 0,\n    ubo: `\n            v = uv[name];\n            data[offset] = v.x;\n            data[offset + 1] = v.y;\n        `,\n    uniform: `\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.x || cv[1] !== v.y) {\n                cv[0] = v.x;\n                cv[1] = v.y;\n                gl.uniform2f(ud[name].location, v.x, v.y);\n            }\n        `\n  },\n  // uploading a pixi color as a vec4\n  {\n    type: \"vec4<f32>\",\n    test: (data) => data.type === \"vec4<f32>\" && data.size === 1 && data.value.red !== void 0,\n    ubo: `\n            v = uv[name];\n            data[offset] = v.red;\n            data[offset + 1] = v.green;\n            data[offset + 2] = v.blue;\n            data[offset + 3] = v.alpha;\n        `,\n    uniform: `\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {\n                cv[0] = v.red;\n                cv[1] = v.green;\n                cv[2] = v.blue;\n                cv[3] = v.alpha;\n                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);\n            }\n        `\n  },\n  // uploading a pixi color as a vec3\n  {\n    type: \"vec3<f32>\",\n    test: (data) => data.type === \"vec3<f32>\" && data.size === 1 && data.value.red !== void 0,\n    ubo: `\n            v = uv[name];\n            data[offset] = v.red;\n            data[offset + 1] = v.green;\n            data[offset + 2] = v.blue;\n        `,\n    uniform: `\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {\n                cv[0] = v.red;\n                cv[1] = v.green;\n                cv[2] = v.blue;\n                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);\n            }\n        `\n  }\n];\n\nexport { uniformParsers };\n//# sourceMappingURL=uniformParsers.mjs.map\n","import { uniformParsers } from './uniformParsers.mjs';\n\n\"use strict\";\nfunction createUboSyncFunction(uboElements, parserCode, arrayGenerationFunction, singleSettersMap) {\n  const funcFragments = [`\n        var v = null;\n        var v2 = null;\n        var t = 0;\n        var index = 0;\n        var name = null;\n        var arrayOffset = null;\n    `];\n  let prev = 0;\n  for (let i = 0; i < uboElements.length; i++) {\n    const uboElement = uboElements[i];\n    const name = uboElement.data.name;\n    let parsed = false;\n    let offset = 0;\n    for (let j = 0; j < uniformParsers.length; j++) {\n      const uniformParser = uniformParsers[j];\n      if (uniformParser.test(uboElement.data)) {\n        offset = uboElement.offset / 4;\n        funcFragments.push(\n          `name = \"${name}\";`,\n          `offset += ${offset - prev};`,\n          uniformParsers[j][parserCode] || uniformParsers[j].ubo\n        );\n        parsed = true;\n        break;\n      }\n    }\n    if (!parsed) {\n      if (uboElement.data.size > 1) {\n        offset = uboElement.offset / 4;\n        funcFragments.push(arrayGenerationFunction(uboElement, offset - prev));\n      } else {\n        const template = singleSettersMap[uboElement.data.type];\n        offset = uboElement.offset / 4;\n        funcFragments.push(\n          /* wgsl */\n          `\n                    v = uv.${name};\n                    offset += ${offset - prev};\n                    ${template};\n                `\n        );\n      }\n    }\n    prev = offset;\n  }\n  const fragmentSrc = funcFragments.join(\"\\n\");\n  return new Function(\n    \"uv\",\n    \"data\",\n    \"offset\",\n    fragmentSrc\n  );\n}\n\nexport { createUboSyncFunction };\n//# sourceMappingURL=createUboSyncFunction.mjs.map\n","\"use strict\";\nfunction loopMatrix(col, row) {\n  const total = col * row;\n  return `\n        for (let i = 0; i < ${total}; i++) {\n            data[offset + (((i / ${col})|0) * 4) + (i % ${col})] = v[i];\n        }\n    `;\n}\nconst uboSyncFunctionsSTD40 = {\n  f32: `\n        data[offset] = v;`,\n  i32: `\n        data[offset] = v;`,\n  \"vec2<f32>\": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];`,\n  \"vec3<f32>\": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];`,\n  \"vec4<f32>\": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];\n        data[offset + 3] = v[3];`,\n  \"mat2x2<f32>\": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 4] = v[2];\n        data[offset + 5] = v[3];`,\n  \"mat3x3<f32>\": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];`,\n  \"mat4x4<f32>\": `\n        for (let i = 0; i < 16; i++) {\n            data[offset + i] = v[i];\n        }`,\n  \"mat3x2<f32>\": loopMatrix(3, 2),\n  \"mat4x2<f32>\": loopMatrix(4, 2),\n  \"mat2x3<f32>\": loopMatrix(2, 3),\n  \"mat4x3<f32>\": loopMatrix(4, 3),\n  \"mat2x4<f32>\": loopMatrix(2, 4),\n  \"mat3x4<f32>\": loopMatrix(3, 4)\n};\nconst uboSyncFunctionsWGSL = {\n  ...uboSyncFunctionsSTD40,\n  \"mat2x2<f32>\": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];\n        data[offset + 3] = v[3];\n    `\n};\n\nexport { uboSyncFunctionsSTD40, uboSyncFunctionsWGSL };\n//# sourceMappingURL=uboSyncFunctions.mjs.map\n","import { WGSL_TO_STD40_SIZE } from './createUboElementsSTD40.mjs';\n\n\"use strict\";\nfunction generateArraySyncSTD40(uboElement, offsetToAdd) {\n  const rowSize = Math.max(WGSL_TO_STD40_SIZE[uboElement.data.type] / 16, 1);\n  const elementSize = uboElement.data.value.length / uboElement.data.size;\n  const remainder = (4 - elementSize % 4) % 4;\n  return `\n        v = uv.${uboElement.data.name};\n        offset += ${offsetToAdd};\n\n        arrayOffset = offset;\n\n        t = 0;\n\n        for(var i=0; i < ${uboElement.data.size * rowSize}; i++)\n        {\n            for(var j = 0; j < ${elementSize}; j++)\n            {\n                data[arrayOffset++] = v[t++];\n            }\n            ${remainder !== 0 ? `arrayOffset += ${remainder};` : \"\"}\n        }\n    `;\n}\n\nexport { generateArraySyncSTD40 };\n//# sourceMappingURL=generateArraySyncSTD40.mjs.map\n","import { createUboSyncFunction } from '../../../shared/shader/utils/createUboSyncFunction.mjs';\nimport { uboSyncFunctionsSTD40 } from '../../../shared/shader/utils/uboSyncFunctions.mjs';\nimport { generateArraySyncSTD40 } from './generateArraySyncSTD40.mjs';\n\n\"use strict\";\nfunction createUboSyncFunctionSTD40(uboElements) {\n  return createUboSyncFunction(\n    uboElements,\n    \"uboStd40\",\n    generateArraySyncSTD40,\n    uboSyncFunctionsSTD40\n  );\n}\n\nexport { createUboSyncFunctionSTD40 };\n//# sourceMappingURL=createUboSyncSTD40.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { UboSystem } from '../shared/shader/UboSystem.mjs';\nimport { createUboElementsSTD40 } from './shader/utils/createUboElementsSTD40.mjs';\nimport { createUboSyncFunctionSTD40 } from './shader/utils/createUboSyncSTD40.mjs';\n\n\"use strict\";\nclass GlUboSystem extends UboSystem {\n  constructor() {\n    super({\n      createUboElements: createUboElementsSTD40,\n      generateUboSync: createUboSyncFunctionSTD40\n    });\n  }\n}\n/** @ignore */\nGlUboSystem.extension = {\n  type: [ExtensionType.WebGLSystem],\n  name: \"ubo\"\n};\n\nexport { GlUboSystem };\n//# sourceMappingURL=GlUboSystem.mjs.map\n","import { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { CLEAR } from '../const.mjs';\nimport { GlRenderTarget } from '../GlRenderTarget.mjs';\n\n\"use strict\";\nclass GlRenderTargetAdaptor {\n  constructor() {\n    this._clearColorCache = [0, 0, 0, 0];\n    this._viewPortCache = new Rectangle();\n  }\n  init(renderer, renderTargetSystem) {\n    this._renderer = renderer;\n    this._renderTargetSystem = renderTargetSystem;\n    renderer.runners.contextChange.add(this);\n  }\n  contextChange() {\n    this._clearColorCache = [0, 0, 0, 0];\n    this._viewPortCache = new Rectangle();\n  }\n  copyToTexture(sourceRenderSurfaceTexture, destinationTexture, originSrc, size, originDest) {\n    const renderTargetSystem = this._renderTargetSystem;\n    const renderer = this._renderer;\n    const glRenderTarget = renderTargetSystem.getGpuRenderTarget(sourceRenderSurfaceTexture);\n    const gl = renderer.gl;\n    this.finishRenderPass(sourceRenderSurfaceTexture);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, glRenderTarget.resolveTargetFramebuffer);\n    renderer.texture.bind(destinationTexture, 0);\n    gl.copyTexSubImage2D(\n      gl.TEXTURE_2D,\n      0,\n      originDest.x,\n      originDest.y,\n      originSrc.x,\n      originSrc.y,\n      size.width,\n      size.height\n    );\n    return destinationTexture;\n  }\n  startRenderPass(renderTarget, clear = true, clearColor, viewport) {\n    const renderTargetSystem = this._renderTargetSystem;\n    const source = renderTarget.colorTexture;\n    const gpuRenderTarget = renderTargetSystem.getGpuRenderTarget(renderTarget);\n    let viewPortY = viewport.y;\n    if (renderTarget.isRoot) {\n      viewPortY = source.pixelHeight - viewport.height;\n    }\n    renderTarget.colorTextures.forEach((texture) => {\n      this._renderer.texture.unbind(texture);\n    });\n    const gl = this._renderer.gl;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, gpuRenderTarget.framebuffer);\n    const viewPortCache = this._viewPortCache;\n    if (viewPortCache.x !== viewport.x || viewPortCache.y !== viewPortY || viewPortCache.width !== viewport.width || viewPortCache.height !== viewport.height) {\n      viewPortCache.x = viewport.x;\n      viewPortCache.y = viewPortY;\n      viewPortCache.width = viewport.width;\n      viewPortCache.height = viewport.height;\n      gl.viewport(\n        viewport.x,\n        viewPortY,\n        viewport.width,\n        viewport.height\n      );\n    }\n    if (!gpuRenderTarget.depthStencilRenderBuffer && (renderTarget.stencil || renderTarget.depth)) {\n      this._initStencil(gpuRenderTarget);\n    }\n    this.clear(renderTarget, clear, clearColor);\n  }\n  finishRenderPass(renderTarget) {\n    const renderTargetSystem = this._renderTargetSystem;\n    const glRenderTarget = renderTargetSystem.getGpuRenderTarget(renderTarget);\n    if (!glRenderTarget.msaa)\n      return;\n    const gl = this._renderer.gl;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, glRenderTarget.resolveTargetFramebuffer);\n    gl.bindFramebuffer(gl.READ_FRAMEBUFFER, glRenderTarget.framebuffer);\n    gl.blitFramebuffer(\n      0,\n      0,\n      glRenderTarget.width,\n      glRenderTarget.height,\n      0,\n      0,\n      glRenderTarget.width,\n      glRenderTarget.height,\n      gl.COLOR_BUFFER_BIT,\n      gl.NEAREST\n    );\n    gl.bindFramebuffer(gl.FRAMEBUFFER, glRenderTarget.framebuffer);\n  }\n  initGpuRenderTarget(renderTarget) {\n    const renderer = this._renderer;\n    const gl = renderer.gl;\n    const glRenderTarget = new GlRenderTarget();\n    if (renderTarget.colorTexture.resource === renderer.gl.canvas) {\n      glRenderTarget.framebuffer = null;\n      return glRenderTarget;\n    }\n    this._initColor(renderTarget, glRenderTarget);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    return glRenderTarget;\n  }\n  destroyGpuRenderTarget(gpuRenderTarget) {\n    const gl = this._renderer.gl;\n    if (gpuRenderTarget.framebuffer) {\n      gl.deleteFramebuffer(gpuRenderTarget.framebuffer);\n      gpuRenderTarget.framebuffer = null;\n    }\n    if (gpuRenderTarget.resolveTargetFramebuffer) {\n      gl.deleteFramebuffer(gpuRenderTarget.resolveTargetFramebuffer);\n      gpuRenderTarget.resolveTargetFramebuffer = null;\n    }\n    if (gpuRenderTarget.depthStencilRenderBuffer) {\n      gl.deleteRenderbuffer(gpuRenderTarget.depthStencilRenderBuffer);\n      gpuRenderTarget.depthStencilRenderBuffer = null;\n    }\n    gpuRenderTarget.msaaRenderBuffer.forEach((renderBuffer) => {\n      gl.deleteRenderbuffer(renderBuffer);\n    });\n    gpuRenderTarget.msaaRenderBuffer = null;\n  }\n  clear(_renderTarget, clear, clearColor) {\n    if (!clear)\n      return;\n    const renderTargetSystem = this._renderTargetSystem;\n    if (typeof clear === \"boolean\") {\n      clear = clear ? CLEAR.ALL : CLEAR.NONE;\n    }\n    const gl = this._renderer.gl;\n    if (clear & CLEAR.COLOR) {\n      clearColor ?? (clearColor = renderTargetSystem.defaultClearColor);\n      const clearColorCache = this._clearColorCache;\n      const clearColorArray = clearColor;\n      if (clearColorCache[0] !== clearColorArray[0] || clearColorCache[1] !== clearColorArray[1] || clearColorCache[2] !== clearColorArray[2] || clearColorCache[3] !== clearColorArray[3]) {\n        clearColorCache[0] = clearColorArray[0];\n        clearColorCache[1] = clearColorArray[1];\n        clearColorCache[2] = clearColorArray[2];\n        clearColorCache[3] = clearColorArray[3];\n        gl.clearColor(clearColorArray[0], clearColorArray[1], clearColorArray[2], clearColorArray[3]);\n      }\n    }\n    gl.clear(clear);\n  }\n  resizeGpuRenderTarget(renderTarget) {\n    if (renderTarget.isRoot)\n      return;\n    const renderTargetSystem = this._renderTargetSystem;\n    const glRenderTarget = renderTargetSystem.getGpuRenderTarget(renderTarget);\n    this._resizeColor(renderTarget, glRenderTarget);\n    if (renderTarget.stencil) {\n      this._resizeStencil(glRenderTarget);\n    }\n  }\n  _initColor(renderTarget, glRenderTarget) {\n    const renderer = this._renderer;\n    const gl = renderer.gl;\n    const resolveTargetFramebuffer = gl.createFramebuffer();\n    glRenderTarget.resolveTargetFramebuffer = resolveTargetFramebuffer;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, resolveTargetFramebuffer);\n    glRenderTarget.width = renderTarget.colorTexture.source.pixelWidth;\n    glRenderTarget.height = renderTarget.colorTexture.source.pixelHeight;\n    renderTarget.colorTextures.forEach((colorTexture, i) => {\n      const source = colorTexture.source;\n      if (source.antialias) {\n        if (renderer.context.supports.msaa) {\n          glRenderTarget.msaa = true;\n        } else {\n          warn(\"[RenderTexture] Antialiasing on textures is not supported in WebGL1\");\n        }\n      }\n      renderer.texture.bindSource(source, 0);\n      const glSource = renderer.texture.getGlSource(source);\n      const glTexture = glSource.texture;\n      gl.framebufferTexture2D(\n        gl.FRAMEBUFFER,\n        gl.COLOR_ATTACHMENT0 + i,\n        3553,\n        // texture.target,\n        glTexture,\n        0\n      );\n    });\n    if (glRenderTarget.msaa) {\n      const viewFramebuffer = gl.createFramebuffer();\n      glRenderTarget.framebuffer = viewFramebuffer;\n      gl.bindFramebuffer(gl.FRAMEBUFFER, viewFramebuffer);\n      renderTarget.colorTextures.forEach((_, i) => {\n        const msaaRenderBuffer = gl.createRenderbuffer();\n        glRenderTarget.msaaRenderBuffer[i] = msaaRenderBuffer;\n      });\n    } else {\n      glRenderTarget.framebuffer = resolveTargetFramebuffer;\n    }\n    this._resizeColor(renderTarget, glRenderTarget);\n  }\n  _resizeColor(renderTarget, glRenderTarget) {\n    const source = renderTarget.colorTexture.source;\n    glRenderTarget.width = source.pixelWidth;\n    glRenderTarget.height = source.pixelHeight;\n    renderTarget.colorTextures.forEach((colorTexture, i) => {\n      if (i === 0)\n        return;\n      colorTexture.source.resize(source.width, source.height, source._resolution);\n    });\n    if (glRenderTarget.msaa) {\n      const renderer = this._renderer;\n      const gl = renderer.gl;\n      const viewFramebuffer = glRenderTarget.framebuffer;\n      gl.bindFramebuffer(gl.FRAMEBUFFER, viewFramebuffer);\n      renderTarget.colorTextures.forEach((colorTexture, i) => {\n        const source2 = colorTexture.source;\n        renderer.texture.bindSource(source2, 0);\n        const glSource = renderer.texture.getGlSource(source2);\n        const glInternalFormat = glSource.internalFormat;\n        const msaaRenderBuffer = glRenderTarget.msaaRenderBuffer[i];\n        gl.bindRenderbuffer(\n          gl.RENDERBUFFER,\n          msaaRenderBuffer\n        );\n        gl.renderbufferStorageMultisample(\n          gl.RENDERBUFFER,\n          4,\n          glInternalFormat,\n          source2.pixelWidth,\n          source2.pixelHeight\n        );\n        gl.framebufferRenderbuffer(\n          gl.FRAMEBUFFER,\n          gl.COLOR_ATTACHMENT0 + i,\n          gl.RENDERBUFFER,\n          msaaRenderBuffer\n        );\n      });\n    }\n  }\n  _initStencil(glRenderTarget) {\n    if (glRenderTarget.framebuffer === null)\n      return;\n    const gl = this._renderer.gl;\n    const depthStencilRenderBuffer = gl.createRenderbuffer();\n    glRenderTarget.depthStencilRenderBuffer = depthStencilRenderBuffer;\n    gl.bindRenderbuffer(\n      gl.RENDERBUFFER,\n      depthStencilRenderBuffer\n    );\n    gl.framebufferRenderbuffer(\n      gl.FRAMEBUFFER,\n      gl.DEPTH_STENCIL_ATTACHMENT,\n      gl.RENDERBUFFER,\n      depthStencilRenderBuffer\n    );\n    this._resizeStencil(glRenderTarget);\n  }\n  _resizeStencil(glRenderTarget) {\n    const gl = this._renderer.gl;\n    gl.bindRenderbuffer(\n      gl.RENDERBUFFER,\n      glRenderTarget.depthStencilRenderBuffer\n    );\n    if (glRenderTarget.msaa) {\n      gl.renderbufferStorageMultisample(\n        gl.RENDERBUFFER,\n        4,\n        gl.DEPTH24_STENCIL8,\n        glRenderTarget.width,\n        glRenderTarget.height\n      );\n    } else {\n      gl.renderbufferStorage(\n        gl.RENDERBUFFER,\n        this._renderer.context.webGLVersion === 2 ? gl.DEPTH24_STENCIL8 : gl.DEPTH_STENCIL,\n        glRenderTarget.width,\n        glRenderTarget.height\n      );\n    }\n  }\n}\n\nexport { GlRenderTargetAdaptor };\n//# sourceMappingURL=GlRenderTargetAdaptor.mjs.map\n","\"use strict\";\nfunction calculateProjection(pm, x, y, width, height, flipY) {\n  const sign = flipY ? 1 : -1;\n  pm.identity();\n  pm.a = 1 / width * 2;\n  pm.d = sign * (1 / height * 2);\n  pm.tx = -1 - x * pm.a;\n  pm.ty = -sign - y * pm.d;\n  return pm;\n}\n\nexport { calculateProjection };\n//# sourceMappingURL=calculateProjection.mjs.map\n","import { CanvasSource } from '../sources/CanvasSource.mjs';\nimport { Texture } from '../Texture.mjs';\n\n\"use strict\";\nconst canvasCache = /* @__PURE__ */ new Map();\nfunction getCanvasTexture(canvas, options) {\n  if (!canvasCache.has(canvas)) {\n    const texture = new Texture({\n      source: new CanvasSource({\n        resource: canvas,\n        ...options\n      })\n    });\n    const onDestroy = () => {\n      if (canvasCache.get(canvas) === texture) {\n        canvasCache.delete(canvas);\n      }\n    };\n    texture.once(\"destroy\", onDestroy);\n    texture.source.once(\"destroy\", onDestroy);\n    canvasCache.set(canvas, texture);\n  }\n  return canvasCache.get(canvas);\n}\nfunction hasCachedCanvasTexture(canvas) {\n  return canvasCache.has(canvas);\n}\n\nexport { getCanvasTexture, hasCachedCanvasTexture };\n//# sourceMappingURL=getCanvasTexture.mjs.map\n","\"use strict\";\nfunction isRenderingToScreen(renderTarget) {\n  const resource = renderTarget.colorTexture.source.resource;\n  return globalThis.HTMLCanvasElement && resource instanceof HTMLCanvasElement && document.body.contains(resource);\n}\n\nexport { isRenderingToScreen };\n//# sourceMappingURL=isRenderingToScreen.mjs.map\n","import { uid } from '../../../../utils/data/uid.mjs';\nimport { TextureSource } from '../texture/sources/TextureSource.mjs';\nimport { Texture } from '../texture/Texture.mjs';\n\n\"use strict\";\nconst _RenderTarget = class _RenderTarget {\n  /**\n   * @param [descriptor] - Options for creating a render target.\n   */\n  constructor(descriptor = {}) {\n    this.uid = uid(\"renderTarget\");\n    /**\n     * An array of textures that can be written to by the GPU - mostly this has one texture in Pixi, but you could\n     * write to multiple if required! (eg deferred lighting)\n     */\n    this.colorTextures = [];\n    this.dirtyId = 0;\n    this.isRoot = false;\n    this._size = new Float32Array(2);\n    /** if true, then when the render target is destroyed, it will destroy all the textures that were created for it. */\n    this._managedColorTextures = false;\n    descriptor = { ..._RenderTarget.defaultOptions, ...descriptor };\n    this.stencil = descriptor.stencil;\n    this.depth = descriptor.depth;\n    this.isRoot = descriptor.isRoot;\n    if (typeof descriptor.colorTextures === \"number\") {\n      this._managedColorTextures = true;\n      for (let i = 0; i < descriptor.colorTextures; i++) {\n        this.colorTextures.push(\n          new TextureSource({\n            width: descriptor.width,\n            height: descriptor.height,\n            resolution: descriptor.resolution,\n            antialias: descriptor.antialias\n          })\n        );\n      }\n    } else {\n      this.colorTextures = [...descriptor.colorTextures.map((texture) => texture.source)];\n      const colorSource = this.colorTexture.source;\n      this.resize(colorSource.width, colorSource.height, colorSource._resolution);\n    }\n    this.colorTexture.source.on(\"resize\", this.onSourceResize, this);\n    if (descriptor.depthStencilTexture || this.stencil) {\n      if (descriptor.depthStencilTexture instanceof Texture || descriptor.depthStencilTexture instanceof TextureSource) {\n        this.depthStencilTexture = descriptor.depthStencilTexture.source;\n      } else {\n        this.ensureDepthStencilTexture();\n      }\n    }\n  }\n  get size() {\n    const _size = this._size;\n    _size[0] = this.pixelWidth;\n    _size[1] = this.pixelHeight;\n    return _size;\n  }\n  get width() {\n    return this.colorTexture.source.width;\n  }\n  get height() {\n    return this.colorTexture.source.height;\n  }\n  get pixelWidth() {\n    return this.colorTexture.source.pixelWidth;\n  }\n  get pixelHeight() {\n    return this.colorTexture.source.pixelHeight;\n  }\n  get resolution() {\n    return this.colorTexture.source._resolution;\n  }\n  get colorTexture() {\n    return this.colorTextures[0];\n  }\n  onSourceResize(source) {\n    this.resize(source.width, source.height, source._resolution, true);\n  }\n  /**\n   * This will ensure a depthStencil texture is created for this render target.\n   * Most likely called by the mask system to make sure we have stencil buffer added.\n   * @internal\n   * @ignore\n   */\n  ensureDepthStencilTexture() {\n    if (!this.depthStencilTexture) {\n      this.depthStencilTexture = new TextureSource({\n        width: this.width,\n        height: this.height,\n        resolution: this.resolution,\n        format: \"depth24plus-stencil8\",\n        autoGenerateMipmaps: false,\n        antialias: false,\n        mipLevelCount: 1\n        // sampleCount: handled by the render target system..\n      });\n    }\n  }\n  resize(width, height, resolution = this.resolution, skipColorTexture = false) {\n    this.dirtyId++;\n    this.colorTextures.forEach((colorTexture, i) => {\n      if (skipColorTexture && i === 0)\n        return;\n      colorTexture.source.resize(width, height, resolution);\n    });\n    if (this.depthStencilTexture) {\n      this.depthStencilTexture.source.resize(width, height, resolution);\n    }\n  }\n  destroy() {\n    this.colorTexture.source.off(\"resize\", this.onSourceResize, this);\n    if (this._managedColorTextures) {\n      this.colorTextures.forEach((texture) => {\n        texture.destroy();\n      });\n    }\n    if (this.depthStencilTexture) {\n      this.depthStencilTexture.destroy();\n      delete this.depthStencilTexture;\n    }\n  }\n};\n/** The default options for a render target */\n_RenderTarget.defaultOptions = {\n  /** the width of the RenderTarget */\n  width: 0,\n  /** the height of the RenderTarget */\n  height: 0,\n  /** the resolution of the RenderTarget */\n  resolution: 1,\n  /** an array of textures, or a number indicating how many color textures there should be */\n  colorTextures: 1,\n  /** should this render target have a stencil buffer? */\n  stencil: false,\n  /** should this render target have a depth buffer? */\n  depth: false,\n  /** should this render target be antialiased? */\n  antialias: false,\n  // save on perf by default!\n  /** is this a root element, true if this is gl context owners render target */\n  isRoot: false\n};\nlet RenderTarget = _RenderTarget;\n\nexport { RenderTarget };\n//# sourceMappingURL=RenderTarget.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { CLEAR } from '../../gl/const.mjs';\nimport { calculateProjection } from '../../gpu/renderTarget/calculateProjection.mjs';\nimport { SystemRunner } from '../system/SystemRunner.mjs';\nimport { CanvasSource } from '../texture/sources/CanvasSource.mjs';\nimport { TextureSource } from '../texture/sources/TextureSource.mjs';\nimport { Texture } from '../texture/Texture.mjs';\nimport { getCanvasTexture } from '../texture/utils/getCanvasTexture.mjs';\nimport { isRenderingToScreen } from './isRenderingToScreen.mjs';\nimport { RenderTarget } from './RenderTarget.mjs';\n\n\"use strict\";\nclass RenderTargetSystem {\n  constructor(renderer) {\n    /** This is the root viewport for the render pass*/\n    this.rootViewPort = new Rectangle();\n    /** the current viewport that the gpu is using */\n    this.viewport = new Rectangle();\n    /**\n     * a runner that lets systems know if the active render target has changed.\n     * Eg the Stencil System needs to know so it can manage the stencil buffer\n     */\n    this.onRenderTargetChange = new SystemRunner(\"onRenderTargetChange\");\n    /** the projection matrix that is used by the shaders based on the active render target and the viewport */\n    this.projectionMatrix = new Matrix();\n    /** the default clear color for render targets */\n    this.defaultClearColor = [0, 0, 0, 0];\n    /**\n     * a hash that stores the render target for a given render surface. When you pass in a texture source,\n     * a render target is created for it. This map stores and makes it easy to retrieve the render target\n     */\n    this._renderSurfaceToRenderTargetHash = /* @__PURE__ */ new Map();\n    /** A hash that stores a gpu render target for a given render target. */\n    this._gpuRenderTargetHash = /* @__PURE__ */ Object.create(null);\n    /**\n     * A stack that stores the render target and frame that is currently being rendered to.\n     * When push is called, the current render target is stored in this stack.\n     * When pop is called, the previous render target is restored.\n     */\n    this._renderTargetStack = [];\n    this._renderer = renderer;\n  }\n  /** called when dev wants to finish a render pass */\n  finishRenderPass() {\n    this.adaptor.finishRenderPass(this.renderTarget);\n  }\n  /**\n   * called when the renderer starts to render a scene.\n   * @param options\n   * @param options.target - the render target to render to\n   * @param options.clear - the clear mode to use. Can be true or a CLEAR number 'COLOR | DEPTH | STENCIL' 0b111\n   * @param options.clearColor - the color to clear to\n   * @param options.frame - the frame to render to\n   */\n  renderStart({\n    target,\n    clear,\n    clearColor,\n    frame\n  }) {\n    this._renderTargetStack.length = 0;\n    this.push(\n      target,\n      clear,\n      clearColor,\n      frame\n    );\n    this.rootViewPort.copyFrom(this.viewport);\n    this.rootRenderTarget = this.renderTarget;\n    this.renderingToScreen = isRenderingToScreen(this.rootRenderTarget);\n  }\n  /**\n   * Binding a render surface! This is the main function of the render target system.\n   * It will take the RenderSurface (which can be a texture, canvas, or render target) and bind it to the renderer.\n   * Once bound all draw calls will be rendered to the render surface.\n   *\n   * If a frame is not provide and the render surface is a texture, the frame of the texture will be used.\n   * @param renderSurface - the render surface to bind\n   * @param clear - the clear mode to use. Can be true or a CLEAR number 'COLOR | DEPTH | STENCIL' 0b111\n   * @param clearColor - the color to clear to\n   * @param frame - the frame to render to\n   * @returns the render target that was bound\n   */\n  bind(renderSurface, clear = true, clearColor, frame) {\n    const renderTarget = this.getRenderTarget(renderSurface);\n    const didChange = this.renderTarget !== renderTarget;\n    this.renderTarget = renderTarget;\n    this.renderSurface = renderSurface;\n    const gpuRenderTarget = this.getGpuRenderTarget(renderTarget);\n    if (renderTarget.pixelWidth !== gpuRenderTarget.width || renderTarget.pixelHeight !== gpuRenderTarget.height) {\n      this.adaptor.resizeGpuRenderTarget(renderTarget);\n      gpuRenderTarget.width = renderTarget.pixelWidth;\n      gpuRenderTarget.height = renderTarget.pixelHeight;\n    }\n    const source = renderTarget.colorTexture;\n    const viewport = this.viewport;\n    const pixelWidth = source.pixelWidth;\n    const pixelHeight = source.pixelHeight;\n    if (!frame && renderSurface instanceof Texture) {\n      frame = renderSurface.frame;\n    }\n    if (frame) {\n      const resolution = source._resolution;\n      viewport.x = frame.x * resolution + 0.5 | 0;\n      viewport.y = frame.y * resolution + 0.5 | 0;\n      viewport.width = frame.width * resolution + 0.5 | 0;\n      viewport.height = frame.height * resolution + 0.5 | 0;\n    } else {\n      viewport.x = 0;\n      viewport.y = 0;\n      viewport.width = pixelWidth;\n      viewport.height = pixelHeight;\n    }\n    calculateProjection(\n      this.projectionMatrix,\n      0,\n      0,\n      viewport.width / source.resolution,\n      viewport.height / source.resolution,\n      !renderTarget.isRoot\n    );\n    this.adaptor.startRenderPass(renderTarget, clear, clearColor, viewport);\n    if (didChange) {\n      this.onRenderTargetChange.emit(renderTarget);\n    }\n    return renderTarget;\n  }\n  clear(target, clear = CLEAR.ALL, clearColor) {\n    if (!clear)\n      return;\n    if (target) {\n      target = this.getRenderTarget(target);\n    }\n    this.adaptor.clear(\n      target || this.renderTarget,\n      clear,\n      clearColor,\n      this.viewport\n    );\n  }\n  contextChange() {\n    this._gpuRenderTargetHash = /* @__PURE__ */ Object.create(null);\n  }\n  /**\n   * Push a render surface to the renderer. This will bind the render surface to the renderer,\n   * @param renderSurface - the render surface to push\n   * @param clear - the clear mode to use. Can be true or a CLEAR number 'COLOR | DEPTH | STENCIL' 0b111\n   * @param clearColor - the color to clear to\n   * @param frame - the frame to use when rendering to the render surface\n   */\n  push(renderSurface, clear = CLEAR.ALL, clearColor, frame) {\n    const renderTarget = this.bind(renderSurface, clear, clearColor, frame);\n    this._renderTargetStack.push({\n      renderTarget,\n      frame\n    });\n    return renderTarget;\n  }\n  /** Pops the current render target from the renderer and restores the previous render target. */\n  pop() {\n    this._renderTargetStack.pop();\n    const currentRenderTargetData = this._renderTargetStack[this._renderTargetStack.length - 1];\n    this.bind(currentRenderTargetData.renderTarget, false, null, currentRenderTargetData.frame);\n  }\n  /**\n   * Gets the render target from the provide render surface. Eg if its a texture,\n   * it will return the render target for the texture.\n   * If its a render target, it will return the same render target.\n   * @param renderSurface - the render surface to get the render target for\n   * @returns the render target for the render surface\n   */\n  getRenderTarget(renderSurface) {\n    if (renderSurface.isTexture) {\n      renderSurface = renderSurface.source;\n    }\n    return this._renderSurfaceToRenderTargetHash.get(renderSurface) ?? this._initRenderTarget(renderSurface);\n  }\n  /**\n   * Copies a render surface to another texture\n   * @param sourceRenderSurfaceTexture - the render surface to copy from\n   * @param destinationTexture - the texture to copy to\n   * @param originSrc - the origin of the copy\n   * @param originSrc.x - the x origin of the copy\n   * @param originSrc.y - the y origin of the copy\n   * @param size - the size of the copy\n   * @param size.width - the width of the copy\n   * @param size.height - the height of the copy\n   * @param originDest - the destination origin (top left to paste from!)\n   * @param originDest.x - the x origin of the paste\n   * @param originDest.y - the y origin of the paste\n   */\n  copyToTexture(sourceRenderSurfaceTexture, destinationTexture, originSrc, size, originDest) {\n    if (originSrc.x < 0) {\n      size.width += originSrc.x;\n      originDest.x -= originSrc.x;\n      originSrc.x = 0;\n    }\n    if (originSrc.y < 0) {\n      size.height += originSrc.y;\n      originDest.y -= originSrc.y;\n      originSrc.y = 0;\n    }\n    const { pixelWidth, pixelHeight } = sourceRenderSurfaceTexture;\n    size.width = Math.min(size.width, pixelWidth - originSrc.x);\n    size.height = Math.min(size.height, pixelHeight - originSrc.y);\n    return this.adaptor.copyToTexture(\n      sourceRenderSurfaceTexture,\n      destinationTexture,\n      originSrc,\n      size,\n      originDest\n    );\n  }\n  /**\n   * ensures that we have a depth stencil buffer available to render to\n   * This is used by the mask system to make sure we have a stencil buffer.\n   */\n  ensureDepthStencil() {\n    if (!this.renderTarget.stencil) {\n      this.renderTarget.stencil = true;\n      this.adaptor.startRenderPass(this.renderTarget, false, null, this.viewport);\n    }\n  }\n  /** nukes the render target system */\n  destroy() {\n    this._renderer = null;\n    this._renderSurfaceToRenderTargetHash.forEach((renderTarget, key) => {\n      if (renderTarget !== key) {\n        renderTarget.destroy();\n      }\n    });\n    this._renderSurfaceToRenderTargetHash.clear();\n    this._gpuRenderTargetHash = /* @__PURE__ */ Object.create(null);\n  }\n  _initRenderTarget(renderSurface) {\n    let renderTarget = null;\n    if (CanvasSource.test(renderSurface)) {\n      renderSurface = getCanvasTexture(renderSurface);\n    }\n    if (renderSurface instanceof RenderTarget) {\n      renderTarget = renderSurface;\n    } else if (renderSurface instanceof TextureSource) {\n      renderTarget = new RenderTarget({\n        colorTextures: [renderSurface]\n      });\n      if (CanvasSource.test(renderSurface.source.resource)) {\n        renderTarget.isRoot = true;\n      }\n      renderSurface.once(\"destroy\", () => {\n        renderTarget.destroy();\n        const gpuRenderTarget = this._gpuRenderTargetHash[renderTarget.uid];\n        if (gpuRenderTarget) {\n          this._gpuRenderTargetHash[renderTarget.uid] = null;\n          this.adaptor.destroyGpuRenderTarget(gpuRenderTarget);\n        }\n      });\n    }\n    this._renderSurfaceToRenderTargetHash.set(renderSurface, renderTarget);\n    return renderTarget;\n  }\n  getGpuRenderTarget(renderTarget) {\n    return this._gpuRenderTargetHash[renderTarget.uid] || (this._gpuRenderTargetHash[renderTarget.uid] = this.adaptor.initGpuRenderTarget(renderTarget));\n  }\n}\n\nexport { RenderTargetSystem };\n//# sourceMappingURL=RenderTargetSystem.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { RenderTargetSystem } from '../../shared/renderTarget/RenderTargetSystem.mjs';\nimport { GlRenderTargetAdaptor } from './GlRenderTargetAdaptor.mjs';\n\n\"use strict\";\nclass GlRenderTargetSystem extends RenderTargetSystem {\n  constructor(renderer) {\n    super(renderer);\n    this.adaptor = new GlRenderTargetAdaptor();\n    this.adaptor.init(renderer, this);\n  }\n}\n/** @ignore */\nGlRenderTargetSystem.extension = {\n  type: [ExtensionType.WebGLSystem],\n  name: \"renderTarget\"\n};\n\nexport { GlRenderTargetSystem };\n//# sourceMappingURL=GlRenderTargetSystem.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nclass BufferResource extends EventEmitter {\n  /**\n   * Create a new Buffer Resource.\n   * @param options - The options for the buffer resource\n   * @param options.buffer - The underlying buffer that this resource is using\n   * @param options.offset - The offset of the buffer this resource is using.\n   * If not provided, then it will use the offset of the buffer.\n   * @param options.size - The size of the buffer this resource is using.\n   * If not provided, then it will use the size of the buffer.\n   */\n  constructor({ buffer, offset, size }) {\n    super();\n    /**\n     * emits when the underlying buffer has changed shape (i.e. resized)\n     * letting the renderer know that it needs to discard the old buffer on the GPU and create a new one\n     * @event change\n     */\n    /**\n     * a unique id for this uniform group used through the renderer\n     * @internal\n     * @ignore\n     */\n    this.uid = uid(\"buffer\");\n    /**\n     * a resource type, used to identify how to handle it when its in a bind group / shader resource\n     * @internal\n     * @ignore\n     */\n    this._resourceType = \"bufferResource\";\n    /**\n     * used internally to know if a uniform group was used in the last render pass\n     * @internal\n     * @ignore\n     */\n    this._touched = 0;\n    /**\n     * the resource id used internally by the renderer to build bind group keys\n     * @internal\n     * @ignore\n     */\n    this._resourceId = uid(\"resource\");\n    /**\n     * A cheeky hint to the GL renderer to let it know this is a BufferResource\n     * @internal\n     * @ignore\n     */\n    this._bufferResource = true;\n    /**\n     * Has the Buffer resource been destroyed?\n     * @readonly\n     */\n    this.destroyed = false;\n    this.buffer = buffer;\n    this.offset = offset | 0;\n    this.size = size;\n    this.buffer.on(\"change\", this.onBufferChange, this);\n  }\n  onBufferChange() {\n    this._resourceId = uid(\"resource\");\n    this.emit(\"change\", this);\n  }\n  /**\n   * Destroys this resource. Make sure the underlying buffer is not used anywhere else\n   * if you want to destroy it as well, or code will explode\n   * @param destroyBuffer - Should the underlying buffer be destroyed as well?\n   */\n  destroy(destroyBuffer = false) {\n    this.destroyed = true;\n    if (destroyBuffer) {\n      this.buffer.destroy();\n    }\n    this.emit(\"change\", this);\n    this.buffer = null;\n  }\n}\n\nexport { BufferResource };\n//# sourceMappingURL=BufferResource.mjs.map\n","import { BufferResource } from '../../shared/buffer/BufferResource.mjs';\nimport { UniformGroup } from '../../shared/shader/UniformGroup.mjs';\nimport { TextureSource } from '../../shared/texture/sources/TextureSource.mjs';\n\n\"use strict\";\nfunction generateShaderSyncCode(shader, shaderSystem) {\n  const funcFragments = [];\n  const headerFragments = [`\n        var g = s.groups;\n        var sS = r.shader;\n        var p = s.glProgram;\n        var ugS = r.uniformGroup;\n        var resources;\n    `];\n  let addedTextreSystem = false;\n  let blockIndex = 0;\n  let textureCount = 0;\n  const programData = shaderSystem._getProgramData(shader.glProgram);\n  for (const i in shader.groups) {\n    const group = shader.groups[i];\n    funcFragments.push(`\n            resources = g[${i}].resources;\n        `);\n    for (const j in group.resources) {\n      const resource = group.resources[j];\n      if (resource instanceof UniformGroup) {\n        if (resource.ubo) {\n          funcFragments.push(`\n                        sS.bindUniformBlock(\n                            resources[${j}],\n                            sS._uniformBindMap[${i}[${j}],\n                            ${blockIndex++}\n                        );\n                    `);\n        } else {\n          funcFragments.push(`\n                        ugS.updateUniformGroup(resources[${j}], p, sD);\n                    `);\n        }\n      } else if (resource instanceof BufferResource) {\n        funcFragments.push(`\n                    sS.bindUniformBlock(\n                        resources[${j}],\n                        sS._uniformBindMap[${i}[${j}],\n                        ${blockIndex++}\n                    );\n                `);\n      } else if (resource instanceof TextureSource) {\n        const uniformName = shader._uniformBindMap[i][j];\n        const uniformData = programData.uniformData[uniformName];\n        if (uniformData) {\n          if (!addedTextreSystem) {\n            addedTextreSystem = true;\n            headerFragments.push(`\n                        var tS = r.texture;\n                        `);\n          }\n          shaderSystem._gl.uniform1i(uniformData.location, textureCount);\n          funcFragments.push(`\n                        tS.bind(resources[${j}], ${textureCount});\n                    `);\n          textureCount++;\n        }\n      }\n    }\n  }\n  const functionSource = [...headerFragments, ...funcFragments].join(\"\\n\");\n  return new Function(\"r\", \"s\", \"sD\", functionSource);\n}\n\nexport { generateShaderSyncCode };\n//# sourceMappingURL=GenerateShaderSyncCode.mjs.map\n","\"use strict\";\nclass IGLUniformData {\n}\nclass GlProgramData {\n  /**\n   * Makes a new Pixi program.\n   * @param program - webgl program\n   * @param uniformData - uniforms\n   */\n  constructor(program, uniformData) {\n    this.program = program;\n    this.uniformData = uniformData;\n    this.uniformGroups = {};\n    this.uniformDirtyGroups = {};\n    this.uniformBlockBindings = {};\n  }\n  /** Destroys this program. */\n  destroy() {\n    this.uniformData = null;\n    this.uniformGroups = null;\n    this.uniformDirtyGroups = null;\n    this.uniformBlockBindings = null;\n    this.program = null;\n  }\n}\n\nexport { GlProgramData, IGLUniformData };\n//# sourceMappingURL=GlProgramData.mjs.map\n","\"use strict\";\nfunction compileShader(gl, type, src) {\n  const shader = gl.createShader(type);\n  gl.shaderSource(shader, src);\n  gl.compileShader(shader);\n  return shader;\n}\n\nexport { compileShader };\n//# sourceMappingURL=compileShader.mjs.map\n","\"use strict\";\nfunction booleanArray(size) {\n  const array = new Array(size);\n  for (let i = 0; i < array.length; i++) {\n    array[i] = false;\n  }\n  return array;\n}\nfunction defaultValue(type, size) {\n  switch (type) {\n    case \"float\":\n      return 0;\n    case \"vec2\":\n      return new Float32Array(2 * size);\n    case \"vec3\":\n      return new Float32Array(3 * size);\n    case \"vec4\":\n      return new Float32Array(4 * size);\n    case \"int\":\n    case \"uint\":\n    case \"sampler2D\":\n    case \"sampler2DArray\":\n      return 0;\n    case \"ivec2\":\n      return new Int32Array(2 * size);\n    case \"ivec3\":\n      return new Int32Array(3 * size);\n    case \"ivec4\":\n      return new Int32Array(4 * size);\n    case \"uvec2\":\n      return new Uint32Array(2 * size);\n    case \"uvec3\":\n      return new Uint32Array(3 * size);\n    case \"uvec4\":\n      return new Uint32Array(4 * size);\n    case \"bool\":\n      return false;\n    case \"bvec2\":\n      return booleanArray(2 * size);\n    case \"bvec3\":\n      return booleanArray(3 * size);\n    case \"bvec4\":\n      return booleanArray(4 * size);\n    case \"mat2\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        1\n      ]);\n    case \"mat3\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        1\n      ]);\n    case \"mat4\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n  }\n  return null;\n}\n\nexport { defaultValue };\n//# sourceMappingURL=defaultValue.mjs.map\n","\"use strict\";\nlet GL_TABLE = null;\nconst GL_TO_GLSL_TYPES = {\n  FLOAT: \"float\",\n  FLOAT_VEC2: \"vec2\",\n  FLOAT_VEC3: \"vec3\",\n  FLOAT_VEC4: \"vec4\",\n  INT: \"int\",\n  INT_VEC2: \"ivec2\",\n  INT_VEC3: \"ivec3\",\n  INT_VEC4: \"ivec4\",\n  UNSIGNED_INT: \"uint\",\n  UNSIGNED_INT_VEC2: \"uvec2\",\n  UNSIGNED_INT_VEC3: \"uvec3\",\n  UNSIGNED_INT_VEC4: \"uvec4\",\n  BOOL: \"bool\",\n  BOOL_VEC2: \"bvec2\",\n  BOOL_VEC3: \"bvec3\",\n  BOOL_VEC4: \"bvec4\",\n  FLOAT_MAT2: \"mat2\",\n  FLOAT_MAT3: \"mat3\",\n  FLOAT_MAT4: \"mat4\",\n  SAMPLER_2D: \"sampler2D\",\n  INT_SAMPLER_2D: \"sampler2D\",\n  UNSIGNED_INT_SAMPLER_2D: \"sampler2D\",\n  SAMPLER_CUBE: \"samplerCube\",\n  INT_SAMPLER_CUBE: \"samplerCube\",\n  UNSIGNED_INT_SAMPLER_CUBE: \"samplerCube\",\n  SAMPLER_2D_ARRAY: \"sampler2DArray\",\n  INT_SAMPLER_2D_ARRAY: \"sampler2DArray\",\n  UNSIGNED_INT_SAMPLER_2D_ARRAY: \"sampler2DArray\"\n};\nconst GLSL_TO_VERTEX_TYPES = {\n  float: \"float32\",\n  vec2: \"float32x2\",\n  vec3: \"float32x3\",\n  vec4: \"float32x4\",\n  int: \"sint32\",\n  ivec2: \"sint32x2\",\n  ivec3: \"sint32x3\",\n  ivec4: \"sint32x4\",\n  uint: \"uint32\",\n  uvec2: \"uint32x2\",\n  uvec3: \"uint32x3\",\n  uvec4: \"uint32x4\",\n  bool: \"uint32\",\n  bvec2: \"uint32x2\",\n  bvec3: \"uint32x3\",\n  bvec4: \"uint32x4\"\n};\nfunction mapType(gl, type) {\n  if (!GL_TABLE) {\n    const typeNames = Object.keys(GL_TO_GLSL_TYPES);\n    GL_TABLE = {};\n    for (let i = 0; i < typeNames.length; ++i) {\n      const tn = typeNames[i];\n      GL_TABLE[gl[tn]] = GL_TO_GLSL_TYPES[tn];\n    }\n  }\n  return GL_TABLE[type];\n}\nfunction mapGlToVertexFormat(gl, type) {\n  const typeValue = mapType(gl, type);\n  return GLSL_TO_VERTEX_TYPES[typeValue] || \"float32\";\n}\n\nexport { mapGlToVertexFormat, mapType };\n//# sourceMappingURL=mapType.mjs.map\n","import { getAttributeInfoFromFormat } from '../../../shared/geometry/utils/getAttributeInfoFromFormat.mjs';\nimport { mapGlToVertexFormat } from './mapType.mjs';\n\n\"use strict\";\nfunction extractAttributesFromGlProgram(program, gl, sortAttributes = false) {\n  const attributes = {};\n  const totalAttributes = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n  for (let i = 0; i < totalAttributes; i++) {\n    const attribData = gl.getActiveAttrib(program, i);\n    if (attribData.name.startsWith(\"gl_\")) {\n      continue;\n    }\n    const format = mapGlToVertexFormat(gl, attribData.type);\n    attributes[attribData.name] = {\n      location: 0,\n      // set further down..\n      format,\n      stride: getAttributeInfoFromFormat(format).stride,\n      offset: 0,\n      instance: false,\n      start: 0\n    };\n  }\n  const keys = Object.keys(attributes);\n  if (sortAttributes) {\n    keys.sort((a, b) => a > b ? 1 : -1);\n    for (let i = 0; i < keys.length; i++) {\n      attributes[keys[i]].location = i;\n      gl.bindAttribLocation(program, i, keys[i]);\n    }\n    gl.linkProgram(program);\n  } else {\n    for (let i = 0; i < keys.length; i++) {\n      attributes[keys[i]].location = gl.getAttribLocation(program, keys[i]);\n    }\n  }\n  return attributes;\n}\n\nexport { extractAttributesFromGlProgram };\n//# sourceMappingURL=extractAttributesFromGlProgram.mjs.map\n","\"use strict\";\nfunction getUboData(program, gl) {\n  if (!gl.ACTIVE_UNIFORM_BLOCKS)\n    return {};\n  const uniformBlocks = {};\n  const totalUniformsBlocks = gl.getProgramParameter(program, gl.ACTIVE_UNIFORM_BLOCKS);\n  for (let i = 0; i < totalUniformsBlocks; i++) {\n    const name = gl.getActiveUniformBlockName(program, i);\n    const uniformBlockIndex = gl.getUniformBlockIndex(program, name);\n    const size = gl.getActiveUniformBlockParameter(program, i, gl.UNIFORM_BLOCK_DATA_SIZE);\n    uniformBlocks[name] = {\n      name,\n      index: uniformBlockIndex,\n      size\n    };\n  }\n  return uniformBlocks;\n}\n\nexport { getUboData };\n//# sourceMappingURL=getUboData.mjs.map\n","import { defaultValue } from './defaultValue.mjs';\nimport { mapType } from './mapType.mjs';\n\n\"use strict\";\nfunction getUniformData(program, gl) {\n  const uniforms = {};\n  const totalUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n  for (let i = 0; i < totalUniforms; i++) {\n    const uniformData = gl.getActiveUniform(program, i);\n    const name = uniformData.name.replace(/\\[.*?\\]$/, \"\");\n    const isArray = !!uniformData.name.match(/\\[.*?\\]$/);\n    const type = mapType(gl, uniformData.type);\n    uniforms[name] = {\n      name,\n      index: i,\n      type,\n      size: uniformData.size,\n      isArray,\n      value: defaultValue(type, uniformData.size)\n    };\n  }\n  return uniforms;\n}\n\nexport { getUniformData };\n//# sourceMappingURL=getUniformData.mjs.map\n","\"use strict\";\nfunction logPrettyShaderError(gl, shader) {\n  const shaderSrc = gl.getShaderSource(shader).split(\"\\n\").map((line, index) => `${index}: ${line}`);\n  const shaderLog = gl.getShaderInfoLog(shader);\n  const splitShader = shaderLog.split(\"\\n\");\n  const dedupe = {};\n  const lineNumbers = splitShader.map((line) => parseFloat(line.replace(/^ERROR\\: 0\\:([\\d]+)\\:.*$/, \"$1\"))).filter((n) => {\n    if (n && !dedupe[n]) {\n      dedupe[n] = true;\n      return true;\n    }\n    return false;\n  });\n  const logArgs = [\"\"];\n  lineNumbers.forEach((number) => {\n    shaderSrc[number - 1] = `%c${shaderSrc[number - 1]}%c`;\n    logArgs.push(\"background: #FF0000; color:#FFFFFF; font-size: 10px\", \"font-size: 10px\");\n  });\n  const fragmentSourceToLog = shaderSrc.join(\"\\n\");\n  logArgs[0] = fragmentSourceToLog;\n  console.error(shaderLog);\n  console.groupCollapsed(\"click to view full shader code\");\n  console.warn(...logArgs);\n  console.groupEnd();\n}\nfunction logProgramError(gl, program, vertexShader, fragmentShader) {\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n      logPrettyShaderError(gl, vertexShader);\n    }\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      logPrettyShaderError(gl, fragmentShader);\n    }\n    console.error(\"PixiJS Error: Could not initialize shader.\");\n    if (gl.getProgramInfoLog(program) !== \"\") {\n      console.warn(\"PixiJS Warning: gl.getProgramInfoLog()\", gl.getProgramInfoLog(program));\n    }\n  }\n}\n\nexport { logProgramError };\n//# sourceMappingURL=logProgramError.mjs.map\n","import { warn } from '../../../../../utils/logging/warn.mjs';\nimport { GlProgramData } from '../GlProgramData.mjs';\nimport { compileShader } from './compileShader.mjs';\nimport { defaultValue } from './defaultValue.mjs';\nimport { extractAttributesFromGlProgram } from './extractAttributesFromGlProgram.mjs';\nimport { getUboData } from './getUboData.mjs';\nimport { getUniformData } from './getUniformData.mjs';\nimport { logProgramError } from './logProgramError.mjs';\n\n\"use strict\";\nfunction generateProgram(gl, program) {\n  const glVertShader = compileShader(gl, gl.VERTEX_SHADER, program.vertex);\n  const glFragShader = compileShader(gl, gl.FRAGMENT_SHADER, program.fragment);\n  const webGLProgram = gl.createProgram();\n  gl.attachShader(webGLProgram, glVertShader);\n  gl.attachShader(webGLProgram, glFragShader);\n  const transformFeedbackVaryings = program.transformFeedbackVaryings;\n  if (transformFeedbackVaryings) {\n    if (typeof gl.transformFeedbackVaryings !== \"function\") {\n      warn(`TransformFeedback is not supported but TransformFeedbackVaryings are given.`);\n    } else {\n      gl.transformFeedbackVaryings(\n        webGLProgram,\n        transformFeedbackVaryings.names,\n        transformFeedbackVaryings.bufferMode === \"separate\" ? gl.SEPARATE_ATTRIBS : gl.INTERLEAVED_ATTRIBS\n      );\n    }\n  }\n  gl.linkProgram(webGLProgram);\n  if (!gl.getProgramParameter(webGLProgram, gl.LINK_STATUS)) {\n    logProgramError(gl, webGLProgram, glVertShader, glFragShader);\n  }\n  program._attributeData = extractAttributesFromGlProgram(\n    webGLProgram,\n    gl,\n    !/^[ \\t]*#[ \\t]*version[ \\t]+300[ \\t]+es[ \\t]*$/m.test(program.vertex)\n  );\n  program._uniformData = getUniformData(webGLProgram, gl);\n  program._uniformBlockData = getUboData(webGLProgram, gl);\n  gl.deleteShader(glVertShader);\n  gl.deleteShader(glFragShader);\n  const uniformData = {};\n  for (const i in program._uniformData) {\n    const data = program._uniformData[i];\n    uniformData[i] = {\n      location: gl.getUniformLocation(webGLProgram, i),\n      value: defaultValue(data.type, data.size)\n    };\n  }\n  const glProgram = new GlProgramData(webGLProgram, uniformData);\n  return glProgram;\n}\n\nexport { generateProgram };\n//# sourceMappingURL=generateProgram.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { generateShaderSyncCode } from './GenerateShaderSyncCode.mjs';\nimport { generateProgram } from './program/generateProgram.mjs';\n\n\"use strict\";\nconst defaultSyncData = {\n  textureCount: 0,\n  blockIndex: 0\n};\nclass GlShaderSystem {\n  constructor(renderer) {\n    /**\n     * @internal\n     * @private\n     */\n    this._activeProgram = null;\n    this._programDataHash = /* @__PURE__ */ Object.create(null);\n    this._nextIndex = 0;\n    this._boundUniformsIdsToIndexHash = /* @__PURE__ */ Object.create(null);\n    this._boundIndexToUniformsHash = /* @__PURE__ */ Object.create(null);\n    this._shaderSyncFunctions = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n  }\n  contextChange(gl) {\n    this._gl = gl;\n    this._maxBindings = gl.MAX_UNIFORM_BUFFER_BINDINGS ? gl.getParameter(gl.MAX_UNIFORM_BUFFER_BINDINGS) : 0;\n    this._programDataHash = /* @__PURE__ */ Object.create(null);\n    this._boundUniformsIdsToIndexHash = /* @__PURE__ */ Object.create(null);\n    this._boundIndexToUniformsHash = /* @__PURE__ */ Object.create(null);\n    this._activeProgram = null;\n  }\n  /**\n   * Changes the current shader to the one given in parameter.\n   * @param shader - the new shader\n   * @param skipSync - false if the shader should automatically sync its uniforms.\n   * @returns the glProgram that belongs to the shader.\n   */\n  bind(shader, skipSync) {\n    this._setProgram(shader.glProgram);\n    if (skipSync)\n      return;\n    defaultSyncData.textureCount = 0;\n    defaultSyncData.blockIndex = 0;\n    let syncFunction = this._shaderSyncFunctions[shader.glProgram._key];\n    if (!syncFunction) {\n      syncFunction = this._shaderSyncFunctions[shader.glProgram._key] = this._generateShaderSync(shader, this);\n    }\n    syncFunction(this._renderer, shader, defaultSyncData);\n  }\n  /**\n   * Updates the uniform group.\n   * @param uniformGroup - the uniform group to update\n   */\n  updateUniformGroup(uniformGroup) {\n    this._renderer.uniformGroup.updateUniformGroup(uniformGroup, this._activeProgram, defaultSyncData);\n  }\n  /**\n   * Binds a uniform block to the shader.\n   * @param uniformGroup - the uniform group to bind\n   * @param name - the name of the uniform block\n   * @param index - the index of the uniform block\n   */\n  bindUniformBlock(uniformGroup, name, index = 0) {\n    const bufferSystem = this._renderer.buffer;\n    const programData = this._getProgramData(this._activeProgram);\n    const isBufferResource = uniformGroup._bufferResource;\n    if (isBufferResource) {\n      this._renderer.ubo.updateUniformGroup(uniformGroup);\n    }\n    bufferSystem.updateBuffer(uniformGroup.buffer);\n    let boundIndex = this._boundUniformsIdsToIndexHash[uniformGroup.uid];\n    if (boundIndex === void 0) {\n      const nextIndex = this._nextIndex++ % this._maxBindings;\n      const currentBoundUniformGroup = this._boundIndexToUniformsHash[nextIndex];\n      if (currentBoundUniformGroup) {\n        this._boundUniformsIdsToIndexHash[currentBoundUniformGroup.uid] = void 0;\n      }\n      boundIndex = this._boundUniformsIdsToIndexHash[uniformGroup.uid] = nextIndex;\n      this._boundIndexToUniformsHash[nextIndex] = uniformGroup;\n      if (isBufferResource) {\n        bufferSystem.bindBufferRange(uniformGroup.buffer, nextIndex, uniformGroup.offset);\n      } else {\n        bufferSystem.bindBufferBase(uniformGroup.buffer, nextIndex);\n      }\n    }\n    const gl = this._gl;\n    const uniformBlockIndex = this._activeProgram._uniformBlockData[name].index;\n    if (programData.uniformBlockBindings[index] === boundIndex)\n      return;\n    programData.uniformBlockBindings[index] = boundIndex;\n    gl.uniformBlockBinding(programData.program, uniformBlockIndex, boundIndex);\n  }\n  _setProgram(program) {\n    if (this._activeProgram === program)\n      return;\n    this._activeProgram = program;\n    const programData = this._getProgramData(program);\n    this._gl.useProgram(programData.program);\n  }\n  /**\n   * @param program - the program to get the data for\n   * @internal\n   * @private\n   */\n  _getProgramData(program) {\n    return this._programDataHash[program._key] || this._createProgramData(program);\n  }\n  _createProgramData(program) {\n    const key = program._key;\n    this._programDataHash[key] = generateProgram(this._gl, program);\n    return this._programDataHash[key];\n  }\n  destroy() {\n    for (const key of Object.keys(this._programDataHash)) {\n      const programData = this._programDataHash[key];\n      programData.destroy();\n      this._programDataHash[key] = null;\n    }\n    this._programDataHash = null;\n    this._boundUniformsIdsToIndexHash = null;\n  }\n  /**\n   * Creates a function that can be executed that will sync the shader as efficiently as possible.\n   * Overridden by the unsafe eval package if you don't want eval used in your project.\n   * @param shader - the shader to generate the sync function for\n   * @param shaderSystem - the shader system to use\n   * @returns - the generated sync function\n   * @ignore\n   */\n  _generateShaderSync(shader, shaderSystem) {\n    return generateShaderSyncCode(shader, shaderSystem);\n  }\n}\n/** @ignore */\nGlShaderSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"shader\"\n};\n\nexport { GlShaderSystem };\n//# sourceMappingURL=GlShaderSystem.mjs.map\n","\"use strict\";\nconst UNIFORM_TO_SINGLE_SETTERS = {\n  f32: `if (cv !== v) {\n            cu.value = v;\n            gl.uniform1f(location, v);\n        }`,\n  \"vec2<f32>\": `if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2f(location, v[0], v[1]);\n        }`,\n  \"vec3<f32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3f(location, v[0], v[1], v[2]);\n        }`,\n  \"vec4<f32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n        }`,\n  i32: `if (cv !== v) {\n            cu.value = v;\n            gl.uniform1i(location, v);\n        }`,\n  \"vec2<i32>\": `if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2i(location, v[0], v[1]);\n        }`,\n  \"vec3<i32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3i(location, v[0], v[1], v[2]);\n        }`,\n  \"vec4<i32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n        }`,\n  u32: `if (cv !== v) {\n            cu.value = v;\n            gl.uniform1ui(location, v);\n        }`,\n  \"vec2<u32>\": `if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2ui(location, v[0], v[1]);\n        }`,\n  \"vec3<u32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3ui(location, v[0], v[1], v[2]);\n        }`,\n  \"vec4<u32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n        }`,\n  bool: `if (cv !== v) {\n            cu.value = v;\n            gl.uniform1i(location, v);\n        }`,\n  \"vec2<bool>\": `if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2i(location, v[0], v[1]);\n        }`,\n  \"vec3<bool>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3i(location, v[0], v[1], v[2]);\n        }`,\n  \"vec4<bool>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n        }`,\n  \"mat2x2<f32>\": `gl.uniformMatrix2fv(location, false, v);`,\n  \"mat3x3<f32>\": `gl.uniformMatrix3fv(location, false, v);`,\n  \"mat4x4<f32>\": `gl.uniformMatrix4fv(location, false, v);`\n};\nconst UNIFORM_TO_ARRAY_SETTERS = {\n  f32: `gl.uniform1fv(location, v);`,\n  \"vec2<f32>\": `gl.uniform2fv(location, v);`,\n  \"vec3<f32>\": `gl.uniform3fv(location, v);`,\n  \"vec4<f32>\": `gl.uniform4fv(location, v);`,\n  \"mat2x2<f32>\": `gl.uniformMatrix2fv(location, false, v);`,\n  \"mat3x3<f32>\": `gl.uniformMatrix3fv(location, false, v);`,\n  \"mat4x4<f32>\": `gl.uniformMatrix4fv(location, false, v);`,\n  i32: `gl.uniform1iv(location, v);`,\n  \"vec2<i32>\": `gl.uniform2iv(location, v);`,\n  \"vec3<i32>\": `gl.uniform3iv(location, v);`,\n  \"vec4<i32>\": `gl.uniform4iv(location, v);`,\n  u32: `gl.uniform1iv(location, v);`,\n  \"vec2<u32>\": `gl.uniform2iv(location, v);`,\n  \"vec3<u32>\": `gl.uniform3iv(location, v);`,\n  \"vec4<u32>\": `gl.uniform4iv(location, v);`,\n  bool: `gl.uniform1iv(location, v);`,\n  \"vec2<bool>\": `gl.uniform2iv(location, v);`,\n  \"vec3<bool>\": `gl.uniform3iv(location, v);`,\n  \"vec4<bool>\": `gl.uniform4iv(location, v);`\n};\n\nexport { UNIFORM_TO_ARRAY_SETTERS, UNIFORM_TO_SINGLE_SETTERS };\n//# sourceMappingURL=generateUniformsSyncTypes.mjs.map\n","import { BufferResource } from '../../../shared/buffer/BufferResource.mjs';\nimport { UniformGroup } from '../../../shared/shader/UniformGroup.mjs';\nimport { uniformParsers } from '../../../shared/shader/utils/uniformParsers.mjs';\nimport { UNIFORM_TO_SINGLE_SETTERS, UNIFORM_TO_ARRAY_SETTERS } from './generateUniformsSyncTypes.mjs';\n\n\"use strict\";\nfunction generateUniformsSync(group, uniformData) {\n  const funcFragments = [`\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n        var name = null;\n    `];\n  for (const i in group.uniforms) {\n    if (!uniformData[i]) {\n      if (group.uniforms[i] instanceof UniformGroup) {\n        if (group.uniforms[i].ubo) {\n          funcFragments.push(`\n                        renderer.shader.bindUniformBlock(uv.${i}, \"${i}\");\n                    `);\n        } else {\n          funcFragments.push(`\n                        renderer.shader.updateUniformGroup(uv.${i});\n                    `);\n        }\n      } else if (group.uniforms[i] instanceof BufferResource) {\n        funcFragments.push(`\n                        renderer.shader.bindBufferResource(uv.${i}, \"${i}\");\n                    `);\n      }\n      continue;\n    }\n    const uniform = group.uniformStructures[i];\n    let parsed = false;\n    for (let j = 0; j < uniformParsers.length; j++) {\n      const parser = uniformParsers[j];\n      if (uniform.type === parser.type && parser.test(uniform)) {\n        funcFragments.push(`name = \"${i}\";`, uniformParsers[j].uniform);\n        parsed = true;\n        break;\n      }\n    }\n    if (!parsed) {\n      const templateType = uniform.size === 1 ? UNIFORM_TO_SINGLE_SETTERS : UNIFORM_TO_ARRAY_SETTERS;\n      const template = templateType[uniform.type].replace(\"location\", `ud[\"${i}\"].location`);\n      funcFragments.push(`\n            cu = ud[\"${i}\"];\n            cv = cu.value;\n            v = uv[\"${i}\"];\n            ${template};`);\n    }\n  }\n  return new Function(\"ud\", \"uv\", \"renderer\", \"syncData\", funcFragments.join(\"\\n\"));\n}\n\nexport { generateUniformsSync };\n//# sourceMappingURL=generateUniformsSync.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { generateUniformsSync } from './utils/generateUniformsSync.mjs';\n\n\"use strict\";\nclass GlUniformGroupSystem {\n  /** @param renderer - The renderer this System works for. */\n  constructor(renderer) {\n    /** Cache to holds the generated functions. Stored against UniformObjects unique signature. */\n    this._cache = {};\n    this._uniformGroupSyncHash = {};\n    this._renderer = renderer;\n    this.gl = null;\n    this._cache = {};\n  }\n  contextChange(gl) {\n    this.gl = gl;\n  }\n  /**\n   * Uploads the uniforms values to the currently bound shader.\n   * @param group - the uniforms values that be applied to the current shader\n   * @param program\n   * @param syncData\n   * @param syncData.textureCount\n   */\n  updateUniformGroup(group, program, syncData) {\n    const programData = this._renderer.shader._getProgramData(program);\n    if (!group.isStatic || group._dirtyId !== programData.uniformDirtyGroups[group.uid]) {\n      programData.uniformDirtyGroups[group.uid] = group._dirtyId;\n      const syncFunc = this._getUniformSyncFunction(group, program);\n      syncFunc(programData.uniformData, group.uniforms, this._renderer, syncData);\n    }\n  }\n  /**\n   * Overrideable by the pixi.js/unsafe-eval package to use static syncUniforms instead.\n   * @param group\n   * @param program\n   */\n  _getUniformSyncFunction(group, program) {\n    return this._uniformGroupSyncHash[group._signature]?.[program._key] || this._createUniformSyncFunction(group, program);\n  }\n  _createUniformSyncFunction(group, program) {\n    const uniformGroupSyncHash = this._uniformGroupSyncHash[group._signature] || (this._uniformGroupSyncHash[group._signature] = {});\n    const id = this._getSignature(group, program._uniformData, \"u\");\n    if (!this._cache[id]) {\n      this._cache[id] = this._generateUniformsSync(group, program._uniformData);\n    }\n    uniformGroupSyncHash[program._key] = this._cache[id];\n    return uniformGroupSyncHash[program._key];\n  }\n  _generateUniformsSync(group, uniformData) {\n    return generateUniformsSync(group, uniformData);\n  }\n  /**\n   * Takes a uniform group and data and generates a unique signature for them.\n   * @param group - The uniform group to get signature of\n   * @param group.uniforms\n   * @param uniformData - Uniform information generated by the shader\n   * @param preFix\n   * @returns Unique signature of the uniform group\n   */\n  _getSignature(group, uniformData, preFix) {\n    const uniforms = group.uniforms;\n    const strings = [`${preFix}-`];\n    for (const i in uniforms) {\n      strings.push(i);\n      if (uniformData[i]) {\n        strings.push(uniformData[i].type);\n      }\n    }\n    return strings.join(\"-\");\n  }\n  /** Destroys this System and removes all its textures. */\n  destroy() {\n    this._renderer = null;\n    this._cache = null;\n  }\n}\n/** @ignore */\nGlUniformGroupSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"uniformGroup\"\n};\n\nexport { GlUniformGroupSystem };\n//# sourceMappingURL=GlUniformGroupSystem.mjs.map\n","\"use strict\";\nfunction mapWebGLBlendModesToPixi(gl) {\n  const blendMap = {};\n  blendMap.normal = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n  blendMap.add = [gl.ONE, gl.ONE];\n  blendMap.multiply = [gl.DST_COLOR, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n  blendMap.screen = [gl.ONE, gl.ONE_MINUS_SRC_COLOR, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n  blendMap.none = [0, 0];\n  blendMap[\"normal-npm\"] = [gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n  blendMap[\"add-npm\"] = [gl.SRC_ALPHA, gl.ONE, gl.ONE, gl.ONE];\n  blendMap[\"screen-npm\"] = [gl.SRC_ALPHA, gl.ONE_MINUS_SRC_COLOR, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n  blendMap.erase = [gl.ZERO, gl.ONE_MINUS_SRC_ALPHA];\n  return blendMap;\n}\n\nexport { mapWebGLBlendModesToPixi };\n//# sourceMappingURL=mapWebGLBlendModesToPixi.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { State } from '../../shared/state/State.mjs';\nimport { mapWebGLBlendModesToPixi } from './mapWebGLBlendModesToPixi.mjs';\n\n\"use strict\";\nconst BLEND = 0;\nconst OFFSET = 1;\nconst CULLING = 2;\nconst DEPTH_TEST = 3;\nconst WINDING = 4;\nconst DEPTH_MASK = 5;\nconst _GlStateSystem = class _GlStateSystem {\n  constructor() {\n    this.gl = null;\n    this.stateId = 0;\n    this.polygonOffset = 0;\n    this.blendMode = \"none\";\n    this._blendEq = false;\n    this.map = [];\n    this.map[BLEND] = this.setBlend;\n    this.map[OFFSET] = this.setOffset;\n    this.map[CULLING] = this.setCullFace;\n    this.map[DEPTH_TEST] = this.setDepthTest;\n    this.map[WINDING] = this.setFrontFace;\n    this.map[DEPTH_MASK] = this.setDepthMask;\n    this.checks = [];\n    this.defaultState = State.for2d();\n  }\n  contextChange(gl) {\n    this.gl = gl;\n    this.blendModesMap = mapWebGLBlendModesToPixi(gl);\n    this.reset();\n  }\n  /**\n   * Sets the current state\n   * @param {*} state - The state to set.\n   */\n  set(state) {\n    state = state || this.defaultState;\n    if (this.stateId !== state.data) {\n      let diff = this.stateId ^ state.data;\n      let i = 0;\n      while (diff) {\n        if (diff & 1) {\n          this.map[i].call(this, !!(state.data & 1 << i));\n        }\n        diff = diff >> 1;\n        i++;\n      }\n      this.stateId = state.data;\n    }\n    for (let i = 0; i < this.checks.length; i++) {\n      this.checks[i](this, state);\n    }\n  }\n  /**\n   * Sets the state, when previous state is unknown.\n   * @param {*} state - The state to set\n   */\n  forceState(state) {\n    state = state || this.defaultState;\n    for (let i = 0; i < this.map.length; i++) {\n      this.map[i].call(this, !!(state.data & 1 << i));\n    }\n    for (let i = 0; i < this.checks.length; i++) {\n      this.checks[i](this, state);\n    }\n    this.stateId = state.data;\n  }\n  /**\n   * Sets whether to enable or disable blending.\n   * @param value - Turn on or off WebGl blending.\n   */\n  setBlend(value) {\n    this._updateCheck(_GlStateSystem._checkBlendMode, value);\n    this.gl[value ? \"enable\" : \"disable\"](this.gl.BLEND);\n  }\n  /**\n   * Sets whether to enable or disable polygon offset fill.\n   * @param value - Turn on or off webgl polygon offset testing.\n   */\n  setOffset(value) {\n    this._updateCheck(_GlStateSystem._checkPolygonOffset, value);\n    this.gl[value ? \"enable\" : \"disable\"](this.gl.POLYGON_OFFSET_FILL);\n  }\n  /**\n   * Sets whether to enable or disable depth test.\n   * @param value - Turn on or off webgl depth testing.\n   */\n  setDepthTest(value) {\n    this.gl[value ? \"enable\" : \"disable\"](this.gl.DEPTH_TEST);\n  }\n  /**\n   * Sets whether to enable or disable depth mask.\n   * @param value - Turn on or off webgl depth mask.\n   */\n  setDepthMask(value) {\n    this.gl.depthMask(value);\n  }\n  /**\n   * Sets whether to enable or disable cull face.\n   * @param {boolean} value - Turn on or off webgl cull face.\n   */\n  setCullFace(value) {\n    this.gl[value ? \"enable\" : \"disable\"](this.gl.CULL_FACE);\n  }\n  /**\n   * Sets the gl front face.\n   * @param {boolean} value - true is clockwise and false is counter-clockwise\n   */\n  setFrontFace(value) {\n    this.gl.frontFace(this.gl[value ? \"CW\" : \"CCW\"]);\n  }\n  /**\n   * Sets the blend mode.\n   * @param {number} value - The blend mode to set to.\n   */\n  setBlendMode(value) {\n    if (!this.blendModesMap[value]) {\n      value = \"normal\";\n    }\n    if (value === this.blendMode) {\n      return;\n    }\n    this.blendMode = value;\n    const mode = this.blendModesMap[value];\n    const gl = this.gl;\n    if (mode.length === 2) {\n      gl.blendFunc(mode[0], mode[1]);\n    } else {\n      gl.blendFuncSeparate(mode[0], mode[1], mode[2], mode[3]);\n    }\n    if (mode.length === 6) {\n      this._blendEq = true;\n      gl.blendEquationSeparate(mode[4], mode[5]);\n    } else if (this._blendEq) {\n      this._blendEq = false;\n      gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n    }\n  }\n  /**\n   * Sets the polygon offset.\n   * @param {number} value - the polygon offset\n   * @param {number} scale - the polygon offset scale\n   */\n  setPolygonOffset(value, scale) {\n    this.gl.polygonOffset(value, scale);\n  }\n  // used\n  /** Resets all the logic and disables the VAOs. */\n  reset() {\n    this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, false);\n    this.forceState(this.defaultState);\n    this._blendEq = true;\n    this.blendMode = \"\";\n    this.setBlendMode(\"normal\");\n  }\n  /**\n   * Checks to see which updates should be checked based on which settings have been activated.\n   *\n   * For example, if blend is enabled then we should check the blend modes each time the state is changed\n   * or if polygon fill is activated then we need to check if the polygon offset changes.\n   * The idea is that we only check what we have too.\n   * @param func - the checking function to add or remove\n   * @param value - should the check function be added or removed.\n   */\n  _updateCheck(func, value) {\n    const index = this.checks.indexOf(func);\n    if (value && index === -1) {\n      this.checks.push(func);\n    } else if (!value && index !== -1) {\n      this.checks.splice(index, 1);\n    }\n  }\n  /**\n   * A private little wrapper function that we call to check the blend mode.\n   * @param system - the System to perform the state check on\n   * @param state - the state that the blendMode will pulled from\n   */\n  static _checkBlendMode(system, state) {\n    system.setBlendMode(state.blendMode);\n  }\n  /**\n   * A private little wrapper function that we call to check the polygon offset.\n   * @param system - the System to perform the state check on\n   * @param state - the state that the blendMode will pulled from\n   */\n  static _checkPolygonOffset(system, state) {\n    system.setPolygonOffset(1, state.polygonOffset);\n  }\n  /**\n   * @ignore\n   */\n  destroy() {\n    this.gl = null;\n    this.checks.length = 0;\n  }\n};\n/** @ignore */\n_GlStateSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"state\"\n};\nlet GlStateSystem = _GlStateSystem;\n\nexport { GlStateSystem };\n//# sourceMappingURL=GlStateSystem.mjs.map\n","import { GL_TARGETS, GL_TYPES, GL_FORMATS } from './const.mjs';\n\n\"use strict\";\nclass GlTexture {\n  constructor(texture) {\n    this.target = GL_TARGETS.TEXTURE_2D;\n    this.texture = texture;\n    this.width = -1;\n    this.height = -1;\n    this.type = GL_TYPES.UNSIGNED_BYTE;\n    this.internalFormat = GL_FORMATS.RGBA;\n    this.format = GL_FORMATS.RGBA;\n    this.samplerType = 0;\n  }\n}\n\nexport { GlTexture };\n//# sourceMappingURL=GlTexture.mjs.map\n","\"use strict\";\nconst glUploadBufferImageResource = {\n  id: \"image\",\n  upload(source, glTexture, gl) {\n    if (glTexture.width === source.width || glTexture.height === source.height) {\n      gl.texSubImage2D(\n        gl.TEXTURE_2D,\n        0,\n        0,\n        0,\n        glTexture.format,\n        glTexture.type,\n        source.resource\n      );\n    } else {\n      gl.texImage2D(\n        glTexture.target,\n        0,\n        glTexture.internalFormat,\n        source.width,\n        source.height,\n        0,\n        glTexture.format,\n        glTexture.type,\n        source.resource\n      );\n    }\n    glTexture.width = source.width;\n    glTexture.height = source.height;\n  }\n};\n\nexport { glUploadBufferImageResource };\n//# sourceMappingURL=glUploadBufferImageResource.mjs.map\n","\"use strict\";\nconst compressedFormatMap = {\n  \"bc1-rgba-unorm\": true,\n  \"bc1-rgba-unorm-srgb\": true,\n  \"bc2-rgba-unorm\": true,\n  \"bc2-rgba-unorm-srgb\": true,\n  \"bc3-rgba-unorm\": true,\n  \"bc3-rgba-unorm-srgb\": true,\n  \"bc4-r-unorm\": true,\n  \"bc4-r-snorm\": true,\n  \"bc5-rg-unorm\": true,\n  \"bc5-rg-snorm\": true,\n  \"bc6h-rgb-ufloat\": true,\n  \"bc6h-rgb-float\": true,\n  \"bc7-rgba-unorm\": true,\n  \"bc7-rgba-unorm-srgb\": true,\n  // ETC2 compressed formats usable if \"texture-compression-etc2\" is both\n  // supported by the device/user agent and enabled in requestDevice.\n  \"etc2-rgb8unorm\": true,\n  \"etc2-rgb8unorm-srgb\": true,\n  \"etc2-rgb8a1unorm\": true,\n  \"etc2-rgb8a1unorm-srgb\": true,\n  \"etc2-rgba8unorm\": true,\n  \"etc2-rgba8unorm-srgb\": true,\n  \"eac-r11unorm\": true,\n  \"eac-r11snorm\": true,\n  \"eac-rg11unorm\": true,\n  \"eac-rg11snorm\": true,\n  // ASTC compressed formats usable if \"texture-compression-astc\" is both\n  // supported by the device/user agent and enabled in requestDevice.\n  \"astc-4x4-unorm\": true,\n  \"astc-4x4-unorm-srgb\": true,\n  \"astc-5x4-unorm\": true,\n  \"astc-5x4-unorm-srgb\": true,\n  \"astc-5x5-unorm\": true,\n  \"astc-5x5-unorm-srgb\": true,\n  \"astc-6x5-unorm\": true,\n  \"astc-6x5-unorm-srgb\": true,\n  \"astc-6x6-unorm\": true,\n  \"astc-6x6-unorm-srgb\": true,\n  \"astc-8x5-unorm\": true,\n  \"astc-8x5-unorm-srgb\": true,\n  \"astc-8x6-unorm\": true,\n  \"astc-8x6-unorm-srgb\": true,\n  \"astc-8x8-unorm\": true,\n  \"astc-8x8-unorm-srgb\": true,\n  \"astc-10x5-unorm\": true,\n  \"astc-10x5-unorm-srgb\": true,\n  \"astc-10x6-unorm\": true,\n  \"astc-10x6-unorm-srgb\": true,\n  \"astc-10x8-unorm\": true,\n  \"astc-10x8-unorm-srgb\": true,\n  \"astc-10x10-unorm\": true,\n  \"astc-10x10-unorm-srgb\": true,\n  \"astc-12x10-unorm\": true,\n  \"astc-12x10-unorm-srgb\": true,\n  \"astc-12x12-unorm\": true,\n  \"astc-12x12-unorm-srgb\": true\n};\nconst glUploadCompressedTextureResource = {\n  id: \"compressed\",\n  upload(source, glTexture, gl) {\n    gl.pixelStorei(gl.UNPACK_ALIGNMENT, 4);\n    let mipWidth = source.pixelWidth;\n    let mipHeight = source.pixelHeight;\n    const compressed = !!compressedFormatMap[source.format];\n    for (let i = 0; i < source.resource.length; i++) {\n      const levelBuffer = source.resource[i];\n      if (compressed) {\n        gl.compressedTexImage2D(\n          gl.TEXTURE_2D,\n          i,\n          glTexture.internalFormat,\n          mipWidth,\n          mipHeight,\n          0,\n          levelBuffer\n        );\n      } else {\n        gl.texImage2D(\n          gl.TEXTURE_2D,\n          i,\n          glTexture.internalFormat,\n          mipWidth,\n          mipHeight,\n          0,\n          glTexture.format,\n          glTexture.type,\n          levelBuffer\n        );\n      }\n      mipWidth = Math.max(mipWidth >> 1, 1);\n      mipHeight = Math.max(mipHeight >> 1, 1);\n    }\n  }\n};\n\nexport { glUploadCompressedTextureResource };\n//# sourceMappingURL=glUploadCompressedTextureResource.mjs.map\n","\"use strict\";\nconst glUploadImageResource = {\n  id: \"image\",\n  upload(source, glTexture, gl, webGLVersion) {\n    const premultipliedAlpha = source.alphaMode === \"premultiply-alpha-on-upload\";\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, premultipliedAlpha);\n    const glWidth = glTexture.width;\n    const glHeight = glTexture.height;\n    const textureWidth = source.pixelWidth;\n    const textureHeight = source.pixelHeight;\n    const resourceWidth = source.resourceWidth;\n    const resourceHeight = source.resourceHeight;\n    if (resourceWidth < textureWidth || resourceHeight < textureHeight) {\n      if (glWidth !== textureWidth || glHeight !== textureHeight) {\n        gl.texImage2D(\n          glTexture.target,\n          0,\n          glTexture.internalFormat,\n          textureWidth,\n          textureHeight,\n          0,\n          glTexture.format,\n          glTexture.type,\n          null\n        );\n      }\n      if (webGLVersion === 2) {\n        gl.texSubImage2D(\n          gl.TEXTURE_2D,\n          0,\n          0,\n          0,\n          resourceWidth,\n          resourceHeight,\n          glTexture.format,\n          glTexture.type,\n          source.resource\n        );\n      } else {\n        gl.texSubImage2D(\n          gl.TEXTURE_2D,\n          0,\n          0,\n          0,\n          glTexture.format,\n          glTexture.type,\n          source.resource\n        );\n      }\n    } else if (glWidth === textureWidth || glHeight === textureHeight) {\n      gl.texSubImage2D(\n        gl.TEXTURE_2D,\n        0,\n        0,\n        0,\n        glTexture.format,\n        glTexture.type,\n        source.resource\n      );\n    } else if (webGLVersion === 2) {\n      gl.texImage2D(\n        glTexture.target,\n        0,\n        glTexture.internalFormat,\n        textureWidth,\n        textureHeight,\n        0,\n        glTexture.format,\n        glTexture.type,\n        source.resource\n      );\n    } else {\n      gl.texImage2D(\n        glTexture.target,\n        0,\n        glTexture.internalFormat,\n        glTexture.format,\n        glTexture.type,\n        source.resource\n      );\n    }\n    glTexture.width = textureWidth;\n    glTexture.height = textureHeight;\n  }\n};\n\nexport { glUploadImageResource };\n//# sourceMappingURL=glUploadImageResource.mjs.map\n","import { glUploadImageResource } from './glUploadImageResource.mjs';\n\n\"use strict\";\nconst glUploadVideoResource = {\n  id: \"video\",\n  upload(source, glTexture, gl, webGLVersion) {\n    if (!source.isValid) {\n      gl.texImage2D(\n        glTexture.target,\n        0,\n        glTexture.internalFormat,\n        1,\n        1,\n        0,\n        glTexture.format,\n        glTexture.type,\n        null\n      );\n      return;\n    }\n    glUploadImageResource.upload(source, glTexture, gl, webGLVersion);\n  }\n};\n\nexport { glUploadVideoResource };\n//# sourceMappingURL=glUploadVideoResource.mjs.map\n","\"use strict\";\nconst scaleModeToGlFilter = {\n  linear: 9729,\n  nearest: 9728\n};\nconst mipmapScaleModeToGlFilter = {\n  linear: {\n    linear: 9987,\n    nearest: 9985\n  },\n  nearest: {\n    linear: 9986,\n    nearest: 9984\n  }\n};\nconst wrapModeToGlAddress = {\n  \"clamp-to-edge\": 33071,\n  repeat: 10497,\n  \"mirror-repeat\": 33648\n};\nconst compareModeToGlCompare = {\n  never: 512,\n  less: 513,\n  equal: 514,\n  \"less-equal\": 515,\n  greater: 516,\n  \"not-equal\": 517,\n  \"greater-equal\": 518,\n  always: 519\n};\n\nexport { compareModeToGlCompare, mipmapScaleModeToGlFilter, scaleModeToGlFilter, wrapModeToGlAddress };\n//# sourceMappingURL=pixiToGlMaps.mjs.map\n","import { wrapModeToGlAddress, scaleModeToGlFilter, mipmapScaleModeToGlFilter, compareModeToGlCompare } from './pixiToGlMaps.mjs';\n\n\"use strict\";\nfunction applyStyleParams(style, gl, mipmaps, anisotropicExt, glFunctionName, firstParam, forceClamp, firstCreation) {\n  const castParam = firstParam;\n  if (!firstCreation || style.addressModeU !== \"repeat\" || style.addressModeV !== \"repeat\" || style.addressModeW !== \"repeat\") {\n    const wrapModeS = wrapModeToGlAddress[forceClamp ? \"clamp-to-edge\" : style.addressModeU];\n    const wrapModeT = wrapModeToGlAddress[forceClamp ? \"clamp-to-edge\" : style.addressModeV];\n    const wrapModeR = wrapModeToGlAddress[forceClamp ? \"clamp-to-edge\" : style.addressModeW];\n    gl[glFunctionName](castParam, gl.TEXTURE_WRAP_S, wrapModeS);\n    gl[glFunctionName](castParam, gl.TEXTURE_WRAP_T, wrapModeT);\n    if (gl.TEXTURE_WRAP_R)\n      gl[glFunctionName](castParam, gl.TEXTURE_WRAP_R, wrapModeR);\n  }\n  if (!firstCreation || style.magFilter !== \"linear\") {\n    gl[glFunctionName](castParam, gl.TEXTURE_MAG_FILTER, scaleModeToGlFilter[style.magFilter]);\n  }\n  if (mipmaps) {\n    if (!firstCreation || style.mipmapFilter !== \"linear\") {\n      const glFilterMode = mipmapScaleModeToGlFilter[style.minFilter][style.mipmapFilter];\n      gl[glFunctionName](castParam, gl.TEXTURE_MIN_FILTER, glFilterMode);\n    }\n  } else {\n    gl[glFunctionName](castParam, gl.TEXTURE_MIN_FILTER, scaleModeToGlFilter[style.minFilter]);\n  }\n  if (anisotropicExt && style.maxAnisotropy > 1) {\n    const level = Math.min(style.maxAnisotropy, gl.getParameter(anisotropicExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT));\n    gl[glFunctionName](castParam, anisotropicExt.TEXTURE_MAX_ANISOTROPY_EXT, level);\n  }\n  if (style.compare) {\n    gl[glFunctionName](castParam, gl.TEXTURE_COMPARE_FUNC, compareModeToGlCompare[style.compare]);\n  }\n}\n\nexport { applyStyleParams };\n//# sourceMappingURL=applyStyleParams.mjs.map\n","\"use strict\";\nfunction mapFormatToGlFormat(gl) {\n  return {\n    // 8-bit formats\n    r8unorm: gl.RED,\n    r8snorm: gl.RED,\n    r8uint: gl.RED,\n    r8sint: gl.RED,\n    // 16-bit formats\n    r16uint: gl.RED,\n    r16sint: gl.RED,\n    r16float: gl.RED,\n    rg8unorm: gl.RG,\n    rg8snorm: gl.RG,\n    rg8uint: gl.RG,\n    rg8sint: gl.RG,\n    // 32-bit formats\n    r32uint: gl.RED,\n    r32sint: gl.RED,\n    r32float: gl.RED,\n    rg16uint: gl.RG,\n    rg16sint: gl.RG,\n    rg16float: gl.RG,\n    rgba8unorm: gl.RGBA,\n    \"rgba8unorm-srgb\": gl.RGBA,\n    // Packed 32-bit formats\n    rgba8snorm: gl.RGBA,\n    rgba8uint: gl.RGBA,\n    rgba8sint: gl.RGBA,\n    bgra8unorm: gl.RGBA,\n    \"bgra8unorm-srgb\": gl.RGBA,\n    rgb9e5ufloat: gl.RGB,\n    rgb10a2unorm: gl.RGBA,\n    rg11b10ufloat: gl.RGB,\n    // 64-bit formats\n    rg32uint: gl.RG,\n    rg32sint: gl.RG,\n    rg32float: gl.RG,\n    rgba16uint: gl.RGBA,\n    rgba16sint: gl.RGBA,\n    rgba16float: gl.RGBA,\n    // 128-bit formats\n    rgba32uint: gl.RGBA,\n    rgba32sint: gl.RGBA,\n    rgba32float: gl.RGBA,\n    // Depth/stencil formats\n    stencil8: gl.STENCIL_INDEX8,\n    depth16unorm: gl.DEPTH_COMPONENT,\n    depth24plus: gl.DEPTH_COMPONENT,\n    \"depth24plus-stencil8\": gl.DEPTH_STENCIL,\n    depth32float: gl.DEPTH_COMPONENT,\n    \"depth32float-stencil8\": gl.DEPTH_STENCIL\n  };\n}\n\nexport { mapFormatToGlFormat };\n//# sourceMappingURL=mapFormatToGlFormat.mjs.map\n","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\n\n\"use strict\";\nfunction mapFormatToGlInternalFormat(gl, extensions) {\n  let srgb = {};\n  let bgra8unorm = gl.RGBA;\n  if (!(gl instanceof DOMAdapter.get().getWebGLRenderingContext())) {\n    srgb = {\n      \"rgba8unorm-srgb\": gl.SRGB8_ALPHA8,\n      \"bgra8unorm-srgb\": gl.SRGB8_ALPHA8\n    };\n    bgra8unorm = gl.RGBA8;\n  } else if (extensions.srgb) {\n    srgb = {\n      \"rgba8unorm-srgb\": extensions.srgb.SRGB8_ALPHA8_EXT,\n      \"bgra8unorm-srgb\": extensions.srgb.SRGB8_ALPHA8_EXT\n    };\n  }\n  return {\n    // 8-bit formats\n    r8unorm: gl.R8,\n    r8snorm: gl.R8_SNORM,\n    r8uint: gl.R8UI,\n    r8sint: gl.R8I,\n    // 16-bit formats\n    r16uint: gl.R16UI,\n    r16sint: gl.R16I,\n    r16float: gl.R16F,\n    rg8unorm: gl.RG8,\n    rg8snorm: gl.RG8_SNORM,\n    rg8uint: gl.RG8UI,\n    rg8sint: gl.RG8I,\n    // 32-bit formats\n    r32uint: gl.R32UI,\n    r32sint: gl.R32I,\n    r32float: gl.R32F,\n    rg16uint: gl.RG16UI,\n    rg16sint: gl.RG16I,\n    rg16float: gl.RG16F,\n    rgba8unorm: gl.RGBA,\n    ...srgb,\n    // Packed 32-bit formats\n    rgba8snorm: gl.RGBA8_SNORM,\n    rgba8uint: gl.RGBA8UI,\n    rgba8sint: gl.RGBA8I,\n    bgra8unorm,\n    rgb9e5ufloat: gl.RGB9_E5,\n    rgb10a2unorm: gl.RGB10_A2,\n    rg11b10ufloat: gl.R11F_G11F_B10F,\n    // 64-bit formats\n    rg32uint: gl.RG32UI,\n    rg32sint: gl.RG32I,\n    rg32float: gl.RG32F,\n    rgba16uint: gl.RGBA16UI,\n    rgba16sint: gl.RGBA16I,\n    rgba16float: gl.RGBA16F,\n    // 128-bit formats\n    rgba32uint: gl.RGBA32UI,\n    rgba32sint: gl.RGBA32I,\n    rgba32float: gl.RGBA32F,\n    // Depth/stencil formats\n    stencil8: gl.STENCIL_INDEX8,\n    depth16unorm: gl.DEPTH_COMPONENT16,\n    depth24plus: gl.DEPTH_COMPONENT24,\n    \"depth24plus-stencil8\": gl.DEPTH24_STENCIL8,\n    depth32float: gl.DEPTH_COMPONENT32F,\n    \"depth32float-stencil8\": gl.DEPTH32F_STENCIL8,\n    // Compressed formats\n    ...extensions.s3tc ? {\n      \"bc1-rgba-unorm\": extensions.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,\n      \"bc2-rgba-unorm\": extensions.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,\n      \"bc3-rgba-unorm\": extensions.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT\n    } : {},\n    ...extensions.s3tc_sRGB ? {\n      \"bc1-rgba-unorm-srgb\": extensions.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,\n      \"bc2-rgba-unorm-srgb\": extensions.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,\n      \"bc3-rgba-unorm-srgb\": extensions.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT\n    } : {},\n    ...extensions.rgtc ? {\n      \"bc4-r-unorm\": extensions.rgtc.COMPRESSED_RED_RGTC1_EXT,\n      \"bc4-r-snorm\": extensions.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,\n      \"bc5-rg-unorm\": extensions.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,\n      \"bc5-rg-snorm\": extensions.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT\n    } : {},\n    ...extensions.bptc ? {\n      \"bc6h-rgb-float\": extensions.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,\n      \"bc6h-rgb-ufloat\": extensions.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,\n      \"bc7-rgba-unorm\": extensions.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,\n      \"bc7-rgba-unorm-srgb\": extensions.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT\n    } : {},\n    ...extensions.etc ? {\n      \"etc2-rgb8unorm\": extensions.etc.COMPRESSED_RGB8_ETC2,\n      \"etc2-rgb8unorm-srgb\": extensions.etc.COMPRESSED_SRGB8_ETC2,\n      \"etc2-rgb8a1unorm\": extensions.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,\n      \"etc2-rgb8a1unorm-srgb\": extensions.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,\n      \"etc2-rgba8unorm\": extensions.etc.COMPRESSED_RGBA8_ETC2_EAC,\n      \"etc2-rgba8unorm-srgb\": extensions.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,\n      \"eac-r11unorm\": extensions.etc.COMPRESSED_R11_EAC,\n      // 'eac-r11snorm'\n      \"eac-rg11unorm\": extensions.etc.COMPRESSED_SIGNED_RG11_EAC\n      // 'eac-rg11snorm'\n    } : {},\n    ...extensions.astc ? {\n      \"astc-4x4-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,\n      \"astc-4x4-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,\n      \"astc-5x4-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,\n      \"astc-5x4-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,\n      \"astc-5x5-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,\n      \"astc-5x5-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,\n      \"astc-6x5-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,\n      \"astc-6x5-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,\n      \"astc-6x6-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,\n      \"astc-6x6-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,\n      \"astc-8x5-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,\n      \"astc-8x5-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,\n      \"astc-8x6-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,\n      \"astc-8x6-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,\n      \"astc-8x8-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,\n      \"astc-8x8-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,\n      \"astc-10x5-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,\n      \"astc-10x5-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,\n      \"astc-10x6-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,\n      \"astc-10x6-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,\n      \"astc-10x8-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,\n      \"astc-10x8-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,\n      \"astc-10x10-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,\n      \"astc-10x10-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,\n      \"astc-12x10-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,\n      \"astc-12x10-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,\n      \"astc-12x12-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,\n      \"astc-12x12-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR\n    } : {}\n  };\n}\n\nexport { mapFormatToGlInternalFormat };\n//# sourceMappingURL=mapFormatToGlInternalFormat.mjs.map\n","\"use strict\";\nfunction mapFormatToGlType(gl) {\n  return {\n    // 8-bit formats\n    r8unorm: gl.UNSIGNED_BYTE,\n    r8snorm: gl.BYTE,\n    r8uint: gl.UNSIGNED_BYTE,\n    r8sint: gl.BYTE,\n    // 16-bit formats\n    r16uint: gl.UNSIGNED_SHORT,\n    r16sint: gl.SHORT,\n    r16float: gl.HALF_FLOAT,\n    rg8unorm: gl.UNSIGNED_BYTE,\n    rg8snorm: gl.BYTE,\n    rg8uint: gl.UNSIGNED_BYTE,\n    rg8sint: gl.BYTE,\n    // 32-bit formats\n    r32uint: gl.UNSIGNED_INT,\n    r32sint: gl.INT,\n    r32float: gl.FLOAT,\n    rg16uint: gl.UNSIGNED_SHORT,\n    rg16sint: gl.SHORT,\n    rg16float: gl.HALF_FLOAT,\n    rgba8unorm: gl.UNSIGNED_BYTE,\n    \"rgba8unorm-srgb\": gl.UNSIGNED_BYTE,\n    // Packed 32-bit formats\n    rgba8snorm: gl.BYTE,\n    rgba8uint: gl.UNSIGNED_BYTE,\n    rgba8sint: gl.BYTE,\n    bgra8unorm: gl.UNSIGNED_BYTE,\n    \"bgra8unorm-srgb\": gl.UNSIGNED_BYTE,\n    rgb9e5ufloat: gl.UNSIGNED_INT_5_9_9_9_REV,\n    rgb10a2unorm: gl.UNSIGNED_INT_2_10_10_10_REV,\n    rg11b10ufloat: gl.UNSIGNED_INT_10F_11F_11F_REV,\n    // 64-bit formats\n    rg32uint: gl.UNSIGNED_INT,\n    rg32sint: gl.INT,\n    rg32float: gl.FLOAT,\n    rgba16uint: gl.UNSIGNED_SHORT,\n    rgba16sint: gl.SHORT,\n    rgba16float: gl.HALF_FLOAT,\n    // 128-bit formats\n    rgba32uint: gl.UNSIGNED_INT,\n    rgba32sint: gl.INT,\n    rgba32float: gl.FLOAT,\n    // Depth/stencil formats\n    stencil8: gl.UNSIGNED_BYTE,\n    depth16unorm: gl.UNSIGNED_SHORT,\n    depth24plus: gl.UNSIGNED_INT,\n    \"depth24plus-stencil8\": gl.UNSIGNED_INT_24_8,\n    depth32float: gl.FLOAT,\n    \"depth32float-stencil8\": gl.FLOAT_32_UNSIGNED_INT_24_8_REV\n  };\n}\n\nexport { mapFormatToGlType };\n//# sourceMappingURL=mapFormatToGlType.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { Texture } from '../../shared/texture/Texture.mjs';\nimport { GlTexture } from './GlTexture.mjs';\nimport { glUploadBufferImageResource } from './uploaders/glUploadBufferImageResource.mjs';\nimport { glUploadCompressedTextureResource } from './uploaders/glUploadCompressedTextureResource.mjs';\nimport { glUploadImageResource } from './uploaders/glUploadImageResource.mjs';\nimport { glUploadVideoResource } from './uploaders/glUploadVideoResource.mjs';\nimport { applyStyleParams } from './utils/applyStyleParams.mjs';\nimport { mapFormatToGlFormat } from './utils/mapFormatToGlFormat.mjs';\nimport { mapFormatToGlInternalFormat } from './utils/mapFormatToGlInternalFormat.mjs';\nimport { mapFormatToGlType } from './utils/mapFormatToGlType.mjs';\nimport './utils/unpremultiplyAlpha.mjs';\n\n\"use strict\";\nconst BYTES_PER_PIXEL = 4;\nclass GlTextureSystem {\n  constructor(renderer) {\n    this.managedTextures = [];\n    this._glTextures = /* @__PURE__ */ Object.create(null);\n    this._glSamplers = /* @__PURE__ */ Object.create(null);\n    this._boundTextures = [];\n    this._activeTextureLocation = -1;\n    this._boundSamplers = /* @__PURE__ */ Object.create(null);\n    this._uploads = {\n      image: glUploadImageResource,\n      buffer: glUploadBufferImageResource,\n      video: glUploadVideoResource,\n      compressed: glUploadCompressedTextureResource\n    };\n    // TODO - separate samplers will be a cool thing to add, but not right now!\n    this._useSeparateSamplers = false;\n    this._renderer = renderer;\n  }\n  contextChange(gl) {\n    this._gl = gl;\n    if (!this._mapFormatToInternalFormat) {\n      this._mapFormatToInternalFormat = mapFormatToGlInternalFormat(gl, this._renderer.context.extensions);\n      this._mapFormatToType = mapFormatToGlType(gl);\n      this._mapFormatToFormat = mapFormatToGlFormat(gl);\n    }\n    this._glTextures = /* @__PURE__ */ Object.create(null);\n    this._glSamplers = /* @__PURE__ */ Object.create(null);\n    this._boundSamplers = /* @__PURE__ */ Object.create(null);\n    for (let i = 0; i < 16; i++) {\n      this.bind(Texture.EMPTY, i);\n    }\n  }\n  initSource(source) {\n    this.bind(source);\n  }\n  bind(texture, location = 0) {\n    const source = texture.source;\n    if (texture) {\n      this.bindSource(source, location);\n      if (this._useSeparateSamplers) {\n        this._bindSampler(source.style, location);\n      }\n    } else {\n      this.bindSource(null, location);\n      if (this._useSeparateSamplers) {\n        this._bindSampler(null, location);\n      }\n    }\n  }\n  bindSource(source, location = 0) {\n    const gl = this._gl;\n    source._touched = this._renderer.textureGC.count;\n    if (this._boundTextures[location] !== source) {\n      this._boundTextures[location] = source;\n      this._activateLocation(location);\n      source = source || Texture.EMPTY.source;\n      const glTexture = this.getGlSource(source);\n      gl.bindTexture(glTexture.target, glTexture.texture);\n    }\n  }\n  _bindSampler(style, location = 0) {\n    const gl = this._gl;\n    if (!style) {\n      this._boundSamplers[location] = null;\n      gl.bindSampler(location, null);\n      return;\n    }\n    const sampler = this._getGlSampler(style);\n    if (this._boundSamplers[location] !== sampler) {\n      this._boundSamplers[location] = sampler;\n      gl.bindSampler(location, sampler);\n    }\n  }\n  unbind(texture) {\n    const source = texture.source;\n    const boundTextures = this._boundTextures;\n    const gl = this._gl;\n    for (let i = 0; i < boundTextures.length; i++) {\n      if (boundTextures[i] === source) {\n        this._activateLocation(i);\n        const glTexture = this.getGlSource(source);\n        gl.bindTexture(glTexture.target, null);\n        boundTextures[i] = null;\n      }\n    }\n  }\n  _activateLocation(location) {\n    if (this._activeTextureLocation !== location) {\n      this._activeTextureLocation = location;\n      this._gl.activeTexture(this._gl.TEXTURE0 + location);\n    }\n  }\n  _initSource(source) {\n    const gl = this._gl;\n    const glTexture = new GlTexture(gl.createTexture());\n    glTexture.type = this._mapFormatToType[source.format];\n    glTexture.internalFormat = this._mapFormatToInternalFormat[source.format];\n    glTexture.format = this._mapFormatToFormat[source.format];\n    if (source.autoGenerateMipmaps && (this._renderer.context.supports.nonPowOf2mipmaps || source.isPowerOfTwo)) {\n      const biggestDimension = Math.max(source.width, source.height);\n      source.mipLevelCount = Math.floor(Math.log2(biggestDimension)) + 1;\n    }\n    this._glTextures[source.uid] = glTexture;\n    if (!this.managedTextures.includes(source)) {\n      source.on(\"update\", this.onSourceUpdate, this);\n      source.on(\"resize\", this.onSourceUpdate, this);\n      source.on(\"styleChange\", this.onStyleChange, this);\n      source.on(\"destroy\", this.onSourceDestroy, this);\n      source.on(\"unload\", this.onSourceUnload, this);\n      source.on(\"updateMipmaps\", this.onUpdateMipmaps, this);\n      this.managedTextures.push(source);\n    }\n    this.onSourceUpdate(source);\n    this.updateStyle(source, false);\n    return glTexture;\n  }\n  onStyleChange(source) {\n    this.updateStyle(source, false);\n  }\n  updateStyle(source, firstCreation) {\n    const gl = this._gl;\n    const glTexture = this.getGlSource(source);\n    gl.bindTexture(gl.TEXTURE_2D, glTexture.texture);\n    this._boundTextures[this._activeTextureLocation] = source;\n    applyStyleParams(\n      source.style,\n      gl,\n      source.mipLevelCount > 1,\n      this._renderer.context.extensions.anisotropicFiltering,\n      \"texParameteri\",\n      gl.TEXTURE_2D,\n      // will force a clamp to edge if the texture is not a power of two\n      !this._renderer.context.supports.nonPowOf2wrapping && !source.isPowerOfTwo,\n      firstCreation\n    );\n  }\n  onSourceUnload(source) {\n    const glTexture = this._glTextures[source.uid];\n    if (!glTexture)\n      return;\n    this.unbind(source);\n    this._glTextures[source.uid] = null;\n    this._gl.deleteTexture(glTexture.texture);\n  }\n  onSourceUpdate(source) {\n    const gl = this._gl;\n    const glTexture = this.getGlSource(source);\n    gl.bindTexture(gl.TEXTURE_2D, glTexture.texture);\n    this._boundTextures[this._activeTextureLocation] = source;\n    if (this._uploads[source.uploadMethodId]) {\n      this._uploads[source.uploadMethodId].upload(source, glTexture, gl, this._renderer.context.webGLVersion);\n    } else {\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, source.pixelWidth, source.pixelHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n    }\n    if (source.autoGenerateMipmaps && source.mipLevelCount > 1) {\n      this.onUpdateMipmaps(source, false);\n    }\n  }\n  onUpdateMipmaps(source, bind = true) {\n    if (bind)\n      this.bindSource(source, 0);\n    const glTexture = this.getGlSource(source);\n    this._gl.generateMipmap(glTexture.target);\n  }\n  onSourceDestroy(source) {\n    source.off(\"destroy\", this.onSourceDestroy, this);\n    source.off(\"update\", this.onSourceUpdate, this);\n    source.off(\"resize\", this.onSourceUpdate, this);\n    source.off(\"unload\", this.onSourceUnload, this);\n    source.off(\"styleChange\", this.onStyleChange, this);\n    source.off(\"updateMipmaps\", this.onUpdateMipmaps, this);\n    this.managedTextures.splice(this.managedTextures.indexOf(source), 1);\n    this.onSourceUnload(source);\n  }\n  _initSampler(style) {\n    const gl = this._gl;\n    const glSampler = this._gl.createSampler();\n    this._glSamplers[style._resourceId] = glSampler;\n    applyStyleParams(\n      style,\n      gl,\n      this._boundTextures[this._activeTextureLocation].mipLevelCount > 1,\n      this._renderer.context.extensions.anisotropicFiltering,\n      \"samplerParameteri\",\n      glSampler,\n      false,\n      true\n    );\n    return this._glSamplers[style._resourceId];\n  }\n  _getGlSampler(sampler) {\n    return this._glSamplers[sampler._resourceId] || this._initSampler(sampler);\n  }\n  getGlSource(source) {\n    return this._glTextures[source.uid] || this._initSource(source);\n  }\n  generateCanvas(texture) {\n    const { pixels, width, height } = this.getPixels(texture);\n    const canvas = DOMAdapter.get().createCanvas();\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext(\"2d\");\n    if (ctx) {\n      const imageData = ctx.createImageData(width, height);\n      imageData.data.set(pixels);\n      ctx.putImageData(imageData, 0, 0);\n    }\n    return canvas;\n  }\n  getPixels(texture) {\n    const resolution = texture.source.resolution;\n    const frame = texture.frame;\n    const width = Math.max(Math.round(frame.width * resolution), 1);\n    const height = Math.max(Math.round(frame.height * resolution), 1);\n    const pixels = new Uint8Array(BYTES_PER_PIXEL * width * height);\n    const renderer = this._renderer;\n    const renderTarget = renderer.renderTarget.getRenderTarget(texture);\n    const glRenterTarget = renderer.renderTarget.getGpuRenderTarget(renderTarget);\n    const gl = renderer.gl;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, glRenterTarget.resolveTargetFramebuffer);\n    gl.readPixels(\n      Math.round(frame.x * resolution),\n      Math.round(frame.y * resolution),\n      width,\n      height,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      pixels\n    );\n    if (false) {\n      unpremultiplyAlpha(pixels);\n    }\n    return { pixels: new Uint8ClampedArray(pixels.buffer), width, height };\n  }\n  destroy() {\n    this.managedTextures.slice().forEach((source) => this.onSourceDestroy(source));\n    this.managedTextures = null;\n    this._renderer = null;\n  }\n}\n/** @ignore */\nGlTextureSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"texture\"\n};\n\nexport { GlTextureSystem };\n//# sourceMappingURL=GlTextureSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { MAX_TEXTURES } from '../../../rendering/batcher/shared/const.mjs';\nimport { compileHighShaderGlProgram } from '../../../rendering/high-shader/compileHighShaderToProgram.mjs';\nimport { colorBitGl } from '../../../rendering/high-shader/shader-bits/colorBit.mjs';\nimport { generateTextureBatchBitGl } from '../../../rendering/high-shader/shader-bits/generateTextureBatchBit.mjs';\nimport { localUniformBitGl } from '../../../rendering/high-shader/shader-bits/localUniformBit.mjs';\nimport { roundPixelsBitGl } from '../../../rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nimport { batchSamplersUniformGroup } from '../../../rendering/renderers/gl/shader/batchSamplersUniformGroup.mjs';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\n\n\"use strict\";\nclass GlGraphicsAdaptor {\n  init() {\n    const uniforms = new UniformGroup({\n      uColor: { value: new Float32Array([1, 1, 1, 1]), type: \"vec4<f32>\" },\n      uTransformMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uRound: { value: 0, type: \"f32\" }\n    });\n    const glProgram = compileHighShaderGlProgram({\n      name: \"graphics\",\n      bits: [\n        colorBitGl,\n        generateTextureBatchBitGl(MAX_TEXTURES),\n        localUniformBitGl,\n        roundPixelsBitGl\n      ]\n    });\n    this.shader = new Shader({\n      glProgram,\n      resources: {\n        localUniforms: uniforms,\n        batchSamplers: batchSamplersUniformGroup\n      }\n    });\n  }\n  execute(graphicsPipe, renderable) {\n    const context = renderable.context;\n    const shader = context.customShader || this.shader;\n    const renderer = graphicsPipe.renderer;\n    const contextSystem = renderer.graphicsContext;\n    const {\n      geometry,\n      instructions\n    } = contextSystem.getContextRenderData(context);\n    shader.groups[0] = renderer.globalUniforms.bindGroup;\n    renderer.state.set(graphicsPipe.state);\n    renderer.shader.bind(shader);\n    renderer.geometry.bind(geometry, shader.glProgram);\n    const batches = instructions.instructions;\n    for (let i = 0; i < instructions.instructionSize; i++) {\n      const batch = batches[i];\n      if (batch.size) {\n        for (let j = 0; j < batch.textures.textures.length; j++) {\n          renderer.texture.bind(batch.textures.textures[j], j);\n        }\n        renderer.geometry.draw(\"triangle-list\", batch.size, batch.start);\n      }\n    }\n  }\n  destroy() {\n    this.shader.destroy(true);\n    this.shader = null;\n  }\n}\n/** @ignore */\nGlGraphicsAdaptor.extension = {\n  type: [\n    ExtensionType.WebGLPipesAdaptor\n  ],\n  name: \"graphics\"\n};\n\nexport { GlGraphicsAdaptor };\n//# sourceMappingURL=GlGraphicsAdaptor.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { compileHighShaderGlProgram } from '../../../rendering/high-shader/compileHighShaderToProgram.mjs';\nimport { localUniformBitGl } from '../../../rendering/high-shader/shader-bits/localUniformBit.mjs';\nimport { roundPixelsBitGl } from '../../../rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nimport { textureBitGl } from '../../../rendering/high-shader/shader-bits/textureBit.mjs';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\n\n\"use strict\";\nclass GlMeshAdaptor {\n  init() {\n    const glProgram = compileHighShaderGlProgram({\n      name: \"mesh\",\n      bits: [\n        localUniformBitGl,\n        textureBitGl,\n        roundPixelsBitGl\n      ]\n    });\n    this._shader = new Shader({\n      glProgram,\n      resources: {\n        uTexture: Texture.EMPTY.source,\n        textureUniforms: {\n          uTextureMatrix: { type: \"mat3x3<f32>\", value: new Matrix() }\n        }\n      }\n    });\n  }\n  execute(meshPipe, mesh) {\n    const renderer = meshPipe.renderer;\n    let shader = mesh._shader;\n    if (!shader) {\n      shader = this._shader;\n      const texture = mesh.texture;\n      const source = texture.source;\n      shader.resources.uTexture = source;\n      shader.resources.uSampler = source.style;\n      shader.resources.textureUniforms.uniforms.uTextureMatrix = texture.textureMatrix.mapCoord;\n    } else if (!shader.glProgram) {\n      warn(\"Mesh shader has no glProgram\", mesh.shader);\n      return;\n    }\n    shader.groups[100] = renderer.globalUniforms.bindGroup;\n    shader.groups[101] = meshPipe.localUniformsBindGroup;\n    renderer.encoder.draw({\n      geometry: mesh._geometry,\n      shader,\n      state: mesh.state\n    });\n  }\n  destroy() {\n    this._shader.destroy(true);\n    this._shader = null;\n  }\n}\nGlMeshAdaptor.extension = {\n  type: [\n    ExtensionType.WebGLPipesAdaptor\n  ],\n  name: \"mesh\"\n};\n\nexport { GlMeshAdaptor };\n//# sourceMappingURL=GlMeshAdaptor.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass CustomRenderPipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  addRenderable(container, instructionSet) {\n    this._renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add(container);\n  }\n  execute(container) {\n    if (!container.isRenderable)\n      return;\n    container.render(this._renderer);\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\nCustomRenderPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"customRender\"\n};\n\nexport { CustomRenderPipe };\n//# sourceMappingURL=CustomRenderPipe.mjs.map\n","\"use strict\";\nfunction executeInstructions(renderGroup, renderer) {\n  const instructionSet = renderGroup.instructionSet;\n  const instructions = instructionSet.instructions;\n  for (let i = 0; i < instructionSet.instructionSize; i++) {\n    const instruction = instructions[i];\n    renderer[instruction.renderPipeId].execute(instruction);\n  }\n}\n\nexport { executeInstructions };\n//# sourceMappingURL=executeInstructions.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { executeInstructions } from './utils/executeInstructions.mjs';\n\n\"use strict\";\nclass RenderGroupPipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  addRenderGroup(renderGroup, instructionSet) {\n    this._renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add(renderGroup);\n  }\n  execute(renderGroup) {\n    if (!renderGroup.isRenderable)\n      return;\n    this._renderer.globalUniforms.push({\n      worldTransformMatrix: renderGroup.worldTransform,\n      worldColor: renderGroup.worldColorAlpha\n    });\n    executeInstructions(renderGroup, this._renderer.renderPipes);\n    this._renderer.globalUniforms.pop();\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\nRenderGroupPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"renderGroup\"\n};\n\nexport { RenderGroupPipe };\n//# sourceMappingURL=RenderGroupPipe.mjs.map\n","\"use strict\";\nfunction collectRenderGroups(renderGroup, out = []) {\n  out.push(renderGroup);\n  for (let i = 0; i < renderGroup.renderGroupChildren.length; i++) {\n    collectRenderGroups(renderGroup.renderGroupChildren[i], out);\n  }\n  return out;\n}\n\nexport { collectRenderGroups };\n//# sourceMappingURL=collectRenderGroups.mjs.map\n","\"use strict\";\nfunction mixHexColors(color1, color2, ratio) {\n  const r1 = color1 >> 16 & 255;\n  const g1 = color1 >> 8 & 255;\n  const b1 = color1 & 255;\n  const r2 = color2 >> 16 & 255;\n  const g2 = color2 >> 8 & 255;\n  const b2 = color2 & 255;\n  const r = r1 + (r2 - r1) * ratio;\n  const g = g1 + (g2 - g1) * ratio;\n  const b = b1 + (b2 - b1) * ratio;\n  return (r << 16) + (g << 8) + b;\n}\n\nexport { mixHexColors };\n//# sourceMappingURL=mixHexColors.mjs.map\n","import { mixHexColors } from './mixHexColors.mjs';\n\n\"use strict\";\nconst WHITE_BGR = 16777215;\nfunction mixColors(localBGRColor, parentBGRColor) {\n  if (localBGRColor === WHITE_BGR || parentBGRColor === WHITE_BGR) {\n    return localBGRColor + parentBGRColor - WHITE_BGR;\n  }\n  return mixHexColors(localBGRColor, parentBGRColor, 0.5);\n}\nfunction mixStandardAnd32BitColors(localColorRGB, localAlpha, parentColor) {\n  const parentAlpha = (parentColor >> 24 & 255) / 255;\n  const globalAlpha = localAlpha * parentAlpha * 255;\n  const localBGRColor = ((localColorRGB & 255) << 16) + (localColorRGB & 65280) + (localColorRGB >> 16 & 255);\n  const parentBGRColor = parentColor & 16777215;\n  let sharedBGRColor;\n  if (localBGRColor === WHITE_BGR || parentBGRColor === WHITE_BGR) {\n    sharedBGRColor = localBGRColor + parentBGRColor - WHITE_BGR;\n  } else {\n    sharedBGRColor = mixHexColors(localBGRColor, parentBGRColor, 0.5);\n  }\n  return sharedBGRColor + (globalAlpha << 24);\n}\n\nexport { mixColors, mixStandardAnd32BitColors };\n//# sourceMappingURL=mixColors.mjs.map\n","import { Container, UPDATE_COLOR, UPDATE_BLEND, UPDATE_VISIBLE } from '../Container.mjs';\nimport { mixColors } from './mixColors.mjs';\n\n\"use strict\";\nconst tempContainer = new Container();\nfunction updateRenderGroupTransforms(renderGroup, updateChildRenderGroups = false) {\n  updateRenderGroupTransform(renderGroup);\n  const childrenToUpdate = renderGroup.childrenToUpdate;\n  const updateTick = renderGroup.updateTick;\n  renderGroup.updateTick++;\n  for (const j in childrenToUpdate) {\n    const childrenAtDepth = childrenToUpdate[j];\n    const list = childrenAtDepth.list;\n    const index = childrenAtDepth.index;\n    for (let i = 0; i < index; i++) {\n      updateTransformAndChildren(list[i], updateTick, 0);\n    }\n    childrenAtDepth.index = 0;\n  }\n  if (updateChildRenderGroups) {\n    for (let i = 0; i < renderGroup.renderGroupChildren.length; i++) {\n      updateRenderGroupTransforms(renderGroup.renderGroupChildren[i], updateChildRenderGroups);\n    }\n  }\n}\nfunction updateRenderGroupTransform(renderGroup) {\n  const root = renderGroup.root;\n  let worldAlpha;\n  if (renderGroup.renderGroupParent) {\n    const renderGroupParent = renderGroup.renderGroupParent;\n    renderGroup.worldTransform.appendFrom(\n      root.relativeGroupTransform,\n      renderGroupParent.worldTransform\n    );\n    renderGroup.worldColor = mixColors(\n      root.groupColor,\n      renderGroupParent.worldColor\n    );\n    worldAlpha = root.groupAlpha * renderGroupParent.worldAlpha;\n  } else {\n    renderGroup.worldTransform.copyFrom(root.localTransform);\n    renderGroup.worldColor = root.localColor;\n    worldAlpha = root.localAlpha;\n  }\n  worldAlpha = worldAlpha < 0 ? 0 : worldAlpha > 1 ? 1 : worldAlpha;\n  renderGroup.worldAlpha = worldAlpha;\n  renderGroup.worldColorAlpha = renderGroup.worldColor + ((worldAlpha * 255 | 0) << 24);\n}\nfunction updateTransformAndChildren(container, updateTick, updateFlags) {\n  if (updateTick === container.updateTick)\n    return;\n  container.updateTick = updateTick;\n  container.didChange = false;\n  const localTransform = container.localTransform;\n  container.updateLocalTransform();\n  const parent = container.parent;\n  if (parent && !parent.isRenderGroupRoot) {\n    updateFlags = updateFlags | container._updateFlags;\n    container.relativeGroupTransform.appendFrom(\n      localTransform,\n      parent.relativeGroupTransform\n    );\n    if (updateFlags) {\n      updateColorBlendVisibility(container, parent, updateFlags);\n    }\n  } else {\n    updateFlags = container._updateFlags;\n    container.relativeGroupTransform.copyFrom(localTransform);\n    if (updateFlags) {\n      updateColorBlendVisibility(container, tempContainer, updateFlags);\n    }\n  }\n  if (!container.isRenderGroupRoot) {\n    const children = container.children;\n    const length = children.length;\n    for (let i = 0; i < length; i++) {\n      updateTransformAndChildren(children[i], updateTick, updateFlags);\n    }\n    const renderGroup = container.renderGroup;\n    if (container.renderPipeId && !renderGroup.structureDidChange) {\n      renderGroup.updateRenderable(container);\n    }\n  }\n}\nfunction updateColorBlendVisibility(container, parent, updateFlags) {\n  if (updateFlags & UPDATE_COLOR) {\n    container.groupColor = mixColors(\n      container.localColor,\n      parent.groupColor\n    );\n    let groupAlpha = container.localAlpha * parent.groupAlpha;\n    groupAlpha = groupAlpha < 0 ? 0 : groupAlpha > 1 ? 1 : groupAlpha;\n    container.groupAlpha = groupAlpha;\n    container.groupColorAlpha = container.groupColor + ((groupAlpha * 255 | 0) << 24);\n  }\n  if (updateFlags & UPDATE_BLEND) {\n    container.groupBlendMode = container.localBlendMode === \"inherit\" ? parent.groupBlendMode : container.localBlendMode;\n  }\n  if (updateFlags & UPDATE_VISIBLE) {\n    container.globalDisplayStatus = container.localDisplayStatus & parent.globalDisplayStatus;\n  }\n  container._updateFlags = 0;\n}\n\nexport { updateRenderGroupTransform, updateRenderGroupTransforms, updateTransformAndChildren };\n//# sourceMappingURL=updateRenderGroupTransforms.mjs.map\n","\"use strict\";\nfunction validateRenderables(renderGroup, renderPipes) {\n  const { list, index } = renderGroup.childrenRenderablesToUpdate;\n  let rebuildRequired = false;\n  for (let i = 0; i < index; i++) {\n    const container = list[i];\n    const renderable = container;\n    const pipe = renderPipes[renderable.renderPipeId];\n    rebuildRequired = pipe.validateRenderable(container);\n    if (rebuildRequired) {\n      break;\n    }\n  }\n  renderGroup.structureDidChange = rebuildRequired;\n  return rebuildRequired;\n}\n\nexport { validateRenderables };\n//# sourceMappingURL=validateRenderables.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { buildInstructions } from './utils/buildInstructions.mjs';\nimport { collectRenderGroups } from './utils/collectRenderGroups.mjs';\nimport { executeInstructions } from './utils/executeInstructions.mjs';\nimport { updateRenderGroupTransforms } from './utils/updateRenderGroupTransforms.mjs';\nimport { validateRenderables } from './utils/validateRenderables.mjs';\n\n\"use strict\";\nconst tempMatrix = new Matrix();\nclass RenderGroupSystem {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  render({ container, transform }) {\n    container.isRenderGroup = true;\n    const parent = container.parent;\n    const renderGroupParent = container.renderGroup.renderGroupParent;\n    container.parent = null;\n    container.renderGroup.renderGroupParent = null;\n    const renderer = this._renderer;\n    const renderGroups = collectRenderGroups(container.renderGroup, []);\n    let originalLocalTransform = tempMatrix;\n    if (transform) {\n      originalLocalTransform = originalLocalTransform.copyFrom(container.renderGroup.localTransform);\n      container.renderGroup.localTransform.copyFrom(transform);\n    }\n    const renderPipes = renderer.renderPipes;\n    for (let i = 0; i < renderGroups.length; i++) {\n      const renderGroup = renderGroups[i];\n      renderGroup.runOnRender();\n      renderGroup.instructionSet.renderPipes = renderPipes;\n      if (!renderGroup.structureDidChange) {\n        validateRenderables(renderGroup, renderPipes);\n      }\n      updateRenderGroupTransforms(renderGroup);\n      if (renderGroup.structureDidChange) {\n        renderGroup.structureDidChange = false;\n        buildInstructions(renderGroup, renderPipes);\n      } else {\n        updateRenderables(renderGroup);\n      }\n      renderGroup.childrenRenderablesToUpdate.index = 0;\n      renderer.renderPipes.batch.upload(renderGroup.instructionSet);\n    }\n    renderer.globalUniforms.start({\n      worldTransformMatrix: transform ? container.renderGroup.localTransform : container.renderGroup.worldTransform,\n      worldColor: container.renderGroup.worldColorAlpha\n    });\n    executeInstructions(container.renderGroup, renderPipes);\n    if (renderPipes.uniformBatch) {\n      renderPipes.uniformBatch.renderEnd();\n    }\n    if (transform) {\n      container.renderGroup.localTransform.copyFrom(originalLocalTransform);\n    }\n    container.parent = parent;\n    container.renderGroup.renderGroupParent = renderGroupParent;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nRenderGroupSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"renderGroup\"\n};\nfunction updateRenderables(renderGroup) {\n  const { list, index } = renderGroup.childrenRenderablesToUpdate;\n  for (let i = 0; i < index; i++) {\n    const container = list[i];\n    if (container.didViewUpdate) {\n      renderGroup.updateRenderable(container);\n    }\n  }\n}\n\nexport { RenderGroupSystem };\n//# sourceMappingURL=RenderGroupSystem.mjs.map\n","\"use strict\";\nclass BatchableSprite {\n  constructor() {\n    // batch specific..\n    this.vertexSize = 4;\n    this.indexSize = 6;\n    this.location = 0;\n    // location in the buffer\n    this.batcher = null;\n    this.batch = null;\n    this.roundPixels = 0;\n  }\n  get blendMode() {\n    return this.renderable.groupBlendMode;\n  }\n  packAttributes(float32View, uint32View, index, textureId) {\n    const sprite = this.renderable;\n    const texture = this.texture;\n    const wt = sprite.groupTransform;\n    const a = wt.a;\n    const b = wt.b;\n    const c = wt.c;\n    const d = wt.d;\n    const tx = wt.tx;\n    const ty = wt.ty;\n    const bounds = this.bounds;\n    const w0 = bounds.maxX;\n    const w1 = bounds.minX;\n    const h0 = bounds.maxY;\n    const h1 = bounds.minY;\n    const uvs = texture.uvs;\n    const argb = sprite.groupColorAlpha;\n    const textureIdAndRound = textureId << 16 | this.roundPixels & 65535;\n    float32View[index + 0] = a * w1 + c * h1 + tx;\n    float32View[index + 1] = d * h1 + b * w1 + ty;\n    float32View[index + 2] = uvs.x0;\n    float32View[index + 3] = uvs.y0;\n    uint32View[index + 4] = argb;\n    uint32View[index + 5] = textureIdAndRound;\n    float32View[index + 6] = a * w0 + c * h1 + tx;\n    float32View[index + 7] = d * h1 + b * w0 + ty;\n    float32View[index + 8] = uvs.x1;\n    float32View[index + 9] = uvs.y1;\n    uint32View[index + 10] = argb;\n    uint32View[index + 11] = textureIdAndRound;\n    float32View[index + 12] = a * w0 + c * h0 + tx;\n    float32View[index + 13] = d * h0 + b * w0 + ty;\n    float32View[index + 14] = uvs.x2;\n    float32View[index + 15] = uvs.y2;\n    uint32View[index + 16] = argb;\n    uint32View[index + 17] = textureIdAndRound;\n    float32View[index + 18] = a * w1 + c * h0 + tx;\n    float32View[index + 19] = d * h0 + b * w1 + ty;\n    float32View[index + 20] = uvs.x3;\n    float32View[index + 21] = uvs.y3;\n    uint32View[index + 22] = argb;\n    uint32View[index + 23] = textureIdAndRound;\n  }\n  packIndex(indexBuffer, index, indicesOffset) {\n    indexBuffer[index] = indicesOffset + 0;\n    indexBuffer[index + 1] = indicesOffset + 1;\n    indexBuffer[index + 2] = indicesOffset + 2;\n    indexBuffer[index + 3] = indicesOffset + 0;\n    indexBuffer[index + 4] = indicesOffset + 2;\n    indexBuffer[index + 5] = indicesOffset + 3;\n  }\n  reset() {\n    this.renderable = null;\n    this.texture = null;\n    this.batcher = null;\n    this.batch = null;\n    this.bounds = null;\n  }\n}\n\nexport { BatchableSprite };\n//# sourceMappingURL=BatchableSprite.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\nimport { BatchableSprite } from './BatchableSprite.mjs';\n\n\"use strict\";\nclass SpritePipe {\n  constructor(renderer) {\n    this._gpuSpriteHash = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n  }\n  addRenderable(sprite, _instructionSet) {\n    const gpuSprite = this._getGpuSprite(sprite);\n    if (sprite._didSpriteUpdate)\n      this._updateBatchableSprite(sprite, gpuSprite);\n    this._renderer.renderPipes.batch.addToBatch(gpuSprite);\n  }\n  updateRenderable(sprite) {\n    const gpuSprite = this._gpuSpriteHash[sprite.uid];\n    if (sprite._didSpriteUpdate)\n      this._updateBatchableSprite(sprite, gpuSprite);\n    gpuSprite.batcher.updateElement(gpuSprite);\n  }\n  validateRenderable(sprite) {\n    const texture = sprite._texture;\n    const gpuSprite = this._getGpuSprite(sprite);\n    if (gpuSprite.texture._source !== texture._source) {\n      return !gpuSprite.batcher.checkAndUpdateTexture(gpuSprite, texture);\n    }\n    return false;\n  }\n  destroyRenderable(sprite) {\n    const batchableSprite = this._gpuSpriteHash[sprite.uid];\n    BigPool.return(batchableSprite);\n    this._gpuSpriteHash[sprite.uid] = null;\n  }\n  _updateBatchableSprite(sprite, batchableSprite) {\n    sprite._didSpriteUpdate = false;\n    batchableSprite.bounds = sprite.bounds;\n    batchableSprite.texture = sprite._texture;\n  }\n  _getGpuSprite(sprite) {\n    return this._gpuSpriteHash[sprite.uid] || this._initGPUSprite(sprite);\n  }\n  _initGPUSprite(sprite) {\n    const batchableSprite = BigPool.get(BatchableSprite);\n    batchableSprite.renderable = sprite;\n    batchableSprite.texture = sprite._texture;\n    batchableSprite.bounds = sprite.bounds;\n    batchableSprite.roundPixels = this._renderer._roundPixels | sprite._roundPixels;\n    this._gpuSpriteHash[sprite.uid] = batchableSprite;\n    sprite._didSpriteUpdate = false;\n    sprite.on(\"destroyed\", () => {\n      this.destroyRenderable(sprite);\n    });\n    return batchableSprite;\n  }\n  destroy() {\n    for (const i in this._gpuSpriteHash) {\n      BigPool.return(this._gpuSpriteHash[i]);\n    }\n    this._gpuSpriteHash = null;\n    this._renderer = null;\n  }\n}\n/** @ignore */\nSpritePipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"sprite\"\n};\n\nexport { SpritePipe };\n//# sourceMappingURL=SpritePipe.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst _BackgroundSystem = class _BackgroundSystem {\n  constructor() {\n    this.clearBeforeRender = true;\n    this._backgroundColor = new Color(0);\n    this.color = this._backgroundColor;\n    this.alpha = 1;\n  }\n  /**\n   * initiates the background system\n   * @param options - the options for the background colors\n   */\n  init(options) {\n    options = { ..._BackgroundSystem.defaultOptions, ...options };\n    this.clearBeforeRender = options.clearBeforeRender;\n    this.color = options.background || options.backgroundColor || this._backgroundColor;\n    this.alpha = options.backgroundAlpha;\n    this._backgroundColor.setAlpha(options.backgroundAlpha);\n  }\n  /** The background color to fill if not transparent */\n  get color() {\n    return this._backgroundColor;\n  }\n  set color(value) {\n    this._backgroundColor.setValue(value);\n  }\n  /** The background color alpha. Setting this to 0 will make the canvas transparent. */\n  get alpha() {\n    return this._backgroundColor.alpha;\n  }\n  set alpha(value) {\n    this._backgroundColor.setAlpha(value);\n  }\n  /** The background color as an [R, G, B, A] array. */\n  get colorRgba() {\n    return this._backgroundColor.toArray();\n  }\n  /**\n   * destroys the background system\n   * @internal\n   * @ignore\n   */\n  destroy() {\n  }\n};\n/** @ignore */\n_BackgroundSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"background\",\n  priority: 0\n};\n/** default options used by the system */\n_BackgroundSystem.defaultOptions = {\n  /**\n   * {@link WebGLOptions.backgroundAlpha}\n   * @default 1\n   */\n  backgroundAlpha: 1,\n  /**\n   * {@link WebGLOptions.backgroundColor}\n   * @default 0x000000\n   */\n  backgroundColor: 0,\n  /**\n   * {@link WebGLOptions.clearBeforeRender}\n   * @default true\n   */\n  clearBeforeRender: true\n};\nlet BackgroundSystem = _BackgroundSystem;\n\nexport { BackgroundSystem };\n//# sourceMappingURL=BackgroundSystem.mjs.map\n","import { extensions, ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { FilterEffect } from '../../../../filters/FilterEffect.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nconst BLEND_MODE_FILTERS = {};\nextensions.handle(ExtensionType.BlendMode, (value) => {\n  if (!value.name) {\n    throw new Error(\"BlendMode extension must have a name property\");\n  }\n  BLEND_MODE_FILTERS[value.name] = value.ref;\n}, (value) => {\n  delete BLEND_MODE_FILTERS[value.name];\n});\nclass BlendModePipe {\n  constructor(renderer) {\n    this._isAdvanced = false;\n    this._filterHash = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n  }\n  /**\n   * This ensures that a blendMode switch is added to the instruction set if the blend mode has changed.\n   * @param renderable - The renderable we are adding to the instruction set\n   * @param blendMode - The blend mode of the renderable\n   * @param instructionSet - The instruction set we are adding to\n   */\n  setBlendMode(renderable, blendMode, instructionSet) {\n    if (this._activeBlendMode === blendMode) {\n      if (this._isAdvanced)\n        this._renderableList.push(renderable);\n      return;\n    }\n    this._activeBlendMode = blendMode;\n    if (this._isAdvanced) {\n      this._endAdvancedBlendMode(instructionSet);\n    }\n    this._isAdvanced = !!BLEND_MODE_FILTERS[blendMode];\n    if (this._isAdvanced) {\n      this._beginAdvancedBlendMode(instructionSet);\n      this._renderableList.push(renderable);\n    }\n  }\n  _beginAdvancedBlendMode(instructionSet) {\n    this._renderer.renderPipes.batch.break(instructionSet);\n    const blendMode = this._activeBlendMode;\n    if (!BLEND_MODE_FILTERS[blendMode]) {\n      warn(`Unable to assign BlendMode: '${blendMode}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);\n      return;\n    }\n    if (!this._filterHash[blendMode]) {\n      this._filterHash[blendMode] = new FilterEffect({\n        filters: [new BLEND_MODE_FILTERS[blendMode]()]\n      });\n    }\n    const instruction = {\n      renderPipeId: \"filter\",\n      action: \"pushFilter\",\n      renderables: [],\n      filterEffect: this._filterHash[blendMode],\n      canBundle: false\n    };\n    this._renderableList = instruction.renderables;\n    instructionSet.add(instruction);\n  }\n  _endAdvancedBlendMode(instructionSet) {\n    this._renderableList = null;\n    this._renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: \"filter\",\n      action: \"popFilter\",\n      canBundle: false\n    });\n  }\n  /**\n   * called when the instruction build process is starting this will reset internally to the default blend mode\n   * @internal\n   * @ignore\n   */\n  buildStart() {\n    this._isAdvanced = false;\n  }\n  /**\n   * called when the instruction build process is finished, ensuring that if there is an advanced blend mode\n   * active, we add the final render instructions added to the instruction set\n   * @param instructionSet - The instruction set we are adding to\n   * @internal\n   * @ignore\n   */\n  buildEnd(instructionSet) {\n    if (this._isAdvanced) {\n      this._endAdvancedBlendMode(instructionSet);\n    }\n  }\n  /**\n   * @internal\n   * @ignore\n   */\n  destroy() {\n    this._renderer = null;\n    this._renderableList = null;\n    for (const i in this._filterHash) {\n      this._filterHash[i].destroy();\n    }\n    this._filterHash = null;\n  }\n}\n/** @ignore */\nBlendModePipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"blendMode\"\n};\n\nexport { BlendModePipe };\n//# sourceMappingURL=BlendModePipe.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { Container } from '../../../../scene/container/Container.mjs';\nimport { Texture } from '../texture/Texture.mjs';\n\n\"use strict\";\nconst imageTypes = {\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  webp: \"image/webp\"\n};\nconst _ExtractSystem = class _ExtractSystem {\n  /** @param renderer - The renderer this System works for. */\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  _normalizeOptions(options, defaults = {}) {\n    if (options instanceof Container || options instanceof Texture) {\n      return {\n        target: options,\n        ...defaults\n      };\n    }\n    return {\n      ...defaults,\n      ...options\n    };\n  }\n  /**\n   * Will return a HTML Image of the target\n   * @param options - The options for creating the image, or the target to extract\n   * @returns - HTML Image of the target\n   */\n  async image(options) {\n    const image = new Image();\n    image.src = await this.base64(options);\n    return image;\n  }\n  /**\n   * Will return a base64 encoded string of this target. It works by calling\n   * `Extract.canvas` and then running toDataURL on that.\n   * @param options - The options for creating the image, or the target to extract\n   */\n  async base64(options) {\n    options = this._normalizeOptions(\n      options,\n      _ExtractSystem.defaultImageOptions\n    );\n    const { format, quality } = options;\n    const canvas = this.canvas(options);\n    if (canvas.toBlob !== void 0) {\n      return new Promise((resolve, reject) => {\n        canvas.toBlob((blob) => {\n          if (!blob) {\n            reject(new Error(\"ICanvas.toBlob failed!\"));\n            return;\n          }\n          const reader = new FileReader();\n          reader.onload = () => resolve(reader.result);\n          reader.onerror = reject;\n          reader.readAsDataURL(blob);\n        }, imageTypes[format], quality);\n      });\n    }\n    if (canvas.toDataURL !== void 0) {\n      return canvas.toDataURL(imageTypes[format], quality);\n    }\n    if (canvas.convertToBlob !== void 0) {\n      const blob = await canvas.convertToBlob({ type: imageTypes[format], quality });\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = reject;\n        reader.readAsDataURL(blob);\n      });\n    }\n    throw new Error(\"Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented\");\n  }\n  /**\n   * Creates a Canvas element, renders this target to it and then returns it.\n   * @param options - The options for creating the canvas, or the target to extract\n   * @returns - A Canvas element with the texture rendered on.\n   */\n  canvas(options) {\n    options = this._normalizeOptions(options);\n    const target = options.target;\n    const renderer = this._renderer;\n    if (target instanceof Texture) {\n      return renderer.texture.generateCanvas(target);\n    }\n    const texture = renderer.textureGenerator.generateTexture(options);\n    const canvas = renderer.texture.generateCanvas(texture);\n    texture.destroy();\n    return canvas;\n  }\n  /**\n   * Will return a one-dimensional array containing the pixel data of the entire texture in RGBA\n   * order, with integer values between 0 and 255 (included).\n   * @param options - The options for extracting the image, or the target to extract\n   * @returns - One-dimensional array containing the pixel data of the entire texture\n   */\n  pixels(options) {\n    options = this._normalizeOptions(options);\n    const target = options.target;\n    const renderer = this._renderer;\n    const texture = target instanceof Texture ? target : renderer.textureGenerator.generateTexture(options);\n    const pixelInfo = renderer.texture.getPixels(texture);\n    if (target instanceof Container) {\n      texture.destroy();\n    }\n    return pixelInfo;\n  }\n  /**\n   * Will return a texture of the target\n   * @param options - The options for creating the texture, or the target to extract\n   * @returns - A texture of the target\n   */\n  texture(options) {\n    options = this._normalizeOptions(options);\n    if (options.target instanceof Texture)\n      return options.target;\n    return this._renderer.textureGenerator.generateTexture(options);\n  }\n  /**\n   * Will extract a HTMLImage of the target and download it\n   * @param options - The options for downloading and extracting the image, or the target to extract\n   */\n  download(options) {\n    options = this._normalizeOptions(options);\n    const canvas = this.canvas(options);\n    const link = document.createElement(\"a\");\n    link.download = options.filename ?? \"image.png\";\n    link.href = canvas.toDataURL(\"image/png\");\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n  /**\n   * Logs the target to the console as an image. This is a useful way to debug what's happening in the renderer.\n   * @param options - The options for logging the image, or the target to log\n   */\n  log(options) {\n    const width = options.width ?? 200;\n    options = this._normalizeOptions(options);\n    const canvas = this.canvas(options);\n    const base64 = canvas.toDataURL();\n    console.log(`[Pixi Texture] ${canvas.width}px ${canvas.height}px`);\n    const style = [\n      \"font-size: 1px;\",\n      `padding: ${width}px ${300}px;`,\n      `background: url(${base64}) no-repeat;`,\n      \"background-size: contain;\"\n    ].join(\" \");\n    console.log(\"%c \", style);\n  }\n  destroy() {\n    this._renderer = null;\n  }\n};\n/** @ignore */\n_ExtractSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"extract\"\n};\n/** Default options for creating an image. */\n_ExtractSystem.defaultImageOptions = {\n  /** The format of the image. */\n  format: \"png\",\n  /** The quality of the image. */\n  quality: 1\n};\nlet ExtractSystem = _ExtractSystem;\n\nexport { ExtractSystem };\n//# sourceMappingURL=ExtractSystem.mjs.map\n","import { TextureSource } from './sources/TextureSource.mjs';\nimport { Texture } from './Texture.mjs';\n\n\"use strict\";\nclass RenderTexture extends Texture {\n  static create(options) {\n    return new Texture({\n      source: new TextureSource(options)\n    });\n  }\n  /**\n   * Resizes the render texture.\n   * @param width - The new width of the render texture.\n   * @param height - The new height of the render texture.\n   * @param resolution - The new resolution of the render texture.\n   * @returns This texture.\n   */\n  resize(width, height, resolution) {\n    this.source.resize(width, height, resolution);\n    return this;\n  }\n}\n\nexport { RenderTexture };\n//# sourceMappingURL=RenderTexture.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { Bounds } from '../../../../scene/container/bounds/Bounds.mjs';\nimport { getLocalBounds } from '../../../../scene/container/bounds/getLocalBounds.mjs';\nimport { Container } from '../../../../scene/container/Container.mjs';\nimport { RenderTexture } from '../texture/RenderTexture.mjs';\n\n\"use strict\";\nconst tempRect = new Rectangle();\nconst tempBounds = new Bounds();\nconst noColor = [0, 0, 0, 0];\nclass GenerateTextureSystem {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  /**\n   * A Useful function that returns a texture of the display object that can then be used to create sprites\n   * This can be quite useful if your container is complicated and needs to be reused multiple times.\n   * @param {GenerateTextureOptions | Container} options - Generate texture options.\n   * @param {Container} [options.container] - If not given, the renderer's resolution is used.\n   * @param {Rectangle} options.region - The region of the container, that shall be rendered,\n   * @param {number} [options.resolution] - The resolution of the texture being generated.\n   *        if no region is specified, defaults to the local bounds of the container.\n   * @param {GenerateTextureSourceOptions} [options.textureSourceOptions] - Texture options for GPU.\n   * @returns a shiny new texture of the container passed in\n   */\n  generateTexture(options) {\n    if (options instanceof Container) {\n      options = {\n        target: options,\n        frame: void 0,\n        textureSourceOptions: {},\n        resolution: void 0\n      };\n    }\n    const resolution = options.resolution || this._renderer.resolution;\n    const antialias = options.antialias || this._renderer.view.antialias;\n    const container = options.target;\n    let clearColor = options.clearColor;\n    if (clearColor) {\n      const isRGBAArray = Array.isArray(clearColor) && clearColor.length === 4;\n      clearColor = isRGBAArray ? clearColor : Color.shared.setValue(clearColor).toArray();\n    } else {\n      clearColor = noColor;\n    }\n    const region = options.frame?.copyTo(tempRect) || getLocalBounds(container, tempBounds).rectangle;\n    region.width = Math.max(region.width, 1 / resolution) | 0;\n    region.height = Math.max(region.height, 1 / resolution) | 0;\n    const target = RenderTexture.create({\n      ...options.textureSourceOptions,\n      width: region.width,\n      height: region.height,\n      resolution,\n      antialias\n    });\n    const transform = Matrix.shared.translate(-region.x, -region.y);\n    this._renderer.render({\n      container,\n      transform,\n      target,\n      clearColor\n    });\n    return target;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nGenerateTextureSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"textureGenerator\"\n};\n\nexport { GenerateTextureSystem };\n//# sourceMappingURL=GenerateTextureSystem.mjs.map\n","\"use strict\";\nfunction colorToUniform(rgb, alpha, out, offset) {\n  out[offset++] = (rgb >> 16 & 255) / 255;\n  out[offset++] = (rgb >> 8 & 255) / 255;\n  out[offset++] = (rgb & 255) / 255;\n  out[offset++] = alpha;\n}\nfunction color32BitToUniform(abgr, out, offset) {\n  const alpha = (abgr >> 24 & 255) / 255;\n  out[offset++] = (abgr & 255) / 255 * alpha;\n  out[offset++] = (abgr >> 8 & 255) / 255 * alpha;\n  out[offset++] = (abgr >> 16 & 255) / 255 * alpha;\n  out[offset++] = alpha;\n}\n\nexport { color32BitToUniform, colorToUniform };\n//# sourceMappingURL=colorToUniform.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Point } from '../../../../maths/point/Point.mjs';\nimport { color32BitToUniform } from '../../../../scene/graphics/gpu/colorToUniform.mjs';\nimport { BindGroup } from '../../gpu/shader/BindGroup.mjs';\nimport { RendererType } from '../../types.mjs';\nimport { UniformGroup } from '../shader/UniformGroup.mjs';\n\n\"use strict\";\nclass GlobalUniformSystem {\n  constructor(renderer) {\n    this._stackIndex = 0;\n    this._globalUniformDataStack = [];\n    this._uniformsPool = [];\n    this._activeUniforms = [];\n    this._bindGroupPool = [];\n    this._activeBindGroups = [];\n    this._renderer = renderer;\n  }\n  reset() {\n    this._stackIndex = 0;\n    for (let i = 0; i < this._activeUniforms.length; i++) {\n      this._uniformsPool.push(this._activeUniforms[i]);\n    }\n    for (let i = 0; i < this._activeBindGroups.length; i++) {\n      this._bindGroupPool.push(this._activeBindGroups[i]);\n    }\n    this._activeUniforms.length = 0;\n    this._activeBindGroups.length = 0;\n  }\n  start(options) {\n    this.reset();\n    this.push(options);\n  }\n  bind({\n    size,\n    projectionMatrix,\n    worldTransformMatrix,\n    worldColor,\n    offset\n  }) {\n    const renderTarget = this._renderer.renderTarget.renderTarget;\n    const currentGlobalUniformData = this._stackIndex ? this._globalUniformDataStack[this._stackIndex - 1] : {\n      projectionData: renderTarget,\n      worldTransformMatrix: new Matrix(),\n      worldColor: 4294967295,\n      offset: new Point()\n    };\n    const globalUniformData = {\n      projectionMatrix: projectionMatrix || this._renderer.renderTarget.projectionMatrix,\n      resolution: size || renderTarget.size,\n      worldTransformMatrix: worldTransformMatrix || currentGlobalUniformData.worldTransformMatrix,\n      worldColor: worldColor || currentGlobalUniformData.worldColor,\n      offset: offset || currentGlobalUniformData.offset,\n      bindGroup: null\n    };\n    const uniformGroup = this._uniformsPool.pop() || this._createUniforms();\n    this._activeUniforms.push(uniformGroup);\n    const uniforms = uniformGroup.uniforms;\n    uniforms.uProjectionMatrix = globalUniformData.projectionMatrix;\n    uniforms.uResolution = globalUniformData.resolution;\n    uniforms.uWorldTransformMatrix.copyFrom(globalUniformData.worldTransformMatrix);\n    uniforms.uWorldTransformMatrix.tx -= globalUniformData.offset.x;\n    uniforms.uWorldTransformMatrix.ty -= globalUniformData.offset.y;\n    color32BitToUniform(\n      globalUniformData.worldColor,\n      uniforms.uWorldColorAlpha,\n      0\n    );\n    uniformGroup.update();\n    let bindGroup;\n    if (this._renderer.renderPipes.uniformBatch) {\n      bindGroup = this._renderer.renderPipes.uniformBatch.getUniformBindGroup(uniformGroup, false);\n    } else {\n      bindGroup = this._bindGroupPool.pop() || new BindGroup();\n      this._activeBindGroups.push(bindGroup);\n      bindGroup.setResource(uniformGroup, 0);\n    }\n    globalUniformData.bindGroup = bindGroup;\n    this._currentGlobalUniformData = globalUniformData;\n  }\n  push(options) {\n    this.bind(options);\n    this._globalUniformDataStack[this._stackIndex++] = this._currentGlobalUniformData;\n  }\n  pop() {\n    this._currentGlobalUniformData = this._globalUniformDataStack[--this._stackIndex - 1];\n    if (this._renderer.type === RendererType.WEBGL) {\n      this._currentGlobalUniformData.bindGroup.resources[0].update();\n    }\n  }\n  get bindGroup() {\n    return this._currentGlobalUniformData.bindGroup;\n  }\n  get uniformGroup() {\n    return this._currentGlobalUniformData.bindGroup.resources[0];\n  }\n  _createUniforms() {\n    const globalUniforms = new UniformGroup({\n      uProjectionMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uWorldTransformMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      // TODO - someone smart - set this to be a unorm8x4 rather than a vec4<f32>\n      uWorldColorAlpha: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uResolution: { value: [0, 0], type: \"vec2<f32>\" }\n    }, {\n      isStatic: true\n    });\n    return globalUniforms;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nGlobalUniformSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"globalUniforms\"\n};\n\nexport { GlobalUniformSystem };\n//# sourceMappingURL=GlobalUniformSystem.mjs.map\n","import { DOMAdapter } from '../environment/adapter.mjs';\n\n\"use strict\";\nlet saidHello = false;\nconst VERSION = \"8.1.1\";\nfunction sayHello(type) {\n  if (saidHello) {\n    return;\n  }\n  if (DOMAdapter.get().getNavigator().userAgent.toLowerCase().indexOf(\"chrome\") > -1) {\n    const args = [\n      `%c  %c  %c  %c  %c PixiJS %c v${VERSION} (${type}) http://www.pixijs.com/\n\n`,\n      \"background: #E72264; padding:5px 0;\",\n      \"background: #6CA2EA; padding:5px 0;\",\n      \"background: #B5D33D; padding:5px 0;\",\n      \"background: #FED23F; padding:5px 0;\",\n      \"color: #FFFFFF; background: #E72264; padding:5px 0;\",\n      \"color: #E72264; background: #FFFFFF; padding:5px 0;\"\n    ];\n    globalThis.console.log(...args);\n  } else if (globalThis.console) {\n    globalThis.console.log(`PixiJS ${VERSION} - ${type} - http://www.pixijs.com/`);\n  }\n  saidHello = true;\n}\n\nexport { VERSION, sayHello };\n//# sourceMappingURL=sayHello.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { sayHello } from '../../../../utils/sayHello.mjs';\nimport { RendererType } from '../../types.mjs';\n\n\"use strict\";\nclass HelloSystem {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  /**\n   * It all starts here! This initiates every system, passing in the options for any system by name.\n   * @param options - the config for the renderer and all its systems\n   */\n  init(options) {\n    if (options.hello) {\n      let name = this._renderer.name;\n      if (this._renderer.type === RendererType.WEBGL) {\n        name += ` ${this._renderer.context.webGLVersion}`;\n      }\n      sayHello(name);\n    }\n  }\n}\n/** @ignore */\nHelloSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"hello\",\n  priority: -2\n};\n/** The default options for the system. */\nHelloSystem.defaultOptions = {\n  /** {@link WebGLOptions.hello} */\n  hello: false\n};\n\nexport { HelloSystem };\n//# sourceMappingURL=HelloSystem.mjs.map\n","import { ExtensionType, extensions } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst _TextureGCSystem = class _TextureGCSystem {\n  /** @param renderer - The renderer this System works for. */\n  constructor(renderer) {\n    this._renderer = renderer;\n    this.count = 0;\n    this.checkCount = 0;\n  }\n  init(options) {\n    options = { ..._TextureGCSystem.defaultOptions, ...options };\n    this.checkCountMax = options.textureGCCheckCountMax;\n    this.maxIdle = options.textureGCAMaxIdle;\n    this.active = options.textureGCActive;\n  }\n  /**\n   * Checks to see when the last time a texture was used.\n   * If the texture has not been used for a specified amount of time, it will be removed from the GPU.\n   */\n  postrender() {\n    if (!this._renderer.renderingToScreen) {\n      return;\n    }\n    this.count++;\n    if (!this.active)\n      return;\n    this.checkCount++;\n    if (this.checkCount > this.checkCountMax) {\n      this.checkCount = 0;\n      this.run();\n    }\n  }\n  /**\n   * Checks to see when the last time a texture was used.\n   * If the texture has not been used for a specified amount of time, it will be removed from the GPU.\n   */\n  run() {\n    const managedTextures = this._renderer.texture.managedTextures;\n    for (let i = 0; i < managedTextures.length; i++) {\n      const texture = managedTextures[i];\n      if (texture.autoGarbageCollect && texture.resource && texture._touched > -1 && this.count - texture._touched > this.maxIdle) {\n        texture._touched = -1;\n        texture.unload();\n      }\n    }\n  }\n  destroy() {\n    this._renderer = null;\n  }\n};\n/** @ignore */\n_TextureGCSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"textureGC\"\n};\n/** default options for the TextureGCSystem */\n_TextureGCSystem.defaultOptions = {\n  /**\n   * If set to true, this will enable the garbage collector on the GPU.\n   * @default true\n   */\n  textureGCActive: true,\n  /**\n   * The maximum idle frames before a texture is destroyed by garbage collection.\n   * @default 60 * 60\n   */\n  textureGCAMaxIdle: 60 * 60,\n  /**\n   * Frames between two garbage collections.\n   * @default 600\n   */\n  textureGCCheckCountMax: 600\n};\nlet TextureGCSystem = _TextureGCSystem;\nextensions.add(TextureGCSystem);\n\nexport { TextureGCSystem };\n//# sourceMappingURL=TextureGCSystem.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\nimport { RenderTarget } from '../renderTarget/RenderTarget.mjs';\nimport { getCanvasTexture } from '../texture/utils/getCanvasTexture.mjs';\n\n\"use strict\";\nconst _ViewSystem = class _ViewSystem {\n  /** The resolution / device pixel ratio of the renderer. */\n  get resolution() {\n    return this.texture.source._resolution;\n  }\n  set resolution(value) {\n    this.texture.source.resize(\n      this.texture.source.width,\n      this.texture.source.height,\n      value\n    );\n  }\n  /**\n   * initiates the view system\n   * @param options - the options for the view\n   */\n  init(options) {\n    options = {\n      ..._ViewSystem.defaultOptions,\n      ...options\n    };\n    if (options.view) {\n      deprecation(v8_0_0, \"ViewSystem.view has been renamed to ViewSystem.canvas\");\n      options.canvas = options.view;\n    }\n    this.screen = new Rectangle(0, 0, options.width, options.height);\n    this.canvas = options.canvas || DOMAdapter.get().createCanvas();\n    this.antialias = !!options.antialias;\n    this.texture = getCanvasTexture(this.canvas, options);\n    this.renderTarget = new RenderTarget({\n      colorTextures: [this.texture],\n      depth: !!options.depth,\n      isRoot: true\n    });\n    this.texture.source.transparent = options.backgroundAlpha < 1;\n    this.multiView = !!options.multiView;\n    if (this.autoDensity) {\n      this.canvas.style.width = `${this.texture.width}px`;\n      this.canvas.style.height = `${this.texture.height}px`;\n    }\n    this.resolution = options.resolution;\n  }\n  /**\n   * Resizes the screen and canvas to the specified dimensions.\n   * @param desiredScreenWidth - The new width of the screen.\n   * @param desiredScreenHeight - The new height of the screen.\n   * @param resolution\n   */\n  resize(desiredScreenWidth, desiredScreenHeight, resolution) {\n    this.texture.source.resize(desiredScreenWidth, desiredScreenHeight, resolution);\n    this.screen.width = this.texture.frame.width;\n    this.screen.height = this.texture.frame.height;\n    if (this.autoDensity) {\n      this.canvas.style.width = `${desiredScreenWidth}px`;\n      this.canvas.style.height = `${desiredScreenHeight}px`;\n    }\n  }\n  /**\n   * Destroys this System and optionally removes the canvas from the dom.\n   * @param {options | false} options - The options for destroying the view, or \"false\".\n   * @param options.removeView - Whether to remove the view element from the DOM. Defaults to `false`.\n   */\n  destroy(options = false) {\n    const removeView = typeof options === \"boolean\" ? options : !!options?.removeView;\n    if (removeView && this.canvas.parentNode) {\n      this.canvas.parentNode.removeChild(this.canvas);\n    }\n  }\n};\n/** @ignore */\n_ViewSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"view\",\n  priority: 0\n};\n/** The default options for the view system. */\n_ViewSystem.defaultOptions = {\n  /**\n   * {@link WebGLOptions.width}\n   * @default 800\n   */\n  width: 800,\n  /**\n   * {@link WebGLOptions.height}\n   * @default 600\n   */\n  height: 600,\n  /**\n   * {@link WebGLOptions.autoDensity}\n   * @default false\n   */\n  autoDensity: false,\n  /**\n   * {@link WebGLOptions.antialias}\n   * @default false\n   */\n  antialias: false\n};\nlet ViewSystem = _ViewSystem;\n\nexport { ViewSystem };\n//# sourceMappingURL=ViewSystem.mjs.map\n","import { CustomRenderPipe } from '../../../../scene/container/CustomRenderPipe.mjs';\nimport { RenderGroupPipe } from '../../../../scene/container/RenderGroupPipe.mjs';\nimport { RenderGroupSystem } from '../../../../scene/container/RenderGroupSystem.mjs';\nimport { SpritePipe } from '../../../../scene/sprite/SpritePipe.mjs';\nimport { BatcherPipe } from '../../../batcher/shared/BatcherPipe.mjs';\nimport { AlphaMaskPipe } from '../../../mask/alpha/AlphaMaskPipe.mjs';\nimport { ColorMaskPipe } from '../../../mask/color/ColorMaskPipe.mjs';\nimport { StencilMaskPipe } from '../../../mask/stencil/StencilMaskPipe.mjs';\nimport { BackgroundSystem } from '../background/BackgroundSystem.mjs';\nimport { BlendModePipe } from '../blendModes/BlendModePipe.mjs';\nimport { ExtractSystem } from '../extract/ExtractSystem.mjs';\nimport { GenerateTextureSystem } from '../extract/GenerateTextureSystem.mjs';\nimport { GlobalUniformSystem } from '../renderTarget/GlobalUniformSystem.mjs';\nimport { HelloSystem } from '../startup/HelloSystem.mjs';\nimport { TextureGCSystem } from '../texture/TextureGCSystem.mjs';\nimport { ViewSystem } from '../view/ViewSystem.mjs';\n\n\"use strict\";\nconst SharedSystems = [\n  BackgroundSystem,\n  GlobalUniformSystem,\n  HelloSystem,\n  ViewSystem,\n  RenderGroupSystem,\n  TextureGCSystem,\n  GenerateTextureSystem,\n  ExtractSystem\n];\nconst SharedRenderPipes = [\n  BlendModePipe,\n  BatcherPipe,\n  SpritePipe,\n  RenderGroupPipe,\n  AlphaMaskPipe,\n  StencilMaskPipe,\n  ColorMaskPipe,\n  CustomRenderPipe\n];\n\nexport { SharedRenderPipes, SharedSystems };\n//# sourceMappingURL=SharedSystems.mjs.map\n","import { extensions, ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { GlGraphicsAdaptor } from '../../../scene/graphics/gl/GlGraphicsAdaptor.mjs';\nimport { GlMeshAdaptor } from '../../../scene/mesh/gl/GlMeshAdaptor.mjs';\nimport { GlBatchAdaptor } from '../../batcher/gl/GlBatchAdaptor.mjs';\nimport { AbstractRenderer } from '../shared/system/AbstractRenderer.mjs';\nimport { SharedSystems, SharedRenderPipes } from '../shared/system/SharedSystems.mjs';\nimport { RendererType } from '../types.mjs';\nimport { GlBufferSystem } from './buffer/GlBufferSystem.mjs';\nimport { GlContextSystem } from './context/GlContextSystem.mjs';\nimport { GlGeometrySystem } from './geometry/GlGeometrySystem.mjs';\nimport { GlBackBufferSystem } from './GlBackBufferSystem.mjs';\nimport { GlColorMaskSystem } from './GlColorMaskSystem.mjs';\nimport { GlEncoderSystem } from './GlEncoderSystem.mjs';\nimport { GlStencilSystem } from './GlStencilSystem.mjs';\nimport { GlUboSystem } from './GlUboSystem.mjs';\nimport { GlRenderTargetSystem } from './renderTarget/GlRenderTargetSystem.mjs';\nimport { GlShaderSystem } from './shader/GlShaderSystem.mjs';\nimport { GlUniformGroupSystem } from './shader/GlUniformGroupSystem.mjs';\nimport { GlStateSystem } from './state/GlStateSystem.mjs';\nimport { GlTextureSystem } from './texture/GlTextureSystem.mjs';\n\n\"use strict\";\nconst DefaultWebGLSystems = [\n  ...SharedSystems,\n  GlUboSystem,\n  GlBackBufferSystem,\n  GlContextSystem,\n  GlBufferSystem,\n  GlTextureSystem,\n  GlRenderTargetSystem,\n  GlGeometrySystem,\n  GlUniformGroupSystem,\n  GlShaderSystem,\n  GlEncoderSystem,\n  GlStateSystem,\n  GlStencilSystem,\n  GlColorMaskSystem\n];\nconst DefaultWebGLPipes = [...SharedRenderPipes];\nconst DefaultWebGLAdapters = [GlBatchAdaptor, GlMeshAdaptor, GlGraphicsAdaptor];\nconst systems = [];\nconst renderPipes = [];\nconst renderPipeAdaptors = [];\nextensions.handleByNamedList(ExtensionType.WebGLSystem, systems);\nextensions.handleByNamedList(ExtensionType.WebGLPipes, renderPipes);\nextensions.handleByNamedList(ExtensionType.WebGLPipesAdaptor, renderPipeAdaptors);\nextensions.add(...DefaultWebGLSystems, ...DefaultWebGLPipes, ...DefaultWebGLAdapters);\nclass WebGLRenderer extends AbstractRenderer {\n  constructor() {\n    const systemConfig = {\n      name: \"webgl\",\n      type: RendererType.WEBGL,\n      systems,\n      renderPipes,\n      renderPipeAdaptors\n    };\n    super(systemConfig);\n  }\n}\n\nexport { WebGLRenderer };\n//# sourceMappingURL=WebGLRenderer.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass BindGroupSystem {\n  constructor(renderer) {\n    this._hash = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n  }\n  contextChange(gpu) {\n    this._gpu = gpu;\n  }\n  getBindGroup(bindGroup, program, groupIndex) {\n    bindGroup._updateKey();\n    const gpuBindGroup = this._hash[bindGroup._key] || this._createBindGroup(bindGroup, program, groupIndex);\n    return gpuBindGroup;\n  }\n  _createBindGroup(group, program, groupIndex) {\n    const device = this._gpu.device;\n    const groupLayout = program.layout[groupIndex];\n    const entries = [];\n    const renderer = this._renderer;\n    for (const j in groupLayout) {\n      const resource = group.resources[j] ?? group.resources[groupLayout[j]];\n      let gpuResource;\n      if (resource._resourceType === \"uniformGroup\") {\n        const uniformGroup = resource;\n        renderer.ubo.updateUniformGroup(uniformGroup);\n        const buffer = uniformGroup.buffer;\n        gpuResource = {\n          buffer: renderer.buffer.getGPUBuffer(buffer),\n          offset: 0,\n          size: buffer.descriptor.size\n        };\n      } else if (resource._resourceType === \"buffer\") {\n        const buffer = resource;\n        gpuResource = {\n          buffer: renderer.buffer.getGPUBuffer(buffer),\n          offset: 0,\n          size: buffer.descriptor.size\n        };\n      } else if (resource._resourceType === \"bufferResource\") {\n        const bufferResource = resource;\n        gpuResource = {\n          buffer: renderer.buffer.getGPUBuffer(bufferResource.buffer),\n          offset: bufferResource.offset,\n          size: bufferResource.size\n        };\n      } else if (resource._resourceType === \"textureSampler\") {\n        const sampler = resource;\n        gpuResource = renderer.texture.getGpuSampler(sampler);\n      } else if (resource._resourceType === \"textureSource\") {\n        const texture = resource;\n        gpuResource = renderer.texture.getGpuSource(texture).createView({});\n      }\n      entries.push({\n        binding: groupLayout[j],\n        resource: gpuResource\n      });\n    }\n    const layout = renderer.shader.getProgramData(program).bindGroups[groupIndex];\n    const gpuBindGroup = device.createBindGroup({\n      layout,\n      entries\n    });\n    this._hash[group._key] = gpuBindGroup;\n    return gpuBindGroup;\n  }\n  destroy() {\n    for (const key of Object.keys(this._hash)) {\n      this._hash[key] = null;\n    }\n    this._hash = null;\n    this._renderer = null;\n  }\n}\n/** @ignore */\nBindGroupSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"bindGroup\"\n};\n\nexport { BindGroupSystem };\n//# sourceMappingURL=BindGroupSystem.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { fastCopy } from '../../shared/buffer/utils/fastCopy.mjs';\n\n\"use strict\";\nclass GpuBufferSystem {\n  constructor() {\n    this._gpuBuffers = /* @__PURE__ */ Object.create(null);\n    this._managedBuffers = [];\n  }\n  contextChange(gpu) {\n    this._gpu = gpu;\n  }\n  getGPUBuffer(buffer) {\n    return this._gpuBuffers[buffer.uid] || this.createGPUBuffer(buffer);\n  }\n  updateBuffer(buffer) {\n    const gpuBuffer = this._gpuBuffers[buffer.uid] || this.createGPUBuffer(buffer);\n    const data = buffer.data;\n    if (buffer._updateID && data) {\n      buffer._updateID = 0;\n      this._gpu.device.queue.writeBuffer(\n        gpuBuffer,\n        0,\n        data.buffer,\n        0,\n        // round to the nearest 4 bytes\n        (buffer._updateSize || data.byteLength) + 3 & ~3\n      );\n    }\n    return gpuBuffer;\n  }\n  /** dispose all WebGL resources of all managed buffers */\n  destroyAll() {\n    for (const id in this._gpuBuffers) {\n      this._gpuBuffers[id].destroy();\n    }\n    this._gpuBuffers = {};\n  }\n  createGPUBuffer(buffer) {\n    if (!this._gpuBuffers[buffer.uid]) {\n      buffer.on(\"update\", this.updateBuffer, this);\n      buffer.on(\"change\", this.onBufferChange, this);\n      buffer.on(\"destroy\", this.onBufferDestroy, this);\n    }\n    const gpuBuffer = this._gpu.device.createBuffer(buffer.descriptor);\n    buffer._updateID = 0;\n    if (buffer.data) {\n      fastCopy(buffer.data.buffer, gpuBuffer.getMappedRange());\n      gpuBuffer.unmap();\n    }\n    this._gpuBuffers[buffer.uid] = gpuBuffer;\n    this._managedBuffers.push(buffer);\n    return gpuBuffer;\n  }\n  onBufferChange(buffer) {\n    const gpuBuffer = this._gpuBuffers[buffer.uid];\n    gpuBuffer.destroy();\n    buffer._updateID = 0;\n    this._gpuBuffers[buffer.uid] = this.createGPUBuffer(buffer);\n  }\n  /**\n   * Disposes buffer\n   * @param buffer - buffer with data\n   */\n  onBufferDestroy(buffer) {\n    this._managedBuffers.splice(this._managedBuffers.indexOf(buffer), 1);\n    this._destroyBuffer(buffer);\n  }\n  destroy() {\n    this._managedBuffers.forEach((buffer) => this._destroyBuffer(buffer));\n    this._managedBuffers = null;\n    this._gpuBuffers = null;\n  }\n  _destroyBuffer(buffer) {\n    const gpuBuffer = this._gpuBuffers[buffer.uid];\n    gpuBuffer.destroy();\n    buffer.off(\"update\", this.updateBuffer, this);\n    buffer.off(\"change\", this.onBufferChange, this);\n    buffer.off(\"destroy\", this.onBufferDestroy, this);\n    this._gpuBuffers[buffer.uid] = null;\n  }\n}\n/** @ignore */\nGpuBufferSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"buffer\"\n};\n\nexport { GpuBufferSystem };\n//# sourceMappingURL=GpuBufferSystem.mjs.map\n","\"use strict\";\nclass UboBatch {\n  constructor({ minUniformOffsetAlignment }) {\n    this._minUniformOffsetAlignment = 256;\n    this.byteIndex = 0;\n    this._minUniformOffsetAlignment = minUniformOffsetAlignment;\n    this.data = new Float32Array(65535);\n  }\n  clear() {\n    this.byteIndex = 0;\n  }\n  addEmptyGroup(size) {\n    if (size > this._minUniformOffsetAlignment / 4) {\n      throw new Error(`UniformBufferBatch: array is too large: ${size * 4}`);\n    }\n    const start = this.byteIndex;\n    let newSize = start + size * 4;\n    newSize = Math.ceil(newSize / this._minUniformOffsetAlignment) * this._minUniformOffsetAlignment;\n    if (newSize > this.data.length * 4) {\n      throw new Error(\"UniformBufferBatch: ubo batch got too big\");\n    }\n    this.byteIndex = newSize;\n    return start;\n  }\n  addGroup(array) {\n    const offset = this.addEmptyGroup(array.length);\n    for (let i = 0; i < array.length; i++) {\n      this.data[offset / 4 + i] = array[i];\n    }\n    return offset;\n  }\n  destroy() {\n    this._buffer.destroy();\n    this._buffer = null;\n    this.data = null;\n  }\n}\n\nexport { UboBatch };\n//# sourceMappingURL=UboBatch.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass GpuColorMaskSystem {\n  constructor(renderer) {\n    this._colorMaskCache = 15;\n    this._renderer = renderer;\n  }\n  setMask(colorMask) {\n    if (this._colorMaskCache === colorMask)\n      return;\n    this._colorMaskCache = colorMask;\n    this._renderer.pipeline.setColorMask(colorMask);\n  }\n  destroy() {\n    this._renderer = null;\n    this._colorMaskCache = null;\n  }\n}\n/** @ignore */\nGpuColorMaskSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"colorMask\"\n};\n\nexport { GpuColorMaskSystem };\n//# sourceMappingURL=GpuColorMaskSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass GpuDeviceSystem {\n  /**\n   * @param {WebGPURenderer} renderer - The renderer this System works for.\n   */\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  async init(options) {\n    if (this._initPromise)\n      return this._initPromise;\n    this._initPromise = this._createDeviceAndAdaptor(options).then((gpu) => {\n      this.gpu = gpu;\n      this._renderer.runners.contextChange.emit(this.gpu);\n    });\n    return this._initPromise;\n  }\n  /**\n   * Handle the context change event\n   * @param gpu\n   */\n  contextChange(gpu) {\n    this._renderer.gpu = gpu;\n  }\n  /**\n   * Helper class to create a WebGL Context\n   * @param {object} options - An options object that gets passed in to the canvas element containing the\n   *    context attributes\n   * @see https://developer.mozilla.org/en/docs/Web/API/HTMLCanvasElement/getContext\n   * @returns {WebGLRenderingContext} the WebGL context\n   */\n  async _createDeviceAndAdaptor(options) {\n    const adapter = await navigator.gpu.requestAdapter({\n      powerPreference: options.powerPreference,\n      forceFallbackAdapter: options.forceFallbackAdapter\n    });\n    const requiredFeatures = [\n      \"texture-compression-bc\",\n      \"texture-compression-astc\",\n      \"texture-compression-etc2\"\n    ].filter((feature) => adapter.features.has(feature));\n    const device = await adapter.requestDevice({\n      requiredFeatures\n    });\n    return { adapter, device };\n  }\n  destroy() {\n    this.gpu = null;\n    this._renderer = null;\n  }\n}\n/** @ignore */\nGpuDeviceSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"device\"\n};\n/** The default options for the GpuDeviceSystem. */\nGpuDeviceSystem.defaultOptions = {\n  /**\n   * {@link WebGPUOptions.powerPreference}\n   * @default default\n   */\n  powerPreference: void 0,\n  /**\n   * Force the use of the fallback adapter\n   * @default false\n   */\n  forceFallbackAdapter: false\n};\n\nexport { GpuDeviceSystem };\n//# sourceMappingURL=GpuDeviceSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass GpuEncoderSystem {\n  constructor(renderer) {\n    this._boundBindGroup = /* @__PURE__ */ Object.create(null);\n    this._boundVertexBuffer = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n  }\n  renderStart() {\n    this.commandFinished = new Promise((resolve) => {\n      this._resolveCommandFinished = resolve;\n    });\n    this.commandEncoder = this._renderer.gpu.device.createCommandEncoder();\n  }\n  beginRenderPass(gpuRenderTarget) {\n    this.endRenderPass();\n    this._clearCache();\n    this.renderPassEncoder = this.commandEncoder.beginRenderPass(gpuRenderTarget.descriptor);\n  }\n  endRenderPass() {\n    if (this.renderPassEncoder) {\n      this.renderPassEncoder.end();\n    }\n    this.renderPassEncoder = null;\n  }\n  setViewport(viewport) {\n    this.renderPassEncoder.setViewport(viewport.x, viewport.y, viewport.width, viewport.height, 0, 1);\n  }\n  setPipelineFromGeometryProgramAndState(geometry, program, state, topology) {\n    const pipeline = this._renderer.pipeline.getPipeline(geometry, program, state, topology);\n    this.setPipeline(pipeline);\n  }\n  setPipeline(pipeline) {\n    if (this._boundPipeline === pipeline)\n      return;\n    this._boundPipeline = pipeline;\n    this.renderPassEncoder.setPipeline(pipeline);\n  }\n  _setVertexBuffer(index, buffer) {\n    if (this._boundVertexBuffer[index] === buffer)\n      return;\n    this._boundVertexBuffer[index] = buffer;\n    this.renderPassEncoder.setVertexBuffer(index, this._renderer.buffer.updateBuffer(buffer));\n  }\n  _setIndexBuffer(buffer) {\n    if (this._boundIndexBuffer === buffer)\n      return;\n    this._boundIndexBuffer = buffer;\n    const indexFormat = buffer.data.BYTES_PER_ELEMENT === 2 ? \"uint16\" : \"uint32\";\n    this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(buffer), indexFormat);\n  }\n  resetBindGroup(index) {\n    this._boundBindGroup[index] = null;\n  }\n  setBindGroup(index, bindGroup, program) {\n    if (this._boundBindGroup[index] === bindGroup)\n      return;\n    this._boundBindGroup[index] = bindGroup;\n    bindGroup._touch(this._renderer.textureGC.count);\n    const gpuBindGroup = this._renderer.bindGroup.getBindGroup(bindGroup, program, index);\n    this.renderPassEncoder.setBindGroup(index, gpuBindGroup);\n  }\n  setGeometry(geometry) {\n    for (const i in geometry.attributes) {\n      const attribute = geometry.attributes[i];\n      this._setVertexBuffer(attribute.location, attribute.buffer);\n    }\n    if (geometry.indexBuffer) {\n      this._setIndexBuffer(geometry.indexBuffer);\n    }\n  }\n  _setShaderBindGroups(shader, skipSync) {\n    for (const i in shader.groups) {\n      const bindGroup = shader.groups[i];\n      if (!skipSync) {\n        this._syncBindGroup(bindGroup);\n      }\n      this.setBindGroup(i, bindGroup, shader.gpuProgram);\n    }\n  }\n  _syncBindGroup(bindGroup) {\n    for (const j in bindGroup.resources) {\n      const resource = bindGroup.resources[j];\n      if (resource.isUniformGroup) {\n        this._renderer.ubo.updateUniformGroup(resource);\n      }\n    }\n  }\n  draw(options) {\n    const { geometry, shader, state, topology, size, start, instanceCount, skipSync } = options;\n    this.setPipelineFromGeometryProgramAndState(geometry, shader.gpuProgram, state, topology);\n    this.setGeometry(geometry);\n    this._setShaderBindGroups(shader, skipSync);\n    if (geometry.indexBuffer) {\n      this.renderPassEncoder.drawIndexed(\n        size || geometry.indexBuffer.data.length,\n        instanceCount || geometry.instanceCount,\n        start || 0\n      );\n    } else {\n      this.renderPassEncoder.draw(size || geometry.getSize(), instanceCount || geometry.instanceCount, start || 0);\n    }\n  }\n  finishRenderPass() {\n    if (this.renderPassEncoder) {\n      this.renderPassEncoder.end();\n      this.renderPassEncoder = null;\n    }\n  }\n  postrender() {\n    this.finishRenderPass();\n    this._gpu.device.queue.submit([this.commandEncoder.finish()]);\n    this._resolveCommandFinished();\n    this.commandEncoder = null;\n  }\n  // restores a render pass if finishRenderPass was called\n  // not optimised as really used for debugging!\n  // used when we want to stop drawing and log a texture..\n  restoreRenderPass() {\n    const descriptor = this._renderer.renderTarget.adaptor.getDescriptor(\n      this._renderer.renderTarget.renderTarget,\n      false,\n      [0, 0, 0, 1]\n    );\n    this.renderPassEncoder = this.commandEncoder.beginRenderPass(descriptor);\n    const boundPipeline = this._boundPipeline;\n    const boundVertexBuffer = { ...this._boundVertexBuffer };\n    const boundIndexBuffer = this._boundIndexBuffer;\n    const boundBindGroup = { ...this._boundBindGroup };\n    this._clearCache();\n    const viewport = this._renderer.renderTarget.viewport;\n    this.renderPassEncoder.setViewport(viewport.x, viewport.y, viewport.width, viewport.height, 0, 1);\n    this.setPipeline(boundPipeline);\n    for (const i in boundVertexBuffer) {\n      this._setVertexBuffer(i, boundVertexBuffer[i]);\n    }\n    for (const i in boundBindGroup) {\n      this.setBindGroup(i, boundBindGroup[i], null);\n    }\n    this._setIndexBuffer(boundIndexBuffer);\n  }\n  _clearCache() {\n    for (let i = 0; i < 16; i++) {\n      this._boundBindGroup[i] = null;\n      this._boundVertexBuffer[i] = null;\n    }\n    this._boundIndexBuffer = null;\n    this._boundPipeline = null;\n  }\n  destroy() {\n    this._renderer = null;\n    this._gpu = null;\n    this._boundBindGroup = null;\n    this._boundVertexBuffer = null;\n    this._boundIndexBuffer = null;\n    this._boundPipeline = null;\n  }\n  contextChange(gpu) {\n    this._gpu = gpu;\n  }\n}\n/** @ignore */\nGpuEncoderSystem.extension = {\n  type: [ExtensionType.WebGPUSystem],\n  name: \"encoder\",\n  priority: 1\n};\n\nexport { GpuEncoderSystem };\n//# sourceMappingURL=GpuEncoderSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { STENCIL_MODES } from '../shared/state/const.mjs';\n\n\"use strict\";\nclass GpuStencilSystem {\n  constructor(renderer) {\n    this._renderTargetStencilState = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n    renderer.renderTarget.onRenderTargetChange.add(this);\n  }\n  onRenderTargetChange(renderTarget) {\n    let stencilState = this._renderTargetStencilState[renderTarget.uid];\n    if (!stencilState) {\n      stencilState = this._renderTargetStencilState[renderTarget.uid] = {\n        stencilMode: STENCIL_MODES.DISABLED,\n        stencilReference: 0\n      };\n    }\n    this._activeRenderTarget = renderTarget;\n    this.setStencilMode(stencilState.stencilMode, stencilState.stencilReference);\n  }\n  setStencilMode(stencilMode, stencilReference) {\n    const stencilState = this._renderTargetStencilState[this._activeRenderTarget.uid];\n    stencilState.stencilMode = stencilMode;\n    stencilState.stencilReference = stencilReference;\n    const renderer = this._renderer;\n    renderer.pipeline.setStencilMode(stencilMode);\n    renderer.encoder.renderPassEncoder.setStencilReference(stencilReference);\n  }\n  destroy() {\n    this._renderer.renderTarget.onRenderTargetChange.remove(this);\n    this._renderer = null;\n    this._activeRenderTarget = null;\n    this._renderTargetStencilState = null;\n  }\n}\n/** @ignore */\nGpuStencilSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"stencil\"\n};\n\nexport { GpuStencilSystem };\n//# sourceMappingURL=GpuStencilSystem.mjs.map\n","\"use strict\";\nconst WGSL_ALIGN_SIZE_DATA = {\n  i32: { align: 4, size: 4 },\n  u32: { align: 4, size: 4 },\n  f32: { align: 4, size: 4 },\n  f16: { align: 2, size: 2 },\n  \"vec2<i32>\": { align: 8, size: 8 },\n  \"vec2<u32>\": { align: 8, size: 8 },\n  \"vec2<f32>\": { align: 8, size: 8 },\n  \"vec2<f16>\": { align: 4, size: 4 },\n  \"vec3<i32>\": { align: 16, size: 12 },\n  \"vec3<u32>\": { align: 16, size: 12 },\n  \"vec3<f32>\": { align: 16, size: 12 },\n  \"vec3<f16>\": { align: 8, size: 6 },\n  \"vec4<i32>\": { align: 16, size: 16 },\n  \"vec4<u32>\": { align: 16, size: 16 },\n  \"vec4<f32>\": { align: 16, size: 16 },\n  \"vec4<f16>\": { align: 8, size: 8 },\n  \"mat2x2<f32>\": { align: 8, size: 16 },\n  \"mat2x2<f16>\": { align: 4, size: 8 },\n  \"mat3x2<f32>\": { align: 8, size: 24 },\n  \"mat3x2<f16>\": { align: 4, size: 12 },\n  \"mat4x2<f32>\": { align: 8, size: 32 },\n  \"mat4x2<f16>\": { align: 4, size: 16 },\n  \"mat2x3<f32>\": { align: 16, size: 32 },\n  \"mat2x3<f16>\": { align: 8, size: 16 },\n  \"mat3x3<f32>\": { align: 16, size: 48 },\n  \"mat3x3<f16>\": { align: 8, size: 24 },\n  \"mat4x3<f32>\": { align: 16, size: 64 },\n  \"mat4x3<f16>\": { align: 8, size: 32 },\n  \"mat2x4<f32>\": { align: 16, size: 32 },\n  \"mat2x4<f16>\": { align: 8, size: 16 },\n  \"mat3x4<f32>\": { align: 16, size: 48 },\n  \"mat3x4<f16>\": { align: 8, size: 24 },\n  \"mat4x4<f32>\": { align: 16, size: 64 },\n  \"mat4x4<f16>\": { align: 8, size: 32 }\n};\nfunction createUboElementsWGSL(uniformData) {\n  const uboElements = uniformData.map((data) => ({\n    data,\n    offset: 0,\n    size: 0\n  }));\n  let offset = 0;\n  for (let i = 0; i < uboElements.length; i++) {\n    const uboElement = uboElements[i];\n    let size = WGSL_ALIGN_SIZE_DATA[uboElement.data.type].size;\n    const align = WGSL_ALIGN_SIZE_DATA[uboElement.data.type].align;\n    if (!WGSL_ALIGN_SIZE_DATA[uboElement.data.type]) {\n      throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${uboElement.data.type}`);\n    }\n    if (uboElement.data.size > 1) {\n      size = Math.max(size, align) * uboElement.data.size;\n    }\n    offset = Math.ceil(offset / align) * align;\n    uboElement.size = size;\n    uboElement.offset = offset;\n    offset += size;\n  }\n  offset = Math.ceil(offset / 16) * 16;\n  return { uboElements, size: offset };\n}\n\nexport { WGSL_ALIGN_SIZE_DATA, createUboElementsWGSL };\n//# sourceMappingURL=createUboElementsWGSL.mjs.map\n","import { WGSL_ALIGN_SIZE_DATA } from './createUboElementsWGSL.mjs';\n\n\"use strict\";\nfunction generateArraySyncWGSL(uboElement, offsetToAdd) {\n  const { size, align } = WGSL_ALIGN_SIZE_DATA[uboElement.data.type];\n  const remainder = (align - size) / 4;\n  return `\n         v = uv.${uboElement.data.name};\n         ${offsetToAdd !== 0 ? `offset += ${offsetToAdd};` : \"\"}\n\n         arrayOffset = offset;\n\n         t = 0;\n\n         for(var i=0; i < ${uboElement.data.size * (size / 4)}; i++)\n         {\n             for(var j = 0; j < ${size / 4}; j++)\n             {\n                 data[arrayOffset++] = v[t++];\n             }\n             ${remainder !== 0 ? `arrayOffset += ${remainder};` : \"\"}\n         }\n     `;\n}\n\nexport { generateArraySyncWGSL };\n//# sourceMappingURL=generateArraySyncWGSL.mjs.map\n","import { createUboSyncFunction } from '../../../shared/shader/utils/createUboSyncFunction.mjs';\nimport { uboSyncFunctionsWGSL } from '../../../shared/shader/utils/uboSyncFunctions.mjs';\nimport { generateArraySyncWGSL } from './generateArraySyncWGSL.mjs';\n\n\"use strict\";\nfunction createUboSyncFunctionWGSL(uboElements) {\n  return createUboSyncFunction(\n    uboElements,\n    \"uboWgsl\",\n    generateArraySyncWGSL,\n    uboSyncFunctionsWGSL\n  );\n}\n\nexport { createUboSyncFunctionWGSL };\n//# sourceMappingURL=createUboSyncFunctionWGSL.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { UboSystem } from '../shared/shader/UboSystem.mjs';\nimport { createUboElementsWGSL } from './shader/utils/createUboElementsWGSL.mjs';\nimport { createUboSyncFunctionWGSL } from './shader/utils/createUboSyncFunctionWGSL.mjs';\n\n\"use strict\";\nclass GpuUboSystem extends UboSystem {\n  constructor() {\n    super({\n      createUboElements: createUboElementsWGSL,\n      generateUboSync: createUboSyncFunctionWGSL\n    });\n  }\n}\n/** @ignore */\nGpuUboSystem.extension = {\n  type: [ExtensionType.WebGPUSystem],\n  name: \"ubo\"\n};\n\nexport { GpuUboSystem };\n//# sourceMappingURL=GpuUboSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Buffer } from '../shared/buffer/Buffer.mjs';\nimport { BufferResource } from '../shared/buffer/BufferResource.mjs';\nimport { BufferUsage } from '../shared/buffer/const.mjs';\nimport { UboBatch } from './buffer/UboBatch.mjs';\nimport { BindGroup } from './shader/BindGroup.mjs';\n\n\"use strict\";\nconst minUniformOffsetAlignment = 128;\nclass GpuUniformBatchPipe {\n  constructor(renderer) {\n    this._bindGroupHash = /* @__PURE__ */ Object.create(null);\n    // number of buffers..\n    this._buffers = [];\n    this._bindGroups = [];\n    this._bufferResources = [];\n    this._renderer = renderer;\n    this._batchBuffer = new UboBatch({ minUniformOffsetAlignment });\n    const totalBuffers = 256 / minUniformOffsetAlignment;\n    for (let i = 0; i < totalBuffers; i++) {\n      let usage = BufferUsage.UNIFORM | BufferUsage.COPY_DST;\n      if (i === 0)\n        usage |= BufferUsage.COPY_SRC;\n      this._buffers.push(new Buffer({\n        data: this._batchBuffer.data,\n        usage\n      }));\n    }\n  }\n  renderEnd() {\n    this._uploadBindGroups();\n    this._resetBindGroups();\n  }\n  _resetBindGroups() {\n    for (const i in this._bindGroupHash) {\n      this._bindGroupHash[i] = null;\n    }\n    this._batchBuffer.clear();\n  }\n  // just works for single bind groups for now\n  getUniformBindGroup(group, duplicate) {\n    if (!duplicate && this._bindGroupHash[group.uid]) {\n      return this._bindGroupHash[group.uid];\n    }\n    this._renderer.ubo.ensureUniformGroup(group);\n    const data = group.buffer.data;\n    const offset = this._batchBuffer.addEmptyGroup(data.length);\n    this._renderer.ubo.syncUniformGroup(group, this._batchBuffer.data, offset / 4);\n    this._bindGroupHash[group.uid] = this._getBindGroup(offset / minUniformOffsetAlignment);\n    return this._bindGroupHash[group.uid];\n  }\n  getUboResource(group) {\n    this._renderer.ubo.updateUniformGroup(group);\n    const data = group.buffer.data;\n    const offset = this._batchBuffer.addGroup(data);\n    return this._getBufferResource(offset / minUniformOffsetAlignment);\n  }\n  getArrayBindGroup(data) {\n    const offset = this._batchBuffer.addGroup(data);\n    return this._getBindGroup(offset / minUniformOffsetAlignment);\n  }\n  getArrayBufferResource(data) {\n    const offset = this._batchBuffer.addGroup(data);\n    const index = offset / minUniformOffsetAlignment;\n    return this._getBufferResource(index);\n  }\n  _getBufferResource(index) {\n    if (!this._bufferResources[index]) {\n      const buffer = this._buffers[index % 2];\n      this._bufferResources[index] = new BufferResource({\n        buffer,\n        offset: (index / 2 | 0) * 256,\n        size: minUniformOffsetAlignment\n      });\n    }\n    return this._bufferResources[index];\n  }\n  _getBindGroup(index) {\n    if (!this._bindGroups[index]) {\n      const bindGroup = new BindGroup({\n        0: this._getBufferResource(index)\n      });\n      this._bindGroups[index] = bindGroup;\n    }\n    return this._bindGroups[index];\n  }\n  _uploadBindGroups() {\n    const bufferSystem = this._renderer.buffer;\n    const firstBuffer = this._buffers[0];\n    firstBuffer.update(this._batchBuffer.byteIndex);\n    bufferSystem.updateBuffer(firstBuffer);\n    const commandEncoder = this._renderer.gpu.device.createCommandEncoder();\n    for (let i = 1; i < this._buffers.length; i++) {\n      const buffer = this._buffers[i];\n      commandEncoder.copyBufferToBuffer(\n        bufferSystem.getGPUBuffer(firstBuffer),\n        minUniformOffsetAlignment,\n        bufferSystem.getGPUBuffer(buffer),\n        0,\n        this._batchBuffer.byteIndex\n      );\n    }\n    this._renderer.gpu.device.queue.submit([commandEncoder.finish()]);\n  }\n  destroy() {\n    for (let i = 0; i < this._bindGroups.length; i++) {\n      this._bindGroups[i].destroy();\n    }\n    this._bindGroups = null;\n    this._bindGroupHash = null;\n    for (let i = 0; i < this._buffers.length; i++) {\n      this._buffers[i].destroy();\n    }\n    this._buffers = null;\n    for (let i = 0; i < this._bufferResources.length; i++) {\n      this._bufferResources[i].destroy();\n    }\n    this._bufferResources = null;\n    this._batchBuffer.destroy();\n    this._bindGroupHash = null;\n    this._renderer = null;\n  }\n}\n/** @ignore */\nGpuUniformBatchPipe.extension = {\n  type: [\n    ExtensionType.WebGPUPipes\n  ],\n  name: \"uniformBatch\"\n};\n\nexport { GpuUniformBatchPipe };\n//# sourceMappingURL=GpuUniformBatchPipe.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { ensureAttributes } from '../../gl/shader/program/ensureAttributes.mjs';\nimport { STENCIL_MODES } from '../../shared/state/const.mjs';\nimport { createIdFromString } from '../../shared/utils/createIdFromString.mjs';\nimport { GpuStencilModesToPixi } from '../state/GpuStencilModesToPixi.mjs';\n\n\"use strict\";\nconst topologyStringToId = {\n  \"point-list\": 0,\n  \"line-list\": 1,\n  \"line-strip\": 2,\n  \"triangle-list\": 3,\n  \"triangle-strip\": 4\n};\nfunction getGraphicsStateKey(geometryLayout, shaderKey, state, blendMode, topology) {\n  return geometryLayout << 24 | shaderKey << 16 | state << 10 | blendMode << 5 | topology;\n}\nfunction getGlobalStateKey(stencilStateId, multiSampleCount, colorMask, renderTarget) {\n  return colorMask << 6 | stencilStateId << 3 | renderTarget << 1 | multiSampleCount;\n}\nclass PipelineSystem {\n  constructor(renderer) {\n    this._moduleCache = /* @__PURE__ */ Object.create(null);\n    this._bufferLayoutsCache = /* @__PURE__ */ Object.create(null);\n    this._pipeCache = /* @__PURE__ */ Object.create(null);\n    this._pipeStateCaches = /* @__PURE__ */ Object.create(null);\n    this._colorMask = 15;\n    this._multisampleCount = 1;\n    this._renderer = renderer;\n  }\n  contextChange(gpu) {\n    this._gpu = gpu;\n    this.setStencilMode(STENCIL_MODES.DISABLED);\n    this._updatePipeHash();\n  }\n  setMultisampleCount(multisampleCount) {\n    if (this._multisampleCount === multisampleCount)\n      return;\n    this._multisampleCount = multisampleCount;\n    this._updatePipeHash();\n  }\n  setRenderTarget(renderTarget) {\n    this._multisampleCount = renderTarget.msaaSamples;\n    this._depthStencilAttachment = renderTarget.descriptor.depthStencilAttachment ? 1 : 0;\n    this._updatePipeHash();\n  }\n  setColorMask(colorMask) {\n    if (this._colorMask === colorMask)\n      return;\n    this._colorMask = colorMask;\n    this._updatePipeHash();\n  }\n  setStencilMode(stencilMode) {\n    if (this._stencilMode === stencilMode)\n      return;\n    this._stencilMode = stencilMode;\n    this._stencilState = GpuStencilModesToPixi[stencilMode];\n    this._updatePipeHash();\n  }\n  setPipeline(geometry, program, state, passEncoder) {\n    const pipeline = this.getPipeline(geometry, program, state);\n    passEncoder.setPipeline(pipeline);\n  }\n  getPipeline(geometry, program, state, topology) {\n    if (!geometry._layoutKey) {\n      ensureAttributes(geometry, program.attributeData);\n      this._generateBufferKey(geometry);\n    }\n    topology = topology || geometry.topology;\n    const key = getGraphicsStateKey(\n      geometry._layoutKey,\n      program._layoutKey,\n      state.data,\n      state._blendModeId,\n      topologyStringToId[topology]\n    );\n    if (this._pipeCache[key])\n      return this._pipeCache[key];\n    this._pipeCache[key] = this._createPipeline(geometry, program, state, topology);\n    return this._pipeCache[key];\n  }\n  _createPipeline(geometry, program, state, topology) {\n    const device = this._gpu.device;\n    const buffers = this._createVertexBufferLayouts(geometry);\n    const blendModes = this._renderer.state.getColorTargets(state);\n    blendModes[0].writeMask = this._stencilMode === STENCIL_MODES.RENDERING_MASK_ADD ? 0 : this._colorMask;\n    const layout = this._renderer.shader.getProgramData(program).pipeline;\n    const descriptor = {\n      // TODO later check if its helpful to create..\n      // layout,\n      vertex: {\n        module: this._getModule(program.vertex.source),\n        entryPoint: program.vertex.entryPoint,\n        // geometry..\n        buffers\n      },\n      fragment: {\n        module: this._getModule(program.fragment.source),\n        entryPoint: program.fragment.entryPoint,\n        targets: blendModes\n      },\n      primitive: {\n        topology,\n        cullMode: state.cullMode\n      },\n      layout,\n      multisample: {\n        count: this._multisampleCount\n      },\n      // depthStencil,\n      label: `PIXI Pipeline`\n    };\n    if (this._depthStencilAttachment) {\n      descriptor.depthStencil = {\n        ...this._stencilState,\n        format: \"depth24plus-stencil8\",\n        depthWriteEnabled: state.depthTest,\n        depthCompare: state.depthTest ? \"less\" : \"always\"\n      };\n    }\n    const pipeline = device.createRenderPipeline(descriptor);\n    return pipeline;\n  }\n  _getModule(code) {\n    return this._moduleCache[code] || this._createModule(code);\n  }\n  _createModule(code) {\n    const device = this._gpu.device;\n    this._moduleCache[code] = device.createShaderModule({\n      code\n    });\n    return this._moduleCache[code];\n  }\n  _generateBufferKey(geometry) {\n    const keyGen = [];\n    let index = 0;\n    const attributeKeys = Object.keys(geometry.attributes).sort();\n    for (let i = 0; i < attributeKeys.length; i++) {\n      const attribute = geometry.attributes[attributeKeys[i]];\n      keyGen[index++] = attribute.location;\n      keyGen[index++] = attribute.offset;\n      keyGen[index++] = attribute.format;\n      keyGen[index++] = attribute.stride;\n    }\n    const stringKey = keyGen.join(\"\");\n    geometry._layoutKey = createIdFromString(stringKey, \"geometry\");\n    return geometry._layoutKey;\n  }\n  _createVertexBufferLayouts(geometry) {\n    if (this._bufferLayoutsCache[geometry._layoutKey]) {\n      return this._bufferLayoutsCache[geometry._layoutKey];\n    }\n    const vertexBuffersLayout = [];\n    geometry.buffers.forEach((buffer) => {\n      const bufferEntry = {\n        arrayStride: 0,\n        stepMode: \"vertex\",\n        attributes: []\n      };\n      const bufferEntryAttributes = bufferEntry.attributes;\n      for (const i in geometry.attributes) {\n        const attribute = geometry.attributes[i];\n        if (attribute.buffer === buffer) {\n          bufferEntry.arrayStride = attribute.stride;\n          bufferEntry.stepMode = attribute.instance ? \"instance\" : \"vertex\";\n          bufferEntryAttributes.push({\n            shaderLocation: attribute.location,\n            offset: attribute.offset,\n            format: attribute.format\n          });\n        }\n      }\n      if (bufferEntryAttributes.length) {\n        vertexBuffersLayout.push(bufferEntry);\n      }\n    });\n    this._bufferLayoutsCache[geometry._layoutKey] = vertexBuffersLayout;\n    return vertexBuffersLayout;\n  }\n  _updatePipeHash() {\n    const key = getGlobalStateKey(\n      this._stencilMode,\n      this._multisampleCount,\n      this._colorMask,\n      this._depthStencilAttachment\n    );\n    if (!this._pipeStateCaches[key]) {\n      this._pipeStateCaches[key] = /* @__PURE__ */ Object.create(null);\n    }\n    this._pipeCache = this._pipeStateCaches[key];\n  }\n  destroy() {\n    this._renderer = null;\n    this._bufferLayoutsCache = null;\n  }\n}\n/** @ignore */\nPipelineSystem.extension = {\n  type: [ExtensionType.WebGPUSystem],\n  name: \"pipeline\"\n};\n\nexport { PipelineSystem };\n//# sourceMappingURL=PipelineSystem.mjs.map\n","\"use strict\";\nclass GpuRenderTarget {\n  constructor() {\n    this.contexts = [];\n    this.msaaTextures = [];\n    this.msaaSamples = 1;\n  }\n}\n\nexport { GpuRenderTarget };\n//# sourceMappingURL=GpuRenderTarget.mjs.map\n","import { CLEAR } from '../../gl/const.mjs';\nimport { CanvasSource } from '../../shared/texture/sources/CanvasSource.mjs';\nimport { TextureSource } from '../../shared/texture/sources/TextureSource.mjs';\nimport { GpuRenderTarget } from './GpuRenderTarget.mjs';\n\n\"use strict\";\nclass GpuRenderTargetAdaptor {\n  init(renderer, renderTargetSystem) {\n    this._renderer = renderer;\n    this._renderTargetSystem = renderTargetSystem;\n  }\n  copyToTexture(sourceRenderSurfaceTexture, destinationTexture, originSrc, size, originDest) {\n    const renderer = this._renderer;\n    const baseGpuTexture = this._getGpuColorTexture(\n      sourceRenderSurfaceTexture\n    );\n    const backGpuTexture = renderer.texture.getGpuSource(\n      destinationTexture.source\n    );\n    renderer.encoder.commandEncoder.copyTextureToTexture(\n      {\n        texture: baseGpuTexture,\n        origin: originSrc\n      },\n      {\n        texture: backGpuTexture,\n        origin: originDest\n      },\n      size\n    );\n    return destinationTexture;\n  }\n  startRenderPass(renderTarget, clear = true, clearColor, viewport) {\n    const renderTargetSystem = this._renderTargetSystem;\n    const gpuRenderTarget = renderTargetSystem.getGpuRenderTarget(renderTarget);\n    const descriptor = this.getDescriptor(renderTarget, clear, clearColor);\n    gpuRenderTarget.descriptor = descriptor;\n    this._renderer.pipeline.setRenderTarget(gpuRenderTarget);\n    this._renderer.encoder.beginRenderPass(gpuRenderTarget);\n    this._renderer.encoder.setViewport(viewport);\n  }\n  finishRenderPass() {\n    this._renderer.encoder.endRenderPass();\n  }\n  /**\n   * returns the gpu texture for the first color texture in the render target\n   * mainly used by the filter manager to get copy the texture for blending\n   * @param renderTarget\n   * @returns a gpu texture\n   */\n  _getGpuColorTexture(renderTarget) {\n    const gpuRenderTarget = this._renderTargetSystem.getGpuRenderTarget(renderTarget);\n    if (gpuRenderTarget.contexts[0]) {\n      return gpuRenderTarget.contexts[0].getCurrentTexture();\n    }\n    return this._renderer.texture.getGpuSource(\n      renderTarget.colorTextures[0].source\n    );\n  }\n  getDescriptor(renderTarget, clear, clearValue) {\n    if (typeof clear === \"boolean\") {\n      clear = clear ? CLEAR.ALL : CLEAR.NONE;\n    }\n    const renderTargetSystem = this._renderTargetSystem;\n    const gpuRenderTarget = renderTargetSystem.getGpuRenderTarget(renderTarget);\n    const colorAttachments = renderTarget.colorTextures.map(\n      (texture, i) => {\n        const context = gpuRenderTarget.contexts[i];\n        let view;\n        let resolveTarget;\n        if (context) {\n          const currentTexture = context.getCurrentTexture();\n          const canvasTextureView = currentTexture.createView();\n          view = canvasTextureView;\n        } else {\n          view = this._renderer.texture.getGpuSource(texture).createView({\n            mipLevelCount: 1\n          });\n        }\n        if (gpuRenderTarget.msaaTextures[i]) {\n          resolveTarget = view;\n          view = this._renderer.texture.getTextureView(\n            gpuRenderTarget.msaaTextures[i]\n          );\n        }\n        const loadOp = clear & CLEAR.COLOR ? \"clear\" : \"load\";\n        clearValue ?? (clearValue = renderTargetSystem.defaultClearColor);\n        return {\n          view,\n          resolveTarget,\n          clearValue,\n          storeOp: \"store\",\n          loadOp\n        };\n      }\n    );\n    let depthStencilAttachment;\n    if ((renderTarget.stencil || renderTarget.depth) && !renderTarget.depthStencilTexture) {\n      renderTarget.ensureDepthStencilTexture();\n      renderTarget.depthStencilTexture.source.sampleCount = gpuRenderTarget.msaa ? 4 : 1;\n    }\n    if (renderTarget.depthStencilTexture) {\n      const stencilLoadOp = clear & CLEAR.STENCIL ? \"clear\" : \"load\";\n      const depthLoadOp = clear & CLEAR.DEPTH ? \"clear\" : \"load\";\n      depthStencilAttachment = {\n        view: this._renderer.texture.getGpuSource(renderTarget.depthStencilTexture.source).createView(),\n        stencilStoreOp: \"store\",\n        stencilLoadOp,\n        depthClearValue: 1,\n        depthLoadOp,\n        depthStoreOp: \"store\"\n      };\n    }\n    const descriptor = {\n      colorAttachments,\n      depthStencilAttachment\n    };\n    return descriptor;\n  }\n  clear(renderTarget, clear = true, clearColor, viewport) {\n    if (!clear)\n      return;\n    const { gpu, encoder } = this._renderer;\n    const device = gpu.device;\n    const standAlone = encoder.commandEncoder === null;\n    if (standAlone) {\n      const commandEncoder = device.createCommandEncoder();\n      const renderPassDescriptor = this.getDescriptor(renderTarget, clear, clearColor);\n      const passEncoder = commandEncoder.beginRenderPass(renderPassDescriptor);\n      passEncoder.setViewport(viewport.x, viewport.y, viewport.width, viewport.height, 0, 1);\n      passEncoder.end();\n      const gpuCommands = commandEncoder.finish();\n      device.queue.submit([gpuCommands]);\n    } else {\n      this.startRenderPass(renderTarget, clear, clearColor, viewport);\n    }\n  }\n  initGpuRenderTarget(renderTarget) {\n    renderTarget.isRoot = true;\n    const gpuRenderTarget = new GpuRenderTarget();\n    renderTarget.colorTextures.forEach((colorTexture, i) => {\n      if (CanvasSource.test(colorTexture.resource)) {\n        const context = colorTexture.resource.getContext(\n          \"webgpu\"\n        );\n        const alphaMode = colorTexture.transparent ? \"premultiplied\" : \"opaque\";\n        try {\n          context.configure({\n            device: this._renderer.gpu.device,\n            // eslint-disable-next-line max-len\n            usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST | GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_SRC,\n            format: \"bgra8unorm\",\n            alphaMode\n          });\n        } catch (e) {\n          console.error(e);\n        }\n        gpuRenderTarget.contexts[i] = context;\n      }\n      gpuRenderTarget.msaa = colorTexture.source.antialias;\n      if (colorTexture.source.antialias) {\n        const msaaTexture = new TextureSource({\n          width: 0,\n          height: 0,\n          sampleCount: 4\n        });\n        gpuRenderTarget.msaaTextures[i] = msaaTexture;\n      }\n    });\n    if (gpuRenderTarget.msaa) {\n      gpuRenderTarget.msaaSamples = 4;\n      if (renderTarget.depthStencilTexture) {\n        renderTarget.depthStencilTexture.source.sampleCount = 4;\n      }\n    }\n    return gpuRenderTarget;\n  }\n  destroyGpuRenderTarget(gpuRenderTarget) {\n    gpuRenderTarget.contexts.forEach((context) => {\n      context.unconfigure();\n    });\n    gpuRenderTarget.msaaTextures.forEach((texture) => {\n      texture.destroy();\n    });\n    gpuRenderTarget.msaaTextures.length = 0;\n    gpuRenderTarget.contexts.length = 0;\n  }\n  ensureDepthStencilTexture(renderTarget) {\n    const gpuRenderTarget = this._renderTargetSystem.getGpuRenderTarget(renderTarget);\n    if (renderTarget.depthStencilTexture && gpuRenderTarget.msaa) {\n      renderTarget.depthStencilTexture.source.sampleCount = 4;\n    }\n  }\n  resizeGpuRenderTarget(renderTarget) {\n    const gpuRenderTarget = this._renderTargetSystem.getGpuRenderTarget(renderTarget);\n    gpuRenderTarget.width = renderTarget.width;\n    gpuRenderTarget.height = renderTarget.height;\n    if (gpuRenderTarget.msaa) {\n      renderTarget.colorTextures.forEach((colorTexture, i) => {\n        const msaaTexture = gpuRenderTarget.msaaTextures[i];\n        msaaTexture?.resize(\n          colorTexture.source.width,\n          colorTexture.source.height,\n          colorTexture.source._resolution\n        );\n      });\n    }\n  }\n}\n\nexport { GpuRenderTargetAdaptor };\n//# sourceMappingURL=GpuRenderTargetAdaptor.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { RenderTargetSystem } from '../../shared/renderTarget/RenderTargetSystem.mjs';\nimport { GpuRenderTargetAdaptor } from './GpuRenderTargetAdaptor.mjs';\n\n\"use strict\";\nclass GpuRenderTargetSystem extends RenderTargetSystem {\n  constructor(renderer) {\n    super(renderer);\n    this.adaptor = new GpuRenderTargetAdaptor();\n    this.adaptor.init(renderer, this);\n  }\n}\n/** @ignore */\nGpuRenderTargetSystem.extension = {\n  type: [ExtensionType.WebGPUSystem],\n  name: \"renderTarget\"\n};\n\nexport { GpuRenderTargetSystem };\n//# sourceMappingURL=GpuRenderTargetSystem.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass GpuShaderSystem {\n  constructor() {\n    this._gpuProgramData = /* @__PURE__ */ Object.create(null);\n  }\n  contextChange(gpu) {\n    this._gpu = gpu;\n  }\n  getProgramData(program) {\n    return this._gpuProgramData[program._layoutKey] || this._createGPUProgramData(program);\n  }\n  _createGPUProgramData(program) {\n    const device = this._gpu.device;\n    const bindGroups = program.gpuLayout.map((group) => device.createBindGroupLayout({ entries: group }));\n    const pipelineLayoutDesc = { bindGroupLayouts: bindGroups };\n    this._gpuProgramData[program._layoutKey] = {\n      bindGroups,\n      pipeline: device.createPipelineLayout(pipelineLayoutDesc)\n    };\n    return this._gpuProgramData[program._layoutKey];\n  }\n  destroy() {\n    this._gpu = null;\n    this._gpuProgramData = null;\n  }\n}\n/** @ignore */\nGpuShaderSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"shader\"\n};\n\nexport { GpuShaderSystem };\n//# sourceMappingURL=GpuShaderSystem.mjs.map\n","\"use strict\";\nconst GpuBlendModesToPixi = {};\nGpuBlendModesToPixi.normal = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi.add = {\n  alpha: {\n    srcFactor: \"src-alpha\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"one\",\n    dstFactor: \"one\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi.multiply = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"dst\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi.screen = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi.overlay = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi.none = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"zero\",\n    dstFactor: \"zero\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi[\"normal-npm\"] = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"src-alpha\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi[\"add-npm\"] = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"src-alpha\",\n    dstFactor: \"one\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi[\"screen-npm\"] = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"src-alpha\",\n    dstFactor: \"one-minus-src\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi.erase = {\n  alpha: {\n    srcFactor: \"zero\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"zero\",\n    dstFactor: \"one-minus-src\",\n    operation: \"add\"\n  }\n};\n\nexport { GpuBlendModesToPixi };\n//# sourceMappingURL=GpuBlendModesToPixi.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { State } from '../../shared/state/State.mjs';\nimport { GpuBlendModesToPixi } from './GpuBlendModesToPixi.mjs';\n\n\"use strict\";\nclass GpuStateSystem {\n  constructor() {\n    this.defaultState = new State();\n    this.defaultState.blend = true;\n  }\n  contextChange(gpu) {\n    this.gpu = gpu;\n  }\n  /**\n   * Gets the blend mode data for the current state\n   * @param state - The state to get the blend mode from\n   */\n  getColorTargets(state) {\n    const blend = GpuBlendModesToPixi[state.blendMode] || GpuBlendModesToPixi.normal;\n    return [\n      {\n        format: \"bgra8unorm\",\n        writeMask: 0,\n        blend\n      }\n    ];\n  }\n  destroy() {\n    this.gpu = null;\n  }\n}\n/** @ignore */\nGpuStateSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"state\"\n};\n\nexport { GpuStateSystem };\n//# sourceMappingURL=GpuStateSystem.mjs.map\n","\"use strict\";\nconst gpuUploadBufferImageResource = {\n  type: \"image\",\n  upload(source, gpuTexture, gpu) {\n    const resource = source.resource;\n    const total = (source.pixelWidth | 0) * (source.pixelHeight | 0);\n    const bytesPerPixel = resource.byteLength / total;\n    gpu.device.queue.writeTexture(\n      { texture: gpuTexture },\n      resource,\n      {\n        offset: 0,\n        rowsPerImage: source.pixelHeight,\n        bytesPerRow: source.pixelHeight * bytesPerPixel\n      },\n      {\n        width: source.pixelWidth,\n        height: source.pixelHeight,\n        depthOrArrayLayers: 1\n      }\n    );\n  }\n};\n\nexport { gpuUploadBufferImageResource };\n//# sourceMappingURL=gpuUploadBufferImageResource.mjs.map\n","\"use strict\";\nconst blockDataMap = {\n  \"bc1-rgba-unorm\": { blockBytes: 8, blockWidth: 4, blockHeight: 4 },\n  \"bc2-rgba-unorm\": { blockBytes: 16, blockWidth: 4, blockHeight: 4 },\n  \"bc3-rgba-unorm\": { blockBytes: 16, blockWidth: 4, blockHeight: 4 },\n  \"bc7-rgba-unorm\": { blockBytes: 16, blockWidth: 4, blockHeight: 4 },\n  \"etc1-rgb-unorm\": { blockBytes: 8, blockWidth: 4, blockHeight: 4 },\n  \"etc2-rgba8unorm\": { blockBytes: 16, blockWidth: 4, blockHeight: 4 },\n  \"astc-4x4-unorm\": { blockBytes: 16, blockWidth: 4, blockHeight: 4 }\n};\nconst defaultBlockData = { blockBytes: 4, blockWidth: 1, blockHeight: 1 };\nconst gpuUploadCompressedTextureResource = {\n  type: \"compressed\",\n  upload(source, gpuTexture, gpu) {\n    let mipWidth = source.pixelWidth;\n    let mipHeight = source.pixelHeight;\n    const blockData = blockDataMap[source.format] || defaultBlockData;\n    for (let i = 0; i < source.resource.length; i++) {\n      const levelBuffer = source.resource[i];\n      const bytesPerRow = Math.ceil(mipWidth / blockData.blockWidth) * blockData.blockBytes;\n      gpu.device.queue.writeTexture(\n        {\n          texture: gpuTexture,\n          mipLevel: i\n        },\n        levelBuffer,\n        {\n          offset: 0,\n          bytesPerRow\n        },\n        {\n          width: Math.ceil(mipWidth / blockData.blockWidth) * blockData.blockWidth,\n          height: Math.ceil(mipHeight / blockData.blockHeight) * blockData.blockHeight,\n          depthOrArrayLayers: 1\n        }\n      );\n      mipWidth = Math.max(mipWidth >> 1, 1);\n      mipHeight = Math.max(mipHeight >> 1, 1);\n    }\n  }\n};\n\nexport { blockDataMap, gpuUploadCompressedTextureResource };\n//# sourceMappingURL=gpuUploadCompressedTextureResource.mjs.map\n","\"use strict\";\nconst gpuUploadImageResource = {\n  type: \"image\",\n  upload(source, gpuTexture, gpu) {\n    const resource = source.resource;\n    if (!resource)\n      return;\n    const width = Math.min(gpuTexture.width, source.resourceWidth || source.pixelWidth);\n    const height = Math.min(gpuTexture.height, source.resourceHeight || source.pixelHeight);\n    const premultipliedAlpha = source.alphaMode === \"premultiply-alpha-on-upload\";\n    gpu.device.queue.copyExternalImageToTexture(\n      { source: resource },\n      { texture: gpuTexture, premultipliedAlpha },\n      {\n        width,\n        height\n      }\n    );\n  }\n};\n\nexport { gpuUploadImageResource };\n//# sourceMappingURL=gpuUploadImageSource.mjs.map\n","import { gpuUploadImageResource } from './gpuUploadImageSource.mjs';\n\n\"use strict\";\nconst gpuUploadVideoResource = {\n  type: \"video\",\n  upload(source, gpuTexture, gpu) {\n    gpuUploadImageResource.upload(source, gpuTexture, gpu);\n  }\n};\n\nexport { gpuUploadVideoResource };\n//# sourceMappingURL=gpuUploadVideoSource.mjs.map\n","\"use strict\";\nclass GpuMipmapGenerator {\n  constructor(device) {\n    this.device = device;\n    this.sampler = device.createSampler({ minFilter: \"linear\" });\n    this.pipelines = {};\n  }\n  _getMipmapPipeline(format) {\n    let pipeline = this.pipelines[format];\n    if (!pipeline) {\n      if (!this.mipmapShaderModule) {\n        this.mipmapShaderModule = this.device.createShaderModule({\n          code: (\n            /* wgsl */\n            `\n                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(\n                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));\n\n                        struct VertexOutput {\n                        @builtin(position) position : vec4<f32>,\n                        @location(0) texCoord : vec2<f32>,\n                        };\n\n                        @vertex\n                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {\n                        var output : VertexOutput;\n                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);\n                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);\n                        return output;\n                        }\n\n                        @group(0) @binding(0) var imgSampler : sampler;\n                        @group(0) @binding(1) var img : texture_2d<f32>;\n\n                        @fragment\n                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {\n                        return textureSample(img, imgSampler, texCoord);\n                        }\n                    `\n          )\n        });\n      }\n      pipeline = this.device.createRenderPipeline({\n        layout: \"auto\",\n        vertex: {\n          module: this.mipmapShaderModule,\n          entryPoint: \"vertexMain\"\n        },\n        fragment: {\n          module: this.mipmapShaderModule,\n          entryPoint: \"fragmentMain\",\n          targets: [{ format }]\n        }\n      });\n      this.pipelines[format] = pipeline;\n    }\n    return pipeline;\n  }\n  /**\n   * Generates mipmaps for the given GPUTexture from the data in level 0.\n   * @param {module:External.GPUTexture} texture - Texture to generate mipmaps for.\n   * @returns {module:External.GPUTexture} - The originally passed texture\n   */\n  generateMipmap(texture) {\n    const pipeline = this._getMipmapPipeline(texture.format);\n    if (texture.dimension === \"3d\" || texture.dimension === \"1d\") {\n      throw new Error(\"Generating mipmaps for non-2d textures is currently unsupported!\");\n    }\n    let mipTexture = texture;\n    const arrayLayerCount = texture.depthOrArrayLayers || 1;\n    const renderToSource = texture.usage & GPUTextureUsage.RENDER_ATTACHMENT;\n    if (!renderToSource) {\n      const mipTextureDescriptor = {\n        size: {\n          width: Math.ceil(texture.width / 2),\n          height: Math.ceil(texture.height / 2),\n          depthOrArrayLayers: arrayLayerCount\n        },\n        format: texture.format,\n        usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_SRC | GPUTextureUsage.RENDER_ATTACHMENT,\n        mipLevelCount: texture.mipLevelCount - 1\n      };\n      mipTexture = this.device.createTexture(mipTextureDescriptor);\n    }\n    const commandEncoder = this.device.createCommandEncoder({});\n    const bindGroupLayout = pipeline.getBindGroupLayout(0);\n    for (let arrayLayer = 0; arrayLayer < arrayLayerCount; ++arrayLayer) {\n      let srcView = texture.createView({\n        baseMipLevel: 0,\n        mipLevelCount: 1,\n        dimension: \"2d\",\n        baseArrayLayer: arrayLayer,\n        arrayLayerCount: 1\n      });\n      let dstMipLevel = renderToSource ? 1 : 0;\n      for (let i = 1; i < texture.mipLevelCount; ++i) {\n        const dstView = mipTexture.createView({\n          baseMipLevel: dstMipLevel++,\n          mipLevelCount: 1,\n          dimension: \"2d\",\n          baseArrayLayer: arrayLayer,\n          arrayLayerCount: 1\n        });\n        const passEncoder = commandEncoder.beginRenderPass({\n          colorAttachments: [{\n            view: dstView,\n            storeOp: \"store\",\n            loadOp: \"clear\",\n            clearValue: { r: 0, g: 0, b: 0, a: 0 }\n          }]\n        });\n        const bindGroup = this.device.createBindGroup({\n          layout: bindGroupLayout,\n          entries: [{\n            binding: 0,\n            resource: this.sampler\n          }, {\n            binding: 1,\n            resource: srcView\n          }]\n        });\n        passEncoder.setPipeline(pipeline);\n        passEncoder.setBindGroup(0, bindGroup);\n        passEncoder.draw(3, 1, 0, 0);\n        passEncoder.end();\n        srcView = dstView;\n      }\n    }\n    if (!renderToSource) {\n      const mipLevelSize = {\n        width: Math.ceil(texture.width / 2),\n        height: Math.ceil(texture.height / 2),\n        depthOrArrayLayers: arrayLayerCount\n      };\n      for (let i = 1; i < texture.mipLevelCount; ++i) {\n        commandEncoder.copyTextureToTexture({\n          texture: mipTexture,\n          mipLevel: i - 1\n        }, {\n          texture,\n          mipLevel: i\n        }, mipLevelSize);\n        mipLevelSize.width = Math.ceil(mipLevelSize.width / 2);\n        mipLevelSize.height = Math.ceil(mipLevelSize.height / 2);\n      }\n    }\n    this.device.queue.submit([commandEncoder.finish()]);\n    if (!renderToSource) {\n      mipTexture.destroy();\n    }\n    return texture;\n  }\n}\n\nexport { GpuMipmapGenerator };\n//# sourceMappingURL=GpuMipmapGenerator.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { CanvasPool } from '../../shared/texture/CanvasPool.mjs';\nimport { BindGroup } from '../shader/BindGroup.mjs';\nimport { gpuUploadBufferImageResource } from './uploaders/gpuUploadBufferImageResource.mjs';\nimport { gpuUploadCompressedTextureResource, blockDataMap } from './uploaders/gpuUploadCompressedTextureResource.mjs';\nimport { gpuUploadImageResource } from './uploaders/gpuUploadImageSource.mjs';\nimport { gpuUploadVideoResource } from './uploaders/gpuUploadVideoSource.mjs';\nimport { GpuMipmapGenerator } from './utils/GpuMipmapGenerator.mjs';\n\n\"use strict\";\nclass GpuTextureSystem {\n  constructor(renderer) {\n    this.managedTextures = [];\n    this._gpuSources = /* @__PURE__ */ Object.create(null);\n    this._gpuSamplers = /* @__PURE__ */ Object.create(null);\n    this._bindGroupHash = /* @__PURE__ */ Object.create(null);\n    this._textureViewHash = /* @__PURE__ */ Object.create(null);\n    this._uploads = {\n      image: gpuUploadImageResource,\n      buffer: gpuUploadBufferImageResource,\n      video: gpuUploadVideoResource,\n      compressed: gpuUploadCompressedTextureResource\n    };\n    this._renderer = renderer;\n  }\n  contextChange(gpu) {\n    this._gpu = gpu;\n  }\n  initSource(source) {\n    if (source.autoGenerateMipmaps) {\n      const biggestDimension = Math.max(source.pixelWidth, source.pixelHeight);\n      source.mipLevelCount = Math.floor(Math.log2(biggestDimension)) + 1;\n    }\n    let usage = GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST;\n    if (source.uploadMethodId !== \"compressed\") {\n      usage |= GPUTextureUsage.RENDER_ATTACHMENT;\n      usage |= GPUTextureUsage.COPY_SRC;\n    }\n    const blockData = blockDataMap[source.format] || { blockBytes: 4, blockWidth: 1, blockHeight: 1 };\n    const width = Math.ceil(source.pixelWidth / blockData.blockWidth) * blockData.blockWidth;\n    const height = Math.ceil(source.pixelHeight / blockData.blockHeight) * blockData.blockHeight;\n    const textureDescriptor = {\n      label: source.label,\n      size: { width, height },\n      format: source.format,\n      sampleCount: source.sampleCount,\n      mipLevelCount: source.mipLevelCount,\n      dimension: source.dimension,\n      usage\n    };\n    const gpuTexture = this._gpu.device.createTexture(textureDescriptor);\n    this._gpuSources[source.uid] = gpuTexture;\n    if (!this.managedTextures.includes(source)) {\n      source.on(\"update\", this.onSourceUpdate, this);\n      source.on(\"resize\", this.onSourceResize, this);\n      source.on(\"destroy\", this.onSourceDestroy, this);\n      source.on(\"unload\", this.onSourceUnload, this);\n      source.on(\"updateMipmaps\", this.onUpdateMipmaps, this);\n      this.managedTextures.push(source);\n    }\n    this.onSourceUpdate(source);\n    return gpuTexture;\n  }\n  onSourceUpdate(source) {\n    const gpuTexture = this.getGpuSource(source);\n    if (!gpuTexture)\n      return;\n    if (this._uploads[source.uploadMethodId]) {\n      this._uploads[source.uploadMethodId].upload(source, gpuTexture, this._gpu);\n    }\n    if (source.autoGenerateMipmaps && source.mipLevelCount > 1) {\n      this.onUpdateMipmaps(source);\n    }\n  }\n  onSourceUnload(source) {\n    const gpuTexture = this._gpuSources[source.uid];\n    if (gpuTexture) {\n      this._gpuSources[source.uid] = null;\n      gpuTexture.destroy();\n    }\n  }\n  onUpdateMipmaps(source) {\n    if (!this._mipmapGenerator) {\n      this._mipmapGenerator = new GpuMipmapGenerator(this._gpu.device);\n    }\n    const gpuTexture = this.getGpuSource(source);\n    this._mipmapGenerator.generateMipmap(gpuTexture);\n  }\n  onSourceDestroy(source) {\n    source.off(\"update\", this.onSourceUpdate, this);\n    source.off(\"unload\", this.onSourceUnload, this);\n    source.off(\"destroy\", this.onSourceDestroy, this);\n    source.off(\"resize\", this.onSourceResize, this);\n    source.off(\"updateMipmaps\", this.onUpdateMipmaps, this);\n    this.managedTextures.splice(this.managedTextures.indexOf(source), 1);\n    this.onSourceUnload(source);\n  }\n  onSourceResize(source) {\n    const gpuTexture = this._gpuSources[source.uid];\n    if (!gpuTexture) {\n      this.initSource(source);\n    } else if (gpuTexture.width !== source.pixelWidth || gpuTexture.height !== source.pixelHeight) {\n      this._textureViewHash[source.uid] = null;\n      this._bindGroupHash[source.uid] = null;\n      this.onSourceUnload(source);\n      this.initSource(source);\n    }\n  }\n  _initSampler(sampler) {\n    this._gpuSamplers[sampler._resourceId] = this._gpu.device.createSampler(sampler);\n    return this._gpuSamplers[sampler._resourceId];\n  }\n  getGpuSampler(sampler) {\n    return this._gpuSamplers[sampler._resourceId] || this._initSampler(sampler);\n  }\n  getGpuSource(source) {\n    return this._gpuSources[source.uid] || this.initSource(source);\n  }\n  getTextureBindGroup(texture) {\n    return this._bindGroupHash[texture.uid] ?? this._createTextureBindGroup(texture);\n  }\n  _createTextureBindGroup(texture) {\n    const source = texture.source;\n    const bindGroupId = source.uid;\n    this._bindGroupHash[bindGroupId] = new BindGroup({\n      0: source,\n      1: source.style\n    });\n    return this._bindGroupHash[bindGroupId];\n  }\n  getTextureView(texture) {\n    const source = texture.source;\n    return this._textureViewHash[source.uid] ?? this._createTextureView(source);\n  }\n  _createTextureView(texture) {\n    this._textureViewHash[texture.uid] = this.getGpuSource(texture).createView();\n    return this._textureViewHash[texture.uid];\n  }\n  generateCanvas(texture) {\n    const renderer = this._renderer;\n    const commandEncoder = renderer.gpu.device.createCommandEncoder();\n    const canvas = DOMAdapter.get().createCanvas();\n    canvas.width = texture.source.pixelWidth;\n    canvas.height = texture.source.pixelHeight;\n    const context = canvas.getContext(\"webgpu\");\n    context.configure({\n      device: renderer.gpu.device,\n      // eslint-disable-next-line max-len\n      usage: GPUTextureUsage.COPY_DST | GPUTextureUsage.COPY_SRC,\n      format: navigator.gpu.getPreferredCanvasFormat(),\n      alphaMode: \"premultiplied\"\n    });\n    commandEncoder.copyTextureToTexture({\n      texture: renderer.texture.getGpuSource(texture.source),\n      origin: {\n        x: 0,\n        y: 0\n      }\n    }, {\n      texture: context.getCurrentTexture()\n    }, {\n      width: canvas.width,\n      height: canvas.height\n    });\n    renderer.gpu.device.queue.submit([commandEncoder.finish()]);\n    return canvas;\n  }\n  getPixels(texture) {\n    const webGPUCanvas = this.generateCanvas(texture);\n    const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(webGPUCanvas.width, webGPUCanvas.height);\n    const context = canvasAndContext.context;\n    context.drawImage(webGPUCanvas, 0, 0);\n    const { width, height } = webGPUCanvas;\n    const imageData = context.getImageData(0, 0, width, height);\n    const pixels = new Uint8ClampedArray(imageData.data.buffer);\n    CanvasPool.returnCanvasAndContext(canvasAndContext);\n    return { pixels, width, height };\n  }\n  destroy() {\n    this.managedTextures.slice().forEach((source) => this.onSourceDestroy(source));\n    this.managedTextures = null;\n    for (const k of Object.keys(this._bindGroupHash)) {\n      const key = Number(k);\n      const bindGroup = this._bindGroupHash[key];\n      bindGroup?.destroy();\n      this._bindGroupHash[key] = null;\n    }\n    this._gpu = null;\n    this._mipmapGenerator = null;\n    this._gpuSources = null;\n    this._bindGroupHash = null;\n    this._textureViewHash = null;\n    this._gpuSamplers = null;\n  }\n}\n/** @ignore */\nGpuTextureSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"texture\"\n};\n\nexport { GpuTextureSystem };\n//# sourceMappingURL=GpuTextureSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { getTextureBatchBindGroup } from '../../../rendering/batcher/gpu/getTextureBatchBindGroup.mjs';\nimport { MAX_TEXTURES } from '../../../rendering/batcher/shared/const.mjs';\nimport { compileHighShaderGpuProgram } from '../../../rendering/high-shader/compileHighShaderToProgram.mjs';\nimport { colorBit } from '../../../rendering/high-shader/shader-bits/colorBit.mjs';\nimport { generateTextureBatchBit } from '../../../rendering/high-shader/shader-bits/generateTextureBatchBit.mjs';\nimport { localUniformBitGroup2 } from '../../../rendering/high-shader/shader-bits/localUniformBit.mjs';\nimport { roundPixelsBit } from '../../../rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\n\n\"use strict\";\nclass GpuGraphicsAdaptor {\n  init() {\n    const localUniforms = new UniformGroup({\n      uTransformMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uColor: { value: new Float32Array([1, 1, 1, 1]), type: \"vec4<f32>\" },\n      uRound: { value: 0, type: \"f32\" }\n    });\n    const gpuProgram = compileHighShaderGpuProgram({\n      name: \"graphics\",\n      bits: [\n        colorBit,\n        generateTextureBatchBit(MAX_TEXTURES),\n        localUniformBitGroup2,\n        roundPixelsBit\n      ]\n    });\n    this.shader = new Shader({\n      gpuProgram,\n      resources: {\n        // added on the fly!\n        localUniforms\n      }\n    });\n  }\n  execute(graphicsPipe, renderable) {\n    const context = renderable.context;\n    const shader = context.customShader || this.shader;\n    const renderer = graphicsPipe.renderer;\n    const contextSystem = renderer.graphicsContext;\n    const {\n      geometry,\n      instructions\n    } = contextSystem.getContextRenderData(context);\n    const encoder = renderer.encoder;\n    encoder.setPipelineFromGeometryProgramAndState(\n      geometry,\n      shader.gpuProgram,\n      graphicsPipe.state\n    );\n    encoder.setGeometry(geometry);\n    const globalUniformsBindGroup = renderer.globalUniforms.bindGroup;\n    encoder.setBindGroup(0, globalUniformsBindGroup, shader.gpuProgram);\n    const localBindGroup = renderer.renderPipes.uniformBatch.getUniformBindGroup(shader.resources.localUniforms, true);\n    encoder.setBindGroup(2, localBindGroup, shader.gpuProgram);\n    const batches = instructions.instructions;\n    for (let i = 0; i < instructions.instructionSize; i++) {\n      const batch = batches[i];\n      shader.groups[1] = batch.bindGroup;\n      if (!batch.gpuBindGroup) {\n        const textureBatch = batch.textures;\n        batch.bindGroup = getTextureBatchBindGroup(textureBatch.textures, textureBatch.count);\n        batch.gpuBindGroup = renderer.bindGroup.getBindGroup(\n          batch.bindGroup,\n          shader.gpuProgram,\n          1\n        );\n      }\n      encoder.setBindGroup(1, batch.bindGroup, shader.gpuProgram);\n      encoder.renderPassEncoder.drawIndexed(batch.size, 1, batch.start);\n    }\n  }\n  destroy() {\n    this.shader.destroy(true);\n    this.shader = null;\n  }\n}\n/** @ignore */\nGpuGraphicsAdaptor.extension = {\n  type: [\n    ExtensionType.WebGPUPipesAdaptor\n  ],\n  name: \"graphics\"\n};\n\nexport { GpuGraphicsAdaptor };\n//# sourceMappingURL=GpuGraphicsAdaptor.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { compileHighShaderGpuProgram } from '../../../rendering/high-shader/compileHighShaderToProgram.mjs';\nimport { localUniformBit } from '../../../rendering/high-shader/shader-bits/localUniformBit.mjs';\nimport { roundPixelsBit } from '../../../rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nimport { textureBit } from '../../../rendering/high-shader/shader-bits/textureBit.mjs';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\n\n\"use strict\";\nclass GpuMeshAdapter {\n  init() {\n    const gpuProgram = compileHighShaderGpuProgram({\n      name: \"mesh\",\n      bits: [\n        localUniformBit,\n        textureBit,\n        roundPixelsBit\n      ]\n    });\n    this._shader = new Shader({\n      gpuProgram,\n      resources: {\n        uTexture: Texture.EMPTY._source,\n        uSampler: Texture.EMPTY._source.style,\n        textureUniforms: {\n          uTextureMatrix: { type: \"mat3x3<f32>\", value: new Matrix() }\n        }\n      }\n    });\n  }\n  execute(meshPipe, mesh) {\n    const renderer = meshPipe.renderer;\n    let shader = mesh._shader;\n    if (!shader) {\n      shader = this._shader;\n      shader.resources.uTexture = mesh.texture.source;\n      shader.resources.uSampler = mesh.texture.source.style;\n      shader.resources.textureUniforms.uniforms.uTextureMatrix = mesh.texture.textureMatrix.mapCoord;\n    } else if (!shader.gpuProgram) {\n      warn(\"Mesh shader has no gpuProgram\", mesh.shader);\n      return;\n    }\n    const gpuProgram = shader.gpuProgram;\n    if (gpuProgram.autoAssignGlobalUniforms) {\n      shader.groups[0] = renderer.globalUniforms.bindGroup;\n    }\n    if (gpuProgram.autoAssignLocalUniforms) {\n      const localUniforms = meshPipe.localUniforms;\n      shader.groups[1] = renderer.renderPipes.uniformBatch.getUniformBindGroup(localUniforms, true);\n    }\n    renderer.encoder.draw({\n      geometry: mesh._geometry,\n      shader,\n      state: mesh.state\n    });\n  }\n  destroy() {\n    this._shader.destroy(true);\n    this._shader = null;\n  }\n}\n/** @ignore */\nGpuMeshAdapter.extension = {\n  type: [\n    ExtensionType.WebGPUPipesAdaptor\n  ],\n  name: \"mesh\"\n};\n\nexport { GpuMeshAdapter };\n//# sourceMappingURL=GpuMeshAdapter.mjs.map\n","import { extensions, ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { GpuGraphicsAdaptor } from '../../../scene/graphics/gpu/GpuGraphicsAdaptor.mjs';\nimport { GpuMeshAdapter } from '../../../scene/mesh/gpu/GpuMeshAdapter.mjs';\nimport { GpuBatchAdaptor } from '../../batcher/gpu/GpuBatchAdaptor.mjs';\nimport { AbstractRenderer } from '../shared/system/AbstractRenderer.mjs';\nimport { SharedSystems, SharedRenderPipes } from '../shared/system/SharedSystems.mjs';\nimport { RendererType } from '../types.mjs';\nimport { BindGroupSystem } from './BindGroupSystem.mjs';\nimport { GpuBufferSystem } from './buffer/GpuBufferSystem.mjs';\nimport { GpuColorMaskSystem } from './GpuColorMaskSystem.mjs';\nimport { GpuDeviceSystem } from './GpuDeviceSystem.mjs';\nimport { GpuEncoderSystem } from './GpuEncoderSystem.mjs';\nimport { GpuStencilSystem } from './GpuStencilSystem.mjs';\nimport { GpuUboSystem } from './GpuUboSystem.mjs';\nimport { GpuUniformBatchPipe } from './GpuUniformBatchPipe.mjs';\nimport { PipelineSystem } from './pipeline/PipelineSystem.mjs';\nimport { GpuRenderTargetSystem } from './renderTarget/GpuRenderTargetSystem.mjs';\nimport { GpuShaderSystem } from './shader/GpuShaderSystem.mjs';\nimport { GpuStateSystem } from './state/GpuStateSystem.mjs';\nimport { GpuTextureSystem } from './texture/GpuTextureSystem.mjs';\n\n\"use strict\";\nconst DefaultWebGPUSystems = [\n  ...SharedSystems,\n  GpuUboSystem,\n  GpuEncoderSystem,\n  GpuDeviceSystem,\n  GpuBufferSystem,\n  GpuTextureSystem,\n  GpuRenderTargetSystem,\n  GpuShaderSystem,\n  GpuStateSystem,\n  PipelineSystem,\n  GpuColorMaskSystem,\n  GpuStencilSystem,\n  BindGroupSystem\n];\nconst DefaultWebGPUPipes = [...SharedRenderPipes, GpuUniformBatchPipe];\nconst DefaultWebGPUAdapters = [GpuBatchAdaptor, GpuMeshAdapter, GpuGraphicsAdaptor];\nconst systems = [];\nconst renderPipes = [];\nconst renderPipeAdaptors = [];\nextensions.handleByNamedList(ExtensionType.WebGPUSystem, systems);\nextensions.handleByNamedList(ExtensionType.WebGPUPipes, renderPipes);\nextensions.handleByNamedList(ExtensionType.WebGPUPipesAdaptor, renderPipeAdaptors);\nextensions.add(...DefaultWebGPUSystems, ...DefaultWebGPUPipes, ...DefaultWebGPUAdapters);\nclass WebGPURenderer extends AbstractRenderer {\n  constructor() {\n    const systemConfig = {\n      name: \"webgpu\",\n      type: RendererType.WEBGPU,\n      systems,\n      renderPipes,\n      renderPipeAdaptors\n    };\n    super(systemConfig);\n  }\n}\n\nexport { WebGPURenderer };\n//# sourceMappingURL=WebGPURenderer.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { State } from '../../../rendering/renderers/shared/state/State.mjs';\nimport { BigPool } from '../../../utils/pool/PoolGroup.mjs';\nimport { color32BitToUniform } from '../gpu/colorToUniform.mjs';\nimport { BatchableGraphics } from './BatchableGraphics.mjs';\n\n\"use strict\";\nclass GraphicsPipe {\n  constructor(renderer, adaptor) {\n    this.state = State.for2d();\n    // batchable graphics list, used to render batches\n    this._graphicsBatchesHash = /* @__PURE__ */ Object.create(null);\n    this.renderer = renderer;\n    this._adaptor = adaptor;\n    this._adaptor.init();\n  }\n  validateRenderable(graphics) {\n    const context = graphics.context;\n    const wasBatched = !!this._graphicsBatchesHash[graphics.uid];\n    const gpuContext = this.renderer.graphicsContext.updateGpuContext(context);\n    if (gpuContext.isBatchable || wasBatched !== gpuContext.isBatchable) {\n      return true;\n    }\n    return false;\n  }\n  addRenderable(graphics, instructionSet) {\n    const gpuContext = this.renderer.graphicsContext.updateGpuContext(graphics.context);\n    if (graphics._didGraphicsUpdate) {\n      graphics._didGraphicsUpdate = false;\n      this._rebuild(graphics);\n    }\n    if (gpuContext.isBatchable) {\n      this._addToBatcher(graphics, instructionSet);\n    } else {\n      this.renderer.renderPipes.batch.break(instructionSet);\n      instructionSet.add(graphics);\n    }\n  }\n  updateRenderable(graphics) {\n    const batches = this._graphicsBatchesHash[graphics.uid];\n    if (batches) {\n      for (let i = 0; i < batches.length; i++) {\n        const batch = batches[i];\n        batch.batcher.updateElement(batch);\n      }\n    }\n  }\n  destroyRenderable(graphics) {\n    if (this._graphicsBatchesHash[graphics.uid]) {\n      this._removeBatchForRenderable(graphics.uid);\n    }\n  }\n  execute(graphics) {\n    if (!graphics.isRenderable)\n      return;\n    const renderer = this.renderer;\n    const context = graphics.context;\n    const contextSystem = renderer.graphicsContext;\n    if (!contextSystem.getGpuContext(context).batches.length) {\n      return;\n    }\n    const shader = context.customShader || this._adaptor.shader;\n    this.state.blendMode = graphics.groupBlendMode;\n    const localUniforms = shader.resources.localUniforms.uniforms;\n    localUniforms.uTransformMatrix = graphics.groupTransform;\n    localUniforms.uRound = renderer._roundPixels | graphics._roundPixels;\n    color32BitToUniform(\n      graphics.groupColorAlpha,\n      localUniforms.uColor,\n      0\n    );\n    this._adaptor.execute(this, graphics);\n  }\n  _rebuild(graphics) {\n    const wasBatched = !!this._graphicsBatchesHash[graphics.uid];\n    const gpuContext = this.renderer.graphicsContext.updateGpuContext(graphics.context);\n    if (wasBatched) {\n      this._removeBatchForRenderable(graphics.uid);\n    }\n    if (gpuContext.isBatchable) {\n      this._initBatchesForRenderable(graphics);\n    }\n    graphics.batched = gpuContext.isBatchable;\n  }\n  _addToBatcher(graphics, instructionSet) {\n    const batchPipe = this.renderer.renderPipes.batch;\n    const batches = this._getBatchesForRenderable(graphics);\n    for (let i = 0; i < batches.length; i++) {\n      const batch = batches[i];\n      batchPipe.addToBatch(batch, instructionSet);\n    }\n  }\n  _getBatchesForRenderable(graphics) {\n    return this._graphicsBatchesHash[graphics.uid] || this._initBatchesForRenderable(graphics);\n  }\n  _initBatchesForRenderable(graphics) {\n    const context = graphics.context;\n    const gpuContext = this.renderer.graphicsContext.getGpuContext(context);\n    const roundPixels = this.renderer._roundPixels | graphics._roundPixels;\n    const batches = gpuContext.batches.map((batch) => {\n      const batchClone = BigPool.get(BatchableGraphics);\n      batch.copyTo(batchClone);\n      batchClone.renderable = graphics;\n      batchClone.roundPixels = roundPixels;\n      return batchClone;\n    });\n    this._graphicsBatchesHash[graphics.uid] = batches;\n    graphics.on(\"destroyed\", () => {\n      this.destroyRenderable(graphics);\n    });\n    return batches;\n  }\n  _removeBatchForRenderable(graphicsUid) {\n    this._graphicsBatchesHash[graphicsUid].forEach((batch) => {\n      BigPool.return(batch);\n    });\n    this._graphicsBatchesHash[graphicsUid] = null;\n  }\n  destroy() {\n    this.renderer = null;\n    this._adaptor.destroy();\n    this._adaptor = null;\n    this.state = null;\n    for (const i in this._graphicsBatchesHash) {\n      this._removeBatchForRenderable(i);\n    }\n    this._graphicsBatchesHash = null;\n  }\n}\n/** @ignore */\nGraphicsPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"graphics\"\n};\n\nexport { GraphicsPipe };\n//# sourceMappingURL=GraphicsPipe.mjs.map\n","import { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { MeshGeometry } from '../mesh/shared/MeshGeometry.mjs';\n\n\"use strict\";\nconst _PlaneGeometry = class _PlaneGeometry extends MeshGeometry {\n  constructor(...args) {\n    super({});\n    let options = args[0] ?? {};\n    if (typeof options === \"number\") {\n      deprecation(v8_0_0, \"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead\");\n      options = {\n        width: options,\n        height: args[1],\n        verticesX: args[2],\n        verticesY: args[3]\n      };\n    }\n    this.build(options);\n  }\n  /**\n   * Refreshes plane coordinates\n   * @param options - Options to be applied to plane geometry\n   */\n  build(options) {\n    options = { ..._PlaneGeometry.defaultOptions, ...options };\n    this.verticesX = this.verticesX ?? options.verticesX;\n    this.verticesY = this.verticesY ?? options.verticesY;\n    this.width = this.width ?? options.width;\n    this.height = this.height ?? options.height;\n    const total = this.verticesX * this.verticesY;\n    const verts = [];\n    const uvs = [];\n    const indices = [];\n    const verticesX = this.verticesX - 1;\n    const verticesY = this.verticesY - 1;\n    const sizeX = this.width / verticesX;\n    const sizeY = this.height / verticesY;\n    for (let i = 0; i < total; i++) {\n      const x = i % this.verticesX;\n      const y = i / this.verticesX | 0;\n      verts.push(x * sizeX, y * sizeY);\n      uvs.push(x / verticesX, y / verticesY);\n    }\n    const totalSub = verticesX * verticesY;\n    for (let i = 0; i < totalSub; i++) {\n      const xpos = i % verticesX;\n      const ypos = i / verticesX | 0;\n      const value = ypos * this.verticesX + xpos;\n      const value2 = ypos * this.verticesX + xpos + 1;\n      const value3 = (ypos + 1) * this.verticesX + xpos;\n      const value4 = (ypos + 1) * this.verticesX + xpos + 1;\n      indices.push(\n        value,\n        value2,\n        value3,\n        value2,\n        value4,\n        value3\n      );\n    }\n    this.buffers[0].data = new Float32Array(verts);\n    this.buffers[1].data = new Float32Array(uvs);\n    this.indexBuffer.data = new Uint32Array(indices);\n    this.buffers[0].update();\n    this.buffers[1].update();\n    this.indexBuffer.update();\n  }\n};\n_PlaneGeometry.defaultOptions = {\n  width: 100,\n  height: 100,\n  verticesX: 10,\n  verticesY: 10\n};\nlet PlaneGeometry = _PlaneGeometry;\n\nexport { PlaneGeometry };\n//# sourceMappingURL=PlaneGeometry.mjs.map\n","\"use strict\";\nclass BatchableMesh {\n  constructor() {\n    this.batcher = null;\n    this.batch = null;\n    this.roundPixels = 0;\n    this._uvUpdateId = -1;\n    this._textureMatrixUpdateId = -1;\n  }\n  get blendMode() {\n    return this.mesh.groupBlendMode;\n  }\n  reset() {\n    this.mesh = null;\n    this.texture = null;\n    this.batcher = null;\n    this.batch = null;\n  }\n  packIndex(indexBuffer, index, indicesOffset) {\n    const indices = this.geometry.indices;\n    for (let i = 0; i < indices.length; i++) {\n      indexBuffer[index++] = indices[i] + indicesOffset;\n    }\n  }\n  packAttributes(float32View, uint32View, index, textureId) {\n    const mesh = this.mesh;\n    const geometry = this.geometry;\n    const wt = mesh.groupTransform;\n    const textureIdAndRound = textureId << 16 | this.roundPixels & 65535;\n    const a = wt.a;\n    const b = wt.b;\n    const c = wt.c;\n    const d = wt.d;\n    const tx = wt.tx;\n    const ty = wt.ty;\n    const positions = geometry.positions;\n    const uvBuffer = geometry.getBuffer(\"aUV\");\n    const uvs = uvBuffer.data;\n    let transformedUvs = uvs;\n    const textureMatrix = this.texture.textureMatrix;\n    if (!textureMatrix.isSimple) {\n      transformedUvs = this._transformedUvs;\n      if (this._textureMatrixUpdateId !== textureMatrix._updateID || this._uvUpdateId !== uvBuffer._updateID) {\n        if (!transformedUvs || transformedUvs.length < uvs.length) {\n          transformedUvs = this._transformedUvs = new Float32Array(uvs.length);\n        }\n        this._textureMatrixUpdateId = textureMatrix._updateID;\n        this._uvUpdateId = uvBuffer._updateID;\n        textureMatrix.multiplyUvs(uvs, transformedUvs);\n      }\n    }\n    const abgr = mesh.groupColorAlpha;\n    for (let i = 0; i < positions.length; i += 2) {\n      const x = positions[i];\n      const y = positions[i + 1];\n      float32View[index] = a * x + c * y + tx;\n      float32View[index + 1] = b * x + d * y + ty;\n      float32View[index + 2] = transformedUvs[i];\n      float32View[index + 3] = transformedUvs[i + 1];\n      uint32View[index + 4] = abgr;\n      uint32View[index + 5] = textureIdAndRound;\n      index += 6;\n    }\n  }\n  get vertexSize() {\n    return this.geometry.positions.length / 2;\n  }\n  get indexSize() {\n    return this.geometry.indices.length;\n  }\n}\n\nexport { BatchableMesh };\n//# sourceMappingURL=BatchableMesh.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { BindGroup } from '../../../rendering/renderers/gpu/shader/BindGroup.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { BigPool } from '../../../utils/pool/PoolGroup.mjs';\nimport { color32BitToUniform } from '../../graphics/gpu/colorToUniform.mjs';\nimport { BatchableMesh } from './BatchableMesh.mjs';\n\n\"use strict\";\nclass MeshPipe {\n  constructor(renderer, adaptor) {\n    this.localUniforms = new UniformGroup({\n      uTransformMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uColor: { value: new Float32Array([1, 1, 1, 1]), type: \"vec4<f32>\" },\n      uRound: { value: 0, type: \"f32\" }\n    });\n    this.localUniformsBindGroup = new BindGroup({\n      0: this.localUniforms\n    });\n    this._meshDataHash = /* @__PURE__ */ Object.create(null);\n    this._gpuBatchableMeshHash = /* @__PURE__ */ Object.create(null);\n    this.renderer = renderer;\n    this._adaptor = adaptor;\n    this._adaptor.init();\n  }\n  validateRenderable(mesh) {\n    const meshData = this._getMeshData(mesh);\n    const wasBatched = meshData.batched;\n    const isBatched = mesh.batched;\n    meshData.batched = isBatched;\n    if (wasBatched !== isBatched) {\n      return true;\n    } else if (isBatched) {\n      const geometry = mesh._geometry;\n      if (geometry.indices.length !== meshData.indexSize || geometry.positions.length !== meshData.vertexSize) {\n        meshData.indexSize = geometry.indices.length;\n        meshData.vertexSize = geometry.positions.length;\n        return true;\n      }\n      const batchableMesh = this._getBatchableMesh(mesh);\n      const texture = mesh.texture;\n      if (batchableMesh.texture._source !== texture._source) {\n        if (batchableMesh.texture._source !== texture._source) {\n          return !batchableMesh.batcher.checkAndUpdateTexture(batchableMesh, texture);\n        }\n      }\n    }\n    return false;\n  }\n  addRenderable(mesh, instructionSet) {\n    const batcher = this.renderer.renderPipes.batch;\n    const { batched } = this._getMeshData(mesh);\n    if (batched) {\n      const gpuBatchableMesh = this._getBatchableMesh(mesh);\n      gpuBatchableMesh.texture = mesh._texture;\n      gpuBatchableMesh.geometry = mesh._geometry;\n      batcher.addToBatch(gpuBatchableMesh);\n    } else {\n      batcher.break(instructionSet);\n      instructionSet.add({\n        renderPipeId: \"mesh\",\n        mesh\n      });\n    }\n  }\n  updateRenderable(mesh) {\n    if (mesh.batched) {\n      const gpuBatchableMesh = this._gpuBatchableMeshHash[mesh.uid];\n      gpuBatchableMesh.texture = mesh._texture;\n      gpuBatchableMesh.geometry = mesh._geometry;\n      gpuBatchableMesh.batcher.updateElement(gpuBatchableMesh);\n    }\n  }\n  destroyRenderable(mesh) {\n    this._meshDataHash[mesh.uid] = null;\n    const gpuMesh = this._gpuBatchableMeshHash[mesh.uid];\n    if (gpuMesh) {\n      BigPool.return(gpuMesh);\n      this._gpuBatchableMeshHash[mesh.uid] = null;\n    }\n  }\n  execute({ mesh }) {\n    if (!mesh.isRenderable)\n      return;\n    mesh.state.blendMode = mesh.groupBlendMode;\n    const localUniforms = this.localUniforms;\n    localUniforms.uniforms.uTransformMatrix = mesh.groupTransform;\n    localUniforms.uniforms.uRound = this.renderer._roundPixels | mesh._roundPixels;\n    localUniforms.update();\n    color32BitToUniform(\n      mesh.groupColorAlpha,\n      localUniforms.uniforms.uColor,\n      0\n    );\n    this._adaptor.execute(this, mesh);\n  }\n  _getMeshData(mesh) {\n    return this._meshDataHash[mesh.uid] || this._initMeshData(mesh);\n  }\n  _initMeshData(mesh) {\n    this._meshDataHash[mesh.uid] = {\n      batched: mesh.batched,\n      indexSize: mesh._geometry.indices?.length,\n      vertexSize: mesh._geometry.positions?.length\n    };\n    mesh.on(\"destroyed\", () => {\n      this.destroyRenderable(mesh);\n    });\n    return this._meshDataHash[mesh.uid];\n  }\n  _getBatchableMesh(mesh) {\n    return this._gpuBatchableMeshHash[mesh.uid] || this._initBatchableMesh(mesh);\n  }\n  _initBatchableMesh(mesh) {\n    const gpuMesh = BigPool.get(BatchableMesh);\n    gpuMesh.mesh = mesh;\n    gpuMesh.texture = mesh._texture;\n    gpuMesh.roundPixels = this.renderer._roundPixels | mesh._roundPixels;\n    this._gpuBatchableMeshHash[mesh.uid] = gpuMesh;\n    gpuMesh.mesh = mesh;\n    return gpuMesh;\n  }\n  destroy() {\n    for (const i in this._gpuBatchableMeshHash) {\n      if (this._gpuBatchableMeshHash[i]) {\n        BigPool.return(this._gpuBatchableMeshHash[i]);\n      }\n    }\n    this._gpuBatchableMeshHash = null;\n    this._meshDataHash = null;\n    this.localUniforms = null;\n    this.localUniformsBindGroup = null;\n    this._adaptor.destroy();\n    this._adaptor = null;\n    this.renderer = null;\n  }\n}\n/** @ignore */\nMeshPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"mesh\"\n};\n\nexport { MeshPipe };\n//# sourceMappingURL=MeshPipe.mjs.map\n","import { PlaneGeometry } from '../mesh-plane/PlaneGeometry.mjs';\n\n\"use strict\";\nconst _NineSliceGeometry = class _NineSliceGeometry extends PlaneGeometry {\n  constructor(options = {}) {\n    options = { ..._NineSliceGeometry.defaultOptions, ...options };\n    super({\n      width: options.width,\n      height: options.height,\n      verticesX: 4,\n      verticesY: 4\n    });\n    this.update(options);\n  }\n  /**\n   * Updates the NineSliceGeometry with the options.\n   * @param options - The options of the NineSliceGeometry.\n   */\n  update(options) {\n    this.width = options.width ?? this.width;\n    this.height = options.height ?? this.height;\n    this._originalWidth = options.originalWidth ?? this._originalWidth;\n    this._originalHeight = options.originalHeight ?? this._originalHeight;\n    this._leftWidth = options.leftWidth ?? this._leftWidth;\n    this._rightWidth = options.rightWidth ?? this._rightWidth;\n    this._topHeight = options.topHeight ?? this._topHeight;\n    this._bottomHeight = options.bottomHeight ?? this._bottomHeight;\n    this.updateUvs();\n    this.updatePositions();\n  }\n  /** Updates the positions of the vertices. */\n  updatePositions() {\n    const positions = this.positions;\n    const w = this._leftWidth + this._rightWidth;\n    const scaleW = this.width > w ? 1 : this.width / w;\n    const h = this._topHeight + this._bottomHeight;\n    const scaleH = this.height > h ? 1 : this.height / h;\n    const scale = Math.min(scaleW, scaleH);\n    positions[9] = positions[11] = positions[13] = positions[15] = this._topHeight * scale;\n    positions[17] = positions[19] = positions[21] = positions[23] = this.height - this._bottomHeight * scale;\n    positions[25] = positions[27] = positions[29] = positions[31] = this.height;\n    positions[2] = positions[10] = positions[18] = positions[26] = this._leftWidth * scale;\n    positions[4] = positions[12] = positions[20] = positions[28] = this.width - this._rightWidth * scale;\n    positions[6] = positions[14] = positions[22] = positions[30] = this.width;\n    this.getBuffer(\"aPosition\").update();\n  }\n  /** Updates the UVs of the vertices. */\n  updateUvs() {\n    const uvs = this.uvs;\n    uvs[0] = uvs[8] = uvs[16] = uvs[24] = 0;\n    uvs[1] = uvs[3] = uvs[5] = uvs[7] = 0;\n    uvs[6] = uvs[14] = uvs[22] = uvs[30] = 1;\n    uvs[25] = uvs[27] = uvs[29] = uvs[31] = 1;\n    const _uvw = 1 / this._originalWidth;\n    const _uvh = 1 / this._originalHeight;\n    uvs[2] = uvs[10] = uvs[18] = uvs[26] = _uvw * this._leftWidth;\n    uvs[9] = uvs[11] = uvs[13] = uvs[15] = _uvh * this._topHeight;\n    uvs[4] = uvs[12] = uvs[20] = uvs[28] = 1 - _uvw * this._rightWidth;\n    uvs[17] = uvs[19] = uvs[21] = uvs[23] = 1 - _uvh * this._bottomHeight;\n    this.getBuffer(\"aUV\").update();\n  }\n};\n/** The default options for the NineSliceGeometry. */\n_NineSliceGeometry.defaultOptions = {\n  /** The width of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane. */\n  width: 100,\n  /** The height of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane. */\n  height: 100,\n  /** The width of the left column. */\n  leftWidth: 10,\n  /** The height of the top row. */\n  topHeight: 10,\n  /** The width of the right column. */\n  rightWidth: 10,\n  /** The height of the bottom row. */\n  bottomHeight: 10,\n  /** The original width of the texture */\n  originalWidth: 100,\n  /** The original height of the texture */\n  originalHeight: 100\n};\nlet NineSliceGeometry = _NineSliceGeometry;\n\nexport { NineSliceGeometry };\n//# sourceMappingURL=NineSliceGeometry.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\nimport { BatchableMesh } from '../mesh/shared/BatchableMesh.mjs';\nimport { NineSliceGeometry } from './NineSliceGeometry.mjs';\n\n\"use strict\";\nclass NineSliceSpritePipe {\n  constructor(renderer) {\n    this._gpuSpriteHash = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n  }\n  addRenderable(sprite, _instructionSet) {\n    const gpuSprite = this._getGpuSprite(sprite);\n    if (sprite._didSpriteUpdate)\n      this._updateBatchableSprite(sprite, gpuSprite);\n    this._renderer.renderPipes.batch.addToBatch(gpuSprite);\n  }\n  updateRenderable(sprite) {\n    const gpuSprite = this._gpuSpriteHash[sprite.uid];\n    if (sprite._didSpriteUpdate)\n      this._updateBatchableSprite(sprite, gpuSprite);\n    gpuSprite.batcher.updateElement(gpuSprite);\n  }\n  validateRenderable(sprite) {\n    const texture = sprite._texture;\n    const gpuSprite = this._getGpuSprite(sprite);\n    if (gpuSprite.texture._source !== texture._source) {\n      return !gpuSprite.batcher.checkAndUpdateTexture(gpuSprite, texture);\n    }\n    return false;\n  }\n  destroyRenderable(sprite) {\n    const batchableSprite = this._gpuSpriteHash[sprite.uid];\n    BigPool.return(batchableSprite);\n    this._gpuSpriteHash[sprite.uid] = null;\n  }\n  _updateBatchableSprite(sprite, batchableSprite) {\n    sprite._didSpriteUpdate = false;\n    batchableSprite.geometry.update(sprite);\n    batchableSprite.texture = sprite._texture;\n  }\n  _getGpuSprite(sprite) {\n    return this._gpuSpriteHash[sprite.uid] || this._initGPUSprite(sprite);\n  }\n  _initGPUSprite(sprite) {\n    const batchableMesh = new BatchableMesh();\n    batchableMesh.geometry = new NineSliceGeometry();\n    batchableMesh.mesh = sprite;\n    batchableMesh.texture = sprite._texture;\n    batchableMesh.roundPixels = this._renderer._roundPixels | sprite._roundPixels;\n    this._gpuSpriteHash[sprite.uid] = batchableMesh;\n    sprite.on(\"destroyed\", () => {\n      this.destroyRenderable(sprite);\n    });\n    return batchableMesh;\n  }\n  destroy() {\n    for (const i in this._gpuSpriteHash) {\n      const batchableMesh = this._gpuSpriteHash[i];\n      batchableMesh.geometry.destroy();\n    }\n    this._gpuSpriteHash = null;\n    this._renderer = null;\n  }\n}\n/** @ignore */\nNineSliceSpritePipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"nineSliceSprite\"\n};\n\nexport { NineSliceSpritePipe };\n//# sourceMappingURL=NineSliceSpritePipe.mjs.map\n","\"use strict\";\nconst tilingBit = {\n  name: \"tiling-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n            struct TilingUniforms {\n                uMapCoord:mat3x3<f32>,\n                uClampFrame:vec4<f32>,\n                uClampOffset:vec2<f32>,\n                uTextureTransform:mat3x3<f32>,\n                uSizeAnchor:vec4<f32>\n            };\n\n            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;\n            @group(2) @binding(1) var uTexture: texture_2d<f32>;\n            @group(2) @binding(2) var uSampler: sampler;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;\n\n            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* wgsl */\n      `\n            struct TilingUniforms {\n                uMapCoord:mat3x3<f32>,\n                uClampFrame:vec4<f32>,\n                uClampOffset:vec2<f32>,\n                uTextureTransform:mat3x3<f32>,\n                uSizeAnchor:vec4<f32>\n            };\n\n            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;\n            @group(2) @binding(1) var uTexture: texture_2d<f32>;\n            @group(2) @binding(2) var uSampler: sampler;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n\n            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);\n            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;\n            var unclamped = coord;\n            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);\n\n            var bias = 0.;\n\n            if(unclamped.x == coord.x && unclamped.y == coord.y)\n            {\n                bias = -32.;\n            } \n\n            outColor = textureSampleBias(uTexture, uSampler, coord, bias);\n        `\n    )\n  }\n};\nconst tilingBitGl = {\n  name: \"tiling-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n            uniform mat3 uTextureTransform;\n            uniform vec4 uSizeAnchor;\n        \n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;\n\n            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* glsl */\n      `\n            uniform sampler2D uTexture;\n            uniform mat3 uMapCoord;\n            uniform vec4 uClampFrame;\n            uniform vec2 uClampOffset;\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n\n        vec2 coord = vUV + ceil(uClampOffset - vUV);\n        coord = (uMapCoord * vec3(coord, 1.0)).xy;\n        vec2 unclamped = coord;\n        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n        \n        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0\n    \n        `\n    )\n  }\n};\n\nexport { tilingBit, tilingBitGl };\n//# sourceMappingURL=tilingBit.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { compileHighShaderGpuProgram, compileHighShaderGlProgram } from '../../../rendering/high-shader/compileHighShaderToProgram.mjs';\nimport { localUniformBit, localUniformBitGl } from '../../../rendering/high-shader/shader-bits/localUniformBit.mjs';\nimport { roundPixelsBit, roundPixelsBitGl } from '../../../rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { tilingBit, tilingBitGl } from './tilingBit.mjs';\n\n\"use strict\";\nlet gpuProgram;\nlet glProgram;\nclass TilingSpriteShader extends Shader {\n  constructor() {\n    gpuProgram ?? (gpuProgram = compileHighShaderGpuProgram({\n      name: \"tiling-sprite-shader\",\n      bits: [\n        localUniformBit,\n        tilingBit,\n        roundPixelsBit\n      ]\n    }));\n    glProgram ?? (glProgram = compileHighShaderGlProgram({\n      name: \"tiling-sprite-shader\",\n      bits: [\n        localUniformBitGl,\n        tilingBitGl,\n        roundPixelsBitGl\n      ]\n    }));\n    const tilingUniforms = new UniformGroup({\n      uMapCoord: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uClampFrame: { value: new Float32Array([0, 0, 1, 1]), type: \"vec4<f32>\" },\n      uClampOffset: { value: new Float32Array([0, 0]), type: \"vec2<f32>\" },\n      uTextureTransform: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uSizeAnchor: { value: new Float32Array([100, 100, 0.5, 0.5]), type: \"vec4<f32>\" }\n    });\n    super({\n      glProgram,\n      gpuProgram,\n      resources: {\n        localUniforms: new UniformGroup({\n          uTransformMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n          uColor: { value: new Float32Array([1, 1, 1, 1]), type: \"vec4<f32>\" },\n          uRound: { value: 0, type: \"f32\" }\n        }),\n        tilingUniforms,\n        uTexture: Texture.EMPTY.source,\n        uSampler: Texture.EMPTY.source.style\n      }\n    });\n  }\n  updateUniforms(width, height, matrix, anchorX, anchorY, texture) {\n    const tilingUniforms = this.resources.tilingUniforms;\n    const textureWidth = texture.width;\n    const textureHeight = texture.height;\n    const textureMatrix = texture.textureMatrix;\n    const uTextureTransform = tilingUniforms.uniforms.uTextureTransform;\n    uTextureTransform.set(\n      matrix.a * textureWidth / width,\n      matrix.b * textureWidth / height,\n      matrix.c * textureHeight / width,\n      matrix.d * textureHeight / height,\n      matrix.tx / width,\n      matrix.ty / height\n    );\n    uTextureTransform.invert();\n    tilingUniforms.uniforms.uMapCoord = textureMatrix.mapCoord;\n    tilingUniforms.uniforms.uClampFrame = textureMatrix.uClampFrame;\n    tilingUniforms.uniforms.uClampOffset = textureMatrix.uClampOffset;\n    tilingUniforms.uniforms.uTextureTransform = uTextureTransform;\n    tilingUniforms.uniforms.uSizeAnchor[0] = width;\n    tilingUniforms.uniforms.uSizeAnchor[1] = height;\n    tilingUniforms.uniforms.uSizeAnchor[2] = anchorX;\n    tilingUniforms.uniforms.uSizeAnchor[3] = anchorY;\n    if (texture) {\n      this.resources.uTexture = texture.source;\n      this.resources.uSampler = texture.source.style;\n    }\n  }\n}\n\nexport { TilingSpriteShader };\n//# sourceMappingURL=TilingSpriteShader.mjs.map\n","import { MeshGeometry } from '../../mesh/shared/MeshGeometry.mjs';\n\n\"use strict\";\nclass QuadGeometry extends MeshGeometry {\n  constructor() {\n    super({\n      positions: new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),\n      uvs: new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),\n      indices: new Uint32Array([0, 1, 2, 0, 2, 3])\n    });\n  }\n}\n\nexport { QuadGeometry };\n//# sourceMappingURL=QuadGeometry.mjs.map\n","\"use strict\";\nfunction setPositions(tilingSprite, positions) {\n  const anchorX = tilingSprite.anchor.x;\n  const anchorY = tilingSprite.anchor.y;\n  positions[0] = -anchorX * tilingSprite.width;\n  positions[1] = -anchorY * tilingSprite.height;\n  positions[2] = (1 - anchorX) * tilingSprite.width;\n  positions[3] = -anchorY * tilingSprite.height;\n  positions[4] = (1 - anchorX) * tilingSprite.width;\n  positions[5] = (1 - anchorY) * tilingSprite.height;\n  positions[6] = -anchorX * tilingSprite.width;\n  positions[7] = (1 - anchorY) * tilingSprite.height;\n}\n\nexport { setPositions };\n//# sourceMappingURL=setPositions.mjs.map\n","\"use strict\";\nfunction applyMatrix(array, stride, offset, matrix) {\n  let index = 0;\n  const size = array.length / (stride || 2);\n  const a = matrix.a;\n  const b = matrix.b;\n  const c = matrix.c;\n  const d = matrix.d;\n  const tx = matrix.tx;\n  const ty = matrix.ty;\n  offset *= stride;\n  while (index < size) {\n    const x = array[offset];\n    const y = array[offset + 1];\n    array[offset] = a * x + c * y + tx;\n    array[offset + 1] = b * x + d * y + ty;\n    offset += stride;\n    index++;\n  }\n}\n\nexport { applyMatrix };\n//# sourceMappingURL=applyMatrix.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { applyMatrix } from './applyMatrix.mjs';\n\n\"use strict\";\nfunction setUvs(tilingSprite, uvs) {\n  const texture = tilingSprite.texture;\n  const width = texture.frame.width;\n  const height = texture.frame.height;\n  let anchorX = 0;\n  let anchorY = 0;\n  if (tilingSprite._applyAnchorToTexture) {\n    anchorX = tilingSprite.anchor.x;\n    anchorY = tilingSprite.anchor.y;\n  }\n  uvs[0] = uvs[6] = -anchorX;\n  uvs[2] = uvs[4] = 1 - anchorX;\n  uvs[1] = uvs[3] = -anchorY;\n  uvs[5] = uvs[7] = 1 - anchorY;\n  const textureMatrix = Matrix.shared;\n  textureMatrix.copyFrom(tilingSprite._tileTransform.matrix);\n  textureMatrix.tx /= tilingSprite.width;\n  textureMatrix.ty /= tilingSprite.height;\n  textureMatrix.invert();\n  textureMatrix.scale(tilingSprite.width / width, tilingSprite.height / height);\n  applyMatrix(uvs, 2, 0, textureMatrix);\n}\n\nexport { setUvs };\n//# sourceMappingURL=setUvs.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { State } from '../../rendering/renderers/shared/state/State.mjs';\nimport { RendererType } from '../../rendering/renderers/types.mjs';\nimport { color32BitToUniform } from '../graphics/gpu/colorToUniform.mjs';\nimport { BatchableMesh } from '../mesh/shared/BatchableMesh.mjs';\nimport { MeshGeometry } from '../mesh/shared/MeshGeometry.mjs';\nimport { TilingSpriteShader } from './shader/TilingSpriteShader.mjs';\nimport { QuadGeometry } from './utils/QuadGeometry.mjs';\nimport { setPositions } from './utils/setPositions.mjs';\nimport { setUvs } from './utils/setUvs.mjs';\n\n\"use strict\";\nconst sharedQuad = new QuadGeometry();\nclass TilingSpritePipe {\n  constructor(renderer) {\n    this._tilingSpriteDataHash = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n  }\n  validateRenderable(renderable) {\n    const tilingSpriteData = this._getTilingSpriteData(renderable);\n    const couldBatch = tilingSpriteData.canBatch;\n    this._updateCanBatch(renderable);\n    const canBatch = tilingSpriteData.canBatch;\n    if (canBatch && canBatch === couldBatch) {\n      const { batchableMesh } = tilingSpriteData;\n      if (batchableMesh.texture._source !== renderable.texture._source) {\n        return !batchableMesh.batcher.checkAndUpdateTexture(batchableMesh, renderable.texture);\n      }\n    }\n    return couldBatch !== canBatch;\n  }\n  addRenderable(tilingSprite, instructionSet) {\n    const batcher = this._renderer.renderPipes.batch;\n    this._updateCanBatch(tilingSprite);\n    const tilingSpriteData = this._getTilingSpriteData(tilingSprite);\n    const { geometry, canBatch } = tilingSpriteData;\n    if (canBatch) {\n      tilingSpriteData.batchableMesh || (tilingSpriteData.batchableMesh = new BatchableMesh());\n      const batchableMesh = tilingSpriteData.batchableMesh;\n      if (tilingSprite._didTilingSpriteUpdate) {\n        tilingSprite._didTilingSpriteUpdate = false;\n        this._updateBatchableMesh(tilingSprite);\n        batchableMesh.geometry = geometry;\n        batchableMesh.mesh = tilingSprite;\n        batchableMesh.texture = tilingSprite._texture;\n      }\n      batchableMesh.roundPixels = this._renderer._roundPixels | tilingSprite._roundPixels;\n      batcher.addToBatch(batchableMesh);\n    } else {\n      batcher.break(instructionSet);\n      tilingSpriteData.shader || (tilingSpriteData.shader = new TilingSpriteShader());\n      this.updateRenderable(tilingSprite);\n      instructionSet.add(tilingSprite);\n    }\n  }\n  execute(tilingSprite) {\n    const { shader } = this._tilingSpriteDataHash[tilingSprite.uid];\n    shader.groups[0] = this._renderer.globalUniforms.bindGroup;\n    const localUniforms = shader.resources.localUniforms.uniforms;\n    localUniforms.uTransformMatrix = tilingSprite.groupTransform;\n    localUniforms.uRound = this._renderer._roundPixels | tilingSprite._roundPixels;\n    color32BitToUniform(\n      tilingSprite.groupColorAlpha,\n      localUniforms.uColor,\n      0\n    );\n    this._renderer.encoder.draw({\n      geometry: sharedQuad,\n      shader,\n      state: State.default2d\n    });\n  }\n  updateRenderable(tilingSprite) {\n    const tilingSpriteData = this._getTilingSpriteData(tilingSprite);\n    const { canBatch } = tilingSpriteData;\n    if (canBatch) {\n      const { batchableMesh } = tilingSpriteData;\n      if (tilingSprite._didTilingSpriteUpdate)\n        this._updateBatchableMesh(tilingSprite);\n      batchableMesh.batcher.updateElement(batchableMesh);\n    } else if (tilingSprite._didTilingSpriteUpdate) {\n      const { shader } = tilingSpriteData;\n      shader.updateUniforms(\n        tilingSprite.width,\n        tilingSprite.height,\n        tilingSprite._tileTransform.matrix,\n        tilingSprite.anchor.x,\n        tilingSprite.anchor.y,\n        tilingSprite.texture\n      );\n    }\n    tilingSprite._didTilingSpriteUpdate = false;\n  }\n  destroyRenderable(tilingSprite) {\n    const tilingSpriteData = this._getTilingSpriteData(tilingSprite);\n    tilingSpriteData.batchableMesh = null;\n    tilingSpriteData.shader?.destroy();\n    this._tilingSpriteDataHash[tilingSprite.uid] = null;\n  }\n  _getTilingSpriteData(renderable) {\n    return this._tilingSpriteDataHash[renderable.uid] || this._initTilingSpriteData(renderable);\n  }\n  _initTilingSpriteData(tilingSprite) {\n    const geometry = new MeshGeometry({\n      indices: sharedQuad.indices,\n      positions: sharedQuad.positions.slice(),\n      uvs: sharedQuad.uvs.slice()\n    });\n    this._tilingSpriteDataHash[tilingSprite.uid] = {\n      canBatch: true,\n      renderable: tilingSprite,\n      geometry\n    };\n    tilingSprite.on(\"destroyed\", () => {\n      this.destroyRenderable(tilingSprite);\n    });\n    return this._tilingSpriteDataHash[tilingSprite.uid];\n  }\n  _updateBatchableMesh(tilingSprite) {\n    const renderableData = this._getTilingSpriteData(tilingSprite);\n    const { geometry } = renderableData;\n    const style = tilingSprite.texture.source.style;\n    if (style.addressMode !== \"repeat\") {\n      style.addressMode = \"repeat\";\n      style.update();\n    }\n    setUvs(tilingSprite, geometry.uvs);\n    setPositions(tilingSprite, geometry.positions);\n  }\n  destroy() {\n    for (const i in this._tilingSpriteDataHash) {\n      this.destroyRenderable(this._tilingSpriteDataHash[i].renderable);\n    }\n    this._tilingSpriteDataHash = null;\n    this._renderer = null;\n  }\n  _updateCanBatch(tilingSprite) {\n    const renderableData = this._getTilingSpriteData(tilingSprite);\n    const texture = tilingSprite.texture;\n    let _nonPowOf2wrapping = true;\n    if (this._renderer.type === RendererType.WEBGL) {\n      _nonPowOf2wrapping = this._renderer.context.supports.nonPowOf2wrapping;\n    }\n    renderableData.canBatch = texture.textureMatrix.isSimple && (_nonPowOf2wrapping || texture.source.isPowerOfTwo);\n    return renderableData.canBatch;\n  }\n}\n/** @ignore */\nTilingSpritePipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"tilingSprite\"\n};\n\nexport { TilingSpritePipe };\n//# sourceMappingURL=TilingSpritePipe.mjs.map\n","\"use strict\";\nconst bitmapFontTextParser = {\n  test(data) {\n    return typeof data === \"string\" && data.startsWith(\"info face=\");\n  },\n  parse(txt) {\n    const items = txt.match(/^[a-z]+\\s+.+$/gm);\n    const rawData = {\n      info: [],\n      common: [],\n      page: [],\n      char: [],\n      chars: [],\n      kerning: [],\n      kernings: [],\n      distanceField: []\n    };\n    for (const i in items) {\n      const name = items[i].match(/^[a-z]+/gm)[0];\n      const attributeList = items[i].match(/[a-zA-Z]+=([^\\s\"']+|\"([^\"]*)\")/gm);\n      const itemData = {};\n      for (const i2 in attributeList) {\n        const split = attributeList[i2].split(\"=\");\n        const key = split[0];\n        const strValue = split[1].replace(/\"/gm, \"\");\n        const floatValue = parseFloat(strValue);\n        const value = isNaN(floatValue) ? strValue : floatValue;\n        itemData[key] = value;\n      }\n      rawData[name].push(itemData);\n    }\n    const font = {\n      chars: {},\n      pages: [],\n      lineHeight: 0,\n      fontSize: 0,\n      fontFamily: \"\",\n      distanceField: null,\n      baseLineOffset: 0\n    };\n    const [info] = rawData.info;\n    const [common] = rawData.common;\n    const [distanceField] = rawData.distanceField ?? [];\n    if (distanceField) {\n      font.distanceField = {\n        range: parseInt(distanceField.distanceRange, 10),\n        type: distanceField.fieldType\n      };\n    }\n    font.fontSize = parseInt(info.size, 10);\n    font.fontFamily = info.face;\n    font.lineHeight = parseInt(common.lineHeight, 10);\n    const page = rawData.page;\n    for (let i = 0; i < page.length; i++) {\n      font.pages.push({\n        id: parseInt(page[i].id, 10) || 0,\n        file: page[i].file\n      });\n    }\n    const map = {};\n    font.baseLineOffset = font.lineHeight - parseInt(common.base, 10);\n    const char = rawData.char;\n    for (let i = 0; i < char.length; i++) {\n      const charNode = char[i];\n      const id = parseInt(charNode.id, 10);\n      let letter = charNode.letter ?? charNode.char ?? String.fromCharCode(id);\n      if (letter === \"space\")\n        letter = \" \";\n      map[id] = letter;\n      font.chars[letter] = {\n        id,\n        // texture deets..\n        page: parseInt(charNode.page, 10) || 0,\n        x: parseInt(charNode.x, 10),\n        y: parseInt(charNode.y, 10),\n        width: parseInt(charNode.width, 10),\n        height: parseInt(charNode.height, 10),\n        xOffset: parseInt(charNode.xoffset, 10),\n        yOffset: parseInt(charNode.yoffset, 10),\n        xAdvance: parseInt(charNode.xadvance, 10),\n        kerning: {}\n      };\n    }\n    const kerning = rawData.kerning || [];\n    for (let i = 0; i < kerning.length; i++) {\n      const first = parseInt(kerning[i].first, 10);\n      const second = parseInt(kerning[i].second, 10);\n      const amount = parseInt(kerning[i].amount, 10);\n      font.chars[map[second]].kerning[map[first]] = amount;\n    }\n    return font;\n  }\n};\n\nexport { bitmapFontTextParser };\n//# sourceMappingURL=bitmapFontTextParser.mjs.map\n","\"use strict\";\nconst bitmapFontXMLParser = {\n  test(data) {\n    const xml = data;\n    return typeof xml !== \"string\" && \"getElementsByTagName\" in xml && xml.getElementsByTagName(\"page\").length && xml.getElementsByTagName(\"info\")[0].getAttribute(\"face\") !== null;\n  },\n  parse(xml) {\n    const data = {\n      chars: {},\n      pages: [],\n      lineHeight: 0,\n      fontSize: 0,\n      fontFamily: \"\",\n      distanceField: null,\n      baseLineOffset: 0\n    };\n    const info = xml.getElementsByTagName(\"info\")[0];\n    const common = xml.getElementsByTagName(\"common\")[0];\n    const distanceField = xml.getElementsByTagName(\"distanceField\")[0];\n    if (distanceField) {\n      data.distanceField = {\n        type: distanceField.getAttribute(\"fieldType\"),\n        range: parseInt(distanceField.getAttribute(\"distanceRange\"), 10)\n      };\n    }\n    const page = xml.getElementsByTagName(\"page\");\n    const char = xml.getElementsByTagName(\"char\");\n    const kerning = xml.getElementsByTagName(\"kerning\");\n    data.fontSize = parseInt(info.getAttribute(\"size\"), 10);\n    data.fontFamily = info.getAttribute(\"face\");\n    data.lineHeight = parseInt(common.getAttribute(\"lineHeight\"), 10);\n    for (let i = 0; i < page.length; i++) {\n      data.pages.push({\n        id: parseInt(page[i].getAttribute(\"id\"), 10) || 0,\n        file: page[i].getAttribute(\"file\")\n      });\n    }\n    const map = {};\n    data.baseLineOffset = data.lineHeight - parseInt(common.getAttribute(\"base\"), 10);\n    for (let i = 0; i < char.length; i++) {\n      const charNode = char[i];\n      const id = parseInt(charNode.getAttribute(\"id\"), 10);\n      let letter = charNode.getAttribute(\"letter\") ?? charNode.getAttribute(\"char\") ?? String.fromCharCode(id);\n      if (letter === \"space\")\n        letter = \" \";\n      map[id] = letter;\n      data.chars[letter] = {\n        id,\n        // texture deets..\n        page: parseInt(charNode.getAttribute(\"page\"), 10) || 0,\n        x: parseInt(charNode.getAttribute(\"x\"), 10),\n        y: parseInt(charNode.getAttribute(\"y\"), 10),\n        width: parseInt(charNode.getAttribute(\"width\"), 10),\n        height: parseInt(charNode.getAttribute(\"height\"), 10),\n        // render deets..\n        xOffset: parseInt(charNode.getAttribute(\"xoffset\"), 10),\n        yOffset: parseInt(charNode.getAttribute(\"yoffset\"), 10),\n        // + baseLineOffset,\n        xAdvance: parseInt(charNode.getAttribute(\"xadvance\"), 10),\n        kerning: {}\n      };\n    }\n    for (let i = 0; i < kerning.length; i++) {\n      const first = parseInt(kerning[i].getAttribute(\"first\"), 10);\n      const second = parseInt(kerning[i].getAttribute(\"second\"), 10);\n      const amount = parseInt(kerning[i].getAttribute(\"amount\"), 10);\n      data.chars[map[second]].kerning[map[first]] = amount;\n    }\n    return data;\n  }\n};\n\nexport { bitmapFontXMLParser };\n//# sourceMappingURL=bitmapFontXMLParser.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { bitmapFontXMLParser } from './bitmapFontXMLParser.mjs';\n\n\"use strict\";\nconst bitmapFontXMLStringParser = {\n  test(data) {\n    if (typeof data === \"string\" && data.includes(\"<font>\")) {\n      return bitmapFontXMLParser.test(DOMAdapter.get().parseXML(data));\n    }\n    return false;\n  },\n  parse(data) {\n    return bitmapFontXMLParser.parse(DOMAdapter.get().parseXML(data));\n  }\n};\n\nexport { bitmapFontXMLStringParser };\n//# sourceMappingURL=bitmapFontXMLStringParser.mjs.map\n","import { Rectangle } from '../../maths/shapes/Rectangle.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { AbstractBitmapFont } from './AbstractBitmapFont.mjs';\nimport { BitmapFontManager } from './BitmapFontManager.mjs';\n\n\"use strict\";\nclass BitmapFont extends AbstractBitmapFont {\n  constructor(options, url) {\n    super();\n    const { textures, data } = options;\n    Object.keys(data.pages).forEach((key) => {\n      const pageData = data.pages[parseInt(key, 10)];\n      const texture = textures[pageData.id];\n      this.pages.push({ texture });\n    });\n    Object.keys(data.chars).forEach((key) => {\n      const charData = data.chars[key];\n      const {\n        frame: textureFrame,\n        source: textureSource\n      } = textures[charData.page];\n      const frameReal = new Rectangle(\n        charData.x + textureFrame.x,\n        charData.y + textureFrame.y,\n        charData.width,\n        charData.height\n      );\n      const texture = new Texture({\n        source: textureSource,\n        frame: frameReal\n      });\n      this.chars[key] = {\n        id: key.codePointAt(0),\n        xOffset: charData.xOffset,\n        yOffset: charData.yOffset,\n        xAdvance: charData.xAdvance,\n        kerning: charData.kerning ?? {},\n        texture\n      };\n    });\n    this.baseRenderedFontSize = data.fontSize;\n    this.baseMeasurementFontSize = data.fontSize;\n    this.fontMetrics = {\n      ascent: 0,\n      descent: 0,\n      fontSize: data.fontSize\n    };\n    this.baseLineOffset = data.baseLineOffset;\n    this.lineHeight = data.lineHeight;\n    this.fontFamily = data.fontFamily;\n    this.distanceField = data.distanceField ?? {\n      type: \"none\",\n      range: 0\n    };\n    this.url = url;\n  }\n  /** Destroys the BitmapFont object. */\n  destroy() {\n    super.destroy();\n    for (let i = 0; i < this.pages.length; i++) {\n      const { texture } = this.pages[i];\n      texture.destroy(true);\n    }\n    this.pages = null;\n  }\n  /**\n   * Generates a bitmap-font for the given style and character set\n   * @param options - Setup options for font generation.\n   * @returns Font generated by style options.\n   * @example\n   * import { BitmapFont, BitmapText } from 'pixi.js';\n   *\n   * BitmapFont.install('TitleFont', {\n   *     fontFamily: 'Arial',\n   *     fontSize: 12,\n   *     strokeThickness: 2,\n   *     fill: 'purple',\n   * });\n   *\n   * const title = new BitmapText({ text: 'This is the title', fontFamily: 'TitleFont' });\n   */\n  static install(options) {\n    BitmapFontManager.install(options);\n  }\n  /**\n   * Uninstalls a bitmap font from the cache.\n   * @param {string} name - The name of the bitmap font to uninstall.\n   */\n  static uninstall(name) {\n    BitmapFontManager.uninstall(name);\n  }\n}\n\nexport { BitmapFont };\n//# sourceMappingURL=BitmapFont.mjs.map\n","import { LoaderParserPriority } from '../../../assets/loader/parsers/LoaderParser.mjs';\nimport { copySearchParams } from '../../../assets/utils/copySearchParams.mjs';\nimport { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { path } from '../../../utils/path.mjs';\nimport { BitmapFont } from '../BitmapFont.mjs';\nimport { bitmapFontTextParser } from './bitmapFontTextParser.mjs';\nimport { bitmapFontXMLStringParser } from './bitmapFontXMLStringParser.mjs';\n\n\"use strict\";\nconst validExtensions = [\".xml\", \".fnt\"];\nconst bitmapFontCachePlugin = {\n  extension: ExtensionType.CacheParser,\n  test: (asset) => asset instanceof BitmapFont,\n  getCacheableAssets(keys, asset) {\n    const out = {};\n    keys.forEach((key) => {\n      out[key] = asset;\n    });\n    out[`${asset.fontFamily}-bitmap`] = asset;\n    return out;\n  }\n};\nconst loadBitmapFont = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Normal\n  },\n  test(url) {\n    return validExtensions.includes(path.extname(url).toLowerCase());\n  },\n  async testParse(data) {\n    return bitmapFontTextParser.test(data) || bitmapFontXMLStringParser.test(data);\n  },\n  async parse(asset, data, loader) {\n    const bitmapFontData = bitmapFontTextParser.test(asset) ? bitmapFontTextParser.parse(asset) : bitmapFontXMLStringParser.parse(asset);\n    const { src } = data;\n    const { pages } = bitmapFontData;\n    const textureUrls = [];\n    for (let i = 0; i < pages.length; ++i) {\n      const pageFile = pages[i].file;\n      let imagePath = path.join(path.dirname(src), pageFile);\n      imagePath = copySearchParams(imagePath, src);\n      textureUrls.push(imagePath);\n    }\n    const loadedTextures = await loader.load(textureUrls);\n    const textures = textureUrls.map((url) => loadedTextures[url]);\n    const bitmapFont = new BitmapFont({\n      data: bitmapFontData,\n      textures\n    }, src);\n    return bitmapFont;\n  },\n  async load(url, _options) {\n    const response = await DOMAdapter.get().fetch(url);\n    return await response.text();\n  },\n  async unload(bitmapFont, _resolvedAsset, loader) {\n    await Promise.all(bitmapFont.pages.map((page) => loader.unload(page.texture.source._sourceOrigin)));\n    bitmapFont.destroy();\n  }\n};\n\nexport { bitmapFontCachePlugin, loadBitmapFont };\n//# sourceMappingURL=loadBitmapFont.mjs.map\n","\"use strict\";\nconst localUniformMSDFBit = {\n  name: \"local-uniform-msdf-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n            struct LocalUniforms {\n                uColor:vec4<f32>,\n                uTransformMatrix:mat3x3<f32>,\n                uDistance: f32,\n                uRound:f32,\n            }\n\n            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            vColor *= localUniforms.uColor;\n            modelMatrix *= localUniforms.uTransformMatrix;\n        `\n    ),\n    end: (\n      /* wgsl */\n      `\n            if(localUniforms.uRound == 1)\n            {\n                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n            }\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* wgsl */\n      `\n            struct LocalUniforms {\n                uColor:vec4<f32>,\n                uTransformMatrix:mat3x3<f32>,\n                uDistance: f32\n            }\n\n            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;\n         `\n    ),\n    main: (\n      /* wgsl */\n      ` \n            outColor = vColor * calculateMSDFAlpha(outColor, localUniforms.uDistance);\n        `\n    )\n  }\n};\nconst localUniformMSDFBitGl = {\n  name: \"local-uniform-msdf-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n            uniform mat3 uTransformMatrix;\n            uniform vec4 uColor;\n            uniform float uRound;\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            vColor *= uColor;\n            modelMatrix *= uTransformMatrix;\n        `\n    ),\n    end: (\n      /* glsl */\n      `\n            if(uRound == 1.)\n            {\n                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n            }\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* glsl */\n      `\n            uniform float uDistance;\n         `\n    ),\n    main: (\n      /* glsl */\n      ` \n            outColor = vColor * calculateMSDFAlpha(outColor, uDistance);\n        `\n    )\n  }\n};\n\nexport { localUniformMSDFBit, localUniformMSDFBitGl };\n//# sourceMappingURL=localUniformMSDFBit.mjs.map\n","\"use strict\";\nconst mSDFBit = {\n  name: \"msdf-bit\",\n  fragment: {\n    header: (\n      /* wgsl */\n      `\n            fn calculateMSDFAlpha(msdfColor:vec4<f32>, distance:f32) -> f32 {\n                \n                // MSDF\n                var median = msdfColor.r + msdfColor.g + msdfColor.b -\n                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -\n                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));\n            \n                // SDF\n                median = min(median, msdfColor.a);\n\n                var screenPxDistance = distance * (median - 0.5);\n                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n                if (median < 0.01) {\n                    alpha = 0.0;\n                } else if (median > 0.99) {\n                    alpha = 1.0;\n                }\n\n                return alpha;\n            }\n        `\n    )\n  }\n};\nconst mSDFBitGl = {\n  name: \"msdf-bit\",\n  fragment: {\n    header: (\n      /* glsl */\n      `\n            float calculateMSDFAlpha(vec4 msdfColor, float distance) {\n                \n                // MSDF\n                float median = msdfColor.r + msdfColor.g + msdfColor.b -\n                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -\n                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));\n               \n                // SDF\n                median = min(median, msdfColor.a);\n            \n                float screenPxDistance = distance * (median - 0.5);\n                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n           \n                if (median < 0.01) {\n                    alpha = 0.0;\n                } else if (median > 0.99) {\n                    alpha = 1.0;\n                }\n\n                return alpha;\n            }\n        `\n    )\n  }\n};\n\nexport { mSDFBit, mSDFBitGl };\n//# sourceMappingURL=mSDFBit.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { MAX_TEXTURES } from '../../../rendering/batcher/shared/const.mjs';\nimport { compileHighShaderGpuProgram, compileHighShaderGlProgram } from '../../../rendering/high-shader/compileHighShaderToProgram.mjs';\nimport { colorBit, colorBitGl } from '../../../rendering/high-shader/shader-bits/colorBit.mjs';\nimport { generateTextureBatchBit, generateTextureBatchBitGl } from '../../../rendering/high-shader/shader-bits/generateTextureBatchBit.mjs';\nimport { roundPixelsBit, roundPixelsBitGl } from '../../../rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nimport { batchSamplersUniformGroup } from '../../../rendering/renderers/gl/shader/batchSamplersUniformGroup.mjs';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { localUniformMSDFBit, localUniformMSDFBitGl } from './shader-bits/localUniformMSDFBit.mjs';\nimport { mSDFBit, mSDFBitGl } from './shader-bits/mSDFBit.mjs';\n\n\"use strict\";\nclass SdfShader extends Shader {\n  constructor() {\n    const uniforms = new UniformGroup({\n      uColor: { value: new Float32Array([1, 1, 1, 1]), type: \"vec4<f32>\" },\n      uTransformMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uDistance: { value: 4, type: \"f32\" },\n      uRound: { value: 0, type: \"f32\" }\n    });\n    const gpuProgram = compileHighShaderGpuProgram({\n      name: \"sdf-shader\",\n      bits: [\n        colorBit,\n        generateTextureBatchBit(MAX_TEXTURES),\n        localUniformMSDFBit,\n        mSDFBit,\n        roundPixelsBit\n      ]\n    });\n    const glProgram = compileHighShaderGlProgram({\n      name: \"sdf-shader\",\n      bits: [\n        colorBitGl,\n        generateTextureBatchBitGl(MAX_TEXTURES),\n        localUniformMSDFBitGl,\n        mSDFBitGl,\n        roundPixelsBitGl\n      ]\n    });\n    super({\n      glProgram,\n      gpuProgram,\n      resources: {\n        localUniforms: uniforms,\n        batchSamplers: batchSamplersUniformGroup\n      }\n    });\n  }\n}\n\nexport { SdfShader };\n//# sourceMappingURL=SdfShader.mjs.map\n","import { Cache } from '../../assets/cache/Cache.mjs';\nimport { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\nimport { Graphics } from '../graphics/shared/Graphics.mjs';\nimport { SdfShader } from '../text/sdfShader/SdfShader.mjs';\nimport { BitmapFontManager } from './BitmapFontManager.mjs';\nimport { getBitmapTextLayout } from './utils/getBitmapTextLayout.mjs';\n\n\"use strict\";\nclass BitmapTextPipe {\n  constructor(renderer) {\n    this._gpuBitmapText = {};\n    this._renderer = renderer;\n  }\n  validateRenderable(bitmapText) {\n    const graphicsRenderable = this._getGpuBitmapText(bitmapText);\n    if (bitmapText._didTextUpdate) {\n      bitmapText._didTextUpdate = false;\n      this._updateContext(bitmapText, graphicsRenderable);\n    }\n    return this._renderer.renderPipes.graphics.validateRenderable(graphicsRenderable);\n  }\n  addRenderable(bitmapText, instructionSet) {\n    const graphicsRenderable = this._getGpuBitmapText(bitmapText);\n    syncWithProxy(bitmapText, graphicsRenderable);\n    if (bitmapText._didTextUpdate) {\n      bitmapText._didTextUpdate = false;\n      this._updateContext(bitmapText, graphicsRenderable);\n    }\n    this._renderer.renderPipes.graphics.addRenderable(graphicsRenderable, instructionSet);\n    if (graphicsRenderable.context.customShader) {\n      this._updateDistanceField(bitmapText);\n    }\n  }\n  destroyRenderable(bitmapText) {\n    this._destroyRenderableByUid(bitmapText.uid);\n  }\n  _destroyRenderableByUid(renderableUid) {\n    BigPool.return(this._gpuBitmapText[renderableUid]);\n    this._gpuBitmapText[renderableUid] = null;\n  }\n  updateRenderable(bitmapText) {\n    const graphicsRenderable = this._getGpuBitmapText(bitmapText);\n    syncWithProxy(bitmapText, graphicsRenderable);\n    this._renderer.renderPipes.graphics.updateRenderable(graphicsRenderable);\n    if (graphicsRenderable.context.customShader) {\n      this._updateDistanceField(bitmapText);\n    }\n  }\n  _updateContext(bitmapText, proxyGraphics) {\n    const { context } = proxyGraphics;\n    const bitmapFont = BitmapFontManager.getFont(bitmapText.text, bitmapText._style);\n    context.clear();\n    if (bitmapFont.distanceField.type !== \"none\") {\n      if (!context.customShader) {\n        if (!this._sdfShader) {\n          this._sdfShader = new SdfShader();\n        }\n        context.customShader = this._sdfShader;\n      }\n    }\n    const chars = Array.from(bitmapText.text);\n    const style = bitmapText._style;\n    let currentY = (style._stroke?.width || 0) / 2;\n    currentY += bitmapFont.baseLineOffset;\n    const bitmapTextLayout = getBitmapTextLayout(chars, style, bitmapFont);\n    let index = 0;\n    const padding = style.padding;\n    const scale = bitmapTextLayout.scale;\n    context.translate(\n      -bitmapText._anchor._x * bitmapTextLayout.width - padding,\n      -bitmapText._anchor._y * (bitmapTextLayout.height + bitmapTextLayout.offsetY) - padding\n    ).scale(scale, scale);\n    const tint = style._fill.color;\n    for (let i = 0; i < bitmapTextLayout.lines.length; i++) {\n      const line = bitmapTextLayout.lines[i];\n      for (let j = 0; j < line.charPositions.length; j++) {\n        const char = chars[index++];\n        const charData = bitmapFont.chars[char];\n        if (charData?.texture) {\n          context.texture(\n            charData.texture,\n            tint ? tint : \"black\",\n            Math.round(line.charPositions[j] + charData.xOffset),\n            Math.round(currentY + charData.yOffset)\n          );\n        }\n      }\n      currentY += bitmapFont.lineHeight;\n    }\n  }\n  _getGpuBitmapText(bitmapText) {\n    return this._gpuBitmapText[bitmapText.uid] || this.initGpuText(bitmapText);\n  }\n  initGpuText(bitmapText) {\n    const proxyRenderable = BigPool.get(Graphics);\n    this._gpuBitmapText[bitmapText.uid] = proxyRenderable;\n    this._updateContext(bitmapText, proxyRenderable);\n    bitmapText.on(\"destroyed\", () => {\n      this.destroyRenderable(bitmapText);\n    });\n    return this._gpuBitmapText[bitmapText.uid];\n  }\n  _updateDistanceField(bitmapText) {\n    const context = this._getGpuBitmapText(bitmapText).context;\n    const fontFamily = bitmapText._style.fontFamily;\n    const dynamicFont = Cache.get(`${fontFamily}-bitmap`);\n    const { a, b, c, d } = bitmapText.groupTransform;\n    const dx = Math.sqrt(a * a + b * b);\n    const dy = Math.sqrt(c * c + d * d);\n    const worldScale = (Math.abs(dx) + Math.abs(dy)) / 2;\n    const fontScale = dynamicFont.baseRenderedFontSize / bitmapText._style.fontSize;\n    const resolution = bitmapText.resolution ?? this._renderer.resolution;\n    const distance = worldScale * dynamicFont.distanceField.range * (1 / fontScale) * resolution;\n    context.customShader.resources.localUniforms.uniforms.uDistance = distance;\n  }\n  destroy() {\n    for (const uid in this._gpuBitmapText) {\n      this._destroyRenderableByUid(uid);\n    }\n    this._gpuBitmapText = null;\n    this._sdfShader?.destroy(true);\n    this._sdfShader = null;\n    this._renderer = null;\n  }\n}\n/** @ignore */\nBitmapTextPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"bitmapText\"\n};\nfunction syncWithProxy(container, proxy) {\n  proxy.groupTransform = container.groupTransform;\n  proxy.groupColorAlpha = container.groupColorAlpha;\n  proxy.groupColor = container.groupColor;\n  proxy.groupBlendMode = container.groupBlendMode;\n  proxy.globalDisplayStatus = container.globalDisplayStatus;\n  proxy.groupTransform = container.groupTransform;\n  proxy.localDisplayStatus = container.localDisplayStatus;\n  proxy.groupAlpha = container.groupAlpha;\n  proxy._roundPixels = container._roundPixels;\n}\n\nexport { BitmapTextPipe };\n//# sourceMappingURL=BitmapTextPipe.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { updateQuadBounds } from '../../utils/data/updateQuadBounds.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\nimport { BatchableSprite } from '../sprite/BatchableSprite.mjs';\n\n\"use strict\";\nclass HTMLTextPipe {\n  constructor(renderer) {\n    this._gpuText = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n  }\n  validateRenderable(htmlText) {\n    const gpuText = this._getGpuText(htmlText);\n    const newKey = htmlText._getKey();\n    if (gpuText.textureNeedsUploading) {\n      gpuText.textureNeedsUploading = false;\n      return true;\n    }\n    if (gpuText.currentKey !== newKey) {\n      return true;\n    }\n    return false;\n  }\n  addRenderable(htmlText) {\n    const gpuText = this._getGpuText(htmlText);\n    const batchableSprite = gpuText.batchableSprite;\n    if (htmlText._didTextUpdate) {\n      this._updateText(htmlText);\n    }\n    this._renderer.renderPipes.batch.addToBatch(batchableSprite);\n  }\n  updateRenderable(htmlText) {\n    const gpuText = this._getGpuText(htmlText);\n    const batchableSprite = gpuText.batchableSprite;\n    if (htmlText._didTextUpdate) {\n      this._updateText(htmlText);\n    }\n    batchableSprite.batcher.updateElement(batchableSprite);\n  }\n  destroyRenderable(htmlText) {\n    this._destroyRenderableById(htmlText.uid);\n  }\n  _destroyRenderableById(htmlTextUid) {\n    const gpuText = this._gpuText[htmlTextUid];\n    this._renderer.htmlText.decreaseReferenceCount(gpuText.currentKey);\n    BigPool.return(gpuText.batchableSprite);\n    this._gpuText[htmlTextUid] = null;\n  }\n  _updateText(htmlText) {\n    const newKey = htmlText._getKey();\n    const gpuText = this._getGpuText(htmlText);\n    const batchableSprite = gpuText.batchableSprite;\n    if (gpuText.currentKey !== newKey) {\n      this._updateGpuText(htmlText).catch((e) => {\n        console.error(e);\n      });\n    }\n    htmlText._didTextUpdate = false;\n    const padding = htmlText._style.padding;\n    updateQuadBounds(batchableSprite.bounds, htmlText._anchor, batchableSprite.texture, padding);\n  }\n  async _updateGpuText(htmlText) {\n    htmlText._didTextUpdate = false;\n    const gpuText = this._getGpuText(htmlText);\n    if (gpuText.generatingTexture)\n      return;\n    const newKey = htmlText._getKey();\n    this._renderer.htmlText.decreaseReferenceCount(gpuText.currentKey);\n    gpuText.generatingTexture = true;\n    gpuText.currentKey = newKey;\n    const resolution = htmlText.resolution ?? this._renderer.resolution;\n    const texture = await this._renderer.htmlText.getManagedTexture(\n      htmlText.text,\n      resolution,\n      htmlText._style,\n      htmlText._getKey()\n    );\n    const batchableSprite = gpuText.batchableSprite;\n    batchableSprite.texture = gpuText.texture = texture;\n    gpuText.generatingTexture = false;\n    gpuText.textureNeedsUploading = true;\n    htmlText.onViewUpdate();\n    const padding = htmlText._style.padding;\n    updateQuadBounds(batchableSprite.bounds, htmlText._anchor, batchableSprite.texture, padding);\n  }\n  _getGpuText(htmlText) {\n    return this._gpuText[htmlText.uid] || this.initGpuText(htmlText);\n  }\n  initGpuText(htmlText) {\n    const gpuTextData = {\n      texture: Texture.EMPTY,\n      currentKey: \"--\",\n      batchableSprite: BigPool.get(BatchableSprite),\n      textureNeedsUploading: false,\n      generatingTexture: false\n    };\n    const batchableSprite = gpuTextData.batchableSprite;\n    batchableSprite.renderable = htmlText;\n    batchableSprite.texture = Texture.EMPTY;\n    batchableSprite.bounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    batchableSprite.roundPixels = this._renderer._roundPixels | htmlText._roundPixels;\n    this._gpuText[htmlText.uid] = gpuTextData;\n    htmlText.on(\"destroyed\", () => {\n      this.destroyRenderable(htmlText);\n    });\n    return gpuTextData;\n  }\n  destroy() {\n    for (const i in this._gpuText) {\n      this._destroyRenderableById(i);\n    }\n    this._gpuText = null;\n    this._renderer = null;\n  }\n}\n/** @ignore */\nHTMLTextPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"htmlText\"\n};\n\nexport { HTMLTextPipe };\n//# sourceMappingURL=HTMLTextPipe.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\n\n\"use strict\";\nfunction isSafari() {\n  const { userAgent } = DOMAdapter.get().getNavigator();\n  return /^((?!chrome|android).)*safari/i.test(userAgent);\n}\n\nexport { isSafari };\n//# sourceMappingURL=isSafari.mjs.map\n","import { TexturePool } from '../../../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { Bounds } from '../../container/bounds/Bounds.mjs';\n\n\"use strict\";\nconst tempBounds = new Bounds();\nfunction getPo2TextureFromSource(image, width, height, resolution) {\n  const bounds = tempBounds;\n  bounds.minX = 0;\n  bounds.minY = 0;\n  bounds.maxX = image.width / resolution | 0;\n  bounds.maxY = image.height / resolution | 0;\n  const texture = TexturePool.getOptimalTexture(\n    bounds.width,\n    bounds.height,\n    resolution,\n    false\n  );\n  texture.source.uploadMethodId = \"image\";\n  texture.source.resource = image;\n  texture.source.alphaMode = \"premultiply-alpha-on-upload\";\n  texture.frame.width = width / resolution;\n  texture.frame.height = height / resolution;\n  texture.source.emit(\"update\", texture.source);\n  texture.updateUvs();\n  return texture;\n}\n\nexport { getPo2TextureFromSource };\n//# sourceMappingURL=getPo2TextureFromSource.mjs.map\n","\"use strict\";\nfunction extractFontFamilies(text, style) {\n  const fontFamily = style.fontFamily;\n  const fontFamilies = [];\n  const dedupe = {};\n  const regex = /font-family:([^;\"\\s]+)/g;\n  const matches = text.match(regex);\n  function addFontFamily(fontFamily2) {\n    if (!dedupe[fontFamily2]) {\n      fontFamilies.push(fontFamily2);\n      dedupe[fontFamily2] = true;\n    }\n  }\n  if (Array.isArray(fontFamily)) {\n    for (let i = 0; i < fontFamily.length; i++) {\n      addFontFamily(fontFamily[i]);\n    }\n  } else {\n    addFontFamily(fontFamily);\n  }\n  if (matches) {\n    matches.forEach((match) => {\n      const fontFamily2 = match.split(\":\")[1].trim();\n      addFontFamily(fontFamily2);\n    });\n  }\n  for (const i in style.tagStyles) {\n    const fontFamily2 = style.tagStyles[i].fontFamily;\n    addFontFamily(fontFamily2);\n  }\n  return fontFamilies;\n}\n\nexport { extractFontFamilies };\n//# sourceMappingURL=extractFontFamilies.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\n\n\"use strict\";\nasync function loadFontAsBase64(url) {\n  const response = await DOMAdapter.get().fetch(url);\n  const blob = await response.blob();\n  const reader = new FileReader();\n  const dataSrc = await new Promise((resolve, reject) => {\n    reader.onloadend = () => resolve(reader.result);\n    reader.onerror = reject;\n    reader.readAsDataURL(blob);\n  });\n  return dataSrc;\n}\n\nexport { loadFontAsBase64 };\n//# sourceMappingURL=loadFontAsBase64.mjs.map\n","import { loadFontAsBase64 } from './loadFontAsBase64.mjs';\n\n\"use strict\";\nasync function loadFontCSS(style, url) {\n  const dataSrc = await loadFontAsBase64(url);\n  return `@font-face {\n        font-family: \"${style.fontFamily}\";\n        src: url('${dataSrc}');\n        font-weight: ${style.fontWeight};\n        font-style: ${style.fontStyle};\n    }`;\n}\n\nexport { loadFontCSS };\n//# sourceMappingURL=loadFontCSS.mjs.map\n","import { Cache } from '../../../assets/cache/Cache.mjs';\nimport { loadFontCSS } from './loadFontCSS.mjs';\n\n\"use strict\";\nconst FontStylePromiseCache = /* @__PURE__ */ new Map();\nasync function getFontCss(fontFamilies, style, defaultOptions) {\n  const fontPromises = fontFamilies.filter((fontFamily) => Cache.has(`${fontFamily}-and-url`)).map((fontFamily, i) => {\n    if (!FontStylePromiseCache.has(fontFamily)) {\n      const { url } = Cache.get(`${fontFamily}-and-url`);\n      if (i === 0) {\n        FontStylePromiseCache.set(fontFamily, loadFontCSS(style, url));\n      } else {\n        FontStylePromiseCache.set(fontFamily, loadFontCSS({\n          fontWeight: defaultOptions.fontWeight,\n          fontStyle: defaultOptions.fontStyle,\n          fontFamily\n        }, url));\n      }\n    }\n    return FontStylePromiseCache.get(fontFamily);\n  });\n  return (await Promise.all(fontPromises)).join(\"\\n\");\n}\n\nexport { FontStylePromiseCache, getFontCss };\n//# sourceMappingURL=getFontCss.mjs.map\n","\"use strict\";\nfunction getSVGUrl(text, style, resolution, fontCSS, htmlTextData) {\n  const { domElement, styleElement, svgRoot } = htmlTextData;\n  domElement.innerHTML = `<style>${style.cssStyle}</style><div>${text}</div>`;\n  domElement.setAttribute(\"style\", `transform: scale(${resolution});transform-origin: top left; display: inline-block`);\n  styleElement.textContent = fontCSS;\n  const { width, height } = htmlTextData.image;\n  svgRoot.setAttribute(\"width\", width.toString());\n  svgRoot.setAttribute(\"height\", height.toString());\n  return new XMLSerializer().serializeToString(svgRoot);\n}\n\nexport { getSVGUrl };\n//# sourceMappingURL=getSVGUrl.mjs.map\n","import { CanvasPool } from '../../../rendering/renderers/shared/texture/CanvasPool.mjs';\n\n\"use strict\";\nfunction getTemporaryCanvasFromImage(image, resolution) {\n  const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(\n    image.width,\n    image.height,\n    resolution\n  );\n  const { context } = canvasAndContext;\n  context.clearRect(0, 0, image.width, image.height);\n  context.drawImage(image, 0, 0);\n  CanvasPool.returnCanvasAndContext(canvasAndContext);\n  return canvasAndContext.canvas;\n}\n\nexport { getTemporaryCanvasFromImage };\n//# sourceMappingURL=getTemporaryCanvasFromImage.mjs.map\n","\"use strict\";\nfunction loadSVGImage(image, url, delay) {\n  return new Promise(async (resolve) => {\n    if (delay) {\n      await new Promise((resolve2) => setTimeout(resolve2, 100));\n    }\n    image.onload = () => {\n      resolve();\n    };\n    image.src = `data:image/svg+xml;charset=utf8,${encodeURIComponent(url)}`;\n    image.crossOrigin = \"anonymous\";\n  });\n}\n\nexport { loadSVGImage };\n//# sourceMappingURL=loadSVGImage.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { TexturePool } from '../../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { RendererType } from '../../rendering/renderers/types.mjs';\nimport { isSafari } from '../../utils/browser/isSafari.mjs';\nimport { warn } from '../../utils/logging/warn.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\nimport { getPo2TextureFromSource } from '../text/utils/getPo2TextureFromSource.mjs';\nimport { HTMLTextRenderData } from './HTMLTextRenderData.mjs';\nimport { HTMLTextStyle } from './HtmlTextStyle.mjs';\nimport { extractFontFamilies } from './utils/extractFontFamilies.mjs';\nimport { getFontCss } from './utils/getFontCss.mjs';\nimport { getSVGUrl } from './utils/getSVGUrl.mjs';\nimport { getTemporaryCanvasFromImage } from './utils/getTemporaryCanvasFromImage.mjs';\nimport { loadSVGImage } from './utils/loadSVGImage.mjs';\nimport { measureHtmlText } from './utils/measureHtmlText.mjs';\n\n\"use strict\";\nclass HTMLTextSystem {\n  constructor(renderer) {\n    this._activeTextures = {};\n    this._renderer = renderer;\n    this._createCanvas = renderer.type === RendererType.WEBGPU;\n  }\n  getTexture(options) {\n    return this._buildTexturePromise(\n      options.text,\n      options.resolution,\n      options.style\n    );\n  }\n  getManagedTexture(text, resolution, style, textKey) {\n    if (this._activeTextures[textKey]) {\n      this._increaseReferenceCount(textKey);\n      return this._activeTextures[textKey].promise;\n    }\n    const promise = this._buildTexturePromise(text, resolution, style).then((texture) => {\n      this._activeTextures[textKey].texture = texture;\n      return texture;\n    });\n    this._activeTextures[textKey] = {\n      texture: null,\n      promise,\n      usageCount: 1\n    };\n    return promise;\n  }\n  async _buildTexturePromise(text, resolution, style) {\n    const htmlTextData = BigPool.get(HTMLTextRenderData);\n    const fontFamilies = extractFontFamilies(text, style);\n    const fontCSS = await getFontCss(\n      fontFamilies,\n      style,\n      HTMLTextStyle.defaultTextStyle\n    );\n    const measured = measureHtmlText(text, style, fontCSS, htmlTextData);\n    const width = Math.ceil(Math.ceil(Math.max(1, measured.width) + style.padding * 2) * resolution);\n    const height = Math.ceil(Math.ceil(Math.max(1, measured.height) + style.padding * 2) * resolution);\n    const image = htmlTextData.image;\n    image.width = width | 0;\n    image.height = height | 0;\n    const svgURL = getSVGUrl(text, style, resolution, fontCSS, htmlTextData);\n    await loadSVGImage(image, svgURL, isSafari() && fontFamilies.length > 0);\n    let resource = image;\n    if (this._createCanvas) {\n      resource = getTemporaryCanvasFromImage(image, resolution);\n    }\n    const texture = getPo2TextureFromSource(resource, image.width, image.height, resolution);\n    if (this._createCanvas) {\n      this._renderer.texture.initSource(texture.source);\n    }\n    BigPool.return(htmlTextData);\n    return texture;\n  }\n  _increaseReferenceCount(textKey) {\n    this._activeTextures[textKey].usageCount++;\n  }\n  decreaseReferenceCount(textKey) {\n    const activeTexture = this._activeTextures[textKey];\n    if (!activeTexture)\n      return;\n    activeTexture.usageCount--;\n    if (activeTexture.usageCount === 0) {\n      if (activeTexture.texture) {\n        this._cleanUp(activeTexture);\n      } else {\n        activeTexture.promise.then((texture) => {\n          activeTexture.texture = texture;\n          this._cleanUp(activeTexture);\n        }).catch(() => {\n          warn(\"HTMLTextSystem: Failed to clean texture\");\n        });\n      }\n      this._activeTextures[textKey] = null;\n    }\n  }\n  _cleanUp(activeTexture) {\n    TexturePool.returnTexture(activeTexture.texture);\n    activeTexture.texture.source.resource = null;\n    activeTexture.texture.source.uploadMethodId = \"unknown\";\n  }\n  getReferenceCount(textKey) {\n    return this._activeTextures[textKey].usageCount;\n  }\n  destroy() {\n    this._activeTextures = null;\n  }\n}\n/** @ignore */\nHTMLTextSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"htmlText\"\n};\nHTMLTextSystem.defaultFontOptions = {\n  fontFamily: \"Arial\",\n  fontStyle: \"normal\",\n  fontWeight: \"normal\"\n};\n\nexport { HTMLTextSystem };\n//# sourceMappingURL=HTMLTextSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { updateQuadBounds } from '../../../utils/data/updateQuadBounds.mjs';\nimport { BigPool } from '../../../utils/pool/PoolGroup.mjs';\nimport { BatchableSprite } from '../../sprite/BatchableSprite.mjs';\n\n\"use strict\";\nclass CanvasTextPipe {\n  constructor(renderer) {\n    this._gpuText = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n  }\n  validateRenderable(text) {\n    const gpuText = this._getGpuText(text);\n    const newKey = text._getKey();\n    if (gpuText.currentKey !== newKey) {\n      const resolution = text.resolution ?? this._renderer.resolution;\n      const { width, height } = this._renderer.canvasText.getTextureSize(\n        text.text,\n        resolution,\n        text._style\n      );\n      if (\n        // is only being used by this text:\n        this._renderer.canvasText.getReferenceCount(gpuText.currentKey) === 1 && width === gpuText.texture._source.width && height === gpuText.texture._source.height\n      ) {\n        return false;\n      }\n      return true;\n    }\n    return false;\n  }\n  addRenderable(text, _instructionSet) {\n    const gpuText = this._getGpuText(text);\n    const batchableSprite = gpuText.batchableSprite;\n    if (text._didTextUpdate) {\n      this._updateText(text);\n    }\n    this._renderer.renderPipes.batch.addToBatch(batchableSprite);\n  }\n  updateRenderable(text) {\n    const gpuText = this._getGpuText(text);\n    const batchableSprite = gpuText.batchableSprite;\n    if (text._didTextUpdate) {\n      this._updateText(text);\n    }\n    batchableSprite.batcher.updateElement(batchableSprite);\n  }\n  destroyRenderable(text) {\n    this._destroyRenderableById(text.uid);\n  }\n  _destroyRenderableById(textUid) {\n    const gpuText = this._gpuText[textUid];\n    this._renderer.canvasText.decreaseReferenceCount(gpuText.currentKey);\n    BigPool.return(gpuText.batchableSprite);\n    this._gpuText[textUid] = null;\n  }\n  _updateText(text) {\n    const newKey = text._getKey();\n    const gpuText = this._getGpuText(text);\n    const batchableSprite = gpuText.batchableSprite;\n    if (gpuText.currentKey !== newKey) {\n      this._updateGpuText(text);\n    }\n    text._didTextUpdate = false;\n    const padding = text._style.padding;\n    updateQuadBounds(batchableSprite.bounds, text._anchor, batchableSprite.texture, padding);\n  }\n  _updateGpuText(text) {\n    const gpuText = this._getGpuText(text);\n    const batchableSprite = gpuText.batchableSprite;\n    if (gpuText.texture) {\n      this._renderer.canvasText.decreaseReferenceCount(gpuText.currentKey);\n    }\n    gpuText.texture = batchableSprite.texture = this._renderer.canvasText.getManagedTexture(text);\n    gpuText.currentKey = text._getKey();\n    batchableSprite.texture = gpuText.texture;\n  }\n  _getGpuText(text) {\n    return this._gpuText[text.uid] || this.initGpuText(text);\n  }\n  initGpuText(text) {\n    const gpuTextData = {\n      texture: null,\n      currentKey: \"--\",\n      batchableSprite: BigPool.get(BatchableSprite)\n    };\n    gpuTextData.batchableSprite.renderable = text;\n    gpuTextData.batchableSprite.bounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    gpuTextData.batchableSprite.roundPixels = this._renderer._roundPixels | text._roundPixels;\n    this._gpuText[text.uid] = gpuTextData;\n    this._updateText(text);\n    text.on(\"destroyed\", () => {\n      this.destroyRenderable(text);\n    });\n    return gpuTextData;\n  }\n  destroy() {\n    for (const i in this._gpuText) {\n      this._destroyRenderableById(i);\n    }\n    this._gpuText = null;\n    this._renderer = null;\n  }\n}\n/** @ignore */\nCanvasTextPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"text\"\n};\n\nexport { CanvasTextPipe };\n//# sourceMappingURL=CanvasTextPipe.mjs.map\n","import { Rectangle } from '../../maths/shapes/Rectangle.mjs';\n\n\"use strict\";\nfunction checkRow(data, width, y) {\n  for (let x = 0, index = 4 * y * width; x < width; ++x, index += 4) {\n    if (data[index + 3] !== 0)\n      return false;\n  }\n  return true;\n}\nfunction checkColumn(data, width, x, top, bottom) {\n  const stride = 4 * width;\n  for (let y = top, index = top * stride + 4 * x; y <= bottom; ++y, index += stride) {\n    if (data[index + 3] !== 0)\n      return false;\n  }\n  return true;\n}\nfunction getCanvasBoundingBox(canvas, resolution = 1) {\n  const { width, height } = canvas;\n  const context = canvas.getContext(\"2d\", {\n    willReadFrequently: true\n  });\n  if (context === null) {\n    throw new TypeError(\"Failed to get canvas 2D context\");\n  }\n  const imageData = context.getImageData(0, 0, width, height);\n  const data = imageData.data;\n  let left = 0;\n  let top = 0;\n  let right = width - 1;\n  let bottom = height - 1;\n  while (top < height && checkRow(data, width, top))\n    ++top;\n  if (top === height)\n    return Rectangle.EMPTY;\n  while (checkRow(data, width, bottom))\n    --bottom;\n  while (checkColumn(data, width, left, top, bottom))\n    ++left;\n  while (checkColumn(data, width, right, top, bottom))\n    --right;\n  ++right;\n  ++bottom;\n  return new Rectangle(left / resolution, top / resolution, (right - left) / resolution, (bottom - top) / resolution);\n}\n\nexport { getCanvasBoundingBox };\n//# sourceMappingURL=getCanvasBoundingBox.mjs.map\n","import { Color } from '../../../color/Color.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { nextPow2 } from '../../../maths/misc/pow2.mjs';\nimport { CanvasPool } from '../../../rendering/renderers/shared/texture/CanvasPool.mjs';\nimport { TexturePool } from '../../../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { getCanvasBoundingBox } from '../../../utils/canvas/getCanvasBoundingBox.mjs';\nimport { deprecation } from '../../../utils/logging/deprecation.mjs';\nimport { TextStyle } from '../TextStyle.mjs';\nimport { getPo2TextureFromSource } from '../utils/getPo2TextureFromSource.mjs';\nimport { CanvasTextMetrics } from './CanvasTextMetrics.mjs';\nimport { fontStringFromTextStyle } from './utils/fontStringFromTextStyle.mjs';\nimport { getCanvasFillStyle } from './utils/getCanvasFillStyle.mjs';\n\n\"use strict\";\nclass CanvasTextSystem {\n  constructor(_renderer) {\n    this._activeTextures = {};\n    this._renderer = _renderer;\n  }\n  getTextureSize(text, resolution, style) {\n    const measured = CanvasTextMetrics.measureText(text || \" \", style);\n    let width = Math.ceil(Math.ceil(Math.max(1, measured.width) + style.padding * 2) * resolution);\n    let height = Math.ceil(Math.ceil(Math.max(1, measured.height) + style.padding * 2) * resolution);\n    width = Math.ceil(width - 1e-6);\n    height = Math.ceil(height - 1e-6);\n    width = nextPow2(width);\n    height = nextPow2(height);\n    return { width, height };\n  }\n  getTexture(options, resolution, style, _textKey) {\n    if (typeof options === \"string\") {\n      deprecation(\"8.0.0\", \"CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments\");\n      options = {\n        text: options,\n        style,\n        resolution\n      };\n    }\n    if (!(options.style instanceof TextStyle)) {\n      options.style = new TextStyle(options.style);\n    }\n    const { texture, canvasAndContext } = this.createTextureAndCanvas(\n      options\n    );\n    this._renderer.texture.initSource(texture._source);\n    CanvasPool.returnCanvasAndContext(canvasAndContext);\n    return texture;\n  }\n  createTextureAndCanvas(options) {\n    const { text, style } = options;\n    const resolution = options.resolution ?? this._renderer.resolution;\n    const measured = CanvasTextMetrics.measureText(text || \" \", style);\n    const width = Math.ceil(Math.ceil(Math.max(1, measured.width) + style.padding * 2) * resolution);\n    const height = Math.ceil(Math.ceil(Math.max(1, measured.height) + style.padding * 2) * resolution);\n    const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(width, height);\n    const { canvas } = canvasAndContext;\n    this.renderTextToCanvas(text, style, resolution, canvasAndContext);\n    const texture = getPo2TextureFromSource(canvas, width, height, resolution);\n    if (style.trim) {\n      const trimmed = getCanvasBoundingBox(canvas, resolution);\n      texture.frame.copyFrom(trimmed);\n      texture.updateUvs();\n    }\n    return { texture, canvasAndContext };\n  }\n  getManagedTexture(text) {\n    const textKey = text._getKey();\n    if (this._activeTextures[textKey]) {\n      this._increaseReferenceCount(textKey);\n      return this._activeTextures[textKey].texture;\n    }\n    const { texture, canvasAndContext } = this.createTextureAndCanvas(text);\n    this._activeTextures[textKey] = {\n      canvasAndContext,\n      texture,\n      usageCount: 1\n    };\n    return texture;\n  }\n  _increaseReferenceCount(textKey) {\n    this._activeTextures[textKey].usageCount++;\n  }\n  decreaseReferenceCount(textKey) {\n    const activeTexture = this._activeTextures[textKey];\n    activeTexture.usageCount--;\n    if (activeTexture.usageCount === 0) {\n      CanvasPool.returnCanvasAndContext(activeTexture.canvasAndContext);\n      TexturePool.returnTexture(activeTexture.texture);\n      const source = activeTexture.texture.source;\n      source.resource = null;\n      source.uploadMethodId = \"unknown\";\n      source.alphaMode = \"no-premultiply-alpha\";\n      this._activeTextures[textKey] = null;\n    }\n  }\n  getReferenceCount(textKey) {\n    return this._activeTextures[textKey].usageCount;\n  }\n  /**\n   * Renders text to its canvas, and updates its texture.\n   *\n   * By default this is used internally to ensure the texture is correct before rendering,\n   * but it can be used called externally, for example from this class to 'pre-generate' the texture from a piece of text,\n   * and then shared across multiple Sprites.\n   * @param text\n   * @param style\n   * @param resolution\n   * @param canvasAndContext\n   */\n  renderTextToCanvas(text, style, resolution, canvasAndContext) {\n    const { canvas, context } = canvasAndContext;\n    const font = fontStringFromTextStyle(style);\n    const measured = CanvasTextMetrics.measureText(text || \" \", style);\n    const lines = measured.lines;\n    const lineHeight = measured.lineHeight;\n    const lineWidths = measured.lineWidths;\n    const maxLineWidth = measured.maxLineWidth;\n    const fontProperties = measured.fontProperties;\n    const height = canvas.height;\n    context.resetTransform();\n    context.scale(resolution, resolution);\n    const padding = style.padding * 2;\n    context.clearRect(0, 0, measured.width + 4 + padding, measured.height + 4 + padding);\n    if (style._stroke?.width) {\n      const strokeStyle = style._stroke;\n      context.lineWidth = strokeStyle.width;\n      context.miterLimit = strokeStyle.miterLimit;\n      context.lineJoin = strokeStyle.join;\n      context.lineCap = strokeStyle.cap;\n    }\n    context.font = font;\n    let linePositionX;\n    let linePositionY;\n    const passesCount = style.dropShadow ? 2 : 1;\n    for (let i = 0; i < passesCount; ++i) {\n      const isShadowPass = style.dropShadow && i === 0;\n      const dsOffsetText = isShadowPass ? Math.ceil(Math.max(1, height) + style.padding * 2) : 0;\n      const dsOffsetShadow = dsOffsetText * resolution;\n      if (isShadowPass) {\n        context.fillStyle = \"black\";\n        context.strokeStyle = \"black\";\n        const shadowOptions = style.dropShadow;\n        const dropShadowColor = shadowOptions.color;\n        const dropShadowAlpha = shadowOptions.alpha;\n        context.shadowColor = Color.shared.setValue(dropShadowColor).setAlpha(dropShadowAlpha).toRgbaString();\n        const dropShadowBlur = shadowOptions.blur * resolution;\n        const dropShadowDistance = shadowOptions.distance * resolution;\n        context.shadowBlur = dropShadowBlur;\n        context.shadowOffsetX = Math.cos(shadowOptions.angle) * dropShadowDistance;\n        context.shadowOffsetY = Math.sin(shadowOptions.angle) * dropShadowDistance + dsOffsetShadow;\n      } else {\n        context.globalAlpha = style._fill?.alpha ?? 1;\n        context.fillStyle = style._fill ? getCanvasFillStyle(style._fill, context) : null;\n        if (style._stroke?.width) {\n          context.strokeStyle = getCanvasFillStyle(style._stroke, context);\n        }\n        context.shadowColor = \"black\";\n      }\n      let linePositionYShift = (lineHeight - fontProperties.fontSize) / 2;\n      if (lineHeight - fontProperties.fontSize < 0) {\n        linePositionYShift = 0;\n      }\n      const strokeWidth = style._stroke?.width ?? 0;\n      for (let i2 = 0; i2 < lines.length; i2++) {\n        linePositionX = strokeWidth / 2;\n        linePositionY = strokeWidth / 2 + i2 * lineHeight + fontProperties.ascent + linePositionYShift;\n        if (style.align === \"right\") {\n          linePositionX += maxLineWidth - lineWidths[i2];\n        } else if (style.align === \"center\") {\n          linePositionX += (maxLineWidth - lineWidths[i2]) / 2;\n        }\n        if (style._stroke?.width) {\n          this._drawLetterSpacing(\n            lines[i2],\n            style,\n            canvasAndContext,\n            linePositionX + style.padding,\n            linePositionY + style.padding - dsOffsetText,\n            true\n          );\n        }\n        if (style._fill !== void 0) {\n          this._drawLetterSpacing(\n            lines[i2],\n            style,\n            canvasAndContext,\n            linePositionX + style.padding,\n            linePositionY + style.padding - dsOffsetText\n          );\n        }\n      }\n    }\n  }\n  /**\n   * Render the text with letter-spacing.\n   * @param text - The text to draw\n   * @param style\n   * @param canvasAndContext\n   * @param x - Horizontal position to draw the text\n   * @param y - Vertical position to draw the text\n   * @param isStroke - Is this drawing for the outside stroke of the\n   *  text? If not, it's for the inside fill\n   */\n  _drawLetterSpacing(text, style, canvasAndContext, x, y, isStroke = false) {\n    const { context } = canvasAndContext;\n    const letterSpacing = style.letterSpacing;\n    let useExperimentalLetterSpacing = false;\n    if (CanvasTextMetrics.experimentalLetterSpacingSupported) {\n      if (CanvasTextMetrics.experimentalLetterSpacing) {\n        context.letterSpacing = `${letterSpacing}px`;\n        context.textLetterSpacing = `${letterSpacing}px`;\n        useExperimentalLetterSpacing = true;\n      } else {\n        context.letterSpacing = \"0px\";\n        context.textLetterSpacing = \"0px\";\n      }\n    }\n    if (letterSpacing === 0 || useExperimentalLetterSpacing) {\n      if (isStroke) {\n        context.strokeText(text, x, y);\n      } else {\n        context.fillText(text, x, y);\n      }\n      return;\n    }\n    let currentPosition = x;\n    const stringArray = CanvasTextMetrics.graphemeSegmenter(text);\n    let previousWidth = context.measureText(text).width;\n    let currentWidth = 0;\n    for (let i = 0; i < stringArray.length; ++i) {\n      const currentChar = stringArray[i];\n      if (isStroke) {\n        context.strokeText(currentChar, currentPosition, y);\n      } else {\n        context.fillText(currentChar, currentPosition, y);\n      }\n      let textStr = \"\";\n      for (let j = i + 1; j < stringArray.length; ++j) {\n        textStr += stringArray[j];\n      }\n      currentWidth = context.measureText(textStr).width;\n      currentPosition += previousWidth - currentWidth + letterSpacing;\n      previousWidth = currentWidth;\n    }\n  }\n  destroy() {\n    this._activeTextures = null;\n  }\n}\n/** @ignore */\nCanvasTextSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"canvasText\"\n};\n\nexport { CanvasTextSystem };\n//# sourceMappingURL=CanvasTextSystem.mjs.map\n","import { browserExt } from './environment-browser/browserExt.mjs';\nimport { webworkerExt } from './environment-webworker/webworkerExt.mjs';\nimport { extensions } from './extensions/Extensions.mjs';\nexport { ExtensionType, normalizeExtensionPriority } from './extensions/Extensions.mjs';\nimport './rendering/init.mjs';\nimport './spritesheet/init.mjs';\nimport './accessibility/index.mjs';\nimport './advanced-blend-modes/index.mjs';\nimport './app/index.mjs';\nimport './assets/index.mjs';\nimport './color/index.mjs';\nimport './compressed-textures/index.mjs';\nimport './culling/index.mjs';\nimport './environment/index.mjs';\nimport './environment-browser/index.mjs';\nimport './environment-webworker/index.mjs';\nimport './events/index.mjs';\nimport './extensions/index.mjs';\nimport './filters/index.mjs';\nimport './maths/index.mjs';\nimport './prepare/index.mjs';\nimport './rendering/index.mjs';\nimport './scene/index.mjs';\nimport './spritesheet/index.mjs';\nimport './ticker/index.mjs';\nimport './utils/index.mjs';\nexport { AccessibilitySystem } from './accessibility/AccessibilitySystem.mjs';\nexport { accessibilityTarget } from './accessibility/accessibilityTarget.mjs';\nexport { ColorBlend } from './advanced-blend-modes/ColorBlend.mjs';\nexport { ColorBurnBlend } from './advanced-blend-modes/ColorBurnBlend.mjs';\nexport { ColorDodgeBlend } from './advanced-blend-modes/ColorDodgeBlend.mjs';\nexport { DarkenBlend } from './advanced-blend-modes/DarkenBlend.mjs';\nexport { DifferenceBlend } from './advanced-blend-modes/DifferenceBlend.mjs';\nexport { DivideBlend } from './advanced-blend-modes/DivideBlend.mjs';\nexport { ExclusionBlend } from './advanced-blend-modes/ExclusionBlend.mjs';\nexport { HardLightBlend } from './advanced-blend-modes/HardLightBlend.mjs';\nexport { HardMixBlend } from './advanced-blend-modes/HardMixBlend.mjs';\nexport { LightenBlend } from './advanced-blend-modes/LightenBlend.mjs';\nexport { LinearBurnBlend } from './advanced-blend-modes/LinearBurnBlend.mjs';\nexport { LinearDodgeBlend } from './advanced-blend-modes/LinearDodgeBlend.mjs';\nexport { LinearLightBlend } from './advanced-blend-modes/LinearLightBlend.mjs';\nexport { LuminosityBlend } from './advanced-blend-modes/LuminosityBlend.mjs';\nexport { NegationBlend } from './advanced-blend-modes/NegationBlend.mjs';\nexport { OverlayBlend } from './advanced-blend-modes/OverlayBlend.mjs';\nexport { PinLightBlend } from './advanced-blend-modes/PinLightBlend.mjs';\nexport { SaturationBlend } from './advanced-blend-modes/SaturationBlend.mjs';\nexport { SoftLightBlend } from './advanced-blend-modes/SoftLightBlend.mjs';\nexport { SubtractBlend } from './advanced-blend-modes/SubtractBlend.mjs';\nexport { VividLightBlend } from './advanced-blend-modes/VividLightBlend.mjs';\nexport { Application } from './app/Application.mjs';\nexport { ResizePlugin } from './app/ResizePlugin.mjs';\nexport { TickerPlugin } from './app/TickerPlugin.mjs';\nexport { Assets, AssetsClass } from './assets/Assets.mjs';\nexport { BackgroundLoader } from './assets/BackgroundLoader.mjs';\nexport { Cache } from './assets/cache/Cache.mjs';\nexport { cacheTextureArray } from './assets/cache/parsers/cacheTextureArray.mjs';\nexport { detectAvif } from './assets/detections/parsers/detectAvif.mjs';\nexport { detectDefaults } from './assets/detections/parsers/detectDefaults.mjs';\nexport { detectMp4 } from './assets/detections/parsers/detectMp4.mjs';\nexport { detectOgv } from './assets/detections/parsers/detectOgv.mjs';\nexport { detectWebm } from './assets/detections/parsers/detectWebm.mjs';\nexport { detectWebp } from './assets/detections/parsers/detectWebp.mjs';\nexport { testImageFormat } from './assets/detections/utils/testImageFormat.mjs';\nexport { testVideoFormat } from './assets/detections/utils/testVideoFormat.mjs';\nexport { Loader } from './assets/loader/Loader.mjs';\nexport { LoaderParserPriority } from './assets/loader/parsers/LoaderParser.mjs';\nexport { loadJson } from './assets/loader/parsers/loadJson.mjs';\nexport { loadTxt } from './assets/loader/parsers/loadTxt.mjs';\nexport { getFontFamilyName, loadWebFont } from './assets/loader/parsers/loadWebFont.mjs';\nexport { loadSvg } from './assets/loader/parsers/textures/loadSVG.mjs';\nexport { loadImageBitmap, loadTextures } from './assets/loader/parsers/textures/loadTextures.mjs';\nexport { crossOrigin, determineCrossOrigin, loadVideoTextures, preloadVideo } from './assets/loader/parsers/textures/loadVideoTextures.mjs';\nexport { createTexture } from './assets/loader/parsers/textures/utils/createTexture.mjs';\nexport { WorkerManager } from './assets/loader/workers/WorkerManager.mjs';\nexport { resolveJsonUrl } from './assets/resolver/parsers/resolveJsonUrl.mjs';\nexport { resolveTextureUrl } from './assets/resolver/parsers/resolveTextureUrl.mjs';\nexport { Resolver, getUrlExtension } from './assets/resolver/Resolver.mjs';\nexport { checkDataUrl } from './assets/utils/checkDataUrl.mjs';\nexport { checkExtension } from './assets/utils/checkExtension.mjs';\nexport { convertToList } from './assets/utils/convertToList.mjs';\nexport { copySearchParams } from './assets/utils/copySearchParams.mjs';\nexport { createStringVariations } from './assets/utils/createStringVariations.mjs';\nexport { isSingleItem } from './assets/utils/isSingleItem.mjs';\nexport { Color } from './color/Color.mjs';\nexport { detectBasis } from './compressed-textures/basis/detectBasis.mjs';\nexport { loadBasis } from './compressed-textures/basis/loadBasis.mjs';\nexport { createLevelBuffers } from './compressed-textures/basis/utils/createLevelBuffers.mjs';\nexport { gpuFormatToBasisTranscoderFormat } from './compressed-textures/basis/utils/gpuFormatToBasisTranscoderFormat.mjs';\nexport { basisTranscoderUrls, setBasisTranscoderPath } from './compressed-textures/basis/utils/setBasisTranscoderPath.mjs';\nexport { loadBasisOnWorker } from './compressed-textures/basis/worker/loadBasisOnWorker.mjs';\nexport { DDS, DXGI_TO_TEXTURE_FORMAT, FOURCC_TO_TEXTURE_FORMAT, TEXTURE_FORMAT_BLOCK_SIZE } from './compressed-textures/dds/const.mjs';\nexport { loadDDS } from './compressed-textures/dds/loadDDS.mjs';\nexport { parseDDS } from './compressed-textures/dds/parseDDS.mjs';\nexport { loadKTX } from './compressed-textures/ktx/loadKTX.mjs';\nexport { parseKTX } from './compressed-textures/ktx/parseKTX.mjs';\nexport { GL_INTERNAL_FORMAT, KTX } from './compressed-textures/ktx2/const.mjs';\nexport { loadKTX2 } from './compressed-textures/ktx2/loadKTX2.mjs';\nexport { convertFormatIfRequired } from './compressed-textures/ktx2/utils/convertFormatIfRequired.mjs';\nexport { createLevelBuffersFromKTX } from './compressed-textures/ktx2/utils/createLevelBuffersFromKTX.mjs';\nexport { getTextureFormatFromKTXTexture } from './compressed-textures/ktx2/utils/getTextureFormatFromKTXTexture.mjs';\nexport { glFormatToGPUFormat } from './compressed-textures/ktx2/utils/glFormatToGPUFormat.mjs';\nexport { gpuFormatToKTXBasisTranscoderFormat } from './compressed-textures/ktx2/utils/gpuFormatToKTXBasisTranscoderFormat.mjs';\nexport { ktxTranscoderUrls, setKTXTranscoderPath } from './compressed-textures/ktx2/utils/setKTXTranscoderPath.mjs';\nexport { vkFormatToGPUFormat } from './compressed-textures/ktx2/utils/vkFormatToGPUFormat.mjs';\nexport { loadKTX2onWorker } from './compressed-textures/ktx2/worker/loadKTX2onWorker.mjs';\nexport { detectCompressed } from './compressed-textures/shared/detectCompressed.mjs';\nexport { resolveCompressedTextureUrl, validFormats } from './compressed-textures/shared/resolveCompressedTextureUrl.mjs';\nexport { Culler } from './culling/Culler.mjs';\nexport { CullerPlugin } from './culling/CullerPlugin.mjs';\nexport { cullingMixin } from './culling/cullingMixin.mjs';\nexport { DOMAdapter } from './environment/adapter.mjs';\nexport { autoDetectEnvironment } from './environment/autoDetectEnvironment.mjs';\nexport { BrowserAdapter } from './environment-browser/BrowserAdapter.mjs';\nexport { WebWorkerAdapter } from './environment-webworker/WebWorkerAdapter.mjs';\nexport { EventBoundary } from './events/EventBoundary.mjs';\nexport { EventSystem } from './events/EventSystem.mjs';\nexport { EventsTicker } from './events/EventTicker.mjs';\nexport { FederatedEvent } from './events/FederatedEvent.mjs';\nexport { FederatedContainer } from './events/FederatedEventTarget.mjs';\nexport { FederatedMouseEvent } from './events/FederatedMouseEvent.mjs';\nexport { FederatedPointerEvent } from './events/FederatedPointerEvent.mjs';\nexport { FederatedWheelEvent } from './events/FederatedWheelEvent.mjs';\nexport { default as blendTemplateFrag } from './filters/blend-modes/blend-template.frag.mjs';\nexport { default as blendTemplateVert } from './filters/blend-modes/blend-template.vert.mjs';\nexport { default as blendTemplateWgsl } from './filters/blend-modes/blend-template.wgsl.mjs';\nexport { default as hslWgsl } from './filters/blend-modes/hsl.wgsl.mjs';\nexport { default as alphaFrag } from './filters/defaults/alpha/alpha.frag.mjs';\nexport { default as alphaWgsl } from './filters/defaults/alpha/alpha.wgsl.mjs';\nexport { default as blurTemplateWgsl } from './filters/defaults/blur/gpu/blur-template.wgsl.mjs';\nexport { default as colorMatrixFilterFrag } from './filters/defaults/color-matrix/colorMatrixFilter.frag.mjs';\nexport { default as colorMatrixFilterWgsl } from './filters/defaults/color-matrix/colorMatrixFilter.wgsl.mjs';\nexport { default as defaultFilterVert } from './filters/defaults/defaultFilter.vert.mjs';\nexport { default as displacementFrag } from './filters/defaults/displacement/displacement.frag.mjs';\nexport { default as displacementVert } from './filters/defaults/displacement/displacement.vert.mjs';\nexport { default as displacementWgsl } from './filters/defaults/displacement/displacement.wgsl.mjs';\nexport { default as noiseFrag } from './filters/defaults/noise/noise.frag.mjs';\nexport { default as noiseWgsl } from './filters/defaults/noise/noise.wgsl.mjs';\nexport { default as maskFrag } from './filters/mask/mask.frag.mjs';\nexport { default as maskVert } from './filters/mask/mask.vert.mjs';\nexport { default as maskWgsl } from './filters/mask/mask.wgsl.mjs';\nexport { BlendModeFilter } from './filters/blend-modes/BlendModeFilter.mjs';\nexport { hslgl } from './filters/blend-modes/hls/GLhls.mjs';\nexport { hslgpu } from './filters/blend-modes/hls/GPUhls.mjs';\nexport { AlphaFilter } from './filters/defaults/alpha/AlphaFilter.mjs';\nexport { BlurFilter } from './filters/defaults/blur/BlurFilter.mjs';\nexport { BlurFilterPass } from './filters/defaults/blur/BlurFilterPass.mjs';\nexport { GAUSSIAN_VALUES } from './filters/defaults/blur/const.mjs';\nexport { generateBlurFragSource } from './filters/defaults/blur/gl/generateBlurFragSource.mjs';\nexport { generateBlurGlProgram } from './filters/defaults/blur/gl/generateBlurGlProgram.mjs';\nexport { generateBlurVertSource } from './filters/defaults/blur/gl/generateBlurVertSource.mjs';\nexport { generateBlurProgram } from './filters/defaults/blur/gpu/generateBlurProgram.mjs';\nexport { ColorMatrixFilter } from './filters/defaults/color-matrix/ColorMatrixFilter.mjs';\nexport { DisplacementFilter } from './filters/defaults/displacement/DisplacementFilter.mjs';\nexport { NoiseFilter } from './filters/defaults/noise/NoiseFilter.mjs';\nexport { Filter } from './filters/Filter.mjs';\nexport { FilterEffect } from './filters/FilterEffect.mjs';\nexport { FilterPipe } from './filters/FilterPipe.mjs';\nexport { FilterSystem } from './filters/FilterSystem.mjs';\nexport { MaskFilter } from './filters/mask/MaskFilter.mjs';\nexport { groupD8 } from './maths/matrix/groupD8.mjs';\nexport { Matrix } from './maths/matrix/Matrix.mjs';\nexport { DEG_TO_RAD, PI_2, RAD_TO_DEG } from './maths/misc/const.mjs';\nexport { isPow2, log2, nextPow2 } from './maths/misc/pow2.mjs';\nexport { squaredDistanceToLineSegment } from './maths/misc/squaredDistanceToLineSegment.mjs';\nexport { ObservablePoint } from './maths/point/ObservablePoint.mjs';\nexport { Point } from './maths/point/Point.mjs';\nexport { pointInTriangle } from './maths/point/pointInTriangle.mjs';\nexport { Circle } from './maths/shapes/Circle.mjs';\nexport { Ellipse } from './maths/shapes/Ellipse.mjs';\nexport { Polygon } from './maths/shapes/Polygon.mjs';\nexport { Rectangle } from './maths/shapes/Rectangle.mjs';\nexport { RoundedRectangle } from './maths/shapes/RoundedRectangle.mjs';\nexport { Triangle } from './maths/shapes/Triangle.mjs';\nexport { PrepareBase } from './prepare/PrepareBase.mjs';\nexport { PrepareQueue } from './prepare/PrepareQueue.mjs';\nexport { PrepareSystem } from './prepare/PrepareSystem.mjs';\nexport { PrepareUpload } from './prepare/PrepareUpload.mjs';\nexport { GlBatchAdaptor } from './rendering/batcher/gl/GlBatchAdaptor.mjs';\nexport { BatchGeometry } from './rendering/batcher/gpu/BatchGeometry.mjs';\nexport { generateGPULayout } from './rendering/batcher/gpu/generateGPULayout.mjs';\nexport { generateLayout } from './rendering/batcher/gpu/generateLayout.mjs';\nexport { getTextureBatchBindGroup } from './rendering/batcher/gpu/getTextureBatchBindGroup.mjs';\nexport { GpuBatchAdaptor } from './rendering/batcher/gpu/GpuBatchAdaptor.mjs';\nexport { Batch, Batcher } from './rendering/batcher/shared/Batcher.mjs';\nexport { BatcherPipe } from './rendering/batcher/shared/BatcherPipe.mjs';\nexport { BatchTextureArray } from './rendering/batcher/shared/BatchTextureArray.mjs';\nexport { MAX_TEXTURES } from './rendering/batcher/shared/const.mjs';\nexport { compileHighShaderGlProgram, compileHighShaderGpuProgram } from './rendering/high-shader/compileHighShaderToProgram.mjs';\nexport { compileHighShader, compileHighShaderGl } from './rendering/high-shader/compiler/compileHighShader.mjs';\nexport { addBits } from './rendering/high-shader/compiler/utils/addBits.mjs';\nexport { compileHooks, findHooksRx } from './rendering/high-shader/compiler/utils/compileHooks.mjs';\nexport { compileInputs } from './rendering/high-shader/compiler/utils/compileInputs.mjs';\nexport { compileOutputs } from './rendering/high-shader/compiler/utils/compileOutputs.mjs';\nexport { formatShader } from './rendering/high-shader/compiler/utils/formatShader.mjs';\nexport { injectBits } from './rendering/high-shader/compiler/utils/injectBits.mjs';\nexport { fragmentGPUTemplate, fragmentGlTemplate, vertexGPUTemplate, vertexGlTemplate } from './rendering/high-shader/defaultProgramTemplate.mjs';\nexport { colorBit, colorBitGl } from './rendering/high-shader/shader-bits/colorBit.mjs';\nexport { generateTextureBatchBit, generateTextureBatchBitGl } from './rendering/high-shader/shader-bits/generateTextureBatchBit.mjs';\nexport { globalUniformsBit, globalUniformsBitGl, globalUniformsUBOBitGl } from './rendering/high-shader/shader-bits/globalUniformsBit.mjs';\nexport { localUniformBit, localUniformBitGl, localUniformBitGroup2 } from './rendering/high-shader/shader-bits/localUniformBit.mjs';\nexport { roundPixelsBit, roundPixelsBitGl } from './rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nexport { textureBit, textureBitGl } from './rendering/high-shader/shader-bits/textureBit.mjs';\nexport { AlphaMask } from './rendering/mask/alpha/AlphaMask.mjs';\nexport { AlphaMaskPipe } from './rendering/mask/alpha/AlphaMaskPipe.mjs';\nexport { ColorMask } from './rendering/mask/color/ColorMask.mjs';\nexport { ColorMaskPipe } from './rendering/mask/color/ColorMaskPipe.mjs';\nexport { MaskEffectManager, MaskEffectManagerClass } from './rendering/mask/MaskEffectManager.mjs';\nexport { ScissorMask } from './rendering/mask/scissor/ScissorMask.mjs';\nexport { StencilMask } from './rendering/mask/stencil/StencilMask.mjs';\nexport { StencilMaskPipe } from './rendering/mask/stencil/StencilMaskPipe.mjs';\nexport { addMaskBounds } from './rendering/mask/utils/addMaskBounds.mjs';\nexport { addMaskLocalBounds, getMatrixRelativeToParent } from './rendering/mask/utils/addMaskLocalBounds.mjs';\nexport { autoDetectRenderer } from './rendering/renderers/autoDetectRenderer.mjs';\nexport { BUFFER_TYPE } from './rendering/renderers/gl/buffer/const.mjs';\nexport { GlBuffer } from './rendering/renderers/gl/buffer/GlBuffer.mjs';\nexport { GlBufferSystem } from './rendering/renderers/gl/buffer/GlBufferSystem.mjs';\nexport { CLEAR } from './rendering/renderers/gl/const.mjs';\nexport { GlContextSystem } from './rendering/renderers/gl/context/GlContextSystem.mjs';\nexport { GlGeometrySystem } from './rendering/renderers/gl/geometry/GlGeometrySystem.mjs';\nexport { getGlTypeFromFormat } from './rendering/renderers/gl/geometry/utils/getGlTypeFromFormat.mjs';\nexport { GlBackBufferSystem } from './rendering/renderers/gl/GlBackBufferSystem.mjs';\nexport { GlColorMaskSystem } from './rendering/renderers/gl/GlColorMaskSystem.mjs';\nexport { GlEncoderSystem } from './rendering/renderers/gl/GlEncoderSystem.mjs';\nexport { GlRenderTarget } from './rendering/renderers/gl/GlRenderTarget.mjs';\nexport { GlStencilSystem } from './rendering/renderers/gl/GlStencilSystem.mjs';\nexport { GlUboSystem } from './rendering/renderers/gl/GlUboSystem.mjs';\nexport { GlRenderTargetAdaptor } from './rendering/renderers/gl/renderTarget/GlRenderTargetAdaptor.mjs';\nexport { GlRenderTargetSystem } from './rendering/renderers/gl/renderTarget/GlRenderTargetSystem.mjs';\nexport { batchSamplersUniformGroup } from './rendering/renderers/gl/shader/batchSamplersUniformGroup.mjs';\nexport { generateShaderSyncCode } from './rendering/renderers/gl/shader/GenerateShaderSyncCode.mjs';\nexport { GlProgram } from './rendering/renderers/gl/shader/GlProgram.mjs';\nexport { GlProgramData, IGLUniformData } from './rendering/renderers/gl/shader/GlProgramData.mjs';\nexport { GlShaderSystem } from './rendering/renderers/gl/shader/GlShaderSystem.mjs';\nexport { GlUniformGroupSystem } from './rendering/renderers/gl/shader/GlUniformGroupSystem.mjs';\nexport { migrateFragmentFromV7toV8 } from './rendering/renderers/gl/shader/migrateFragmentFromV7toV8.mjs';\nexport { compileShader } from './rendering/renderers/gl/shader/program/compileShader.mjs';\nexport { defaultValue } from './rendering/renderers/gl/shader/program/defaultValue.mjs';\nexport { ensureAttributes } from './rendering/renderers/gl/shader/program/ensureAttributes.mjs';\nexport { extractAttributesFromGlProgram } from './rendering/renderers/gl/shader/program/extractAttributesFromGlProgram.mjs';\nexport { generateProgram } from './rendering/renderers/gl/shader/program/generateProgram.mjs';\nexport { getMaxFragmentPrecision } from './rendering/renderers/gl/shader/program/getMaxFragmentPrecision.mjs';\nexport { getTestContext } from './rendering/renderers/gl/shader/program/getTestContext.mjs';\nexport { getUboData } from './rendering/renderers/gl/shader/program/getUboData.mjs';\nexport { getUniformData } from './rendering/renderers/gl/shader/program/getUniformData.mjs';\nexport { logProgramError } from './rendering/renderers/gl/shader/program/logProgramError.mjs';\nexport { mapSize } from './rendering/renderers/gl/shader/program/mapSize.mjs';\nexport { mapGlToVertexFormat, mapType } from './rendering/renderers/gl/shader/program/mapType.mjs';\nexport { addProgramDefines } from './rendering/renderers/gl/shader/program/preprocessors/addProgramDefines.mjs';\nexport { ensurePrecision } from './rendering/renderers/gl/shader/program/preprocessors/ensurePrecision.mjs';\nexport { insertVersion } from './rendering/renderers/gl/shader/program/preprocessors/insertVersion.mjs';\nexport { setProgramName } from './rendering/renderers/gl/shader/program/preprocessors/setProgramName.mjs';\nexport { stripVersion } from './rendering/renderers/gl/shader/program/preprocessors/stripVersion.mjs';\nexport { WGSL_TO_STD40_SIZE, createUboElementsSTD40 } from './rendering/renderers/gl/shader/utils/createUboElementsSTD40.mjs';\nexport { createUboSyncFunctionSTD40 } from './rendering/renderers/gl/shader/utils/createUboSyncSTD40.mjs';\nexport { generateArraySyncSTD40 } from './rendering/renderers/gl/shader/utils/generateArraySyncSTD40.mjs';\nexport { generateUniformsSync } from './rendering/renderers/gl/shader/utils/generateUniformsSync.mjs';\nexport { UNIFORM_TO_ARRAY_SETTERS, UNIFORM_TO_SINGLE_SETTERS } from './rendering/renderers/gl/shader/utils/generateUniformsSyncTypes.mjs';\nexport { GlStateSystem } from './rendering/renderers/gl/state/GlStateSystem.mjs';\nexport { mapWebGLBlendModesToPixi } from './rendering/renderers/gl/state/mapWebGLBlendModesToPixi.mjs';\nexport { GL_FORMATS, GL_TARGETS, GL_TYPES, GL_WRAP_MODES } from './rendering/renderers/gl/texture/const.mjs';\nexport { GlTexture } from './rendering/renderers/gl/texture/GlTexture.mjs';\nexport { GlTextureSystem } from './rendering/renderers/gl/texture/GlTextureSystem.mjs';\nexport { glUploadBufferImageResource } from './rendering/renderers/gl/texture/uploaders/glUploadBufferImageResource.mjs';\nexport { glUploadCompressedTextureResource } from './rendering/renderers/gl/texture/uploaders/glUploadCompressedTextureResource.mjs';\nexport { glUploadImageResource } from './rendering/renderers/gl/texture/uploaders/glUploadImageResource.mjs';\nexport { glUploadVideoResource } from './rendering/renderers/gl/texture/uploaders/glUploadVideoResource.mjs';\nexport { applyStyleParams } from './rendering/renderers/gl/texture/utils/applyStyleParams.mjs';\nexport { getSupportedGlCompressedTextureFormats } from './rendering/renderers/gl/texture/utils/getSupportedGlCompressedTextureFormats.mjs';\nexport { mapFormatToGlFormat } from './rendering/renderers/gl/texture/utils/mapFormatToGlFormat.mjs';\nexport { mapFormatToGlInternalFormat } from './rendering/renderers/gl/texture/utils/mapFormatToGlInternalFormat.mjs';\nexport { mapFormatToGlType } from './rendering/renderers/gl/texture/utils/mapFormatToGlType.mjs';\nexport { compareModeToGlCompare, mipmapScaleModeToGlFilter, scaleModeToGlFilter, wrapModeToGlAddress } from './rendering/renderers/gl/texture/utils/pixiToGlMaps.mjs';\nexport { unpremultiplyAlpha } from './rendering/renderers/gl/texture/utils/unpremultiplyAlpha.mjs';\nexport { WebGLRenderer } from './rendering/renderers/gl/WebGLRenderer.mjs';\nexport { BindGroupSystem } from './rendering/renderers/gpu/BindGroupSystem.mjs';\nexport { GpuBufferSystem } from './rendering/renderers/gpu/buffer/GpuBufferSystem.mjs';\nexport { GpuReadBuffer } from './rendering/renderers/gpu/buffer/GpuReadBuffer.mjs';\nexport { UboBatch } from './rendering/renderers/gpu/buffer/UboBatch.mjs';\nexport { GpuColorMaskSystem } from './rendering/renderers/gpu/GpuColorMaskSystem.mjs';\nexport { GpuDeviceSystem } from './rendering/renderers/gpu/GpuDeviceSystem.mjs';\nexport { GpuEncoderSystem } from './rendering/renderers/gpu/GpuEncoderSystem.mjs';\nexport { GpuStencilSystem } from './rendering/renderers/gpu/GpuStencilSystem.mjs';\nexport { GpuUboSystem } from './rendering/renderers/gpu/GpuUboSystem.mjs';\nexport { GpuUniformBatchPipe } from './rendering/renderers/gpu/GpuUniformBatchPipe.mjs';\nexport { PipelineSystem } from './rendering/renderers/gpu/pipeline/PipelineSystem.mjs';\nexport { calculateProjection } from './rendering/renderers/gpu/renderTarget/calculateProjection.mjs';\nexport { GpuRenderTarget } from './rendering/renderers/gpu/renderTarget/GpuRenderTarget.mjs';\nexport { GpuRenderTargetAdaptor } from './rendering/renderers/gpu/renderTarget/GpuRenderTargetAdaptor.mjs';\nexport { GpuRenderTargetSystem } from './rendering/renderers/gpu/renderTarget/GpuRenderTargetSystem.mjs';\nexport { BindGroup } from './rendering/renderers/gpu/shader/BindGroup.mjs';\nexport { GpuProgram } from './rendering/renderers/gpu/shader/GpuProgram.mjs';\nexport { GpuShaderSystem } from './rendering/renderers/gpu/shader/GpuShaderSystem.mjs';\nexport { WGSL_ALIGN_SIZE_DATA, createUboElementsWGSL } from './rendering/renderers/gpu/shader/utils/createUboElementsWGSL.mjs';\nexport { createUboSyncFunctionWGSL } from './rendering/renderers/gpu/shader/utils/createUboSyncFunctionWGSL.mjs';\nexport { extractAttributesFromGpuProgram } from './rendering/renderers/gpu/shader/utils/extractAttributesFromGpuProgram.mjs';\nexport { extractStructAndGroups } from './rendering/renderers/gpu/shader/utils/extractStructAndGroups.mjs';\nexport { generateArraySyncWGSL } from './rendering/renderers/gpu/shader/utils/generateArraySyncWGSL.mjs';\nexport { generateGpuLayoutGroups } from './rendering/renderers/gpu/shader/utils/generateGpuLayoutGroups.mjs';\nexport { generateLayoutHash } from './rendering/renderers/gpu/shader/utils/generateLayoutHash.mjs';\nexport { removeStructAndGroupDuplicates } from './rendering/renderers/gpu/shader/utils/removeStructAndGroupDuplicates.mjs';\nexport { GpuBlendModesToPixi } from './rendering/renderers/gpu/state/GpuBlendModesToPixi.mjs';\nexport { GpuStateSystem } from './rendering/renderers/gpu/state/GpuStateSystem.mjs';\nexport { GpuStencilModesToPixi } from './rendering/renderers/gpu/state/GpuStencilModesToPixi.mjs';\nexport { GpuTextureSystem } from './rendering/renderers/gpu/texture/GpuTextureSystem.mjs';\nexport { gpuUploadBufferImageResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadBufferImageResource.mjs';\nexport { blockDataMap, gpuUploadCompressedTextureResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadCompressedTextureResource.mjs';\nexport { gpuUploadImageResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadImageSource.mjs';\nexport { gpuUploadVideoResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadVideoSource.mjs';\nexport { getSupportedGPUCompressedTextureFormats } from './rendering/renderers/gpu/texture/utils/getSupportedGPUCompressedTextureFormats.mjs';\nexport { GpuMipmapGenerator } from './rendering/renderers/gpu/texture/utils/GpuMipmapGenerator.mjs';\nexport { WebGPURenderer } from './rendering/renderers/gpu/WebGPURenderer.mjs';\nexport { BackgroundSystem } from './rendering/renderers/shared/background/BackgroundSystem.mjs';\nexport { BlendModePipe } from './rendering/renderers/shared/blendModes/BlendModePipe.mjs';\nexport { Buffer } from './rendering/renderers/shared/buffer/Buffer.mjs';\nexport { BufferResource } from './rendering/renderers/shared/buffer/BufferResource.mjs';\nexport { BufferUsage } from './rendering/renderers/shared/buffer/const.mjs';\nexport { fastCopy } from './rendering/renderers/shared/buffer/utils/fastCopy.mjs';\nexport { ExtractSystem } from './rendering/renderers/shared/extract/ExtractSystem.mjs';\nexport { GenerateTextureSystem } from './rendering/renderers/shared/extract/GenerateTextureSystem.mjs';\nexport { DRAW_MODES } from './rendering/renderers/shared/geometry/const.mjs';\nexport { Geometry } from './rendering/renderers/shared/geometry/Geometry.mjs';\nexport { buildSimpleUvs, buildUvs } from './rendering/renderers/shared/geometry/utils/buildUvs.mjs';\nexport { ensureIsBuffer } from './rendering/renderers/shared/geometry/utils/ensureIsBuffer.mjs';\nexport { getAttributeInfoFromFormat } from './rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat.mjs';\nexport { getGeometryBounds } from './rendering/renderers/shared/geometry/utils/getGeometryBounds.mjs';\nexport { transformVertices } from './rendering/renderers/shared/geometry/utils/transformVertices.mjs';\nexport { InstructionSet } from './rendering/renderers/shared/instructions/InstructionSet.mjs';\nexport { GlobalUniformSystem } from './rendering/renderers/shared/renderTarget/GlobalUniformSystem.mjs';\nexport { isRenderingToScreen } from './rendering/renderers/shared/renderTarget/isRenderingToScreen.mjs';\nexport { RenderTarget } from './rendering/renderers/shared/renderTarget/RenderTarget.mjs';\nexport { RenderTargetSystem } from './rendering/renderers/shared/renderTarget/RenderTargetSystem.mjs';\nexport { viewportFromFrame } from './rendering/renderers/shared/renderTarget/viewportFromFrame.mjs';\nexport { ShaderStage } from './rendering/renderers/shared/shader/const.mjs';\nexport { Shader } from './rendering/renderers/shared/shader/Shader.mjs';\nexport { UboSystem } from './rendering/renderers/shared/shader/UboSystem.mjs';\nexport { UniformGroup } from './rendering/renderers/shared/shader/UniformGroup.mjs';\nexport { createUboSyncFunction } from './rendering/renderers/shared/shader/utils/createUboSyncFunction.mjs';\nexport { getDefaultUniformValue } from './rendering/renderers/shared/shader/utils/getDefaultUniformValue.mjs';\nexport { uboSyncFunctionsSTD40, uboSyncFunctionsWGSL } from './rendering/renderers/shared/shader/utils/uboSyncFunctions.mjs';\nexport { uniformParsers } from './rendering/renderers/shared/shader/utils/uniformParsers.mjs';\nexport { HelloSystem } from './rendering/renderers/shared/startup/HelloSystem.mjs';\nexport { BLEND_TO_NPM, STENCIL_MODES } from './rendering/renderers/shared/state/const.mjs';\nexport { getAdjustedBlendModeBlend } from './rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nexport { State } from './rendering/renderers/shared/state/State.mjs';\nexport { AbstractRenderer } from './rendering/renderers/shared/system/AbstractRenderer.mjs';\nexport { SharedRenderPipes, SharedSystems } from './rendering/renderers/shared/system/SharedSystems.mjs';\nexport { SystemRunner } from './rendering/renderers/shared/system/SystemRunner.mjs';\nexport { CanvasPool, CanvasPoolClass } from './rendering/renderers/shared/texture/CanvasPool.mjs';\nexport { DEPRECATED_SCALE_MODES, DEPRECATED_WRAP_MODES, MSAA_QUALITY, SCALE_MODES, WRAP_MODES } from './rendering/renderers/shared/texture/const.mjs';\nexport { RenderTexture } from './rendering/renderers/shared/texture/RenderTexture.mjs';\nexport { BufferImageSource } from './rendering/renderers/shared/texture/sources/BufferSource.mjs';\nexport { CanvasSource } from './rendering/renderers/shared/texture/sources/CanvasSource.mjs';\nexport { CompressedSource } from './rendering/renderers/shared/texture/sources/CompressedSource.mjs';\nexport { ImageSource } from './rendering/renderers/shared/texture/sources/ImageSource.mjs';\nexport { TextureSource } from './rendering/renderers/shared/texture/sources/TextureSource.mjs';\nexport { VideoSource } from './rendering/renderers/shared/texture/sources/VideoSource.mjs';\nexport { Texture } from './rendering/renderers/shared/texture/Texture.mjs';\nexport { TextureGCSystem } from './rendering/renderers/shared/texture/TextureGCSystem.mjs';\nexport { TextureMatrix } from './rendering/renderers/shared/texture/TextureMatrix.mjs';\nexport { TexturePool, TexturePoolClass } from './rendering/renderers/shared/texture/TexturePool.mjs';\nexport { TextureStyle } from './rendering/renderers/shared/texture/TextureStyle.mjs';\nexport { TextureUvs } from './rendering/renderers/shared/texture/TextureUvs.mjs';\nexport { generateUID } from './rendering/renderers/shared/texture/utils/generateUID.mjs';\nexport { getCanvasTexture, hasCachedCanvasTexture } from './rendering/renderers/shared/texture/utils/getCanvasTexture.mjs';\nexport { getSupportedCompressedTextureFormats } from './rendering/renderers/shared/texture/utils/getSupportedCompressedTextureFormats.mjs';\nexport { getSupportedTextureFormats, nonCompressedFormats } from './rendering/renderers/shared/texture/utils/getSupportedTextureFormats.mjs';\nexport { autoDetectSource, resourceToTexture, textureFrom } from './rendering/renderers/shared/texture/utils/textureFrom.mjs';\nexport { createIdFromString } from './rendering/renderers/shared/utils/createIdFromString.mjs';\nexport { parseFunctionBody } from './rendering/renderers/shared/utils/parseFunctionBody.mjs';\nexport { ViewSystem } from './rendering/renderers/shared/view/ViewSystem.mjs';\nexport { RendererType } from './rendering/renderers/types.mjs';\nexport { Bounds } from './scene/container/bounds/Bounds.mjs';\nexport { _getGlobalBoundsRecursive, getFastGlobalBounds } from './scene/container/bounds/getFastGlobalBounds.mjs';\nexport { _getGlobalBounds, getGlobalBounds, updateTransformBackwards } from './scene/container/bounds/getGlobalBounds.mjs';\nexport { getLocalBounds, getParent } from './scene/container/bounds/getLocalBounds.mjs';\nexport { getGlobalRenderableBounds } from './scene/container/bounds/getRenderableBounds.mjs';\nexport { boundsPool, matrixPool } from './scene/container/bounds/utils/matrixAndBoundsPool.mjs';\nexport { childrenHelperMixin } from './scene/container/container-mixins/childrenHelperMixin.mjs';\nexport { effectsMixin } from './scene/container/container-mixins/effectsMixin.mjs';\nexport { findMixin } from './scene/container/container-mixins/findMixin.mjs';\nexport { measureMixin } from './scene/container/container-mixins/measureMixin.mjs';\nexport { onRenderMixin } from './scene/container/container-mixins/onRenderMixin.mjs';\nexport { sortMixin } from './scene/container/container-mixins/sortMixin.mjs';\nexport { toLocalGlobalMixin } from './scene/container/container-mixins/toLocalGlobalMixin.mjs';\nexport { Container, UPDATE_BLEND, UPDATE_COLOR, UPDATE_TRANSFORM, UPDATE_VISIBLE } from './scene/container/Container.mjs';\nexport { CustomRenderPipe } from './scene/container/CustomRenderPipe.mjs';\nexport { RenderContainer } from './scene/container/RenderContainer.mjs';\nexport { RenderGroup } from './scene/container/RenderGroup.mjs';\nexport { RenderGroupPipe } from './scene/container/RenderGroupPipe.mjs';\nexport { RenderGroupSystem } from './scene/container/RenderGroupSystem.mjs';\nexport { assignWithIgnore } from './scene/container/utils/assignWithIgnore.mjs';\nexport { buildInstructions, collectAllRenderables } from './scene/container/utils/buildInstructions.mjs';\nexport { checkChildrenDidChange } from './scene/container/utils/checkChildrenDidChange.mjs';\nexport { collectRenderGroups } from './scene/container/utils/collectRenderGroups.mjs';\nexport { definedProps } from './scene/container/utils/definedProps.mjs';\nexport { executeInstructions } from './scene/container/utils/executeInstructions.mjs';\nexport { mixColors, mixStandardAnd32BitColors } from './scene/container/utils/mixColors.mjs';\nexport { mixHexColors } from './scene/container/utils/mixHexColors.mjs';\nexport { multiplyHexColors } from './scene/container/utils/multiplyHexColors.mjs';\nexport { updateLocalTransform } from './scene/container/utils/updateLocalTransform.mjs';\nexport { updateRenderGroupTransform, updateRenderGroupTransforms, updateTransformAndChildren } from './scene/container/utils/updateRenderGroupTransforms.mjs';\nexport { updateWorldTransform } from './scene/container/utils/updateWorldTransform.mjs';\nexport { validateRenderables } from './scene/container/utils/validateRenderables.mjs';\nexport { GlGraphicsAdaptor } from './scene/graphics/gl/GlGraphicsAdaptor.mjs';\nexport { color32BitToUniform, colorToUniform } from './scene/graphics/gpu/colorToUniform.mjs';\nexport { GpuGraphicsAdaptor } from './scene/graphics/gpu/GpuGraphicsAdaptor.mjs';\nexport { BatchableGraphics } from './scene/graphics/shared/BatchableGraphics.mjs';\nexport { buildAdaptiveBezier } from './scene/graphics/shared/buildCommands/buildAdaptiveBezier.mjs';\nexport { buildAdaptiveQuadratic } from './scene/graphics/shared/buildCommands/buildAdaptiveQuadratic.mjs';\nexport { buildArc } from './scene/graphics/shared/buildCommands/buildArc.mjs';\nexport { buildArcTo } from './scene/graphics/shared/buildCommands/buildArcTo.mjs';\nexport { buildArcToSvg } from './scene/graphics/shared/buildCommands/buildArcToSvg.mjs';\nexport { buildCircle } from './scene/graphics/shared/buildCommands/buildCircle.mjs';\nexport { buildLine } from './scene/graphics/shared/buildCommands/buildLine.mjs';\nexport { buildPolygon } from './scene/graphics/shared/buildCommands/buildPolygon.mjs';\nexport { buildRectangle } from './scene/graphics/shared/buildCommands/buildRectangle.mjs';\nexport { buildTriangle } from './scene/graphics/shared/buildCommands/buildTriangle.mjs';\nexport { closePointEps, curveEps } from './scene/graphics/shared/const.mjs';\nexport { FillGradient } from './scene/graphics/shared/fill/FillGradient.mjs';\nexport { FillPattern } from './scene/graphics/shared/fill/FillPattern.mjs';\nexport { Graphics } from './scene/graphics/shared/Graphics.mjs';\nexport { GraphicsContext } from './scene/graphics/shared/GraphicsContext.mjs';\nexport { GpuGraphicsContext, GraphicsContextRenderData, GraphicsContextSystem } from './scene/graphics/shared/GraphicsContextSystem.mjs';\nexport { GraphicsPipe } from './scene/graphics/shared/GraphicsPipe.mjs';\nexport { GraphicsPath } from './scene/graphics/shared/path/GraphicsPath.mjs';\nexport { roundedShapeArc, roundedShapeQuadraticCurve } from './scene/graphics/shared/path/roundShape.mjs';\nexport { ShapePath } from './scene/graphics/shared/path/ShapePath.mjs';\nexport { SVGParser } from './scene/graphics/shared/svg/SVGParser.mjs';\nexport { SVGToGraphicsPath } from './scene/graphics/shared/svg/SVGToGraphicsPath.mjs';\nexport { buildContextBatches } from './scene/graphics/shared/utils/buildContextBatches.mjs';\nexport { buildGeometryFromPath } from './scene/graphics/shared/utils/buildGeometryFromPath.mjs';\nexport { convertFillInputToFillStyle } from './scene/graphics/shared/utils/convertFillInputToFillStyle.mjs';\nexport { getOrientationOfPoints } from './scene/graphics/shared/utils/getOrientationOfPoints.mjs';\nexport { triangulateWithHoles } from './scene/graphics/shared/utils/triangulateWithHoles.mjs';\nexport { MeshPlane } from './scene/mesh-plane/MeshPlane.mjs';\nexport { PlaneGeometry } from './scene/mesh-plane/PlaneGeometry.mjs';\nexport { MeshRope } from './scene/mesh-simple/MeshRope.mjs';\nexport { MeshSimple } from './scene/mesh-simple/MeshSimple.mjs';\nexport { RopeGeometry } from './scene/mesh-simple/RopeGeometry.mjs';\nexport { GlMeshAdaptor } from './scene/mesh/gl/GlMeshAdaptor.mjs';\nexport { GpuMeshAdapter } from './scene/mesh/gpu/GpuMeshAdapter.mjs';\nexport { BatchableMesh } from './scene/mesh/shared/BatchableMesh.mjs';\nexport { getTextureDefaultMatrix } from './scene/mesh/shared/getTextureDefaultMatrix.mjs';\nexport { Mesh } from './scene/mesh/shared/Mesh.mjs';\nexport { MeshGeometry } from './scene/mesh/shared/MeshGeometry.mjs';\nexport { MeshPipe } from './scene/mesh/shared/MeshPipe.mjs';\nexport { AnimatedSprite } from './scene/sprite-animated/AnimatedSprite.mjs';\nexport { NineSliceGeometry } from './scene/sprite-nine-slice/NineSliceGeometry.mjs';\nexport { NineSlicePlane, NineSliceSprite } from './scene/sprite-nine-slice/NineSliceSprite.mjs';\nexport { NineSliceSpritePipe } from './scene/sprite-nine-slice/NineSliceSpritePipe.mjs';\nexport { tilingBit, tilingBitGl } from './scene/sprite-tiling/shader/tilingBit.mjs';\nexport { TilingSpriteShader } from './scene/sprite-tiling/shader/TilingSpriteShader.mjs';\nexport { TilingSprite } from './scene/sprite-tiling/TilingSprite.mjs';\nexport { TilingSpritePipe } from './scene/sprite-tiling/TilingSpritePipe.mjs';\nexport { applyMatrix } from './scene/sprite-tiling/utils/applyMatrix.mjs';\nexport { QuadGeometry } from './scene/sprite-tiling/utils/QuadGeometry.mjs';\nexport { setPositions } from './scene/sprite-tiling/utils/setPositions.mjs';\nexport { setUvs } from './scene/sprite-tiling/utils/setUvs.mjs';\nexport { BatchableSprite } from './scene/sprite/BatchableSprite.mjs';\nexport { Sprite } from './scene/sprite/Sprite.mjs';\nexport { SpritePipe } from './scene/sprite/SpritePipe.mjs';\nexport { AbstractBitmapFont } from './scene/text-bitmap/AbstractBitmapFont.mjs';\nexport { bitmapFontTextParser } from './scene/text-bitmap/asset/bitmapFontTextParser.mjs';\nexport { bitmapFontXMLParser } from './scene/text-bitmap/asset/bitmapFontXMLParser.mjs';\nexport { bitmapFontXMLStringParser } from './scene/text-bitmap/asset/bitmapFontXMLStringParser.mjs';\nexport { bitmapFontCachePlugin, loadBitmapFont } from './scene/text-bitmap/asset/loadBitmapFont.mjs';\nexport { BitmapFont } from './scene/text-bitmap/BitmapFont.mjs';\nexport { BitmapFontManager } from './scene/text-bitmap/BitmapFontManager.mjs';\nexport { BitmapText } from './scene/text-bitmap/BitmapText.mjs';\nexport { BitmapTextPipe } from './scene/text-bitmap/BitmapTextPipe.mjs';\nexport { DynamicBitmapFont } from './scene/text-bitmap/DynamicBitmapFont.mjs';\nexport { getBitmapTextLayout } from './scene/text-bitmap/utils/getBitmapTextLayout.mjs';\nexport { resolveCharacters } from './scene/text-bitmap/utils/resolveCharacters.mjs';\nexport { HTMLText } from './scene/text-html/HTMLText.mjs';\nexport { HTMLTextPipe } from './scene/text-html/HTMLTextPipe.mjs';\nexport { HTMLTextRenderData, nssvg, nsxhtml } from './scene/text-html/HTMLTextRenderData.mjs';\nexport { HTMLTextStyle } from './scene/text-html/HtmlTextStyle.mjs';\nexport { HTMLTextSystem } from './scene/text-html/HTMLTextSystem.mjs';\nexport { extractFontFamilies } from './scene/text-html/utils/extractFontFamilies.mjs';\nexport { FontStylePromiseCache, getFontCss } from './scene/text-html/utils/getFontCss.mjs';\nexport { getSVGUrl } from './scene/text-html/utils/getSVGUrl.mjs';\nexport { getTemporaryCanvasFromImage } from './scene/text-html/utils/getTemporaryCanvasFromImage.mjs';\nexport { loadFontAsBase64 } from './scene/text-html/utils/loadFontAsBase64.mjs';\nexport { loadFontCSS } from './scene/text-html/utils/loadFontCSS.mjs';\nexport { loadSVGImage } from './scene/text-html/utils/loadSVGImage.mjs';\nexport { measureHtmlText } from './scene/text-html/utils/measureHtmlText.mjs';\nexport { textStyleToCSS } from './scene/text-html/utils/textStyleToCSS.mjs';\nexport { AbstractText, ensureOptions } from './scene/text/AbstractText.mjs';\nexport { CanvasTextMetrics } from './scene/text/canvas/CanvasTextMetrics.mjs';\nexport { CanvasTextPipe } from './scene/text/canvas/CanvasTextPipe.mjs';\nexport { CanvasTextSystem } from './scene/text/canvas/CanvasTextSystem.mjs';\nexport { fontStringFromTextStyle } from './scene/text/canvas/utils/fontStringFromTextStyle.mjs';\nexport { getCanvasFillStyle } from './scene/text/canvas/utils/getCanvasFillStyle.mjs';\nexport { SdfShader } from './scene/text/sdfShader/SdfShader.mjs';\nexport { localUniformMSDFBit, localUniformMSDFBitGl } from './scene/text/sdfShader/shader-bits/localUniformMSDFBit.mjs';\nexport { mSDFBit, mSDFBitGl } from './scene/text/sdfShader/shader-bits/mSDFBit.mjs';\nexport { Text } from './scene/text/Text.mjs';\nexport { TextStyle } from './scene/text/TextStyle.mjs';\nexport { ensureTextStyle } from './scene/text/utils/ensureTextStyle.mjs';\nexport { generateTextStyleKey } from './scene/text/utils/generateTextStyleKey.mjs';\nexport { getPo2TextureFromSource } from './scene/text/utils/getPo2TextureFromSource.mjs';\nexport { Spritesheet } from './spritesheet/Spritesheet.mjs';\nexport { spritesheetAsset } from './spritesheet/spritesheetAsset.mjs';\nexport { UPDATE_PRIORITY } from './ticker/const.mjs';\nexport { Ticker } from './ticker/Ticker.mjs';\nexport { TickerListener } from './ticker/TickerListener.mjs';\nexport { detectVideoAlphaMode } from './utils/browser/detectVideoAlphaMode.mjs';\nexport { isMobile } from './utils/browser/isMobile.mjs';\nexport { isSafari } from './utils/browser/isSafari.mjs';\nexport { isWebGLSupported } from './utils/browser/isWebGLSupported.mjs';\nexport { isWebGPUSupported } from './utils/browser/isWebGPUSupported.mjs';\nexport { unsafeEvalSupported } from './utils/browser/unsafeEvalSupported.mjs';\nexport { getCanvasBoundingBox } from './utils/canvas/getCanvasBoundingBox.mjs';\nexport { DATA_URI } from './utils/const.mjs';\nexport { default as EventEmitter } from 'eventemitter3';\nexport { removeItems } from './utils/data/removeItems.mjs';\nexport { resetUids, uid } from './utils/data/uid.mjs';\nexport { updateQuadBounds } from './utils/data/updateQuadBounds.mjs';\nexport { ViewableBuffer } from './utils/data/ViewableBuffer.mjs';\nexport { deprecation, v8_0_0 } from './utils/logging/deprecation.mjs';\nexport { logDebugTexture } from './utils/logging/logDebugTexture.mjs';\nexport { logRenderGroupScene, logScene } from './utils/logging/logScene.mjs';\nexport { warn } from './utils/logging/warn.mjs';\nexport { NOOP } from './utils/misc/NOOP.mjs';\nexport { Transform } from './utils/misc/Transform.mjs';\nexport { getResolutionOfUrl } from './utils/network/getResolutionOfUrl.mjs';\nexport { path } from './utils/path.mjs';\nexport { Pool } from './utils/pool/Pool.mjs';\nexport { BigPool, PoolGroupClass } from './utils/pool/PoolGroup.mjs';\nexport { VERSION, sayHello } from './utils/sayHello.mjs';\nexport { default as earcut } from 'earcut';\n\n\"use strict\";\nextensions.add(browserExt, webworkerExt);\n\nexport { browserExt, extensions, webworkerExt };\n//# sourceMappingURL=index.mjs.map\n","import * as PIXI from 'pixi.js';\nimport type OpenSeadragon from 'openseadragon';\nimport { ShapeType } from '@annotorious/annotorious';\nimport type { AnnotationState, DrawingStyle, DrawingStyleExpression, Filter, Selection } from '@annotorious/core';\nimport type { Ellipse, ImageAnnotation, Polygon, Rectangle, Shape } from '@annotorious/annotorious';\n\nconst DEFAULT_FILL = 0x1a73e8;\nconst DEFAULT_ALPHA = 0.25;\n\nconst UPDATE_STROKE_THRESHOLD = 0.02;\n\n// Fast redraws skip counter-scaling operations\n// let fastRedraw = false;\n\n// Likewise, if scale has not changed, counter-scaling is also skipped\nlet lastScale: number;\n\ninterface AnnotationShape {\n\n  annotation: ImageAnnotation;\n\n  fill: PIXI.Graphics;\n\n  stroke: PIXI.Graphics;\n\n  strokeWidth: number;\n\n  drawFn: (g: PIXI.Graphics) => void;\n}\n\nconst getGraphicsStyle = (style?: DrawingStyle) => {\n  const fillStyle = {\n    tint: style?.fill ? new PIXI.Color(style.fill).toNumber() : DEFAULT_FILL,\n    alpha: style?.fillOpacity === undefined ? DEFAULT_ALPHA : Math.min(style.fillOpacity, 1)\n  };\n\n  const strokeStyle = {\n    tint: style?.stroke && new PIXI.Color(style.stroke).toNumber(),\n    alpha: style?.strokeOpacity === undefined ? (style?.stroke ? 1 : 0) : Math.min(style.strokeOpacity, 1),\n    lineWidth: style?.stroke ? style?.strokeWidth || 1 : 0\n  }\n\n  return { fillStyle, strokeStyle };\n}\n\nconst drawShape = <T extends Shape>(fn: (s: T, g: PIXI.Graphics) => void) => (container: PIXI.Container, shape: T, style?: DrawingStyle) => {\n  const { fillStyle, strokeStyle } = getGraphicsStyle(style);\n\n  const fillGraphics = new PIXI.Graphics();\n  fn(shape, fillGraphics);\n  fillGraphics.fill(0xffffff)\n  fillGraphics.tint = fillStyle.tint;\n  fillGraphics.alpha = fillStyle.alpha;\n\n  container.addChild(fillGraphics);\n\n  // const lineWidth = strokeStyle.lineWidth === 1 ? 1 : strokeStyle.lineWidth / lastScale;\n  const lineWidth = strokeStyle.lineWidth / lastScale;\n\n  const strokeGraphics = new PIXI.Graphics();\n  fn(shape, strokeGraphics);\n  strokeGraphics.stroke({\n    color: 0xffffff,\n    width: lineWidth,\n    alpha: 1,\n    alignment: 0.5,\n  })\n  strokeGraphics.tint = strokeStyle.tint || 0xFFFFFF;\n  strokeGraphics.alpha = strokeStyle.alpha;\n\n  container.addChild(strokeGraphics);\n\n  return { fill: fillGraphics, stroke: strokeGraphics, strokeWidth: strokeStyle.lineWidth, drawFn: (graphics: PIXI.Graphics) => fn(shape, graphics) };\n}\n\nconst drawEllipse = drawShape((ellipse: Ellipse, g: PIXI.Graphics) => {\n  const { cx, cy, rx, ry } = ellipse.geometry;\n  g.ellipse(cx, cy, rx, ry)\n});\n\nconst drawPolygon = drawShape((polygon: Polygon, g: PIXI.Graphics) => {\n  const flattend = polygon.geometry.points.reduce((flat, xy) => ([...flat, ...xy]), []);\n  g.poly(flattend);\n});\n\nconst drawRectangle = drawShape((rectangle: Rectangle, g: PIXI.Graphics) => {\n  const { x, y, w, h } = rectangle.geometry;\n  g.rect(x, y, w, h);\n});\n\nconst getCurrentScale = (viewer: OpenSeadragon.Viewer) => {\n  const containerWidth = viewer.viewport.getContainerSize().x;\n  const zoom = viewer.viewport.getZoom(true);\n  return zoom * containerWidth / viewer.world.getContentFactor();\n}\n\nconst redrawStage = (\n  viewer: OpenSeadragon.Viewer,\n  container: PIXI.Container,\n  shapes: Map<String, AnnotationShape>,\n  renderer: PIXI.Renderer<PIXI.ICanvas>\n) => () => {\n  const viewportBounds = viewer.viewport.viewportToImageRectangle(viewer.viewport.getBounds(true));\n  const scale = getCurrentScale(viewer);\n\n  if (scale !== lastScale) {\n    // fastRedraw = true;\n\n    if (Math.abs(scale - lastScale) > UPDATE_STROKE_THRESHOLD) {\n      shapes.forEach(({ stroke, strokeWidth, drawFn }) => {\n\n        // if (strokeWidth > 1) {\n        //   // Disable fast redraws if at least one shape\n        //   // has non-native stroke\n        //   // fastRedraw = false;\n\n        //   stroke.clear()\n        //   drawFn(stroke);\n        //   stroke.stroke({\n        //     color: 0xffffff,\n        //     width: strokeWidth / scale,\n        //     alpha: 1,\n        //     alignment: 0.5,\n        //   })\n\n        //   // Counter scale stroke\n        // } else if (strokeWidth === 1) {\n        //   // Set native stroke if necessary\n        //   // strokeStyle.width = 1;\n        // }\n\n        stroke.clear()\n        drawFn(stroke);\n        stroke.stroke({\n          color: 0xffffff,\n          width: strokeWidth / scale,\n          alpha: 1,\n          alignment: 0.5,\n        })\n      });\n\n      lastScale = scale;\n    }\n  }\n\n  const rotation = Math.PI * viewer.viewport.getRotation() / 180;\n\n  const dx = - viewportBounds.x * scale;\n  const dy = - viewportBounds.y * scale;\n\n  let offsetX: number, offsetY: number;\n\n  if (rotation > 0 && rotation <= Math.PI / 2) {\n    offsetX = viewportBounds.height * scale;\n    offsetY = 0;\n  } else if (rotation > Math.PI / 2 && rotation <= Math.PI) {\n    offsetX = viewportBounds.width * scale;\n    offsetY = viewportBounds.height * scale;\n  } else if (rotation > Math.PI && rotation <= Math.PI * 1.5) {\n    offsetX = 0;\n    offsetY = viewportBounds.width * scale;\n  } else {\n    offsetX = 0;\n    offsetY = 0;\n  }\n\n  container.position.x = offsetX + dx * Math.cos(rotation) - dy * Math.sin(rotation);\n  container.position.y = offsetY + dx * Math.sin(rotation) + dy * Math.cos(rotation);\n  container.scale.set(scale, scale);\n  container.rotation = rotation;\n\n  renderer.render(container);\n}\n\nexport const createStage = async (viewer: OpenSeadragon.Viewer, canvas: HTMLCanvasElement) => {\n\n  const container = new PIXI.Container();\n\n\n  const renderer = await PIXI.autoDetectRenderer({\n    width: canvas.width,\n    height: canvas.height,\n    backgroundAlpha: 0,\n    canvas: canvas,\n    antialias: true,\n    resolution: 2\n  });\n\n  // Lookup table: shapes and annotations by annotation ID\n  const annotationShapes = new Map<string, AnnotationShape>();\n\n  // Current selection (if any)\n  let selectedIds = new Set<string>();\n\n  // Current hover (if any)\n  let hovered: string | undefined;\n\n  // Current style (if any)\n  let style: DrawingStyleExpression<ImageAnnotation> | undefined = undefined;\n\n  lastScale = getCurrentScale(viewer);\n\n  const addAnnotation = (annotation: ImageAnnotation, state?: AnnotationState) => {\n    // In case this annotation adds stroke > 1\n    // fastRedraw = false; \n\n    const { selector } = annotation.target;\n\n    const s = typeof style == 'function' ? style(annotation, state) : style;\n\n    let rendered: { fill: PIXI.Graphics, stroke: PIXI.Graphics, strokeWidth: number, drawFn: (g: PIXI.Graphics) => void } | undefined;\n\n    if (selector.type === ShapeType.RECTANGLE) {\n      rendered = drawRectangle(container, selector as Rectangle, s);\n    } else if (selector.type === ShapeType.POLYGON) {\n      rendered = drawPolygon(container, selector as Polygon, s);\n    } else if (selector.type === ShapeType.ELLIPSE) {\n      rendered = drawEllipse(container, selector as Ellipse, s);\n    } else {\n      console.warn(`Unsupported shape type: ${selector.type}`)\n    }\n\n    if (rendered)\n      annotationShapes.set(annotation.id, { annotation, ...rendered });\n  }\n\n  const removeAnnotation = (annotation: ImageAnnotation) => {\n    const rendered = annotationShapes.get(annotation.id);\n    if (rendered) {\n      annotationShapes.delete(annotation.id);\n      rendered.fill.destroy();\n      rendered.stroke.destroy();\n    }\n  }\n\n  const updateAnnotation = (oldValue: ImageAnnotation, newValue: ImageAnnotation, state?: AnnotationState) => {\n    // In case this annotation adds stroke > 1\n    // fastRedraw = false; \n\n    const rendered = annotationShapes.get(oldValue.id);\n\n    if (rendered) {\n      annotationShapes.delete(oldValue.id);\n      rendered.fill.destroy();\n      rendered.stroke.destroy();\n\n      addAnnotation(newValue, state);\n    }\n  }\n\n  const redrawAnnotation = (id: string, state?: AnnotationState) => {\n    const rendered = annotationShapes.get(id);\n    if (rendered) {\n      annotationShapes.delete(id);\n      rendered.fill.destroy();\n      rendered.stroke.destroy();\n\n      addAnnotation(rendered.annotation, state);\n    }\n  }\n\n  const resize = (width: number, height: number) => {\n    renderer.resize(width, height);\n    renderer.render(container);\n  }\n\n  const setFilter = (filter?: Filter<ImageAnnotation>) => {\n    // In case this filter adds annotations with stroke > 1\n    // fastRedraw = false; \n\n    const { children } = container;\n\n    annotationShapes.forEach(({ fill, stroke, annotation }) => {\n      // Note: selected annotation always remains visible\n      const visible = filter ?\n        selectedIds.has(annotation.id) || filter(annotation) :\n        true;\n\n      if (visible && !(children.includes(fill))) {\n        container.addChild(fill);\n        container.addChild(stroke);\n      } else if (!visible && children.includes(fill)) {\n        container.removeChild(fill);\n        container.removeChild(stroke)\n      }\n    });\n\n    renderer.render(container);\n  }\n\n  const setHovered = (annotationId?: string) => {\n    if (hovered === annotationId) return;\n\n    // Unhover current, if any\n    if (hovered)\n      redrawAnnotation(hovered, { selected: selectedIds.has(hovered) });\n\n    // Set next hover\n    if (annotationId)\n      redrawAnnotation(annotationId, { selected: selectedIds.has(annotationId), hovered: true });\n\n    hovered = annotationId;\n\n    renderer.render(container);\n  }\n\n  const setSelected = (selection: Selection) => {\n    const nextIds = selection.selected.map(s => s.id);\n\n    const toSelect =\n      nextIds.filter(id => !selectedIds.has(id));\n\n    const toDeselect = [...selectedIds]\n      .filter(id => !nextIds.includes(id));\n\n    [...toSelect, ...toDeselect].forEach(id =>\n      redrawAnnotation(id, { selected: nextIds.includes(id), hovered: id === hovered }));\n\n    selectedIds = new Set(nextIds);\n\n    renderer.render(container);\n  }\n\n  const setStyle = (s?: DrawingStyleExpression<ImageAnnotation>) => {\n    if (typeof s === 'function') {\n      annotationShapes.forEach(({ annotation, fill, stroke, strokeWidth, drawFn }, _) => {\n        // if (strokeWidth > 1)\n        //   fastRedraw = false;\n\n        const { fillStyle, strokeStyle } = getGraphicsStyle(s(annotation));\n\n        fill.tint = fillStyle.tint;\n        fill.alpha = fillStyle.alpha;\n\n        stroke.tint = strokeStyle.tint || 0xFFFFFF;\n        stroke.alpha = strokeStyle.alpha;\n\n        annotationShapes.set(annotation.id, { annotation, fill, stroke, strokeWidth, drawFn });\n      });\n    } else {\n      const { fillStyle, strokeStyle } = getGraphicsStyle(s);\n\n      // if (strokeStyle.lineWidth > 1)\n      //   fastRedraw = false;\n\n      annotationShapes.forEach(({ annotation, fill, stroke, strokeWidth, drawFn }, _) => {\n        fill.tint = fillStyle.tint;\n        fill.alpha = fillStyle.alpha;\n\n        stroke.tint = strokeStyle.tint || 0xFFFFFF;\n        stroke.alpha = strokeStyle.alpha;\n\n        annotationShapes.set(annotation.id, { annotation, fill, stroke, strokeWidth, drawFn });\n      });\n    }\n\n    style = s;\n\n    renderer.render(container);\n  }\n\n  const setVisible = (visible: boolean) => {\n    if (visible)\n      canvas.classList.remove('hidden');\n    else\n      canvas.classList.add('hidden');\n  }\n\n  const destroy = () => renderer.destroy();\n\n  return {\n    addAnnotation,\n    destroy,\n    redraw: redrawStage(viewer, container, annotationShapes, renderer),\n    removeAnnotation,\n    resize,\n    setFilter,\n    setHovered,\n    setSelected,\n    setStyle,\n    setVisible,\n    updateAnnotation\n  }\n\n}","<script lang=\"ts\">\n  import { createEventDispatcher, onMount } from 'svelte';\n  import OpenSeadragon from 'openseadragon';\n  import type { DrawingStyleExpression } from '@annotorious/core';\n  import type { Filter, ImageAnnotation, ImageAnnotatorState } from '@annotorious/annotorious';\n  import type { PixiLayerClickEvent } from './PixiLayerClickEvent';\n  import { createStage } from './stageRenderer';\n\n  import './PixiLayer.css';\n\n  /** Props */\n  export let filter: Filter<ImageAnnotation> | undefined;\n  export let state: ImageAnnotatorState;\n  export let style: DrawingStyleExpression<ImageAnnotation> | undefined;\n  export let viewer: OpenSeadragon.Viewer;\n  export let visible = true;\n\n  const { store, hover, selection, viewport } = state;\n  \n  const dispatch = createEventDispatcher<{ click: PixiLayerClickEvent}>();\n\n  let stage: Awaited<ReturnType<typeof createStage>>\n  let resoleStage: () => void\n  let waitStage = new Promise<void>(resolve => {resoleStage = resolve});\n\n  let lastPress: { x: number, y: number } | undefined;\n\n  $: stage?.setFilter(filter);\n\n  $: stage?.setSelected($selection);\n\n  $: stage?.setStyle(style);\n\n  $: stage?.setVisible(visible);\n\n  // Helper\n  const getImageXY = (xy: OpenSeadragon.Point): OpenSeadragon.Point => {\n    const offsetXY = new OpenSeadragon.Point(xy.x, xy.y);\n    const {x, y} = viewer.viewport.pointFromPixel(offsetXY);\n    return viewer.viewport.viewportToImageCoordinates(x, y);\n  }\n\n  const onCanvasPress = (evt: OpenSeadragon.CanvasPressEvent) => {\n    const { x, y } = evt.position;\n    lastPress = { x, y };\n  }\n\n  const onPointerMove = (canvas: HTMLCanvasElement) => (evt: PointerEvent) => {\n    const {x, y} = getImageXY(new OpenSeadragon.Point(evt.offsetX, evt.offsetY));\n    \n    const hit = store.getAt(x, y);\n    const isVisibleHit = hit && (!filter || filter(hit));\n\n    if (isVisibleHit) {\n      canvas.classList.add('hover');\n\n      if ($hover !== hit.id) {\n        hover.set(hit.id);\n        stage.setHovered(hit.id);\n      }\n    } else {\n      canvas.classList.remove('hover');\n\n      if ($hover) {\n        hover.set(undefined);\n        stage.setHovered(undefined);\n      }\n    }\n  }\n\n  const onCanvasRelease = (evt: OpenSeadragon.CanvasReleaseEvent) => {\n    const originalEvent = evt.originalEvent as PointerEvent;\n\n    const { x, y } = evt.position;\n    const dx = x - lastPress!.x;\n    const dy = y - lastPress!.y;\n\n    const dist = Math.sqrt(dx * dx + dy * dy);\n\n    if (dist < 5) {\n      const {x, y} = getImageXY(evt.position);\n      const annotation = store.getAt(x, y);\n\n      if (annotation)\n        dispatch('click', { originalEvent, annotation });\n      else\n        dispatch('click', { originalEvent });\n    }\n\n    lastPress = undefined;\n  }\n\n  let currentViewportBounds: { x: number, y: number, width: number, height: number };\n\n  onMount(() => {\n    const { offsetWidth, offsetHeight } = viewer.canvas;\n\n    // Create Canvas element\n    const canvas = document.createElement('canvas');\n    canvas.width = offsetWidth;\n    canvas.height = offsetHeight;\n    canvas.className = 'a9s-gl-canvas';\n\n    viewer.element.querySelector('.openseadragon-canvas')?.appendChild(canvas);\n    \n    const moveHandler = onPointerMove(canvas);\n\n    const updateViewportState = () => {\n        const viewportBounds = viewer.viewport.getBounds();\n        currentViewportBounds = viewer.viewport.viewportToImageRectangle(viewportBounds);\n  \n        const { x, y, width, height } = currentViewportBounds;\n  \n        const intersecting = store.getIntersecting(x, y, width, height);\n        viewport.set(intersecting.map(a => a.id));\n      }\n\n    // Create Pixi stage\n    createStage(viewer, canvas).then((s)=> {\n      stage = s\n\n      // // Event handlers\n      canvas.addEventListener('pointermove', moveHandler); \n  \n      const observer = new ResizeObserver(entries => {\n        try {\n          const { width, height } = entries[0].contentRect;\n  \n          // canvas.width = width;\n          // canvas.height = height;\n          \n          stage.resize(width, height);\n        } catch {\n          console.warn('WebGL canvas already disposed');\n        }\n      });\n  \n      observer.observe(canvas);\n  \n      viewer.addHandler('canvas-press', onCanvasPress);\n      viewer.addHandler('canvas-release', onCanvasRelease);\n      viewer.addHandler('update-viewport', stage.redraw);\n      viewer.addHandler('animation-finish', updateViewportState);\n\n      resoleStage();\n    })\n\n\n    return () => {\n      canvas.removeEventListener('pointermove', moveHandler);\n\n      viewer.removeHandler('canvas-press', onCanvasPress);\n      viewer.removeHandler('canvas-release', onCanvasRelease);\n      viewer.removeHandler('update-viewport', stage.redraw);\n      viewer.removeHandler('animation-finish', updateViewportState);\n\n      stage.destroy();\n\n      canvas.parentNode?.removeChild(canvas);\n    }\n  });\n\n  store.observe(async event => {\n    await waitStage;\n\n    const { created, updated, deleted } = event.changes;\n\n    (created || []).forEach(annotation => stage.addAnnotation(annotation));\n\n    (updated || []).forEach(({ oldValue, newValue }) => stage.updateAnnotation(oldValue, newValue));\n\n    (deleted || []).forEach(annotation => stage.removeAnnotation(annotation));\n\n    if (currentViewportBounds) {\n      const { x, y, width, height } = currentViewportBounds;\n\n      const intersecting = store.getIntersecting(x, y, width, height);\n      viewport.set(intersecting.map(a => a.id));\n    } else {\n      viewport.set(store.all().map(a => a.id));\n    }\n    \n    stage.redraw();\n  });\n</script>\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import type { AbstractSelector } from '@annotorious/core';\n\nexport interface Shape extends AbstractSelector {\n\n  type: ShapeType;\n\n  geometry: Geometry;\n\n}\n\nexport enum ShapeType {\n\n  ELLIPSE = 'ELLIPSE',\n\n  POLYGON = 'POLYGON',\n\n  RECTANGLE = 'RECTANGLE'\n\n}\n\nexport interface Geometry {\n\n  bounds: Bounds;\n\n}\n\nexport interface Bounds {\n\n  minX: number;\n\n  minY: number;\n\n  maxX: number;\n\n  maxY: number;\n\n}","import type { Bounds, Shape, ShapeType } from './Shape';\n\nexport interface ShapeUtil<T extends Shape> {\n\n  area: (shape: T) => number;\n\n  intersects: (shape: T, x: number, y: number) => boolean;\n\n}\n\nconst Utils: { [key: string]: ShapeUtil<any> } = {};\n\n/**\n * Registers a new ShapeUtil for a given shape type.\n * @param type the shape type\n * @param util the ShapeUtil implementation for this shape type\n */\nexport const registerShapeUtil = (type: ShapeType | string, util: ShapeUtil<any>) =>\n  (Utils[type] = util);\n\n/**\n * Computes the area of the given shape. Delegates to the corresponding ShapeUtil.\n * @param shape the shape\n */\nexport const computeArea = (shape: Shape) => Utils[shape.type].area(shape);\n\n/**\n * Tests if the given shape intersects the given point. Delegates to\n * the corresponding ShapeUtil.\n * @param shape the shape\n * @param x point x coord\n * @param y point y coord\n * @returns true if shape and point intersect\n */\nexport const intersects = (shape: Shape, x: number, y: number): boolean =>\n  Utils[shape.type].intersects(shape, x, y);\n\n/**\n * Computes Bounds from a given list of points.\n * @param points the points\n * @returns the Bounds\n */\nexport const boundsFromPoints = (points: Array<[number, number]>): Bounds => {\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n\n  points.forEach(([x, y]) => {\n    minX = Math.min(minX, x);\n    minY = Math.min(minY, y);\n    maxX = Math.max(maxX, x);\n    maxY = Math.max(maxY, y);\n  });\n\n  return { minX, minY, maxX, maxY };\n};","import { ShapeType } from '../Shape';\nimport { registerShapeUtil, type ShapeUtil } from '../shapeUtils';\nimport type { Ellipse } from './Ellipse';\n\nconst EllipseUtil: ShapeUtil<Ellipse> = {\n\n  area: (e: Ellipse): number => Math.PI * e.geometry.rx * e.geometry.ry,\n\n  intersects: (e: Ellipse, x: number, y: number): boolean => {\n    const { cx, cy, rx, ry } = e.geometry;\n\n    // For future use\n    const rot = 0;\n\n    const cos = Math.cos(rot);\n    const sin = Math.sin(rot);\n  \n    const dx  = x - cx;\n    const dy  = y - cy;\n  \n    const tdx = cos * dx + sin * dy;\n    const tdy = sin * dx - cos * dy;\n  \n    return (tdx * tdx) / (rx * rx) + (tdy * tdy) / (ry * ry) <= 1;\n  }\n};\n\nregisterShapeUtil(ShapeType.ELLIPSE, EllipseUtil);","import { ShapeType } from '../Shape';\nimport { registerShapeUtil, type ShapeUtil } from '../shapeUtils';\nimport type { Polygon } from './Polygon';\n\nconst PolygonUtil: ShapeUtil<Polygon> = {\n\n  area: (polygon: Polygon): number => {\n    const { points } = polygon.geometry;\n\n    let area = 0;\n    let j = points.length - 1;\n\n    for (let i = 0; i < points.length; i++) {\n      area += (points[j][0] + points[i][0]) * (points[j][1] - points[i][1]);\n      j = i;\n    }\n\n    return Math.abs(0.5 * area);\n  },\n\n  intersects: (polygon: Polygon, x: number, y: number): boolean => {\n    // Based on https://wrf.ecse.rpi.edu/Research/Short_Notes/pnpoly.html/pnpoly.html\n    const { points } = polygon.geometry;\n\n    let inside = false;\n\n    for (let i = 0, j = points.length - 1; i < points.length; j = i++) {\n      const xi = points[i][0],\n        yi = points[i][1];\n      const xj = points[j][0],\n        yj = points[j][1];\n\n      const intersect = yi > y != yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\n\n      if (intersect) inside = !inside;\n    }\n\n    return inside;\n  }\n  \n};\n\nregisterShapeUtil(ShapeType.POLYGON, PolygonUtil);","import { ShapeType } from '../Shape';\nimport type { Rectangle } from './Rectangle';\nimport { registerShapeUtil, type ShapeUtil } from '../shapeUtils';\n\nexport const RectangleUtil: ShapeUtil<Rectangle> = {\n\n  area: (rect: Rectangle): number => rect.geometry.w * rect.geometry.h,\n\n  intersects: (rect: Rectangle, x: number, y: number): boolean =>\n    x >= rect.geometry.x &&\n    x <= rect.geometry.x + rect.geometry.w &&\n    y >= rect.geometry.y &&\n    y <= rect.geometry.y + rect.geometry.h\n    \n};\n\nregisterShapeUtil(ShapeType.RECTANGLE, RectangleUtil);","<script lang=\"ts\">\n  import { boundsFromPoints } from '../../../model';\n  import type { Polygon, PolygonGeometry, Shape } from '../../../model';\n  import type { Transform } from '../../Transform';\n  import { Editor, Handle } from '..';\n\n  /** Props */\n  export let shape: Polygon;\n  export let computedStyle: string | undefined;\n  export let transform: Transform;\n  export let viewportScale: number = 1;\n\n  $: geom = shape.geometry;\n\n  const editor = (polygon: Shape, handle: string, delta: [number, number]) => {\n    let points: [number, number][];\n\n    const geom = (polygon.geometry) as PolygonGeometry;\n\n    if (handle === 'SHAPE') {\n      points = geom.points.map(([x, y]) => [x + delta[0], y + delta[1]]);\n    } else {\n      points = geom.points.map(([x, y], idx) =>\n        handle === `HANDLE-${idx}` ? [x + delta[0], y + delta[1]] : [x, y]\n      );\n    }\n\n    const bounds = boundsFromPoints(points);\n\n    return {\n      ...polygon,\n      geometry: { points, bounds }\n    }\n  }\n</script>\n\n<Editor\n  shape={shape}\n  transform={transform}\n  editor={editor}\n  on:change \n  on:grab\n  on:release\n  let:grab={grab}>\n\n  <polygon\n    class=\"a9s-outer\"\n    style={computedStyle ? 'display:none;' : undefined}\n    on:pointerdown={grab('SHAPE')}\n    points={geom.points.map(xy => xy.join(',')).join(' ')} />\n\n  <polygon\n    class=\"a9s-inner a9s-shape-handle\"\n    style={computedStyle}\n    on:pointerdown={grab('SHAPE')}\n    points={geom.points.map(xy => xy.join(',')).join(' ')} />\n\n  {#each geom.points as point, idx}\n    <Handle \n      on:pointerdown={grab(`HANDLE-${idx}`)}\n      x={point[0]} y={point[1]} \n      scale={viewportScale} />\n  {/each}\n</Editor>","export const isTouch = 'ontouchstart' in window \n  || navigator.maxTouchPoints > 0\n  // @ts-ignore\n  || navigator.msMaxTouchPoints > 0;\n","<script lang=\"ts\">\n  import { isTouch } from '../utils';\n\n  /** props **/\n  export let x: number;\n  export let y: number;\n  export let scale: number;\n  export let radius: number = 30;\n\n  let touched = false;\n\n  const onPointerDown = (event: PointerEvent) => {\n    if (event.pointerType === 'touch')\n      touched = true;\n  }\n\n  const onPointerUp = () =>\n    touched = false;\n\n  $: handleSize = 10 / scale;\n</script>\n\n{#if isTouch}\n  <g class=\"a9s-touch-handle\">\n    <circle \n      cx={x} \n      cy={y} \n      r={radius / scale}\n      class=\"a9s-touch-halo\"\n      class:touched={touched}\n      on:pointerdown\n      on:pointerdown={onPointerDown} \n      on:pointerup={onPointerUp} />\n\n    <rect \n      class={`a9s-handle ${$$props.class || ''}`.trim()}\n      x={x - handleSize / 2} \n      y={y - handleSize / 2} \n      width={handleSize} \n      height={handleSize}\n      on:pointerdown\n      on:pointerdown={onPointerDown} \n      on:pointerup={onPointerUp}  />\n  </g>\n{:else}\n  <rect \n    class={`a9s-handle ${$$props.class || ''}`.trim()}\n    x={x - handleSize / 2} \n    y={y - handleSize / 2} \n    width={handleSize} \n    height={handleSize} \n    on:pointerdown />\n{/if}\n\n<style>\n  .a9s-touch-halo {\n    fill: transparent;\n    stroke-width: 0;\n  }\n\n  .a9s-touch-halo.touched {\n    fill: rgba(255, 255, 255, 0.25);\n  }\n\n\n</style>\n","<script lang=\"ts\">\n  import Handle from '../Handle.svelte';\n  import type { Rectangle, Shape } from '../../../model';\n  import type { Transform } from '../../Transform';\n  import { Editor } from '..';\n\n  /** Props */\n  export let shape: Rectangle;\n  export let computedStyle: string | undefined;\n  export let transform: Transform;\n  export let viewportScale: number = 1;\n\n  $: geom = shape.geometry;\n\n  const editor = (rectangle: Shape, handle: string, delta: [number, number]) => {\n    const initialBounds = rectangle.geometry.bounds;\n\n    let [x0, y0] = [initialBounds.minX, initialBounds.minY];\n    let [x1, y1] = [initialBounds.maxX, initialBounds.maxY];\n\n    const [dx, dy] = delta;\n\n    if (handle === 'SHAPE') {\n      x0 += dx;\n      x1 += dx;\n      y0 += dy;\n      y1 += dy;\n    } else {\n      switch (handle) {\n        case 'TOP':\n        case 'TOP_LEFT':\n        case 'TOP_RIGHT': {\n          y0 += dy;\n          break;\n        }\n\n        case 'BOTTOM':\n        case 'BOTTOM_LEFT':\n        case 'BOTTOM_RIGHT': {\n          y1 += dy;\n          break;\n        }\n      }\n\n      switch (handle) {\n        case 'LEFT':\n        case 'TOP_LEFT':\n        case 'BOTTOM_LEFT': {\n          x0 += dx;\n          break;\n        }\n\n        case 'RIGHT':\n        case 'TOP_RIGHT':\n        case 'BOTTOM_RIGHT': {\n          x1 += dx;\n          break;\n        }\n      }\n    }\n\n    const x = Math.min(x0, x1);\n    const y = Math.min(y0, y1);\n    const w = Math.abs(x1 - x0);\n    const h = Math.abs(y1 - y0);\n\n    return {\n      ...rectangle,\n      geometry: {\n        x, y, w, h,\n        bounds: {\n          minX: x,\n          minY: y,\n          maxX: x + w,\n          maxY: y + h\n        }\n      }\n    };\n  }\n</script>\n\n<Editor\n  shape={shape}\n  transform={transform}\n  editor={editor}\n  on:grab\n  on:change \n  on:release\n  let:grab={grab}>\n\n  <rect \n    class=\"a9s-outer\"\n    style={computedStyle ? 'display:none;' : undefined}\n    on:pointerdown={grab('SHAPE')}\n    x={geom.x} y={geom.y} width={geom.w} height={geom.h} />\n\n  <rect \n    class=\"a9s-inner a9s-shape-handle\"\n    style={computedStyle}\n    on:pointerdown={grab('SHAPE')}\n    x={geom.x} y={geom.y} width={geom.w} height={geom.h} />\n\n  <rect \n    class=\"a9s-edge-handle a9s-edge-handle-top\" \n    on:pointerdown={grab('TOP')}\n    x={geom.x} y={geom.y} height={1} width={geom.w} />\n\n  <rect \n    class=\"a9s-edge-handle a9s-edge-handle-right\"\n    on:pointerdown={grab('RIGHT')}\n    x={geom.x + geom.w} y={geom.y} height={geom.h} width={1}/>\n\n  <rect \n    class=\"a9s-edge-handle a9s-edge-handle-bottom\" \n    on:pointerdown={grab('BOTTOM')}\n    x={geom.x} y={geom.y + geom.h} height={1} width={geom.w} />\n\n  <rect \n    class=\"a9s-edge-handle a9s-edge-handle-left\" \n    on:pointerdown={grab('LEFT')}\n    x={geom.x} y={geom.y} height={geom.h} width={1} />\n\n  <Handle\n    class=\"a9s-corner-handle-topleft\"\n    on:pointerdown={grab('TOP_LEFT')}\n    x={geom.x} y={geom.y}\n    scale={viewportScale} /> \n\n  <Handle\n    class=\"a9s-corner-handle-topright\"\n    on:pointerdown={grab('TOP_RIGHT')}\n    x={geom.x + geom.w} y={geom.y} \n    scale={viewportScale} />\n  \n  <Handle \n    class=\"a9s-corner-handle-bottomright\"\n    on:pointerdown={grab('BOTTOM_RIGHT')}\n    x={geom.x + geom.w} y={geom.y + geom.h} \n    scale={viewportScale} />\n    \n  <Handle \n    class=\"a9s-corner-handle-bottomleft\"\n    on:pointerdown={grab('BOTTOM_LEFT')}\n    x={geom.x} y={geom.y + geom.h} \n    scale={viewportScale} />\n</Editor>","import { ShapeType, type Shape } from '../../model';\nimport type { SvelteComponent } from 'svelte';\nimport { PolygonEditor } from './polygon';\nimport { RectangleEditor } from './rectangle';\n\nconst REGISTERED = new Map<ShapeType, typeof SvelteComponent>([\n  [ShapeType.RECTANGLE, RectangleEditor],\n  [ShapeType.POLYGON, PolygonEditor]\n]);\n\nexport const getEditor = (shape: Shape) => REGISTERED.get(shape.type);\n\nexport const registerEditor = (shapeType: ShapeType, editor: typeof SvelteComponent) =>\n  REGISTERED.set(shapeType, editor);","<script lang=\"ts\">\n  import { createEventDispatcher } from 'svelte';\n  import type { Shape } from '../../model';\n  import type { Transform } from '../Transform';\n\n  const dispatch = createEventDispatcher<{ grab: PointerEvent, release: PointerEvent, change: Shape }>();\n\n  /** Props */\n  export let shape: Shape;\n  export let editor: (shape: Shape, handle: string, delta: [number, number]) => Shape;\n  export let transform: Transform;\n\n  let grabbedHandle: string | undefined;\n\n  let origin: [number, number];\n\n  let initialShape: Shape | undefined;\n\n  const onGrab = (handle: string) => (evt: PointerEvent) => {\n    grabbedHandle = handle;\n    origin = transform.elementToImage(evt.offsetX, evt.offsetY);\n    initialShape = shape;\n\n    const target = evt.target as Element;\n    target.setPointerCapture(evt.pointerId);\n\n    dispatch('grab', evt);\n  }\n\n  const onPointerMove = (evt: PointerEvent) => {\n    if (grabbedHandle) {\n      const [x, y] = transform.elementToImage(evt.offsetX, evt.offsetY);\n\n      const delta: [number, number] = [x - origin[0], y - origin[1]];\n\n      shape = editor(initialShape!, grabbedHandle, delta);\n      \n      dispatch('change', shape);\n    }\n  }\n\n  const onRelease = (evt: PointerEvent) => {    \n    const target = evt.target as Element;\n    target.releasePointerCapture(evt.pointerId);\n\n    grabbedHandle = undefined;\n\n    initialShape = shape;\n    \n    dispatch('release', evt);\n  }\n</script>\n\n<g\n  class=\"a9s-annotation selected\"\n  on:pointerup={onRelease}\n  on:pointermove={onPointerMove}>\n\n  <slot grab={onGrab} />\n</g>","import type { DrawingStyleExpression } from '@annotorious/core';\nimport type { ImageAnnotation } from '../../model';\n\nexport const computeStyle = (\n  annotation: ImageAnnotation, \n  style?: DrawingStyleExpression<ImageAnnotation>\n) => {\n  const computed = typeof style === 'function' ? style(annotation) : style;\n\n  if (computed) {\n    const { fill, fillOpacity } = computed;\n\n    let css = '';\n    \n    if (fill)\n      css += `fill:${fill};stroke:${fill};`;\n    \n    css += `fill-opacity:${fillOpacity || '0.25'};`;\n\n    return css;\n  }\n}","<script lang=\"ts\">\n  import type { DrawingStyleExpression } from '@annotorious/core';\n  import { createEventDispatcher, onMount, type SvelteComponent } from 'svelte';\n  import type { ImageAnnotation, Shape } from '../../model';\n  import { computeStyle } from '../utils/styling';\n  import type { Transform } from '../Transform';\n\n  const dispatch = createEventDispatcher<{ grab: PointerEvent, release: PointerEvent, change: Shape }>();\n\n  /** Props */\n  export let annotation: ImageAnnotation;\n  export let editor: typeof SvelteComponent;\n  export let style: DrawingStyleExpression<ImageAnnotation> | undefined;\n  export let target: SVGGElement;\n  export let transform: Transform;\n  export let viewportScale: number;\n\n  let editorComponent: SvelteComponent;\n\n  $: computedStyle = computeStyle(annotation, style);\n\n  $: if (annotation) editorComponent?.$set({ shape: annotation.target.selector });\n  $: if (editorComponent) editorComponent.$set({ transform });\n  $: if (editorComponent) editorComponent.$set({ viewportScale });\n\n  onMount(() => {\n    editorComponent = new editor({\n      target,\n      props: { shape: annotation.target.selector, computedStyle, transform, viewportScale }\n    });\n\n    editorComponent.$on('change', event => {\n      editorComponent.$$set({ shape: event.detail });\n      dispatch('change', event.detail);\n    });\n\n    editorComponent.$on('grab', event => dispatch('grab', event.detail));\n    editorComponent.$on('release', event => dispatch('release', event.detail));\n\n    return () => {\n      editorComponent.$destroy();\n    }\n  });\n</script>","import type { Annotation, UndoStack } from '@annotorious/core';\n\nconst isMac = navigator.userAgent.indexOf('Mac OS X') !== -1;\n\nexport const initKeyboardCommands = <T extends Annotation>(\n  undoStack: UndoStack<T>,\n  container?: Element \n) => {\n\n  const el = container || document;\n\n  const onWinKeyDown = (evt: Event) => {\n    const event = evt as KeyboardEvent;\n    \n    if (event.key === 'z' && event.ctrlKey) {\n      undoStack.undo();\n    } else if (event.key === 'y' && event.ctrlKey) {\n      undoStack.redo()\n    }\n  };\n\n  const onMacKeyDown = (evt: Event) => {\n    const event = evt as KeyboardEvent;\n\n    if (event.key === 'z' && event.metaKey) {\n      if (event.shiftKey) {\n        undoStack.redo()\n      } else {\n        undoStack.undo();\n      }\n    }\n  }\n\n  const destroy = () => {\n    if (isMac) {\n      el.removeEventListener('keydown', onMacKeyDown);\n    } else {\n      el.removeEventListener('keydown', onWinKeyDown);\n    }\n  }\n\n  if (isMac)\n    el.addEventListener('keydown', onMacKeyDown);\n  else\n    el.addEventListener('keydown', onWinKeyDown);\n\n  return { \n    destroy\n  }\n}\n","<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import OpenSeadragon from 'openseadragon';\n    \n  export let viewer: OpenSeadragon.Viewer;\n\n  // Current layer scale\n  let scale = 1;\n\n  // CSS layer transform\n  let layerTransform: string;\n\n  const onUpdateViewport = () => {\n    const containerWidth = viewer.viewport.getContainerSize().x;\n\n    const zoom = viewer.viewport.getZoom(true);\n    const flipped = viewer.viewport.getFlip();\n\n    const p = viewer.viewport.pixelFromPoint(new OpenSeadragon.Point(0, 0), true);\n    if (flipped)\n      p.x = containerWidth - p.x;\n    \n    const scaleY = zoom * containerWidth / viewer.world.getContentFactor();\n    const scaleX = flipped ? - scaleY : scaleY;\n    const rotation = viewer.viewport.getRotation();\n\n    layerTransform = `translate(${p.x}, ${p.y}) scale(${scaleX}, ${scaleY}) rotate(${rotation})`;\n\n    scale = zoom * containerWidth / viewer.world.getContentFactor();\n  }\n\n  onMount(() => {\n    viewer.addHandler('update-viewport', onUpdateViewport);\n\n    return () => {\n      viewer.removeHandler('update-viewport', onUpdateViewport);\n    }\n  });\n</script>\n\n<slot transform={layerTransform} scale={scale} />","<script lang=\"ts\">\n  import { createEventDispatcher, onMount, type SvelteComponent } from 'svelte';\n  import type OpenSeadragon from 'openseadragon';\n  import type { DrawingMode, Shape, Transform } from '@annotorious/annotorious';\n\n  const dispatch = createEventDispatcher<{ create: Shape }>();\n\n  /** Props **/\n  export let drawingMode: DrawingMode;\n  export let target: SVGGElement;\n  export let tool: typeof SvelteComponent;\n  export let transform: Transform;\n  export let viewer: OpenSeadragon.Viewer\n  export let viewportScale: number;\n\n  let toolComponent: SvelteComponent;\n\n  $: if (toolComponent) toolComponent.$set({ transform });\n  $: if (toolComponent) toolComponent.$set({ viewportScale });\n\n  onMount(() => {\n    const svg = target.closest('svg');\n\n    const cleanup: Function[] = [];\n\n    const addEventListener = (name: string, handler: (evt: Event) => void, capture?: boolean) => {\n      // Attach to SVG element\n      svg?.addEventListener(name, handler, capture);\n      cleanup.push(() => svg?.removeEventListener(name, handler, capture));\n\n      if (name === 'pointerup' || name === 'dblclick') {\n        // OpenSeadragon, by design, stops the 'pointerup' event. In order to capture pointer up events,\n        // we need to listen to the canvas-click event instead\n        const osdHandler = (event: OpenSeadragon.CanvasClickEvent | OpenSeadragon.CanvasDoubleClickEvent) => {\n          const { originalEvent } = event;\n          handler(originalEvent as PointerEvent);\n        }\n\n        const osdName = name === 'pointerup' ? 'canvas-click' : 'canvas-double-click';\n\n        viewer.addHandler(osdName, osdHandler);\n        cleanup.push(() => viewer.removeHandler(osdName, osdHandler));\n      } else if (name === 'pointermove') {\n        const dragHandler = (event: OpenSeadragon.CanvasDragEvent) => {\n          const { originalEvent } = event;\n          handler(originalEvent as PointerEvent);\n        }\n\n        viewer.addHandler('canvas-drag', dragHandler);\n        cleanup.push(() => viewer.removeHandler('canvas-drag', dragHandler));\n      }\n    }\n\n    toolComponent = new tool({\n      target,\n      props: { \n        addEventListener,\n        drawingMode,\n        transform, \n        viewportScale\n      }\n    });\n\n    toolComponent.$on('create', \n      event => dispatch('create', event.detail));\n\n    return () => {\n      cleanup.forEach(fn => fn());\n      toolComponent.$destroy();\n    }\n  });\n</script>","<script lang=\"ts\">\n  import { SvelteComponent } from 'svelte';\n  import { v4 as uuidv4 } from 'uuid';\n  import OpenSeadragon from 'openseadragon';\n  import type { DrawingStyle, Filter, StoreChangeEvent, User } from '@annotorious/core';\n  import { EditorMount } from '@annotorious/annotorious/src'; // Import Svelte components from source\n  import { getEditor as _getEditor, getTool, listDrawingTools } from '@annotorious/annotorious';\n  import type { ImageAnnotation, Shape, ImageAnnotatorState, DrawingMode } from '@annotorious/annotorious';\n  import OSDLayer from '../OSDLayer.svelte';\n  import OSDToolMount from './OSDToolMount.svelte';\n\n  /** Props **/\n  export let drawingEnabled: boolean;\n  export let filter: Filter<ImageAnnotation> | undefined;\n  export let preferredDrawingMode: DrawingMode;\n  export let state: ImageAnnotatorState;\n  export let style: DrawingStyle | ((annotation: ImageAnnotation) => DrawingStyle) | undefined = undefined;\n  export let toolName: string = listDrawingTools()[0];\n  export let user: User;\n  export let viewer: OpenSeadragon.Viewer;\n\n  $: ({ tool, opts } = getTool(toolName) || { tool: undefined, opts: undefined });\n\n  /** Drawing tool layer **/\n  let drawingEl: SVGGElement;\n\n  /** Tool lifecycle **/\n  $: drawingMode = opts?.drawingMode || preferredDrawingMode;\n\n  $: drawingEnabled && drawingMode === 'drag' ? viewer.setMouseNavEnabled(false) : viewer.setMouseNavEnabled(true); \n\n  $: drawingEnabled && selection.clear();\n\n  /** Selection tracking **/\n  const { store, selection, hover } = state;\n\n  let storeObserver: (event: StoreChangeEvent<ImageAnnotation>) => void;\n\n  let editableAnnotations: ImageAnnotation[] | undefined;\n\n  let grabbedAt: number | undefined;\n \n  $: if ($selection.selected.length === 0 && drawingMode === 'drag' && drawingEnabled) { viewer.setMouseNavEnabled(false) }\n\n  $: trackSelection($selection.selected);\n\n  const trackSelection = (selected: { id: string, editable?: boolean}[]) => {\n    store.unobserve(storeObserver);\n\n    // Track only editable annotations\n    const editableIds = \n      selected.filter(({ editable }) => editable).map(({ id }) => id);\n\n    if (editableIds.length > 0) {\n      // Resolve selected IDs from the store\n      editableAnnotations = editableIds.map(id => store.getAnnotation(id)!);\n\n      // Track updates on the selected annotations\n      storeObserver = (event: StoreChangeEvent<ImageAnnotation>) => {\n        const { updated } = event.changes;\n        editableAnnotations = (updated || []).map(change => change.newValue);\n      }   \n      \n      store.observe(storeObserver, { annotations: editableIds });\n    } else {\n      editableAnnotations = undefined;\n    }\n  }\n\n  // Coordinate transform, element offset to OSD image coordinates\n  const toolTransform = (offsetX: number, offsetY: number): [number, number] => {\n    const {x, y} = viewer.viewport.viewerElementToImageCoordinates(new OpenSeadragon.Point(offsetX, offsetY));\n    return [x, y];\n  }\n\n  const onGrab = (evt: CustomEvent<PointerEvent>) => {\n    viewer.setMouseNavEnabled(false);\n\n    // Record timestamp, so we can differentiate between actual\n    // grab (edit) and click (possibly select overlapping shape)\n    grabbedAt = evt.timeStamp;\n  }\n\n  const onRelease = (evt: CustomEvent<PointerEvent>) => { \n    viewer.setMouseNavEnabled(true);\n\n    const timeDifference = performance.now() - (grabbedAt || 0);\n    if (timeDifference < 300) {\n      // Click - check if another shape needs selecting\n      const { offsetX, offsetY } = evt.detail;\n      const [x, y] = toolTransform(offsetX, offsetY);\n\n      const hit = store.getAt(x, y);\n      const isVisibleHit = hit && (!filter || filter(hit));\n\n      if (isVisibleHit && !editableAnnotations!.find(e => e.id === hit.id)) {\n        hover.set(hit.id);\n        selection.setSelected(hit.id);\n      }\n    }\n  }\n\n  const onChangeSelected = (annotation: ImageAnnotation) => (event: CustomEvent<Shape>) => {  \n    const { target } = annotation;\n\n    // We don't consider a shape edit an 'update' if it happens within 10mins\n    const GRACE_PERIOD = 10 * 60 * 1000;\n\n    const isUpdate = \n      target.creator?.id !== user.id ||\n      !target.created ||\n      new Date().getTime() - target.created.getTime() > GRACE_PERIOD;\n\n    store.updateTarget({\n      ...target,\n      selector: event.detail,\n      created: isUpdate ? target.created : new Date(),\n      updated: isUpdate ? new Date() : undefined,\n      updatedBy: isUpdate ? user : undefined\n    });\n  }\n\n  const onSelectionCreated = <T extends Shape>(evt: CustomEvent<T>) => {\n    const id = uuidv4();\n\n    const annotation: ImageAnnotation = {\n      id,\n      bodies: [],\n      target: {\n        annotation: id,\n        selector: evt.detail,\n        creator: user,\n        created: new Date()\n      }\n    }\n\n    store.addAnnotation(annotation);\n\n    selection.setSelected(annotation.id);\n\n    viewer.setMouseNavEnabled(true);\n  }\n\n  // To get around lack of TypeScript support in Svelte markup\n  const getEditor = (shape: Shape): typeof SvelteComponent => _getEditor(shape)!;\n</script>\n\n<OSDLayer viewer={viewer} let:transform let:scale>\n  <svg \n    class=\"a9s-annotationlayer a9s-osd-drawinglayer\"\n    class:drawing={drawingEnabled}>\n\n    <g \n      bind:this={drawingEl}\n      transform={transform}>\n      {#if drawingEl && editableAnnotations}\n        {#each editableAnnotations as editable}\n          {#key editable.id}\n            <EditorMount\n              target={drawingEl}\n              editor={getEditor(editable.target.selector)}\n              annotation={editable}\n              style={style}\n              transform={{ elementToImage: toolTransform }}\n              viewportScale={scale}\n              on:grab={onGrab} \n              on:change={onChangeSelected(editable)}\n              on:release={onRelease} />\n            {/key}\n        {/each}\n      {:else if (drawingEl && tool && drawingEnabled)} \n        {#key toolName} \n          <OSDToolMount\n            target={drawingEl}\n            tool={tool}\n            drawingMode={drawingMode}\n            transform={{ elementToImage: toolTransform }}\n            viewer={viewer}\n            viewportScale={scale}\n            on:create={onSelectionCreated} />\n        {/key}\n      {/if}\n    </g>\n  </svg>\n</OSDLayer>\n\n<style>\n  svg {\n    pointer-events: none;\n  }\n  \n  svg.drawing {\n    pointer-events: all;\n  }\n\n  svg * {\n    pointer-events: all;\n  }\n</style>","<script lang=\"ts\">\n  import type { PresentUser } from '@annotorious/core';\n\n  export let x: number;\n\n  export let y: number;\n\n  export let user: PresentUser;\n\n  export let scale: number;\n\n  export let hAlign: 'CENTER' | null = null;\n\n  let g: SVGGElement;\n\n  $: if (g) setWidth(scale);\n\n  const setWidth = (scale: number) => {\n    const textEl = g.querySelector('text');\n    const rectEl = g.querySelector('rect');\n\n    const width = textEl!.getBBox().width + 10 / scale;\n\n    if (hAlign === 'CENTER') {\n      g.setAttribute('style', `transform: translateX(-${width / 2}px)`);\n    }\n\n    rectEl!.setAttribute('width', `${width}`);\n  }\n</script>\n\n<g bind:this={g} class=\"a9s-presence-label\">\n  <rect\n    class=\"a9s-presence-label-bg\" \n    x={x} \n    y={y - 18 / scale} \n    height={18 / scale} \n    fill={user.appearance.color}\n    stroke={user.appearance.color} />\n\n  <text font-size={12 / scale} x={x + Math.round(5 / scale)} y={y - 5 / scale}>{user.appearance.label}</text>\n</g>\n\n<style>\n  text {\n    fill: #fff;\n    font-family: Arial, Helvetica, sans-serif;\n    font-weight: 600;\n  }\n\n  rect {\n    stroke-width: 1.2;\n    vector-effect: non-scaling-stroke;\n  }\n</style>","<script lang=\"ts\">\n  import type { PresentUser } from '@annotorious/core';\n  import type { ImageAnnotation, PolygonGeometry } from '@annotorious/annotorious/src';\n  import SVGPresenceLabel from '../SVGPresenceLabel.svelte';\n\n  export let annotation: ImageAnnotation;\n\n  export let user: PresentUser;\n\n  export let scale: number;\n\n  $: geom = annotation.target.selector.geometry as PolygonGeometry;\n\n  $: origin = getHighestPoint(geom);\n\n  const getHighestPoint = (geom: PolygonGeometry) => {\n    let [highestPoint, ...rest] = geom.points;\n\n    rest.forEach(([x, y]) => {\n      if (y < highestPoint[1])\n        highestPoint = [x,y];\n    });\n\n    return highestPoint;\n  }\n</script>\n\n<g class=\"a9s-presence-overlay\">\n  <SVGPresenceLabel \n    scale={scale} \n    user={user} \n    x={origin[0]} y={origin[1]} \n    hAlign=\"CENTER\" />\n  \n  <polygon\n    class=\"a9s-presence-shape a9s-presence-polygon\"\n    stroke={user.appearance.color}\n    fill=\"transparent\"\n    points={geom.points.map(xy => xy.join(',')).join(' ')} />\n</g>\n\n<style>\n  polygon {\n    stroke-width: 1.2;\n    vector-effect: non-scaling-stroke;\n  }\n</style>","<script lang=\"ts\">\n  import type { PresentUser } from '@annotorious/core';\n  import type { ImageAnnotation, RectangleGeometry } from '@annotorious/annotorious/src';\n  import SVGPresenceLabel from '../SVGPresenceLabel.svelte';\n\n  export let annotation: ImageAnnotation;\n\n  export let user: PresentUser;\n\n  export let scale: number;\n\n  $: geom = annotation.target.selector.geometry as RectangleGeometry;\n</script>\n\n<g class=\"a9s-presence-overlay\">\n  <SVGPresenceLabel scale={scale} user={user} x={geom.x} y={geom.y} />\n  <rect\n    class=\"a9s-presence-shape a9s-presence-rectangle\"\n    stroke={user.appearance.color}\n    fill=\"transparent\"\n    x={geom.x} y={geom.y} width={geom.w} height={geom.h} />\n</g>\n\n<style>\n  rect {\n    stroke-width: 1.2;\n    vector-effect: non-scaling-stroke;\n  }\n</style>","<script lang=\"ts\">\n  import { onDestroy } from 'svelte';\n  import type { PresenceProvider, PresentUser, StoreChangeEvent } from '@annotorious/core';\n  import { ShapeType, type ImageAnnotation, type ImageAnnotationStore } from '@annotorious/annotorious';\n  import OSDLayer from '../OSDLayer.svelte';\n  import SVGPresencePolygon from './shapes/PresencePolygon.svelte';\n  import SVGPresenceRectangle from './shapes/PresenceRectangle.svelte';\n\n  interface TrackedAnnotation {\n\n    annotation: ImageAnnotation;\n\n    selectedBy: PresentUser;\n\n  }\n\n  export let store: ImageAnnotationStore;\n  \n  export let viewer: OpenSeadragon.Viewer;\n\n  export let provider: PresenceProvider | undefined;\n\n  let trackedAnnotations: TrackedAnnotation[] = [];\n\n  let storeObserver: (event: StoreChangeEvent<ImageAnnotation>) => void;\n\n  $: if (provider) provider.on('selectionChange', onSelectionChange);\n\n  const onSelectionChange = (p: PresentUser, selection: string[] | null) => {\n    trackedAnnotations = [\n      ...trackedAnnotations\n        .filter(({ selectedBy }) => selectedBy.presenceKey !== p.presenceKey),\n      ...(selection || []).map(id => ({ \n          // Warning - could be undefined!\n          annotation: store.getAnnotation(id)!,\n          selectedBy: p\n        }))\n    ].filter(({ annotation }) => {\n      if (!annotation)\n        console.warn('Selection event on unknown annotation');\n\n      return Boolean(annotation);\n    });\n    \n    // Track selection state in the store\n    if (storeObserver)\n      store.unobserve(storeObserver);\n\n    storeObserver = (event: StoreChangeEvent<ImageAnnotation>) => {      \n      const { deleted, updated } = event.changes;\n\n      const deletedIds = new Set((deleted || []).map(a => a.id));\n\n      const next: TrackedAnnotation[] = trackedAnnotations\n        // Remove deleted\n        .filter(({ annotation }) => !deletedIds.has(annotation.id))\n        // Replace updated\n        .map(tracked => {\n          const u = (updated || []).find(update => update.oldValue.id === tracked.annotation.id);\n          if (u) {\n            return { selectedBy: tracked.selectedBy, annotation: u.newValue }; \n          } else {\n            return tracked; \n          }\n        });\n\n      trackedAnnotations = next;\n    }\n\n    store.observe(storeObserver, { \n      annotations: trackedAnnotations.map(t => t.annotation.id)\n    });\n  }\n\n  onDestroy(() => {\n    if (storeObserver)\n      store.unobserve(storeObserver);\n  });\n</script>\n\n{#if Boolean(provider)}\n  <OSDLayer\n    viewer={viewer}\n    let:transform\n    let:scale>\n    <svg \n      class=\"a9s-osd-presencelayer\">\n      <g transform={transform}>\n        {#if trackedAnnotations.length > 0}\n          {#each trackedAnnotations as tracked}\n            {#if (tracked.annotation.target.selector.type === ShapeType.RECTANGLE)}\n              <SVGPresenceRectangle\n                annotation={tracked.annotation} \n                user={tracked.selectedBy}\n                scale={scale} />\n            {:else if (tracked.annotation.target.selector.type === ShapeType.POLYGON)}\n              <SVGPresencePolygon\n                annotation={tracked.annotation} \n                user={tracked.selectedBy}\n                scale={scale} />\n            {/if}\n          {/each}\n        {/if}\n      </g>\n    </svg>\n  </OSDLayer>\n{/if}\n\n<style>\n  svg {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    outline: none;\n    pointer-events: none;\n  }\n</style>\n","import type OpenSeadragon from 'openseadragon';\nimport type { Theme } from '@annotorious/annotorious';\nimport { detectTheme } from '@annotorious/annotorious';\n\nexport const setTheme = (viewer: OpenSeadragon.Viewer, theme: Theme) => {\n  if (theme === 'auto') {\n    // Wait for image to load and then detect theme\n    viewer.addHandler('open', event => {\n      const itemCount = viewer.world.getItemCount();\n\n      const lastItem = viewer.world.getItemAt(itemCount - 1);\n      lastItem.addOnceHandler('fully-loaded-change', event => {\n        const { fullyLoaded } = event;\n\n        if (fullyLoaded) {\n          // The current image was fully loaded, all tiles rendered\n          const canvas = viewer.canvas.querySelector('canvas');\n          \n          const detected = detectTheme(canvas!);\n          viewer.element.setAttribute('data-theme', detected);\n        }\n      })\n    });\n  } else {\n    viewer.element.setAttribute('data-theme', theme);\n  }\n\n}","import type { ImageAnnotationStore } from '@annotorious/annotorious';\nimport type OpenSeadragon from 'openseadragon';\n\nexport interface FitboundsOptions {\n\n  immediately?: boolean;\n\n  padding?: number | [number, number, number, number]\n\n}\n\nconst _fitBounds = (\n  viewer: OpenSeadragon.Viewer,\n  store: ImageAnnotationStore,\n  fn: string\n) => (arg: { id: string } | string, opts: FitboundsOptions = {}) => {\n  const id = typeof arg === 'string' ? arg : arg.id;\n\n  const annotation = store.getAnnotation(id);\n  if  (!annotation)\n    return;\n\n  const containerBounds = viewer.container.getBoundingClientRect();\n\n  const { padding } = opts;\n\n  let [pt, pr, pb, pl] = padding ? (\n    Array.isArray(padding) ? padding : [ padding, padding, padding, padding ]\n  ) : [0, 0, 0, 0];\n\n  // Relative padding\n  pt = pt / containerBounds.height;\n  pr = pr / containerBounds.width;\n  pb = pb / containerBounds.height;\n  pl = pl / containerBounds.width;\n\n  const { minX, minY, maxX, maxY } = annotation.target.selector.geometry.bounds;\n\n  const w = maxX - minX;\n  const h = maxY - minY;\n\n  const padX = minX - pl * w;\n  const padY = minY - pt * h;\n  const padW = w + (pr + pl) * w;\n  const padH = h + (pt + pb) * h;\n\n  const rect = viewer.viewport.imageToViewportRectangle(padX, padY, padW, padH);\n\n  // @ts-ignore\n  viewer.viewport[fn](rect, opts.immediately);\n} \n\nexport const fitBounds = (\n  viewer: OpenSeadragon.Viewer,\n  store: ImageAnnotationStore\n) => _fitBounds(viewer, store, 'fitBounds');\n\nexport const fitBoundsWithConstraints = (\n  viewer: OpenSeadragon.Viewer,\n  store: ImageAnnotationStore\n) => _fitBounds(viewer, store, 'fitBoundsWithConstraints');\n","import type OpenSeadragon from 'openseadragon';\nimport type { SvelteComponent } from 'svelte';\nimport { \n  createAnonymousGuest, \n  createBaseAnnotator, \n  createLifecyleObserver, \n  createUndoStack, \n  PointerSelectAction\n} from '@annotorious/core';\nimport type { \n  Annotator, \n  DrawingStyleExpression, \n  Filter, \n  PresenceProvider, \n  User \n} from '@annotorious/core';\nimport { \n  createImageAnnotatorState, \n  fillDefaults, \n  getTool,\n  initKeyboardCommands,\n  isTouch,\n  listDrawingTools,\n  registerTool,\n  registerEditor\n} from '@annotorious/annotorious';\nimport type {\n  AnnotoriousOpts, \n  DrawingTool, \n  DrawingToolOpts, \n  ImageAnnotation, \n  ShapeType, \n  Theme\n} from '@annotorious/annotorious';\nimport type { PixiLayerClickEvent } from './annotation';\nimport { PixiLayer, SVGDrawingLayer, SVGPresenceLayer } from './annotation';\nimport { setTheme as _setTheme } from './themes';\nimport { \n  fitBounds as _fitBounds, \n  fitBoundsWithConstraints as _fitBoundsWithConstraints, \n  type FitboundsOptions \n} from './api';\n\nimport '@annotorious/annotorious/annotorious.css';\n\nexport interface OpenSeadragonAnnotator<E extends unknown = ImageAnnotation> extends Annotator<ImageAnnotation, E> {\n\n  viewer: OpenSeadragon.Viewer;\n\n  fitBounds(arg: { id: string } | string, opts?: FitboundsOptions): void;\n\n  fitBoundsWithConstraints(arg: { id: string } | string, opts?: FitboundsOptions): void;\n\n  listDrawingTools(): string[];\n\n  registerDrawingTool(name: string, tool: typeof SvelteComponent, opts?: DrawingToolOpts): void;\n\n  registerShapeEditor(shapeType: ShapeType, editor: typeof SvelteComponent): void;\n\n  setDrawingTool(name: DrawingTool): void;\n\n  setDrawingEnabled(enabled: boolean): void;\n\n  setTheme(theme: 'light' | 'dark' | 'auto'): void;\n\n}\n\nexport const createOSDAnnotator = <E extends unknown = ImageAnnotation>(\n  viewer: OpenSeadragon.Viewer, \n  options: AnnotoriousOpts<ImageAnnotation, E> = {}\n): OpenSeadragonAnnotator<E> => {\n\n  const opts = fillDefaults<ImageAnnotation, E>(options, {\n    drawingEnabled: false,\n    drawingMode: isTouch ? 'drag' : 'click',\n    pointerSelectAction: PointerSelectAction.EDIT,\n    theme: 'light'\n  });\n\n  const state = createImageAnnotatorState(opts);\n\n  const { hover, selection, store } = state;\n\n  const undoStack = createUndoStack(store);\n\n  const lifecycle = createLifecyleObserver(\n    state, undoStack, opts.adapter, opts.autoSave);\n\n  let currentUser: User = createAnonymousGuest();\n\n  let drawingEnabled = opts.drawingEnabled;\n\n  let drawingMode = opts.drawingMode;\n\n  const keyboardCommands = initKeyboardCommands(undoStack, viewer.element);\n\n  const displayLayer = new PixiLayer({\n    target: viewer.element,\n    props: { \n      state, \n      viewer, \n      style: opts.style,\n      filter: undefined\n    }\n  });\n\n  const presenceLayer = new SVGPresenceLayer({\n    target: viewer.element.querySelector('.openseadragon-canvas')!,\n    props: { \n      provider: undefined,\n      store,\n      viewer\n    }\n  });\n\n  const drawingLayer = new SVGDrawingLayer({\n    target: viewer.element.querySelector('.openseadragon-canvas')!,\n    props: { \n      drawingEnabled: Boolean(drawingEnabled),\n      filter: undefined,\n      preferredDrawingMode: drawingMode!,\n      state,\n      style: opts.style,\n      user: currentUser, \n      viewer\n    }\n  });\n\n  displayLayer.$on('click', (evt: CustomEvent<PixiLayerClickEvent>) => {\n    const { originalEvent, annotation } = evt.detail;\n\n    // Ignore click event if drawing is currently active with mode  'click'\n    const blockEvent = drawingMode === 'click' && drawingEnabled;\n\n    if (annotation && !blockEvent)\n      selection.clickSelect(annotation.id, originalEvent);\n    else if (!selection.isEmpty())\n      selection.clear();\n  });\n\n  viewer.element.addEventListener('pointerdown', (event: PointerEvent) => {\n    if (hover.current) {\n      const hovered = store.getAnnotation(hover.current)!;\n      lifecycle.emit('clickAnnotation', hovered, event);\n    }\n  });\n  \n  _setTheme(viewer, opts.theme!);\n\n  /*************************/\n  /*      External API     */\n  /******++++++*************/\n\n  // Most of the external API functions are covered in the base annotator\n  const base = createBaseAnnotator<ImageAnnotation, E>(state, undoStack, opts.adapter);\n\n  const destroy = () => {\n    // Destroy Svelte layers\n    displayLayer.$destroy();\n    presenceLayer.$destroy();\n    drawingLayer.$destroy();\n\n    // Other cleanup actions\n    keyboardCommands.destroy();\n    undoStack.destroy();\n  }\n\n  const fitBounds = _fitBounds(viewer, store);\n\n  const fitBoundsWithConstraints = _fitBoundsWithConstraints(viewer, store);\n\n  const getUser = () => currentUser;\n\n  const registerDrawingTool = (name: string, tool: typeof SvelteComponent, opts?: DrawingToolOpts) =>\n    registerTool(name, tool, opts);\n\n  const registerShapeEditor = (shapeType: ShapeType, editor: typeof SvelteComponent) =>\n    registerEditor(shapeType, editor);\n\n  const setDrawingTool = (name: DrawingTool) => {\n    // Validate that the tool exists\n    const toolSpec = getTool(name);\n    if (!toolSpec)\n      throw `No drawing tool named ${name}`;\n    \n    // @ts-ignore\n    drawingLayer.$set({ toolName: name });\n  }\n\n  const setDrawingEnabled = (enabled: boolean) => {\n    drawingEnabled = enabled;\n    drawingLayer.$set({ drawingEnabled });\n  }\n\n  const setFilter = (filter: Filter | undefined) => {\n    // @ts-ignore\n    displayLayer.$set({ filter });\n    // @ts-ignore\n    drawingLayer.$set({ filter });\n  }\n\n  const setStyle = (style: DrawingStyleExpression<ImageAnnotation> | undefined) => {\n    displayLayer.$set({ style });\n    drawingLayer.$set({ style });\n  }\n\n  const setPresenceProvider = (provider: PresenceProvider) =>\n    // @ts-ignore\n    presenceLayer.$set({ provider });\n\n  const setTheme = (theme: Theme) => _setTheme(viewer, theme);\n\n  const setUser = (user: User) => {\n    currentUser = user;\n    drawingLayer.$set({ user });\n  }\n\n  const setVisible = (visible: boolean) =>\n    // @ts-ignore\n    displayLayer.$set({ visible });\n\n  return {\n    ...base,\n    destroy,\n    fitBounds,\n    fitBoundsWithConstraints,\n    getUser,\n    listDrawingTools,\n    on: lifecycle.on,\n    off: lifecycle.off,\n    registerDrawingTool,\n    registerShapeEditor,\n    setDrawingEnabled,\n    setDrawingTool,\n    setFilter,\n    setPresenceProvider,\n    setStyle,\n    setTheme,\n    setUser,\n    setVisible,\n    state,\n    viewer\n  }\n\n}\n","export * from './Annotorious';\n\n// Essential re-exports from @annotorious/core\nexport type {\n  Annotation,\n  AnnotationBody,\n  AnnotationState,\n  AnnotationTarget,\n  Annotator,\n  AnnotatorState,\n  Color,\n  DrawingStyle,\n  DrawingStyleExpression,\n  FormatAdapter,\n  HoverState,\n  Selection,\n  SelectionState,\n  Store,\n  StoreChangeEvent,\n  StoreObserver,\n  ParseResult,\n  User,\n  W3CAnnotation,\n  W3CAnnotationBody,\n  W3CAnnotationTarget\n} from '@annotorious/core';\n\nimport { \n  createBody as _createBody,\n  defaultColorProvider as _defaultColorProvider,\n  PointerSelectAction as _PointerSelectAction\n} from '@annotorious/core'; \n\nexport const defaultColorProvider = _defaultColorProvider;\nexport const PointerSelectAction = _PointerSelectAction;\nexport const createBody = _createBody;\n\n// Essential re-exports from @annotorious/annotorious \nexport type {\n  AnnotoriousOpts,\n  DrawingMode,\n  DrawingTool,\n  FragmentSelector,\n  ImageAnnotator as AnnotoriousImageAnnotator,\n  ImageAnnotation,\n  ImageAnnotator,\n  ImageAnnotatorState,\n  Polygon,\n  PolygonGeometry,\n  Rectangle,\n  RectangleGeometry,\n  Shape,\n  SVGSelector,\n  W3CImageAnnotation,\n  W3CImageAnnotationTarget\n} from '@annotorious/annotorious';\n\nimport {   \n  createImageAnnotator as _createImageAnnotator,\n  ShapeType as _ShapeType,\n  W3CImageFormat as _W3CImageFormat\n} from '@annotorious/annotorious';\n\nexport const createImageAnnotator = _createImageAnnotator;\nexport const ShapeType = _ShapeType;\nexport const W3CImageFormat = _W3CImageFormat;\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { Container } from '../scene/container/Container.mjs';\nimport { AccessibilitySystem } from './AccessibilitySystem.mjs';\nimport { accessibilityTarget } from './accessibilityTarget.mjs';\n\n\"use strict\";\nextensions.add(AccessibilitySystem);\nContainer.mixin(accessibilityTarget);\n//# sourceMappingURL=init.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { ResizePlugin } from './ResizePlugin.mjs';\nimport { TickerPlugin } from './TickerPlugin.mjs';\n\n\"use strict\";\nextensions.add(ResizePlugin);\nextensions.add(TickerPlugin);\n//# sourceMappingURL=init.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { Container } from '../scene/container/Container.mjs';\nimport { EventSystem } from './EventSystem.mjs';\nimport { FederatedContainer } from './FederatedEventTarget.mjs';\n\n\"use strict\";\nextensions.add(EventSystem);\nContainer.mixin(FederatedContainer);\n//# sourceMappingURL=init.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { GraphicsContextSystem } from './shared/GraphicsContextSystem.mjs';\nimport { GraphicsPipe } from './shared/GraphicsPipe.mjs';\n\n\"use strict\";\nextensions.add(GraphicsPipe);\nextensions.add(GraphicsContextSystem);\n//# sourceMappingURL=init.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { MeshPipe } from './shared/MeshPipe.mjs';\n\n\"use strict\";\nextensions.add(MeshPipe);\n//# sourceMappingURL=init.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { CanvasTextPipe } from './canvas/CanvasTextPipe.mjs';\nimport { CanvasTextSystem } from './canvas/CanvasTextSystem.mjs';\n\n\"use strict\";\nextensions.add(CanvasTextSystem);\nextensions.add(CanvasTextPipe);\n//# sourceMappingURL=init.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { loadBitmapFont, bitmapFontCachePlugin } from './asset/loadBitmapFont.mjs';\nimport { BitmapTextPipe } from './BitmapTextPipe.mjs';\n\n\"use strict\";\nextensions.add(BitmapTextPipe, loadBitmapFont, bitmapFontCachePlugin);\n//# sourceMappingURL=init.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { HTMLTextPipe } from './HTMLTextPipe.mjs';\nimport { HTMLTextSystem } from './HTMLTextSystem.mjs';\n\n\"use strict\";\nextensions.add(HTMLTextSystem);\nextensions.add(HTMLTextPipe);\n//# sourceMappingURL=init.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { TilingSpritePipe } from './TilingSpritePipe.mjs';\n\n\"use strict\";\nextensions.add(TilingSpritePipe);\n//# sourceMappingURL=init.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { NineSliceSpritePipe } from './NineSliceSpritePipe.mjs';\n\n\"use strict\";\nextensions.add(NineSliceSpritePipe);\n//# sourceMappingURL=init.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { FilterPipe } from './FilterPipe.mjs';\nimport { FilterSystem } from './FilterSystem.mjs';\n\n\"use strict\";\nextensions.add(FilterSystem);\nextensions.add(FilterPipe);\n//# sourceMappingURL=init.mjs.map\n"],"names":["j","B","e","n","o","G","$","F","J","D","Q","X","M","Z","Ue","K","ee","te","i","ne","P","O","ie","s","p","L","E","y","h","u","U","w","b","S","W","ae","Te","a","A","m","R","Re","l","g","N","x","v","re","xe","ce","le","ue","fe","pe","Ie","me","Ae","nn","on","t","Ke","nt","Ut","dt","sn","Vt","ht","rn","Gt","ln","r","an","cn","gt","ze","fn","k","rt","C","zt","un","Ee","dn","Pe","Ht","Ye","de","we","He","mt","hn","ot","gn","Ft","it","We","mn","pn","Ge","he","I","Se","yn","f","oe","_n","q","lt","at","st","wn","Fe","bn","En","An","Sn","Tn","jt","pt","Mn","Ln","vn","kn","On","Bn","Ne","In","Pn","Yn","Dn","yt","qt","_t","ge","Je","Xn","ct","Cn","Kt","Qe","Rn","Nn","Un","Vn","Gn","zn","Hn","Wt","H","Fn","jn","qn","Kn","T","_","V","Y","Wn","Jn","Qn","Zn","xn","$n","eo","to","no","oo","io","so","ro","lo","ao","Jt","co","fo","Yi","uo","ho","wt","bt","ke","go","Et","At","mo","Zt","po","yo","Ze","ye","_o","wo","bo","c","Eo","Ao","So","To","Mo","Lo","Me","se","Le","z","qe","ut","De","Xe","Ce","vo","ko","Oo","Qt","Bo","Io","Po","St","Yo","Do","je","Xo","Co","Ro","No","Tt","Uo","Vo","Go","Mt","Lt","zo","Ho","Fo","jo","qo","ft","xt","$t","Ko","Wo","Jo","Qo","Zo","xo","$o","ei","ti","ni","oi","ii","si","ri","li","ai","en","vt","kt","$e","Ot","Bt","ci","fi","ui","It","Pt","hi","di","Yt","Xt","Dt","gi","mi","pi","yi","tn","_i","ve","wi","Ve","tt","be","bi","_e","Ct","et","Si","Be","Oe","Ti","Ei","Ai","Mi","d","Li","vi","ki","Oi","Rt","Bi","Nt","Ii","Xi","noop","assign","tar","src","run","blank_object","run_all","fns","is_function","thing","safe_not_equal","is_empty","obj","subscribe","store","callbacks","callback","unsub","component_subscribe","component","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","get_slot_changes","dirty","lets","merged","len","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","get_all_dirty_from_scope","length","exclude_internal_props","props","result","null_to_empty","value","globals","append","target","node","insert","anchor","detach","destroy_each","iterations","detaching","svg_element","name","text","data","space","empty","listen","event","handler","options","attr","attribute","children","element","set_data","toggle_class","toggle","custom_event","type","detail","bubbles","cancelable","current_component","set_current_component","get_current_component","onMount","onDestroy","createEventDispatcher","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","update_scheduled","schedule_update","flush","add_render_callback","seen_callbacks","flushidx","saved_component","update","$$","flush_render_callbacks","filtered","targets","outroing","outros","group_outros","check_outros","transition_in","block","local","transition_out","ensure_array_like","array_like_or_iterator","create_component","mount_component","fragment","after_update","new_on_destroy","destroy_component","make_dirty","init","instance","create_fragment","not_equal","append_styles","parent_component","ready","ret","rest","nodes","SvelteComponent","__publicField","index","PUBLIC_VERSION","ExtensionType","ExtensionType2","normalizeExtension","ext","normalizeExtensionPriority","defaultPriority","extensions","extensions2","_b","_a","handlers","queue","onAdd","onRemove","addHandlers","removeHandlers","map","extension","item","list","browserExt","webworkerExt","ObservablePoint","observer","has","prefix","Events","EE","context","once","addListener","emitter","listener","evt","clearEvent","EventEmitter","names","events","listeners","a1","a2","a3","a4","a5","args","module","PI_2","RAD_TO_DEG","DEG_TO_RAD","Point","tempPoint","Matrix","tx","ty","array","transpose","out","pos","newPos","id","angle","cos","sin","c1","tx1","matrix","b1","d1","b2","c2","d2","pivotX","pivotY","scaleX","scaleY","rotation","skewX","skewY","transform","pivot","delta","identityMatrix","tempMatrix","ux","uy","vx","vy","rotationCayley","rotationMatrices","signum","row","_ux","_uy","_vx","_vy","mat","groupD8","ind","rotationSecond","rotationFirst","dx","dy","tempPoints","Rectangle","width","height","bounds","rectangle","strokeWidth","_x","_y","outerLeft","outerRight","outerTop","outerBottom","innerLeft","innerRight","innerTop","innerBottom","other","x02","y02","x0","x1","y0","y1","lb","rb","nx","ny","n00","n10","n01","n11","mx","my","m00","m10","m01","m11","paddingX","paddingY","x2","y2","resolution","eps","uidCache","uid","warnings","v8_0_0","deprecation","version","message","ignoreDepth","stack","NOOP","nextPow2","isPow2","definedProps","key","idHash","createResourceIdFromString","_TextureStyle","bigKey","TextureStyle","_TextureSource","resource","newPixelWidth","newPixelHeight","_resource","TextureSource","BufferImageSource","buffer","format","tempMat","TextureMatrix","texture","clampMargin","uvs","tex","orig","trim","texBase","frame","margin","offset","Texture","source","label","defaultAnchor","defaultBorders","rotate","dynamic","nX","nY","nW","nH","w2","h2","cX","cY","destroySource","updateQuadBounds","padding","sourceWidth","sourceHeight","namesPlugin","extend","_Color","value1","value2","type1","keys1","keys2","alpha","applyToRGB","hexString","alphaString","int","match","color","colord","min","max","Color","cullingMixin","removeItems","arr","startIdx","removeCount","childrenHelperMixin","beginIndex","endIndex","end","range","removed","child","currentIndex","child2","index1","index2","FilterEffect","Pool","ClassType","initialSize","total","PoolGroupClass","Class","stats","pool","BigPool","MaskEffectManagerClass","test","effect","MaskEffectManager","effectsMixin","hasFilters","didChange","findMixin","deep","found","defaultMatrix","Bounds","minX","minY","maxX","maxY","rect","mask","left","right","top","bottom","vertexData","beginOffset","endOffset","localX","localY","matrixPool","boundsPool","getGlobalBounds","skipUpdateTransform","parentTransform","pooledMatrix","updateTransformBackwards","_getGlobalBounds","worldTransform","parentBounds","preserveBounds","parent","warnCount","maxWarnings","warn","getLocalBounds","relativeMatrix","_getLocalBounds","rootContainer","isRoot","relativeTransform","localTransform","checkChildrenDidChange","container","previousData","changeId","measureMixin","localWidth","sign","localHeight","localBoundsCacheData","skipUpdate","onRenderMixin","func","renderGroup","sortMixin","sortChildren","toLocalGlobalMixin","point","position","globalMatrix","from","InstructionSet","instruction","RenderGroup","root","renderGroupChild","childrenToUpdate","assignWithIgnore","ignore","defaultSkew","defaultPivot","defaultScale","UPDATE_COLOR","UPDATE_BLEND","UPDATE_VISIBLE","Container","renderGroupParent","parentRenderGroup","childRenderGroup","size","convertedWidth","convertedHeight","skew","opts","scale","sx","sy","px","py","bgr","valueNumber","destroyChildren","oldChildren","Sprite","roundPixels","skipCache","currentTexture","_bounds","sourceBounds","destroyTextureSource","tempBounds","addMaskBounds","boundsToMask","addMaskLocalBounds","localRoot","relativeMask","getMatrixRelativeToParent","AlphaMask","hitTestFn","ColorMask","StencilMask","currentAdapter","canvas","url","xml","DOMAdapter","adapter","CanvasSource","didResize","ImageSource","UPDATE_PRIORITY","UPDATE_PRIORITY2","TickerListener","priority","ticker","redirect","previous","hard","_Ticker","time","current","count","currentTime","elapsedMS","head","fps","minFPS","minFPMS","maxFPS","shared","system","Ticker","promise","detectVideoAlphaMode","gl","video","resolve","video2","framebuffer","pixel","_VideoSource","reject","VideoSource","convertToList","input","forceTransform","CacheClass","keys","cacheableAssets","parser","cacheableMap","key2","cacheKeys","cachedAssets","val","cacheMap","Cache","sources","autoDetectSource","hasResource","res","Source","resourceToTexture","textureFrom","LoaderParserPriority","LoaderParserPriority2","assertPath","path2","removeUrlParams","escapeRegExp","string","replaceAll","str","find","replace","normalizeStringPosix","allowAboveRoot","lastSegmentLength","lastSlash","dots","code","lastSlashIndex","path","matchFile","matchProtocol","customBaseUrl","customRootUrl","baseUrl","rootUrl","protocol","isAbsolute","trailingSeparator","segments","joined","arg","prevArg","hasRoot","matchedSlash","proto","origpath","start","extIdx","firstNonSlashEnd","startDot","startPart","preDotState","processX","base","ids","depth","tags","createStringVariations","regex","vars","split","isSingleItem","Resolver","bundleId","assetId","assetBundleId","bundleIdentifier","preferOrders","prefer","basePath","rootPath","searchParams","queryValues","asset","alias","manifest","bundle","assets","assetNames","convertedAssets","srcs","aliases","bundleAssetId","bundleIds","keyCheck","loadParser","srcsToUse","src2","aliasesToUse","resolvedAssets","formattedAsset","singleAsset","results","preferredOrder","priorityKey","filteredAssets","preferred","preference","paramConnector","assetData","getUrlExtension","copySearchParams","targetUrl","sourceUrl","_Spritesheet","metaResolution","initialFrameIndex","frameIndex","maxFrames","sourceSize","animations","animName","frameName","destroyBase","Spritesheet","validImages","getCacheableAssets","ignoreMultiPack","out2","spritesheetAsset","loader","imageTexture","imageFilename","imagePath","spritesheet","multiPacks","promises","itemUrl","sp","_resolvedAsset","FederatedEvent","manager","_type","_bubbles","_cancelable","_typeArg","_bubblesArg","_cancelableArg","_viewArg","_detailArg","appleIphone","appleIpod","appleTablet","appleUniversal","androidPhone","androidTablet","amazonPhone","amazonTablet","windowsPhone","windowsTablet","otherBlackBerry","otherBlackBerry10","otherOpera","otherChrome","otherFirefox","isAppleTabletOnIos13","navigator","createMatch","userAgent","isMobile","param","nav","tmp","isMobileJs","KEY_CODE_TAB","DIV_TOUCH_SIZE","DIV_TOUCH_POS_X","DIV_TOUCH_POS_Y","DIV_TOUCH_ZINDEX","DIV_HOOK_SIZE","DIV_HOOK_POS_X","DIV_HOOK_POS_Y","DIV_HOOK_ZINDEX","AccessibilitySystem","renderer","_mobileInfo","div","hookDiv","now","viewWidth","viewHeight","hitArea","boundary","type2","accessibilityTarget","idCounts","createIdFromString","groupId","getTestContext","maxFragmentPrecision","getMaxFragmentPrecision","addProgramDefines","isES300","isFragment","ensurePrecision","maxSupportedPrecision","precision","insertVersion","fragmentNameCache","VertexNameCache","setProgramName","nameCache","stripVersion","processes","programCache","_GlProgram","preprocessorOptions","vertex","processKey","processOptions","GlProgram","attributeFormatData","getAttributeInfoFromFormat","WGSL_TO_VERTEX_TYPES","extractAttributesFromGpuProgram","entryPoint","mainVertStart","arrowFunctionStart","functionArgsSubstring","inputsRegex","extractStructAndGroups","wgsl","linePattern","groupPattern","bindingPattern","namePattern","typePattern","structPattern","structMemberPattern","structName","groups","structs","struct","members","acc","member","name2","group","ShaderStage","ShaderStage2","generateGpuLayoutGroups","layout","generateLayoutHash","removeStructAndGroupDuplicates","vertexStructsAndGroups","fragmentStructsAndGroups","structNameSet","dupeGroupKeySet","GpuProgram","gpuLayout","structsAndGroups","getDefaultUniformValue","_UniformGroup","uniformStructures","uniforms","uniformData","UniformGroup","BindGroup","resources","keyParts","currentResource","tick","RendererType","RendererType2","Shader","gpuProgram","glProgram","compatibleRenderers","groupMap","nameHash","uniformName","groupData","bindTick","groupIndex","bindIndex","uniformsOut","destroyPrograms","bindGroup","gpu","blendModeIds","BLEND","OFFSET","CULLING","DEPTH_TEST","WINDING","DEPTH_MASK","_State","state","State","_Filter","filterManager","output","clearMode","Filter","environments","autoDetectEnvironment","manageImports","env","unsafeEval","unsafeEvalSupported","earcutModule","earcut","holeIndices","dim","hasHoles","outerLen","outerNode","linkedList","triangles","invSize","eliminateHoles","earcutLinked","clockwise","last","signedArea","insertNode","equals","removeNode","filterPoints","again","area","ear","pass","indexCurve","stop","prev","next","isEarHashed","isEar","cureLocalIntersections","splitEarcut","ax","bx","cx","ay","by","cy","pointInTriangle","minZ","zOrder","maxZ","intersects","locallyInside","isValidDiagonal","splitPolygon","getLeftmost","compareX","eliminateHole","hole","bridge","findHoleBridge","bridgeReverse","hx","hy","qx","tanMin","tan","sectorContainsSector","sortLinked","tail","numMerges","pSize","qSize","inSize","leftmost","intersectsPolygon","middleInside","p1","p2","q1","q2","o1","o2","o3","o4","onSegment","num","inside","Node","bp","polygonArea","trianglesArea","sum","holeIndex","CLEAR","CLEAR2","SystemRunner","a0","a6","a7","items","defaultRunners","_AbstractRenderer","config","combinedRunners","systemName","deprecated","isRGBAArray","desiredScreenWidth","desiredScreenHeight","clear","clearColor","runnerIds","runnerId","systems","ClassRef","pipes","pipeAdaptors","adaptors","adaptor","pipe","PipeClass","Adaptor","runner","AbstractRenderer","_isWebGLSupported","isWebGLSupported","failIfMajorPerformanceCaveat","contextOptions","success","loseContext","_isWebGPUSupported","isWebGPUSupported","renderPriority","autoDetectRenderer","RendererClass","finalOptions","rendererType","WebGPURenderer","WebGLRenderer","ResizePlugin","dom","clientWidth","clientHeight","TickerPlugin","oldTicker","parseSvgPath","parse","segment","command","parseValues","number","numbers","SVGToGraphicsPath","svgPath","commands","subpaths","currentSubPath","lastX","lastY","Circle","radius","r2","distance","circle","Ellipse","halfWidth","halfHeight","normx","normy","halfStrokeWidth","innerA","innerB","outerA","outerB","normalizedX","normalizedY","innerEllipse","outerEllipse","ellipse","squaredDistanceToLineSegment","dot","lenSq","xx","yy","Polygon","points","flat","il","polygon","xi","xj","yj","halfStrokeWidthSqrd","iterationLength","pointsDesc","currentPoint","isCornerWithinStroke","pX","pY","cornerX","cornerY","RoundedRectangle","radius2","innerX","innerY","innerWidth","innerHeight","rightBound","bottomBound","BufferUsage","BufferUsage2","Buffer","usage","shrinkToFit","mappedAtCreation","syncGPU","oldData","sizeInBytes","ensureIsBuffer","getGeometryBounds","geometry","attributeId","byteSize","stride","ensureIsAttribute","Geometry","attributes","indexBuffer","topology","destroyBuffers","placeHolderBufferData","placeHolderIndexData","BatchGeometry","attributeBuffer","MAX_TEXTURES","cachedGroups","getTextureBatchBindGroup","textures","generateTextureBatchBindGroup","bindGroupResources","ViewableBuffer","sizeOrBuffer","fastCopy","sourceBuffer","destinationBuffer","lengthDouble","sourceFloat64View","remainingBytes","sourceUint8View","BLEND_TO_NPM","STENCIL_MODES","STENCIL_MODES2","getAdjustedBlendModeBlend","blendMode","textureSource","BatchTextureArray","Batch","BATCH_TICK","_Batcher","vertexSize","indexSize","batchableObject","textureId","instructionSet","elements","textureBatch","firstElement","f32","u32","iBuffer","action","batch","adjustedBlendMode","blendModeChange","indexStart","newSize","newArrayBuffer","newIndexBuffer","Batcher","buildUvs","vertices","verticesStride","verticesOffset","uvsOffset","uvsStride","buildSimpleUvs","transformVertices","multiplyHexColors","color1","color2","r1","g1","g2","BatchableGraphics","indicesOffset","indices","float32View","uint32View","graphics","positions","vertSize","rgb","argb","textureIdAndRound","gpuBuffer","buildCircle","shape","rx","ry","roundedRect","j1","j2","j3","j4","y22","x12","x22","y12","centerX","centerY","centerIndex","closePointEps","curveEps","getOrientationOfPoints","square","innerWeight","outerWeight","verts","ix","iy","ox","oy","exx","eyy","eix","eiy","eox","eoy","round","ex","ey","cx2p0x","cy2p0y","angle0","angle1","startAngle","angleDiff","absAngleDiff","segCount","angleInc","buildLine","lineStyle","flipAlignment","closed","_verticesStride","_verticesOffset","_indicesOffset","style","alignment","orientation","firstPoint","lastPoint","closedShape","closedPath","midPointX","midPointY","indexCount","widthSquared","miterLimitSquared","perpX","perpY","perp1x","perp1y","dist","ratio","dx0","dy0","dx1","dy1","cross","pDist","imx","imy","omx","omy","smallerInsideSegmentSq","insideWeight","smallerInsideDiagonalSq","eps2","triangulateWithHoles","holes","emptyArray","buildMap","rectData","verticesIndex","tempRect","buildContextBatches","gpuContext","geometryData","batches","addTextureToGeometryData","isStroke","shapePath","addShapePathToGeometryData","indexOffset","vertOffset","build","textureUvs","graphicsBatch","lastIndex","close","otherPoints","getHoleArrays","holePoints","textureMatrix","holePrimitives","holeArrays","holePrimitive","GpuGraphicsContext","GraphicsContextRenderData","_GraphicsContextSystem","batchMode","graphicsData","batcher","drawBatches","GraphicsContextSystem","RECURSION_LIMIT","FLT_EPSILON","PATH_DISTANCE_EPSILON","buildAdaptiveBezier","sX","sY","cp1x","cp1y","cp2x","cp2y","eX","eY","smoothness","smoothing","distanceTolerance","begin","recursive","x3","y3","x4","y4","level","x23","y23","x34","y34","x123","y123","x234","y234","x1234","y1234","d3","buildAdaptiveQuadratic","buildArc","steps","cs","buildArcTo","fromX","mm","dd","cc","k1","k2","qy","endAngle","TAU","mapToEllipse","cosPhi","sinPhi","xp","yp","approxUnitArc","ang1","ang2","vectorAngle","getArcCenter","largeArcFlag","sweepFlag","pxp","pyp","rxSq","rySq","pxpSq","pypSq","radicant","centerXp","centerYp","vx1","vy1","vx2","vy2","buildArcToSvg","xAxisRotation","lambda","outCurvePoint","curve","roundedShapeArc","vecFrom","pp","sharpCorner","pRadius","p3","v1","v2","radDirection","drawDirection","halfAngle","cRadius","lenOut","roundedShapeQuadraticCurve","pointLerp","numPoints","thisPoint","nextPoint","lastEdgeLength","lastOffsetDistance","nextEdgeLength","nextOffsetDistance","tempRectangle","ShapePath","graphicsPath2D","fromY","counterclockwise","currentPoly","closePath","sides","corner","sideLength","internalAngle","useQuadratic","fillet","maxFillet","inset","dir","chamfer","radiusX","radiusY","lastShape","lx","ly","tempX","shapePrimitives","shapePrimitive","boundsRect","GraphicsPath","instructions","currentX","currentY","cpx1","cpy1","innerRadius","newGraphicsPath2D","cpx2","cpy2","adjustTransform","lastInstruction","currentMatrix","SVGParser","svg","graphicsContext","session","renderChildren","fillStyle","strokeStyle","f1","s1","parseStyle","pointsString","graphicsPath","parseFloatAttribute","defaultValue","useFill","useStroke","styleParts","stylePart","stroke","fill","_FillGradient","defaultSize","gradientStops","gradient","FillGradient","repetitionMap","FillPattern","repetition","convertFillInputToFillStyle","defaultStyle","fillStyleToParse","styleToMerge","temp","pattern","sourceStyle","tmpPoint","_GraphicsContext","clone","tint","dw","dh","holePath","transformedX","transformedY","cpx","cpy","hasHit","shapes","transformedPoint","holeShapes","GraphicsContext","EventsTickerClass","paused","rootPointerEvent","EventsTicker","FederatedMouseEvent","globalPos","_canBubbleArg","_screenXArg","_screenYArg","_clientXArg","_clientYArg","_ctrlKeyArg","_altKeyArg","_shiftKeyArg","_metaKeyArg","_buttonArg","_relatedTargetArg","FederatedPointerEvent","FederatedWheelEvent","PROPAGATION_LIMIT","tempHitLocation","tempLocalMapping","EventBoundary","rootTarget","mappers","invertedPath","composedPath","propagationPath","currentTarget","eventMode","location","testFn","pruneFn","shouldReturn","nestedHit","isInteractive","isInteractiveMode","isInteractiveTarget","relativeLocation","handlerKey","isRightButton","trackingData","isMouse","outTarget","outType","outEvent","leaveEvent","overType","overEvent","overTargetAncestor","enterEvent","allMethods","allowGlobalPointerEvents","pressTarget","clickTarget","clickEvent","clickHistory","wheelEvent","constructor","MOUSE_POINTER_ID","TOUCH_TO_POINTER","_EventSystem","mode","applyStyles","nativeEvent","nativeEvent2","federatedEvent","normalizedEvents","outside","resolutionMultiplier","touch","tempEvent","EventSystem","FederatedContainer","capture","signal","listenerFn","TexturePoolClass","textureOptions","pixelWidth","pixelHeight","antialias","frameWidth","frameHeight","po2Width","po2Height","renderTexture","destroyTextures","TexturePool","FilterPipe","filterEffect","_filterEffect","_container","getFastGlobalBounds","_getGlobalBoundsRecursive","manageEffects","localBounds","viewBounds","advanced","getGlobalRenderableBounds","renderables","renderable","quadGeometry","FilterSystem","filters","filterData","colorTextureSource","blendRequired","enabled","filter","viewPort","inputTexture","backTexture","previousBounds","renderTarget","flip","flop","lastRenderSurface","backgroundResolution","isFinalTarget","filterUniforms","outputFrame","inputSize","inputPixel","inputClamp","globalFrame","outputTexture","filterData2","rootTexture","batchUniforms","outputMatrix","sprite","mappedMatrix","MaskFilter","Graphics","method","_MeshGeometry","positionBuffer","uvBuffer","MeshGeometry","genericFontFamilies","fontStringFromTextStyle","fontSizeString","fontFamilies","fontFamily","contextSettings","_CanvasTextMetrics","lines","lineWidths","lineHeight","maxLineWidth","fontProperties","wordWrap","textKey","font","lineWidth","letterSpacing","useExperimentalLetterSpacing","line","cache","whiteSpace","collapseSpaces","collapseNewlines","canPrependSpaces","wordWrapWidth","tokens","token","currIsBreakingSpace","lastIsBreakingSpace","tokenWidth","characters","char","lastChar","nextChar","characterWidth","isLastToken","newLine","_nextChar","_token","breakWords","_char","_index","_breakWords","metrics","properties","segmenter","CanvasTextMetrics","valuesToIterateForKeys","generateTextStyleKey","prop","addFillStyleKey","addStokeStyleKey","_TextStyle","convertV7Tov8Style","fullStyle","thisKey","_c","_d","TextStyle","oldStyle","defaults","gradientFill","fills","CanvasPoolClass","canvasOptions","minWidth","minHeight","canvasAndContext","CanvasPool","getCanvasFillStyle","fillPattern","fillGradient","AbstractBitmapFont","page","resolveCharacters","chars","startCode","endCode","i2","DynamicBitmapFont","dynamicOptions","requestedFontSize","charList","self","pageData","fontScale","widthScale","maxCharHeight","skipTexture","paddedWidth","paddedHeight","pageData2","xAdvance","newChars","measureCache","first","second","amount","textureResolution","strokeThickness","shadowOptions","dropShadowBlur","dropShadowDistance","descent","getBitmapTextLayout","layoutData","currentLine","previousChar","firstWord","currentWord","nextWord","word","nextLine","adjustedLetterSpacing","adjustedWordWrapWidth","isEnd","charData","spaceWidth","kerning","nextCharWidth","alignCenter","alignRight","alignJustify","measurementData","indy","spaceIndex","totalSpaces","BitmapFontManagerClass","fontFamilyKey","overrideFill","fnt","dynamicFont","bitmapFont","textStyle","flatChars","cacheKey","BitmapFontManager","textStyleToCSS","cssStyles","strokeToCSS","dropShadowToCSS","tagStyleToCSS","dropShadowStyle","templates","tagStyles","tagStyle","cssTagStyle","HTMLTextStyle","toAdd","toRemove","nssvg","nsxhtml","HTMLTextRenderData","foreignObject","svgRoot","styleElement","domElement","tempHTMLTextRenderData","measureHtmlText","fontStyleCSS","htmlTextRenderData","contentBounds","descenderPadding","addBits","srcParts","parts","part","sanitisedPart","findHooksRx","compileHooks","programSrc","hook","extractInputs","fragmentSource","compileInputs","fragments","template","sort","mainInput","finalString","inValue","cleanedString","extractOutputs","extractVariableName","stripVariable","compileOutputs","mainStruct","mainStart","mainEnd","compiledCode","injectBits","templateSrc","fragmentParts","bitCacheMap","CACHE_UID","compileHighShader","bits","cacheId","generateCacheId","compileInputsAndOutputs","compileBits","compileHighShaderGl","vertexFragments","shaderBit","fragmentFragments","compiledVertex","compiledFragment","highFragment","vertexParts","vertexGPUTemplate","fragmentGPUTemplate","vertexGlTemplate","fragmentGlTemplate","globalUniformsBit","globalUniformsBitGl","compileHighShaderGpuProgram","compileHighShaderGlProgram","colorBit","colorBitGl","textureBatchBitGpuCache","generateBindingSrc","maxTextures","bindingIndex","generateSampleSrc","generateTextureBatchBit","textureBatchBitGlCache","generateSampleGlSrc","generateTextureBatchBitGl","roundPixelsBit","roundPixelsBitGl","sampleValues","batchSamplersUniformGroup","GlBatchAdaptor","batcherPipe","batchPipe","tempState","GpuBatchAdaptor","encoder","program","globalUniformsBindGroup","gpuBindGroup","pipeline","BatcherPipe","activeBatch","localUniformBit","localUniformBitGroup2","localUniformBitGl","textureBit","textureBitGl","buildInstructions","renderPipes","collectAllRenderablesAdvanced","collectAllRenderables","rendererPipes","collectAllRenderablesSimple","renderPipeId","AlphaMaskEffect","AlphaMaskPipe","maskedContainer","maskContainer","_maskedContainer","renderMask","filterTexture","maskData","ColorMaskPipe","colorStack","currentColor","_mask","StencilMaskPipe","instructionsLength","renderTargetUid","maskStackIndex","BUFFER_TYPE","BUFFER_TYPE2","GlBuffer","GlBufferSystem","glBuffer","drawType","contextLost","_GlContextSystem","premultipliedAlpha","preferWebGLVersion","common","provokeExt","supports","isWebGl2","GlContextSystem","ensureAttributes","extractedData","attributeData","ensureStartAndStride","buffers","tempStride","tempStart","GL_FORMATS","GL_FORMATS2","GL_TARGETS","GL_TARGETS2","GL_TYPES","GL_TYPES2","infoMap","getGlTypeFromFormat","topologyToGlMap","GlGeometrySystem","nativeVaoExtension","vao","nativeInstancedExtension","bufferSystem","geometryAttributes","shaderAttributes","attribs","strings","_incRefCount","signature","vaoObjectHash","lastBuffer","programAttrib","attributeInfo","instanceCount","glTopology","glType","bigTriangleGeometry","_GlBackBufferSystem","useBackBuffer","bigTriangleProgram","renderTarget2","targetSourceTexture","GlBackBufferSystem","GlColorMaskSystem","colorMask","GlEncoderSystem","shader","skipSync","GlRenderTarget","GpuStencilModesToPixi","GlStencilSystem","stencilState","stencilMode","stencilReference","_stencilCache","UboSystem","uniformGroup","uniformGroupSignature","syncFunction","uboElements","uniformGroupData","synced","WGSL_TO_STD40_SIZE","createUboElementsSTD40","chunkSize","uboElement","lineUpValue","uniformParsers","createUboSyncFunction","parserCode","arrayGenerationFunction","singleSettersMap","funcFragments","parsed","fragmentSrc","loopMatrix","col","uboSyncFunctionsSTD40","uboSyncFunctionsWGSL","generateArraySyncSTD40","offsetToAdd","rowSize","elementSize","remainder","createUboSyncFunctionSTD40","GlUboSystem","GlRenderTargetAdaptor","renderTargetSystem","sourceRenderSurfaceTexture","destinationTexture","originSrc","originDest","glRenderTarget","viewport","gpuRenderTarget","viewPortY","viewPortCache","renderBuffer","_renderTarget","clearColorCache","clearColorArray","resolveTargetFramebuffer","colorTexture","glTexture","viewFramebuffer","msaaRenderBuffer","source2","glInternalFormat","depthStencilRenderBuffer","calculateProjection","pm","flipY","canvasCache","getCanvasTexture","isRenderingToScreen","_RenderTarget","descriptor","colorSource","_size","skipColorTexture","RenderTarget","RenderTargetSystem","renderSurface","currentRenderTargetData","GlRenderTargetSystem","BufferResource","destroyBuffer","generateShaderSyncCode","shaderSystem","headerFragments","addedTextreSystem","blockIndex","textureCount","programData","functionSource","GlProgramData","compileShader","booleanArray","GL_TABLE","GL_TO_GLSL_TYPES","GLSL_TO_VERTEX_TYPES","mapType","typeNames","mapGlToVertexFormat","typeValue","extractAttributesFromGlProgram","sortAttributes","totalAttributes","attribData","getUboData","uniformBlocks","totalUniformsBlocks","uniformBlockIndex","getUniformData","totalUniforms","isArray","logPrettyShaderError","shaderSrc","shaderLog","splitShader","dedupe","lineNumbers","logArgs","fragmentSourceToLog","logProgramError","vertexShader","fragmentShader","generateProgram","glVertShader","glFragShader","webGLProgram","transformFeedbackVaryings","defaultSyncData","GlShaderSystem","isBufferResource","boundIndex","nextIndex","currentBoundUniformGroup","UNIFORM_TO_SINGLE_SETTERS","UNIFORM_TO_ARRAY_SETTERS","generateUniformsSync","uniform","GlUniformGroupSystem","syncData","uniformGroupSyncHash","preFix","mapWebGLBlendModesToPixi","blendMap","_GlStateSystem","diff","GlStateSystem","GlTexture","glUploadBufferImageResource","compressedFormatMap","glUploadCompressedTextureResource","mipWidth","mipHeight","compressed","levelBuffer","glUploadImageResource","webGLVersion","glWidth","glHeight","textureWidth","textureHeight","resourceWidth","resourceHeight","glUploadVideoResource","scaleModeToGlFilter","mipmapScaleModeToGlFilter","wrapModeToGlAddress","compareModeToGlCompare","applyStyleParams","mipmaps","anisotropicExt","glFunctionName","firstParam","forceClamp","firstCreation","castParam","wrapModeS","wrapModeT","wrapModeR","glFilterMode","mapFormatToGlFormat","mapFormatToGlInternalFormat","srgb","bgra8unorm","mapFormatToGlType","BYTES_PER_PIXEL","GlTextureSystem","sampler","boundTextures","biggestDimension","bind","glSampler","pixels","imageData","glRenterTarget","GlGraphicsAdaptor","graphicsPipe","contextSystem","GlMeshAdaptor","meshPipe","mesh","CustomRenderPipe","executeInstructions","RenderGroupPipe","collectRenderGroups","mixHexColors","WHITE_BGR","mixColors","localBGRColor","parentBGRColor","tempContainer","updateRenderGroupTransforms","updateChildRenderGroups","updateRenderGroupTransform","updateTick","childrenAtDepth","updateTransformAndChildren","worldAlpha","updateFlags","updateColorBlendVisibility","groupAlpha","validateRenderables","rebuildRequired","RenderGroupSystem","renderGroups","originalLocalTransform","updateRenderables","BatchableSprite","w0","w1","h0","h1","SpritePipe","_instructionSet","gpuSprite","batchableSprite","_BackgroundSystem","BackgroundSystem","BLEND_MODE_FILTERS","BlendModePipe","imageTypes","_ExtractSystem","image","quality","blob","reader","pixelInfo","link","base64","ExtractSystem","RenderTexture","noColor","GenerateTextureSystem","region","color32BitToUniform","abgr","GlobalUniformSystem","projectionMatrix","worldTransformMatrix","worldColor","currentGlobalUniformData","globalUniformData","saidHello","VERSION","sayHello","HelloSystem","_TextureGCSystem","managedTextures","TextureGCSystem","_ViewSystem","SharedSystems","SharedRenderPipes","DefaultWebGLSystems","DefaultWebGLPipes","DefaultWebGLAdapters","renderPipeAdaptors","systemConfig","BindGroupSystem","device","groupLayout","entries","gpuResource","bufferResource","GpuBufferSystem","UboBatch","minUniformOffsetAlignment","GpuColorMaskSystem","GpuDeviceSystem","requiredFeatures","feature","GpuEncoderSystem","indexFormat","boundPipeline","boundVertexBuffer","boundIndexBuffer","boundBindGroup","GpuStencilSystem","WGSL_ALIGN_SIZE_DATA","createUboElementsWGSL","align","generateArraySyncWGSL","createUboSyncFunctionWGSL","GpuUboSystem","GpuUniformBatchPipe","totalBuffers","duplicate","firstBuffer","commandEncoder","topologyStringToId","getGraphicsStateKey","geometryLayout","shaderKey","getGlobalStateKey","stencilStateId","multiSampleCount","PipelineSystem","multisampleCount","passEncoder","blendModes","keyGen","attributeKeys","stringKey","vertexBuffersLayout","bufferEntry","bufferEntryAttributes","GpuRenderTarget","GpuRenderTargetAdaptor","baseGpuTexture","backGpuTexture","clearValue","colorAttachments","view","resolveTarget","loadOp","depthStencilAttachment","stencilLoadOp","depthLoadOp","renderPassDescriptor","gpuCommands","alphaMode","msaaTexture","GpuRenderTargetSystem","GpuShaderSystem","bindGroups","pipelineLayoutDesc","GpuBlendModesToPixi","GpuStateSystem","gpuUploadBufferImageResource","gpuTexture","bytesPerPixel","blockDataMap","defaultBlockData","gpuUploadCompressedTextureResource","blockData","bytesPerRow","gpuUploadImageResource","gpuUploadVideoResource","GpuMipmapGenerator","mipTexture","arrayLayerCount","renderToSource","mipTextureDescriptor","bindGroupLayout","arrayLayer","srcView","dstMipLevel","dstView","mipLevelSize","GpuTextureSystem","textureDescriptor","bindGroupId","webGPUCanvas","GpuGraphicsAdaptor","localUniforms","localBindGroup","GpuMeshAdapter","DefaultWebGPUSystems","DefaultWebGPUPipes","DefaultWebGPUAdapters","GraphicsPipe","wasBatched","batchClone","graphicsUid","_PlaneGeometry","verticesX","verticesY","sizeX","sizeY","totalSub","xpos","ypos","value3","value4","PlaneGeometry","BatchableMesh","transformedUvs","MeshPipe","meshData","isBatched","batchableMesh","batched","gpuBatchableMesh","gpuMesh","_NineSliceGeometry","scaleW","scaleH","_uvw","_uvh","NineSliceGeometry","NineSliceSpritePipe","tilingBit","tilingBitGl","TilingSpriteShader","tilingUniforms","anchorX","anchorY","uTextureTransform","QuadGeometry","setPositions","tilingSprite","applyMatrix","setUvs","sharedQuad","TilingSpritePipe","tilingSpriteData","couldBatch","canBatch","renderableData","_nonPowOf2wrapping","bitmapFontTextParser","txt","rawData","attributeList","itemData","strValue","floatValue","info","distanceField","charNode","letter","bitmapFontXMLParser","bitmapFontXMLStringParser","BitmapFont","textureFrame","frameReal","validExtensions","bitmapFontCachePlugin","loadBitmapFont","bitmapFontData","pages","textureUrls","pageFile","loadedTextures","_options","localUniformMSDFBit","localUniformMSDFBitGl","mSDFBit","mSDFBitGl","SdfShader","BitmapTextPipe","bitmapText","graphicsRenderable","syncWithProxy","renderableUid","proxyGraphics","bitmapTextLayout","proxyRenderable","worldScale","proxy","HTMLTextPipe","htmlText","gpuText","newKey","htmlTextUid","gpuTextData","isSafari","getPo2TextureFromSource","extractFontFamilies","matches","addFontFamily","fontFamily2","loadFontAsBase64","loadFontCSS","dataSrc","FontStylePromiseCache","getFontCss","defaultOptions","fontPromises","getSVGUrl","fontCSS","htmlTextData","getTemporaryCanvasFromImage","loadSVGImage","delay","resolve2","HTMLTextSystem","measured","svgURL","activeTexture","CanvasTextPipe","textUid","checkRow","checkColumn","getCanvasBoundingBox","CanvasTextSystem","_renderer","_textKey","trimmed","linePositionX","linePositionY","passesCount","isShadowPass","dsOffsetText","dsOffsetShadow","dropShadowColor","dropShadowAlpha","linePositionYShift","currentPosition","stringArray","previousWidth","currentWidth","currentChar","textStr","DEFAULT_FILL","DEFAULT_ALPHA","UPDATE_STROKE_THRESHOLD","lastScale","getGraphicsStyle","PIXI.Color","drawShape","fillGraphics","PIXI.Graphics","strokeGraphics","drawEllipse","drawPolygon","flattend","xy","drawRectangle","getCurrentScale","viewer","containerWidth","redrawStage","viewportBounds","drawFn","offsetX","offsetY","createStage","PIXI.Container","PIXI.autoDetectRenderer","annotationShapes","selectedIds","hovered","addAnnotation","annotation","selector","rendered","ShapeType","removeAnnotation","updateAnnotation","oldValue","newValue","redrawAnnotation","resize","setFilter","visible","setHovered","annotationId","setSelected","selection","nextIds","toSelect","toDeselect","setStyle","setVisible","$$props","hover","dispatch","stage","resoleStage","waitStage","lastPress","getImageXY","offsetXY","OpenSeadragon","onCanvasPress","onPointerMove","hit","$hover","onCanvasRelease","originalEvent","currentViewportBounds","offsetWidth","offsetHeight","moveHandler","updateViewportState","intersecting","$$invalidate","created","updated","deleted","$selection","getRandomValues","rnds8","rng","byteToHex","unsafeStringify","native","v4","buf","rnds","registerShapeUtil","util","boundsFromPoints","EllipseUtil","rot","tdx","tdy","PolygonUtil","RectangleUtil","handle_changes","each_value","polygon0","polygon0_points_value","polygon1","polygon1_points_value","func_1","each_blocks","grab","computedStyle","viewportScale","editor","handle","geom","idx","isTouch","rect_class_value","circle_r_value","create_if_block","touched","onPointerDown","onPointerUp","handleSize","rect0","rect0_x_value","rect0_y_value","rect0_width_value","rect0_height_value","rect1","rect1_x_value","rect1_y_value","rect1_width_value","rect1_height_value","rect2","rect2_x_value","rect2_y_value","rect2_width_value","rect3","rect3_x_value","rect3_y_value","rect3_height_value","rect4","rect4_x_value","rect4_y_value","rect4_width_value","rect5","rect5_x_value","rect5_y_value","rect5_height_value","handle0_changes","handle1_changes","handle2_changes","handle3_changes","initialBounds","grabbedHandle","origin","initialShape","onGrab","onRelease","computeStyle","computed","fillOpacity","css","editorComponent","layerTransform","onUpdateViewport","zoom","flipped","drawingMode","tool","toolComponent","cleanup","addEventListener","osdHandler","osdName","dragHandler","editormount_changes","previous_key","drawingEnabled","preferredDrawingMode","toolName","listDrawingTools","user","drawingEl","storeObserver","editableAnnotations","grabbedAt","trackSelection","selected","editableIds","editable","change","toolTransform","onChangeSelected","GRACE_PERIOD","isUpdate","onSelectionCreated","uuidv4","getEditor","_getEditor","$$value","getTool","rect_height_value","text_1","text_1_font_size_value","text_1_x_value","g_1","t_value","hAlign","setWidth","textEl","rectEl","polygon_points_value","svgpresencelabel_changes","getHighestPoint","highestPoint","rect_x_value","rect_y_value","rect_width_value","svgpresencepolygon_changes","svgpresencerectangle_changes","create_if_block_1","show_if","provider","trackedAnnotations","onSelectionChange","selectedBy","deletedIds","tracked","setTheme","theme","itemCount","fullyLoaded","detected","detectTheme","_fitBounds","containerBounds","pr","pb","pl","padX","padY","padW","padH","fitBounds","fitBoundsWithConstraints","createOSDAnnotator","fillDefaults","PointerSelectAction","createImageAnnotatorState","undoStack","createUndoStack","lifecycle","createLifecyleObserver","currentUser","createAnonymousGuest","keyboardCommands","initKeyboardCommands","displayLayer","PixiLayer","presenceLayer","SVGPresenceLayer","drawingLayer","SVGDrawingLayer","_setTheme","createBaseAnnotator","destroy","_fitBoundsWithConstraints","getUser","registerDrawingTool","registerTool","registerShapeEditor","shapeType","registerEditor","setDrawingTool","setDrawingEnabled","setPresenceProvider","setUser","defaultColorProvider","_defaultColorProvider","_PointerSelectAction","createBody","_createBody","createImageAnnotator","_createImageAnnotator","_ShapeType","W3CImageFormat","_W3CImageFormat"],"mappings":"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","x_google_ignoreList":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,380,381,382,383,409,410,411,412,413,414,415,416,417,418,419]}